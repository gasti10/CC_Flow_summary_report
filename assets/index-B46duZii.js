var Uv=Object.defineProperty,qv=Object.defineProperties;var Lv=Object.getOwnPropertyDescriptors;var wg=Object.getOwnPropertySymbols,zv=Object.getPrototypeOf,$v=Object.prototype.hasOwnProperty,Bv=Object.prototype.propertyIsEnumerable,Pv=Reflect.get;var Mu=(r,t,a)=>t in r?Uv(r,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[t]=a,$e=(r,t)=>{for(var a in t||(t={}))$v.call(t,a)&&Mu(r,a,t[a]);if(wg)for(var a of wg(t))Bv.call(t,a)&&Mu(r,a,t[a]);return r},at=(r,t)=>qv(r,Lv(t));var Iv=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports);var fe=(r,t,a)=>Mu(r,typeof t!="symbol"?t+"":t,a);var Qt=(r,t,a)=>Pv(zv(r),a,t);var _=(r,t,a)=>new Promise((n,o)=>{var u=m=>{try{g(a.next(m))}catch(p){o(p)}},h=m=>{try{g(a.throw(m))}catch(p){o(p)}},g=m=>m.done?n(m.value):Promise.resolve(m.value).then(u,h);g((a=a.apply(r,t)).next())});import{j as l,u as la,a as Hv,Q as Yv,b as Vv}from"./query-WMABWADb.js";import{r as M,R as io,m as _i,i as vi,a as Fv,e as Qv,c as gp,b as wt,v as Gv,t as Kv,d as Wv,f as Xv,A as Jv,P as gd,B as on,C as $a,g as cn,L as un,p as dn,h as hn,j as fn,k as pd,l as Zv,n as eb,o as pp,T as tb,q as ab}from"./charts-BjiXmMKK.js";import{r as sb,a as rb,g as yp}from"./vendor-CQVgkexN.js";import{u as nb,a as vp,b as bp,N as ib,H as lb,R as ob,c as di}from"./router-VCGYaERu.js";var V1=Iv((nt,Li)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function a(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function n(o){if(o.ep)return;o.ep=!0;const u=a(o);fetch(o.href,u)}})();var Uu={exports:{}},hi={},qu={exports:{}},Lu={};var jg;function cb(){return jg||(jg=1,(function(r){function t(A,Q){var te=A.length;A.push(Q);e:for(;0<te;){var le=te-1>>>1,S=A[le];if(0<o(S,Q))A[le]=Q,A[te]=S,te=le;else break e}}function a(A){return A.length===0?null:A[0]}function n(A){if(A.length===0)return null;var Q=A[0],te=A.pop();if(te!==Q){A[0]=te;e:for(var le=0,S=A.length,N=S>>>1;le<N;){var $=2*(le+1)-1,P=A[$],ce=$+1,ue=A[ce];if(0>o(P,te))ce<S&&0>o(ue,P)?(A[le]=ue,A[ce]=te,le=ce):(A[le]=P,A[$]=te,le=$);else if(ce<S&&0>o(ue,te))A[le]=ue,A[ce]=te,le=ce;else break e}}return Q}function o(A,Q){var te=A.sortIndex-Q.sortIndex;return te!==0?te:A.id-Q.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var h=Date,g=h.now();r.unstable_now=function(){return h.now()-g}}var m=[],p=[],y=1,x=null,v=3,j=!1,E=!1,D=!1,O=!1,H=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate!="undefined"?setImmediate:null;function ee(A){for(var Q=a(p);Q!==null;){if(Q.callback===null)n(p);else if(Q.startTime<=A)n(p),Q.sortIndex=Q.expirationTime,t(m,Q);else break;Q=a(p)}}function ae(A){if(D=!1,ee(A),!E)if(a(m)!==null)E=!0,Y||(Y=!0,W());else{var Q=a(p);Q!==null&&xe(ae,Q.startTime-A)}}var Y=!1,re=-1,T=5,C=-1;function G(){return O?!0:!(r.unstable_now()-C<T)}function z(){if(O=!1,Y){var A=r.unstable_now();C=A;var Q=!0;try{e:{E=!1,D&&(D=!1,U(re),re=-1),j=!0;var te=v;try{t:{for(ee(A),x=a(m);x!==null&&!(x.expirationTime>A&&G());){var le=x.callback;if(typeof le=="function"){x.callback=null,v=x.priorityLevel;var S=le(x.expirationTime<=A);if(A=r.unstable_now(),typeof S=="function"){x.callback=S,ee(A),Q=!0;break t}x===a(m)&&n(m),ee(A)}else n(m);x=a(m)}if(x!==null)Q=!0;else{var N=a(p);N!==null&&xe(ae,N.startTime-A),Q=!1}}break e}finally{x=null,v=te,j=!1}Q=void 0}}finally{Q?W():Y=!1}}}var W;if(typeof q=="function")W=function(){q(z)};else if(typeof MessageChannel!="undefined"){var de=new MessageChannel,ge=de.port2;de.port1.onmessage=z,W=function(){ge.postMessage(null)}}else W=function(){H(z,0)};function xe(A,Q){re=H(function(){A(r.unstable_now())},Q)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(A){A.callback=null},r.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<A?Math.floor(1e3/A):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_next=function(A){switch(v){case 1:case 2:case 3:var Q=3;break;default:Q=v}var te=v;v=Q;try{return A()}finally{v=te}},r.unstable_requestPaint=function(){O=!0},r.unstable_runWithPriority=function(A,Q){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var te=v;v=A;try{return Q()}finally{v=te}},r.unstable_scheduleCallback=function(A,Q,te){var le=r.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?le+te:le):te=le,A){case 1:var S=-1;break;case 2:S=250;break;case 5:S=1073741823;break;case 4:S=1e4;break;default:S=5e3}return S=te+S,A={id:y++,callback:Q,priorityLevel:A,startTime:te,expirationTime:S,sortIndex:-1},te>le?(A.sortIndex=te,t(p,A),a(m)===null&&A===a(p)&&(D?(U(re),re=-1):D=!0,xe(ae,te-le))):(A.sortIndex=S,t(m,A),E||j||(E=!0,Y||(Y=!0,W()))),A},r.unstable_shouldYield=G,r.unstable_wrapCallback=function(A){var Q=v;return function(){var te=v;v=Q;try{return A.apply(this,arguments)}finally{v=te}}}})(Lu)),Lu}var Sg;function ub(){return Sg||(Sg=1,qu.exports=cb()),qu.exports}var _g;function db(){if(_g)return hi;_g=1;var r=ub(),t=sb(),a=rb();function n(e){var s="https://react.dev/errors/"+e;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)s+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var s=e,i=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do s=e,(s.flags&4098)!==0&&(i=s.return),e=s.return;while(e)}return s.tag===3?i:null}function h(e){if(e.tag===13){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function g(e){if(u(e)!==e)throw Error(n(188))}function m(e){var s=e.alternate;if(!s){if(s=u(e),s===null)throw Error(n(188));return s!==e?null:e}for(var i=e,c=s;;){var d=i.return;if(d===null)break;var f=d.alternate;if(f===null){if(c=d.return,c!==null){i=c;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===i)return g(d),e;if(f===c)return g(d),s;f=f.sibling}throw Error(n(188))}if(i.return!==c.return)i=d,c=f;else{for(var b=!1,w=d.child;w;){if(w===i){b=!0,i=d,c=f;break}if(w===c){b=!0,c=d,i=f;break}w=w.sibling}if(!b){for(w=f.child;w;){if(w===i){b=!0,i=f,c=d;break}if(w===c){b=!0,c=f,i=d;break}w=w.sibling}if(!b)throw Error(n(189))}}if(i.alternate!==c)throw Error(n(190))}if(i.tag!==3)throw Error(n(188));return i.stateNode.current===i?e:s}function p(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e;for(e=e.child;e!==null;){if(s=p(e),s!==null)return s;e=e.sibling}return null}var y=Object.assign,x=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),U=Symbol.for("react.consumer"),q=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function W(e){return e===null||typeof e!="object"?null:(e=z&&e[z]||e["@@iterator"],typeof e=="function"?e:null)}var de=Symbol.for("react.client.reference");function ge(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===de?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case E:return"Fragment";case O:return"Profiler";case D:return"StrictMode";case ae:return"Suspense";case Y:return"SuspenseList";case C:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case j:return"Portal";case q:return(e.displayName||"Context")+".Provider";case U:return(e._context.displayName||"Context")+".Consumer";case ee:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case re:return s=e.displayName||null,s!==null?s:ge(e.type)||"Memo";case T:s=e._payload,e=e._init;try{return ge(e(s))}catch(i){}}return null}var xe=Array.isArray,A=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},le=[],S=-1;function N(e){return{current:e}}function $(e){0>S||(e.current=le[S],le[S]=null,S--)}function P(e,s){S++,le[S]=e.current,e.current=s}var ce=N(null),ue=N(null),ie=N(null),he=N(null);function k(e,s){switch(P(ie,s),P(ue,e),P(ce,null),s.nodeType){case 9:case 11:e=(e=s.documentElement)&&(e=e.namespaceURI)?Km(e):0;break;default:if(e=s.tagName,s=s.namespaceURI)s=Km(s),e=Wm(s,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}$(ce),P(ce,e)}function I(){$(ce),$(ue),$(ie)}function J(e){e.memoizedState!==null&&P(he,e);var s=ce.current,i=Wm(s,e.type);s!==i&&(P(ue,e),P(ce,i))}function Z(e){ue.current===e&&($(ce),$(ue)),he.current===e&&($(he),ii._currentValue=te)}var me=Object.prototype.hasOwnProperty,ye=r.unstable_scheduleCallback,pe=r.unstable_cancelCallback,De=r.unstable_shouldYield,je=r.unstable_requestPaint,qe=r.unstable_now,Se=r.unstable_getCurrentPriorityLevel,Le=r.unstable_ImmediatePriority,it=r.unstable_UserBlockingPriority,Wt=r.unstable_NormalPriority,$t=r.unstable_LowPriority,Ea=r.unstable_IdlePriority,ht=r.log,Bt=r.unstable_setDisableYieldValue,We=null,He=null;function yt(e){if(typeof ht=="function"&&Bt(e),He&&typeof He.setStrictMode=="function")try{He.setStrictMode(We,e)}catch(s){}}var vt=Math.clz32?Math.clz32:Pt,As=Math.log,oa=Math.LN2;function Pt(e){return e>>>=0,e===0?32:31-(As(e)/oa|0)|0}var ca=256,ks=4194304;function Rs(e){var s=e&42;if(s!==0)return s;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function zi(e,s,i){var c=e.pendingLanes;if(c===0)return 0;var d=0,f=e.suspendedLanes,b=e.pingedLanes;e=e.warmLanes;var w=c&134217727;return w!==0?(c=w&~f,c!==0?d=Rs(c):(b&=w,b!==0?d=Rs(b):i||(i=w&~e,i!==0&&(d=Rs(i))))):(w=c&~f,w!==0?d=Rs(w):b!==0?d=Rs(b):i||(i=c&~e,i!==0&&(d=Rs(i)))),d===0?0:s!==0&&s!==d&&(s&f)===0&&(f=d&-d,i=s&-s,f>=i||f===32&&(i&4194048)!==0)?s:d}function gn(e,s){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&s)===0}function j0(e,s){switch(e){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ad(){var e=ca;return ca<<=1,(ca&4194048)===0&&(ca=256),e}function kd(){var e=ks;return ks<<=1,(ks&62914560)===0&&(ks=4194304),e}function So(e){for(var s=[],i=0;31>i;i++)s.push(e);return s}function pn(e,s){e.pendingLanes|=s,s!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function S0(e,s,i,c,d,f){var b=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var w=e.entanglements,R=e.expirationTimes,F=e.hiddenUpdates;for(i=b&~i;0<i;){var se=31-vt(i),oe=1<<se;w[se]=0,R[se]=-1;var K=F[se];if(K!==null)for(F[se]=null,se=0;se<K.length;se++){var X=K[se];X!==null&&(X.lane&=-536870913)}i&=~oe}c!==0&&Rd(e,c,0),f!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=f&~(b&~s))}function Rd(e,s,i){e.pendingLanes|=s,e.suspendedLanes&=~s;var c=31-vt(s);e.entangledLanes|=s,e.entanglements[c]=e.entanglements[c]|1073741824|i&4194090}function Md(e,s){var i=e.entangledLanes|=s;for(e=e.entanglements;i;){var c=31-vt(i),d=1<<c;d&s|e[c]&s&&(e[c]|=s),i&=~d}}function _o(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function No(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ud(){var e=Q.p;return e!==0?e:(e=window.event,e===void 0?32:gg(e.type))}function _0(e,s){var i=Q.p;try{return Q.p=e,s()}finally{Q.p=i}}var rs=Math.random().toString(36).slice(2),qt="__reactFiber$"+rs,It="__reactProps$"+rs,ir="__reactContainer$"+rs,Co="__reactEvents$"+rs,N0="__reactListeners$"+rs,C0="__reactHandles$"+rs,qd="__reactResources$"+rs,yn="__reactMarker$"+rs;function Eo(e){delete e[qt],delete e[It],delete e[Co],delete e[N0],delete e[C0]}function lr(e){var s=e[qt];if(s)return s;for(var i=e.parentNode;i;){if(s=i[ir]||i[qt]){if(i=s.alternate,s.child!==null||i!==null&&i.child!==null)for(e=eg(e);e!==null;){if(i=e[qt])return i;e=eg(e)}return s}e=i,i=e.parentNode}return null}function or(e){if(e=e[qt]||e[ir]){var s=e.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return e}return null}function vn(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e.stateNode;throw Error(n(33))}function cr(e){var s=e[qd];return s||(s=e[qd]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ct(e){e[yn]=!0}var Ld=new Set,zd={};function Ms(e,s){ur(e,s),ur(e+"Capture",s)}function ur(e,s){for(zd[e]=s,e=0;e<s.length;e++)Ld.add(s[e])}var E0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$d={},Bd={};function T0(e){return me.call(Bd,e)?!0:me.call($d,e)?!1:E0.test(e)?Bd[e]=!0:($d[e]=!0,!1)}function $i(e,s,i){if(T0(s))if(i===null)e.removeAttribute(s);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){e.removeAttribute(s);return}}e.setAttribute(s,""+i)}}function Bi(e,s,i){if(i===null)e.removeAttribute(s);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttribute(s,""+i)}}function Ba(e,s,i,c){if(c===null)e.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(s,i,""+c)}}var To,Pd;function dr(e){if(To===void 0)try{throw Error()}catch(i){var s=i.stack.trim().match(/\n( *(at )?)/);To=s&&s[1]||"",Pd=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+To+e+Pd}var Do=!1;function Oo(e,s){if(!e||Do)return"";Do=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(X){var K=X}Reflect.construct(e,[],oe)}else{try{oe.call()}catch(X){K=X}e.call(oe.prototype)}}else{try{throw Error()}catch(X){K=X}(oe=e())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(X){if(X&&K&&typeof X.stack=="string")return[X.stack,K.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=c.DetermineComponentFrameRoot(),b=f[0],w=f[1];if(b&&w){var R=b.split(`
`),F=w.split(`
`);for(d=c=0;c<R.length&&!R[c].includes("DetermineComponentFrameRoot");)c++;for(;d<F.length&&!F[d].includes("DetermineComponentFrameRoot");)d++;if(c===R.length||d===F.length)for(c=R.length-1,d=F.length-1;1<=c&&0<=d&&R[c]!==F[d];)d--;for(;1<=c&&0<=d;c--,d--)if(R[c]!==F[d]){if(c!==1||d!==1)do if(c--,d--,0>d||R[c]!==F[d]){var se=`
`+R[c].replace(" at new "," at ");return e.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",e.displayName)),se}while(1<=c&&0<=d);break}}}finally{Do=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?dr(i):""}function D0(e){switch(e.tag){case 26:case 27:case 5:return dr(e.type);case 16:return dr("Lazy");case 13:return dr("Suspense");case 19:return dr("SuspenseList");case 0:case 15:return Oo(e.type,!1);case 11:return Oo(e.type.render,!1);case 1:return Oo(e.type,!0);case 31:return dr("Activity");default:return""}}function Id(e){try{var s="";do s+=D0(e),e=e.return;while(e);return s}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}function ua(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Hd(e){var s=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function O0(e){var s=Hd(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,s),c=""+e[s];if(!e.hasOwnProperty(s)&&typeof i!="undefined"&&typeof i.get=="function"&&typeof i.set=="function"){var d=i.get,f=i.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return d.call(this)},set:function(b){c=""+b,f.call(this,b)}}),Object.defineProperty(e,s,{enumerable:i.enumerable}),{getValue:function(){return c},setValue:function(b){c=""+b},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}function Pi(e){e._valueTracker||(e._valueTracker=O0(e))}function Yd(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var i=s.getValue(),c="";return e&&(c=Hd(e)?e.checked?"true":"false":e.value),e=c,e!==i?(s.setValue(e),!0):!1}function Ii(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(s){return e.body}}var A0=/[\n"\\]/g;function da(e){return e.replace(A0,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Ao(e,s,i,c,d,f,b,w){e.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.type=b:e.removeAttribute("type"),s!=null?b==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+ua(s)):e.value!==""+ua(s)&&(e.value=""+ua(s)):b!=="submit"&&b!=="reset"||e.removeAttribute("value"),s!=null?ko(e,b,ua(s)):i!=null?ko(e,b,ua(i)):c!=null&&e.removeAttribute("value"),d==null&&f!=null&&(e.defaultChecked=!!f),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?e.name=""+ua(w):e.removeAttribute("name")}function Vd(e,s,i,c,d,f,b,w){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),s!=null||i!=null){if(!(f!=="submit"&&f!=="reset"||s!=null))return;i=i!=null?""+ua(i):"",s=s!=null?""+ua(s):i,w||s===e.value||(e.value=s),e.defaultValue=s}c=c!=null?c:d,c=typeof c!="function"&&typeof c!="symbol"&&!!c,e.checked=w?e.checked:!!c,e.defaultChecked=!!c,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(e.name=b)}function ko(e,s,i){s==="number"&&Ii(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function hr(e,s,i,c){if(e=e.options,s){s={};for(var d=0;d<i.length;d++)s["$"+i[d]]=!0;for(i=0;i<e.length;i++)d=s.hasOwnProperty("$"+e[i].value),e[i].selected!==d&&(e[i].selected=d),d&&c&&(e[i].defaultSelected=!0)}else{for(i=""+ua(i),s=null,d=0;d<e.length;d++){if(e[d].value===i){e[d].selected=!0,c&&(e[d].defaultSelected=!0);return}s!==null||e[d].disabled||(s=e[d])}s!==null&&(s.selected=!0)}}function Fd(e,s,i){if(s!=null&&(s=""+ua(s),s!==e.value&&(e.value=s),i==null)){e.defaultValue!==s&&(e.defaultValue=s);return}e.defaultValue=i!=null?""+ua(i):""}function Qd(e,s,i,c){if(s==null){if(c!=null){if(i!=null)throw Error(n(92));if(xe(c)){if(1<c.length)throw Error(n(93));c=c[0]}i=c}i==null&&(i=""),s=i}i=ua(s),e.defaultValue=i,c=e.textContent,c===i&&c!==""&&c!==null&&(e.value=c)}function fr(e,s){if(s){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=s;return}}e.textContent=s}var k0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gd(e,s,i){var c=s.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?c?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="":c?e.setProperty(s,i):typeof i!="number"||i===0||k0.has(s)?s==="float"?e.cssFloat=i:e[s]=(""+i).trim():e[s]=i+"px"}function Kd(e,s,i){if(s!=null&&typeof s!="object")throw Error(n(62));if(e=e.style,i!=null){for(var c in i)!i.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?e.setProperty(c,""):c==="float"?e.cssFloat="":e[c]="");for(var d in s)c=s[d],s.hasOwnProperty(d)&&i[d]!==c&&Gd(e,d,c)}else for(var f in s)s.hasOwnProperty(f)&&Gd(e,f,s[f])}function Ro(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var R0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),M0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Hi(e){return M0.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Mo=null;function Uo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var mr=null,gr=null;function Wd(e){var s=or(e);if(s&&(e=s.stateNode)){var i=e[It]||null;e:switch(e=s.stateNode,s.type){case"input":if(Ao(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),s=i.name,i.type==="radio"&&s!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+da(""+s)+'"][type="radio"]'),s=0;s<i.length;s++){var c=i[s];if(c!==e&&c.form===e.form){var d=c[It]||null;if(!d)throw Error(n(90));Ao(c,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<i.length;s++)c=i[s],c.form===e.form&&Yd(c)}break e;case"textarea":Fd(e,i.value,i.defaultValue);break e;case"select":s=i.value,s!=null&&hr(e,!!i.multiple,s,!1)}}}var qo=!1;function Xd(e,s,i){if(qo)return e(s,i);qo=!0;try{var c=e(s);return c}finally{if(qo=!1,(mr!==null||gr!==null)&&(Tl(),mr&&(s=mr,e=gr,gr=mr=null,Wd(s),e)))for(s=0;s<e.length;s++)Wd(e[s])}}function bn(e,s){var i=e.stateNode;if(i===null)return null;var c=i[It]||null;if(c===null)return null;i=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(n(231,s,typeof i));return i}var Pa=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Lo=!1;if(Pa)try{var xn={};Object.defineProperty(xn,"passive",{get:function(){Lo=!0}}),window.addEventListener("test",xn,xn),window.removeEventListener("test",xn,xn)}catch(e){Lo=!1}var ns=null,zo=null,Yi=null;function Jd(){if(Yi)return Yi;var e,s=zo,i=s.length,c,d="value"in ns?ns.value:ns.textContent,f=d.length;for(e=0;e<i&&s[e]===d[e];e++);var b=i-e;for(c=1;c<=b&&s[i-c]===d[f-c];c++);return Yi=d.slice(e,1<c?1-c:void 0)}function Vi(e){var s=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&s===13&&(e=13)):e=s,e===10&&(e=13),32<=e||e===13?e:0}function Fi(){return!0}function Zd(){return!1}function Ht(e){function s(i,c,d,f,b){this._reactName=i,this._targetInst=d,this.type=c,this.nativeEvent=f,this.target=b,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(i=e[w],this[w]=i?i(f):f[w]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Fi:Zd,this.isPropagationStopped=Zd,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Fi)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Fi)},persist:function(){},isPersistent:Fi}),s}var Us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qi=Ht(Us),wn=y({},Us,{view:0,detail:0}),U0=Ht(wn),$o,Bo,jn,Gi=y({},wn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Io,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==jn&&(jn&&e.type==="mousemove"?($o=e.screenX-jn.screenX,Bo=e.screenY-jn.screenY):Bo=$o=0,jn=e),$o)},movementY:function(e){return"movementY"in e?e.movementY:Bo}}),eh=Ht(Gi),q0=y({},Gi,{dataTransfer:0}),L0=Ht(q0),z0=y({},wn,{relatedTarget:0}),Po=Ht(z0),$0=y({},Us,{animationName:0,elapsedTime:0,pseudoElement:0}),B0=Ht($0),P0=y({},Us,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),I0=Ht(P0),H0=y({},Us,{data:0}),th=Ht(H0),Y0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},V0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},F0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Q0(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):(e=F0[e])?!!s[e]:!1}function Io(){return Q0}var G0=y({},wn,{key:function(e){if(e.key){var s=Y0[e.key]||e.key;if(s!=="Unidentified")return s}return e.type==="keypress"?(e=Vi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?V0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Io,charCode:function(e){return e.type==="keypress"?Vi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Vi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),K0=Ht(G0),W0=y({},Gi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ah=Ht(W0),X0=y({},wn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Io}),J0=Ht(X0),Z0=y({},Us,{propertyName:0,elapsedTime:0,pseudoElement:0}),ey=Ht(Z0),ty=y({},Gi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ay=Ht(ty),sy=y({},Us,{newState:0,oldState:0}),ry=Ht(sy),ny=[9,13,27,32],Ho=Pa&&"CompositionEvent"in window,Sn=null;Pa&&"documentMode"in document&&(Sn=document.documentMode);var iy=Pa&&"TextEvent"in window&&!Sn,sh=Pa&&(!Ho||Sn&&8<Sn&&11>=Sn),rh=" ",nh=!1;function ih(e,s){switch(e){case"keyup":return ny.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var pr=!1;function ly(e,s){switch(e){case"compositionend":return lh(s);case"keypress":return s.which!==32?null:(nh=!0,rh);case"textInput":return e=s.data,e===rh&&nh?null:e;default:return null}}function oy(e,s){if(pr)return e==="compositionend"||!Ho&&ih(e,s)?(e=Jd(),Yi=zo=ns=null,pr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return sh&&s.locale!=="ko"?null:s.data;default:return null}}var cy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oh(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s==="input"?!!cy[e.type]:s==="textarea"}function ch(e,s,i,c){mr?gr?gr.push(c):gr=[c]:mr=c,s=Ml(s,"onChange"),0<s.length&&(i=new Qi("onChange","change",null,i,c),e.push({event:i,listeners:s}))}var _n=null,Nn=null;function uy(e){Ym(e,0)}function Ki(e){var s=vn(e);if(Yd(s))return e}function uh(e,s){if(e==="change")return s}var dh=!1;if(Pa){var Yo;if(Pa){var Vo="oninput"in document;if(!Vo){var hh=document.createElement("div");hh.setAttribute("oninput","return;"),Vo=typeof hh.oninput=="function"}Yo=Vo}else Yo=!1;dh=Yo&&(!document.documentMode||9<document.documentMode)}function fh(){_n&&(_n.detachEvent("onpropertychange",mh),Nn=_n=null)}function mh(e){if(e.propertyName==="value"&&Ki(Nn)){var s=[];ch(s,Nn,e,Uo(e)),Xd(uy,s)}}function dy(e,s,i){e==="focusin"?(fh(),_n=s,Nn=i,_n.attachEvent("onpropertychange",mh)):e==="focusout"&&fh()}function hy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ki(Nn)}function fy(e,s){if(e==="click")return Ki(s)}function my(e,s){if(e==="input"||e==="change")return Ki(s)}function gy(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var Xt=typeof Object.is=="function"?Object.is:gy;function Cn(e,s){if(Xt(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;var i=Object.keys(e),c=Object.keys(s);if(i.length!==c.length)return!1;for(c=0;c<i.length;c++){var d=i[c];if(!me.call(s,d)||!Xt(e[d],s[d]))return!1}return!0}function gh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ph(e,s){var i=gh(e);e=0;for(var c;i;){if(i.nodeType===3){if(c=e+i.textContent.length,e<=s&&c>=s)return{node:i,offset:s-e};e=c}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=gh(i)}}function yh(e,s){return e&&s?e===s?!0:e&&e.nodeType===3?!1:s&&s.nodeType===3?yh(e,s.parentNode):"contains"in e?e.contains(s):e.compareDocumentPosition?!!(e.compareDocumentPosition(s)&16):!1:!1}function vh(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var s=Ii(e.document);s instanceof e.HTMLIFrameElement;){try{var i=typeof s.contentWindow.location.href=="string"}catch(c){i=!1}if(i)e=s.contentWindow;else break;s=Ii(e.document)}return s}function Fo(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&(s==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||s==="textarea"||e.contentEditable==="true")}var py=Pa&&"documentMode"in document&&11>=document.documentMode,yr=null,Qo=null,En=null,Go=!1;function bh(e,s,i){var c=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Go||yr==null||yr!==Ii(c)||(c=yr,"selectionStart"in c&&Fo(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),En&&Cn(En,c)||(En=c,c=Ml(Qo,"onSelect"),0<c.length&&(s=new Qi("onSelect","select",null,s,i),e.push({event:s,listeners:c}),s.target=yr)))}function qs(e,s){var i={};return i[e.toLowerCase()]=s.toLowerCase(),i["Webkit"+e]="webkit"+s,i["Moz"+e]="moz"+s,i}var vr={animationend:qs("Animation","AnimationEnd"),animationiteration:qs("Animation","AnimationIteration"),animationstart:qs("Animation","AnimationStart"),transitionrun:qs("Transition","TransitionRun"),transitionstart:qs("Transition","TransitionStart"),transitioncancel:qs("Transition","TransitionCancel"),transitionend:qs("Transition","TransitionEnd")},Ko={},xh={};Pa&&(xh=document.createElement("div").style,"AnimationEvent"in window||(delete vr.animationend.animation,delete vr.animationiteration.animation,delete vr.animationstart.animation),"TransitionEvent"in window||delete vr.transitionend.transition);function Ls(e){if(Ko[e])return Ko[e];if(!vr[e])return e;var s=vr[e],i;for(i in s)if(s.hasOwnProperty(i)&&i in xh)return Ko[e]=s[i];return e}var wh=Ls("animationend"),jh=Ls("animationiteration"),Sh=Ls("animationstart"),yy=Ls("transitionrun"),vy=Ls("transitionstart"),by=Ls("transitioncancel"),_h=Ls("transitionend"),Nh=new Map,Wo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wo.push("scrollEnd");function xa(e,s){Nh.set(e,s),Ms(s,[e])}var Ch=new WeakMap;function ha(e,s){if(typeof e=="object"&&e!==null){var i=Ch.get(e);return i!==void 0?i:(s={value:e,source:s,stack:Id(s)},Ch.set(e,s),s)}return{value:e,source:s,stack:Id(s)}}var fa=[],br=0,Xo=0;function Wi(){for(var e=br,s=Xo=br=0;s<e;){var i=fa[s];fa[s++]=null;var c=fa[s];fa[s++]=null;var d=fa[s];fa[s++]=null;var f=fa[s];if(fa[s++]=null,c!==null&&d!==null){var b=c.pending;b===null?d.next=d:(d.next=b.next,b.next=d),c.pending=d}f!==0&&Eh(i,d,f)}}function Xi(e,s,i,c){fa[br++]=e,fa[br++]=s,fa[br++]=i,fa[br++]=c,Xo|=c,e.lanes|=c,e=e.alternate,e!==null&&(e.lanes|=c)}function Jo(e,s,i,c){return Xi(e,s,i,c),Ji(e)}function xr(e,s){return Xi(e,null,null,s),Ji(e)}function Eh(e,s,i){e.lanes|=i;var c=e.alternate;c!==null&&(c.lanes|=i);for(var d=!1,f=e.return;f!==null;)f.childLanes|=i,c=f.alternate,c!==null&&(c.childLanes|=i),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(d=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,d&&s!==null&&(d=31-vt(i),e=f.hiddenUpdates,c=e[d],c===null?e[d]=[s]:c.push(s),s.lane=i|536870912),f):null}function Ji(e){if(50<Jn)throw Jn=0,ru=null,Error(n(185));for(var s=e.return;s!==null;)e=s,s=e.return;return e.tag===3?e.stateNode:null}var wr={};function xy(e,s,i,c){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(e,s,i,c){return new xy(e,s,i,c)}function Zo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ia(e,s){var i=e.alternate;return i===null?(i=Jt(e.tag,s,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=s,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,s=e.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Th(e,s){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=s,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,s=i.dependencies,e.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),e}function Zi(e,s,i,c,d,f){var b=0;if(c=e,typeof e=="function")Zo(e)&&(b=1);else if(typeof e=="string")b=jv(e,i,ce.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case C:return e=Jt(31,i,s,d),e.elementType=C,e.lanes=f,e;case E:return zs(i.children,d,f,s);case D:b=8,d|=24;break;case O:return e=Jt(12,i,s,d|2),e.elementType=O,e.lanes=f,e;case ae:return e=Jt(13,i,s,d),e.elementType=ae,e.lanes=f,e;case Y:return e=Jt(19,i,s,d),e.elementType=Y,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case H:case q:b=10;break e;case U:b=9;break e;case ee:b=11;break e;case re:b=14;break e;case T:b=16,c=null;break e}b=29,i=Error(n(130,e===null?"null":typeof e,"")),c=null}return s=Jt(b,i,s,d),s.elementType=e,s.type=c,s.lanes=f,s}function zs(e,s,i,c){return e=Jt(7,e,c,s),e.lanes=i,e}function ec(e,s,i){return e=Jt(6,e,null,s),e.lanes=i,e}function tc(e,s,i){return s=Jt(4,e.children!==null?e.children:[],e.key,s),s.lanes=i,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}var jr=[],Sr=0,el=null,tl=0,ma=[],ga=0,$s=null,Ha=1,Ya="";function Bs(e,s){jr[Sr++]=tl,jr[Sr++]=el,el=e,tl=s}function Dh(e,s,i){ma[ga++]=Ha,ma[ga++]=Ya,ma[ga++]=$s,$s=e;var c=Ha;e=Ya;var d=32-vt(c)-1;c&=~(1<<d),i+=1;var f=32-vt(s)+d;if(30<f){var b=d-d%5;f=(c&(1<<b)-1).toString(32),c>>=b,d-=b,Ha=1<<32-vt(s)+d|i<<d|c,Ya=f+e}else Ha=1<<f|i<<d|c,Ya=e}function ac(e){e.return!==null&&(Bs(e,1),Dh(e,1,0))}function sc(e){for(;e===el;)el=jr[--Sr],jr[Sr]=null,tl=jr[--Sr],jr[Sr]=null;for(;e===$s;)$s=ma[--ga],ma[ga]=null,Ya=ma[--ga],ma[ga]=null,Ha=ma[--ga],ma[ga]=null}var zt=null,lt=null,Pe=!1,Ps=null,Ta=!1,rc=Error(n(519));function Is(e){var s=Error(n(418,""));throw On(ha(s,e)),rc}function Oh(e){var s=e.stateNode,i=e.type,c=e.memoizedProps;switch(s[qt]=e,s[It]=c,i){case"dialog":Me("cancel",s),Me("close",s);break;case"iframe":case"object":case"embed":Me("load",s);break;case"video":case"audio":for(i=0;i<ei.length;i++)Me(ei[i],s);break;case"source":Me("error",s);break;case"img":case"image":case"link":Me("error",s),Me("load",s);break;case"details":Me("toggle",s);break;case"input":Me("invalid",s),Vd(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Pi(s);break;case"select":Me("invalid",s);break;case"textarea":Me("invalid",s),Qd(s,c.value,c.defaultValue,c.children),Pi(s)}i=c.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||s.textContent===""+i||c.suppressHydrationWarning===!0||Gm(s.textContent,i)?(c.popover!=null&&(Me("beforetoggle",s),Me("toggle",s)),c.onScroll!=null&&Me("scroll",s),c.onScrollEnd!=null&&Me("scrollend",s),c.onClick!=null&&(s.onclick=Ul),s=!0):s=!1,s||Is(e)}function Ah(e){for(zt=e.return;zt;)switch(zt.tag){case 5:case 13:Ta=!1;return;case 27:case 3:Ta=!0;return;default:zt=zt.return}}function Tn(e){if(e!==zt)return!1;if(!Pe)return Ah(e),Pe=!0,!1;var s=e.tag,i;if((i=s!==3&&s!==27)&&((i=s===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||xu(e.type,e.memoizedProps)),i=!i),i&&lt&&Is(e),Ah(e),s===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(n(317));e:{for(e=e.nextSibling,s=0;e;){if(e.nodeType===8)if(i=e.data,i==="/$"){if(s===0){lt=ja(e.nextSibling);break e}s--}else i!=="$"&&i!=="$!"&&i!=="$?"||s++;e=e.nextSibling}lt=null}}else s===27?(s=lt,ws(e.type)?(e=_u,_u=null,lt=e):lt=s):lt=zt?ja(e.stateNode.nextSibling):null;return!0}function Dn(){lt=zt=null,Pe=!1}function kh(){var e=Ps;return e!==null&&(Ft===null?Ft=e:Ft.push.apply(Ft,e),Ps=null),e}function On(e){Ps===null?Ps=[e]:Ps.push(e)}var nc=N(null),Hs=null,Va=null;function is(e,s,i){P(nc,s._currentValue),s._currentValue=i}function Fa(e){e._currentValue=nc.current,$(nc)}function ic(e,s,i){for(;e!==null;){var c=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),e===i)break;e=e.return}}function lc(e,s,i,c){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var f=d.dependencies;if(f!==null){var b=d.child;f=f.firstContext;e:for(;f!==null;){var w=f;f=d;for(var R=0;R<s.length;R++)if(w.context===s[R]){f.lanes|=i,w=f.alternate,w!==null&&(w.lanes|=i),ic(f.return,i,e),c||(b=null);break e}f=w.next}}else if(d.tag===18){if(b=d.return,b===null)throw Error(n(341));b.lanes|=i,f=b.alternate,f!==null&&(f.lanes|=i),ic(b,i,e),b=null}else b=d.child;if(b!==null)b.return=d;else for(b=d;b!==null;){if(b===e){b=null;break}if(d=b.sibling,d!==null){d.return=b.return,b=d;break}b=b.return}d=b}}function An(e,s,i,c){e=null;for(var d=s,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var b=d.alternate;if(b===null)throw Error(n(387));if(b=b.memoizedProps,b!==null){var w=d.type;Xt(d.pendingProps.value,b.value)||(e!==null?e.push(w):e=[w])}}else if(d===he.current){if(b=d.alternate,b===null)throw Error(n(387));b.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(ii):e=[ii])}d=d.return}e!==null&&lc(s,e,i,c),s.flags|=262144}function al(e){for(e=e.firstContext;e!==null;){if(!Xt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ys(e){Hs=e,Va=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Lt(e){return Rh(Hs,e)}function sl(e,s){return Hs===null&&Ys(e),Rh(e,s)}function Rh(e,s){var i=s._currentValue;if(s={context:s,memoizedValue:i,next:null},Va===null){if(e===null)throw Error(n(308));Va=s,e.dependencies={lanes:0,firstContext:s},e.flags|=524288}else Va=Va.next=s;return i}var wy=typeof AbortController!="undefined"?AbortController:function(){var e=[],s=this.signal={aborted:!1,addEventListener:function(i,c){e.push(c)}};this.abort=function(){s.aborted=!0,e.forEach(function(i){return i()})}},jy=r.unstable_scheduleCallback,Sy=r.unstable_NormalPriority,St={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function oc(){return{controller:new wy,data:new Map,refCount:0}}function kn(e){e.refCount--,e.refCount===0&&jy(Sy,function(){e.controller.abort()})}var Rn=null,cc=0,_r=0,Nr=null;function _y(e,s){if(Rn===null){var i=Rn=[];cc=0,_r=du(),Nr={status:"pending",value:void 0,then:function(c){i.push(c)}}}return cc++,s.then(Mh,Mh),s}function Mh(){if(--cc===0&&Rn!==null){Nr!==null&&(Nr.status="fulfilled");var e=Rn;Rn=null,_r=0,Nr=null;for(var s=0;s<e.length;s++)(0,e[s])()}}function Ny(e,s){var i=[],c={status:"pending",value:null,reason:null,then:function(d){i.push(d)}};return e.then(function(){c.status="fulfilled",c.value=s;for(var d=0;d<i.length;d++)(0,i[d])(s)},function(d){for(c.status="rejected",c.reason=d,d=0;d<i.length;d++)(0,i[d])(void 0)}),c}var Uh=A.S;A.S=function(e,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&_y(e,s),Uh!==null&&Uh(e,s)};var Vs=N(null);function uc(){var e=Vs.current;return e!==null?e:Je.pooledCache}function rl(e,s){s===null?P(Vs,Vs.current):P(Vs,s.pool)}function qh(){var e=uc();return e===null?null:{parent:St._currentValue,pool:e}}var Mn=Error(n(460)),Lh=Error(n(474)),nl=Error(n(542)),dc={then:function(){}};function zh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function il(){}function $h(e,s,i){switch(i=e[i],i===void 0?e.push(s):i!==s&&(s.then(il,il),s=i),s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,Ph(e),e;default:if(typeof s.status=="string")s.then(il,il);else{if(e=Je,e!==null&&100<e.shellSuspendCounter)throw Error(n(482));e=s,e.status="pending",e.then(function(c){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=c}},function(c){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,Ph(e),e}throw Un=s,Mn}}var Un=null;function Bh(){if(Un===null)throw Error(n(459));var e=Un;return Un=null,e}function Ph(e){if(e===Mn||e===nl)throw Error(n(483))}var ls=!1;function hc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fc(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function os(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function cs(e,s,i){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,(Ye&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,s=Ji(e),Eh(e,null,i),s}return Xi(e,c,s,i),Ji(e)}function qn(e,s,i){if(s=s.updateQueue,s!==null&&(s=s.shared,(i&4194048)!==0)){var c=s.lanes;c&=e.pendingLanes,i|=c,s.lanes=i,Md(e,i)}}function mc(e,s){var i=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,i===c)){var d=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var b={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};f===null?d=f=b:f=f.next=b,i=i.next}while(i!==null);f===null?d=f=s:f=f.next=s}else d=f=s;i={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:c.shared,callbacks:c.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=s:e.next=s,i.lastBaseUpdate=s}var gc=!1;function Ln(){if(gc){var e=Nr;if(e!==null)throw e}}function zn(e,s,i,c){gc=!1;var d=e.updateQueue;ls=!1;var f=d.firstBaseUpdate,b=d.lastBaseUpdate,w=d.shared.pending;if(w!==null){d.shared.pending=null;var R=w,F=R.next;R.next=null,b===null?f=F:b.next=F,b=R;var se=e.alternate;se!==null&&(se=se.updateQueue,w=se.lastBaseUpdate,w!==b&&(w===null?se.firstBaseUpdate=F:w.next=F,se.lastBaseUpdate=R))}if(f!==null){var oe=d.baseState;b=0,se=F=R=null,w=f;do{var K=w.lane&-536870913,X=K!==w.lane;if(X?(ze&K)===K:(c&K)===K){K!==0&&K===_r&&(gc=!0),se!==null&&(se=se.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Te=e,_e=w;K=s;var Ke=i;switch(_e.tag){case 1:if(Te=_e.payload,typeof Te=="function"){oe=Te.call(Ke,oe,K);break e}oe=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=_e.payload,K=typeof Te=="function"?Te.call(Ke,oe,K):Te,K==null)break e;oe=y({},oe,K);break e;case 2:ls=!0}}K=w.callback,K!==null&&(e.flags|=64,X&&(e.flags|=8192),X=d.callbacks,X===null?d.callbacks=[K]:X.push(K))}else X={lane:K,tag:w.tag,payload:w.payload,callback:w.callback,next:null},se===null?(F=se=X,R=oe):se=se.next=X,b|=K;if(w=w.next,w===null){if(w=d.shared.pending,w===null)break;X=w,w=X.next,X.next=null,d.lastBaseUpdate=X,d.shared.pending=null}}while(!0);se===null&&(R=oe),d.baseState=R,d.firstBaseUpdate=F,d.lastBaseUpdate=se,f===null&&(d.shared.lanes=0),ys|=b,e.lanes=b,e.memoizedState=oe}}function Ih(e,s){if(typeof e!="function")throw Error(n(191,e));e.call(s)}function Hh(e,s){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)Ih(i[e],s)}var Cr=N(null),ll=N(0);function Yh(e,s){e=Za,P(ll,e),P(Cr,s),Za=e|s.baseLanes}function pc(){P(ll,Za),P(Cr,Cr.current)}function yc(){Za=ll.current,$(Cr),$(ll)}var us=0,Ae=null,Qe=null,bt=null,ol=!1,Er=!1,Fs=!1,cl=0,$n=0,Tr=null,Cy=0;function ft(){throw Error(n(321))}function vc(e,s){if(s===null)return!1;for(var i=0;i<s.length&&i<e.length;i++)if(!Xt(e[i],s[i]))return!1;return!0}function bc(e,s,i,c,d,f){return us=f,Ae=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,A.H=e===null||e.memoizedState===null?Tf:Df,Fs=!1,f=i(c,d),Fs=!1,Er&&(f=Fh(s,i,c,d)),Vh(e),f}function Vh(e){A.H=gl;var s=Qe!==null&&Qe.next!==null;if(us=0,bt=Qe=Ae=null,ol=!1,$n=0,Tr=null,s)throw Error(n(300));e===null||Et||(e=e.dependencies,e!==null&&al(e)&&(Et=!0))}function Fh(e,s,i,c){Ae=e;var d=0;do{if(Er&&(Tr=null),$n=0,Er=!1,25<=d)throw Error(n(301));if(d+=1,bt=Qe=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}A.H=Ry,f=s(i,c)}while(Er);return f}function Ey(){var e=A.H,s=e.useState()[0];return s=typeof s.then=="function"?Bn(s):s,e=e.useState()[0],(Qe!==null?Qe.memoizedState:null)!==e&&(Ae.flags|=1024),s}function xc(){var e=cl!==0;return cl=0,e}function wc(e,s,i){s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~i}function jc(e){if(ol){for(e=e.memoizedState;e!==null;){var s=e.queue;s!==null&&(s.pending=null),e=e.next}ol=!1}us=0,bt=Qe=Ae=null,Er=!1,$n=cl=0,Tr=null}function Yt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bt===null?Ae.memoizedState=bt=e:bt=bt.next=e,bt}function xt(){if(Qe===null){var e=Ae.alternate;e=e!==null?e.memoizedState:null}else e=Qe.next;var s=bt===null?Ae.memoizedState:bt.next;if(s!==null)bt=s,Qe=e;else{if(e===null)throw Ae.alternate===null?Error(n(467)):Error(n(310));Qe=e,e={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},bt===null?Ae.memoizedState=bt=e:bt=bt.next=e}return bt}function Sc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Bn(e){var s=$n;return $n+=1,Tr===null&&(Tr=[]),e=$h(Tr,e,s),s=Ae,(bt===null?s.memoizedState:bt.next)===null&&(s=s.alternate,A.H=s===null||s.memoizedState===null?Tf:Df),e}function ul(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Bn(e);if(e.$$typeof===q)return Lt(e)}throw Error(n(438,String(e)))}function _c(e){var s=null,i=Ae.updateQueue;if(i!==null&&(s=i.memoCache),s==null){var c=Ae.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),i===null&&(i=Sc(),Ae.updateQueue=i),i.memoCache=s,i=s.data[s.index],i===void 0)for(i=s.data[s.index]=Array(e),c=0;c<e;c++)i[c]=G;return s.index++,i}function Qa(e,s){return typeof s=="function"?s(e):s}function dl(e){var s=xt();return Nc(s,Qe,e)}function Nc(e,s,i){var c=e.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=i;var d=e.baseQueue,f=c.pending;if(f!==null){if(d!==null){var b=d.next;d.next=f.next,f.next=b}s.baseQueue=d=f,c.pending=null}if(f=e.baseState,d===null)e.memoizedState=f;else{s=d.next;var w=b=null,R=null,F=s,se=!1;do{var oe=F.lane&-536870913;if(oe!==F.lane?(ze&oe)===oe:(us&oe)===oe){var K=F.revertLane;if(K===0)R!==null&&(R=R.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),oe===_r&&(se=!0);else if((us&K)===K){F=F.next,K===_r&&(se=!0);continue}else oe={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},R===null?(w=R=oe,b=f):R=R.next=oe,Ae.lanes|=K,ys|=K;oe=F.action,Fs&&i(f,oe),f=F.hasEagerState?F.eagerState:i(f,oe)}else K={lane:oe,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},R===null?(w=R=K,b=f):R=R.next=K,Ae.lanes|=oe,ys|=oe;F=F.next}while(F!==null&&F!==s);if(R===null?b=f:R.next=w,!Xt(f,e.memoizedState)&&(Et=!0,se&&(i=Nr,i!==null)))throw i;e.memoizedState=f,e.baseState=b,e.baseQueue=R,c.lastRenderedState=f}return d===null&&(c.lanes=0),[e.memoizedState,c.dispatch]}function Cc(e){var s=xt(),i=s.queue;if(i===null)throw Error(n(311));i.lastRenderedReducer=e;var c=i.dispatch,d=i.pending,f=s.memoizedState;if(d!==null){i.pending=null;var b=d=d.next;do f=e(f,b.action),b=b.next;while(b!==d);Xt(f,s.memoizedState)||(Et=!0),s.memoizedState=f,s.baseQueue===null&&(s.baseState=f),i.lastRenderedState=f}return[f,c]}function Qh(e,s,i){var c=Ae,d=xt(),f=Pe;if(f){if(i===void 0)throw Error(n(407));i=i()}else i=s();var b=!Xt((Qe||d).memoizedState,i);b&&(d.memoizedState=i,Et=!0),d=d.queue;var w=Wh.bind(null,c,d,e);if(Pn(2048,8,w,[e]),d.getSnapshot!==s||b||bt!==null&&bt.memoizedState.tag&1){if(c.flags|=2048,Dr(9,hl(),Kh.bind(null,c,d,i,s),null),Je===null)throw Error(n(349));f||(us&124)!==0||Gh(c,s,i)}return i}function Gh(e,s,i){e.flags|=16384,e={getSnapshot:s,value:i},s=Ae.updateQueue,s===null?(s=Sc(),Ae.updateQueue=s,s.stores=[e]):(i=s.stores,i===null?s.stores=[e]:i.push(e))}function Kh(e,s,i,c){s.value=i,s.getSnapshot=c,Xh(s)&&Jh(e)}function Wh(e,s,i){return i(function(){Xh(s)&&Jh(e)})}function Xh(e){var s=e.getSnapshot;e=e.value;try{var i=s();return!Xt(e,i)}catch(c){return!0}}function Jh(e){var s=xr(e,2);s!==null&&sa(s,e,2)}function Ec(e){var s=Yt();if(typeof e=="function"){var i=e;if(e=i(),Fs){yt(!0);try{i()}finally{yt(!1)}}}return s.memoizedState=s.baseState=e,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qa,lastRenderedState:e},s}function Zh(e,s,i,c){return e.baseState=i,Nc(e,Qe,typeof c=="function"?c:Qa)}function Ty(e,s,i,c,d){if(ml(e))throw Error(n(485));if(e=s.action,e!==null){var f={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){f.listeners.push(b)}};A.T!==null?i(!0):f.isTransition=!1,c(f),i=s.pending,i===null?(f.next=s.pending=f,ef(s,f)):(f.next=i.next,s.pending=i.next=f)}}function ef(e,s){var i=s.action,c=s.payload,d=e.state;if(s.isTransition){var f=A.T,b={};A.T=b;try{var w=i(d,c),R=A.S;R!==null&&R(b,w),tf(e,s,w)}catch(F){Tc(e,s,F)}finally{A.T=f}}else try{f=i(d,c),tf(e,s,f)}catch(F){Tc(e,s,F)}}function tf(e,s,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(c){af(e,s,c)},function(c){return Tc(e,s,c)}):af(e,s,i)}function af(e,s,i){s.status="fulfilled",s.value=i,sf(s),e.state=i,s=e.pending,s!==null&&(i=s.next,i===s?e.pending=null:(i=i.next,s.next=i,ef(e,i)))}function Tc(e,s,i){var c=e.pending;if(e.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=i,sf(s),s=s.next;while(s!==c)}e.action=null}function sf(e){e=e.listeners;for(var s=0;s<e.length;s++)(0,e[s])()}function rf(e,s){return s}function nf(e,s){if(Pe){var i=Je.formState;if(i!==null){e:{var c=Ae;if(Pe){if(lt){t:{for(var d=lt,f=Ta;d.nodeType!==8;){if(!f){d=null;break t}if(d=ja(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){lt=ja(d.nextSibling),c=d.data==="F!";break e}}Is(c)}c=!1}c&&(s=i[0])}}return i=Yt(),i.memoizedState=i.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rf,lastRenderedState:s},i.queue=c,i=Nf.bind(null,Ae,c),c.dispatch=i,c=Ec(!1),f=Rc.bind(null,Ae,!1,c.queue),c=Yt(),d={state:s,dispatch:null,action:e,pending:null},c.queue=d,i=Ty.bind(null,Ae,d,f,i),d.dispatch=i,c.memoizedState=e,[s,i,!1]}function lf(e){var s=xt();return of(s,Qe,e)}function of(e,s,i){if(s=Nc(e,s,rf)[0],e=dl(Qa)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=Bn(s)}catch(b){throw b===Mn?nl:b}else c=s;s=xt();var d=s.queue,f=d.dispatch;return i!==s.memoizedState&&(Ae.flags|=2048,Dr(9,hl(),Dy.bind(null,d,i),null)),[c,f,e]}function Dy(e,s){e.action=s}function cf(e){var s=xt(),i=Qe;if(i!==null)return of(s,i,e);xt(),s=s.memoizedState,i=xt();var c=i.queue.dispatch;return i.memoizedState=e,[s,c,!1]}function Dr(e,s,i,c){return e={tag:e,create:i,deps:c,inst:s,next:null},s=Ae.updateQueue,s===null&&(s=Sc(),Ae.updateQueue=s),i=s.lastEffect,i===null?s.lastEffect=e.next=e:(c=i.next,i.next=e,e.next=c,s.lastEffect=e),e}function hl(){return{destroy:void 0,resource:void 0}}function uf(){return xt().memoizedState}function fl(e,s,i,c){var d=Yt();c=c===void 0?null:c,Ae.flags|=e,d.memoizedState=Dr(1|s,hl(),i,c)}function Pn(e,s,i,c){var d=xt();c=c===void 0?null:c;var f=d.memoizedState.inst;Qe!==null&&c!==null&&vc(c,Qe.memoizedState.deps)?d.memoizedState=Dr(s,f,i,c):(Ae.flags|=e,d.memoizedState=Dr(1|s,f,i,c))}function df(e,s){fl(8390656,8,e,s)}function hf(e,s){Pn(2048,8,e,s)}function ff(e,s){return Pn(4,2,e,s)}function mf(e,s){return Pn(4,4,e,s)}function gf(e,s){if(typeof s=="function"){e=e();var i=s(e);return function(){typeof i=="function"?i():s(null)}}if(s!=null)return e=e(),s.current=e,function(){s.current=null}}function pf(e,s,i){i=i!=null?i.concat([e]):null,Pn(4,4,gf.bind(null,s,e),i)}function Dc(){}function yf(e,s){var i=xt();s=s===void 0?null:s;var c=i.memoizedState;return s!==null&&vc(s,c[1])?c[0]:(i.memoizedState=[e,s],e)}function vf(e,s){var i=xt();s=s===void 0?null:s;var c=i.memoizedState;if(s!==null&&vc(s,c[1]))return c[0];if(c=e(),Fs){yt(!0);try{e()}finally{yt(!1)}}return i.memoizedState=[c,s],c}function Oc(e,s,i){return i===void 0||(us&1073741824)!==0?e.memoizedState=s:(e.memoizedState=i,e=wm(),Ae.lanes|=e,ys|=e,i)}function bf(e,s,i,c){return Xt(i,s)?i:Cr.current!==null?(e=Oc(e,i,c),Xt(e,s)||(Et=!0),e):(us&42)===0?(Et=!0,e.memoizedState=i):(e=wm(),Ae.lanes|=e,ys|=e,s)}function xf(e,s,i,c,d){var f=Q.p;Q.p=f!==0&&8>f?f:8;var b=A.T,w={};A.T=w,Rc(e,!1,s,i);try{var R=d(),F=A.S;if(F!==null&&F(w,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var se=Ny(R,c);In(e,s,se,aa(e))}else In(e,s,c,aa(e))}catch(oe){In(e,s,{then:function(){},status:"rejected",reason:oe},aa())}finally{Q.p=f,A.T=b}}function Oy(){}function Ac(e,s,i,c){if(e.tag!==5)throw Error(n(476));var d=wf(e).queue;xf(e,d,s,te,i===null?Oy:function(){return jf(e),i(c)})}function wf(e){var s=e.memoizedState;if(s!==null)return s;s={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qa,lastRenderedState:te},next:null};var i={};return s.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qa,lastRenderedState:i},next:null},e.memoizedState=s,e=e.alternate,e!==null&&(e.memoizedState=s),s}function jf(e){var s=wf(e).next.queue;In(e,s,{},aa())}function kc(){return Lt(ii)}function Sf(){return xt().memoizedState}function _f(){return xt().memoizedState}function Ay(e){for(var s=e.return;s!==null;){switch(s.tag){case 24:case 3:var i=aa();e=os(i);var c=cs(s,e,i);c!==null&&(sa(c,s,i),qn(c,s,i)),s={cache:oc()},e.payload=s;return}s=s.return}}function ky(e,s,i){var c=aa();i={lane:c,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},ml(e)?Cf(s,i):(i=Jo(e,s,i,c),i!==null&&(sa(i,e,c),Ef(i,s,c)))}function Nf(e,s,i){var c=aa();In(e,s,i,c)}function In(e,s,i,c){var d={lane:c,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(ml(e))Cf(s,d);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=s.lastRenderedReducer,f!==null))try{var b=s.lastRenderedState,w=f(b,i);if(d.hasEagerState=!0,d.eagerState=w,Xt(w,b))return Xi(e,s,d,0),Je===null&&Wi(),!1}catch(R){}if(i=Jo(e,s,d,c),i!==null)return sa(i,e,c),Ef(i,s,c),!0}return!1}function Rc(e,s,i,c){if(c={lane:2,revertLane:du(),action:c,hasEagerState:!1,eagerState:null,next:null},ml(e)){if(s)throw Error(n(479))}else s=Jo(e,i,c,2),s!==null&&sa(s,e,2)}function ml(e){var s=e.alternate;return e===Ae||s!==null&&s===Ae}function Cf(e,s){Er=ol=!0;var i=e.pending;i===null?s.next=s:(s.next=i.next,i.next=s),e.pending=s}function Ef(e,s,i){if((i&4194048)!==0){var c=s.lanes;c&=e.pendingLanes,i|=c,s.lanes=i,Md(e,i)}}var gl={readContext:Lt,use:ul,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useLayoutEffect:ft,useInsertionEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useSyncExternalStore:ft,useId:ft,useHostTransitionStatus:ft,useFormState:ft,useActionState:ft,useOptimistic:ft,useMemoCache:ft,useCacheRefresh:ft},Tf={readContext:Lt,use:ul,useCallback:function(e,s){return Yt().memoizedState=[e,s===void 0?null:s],e},useContext:Lt,useEffect:df,useImperativeHandle:function(e,s,i){i=i!=null?i.concat([e]):null,fl(4194308,4,gf.bind(null,s,e),i)},useLayoutEffect:function(e,s){return fl(4194308,4,e,s)},useInsertionEffect:function(e,s){fl(4,2,e,s)},useMemo:function(e,s){var i=Yt();s=s===void 0?null:s;var c=e();if(Fs){yt(!0);try{e()}finally{yt(!1)}}return i.memoizedState=[c,s],c},useReducer:function(e,s,i){var c=Yt();if(i!==void 0){var d=i(s);if(Fs){yt(!0);try{i(s)}finally{yt(!1)}}}else d=s;return c.memoizedState=c.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},c.queue=e,e=e.dispatch=ky.bind(null,Ae,e),[c.memoizedState,e]},useRef:function(e){var s=Yt();return e={current:e},s.memoizedState=e},useState:function(e){e=Ec(e);var s=e.queue,i=Nf.bind(null,Ae,s);return s.dispatch=i,[e.memoizedState,i]},useDebugValue:Dc,useDeferredValue:function(e,s){var i=Yt();return Oc(i,e,s)},useTransition:function(){var e=Ec(!1);return e=xf.bind(null,Ae,e.queue,!0,!1),Yt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,s,i){var c=Ae,d=Yt();if(Pe){if(i===void 0)throw Error(n(407));i=i()}else{if(i=s(),Je===null)throw Error(n(349));(ze&124)!==0||Gh(c,s,i)}d.memoizedState=i;var f={value:i,getSnapshot:s};return d.queue=f,df(Wh.bind(null,c,f,e),[e]),c.flags|=2048,Dr(9,hl(),Kh.bind(null,c,f,i,s),null),i},useId:function(){var e=Yt(),s=Je.identifierPrefix;if(Pe){var i=Ya,c=Ha;i=(c&~(1<<32-vt(c)-1)).toString(32)+i,s=""+s+"R"+i,i=cl++,0<i&&(s+="H"+i.toString(32)),s+=""}else i=Cy++,s=""+s+"r"+i.toString(32)+"";return e.memoizedState=s},useHostTransitionStatus:kc,useFormState:nf,useActionState:nf,useOptimistic:function(e){var s=Yt();s.memoizedState=s.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=i,s=Rc.bind(null,Ae,!0,i),i.dispatch=s,[e,s]},useMemoCache:_c,useCacheRefresh:function(){return Yt().memoizedState=Ay.bind(null,Ae)}},Df={readContext:Lt,use:ul,useCallback:yf,useContext:Lt,useEffect:hf,useImperativeHandle:pf,useInsertionEffect:ff,useLayoutEffect:mf,useMemo:vf,useReducer:dl,useRef:uf,useState:function(){return dl(Qa)},useDebugValue:Dc,useDeferredValue:function(e,s){var i=xt();return bf(i,Qe.memoizedState,e,s)},useTransition:function(){var e=dl(Qa)[0],s=xt().memoizedState;return[typeof e=="boolean"?e:Bn(e),s]},useSyncExternalStore:Qh,useId:Sf,useHostTransitionStatus:kc,useFormState:lf,useActionState:lf,useOptimistic:function(e,s){var i=xt();return Zh(i,Qe,e,s)},useMemoCache:_c,useCacheRefresh:_f},Ry={readContext:Lt,use:ul,useCallback:yf,useContext:Lt,useEffect:hf,useImperativeHandle:pf,useInsertionEffect:ff,useLayoutEffect:mf,useMemo:vf,useReducer:Cc,useRef:uf,useState:function(){return Cc(Qa)},useDebugValue:Dc,useDeferredValue:function(e,s){var i=xt();return Qe===null?Oc(i,e,s):bf(i,Qe.memoizedState,e,s)},useTransition:function(){var e=Cc(Qa)[0],s=xt().memoizedState;return[typeof e=="boolean"?e:Bn(e),s]},useSyncExternalStore:Qh,useId:Sf,useHostTransitionStatus:kc,useFormState:cf,useActionState:cf,useOptimistic:function(e,s){var i=xt();return Qe!==null?Zh(i,Qe,e,s):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:_c,useCacheRefresh:_f},Or=null,Hn=0;function pl(e){var s=Hn;return Hn+=1,Or===null&&(Or=[]),$h(Or,e,s)}function Yn(e,s){s=s.props.ref,e.ref=s!==void 0?s:null}function yl(e,s){throw s.$$typeof===x?Error(n(525)):(e=Object.prototype.toString.call(s),Error(n(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e)))}function Of(e){var s=e._init;return s(e._payload)}function Af(e){function s(B,L){if(e){var V=B.deletions;V===null?(B.deletions=[L],B.flags|=16):V.push(L)}}function i(B,L){if(!e)return null;for(;L!==null;)s(B,L),L=L.sibling;return null}function c(B){for(var L=new Map;B!==null;)B.key!==null?L.set(B.key,B):L.set(B.index,B),B=B.sibling;return L}function d(B,L){return B=Ia(B,L),B.index=0,B.sibling=null,B}function f(B,L,V){return B.index=V,e?(V=B.alternate,V!==null?(V=V.index,V<L?(B.flags|=67108866,L):V):(B.flags|=67108866,L)):(B.flags|=1048576,L)}function b(B){return e&&B.alternate===null&&(B.flags|=67108866),B}function w(B,L,V,ne){return L===null||L.tag!==6?(L=ec(V,B.mode,ne),L.return=B,L):(L=d(L,V),L.return=B,L)}function R(B,L,V,ne){var ve=V.type;return ve===E?se(B,L,V.props.children,ne,V.key):L!==null&&(L.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===T&&Of(ve)===L.type)?(L=d(L,V.props),Yn(L,V),L.return=B,L):(L=Zi(V.type,V.key,V.props,null,B.mode,ne),Yn(L,V),L.return=B,L)}function F(B,L,V,ne){return L===null||L.tag!==4||L.stateNode.containerInfo!==V.containerInfo||L.stateNode.implementation!==V.implementation?(L=tc(V,B.mode,ne),L.return=B,L):(L=d(L,V.children||[]),L.return=B,L)}function se(B,L,V,ne,ve){return L===null||L.tag!==7?(L=zs(V,B.mode,ne,ve),L.return=B,L):(L=d(L,V),L.return=B,L)}function oe(B,L,V){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=ec(""+L,B.mode,V),L.return=B,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case v:return V=Zi(L.type,L.key,L.props,null,B.mode,V),Yn(V,L),V.return=B,V;case j:return L=tc(L,B.mode,V),L.return=B,L;case T:var ne=L._init;return L=ne(L._payload),oe(B,L,V)}if(xe(L)||W(L))return L=zs(L,B.mode,V,null),L.return=B,L;if(typeof L.then=="function")return oe(B,pl(L),V);if(L.$$typeof===q)return oe(B,sl(B,L),V);yl(B,L)}return null}function K(B,L,V,ne){var ve=L!==null?L.key:null;if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return ve!==null?null:w(B,L,""+V,ne);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case v:return V.key===ve?R(B,L,V,ne):null;case j:return V.key===ve?F(B,L,V,ne):null;case T:return ve=V._init,V=ve(V._payload),K(B,L,V,ne)}if(xe(V)||W(V))return ve!==null?null:se(B,L,V,ne,null);if(typeof V.then=="function")return K(B,L,pl(V),ne);if(V.$$typeof===q)return K(B,L,sl(B,V),ne);yl(B,V)}return null}function X(B,L,V,ne,ve){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return B=B.get(V)||null,w(L,B,""+ne,ve);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case v:return B=B.get(ne.key===null?V:ne.key)||null,R(L,B,ne,ve);case j:return B=B.get(ne.key===null?V:ne.key)||null,F(L,B,ne,ve);case T:var ke=ne._init;return ne=ke(ne._payload),X(B,L,V,ne,ve)}if(xe(ne)||W(ne))return B=B.get(V)||null,se(L,B,ne,ve,null);if(typeof ne.then=="function")return X(B,L,V,pl(ne),ve);if(ne.$$typeof===q)return X(B,L,V,sl(L,ne),ve);yl(L,ne)}return null}function Te(B,L,V,ne){for(var ve=null,ke=null,we=L,Ne=L=0,Dt=null;we!==null&&Ne<V.length;Ne++){we.index>Ne?(Dt=we,we=null):Dt=we.sibling;var Be=K(B,we,V[Ne],ne);if(Be===null){we===null&&(we=Dt);break}e&&we&&Be.alternate===null&&s(B,we),L=f(Be,L,Ne),ke===null?ve=Be:ke.sibling=Be,ke=Be,we=Dt}if(Ne===V.length)return i(B,we),Pe&&Bs(B,Ne),ve;if(we===null){for(;Ne<V.length;Ne++)we=oe(B,V[Ne],ne),we!==null&&(L=f(we,L,Ne),ke===null?ve=we:ke.sibling=we,ke=we);return Pe&&Bs(B,Ne),ve}for(we=c(we);Ne<V.length;Ne++)Dt=X(we,B,Ne,V[Ne],ne),Dt!==null&&(e&&Dt.alternate!==null&&we.delete(Dt.key===null?Ne:Dt.key),L=f(Dt,L,Ne),ke===null?ve=Dt:ke.sibling=Dt,ke=Dt);return e&&we.forEach(function(Cs){return s(B,Cs)}),Pe&&Bs(B,Ne),ve}function _e(B,L,V,ne){if(V==null)throw Error(n(151));for(var ve=null,ke=null,we=L,Ne=L=0,Dt=null,Be=V.next();we!==null&&!Be.done;Ne++,Be=V.next()){we.index>Ne?(Dt=we,we=null):Dt=we.sibling;var Cs=K(B,we,Be.value,ne);if(Cs===null){we===null&&(we=Dt);break}e&&we&&Cs.alternate===null&&s(B,we),L=f(Cs,L,Ne),ke===null?ve=Cs:ke.sibling=Cs,ke=Cs,we=Dt}if(Be.done)return i(B,we),Pe&&Bs(B,Ne),ve;if(we===null){for(;!Be.done;Ne++,Be=V.next())Be=oe(B,Be.value,ne),Be!==null&&(L=f(Be,L,Ne),ke===null?ve=Be:ke.sibling=Be,ke=Be);return Pe&&Bs(B,Ne),ve}for(we=c(we);!Be.done;Ne++,Be=V.next())Be=X(we,B,Ne,Be.value,ne),Be!==null&&(e&&Be.alternate!==null&&we.delete(Be.key===null?Ne:Be.key),L=f(Be,L,Ne),ke===null?ve=Be:ke.sibling=Be,ke=Be);return e&&we.forEach(function(Mv){return s(B,Mv)}),Pe&&Bs(B,Ne),ve}function Ke(B,L,V,ne){if(typeof V=="object"&&V!==null&&V.type===E&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case v:e:{for(var ve=V.key;L!==null;){if(L.key===ve){if(ve=V.type,ve===E){if(L.tag===7){i(B,L.sibling),ne=d(L,V.props.children),ne.return=B,B=ne;break e}}else if(L.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===T&&Of(ve)===L.type){i(B,L.sibling),ne=d(L,V.props),Yn(ne,V),ne.return=B,B=ne;break e}i(B,L);break}else s(B,L);L=L.sibling}V.type===E?(ne=zs(V.props.children,B.mode,ne,V.key),ne.return=B,B=ne):(ne=Zi(V.type,V.key,V.props,null,B.mode,ne),Yn(ne,V),ne.return=B,B=ne)}return b(B);case j:e:{for(ve=V.key;L!==null;){if(L.key===ve)if(L.tag===4&&L.stateNode.containerInfo===V.containerInfo&&L.stateNode.implementation===V.implementation){i(B,L.sibling),ne=d(L,V.children||[]),ne.return=B,B=ne;break e}else{i(B,L);break}else s(B,L);L=L.sibling}ne=tc(V,B.mode,ne),ne.return=B,B=ne}return b(B);case T:return ve=V._init,V=ve(V._payload),Ke(B,L,V,ne)}if(xe(V))return Te(B,L,V,ne);if(W(V)){if(ve=W(V),typeof ve!="function")throw Error(n(150));return V=ve.call(V),_e(B,L,V,ne)}if(typeof V.then=="function")return Ke(B,L,pl(V),ne);if(V.$$typeof===q)return Ke(B,L,sl(B,V),ne);yl(B,V)}return typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint"?(V=""+V,L!==null&&L.tag===6?(i(B,L.sibling),ne=d(L,V),ne.return=B,B=ne):(i(B,L),ne=ec(V,B.mode,ne),ne.return=B,B=ne),b(B)):i(B,L)}return function(B,L,V,ne){try{Hn=0;var ve=Ke(B,L,V,ne);return Or=null,ve}catch(we){if(we===Mn||we===nl)throw we;var ke=Jt(29,we,null,B.mode);return ke.lanes=ne,ke.return=B,ke}}}var Ar=Af(!0),kf=Af(!1),pa=N(null),Da=null;function ds(e){var s=e.alternate;P(_t,_t.current&1),P(pa,e),Da===null&&(s===null||Cr.current!==null||s.memoizedState!==null)&&(Da=e)}function Rf(e){if(e.tag===22){if(P(_t,_t.current),P(pa,e),Da===null){var s=e.alternate;s!==null&&s.memoizedState!==null&&(Da=e)}}else hs()}function hs(){P(_t,_t.current),P(pa,pa.current)}function Ga(e){$(pa),Da===e&&(Da=null),$(_t)}var _t=N(0);function vl(e){for(var s=e;s!==null;){if(s.tag===13){var i=s.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||Su(i)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Mc(e,s,i,c){s=e.memoizedState,i=i(c,s),i=i==null?s:y({},s,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Uc={enqueueSetState:function(e,s,i){e=e._reactInternals;var c=aa(),d=os(c);d.payload=s,i!=null&&(d.callback=i),s=cs(e,d,c),s!==null&&(sa(s,e,c),qn(s,e,c))},enqueueReplaceState:function(e,s,i){e=e._reactInternals;var c=aa(),d=os(c);d.tag=1,d.payload=s,i!=null&&(d.callback=i),s=cs(e,d,c),s!==null&&(sa(s,e,c),qn(s,e,c))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var i=aa(),c=os(i);c.tag=2,s!=null&&(c.callback=s),s=cs(e,c,i),s!==null&&(sa(s,e,i),qn(s,e,i))}};function Mf(e,s,i,c,d,f,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,f,b):s.prototype&&s.prototype.isPureReactComponent?!Cn(i,c)||!Cn(d,f):!0}function Uf(e,s,i,c){e=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(i,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(i,c),s.state!==e&&Uc.enqueueReplaceState(s,s.state,null)}function Qs(e,s){var i=s;if("ref"in s){i={};for(var c in s)c!=="ref"&&(i[c]=s[c])}if(e=e.defaultProps){i===s&&(i=y({},i));for(var d in e)i[d]===void 0&&(i[d]=e[d])}return i}var bl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function qf(e){bl(e)}function Lf(e){console.error(e)}function zf(e){bl(e)}function xl(e,s){try{var i=e.onUncaughtError;i(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function $f(e,s,i){try{var c=e.onCaughtError;c(i.value,{componentStack:i.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function qc(e,s,i){return i=os(i),i.tag=3,i.payload={element:null},i.callback=function(){xl(e,s)},i}function Bf(e){return e=os(e),e.tag=3,e}function Pf(e,s,i,c){var d=i.type.getDerivedStateFromError;if(typeof d=="function"){var f=c.value;e.payload=function(){return d(f)},e.callback=function(){$f(s,i,c)}}var b=i.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(e.callback=function(){$f(s,i,c),typeof d!="function"&&(vs===null?vs=new Set([this]):vs.add(this));var w=c.stack;this.componentDidCatch(c.value,{componentStack:w!==null?w:""})})}function My(e,s,i,c,d){if(i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=i.alternate,s!==null&&An(s,i,d,!0),i=pa.current,i!==null){switch(i.tag){case 13:return Da===null?iu():i.alternate===null&&ot===0&&(ot=3),i.flags&=-257,i.flags|=65536,i.lanes=d,c===dc?i.flags|=16384:(s=i.updateQueue,s===null?i.updateQueue=new Set([c]):s.add(c),ou(e,c,d)),!1;case 22:return i.flags|=65536,c===dc?i.flags|=16384:(s=i.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},i.updateQueue=s):(i=s.retryQueue,i===null?s.retryQueue=new Set([c]):i.add(c)),ou(e,c,d)),!1}throw Error(n(435,i.tag))}return ou(e,c,d),iu(),!1}if(Pe)return s=pa.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,c!==rc&&(e=Error(n(422),{cause:c}),On(ha(e,i)))):(c!==rc&&(s=Error(n(423),{cause:c}),On(ha(s,i))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,c=ha(c,i),d=qc(e.stateNode,c,d),mc(e,d),ot!==4&&(ot=2)),!1;var f=Error(n(520),{cause:c});if(f=ha(f,i),Xn===null?Xn=[f]:Xn.push(f),ot!==4&&(ot=2),s===null)return!0;c=ha(c,i),i=s;do{switch(i.tag){case 3:return i.flags|=65536,e=d&-d,i.lanes|=e,e=qc(i.stateNode,c,e),mc(i,e),!1;case 1:if(s=i.type,f=i.stateNode,(i.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(vs===null||!vs.has(f))))return i.flags|=65536,d&=-d,i.lanes|=d,d=Bf(d),Pf(d,e,i,c),mc(i,d),!1}i=i.return}while(i!==null);return!1}var If=Error(n(461)),Et=!1;function At(e,s,i,c){s.child=e===null?kf(s,null,i,c):Ar(s,e.child,i,c)}function Hf(e,s,i,c,d){i=i.render;var f=s.ref;if("ref"in c){var b={};for(var w in c)w!=="ref"&&(b[w]=c[w])}else b=c;return Ys(s),c=bc(e,s,i,b,f,d),w=xc(),e!==null&&!Et?(wc(e,s,d),Ka(e,s,d)):(Pe&&w&&ac(s),s.flags|=1,At(e,s,c,d),s.child)}function Yf(e,s,i,c,d){if(e===null){var f=i.type;return typeof f=="function"&&!Zo(f)&&f.defaultProps===void 0&&i.compare===null?(s.tag=15,s.type=f,Vf(e,s,f,c,d)):(e=Zi(i.type,null,c,s,s.mode,d),e.ref=s.ref,e.return=s,s.child=e)}if(f=e.child,!Yc(e,d)){var b=f.memoizedProps;if(i=i.compare,i=i!==null?i:Cn,i(b,c)&&e.ref===s.ref)return Ka(e,s,d)}return s.flags|=1,e=Ia(f,c),e.ref=s.ref,e.return=s,s.child=e}function Vf(e,s,i,c,d){if(e!==null){var f=e.memoizedProps;if(Cn(f,c)&&e.ref===s.ref)if(Et=!1,s.pendingProps=c=f,Yc(e,d))(e.flags&131072)!==0&&(Et=!0);else return s.lanes=e.lanes,Ka(e,s,d)}return Lc(e,s,i,c,d)}function Ff(e,s,i){var c=s.pendingProps,d=c.children,f=e!==null?e.memoizedState:null;if(c.mode==="hidden"){if((s.flags&128)!==0){if(c=f!==null?f.baseLanes|i:i,e!==null){for(d=s.child=e.child,f=0;d!==null;)f=f|d.lanes|d.childLanes,d=d.sibling;s.childLanes=f&~c}else s.childLanes=0,s.child=null;return Qf(e,s,c,i)}if((i&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},e!==null&&rl(s,f!==null?f.cachePool:null),f!==null?Yh(s,f):pc(),Rf(s);else return s.lanes=s.childLanes=536870912,Qf(e,s,f!==null?f.baseLanes|i:i,i)}else f!==null?(rl(s,f.cachePool),Yh(s,f),hs(),s.memoizedState=null):(e!==null&&rl(s,null),pc(),hs());return At(e,s,d,i),s.child}function Qf(e,s,i,c){var d=uc();return d=d===null?null:{parent:St._currentValue,pool:d},s.memoizedState={baseLanes:i,cachePool:d},e!==null&&rl(s,null),pc(),Rf(s),e!==null&&An(e,s,c,!0),null}function wl(e,s){var i=s.ref;if(i===null)e!==null&&e.ref!==null&&(s.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(n(284));(e===null||e.ref!==i)&&(s.flags|=4194816)}}function Lc(e,s,i,c,d){return Ys(s),i=bc(e,s,i,c,void 0,d),c=xc(),e!==null&&!Et?(wc(e,s,d),Ka(e,s,d)):(Pe&&c&&ac(s),s.flags|=1,At(e,s,i,d),s.child)}function Gf(e,s,i,c,d,f){return Ys(s),s.updateQueue=null,i=Fh(s,c,i,d),Vh(e),c=xc(),e!==null&&!Et?(wc(e,s,f),Ka(e,s,f)):(Pe&&c&&ac(s),s.flags|=1,At(e,s,i,f),s.child)}function Kf(e,s,i,c,d){if(Ys(s),s.stateNode===null){var f=wr,b=i.contextType;typeof b=="object"&&b!==null&&(f=Lt(b)),f=new i(c,f),s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Uc,s.stateNode=f,f._reactInternals=s,f=s.stateNode,f.props=c,f.state=s.memoizedState,f.refs={},hc(s),b=i.contextType,f.context=typeof b=="object"&&b!==null?Lt(b):wr,f.state=s.memoizedState,b=i.getDerivedStateFromProps,typeof b=="function"&&(Mc(s,i,b,c),f.state=s.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(b=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),b!==f.state&&Uc.enqueueReplaceState(f,f.state,null),zn(s,c,f,d),Ln(),f.state=s.memoizedState),typeof f.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(e===null){f=s.stateNode;var w=s.memoizedProps,R=Qs(i,w);f.props=R;var F=f.context,se=i.contextType;b=wr,typeof se=="object"&&se!==null&&(b=Lt(se));var oe=i.getDerivedStateFromProps;se=typeof oe=="function"||typeof f.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,se||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(w||F!==b)&&Uf(s,f,c,b),ls=!1;var K=s.memoizedState;f.state=K,zn(s,c,f,d),Ln(),F=s.memoizedState,w||K!==F||ls?(typeof oe=="function"&&(Mc(s,i,oe,c),F=s.memoizedState),(R=ls||Mf(s,i,R,c,K,F,b))?(se||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(s.flags|=4194308)):(typeof f.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=F),f.props=c,f.state=F,f.context=b,c=R):(typeof f.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{f=s.stateNode,fc(e,s),b=s.memoizedProps,se=Qs(i,b),f.props=se,oe=s.pendingProps,K=f.context,F=i.contextType,R=wr,typeof F=="object"&&F!==null&&(R=Lt(F)),w=i.getDerivedStateFromProps,(F=typeof w=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(b!==oe||K!==R)&&Uf(s,f,c,R),ls=!1,K=s.memoizedState,f.state=K,zn(s,c,f,d),Ln();var X=s.memoizedState;b!==oe||K!==X||ls||e!==null&&e.dependencies!==null&&al(e.dependencies)?(typeof w=="function"&&(Mc(s,i,w,c),X=s.memoizedState),(se=ls||Mf(s,i,se,c,K,X,R)||e!==null&&e.dependencies!==null&&al(e.dependencies))?(F||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(c,X,R),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(c,X,R)),typeof f.componentDidUpdate=="function"&&(s.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof f.componentDidUpdate!="function"||b===e.memoizedProps&&K===e.memoizedState||(s.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&K===e.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=X),f.props=c,f.state=X,f.context=R,c=se):(typeof f.componentDidUpdate!="function"||b===e.memoizedProps&&K===e.memoizedState||(s.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&K===e.memoizedState||(s.flags|=1024),c=!1)}return f=c,wl(e,s),c=(s.flags&128)!==0,f||c?(f=s.stateNode,i=c&&typeof i.getDerivedStateFromError!="function"?null:f.render(),s.flags|=1,e!==null&&c?(s.child=Ar(s,e.child,null,d),s.child=Ar(s,null,i,d)):At(e,s,i,d),s.memoizedState=f.state,e=s.child):e=Ka(e,s,d),e}function Wf(e,s,i,c){return Dn(),s.flags|=256,At(e,s,i,c),s.child}var zc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $c(e){return{baseLanes:e,cachePool:qh()}}function Bc(e,s,i){return e=e!==null?e.childLanes&~i:0,s&&(e|=ya),e}function Xf(e,s,i){var c=s.pendingProps,d=!1,f=(s.flags&128)!==0,b;if((b=f)||(b=e!==null&&e.memoizedState===null?!1:(_t.current&2)!==0),b&&(d=!0,s.flags&=-129),b=(s.flags&32)!==0,s.flags&=-33,e===null){if(Pe){if(d?ds(s):hs(),Pe){var w=lt,R;if(R=w){e:{for(R=w,w=Ta;R.nodeType!==8;){if(!w){w=null;break e}if(R=ja(R.nextSibling),R===null){w=null;break e}}w=R}w!==null?(s.memoizedState={dehydrated:w,treeContext:$s!==null?{id:Ha,overflow:Ya}:null,retryLane:536870912,hydrationErrors:null},R=Jt(18,null,null,0),R.stateNode=w,R.return=s,s.child=R,zt=s,lt=null,R=!0):R=!1}R||Is(s)}if(w=s.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return Su(w)?s.lanes=32:s.lanes=536870912,null;Ga(s)}return w=c.children,c=c.fallback,d?(hs(),d=s.mode,w=jl({mode:"hidden",children:w},d),c=zs(c,d,i,null),w.return=s,c.return=s,w.sibling=c,s.child=w,d=s.child,d.memoizedState=$c(i),d.childLanes=Bc(e,b,i),s.memoizedState=zc,c):(ds(s),Pc(s,w))}if(R=e.memoizedState,R!==null&&(w=R.dehydrated,w!==null)){if(f)s.flags&256?(ds(s),s.flags&=-257,s=Ic(e,s,i)):s.memoizedState!==null?(hs(),s.child=e.child,s.flags|=128,s=null):(hs(),d=c.fallback,w=s.mode,c=jl({mode:"visible",children:c.children},w),d=zs(d,w,i,null),d.flags|=2,c.return=s,d.return=s,c.sibling=d,s.child=c,Ar(s,e.child,null,i),c=s.child,c.memoizedState=$c(i),c.childLanes=Bc(e,b,i),s.memoizedState=zc,s=d);else if(ds(s),Su(w)){if(b=w.nextSibling&&w.nextSibling.dataset,b)var F=b.dgst;b=F,c=Error(n(419)),c.stack="",c.digest=b,On({value:c,source:null,stack:null}),s=Ic(e,s,i)}else if(Et||An(e,s,i,!1),b=(i&e.childLanes)!==0,Et||b){if(b=Je,b!==null&&(c=i&-i,c=(c&42)!==0?1:_o(c),c=(c&(b.suspendedLanes|i))!==0?0:c,c!==0&&c!==R.retryLane))throw R.retryLane=c,xr(e,c),sa(b,e,c),If;w.data==="$?"||iu(),s=Ic(e,s,i)}else w.data==="$?"?(s.flags|=192,s.child=e.child,s=null):(e=R.treeContext,lt=ja(w.nextSibling),zt=s,Pe=!0,Ps=null,Ta=!1,e!==null&&(ma[ga++]=Ha,ma[ga++]=Ya,ma[ga++]=$s,Ha=e.id,Ya=e.overflow,$s=s),s=Pc(s,c.children),s.flags|=4096);return s}return d?(hs(),d=c.fallback,w=s.mode,R=e.child,F=R.sibling,c=Ia(R,{mode:"hidden",children:c.children}),c.subtreeFlags=R.subtreeFlags&65011712,F!==null?d=Ia(F,d):(d=zs(d,w,i,null),d.flags|=2),d.return=s,c.return=s,c.sibling=d,s.child=c,c=d,d=s.child,w=e.child.memoizedState,w===null?w=$c(i):(R=w.cachePool,R!==null?(F=St._currentValue,R=R.parent!==F?{parent:F,pool:F}:R):R=qh(),w={baseLanes:w.baseLanes|i,cachePool:R}),d.memoizedState=w,d.childLanes=Bc(e,b,i),s.memoizedState=zc,c):(ds(s),i=e.child,e=i.sibling,i=Ia(i,{mode:"visible",children:c.children}),i.return=s,i.sibling=null,e!==null&&(b=s.deletions,b===null?(s.deletions=[e],s.flags|=16):b.push(e)),s.child=i,s.memoizedState=null,i)}function Pc(e,s){return s=jl({mode:"visible",children:s},e.mode),s.return=e,e.child=s}function jl(e,s){return e=Jt(22,e,null,s),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Ic(e,s,i){return Ar(s,e.child,null,i),e=Pc(s,s.pendingProps.children),e.flags|=2,s.memoizedState=null,e}function Jf(e,s,i){e.lanes|=s;var c=e.alternate;c!==null&&(c.lanes|=s),ic(e.return,s,i)}function Hc(e,s,i,c,d){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:i,tailMode:d}:(f.isBackwards=s,f.rendering=null,f.renderingStartTime=0,f.last=c,f.tail=i,f.tailMode=d)}function Zf(e,s,i){var c=s.pendingProps,d=c.revealOrder,f=c.tail;if(At(e,s,c.children,i),c=_t.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=s.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Jf(e,i,s);else if(e.tag===19)Jf(e,i,s);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break e;for(;e.sibling===null;){if(e.return===null||e.return===s)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}c&=1}switch(P(_t,c),d){case"forwards":for(i=s.child,d=null;i!==null;)e=i.alternate,e!==null&&vl(e)===null&&(d=i),i=i.sibling;i=d,i===null?(d=s.child,s.child=null):(d=i.sibling,i.sibling=null),Hc(s,!1,d,i,f);break;case"backwards":for(i=null,d=s.child,s.child=null;d!==null;){if(e=d.alternate,e!==null&&vl(e)===null){s.child=d;break}e=d.sibling,d.sibling=i,i=d,d=e}Hc(s,!0,i,null,f);break;case"together":Hc(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ka(e,s,i){if(e!==null&&(s.dependencies=e.dependencies),ys|=s.lanes,(i&s.childLanes)===0)if(e!==null){if(An(e,s,i,!1),(i&s.childLanes)===0)return null}else return null;if(e!==null&&s.child!==e.child)throw Error(n(153));if(s.child!==null){for(e=s.child,i=Ia(e,e.pendingProps),s.child=i,i.return=s;e.sibling!==null;)e=e.sibling,i=i.sibling=Ia(e,e.pendingProps),i.return=s;i.sibling=null}return s.child}function Yc(e,s){return(e.lanes&s)!==0?!0:(e=e.dependencies,!!(e!==null&&al(e)))}function Uy(e,s,i){switch(s.tag){case 3:k(s,s.stateNode.containerInfo),is(s,St,e.memoizedState.cache),Dn();break;case 27:case 5:J(s);break;case 4:k(s,s.stateNode.containerInfo);break;case 10:is(s,s.type,s.memoizedProps.value);break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(ds(s),s.flags|=128,null):(i&s.child.childLanes)!==0?Xf(e,s,i):(ds(s),e=Ka(e,s,i),e!==null?e.sibling:null);ds(s);break;case 19:var d=(e.flags&128)!==0;if(c=(i&s.childLanes)!==0,c||(An(e,s,i,!1),c=(i&s.childLanes)!==0),d){if(c)return Zf(e,s,i);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),P(_t,_t.current),c)break;return null;case 22:case 23:return s.lanes=0,Ff(e,s,i);case 24:is(s,St,e.memoizedState.cache)}return Ka(e,s,i)}function em(e,s,i){if(e!==null)if(e.memoizedProps!==s.pendingProps)Et=!0;else{if(!Yc(e,i)&&(s.flags&128)===0)return Et=!1,Uy(e,s,i);Et=(e.flags&131072)!==0}else Et=!1,Pe&&(s.flags&1048576)!==0&&Dh(s,tl,s.index);switch(s.lanes=0,s.tag){case 16:e:{e=s.pendingProps;var c=s.elementType,d=c._init;if(c=d(c._payload),s.type=c,typeof c=="function")Zo(c)?(e=Qs(c,e),s.tag=1,s=Kf(null,s,c,e,i)):(s.tag=0,s=Lc(null,s,c,e,i));else{if(c!=null){if(d=c.$$typeof,d===ee){s.tag=11,s=Hf(null,s,c,e,i);break e}else if(d===re){s.tag=14,s=Yf(null,s,c,e,i);break e}}throw s=ge(c)||c,Error(n(306,s,""))}}return s;case 0:return Lc(e,s,s.type,s.pendingProps,i);case 1:return c=s.type,d=Qs(c,s.pendingProps),Kf(e,s,c,d,i);case 3:e:{if(k(s,s.stateNode.containerInfo),e===null)throw Error(n(387));c=s.pendingProps;var f=s.memoizedState;d=f.element,fc(e,s),zn(s,c,null,i);var b=s.memoizedState;if(c=b.cache,is(s,St,c),c!==f.cache&&lc(s,[St],i,!0),Ln(),c=b.element,f.isDehydrated)if(f={element:c,isDehydrated:!1,cache:b.cache},s.updateQueue.baseState=f,s.memoizedState=f,s.flags&256){s=Wf(e,s,c,i);break e}else if(c!==d){d=ha(Error(n(424)),s),On(d),s=Wf(e,s,c,i);break e}else for(e=s.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,lt=ja(e.firstChild),zt=s,Pe=!0,Ps=null,Ta=!0,i=kf(s,null,c,i),s.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Dn(),c===d){s=Ka(e,s,i);break e}At(e,s,c,i)}s=s.child}return s;case 26:return wl(e,s),e===null?(i=rg(s.type,null,s.pendingProps,null))?s.memoizedState=i:Pe||(i=s.type,e=s.pendingProps,c=ql(ie.current).createElement(i),c[qt]=s,c[It]=e,Rt(c,i,e),Ct(c),s.stateNode=c):s.memoizedState=rg(s.type,e.memoizedProps,s.pendingProps,e.memoizedState),null;case 27:return J(s),e===null&&Pe&&(c=s.stateNode=tg(s.type,s.pendingProps,ie.current),zt=s,Ta=!0,d=lt,ws(s.type)?(_u=d,lt=ja(c.firstChild)):lt=d),At(e,s,s.pendingProps.children,i),wl(e,s),e===null&&(s.flags|=4194304),s.child;case 5:return e===null&&Pe&&((d=c=lt)&&(c=cv(c,s.type,s.pendingProps,Ta),c!==null?(s.stateNode=c,zt=s,lt=ja(c.firstChild),Ta=!1,d=!0):d=!1),d||Is(s)),J(s),d=s.type,f=s.pendingProps,b=e!==null?e.memoizedProps:null,c=f.children,xu(d,f)?c=null:b!==null&&xu(d,b)&&(s.flags|=32),s.memoizedState!==null&&(d=bc(e,s,Ey,null,null,i),ii._currentValue=d),wl(e,s),At(e,s,c,i),s.child;case 6:return e===null&&Pe&&((e=i=lt)&&(i=uv(i,s.pendingProps,Ta),i!==null?(s.stateNode=i,zt=s,lt=null,e=!0):e=!1),e||Is(s)),null;case 13:return Xf(e,s,i);case 4:return k(s,s.stateNode.containerInfo),c=s.pendingProps,e===null?s.child=Ar(s,null,c,i):At(e,s,c,i),s.child;case 11:return Hf(e,s,s.type,s.pendingProps,i);case 7:return At(e,s,s.pendingProps,i),s.child;case 8:return At(e,s,s.pendingProps.children,i),s.child;case 12:return At(e,s,s.pendingProps.children,i),s.child;case 10:return c=s.pendingProps,is(s,s.type,c.value),At(e,s,c.children,i),s.child;case 9:return d=s.type._context,c=s.pendingProps.children,Ys(s),d=Lt(d),c=c(d),s.flags|=1,At(e,s,c,i),s.child;case 14:return Yf(e,s,s.type,s.pendingProps,i);case 15:return Vf(e,s,s.type,s.pendingProps,i);case 19:return Zf(e,s,i);case 31:return c=s.pendingProps,i=s.mode,c={mode:c.mode,children:c.children},e===null?(i=jl(c,i),i.ref=s.ref,s.child=i,i.return=s,s=i):(i=Ia(e.child,c),i.ref=s.ref,s.child=i,i.return=s,s=i),s;case 22:return Ff(e,s,i);case 24:return Ys(s),c=Lt(St),e===null?(d=uc(),d===null&&(d=Je,f=oc(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=i),d=f),s.memoizedState={parent:c,cache:d},hc(s),is(s,St,d)):((e.lanes&i)!==0&&(fc(e,s),zn(s,null,null,i),Ln()),d=e.memoizedState,f=s.memoizedState,d.parent!==c?(d={parent:c,cache:c},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),is(s,St,c)):(c=f.cache,is(s,St,c),c!==d.cache&&lc(s,[St],i,!0))),At(e,s,s.pendingProps.children,i),s.child;case 29:throw s.pendingProps}throw Error(n(156,s.tag))}function Wa(e){e.flags|=4}function tm(e,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!cg(s)){if(s=pa.current,s!==null&&((ze&4194048)===ze?Da!==null:(ze&62914560)!==ze&&(ze&536870912)===0||s!==Da))throw Un=dc,Lh;e.flags|=8192}}function Sl(e,s){s!==null&&(e.flags|=4),e.flags&16384&&(s=e.tag!==22?kd():536870912,e.lanes|=s,Ur|=s)}function Vn(e,s){if(!Pe)switch(e.tailMode){case"hidden":s=e.tail;for(var i=null;s!==null;)s.alternate!==null&&(i=s),s=s.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?s||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function tt(e){var s=e.alternate!==null&&e.alternate.child===e.child,i=0,c=0;if(s)for(var d=e.child;d!==null;)i|=d.lanes|d.childLanes,c|=d.subtreeFlags&65011712,c|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)i|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=c,e.childLanes=i,s}function qy(e,s,i){var c=s.pendingProps;switch(sc(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(s),null;case 1:return tt(s),null;case 3:return i=s.stateNode,c=null,e!==null&&(c=e.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),Fa(St),I(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Tn(s)?Wa(s):e===null||e.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,kh())),tt(s),null;case 26:return i=s.memoizedState,e===null?(Wa(s),i!==null?(tt(s),tm(s,i)):(tt(s),s.flags&=-16777217)):i?i!==e.memoizedState?(Wa(s),tt(s),tm(s,i)):(tt(s),s.flags&=-16777217):(e.memoizedProps!==c&&Wa(s),tt(s),s.flags&=-16777217),null;case 27:Z(s),i=ie.current;var d=s.type;if(e!==null&&s.stateNode!=null)e.memoizedProps!==c&&Wa(s);else{if(!c){if(s.stateNode===null)throw Error(n(166));return tt(s),null}e=ce.current,Tn(s)?Oh(s):(e=tg(d,c,i),s.stateNode=e,Wa(s))}return tt(s),null;case 5:if(Z(s),i=s.type,e!==null&&s.stateNode!=null)e.memoizedProps!==c&&Wa(s);else{if(!c){if(s.stateNode===null)throw Error(n(166));return tt(s),null}if(e=ce.current,Tn(s))Oh(s);else{switch(d=ql(ie.current),e){case 1:e=d.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:e=d.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":e=d.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":e=d.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof c.is=="string"?d.createElement("select",{is:c.is}):d.createElement("select"),c.multiple?e.multiple=!0:c.size&&(e.size=c.size);break;default:e=typeof c.is=="string"?d.createElement(i,{is:c.is}):d.createElement(i)}}e[qt]=s,e[It]=c;e:for(d=s.child;d!==null;){if(d.tag===5||d.tag===6)e.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break e;for(;d.sibling===null;){if(d.return===null||d.return===s)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}s.stateNode=e;e:switch(Rt(e,i,c),i){case"button":case"input":case"select":case"textarea":e=!!c.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Wa(s)}}return tt(s),s.flags&=-16777217,null;case 6:if(e&&s.stateNode!=null)e.memoizedProps!==c&&Wa(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(n(166));if(e=ie.current,Tn(s)){if(e=s.stateNode,i=s.memoizedProps,c=null,d=zt,d!==null)switch(d.tag){case 27:case 5:c=d.memoizedProps}e[qt]=s,e=!!(e.nodeValue===i||c!==null&&c.suppressHydrationWarning===!0||Gm(e.nodeValue,i)),e||Is(s)}else e=ql(e).createTextNode(c),e[qt]=s,s.stateNode=e}return tt(s),null;case 13:if(c=s.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=Tn(s),c!==null&&c.dehydrated!==null){if(e===null){if(!d)throw Error(n(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(n(317));d[qt]=s}else Dn(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;tt(s),d=!1}else d=kh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(Ga(s),s):(Ga(s),null)}if(Ga(s),(s.flags&128)!==0)return s.lanes=i,s;if(i=c!==null,e=e!==null&&e.memoizedState!==null,i){c=s.child,d=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(d=c.alternate.memoizedState.cachePool.pool);var f=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(f=c.memoizedState.cachePool.pool),f!==d&&(c.flags|=2048)}return i!==e&&i&&(s.child.flags|=8192),Sl(s,s.updateQueue),tt(s),null;case 4:return I(),e===null&&gu(s.stateNode.containerInfo),tt(s),null;case 10:return Fa(s.type),tt(s),null;case 19:if($(_t),d=s.memoizedState,d===null)return tt(s),null;if(c=(s.flags&128)!==0,f=d.rendering,f===null)if(c)Vn(d,!1);else{if(ot!==0||e!==null&&(e.flags&128)!==0)for(e=s.child;e!==null;){if(f=vl(e),f!==null){for(s.flags|=128,Vn(d,!1),e=f.updateQueue,s.updateQueue=e,Sl(s,e),s.subtreeFlags=0,e=i,i=s.child;i!==null;)Th(i,e),i=i.sibling;return P(_t,_t.current&1|2),s.child}e=e.sibling}d.tail!==null&&qe()>Cl&&(s.flags|=128,c=!0,Vn(d,!1),s.lanes=4194304)}else{if(!c)if(e=vl(f),e!==null){if(s.flags|=128,c=!0,e=e.updateQueue,s.updateQueue=e,Sl(s,e),Vn(d,!0),d.tail===null&&d.tailMode==="hidden"&&!f.alternate&&!Pe)return tt(s),null}else 2*qe()-d.renderingStartTime>Cl&&i!==536870912&&(s.flags|=128,c=!0,Vn(d,!1),s.lanes=4194304);d.isBackwards?(f.sibling=s.child,s.child=f):(e=d.last,e!==null?e.sibling=f:s.child=f,d.last=f)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=qe(),s.sibling=null,e=_t.current,P(_t,c?e&1|2:e&1),s):(tt(s),null);case 22:case 23:return Ga(s),yc(),c=s.memoizedState!==null,e!==null?e.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(i&536870912)!==0&&(s.flags&128)===0&&(tt(s),s.subtreeFlags&6&&(s.flags|=8192)):tt(s),i=s.updateQueue,i!==null&&Sl(s,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==i&&(s.flags|=2048),e!==null&&$(Vs),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),s.memoizedState.cache!==i&&(s.flags|=2048),Fa(St),tt(s),null;case 25:return null;case 30:return null}throw Error(n(156,s.tag))}function Ly(e,s){switch(sc(s),s.tag){case 1:return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 3:return Fa(St),I(),e=s.flags,(e&65536)!==0&&(e&128)===0?(s.flags=e&-65537|128,s):null;case 26:case 27:case 5:return Z(s),null;case 13:if(Ga(s),e=s.memoizedState,e!==null&&e.dehydrated!==null){if(s.alternate===null)throw Error(n(340));Dn()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 19:return $(_t),null;case 4:return I(),null;case 10:return Fa(s.type),null;case 22:case 23:return Ga(s),yc(),e!==null&&$(Vs),e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 24:return Fa(St),null;case 25:return null;default:return null}}function am(e,s){switch(sc(s),s.tag){case 3:Fa(St),I();break;case 26:case 27:case 5:Z(s);break;case 4:I();break;case 13:Ga(s);break;case 19:$(_t);break;case 10:Fa(s.type);break;case 22:case 23:Ga(s),yc(),e!==null&&$(Vs);break;case 24:Fa(St)}}function Fn(e,s){try{var i=s.updateQueue,c=i!==null?i.lastEffect:null;if(c!==null){var d=c.next;i=d;do{if((i.tag&e)===e){c=void 0;var f=i.create,b=i.inst;c=f(),b.destroy=c}i=i.next}while(i!==d)}}catch(w){Xe(s,s.return,w)}}function fs(e,s,i){try{var c=s.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var f=d.next;c=f;do{if((c.tag&e)===e){var b=c.inst,w=b.destroy;if(w!==void 0){b.destroy=void 0,d=s;var R=i,F=w;try{F()}catch(se){Xe(d,R,se)}}}c=c.next}while(c!==f)}}catch(se){Xe(s,s.return,se)}}function sm(e){var s=e.updateQueue;if(s!==null){var i=e.stateNode;try{Hh(s,i)}catch(c){Xe(e,e.return,c)}}}function rm(e,s,i){i.props=Qs(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(c){Xe(e,s,c)}}function Qn(e,s){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var c=e.stateNode;break;case 30:c=e.stateNode;break;default:c=e.stateNode}typeof i=="function"?e.refCleanup=i(c):i.current=c}}catch(d){Xe(e,s,d)}}function Oa(e,s){var i=e.ref,c=e.refCleanup;if(i!==null)if(typeof c=="function")try{c()}catch(d){Xe(e,s,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(d){Xe(e,s,d)}else i.current=null}function nm(e){var s=e.type,i=e.memoizedProps,c=e.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":i.autoFocus&&c.focus();break e;case"img":i.src?c.src=i.src:i.srcSet&&(c.srcset=i.srcSet)}}catch(d){Xe(e,e.return,d)}}function Vc(e,s,i){try{var c=e.stateNode;rv(c,e.type,i,s),c[It]=s}catch(d){Xe(e,e.return,d)}}function im(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ws(e.type)||e.tag===4}function Fc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||im(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ws(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Qc(e,s,i){var c=e.tag;if(c===5||c===6)e=e.stateNode,s?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,s):(s=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,s.appendChild(e),i=i._reactRootContainer,i!=null||s.onclick!==null||(s.onclick=Ul));else if(c!==4&&(c===27&&ws(e.type)&&(i=e.stateNode,s=null),e=e.child,e!==null))for(Qc(e,s,i),e=e.sibling;e!==null;)Qc(e,s,i),e=e.sibling}function _l(e,s,i){var c=e.tag;if(c===5||c===6)e=e.stateNode,s?i.insertBefore(e,s):i.appendChild(e);else if(c!==4&&(c===27&&ws(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(_l(e,s,i),e=e.sibling;e!==null;)_l(e,s,i),e=e.sibling}function lm(e){var s=e.stateNode,i=e.memoizedProps;try{for(var c=e.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);Rt(s,c,i),s[qt]=e,s[It]=i}catch(f){Xe(e,e.return,f)}}var Xa=!1,mt=!1,Gc=!1,om=typeof WeakSet=="function"?WeakSet:Set,Tt=null;function zy(e,s){if(e=e.containerInfo,vu=Il,e=vh(e),Fo(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var c=i.getSelection&&i.getSelection();if(c&&c.rangeCount!==0){i=c.anchorNode;var d=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{i.nodeType,f.nodeType}catch(_e){i=null;break e}var b=0,w=-1,R=-1,F=0,se=0,oe=e,K=null;t:for(;;){for(var X;oe!==i||d!==0&&oe.nodeType!==3||(w=b+d),oe!==f||c!==0&&oe.nodeType!==3||(R=b+c),oe.nodeType===3&&(b+=oe.nodeValue.length),(X=oe.firstChild)!==null;)K=oe,oe=X;for(;;){if(oe===e)break t;if(K===i&&++F===d&&(w=b),K===f&&++se===c&&(R=b),(X=oe.nextSibling)!==null)break;oe=K,K=oe.parentNode}oe=X}i=w===-1||R===-1?null:{start:w,end:R}}else i=null}i=i||{start:0,end:0}}else i=null;for(bu={focusedElem:e,selectionRange:i},Il=!1,Tt=s;Tt!==null;)if(s=Tt,e=s.child,(s.subtreeFlags&1024)!==0&&e!==null)e.return=s,Tt=e;else for(;Tt!==null;){switch(s=Tt,f=s.alternate,e=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,i=s,d=f.memoizedProps,f=f.memoizedState,c=i.stateNode;try{var Te=Qs(i.type,d,i.elementType===i.type);e=c.getSnapshotBeforeUpdate(Te,f),c.__reactInternalSnapshotBeforeUpdate=e}catch(_e){Xe(i,i.return,_e)}}break;case 3:if((e&1024)!==0){if(e=s.stateNode.containerInfo,i=e.nodeType,i===9)ju(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ju(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(n(163))}if(e=s.sibling,e!==null){e.return=s.return,Tt=e;break}Tt=s.return}}function cm(e,s,i){var c=i.flags;switch(i.tag){case 0:case 11:case 15:ms(e,i),c&4&&Fn(5,i);break;case 1:if(ms(e,i),c&4)if(e=i.stateNode,s===null)try{e.componentDidMount()}catch(b){Xe(i,i.return,b)}else{var d=Qs(i.type,s.memoizedProps);s=s.memoizedState;try{e.componentDidUpdate(d,s,e.__reactInternalSnapshotBeforeUpdate)}catch(b){Xe(i,i.return,b)}}c&64&&sm(i),c&512&&Qn(i,i.return);break;case 3:if(ms(e,i),c&64&&(e=i.updateQueue,e!==null)){if(s=null,i.child!==null)switch(i.child.tag){case 27:case 5:s=i.child.stateNode;break;case 1:s=i.child.stateNode}try{Hh(e,s)}catch(b){Xe(i,i.return,b)}}break;case 27:s===null&&c&4&&lm(i);case 26:case 5:ms(e,i),s===null&&c&4&&nm(i),c&512&&Qn(i,i.return);break;case 12:ms(e,i);break;case 13:ms(e,i),c&4&&hm(e,i),c&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=Qy.bind(null,i),dv(e,i))));break;case 22:if(c=i.memoizedState!==null||Xa,!c){s=s!==null&&s.memoizedState!==null||mt,d=Xa;var f=mt;Xa=c,(mt=s)&&!f?gs(e,i,(i.subtreeFlags&8772)!==0):ms(e,i),Xa=d,mt=f}break;case 30:break;default:ms(e,i)}}function um(e){var s=e.alternate;s!==null&&(e.alternate=null,um(s)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(s=e.stateNode,s!==null&&Eo(s)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var et=null,Vt=!1;function Ja(e,s,i){for(i=i.child;i!==null;)dm(e,s,i),i=i.sibling}function dm(e,s,i){if(He&&typeof He.onCommitFiberUnmount=="function")try{He.onCommitFiberUnmount(We,i)}catch(f){}switch(i.tag){case 26:mt||Oa(i,s),Ja(e,s,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:mt||Oa(i,s);var c=et,d=Vt;ws(i.type)&&(et=i.stateNode,Vt=!1),Ja(e,s,i),ai(i.stateNode),et=c,Vt=d;break;case 5:mt||Oa(i,s);case 6:if(c=et,d=Vt,et=null,Ja(e,s,i),et=c,Vt=d,et!==null)if(Vt)try{(et.nodeType===9?et.body:et.nodeName==="HTML"?et.ownerDocument.body:et).removeChild(i.stateNode)}catch(f){Xe(i,s,f)}else try{et.removeChild(i.stateNode)}catch(f){Xe(i,s,f)}break;case 18:et!==null&&(Vt?(e=et,Zm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),ui(e)):Zm(et,i.stateNode));break;case 4:c=et,d=Vt,et=i.stateNode.containerInfo,Vt=!0,Ja(e,s,i),et=c,Vt=d;break;case 0:case 11:case 14:case 15:mt||fs(2,i,s),mt||fs(4,i,s),Ja(e,s,i);break;case 1:mt||(Oa(i,s),c=i.stateNode,typeof c.componentWillUnmount=="function"&&rm(i,s,c)),Ja(e,s,i);break;case 21:Ja(e,s,i);break;case 22:mt=(c=mt)||i.memoizedState!==null,Ja(e,s,i),mt=c;break;default:Ja(e,s,i)}}function hm(e,s){if(s.memoizedState===null&&(e=s.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ui(e)}catch(i){Xe(s,s.return,i)}}function $y(e){switch(e.tag){case 13:case 19:var s=e.stateNode;return s===null&&(s=e.stateNode=new om),s;case 22:return e=e.stateNode,s=e._retryCache,s===null&&(s=e._retryCache=new om),s;default:throw Error(n(435,e.tag))}}function Kc(e,s){var i=$y(e);s.forEach(function(c){var d=Gy.bind(null,e,c);i.has(c)||(i.add(c),c.then(d,d))})}function Zt(e,s){var i=s.deletions;if(i!==null)for(var c=0;c<i.length;c++){var d=i[c],f=e,b=s,w=b;e:for(;w!==null;){switch(w.tag){case 27:if(ws(w.type)){et=w.stateNode,Vt=!1;break e}break;case 5:et=w.stateNode,Vt=!1;break e;case 3:case 4:et=w.stateNode.containerInfo,Vt=!0;break e}w=w.return}if(et===null)throw Error(n(160));dm(f,b,d),et=null,Vt=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)fm(s,e),s=s.sibling}var wa=null;function fm(e,s){var i=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Zt(s,e),ea(e),c&4&&(fs(3,e,e.return),Fn(3,e),fs(5,e,e.return));break;case 1:Zt(s,e),ea(e),c&512&&(mt||i===null||Oa(i,i.return)),c&64&&Xa&&(e=e.updateQueue,e!==null&&(c=e.callbacks,c!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?c:i.concat(c))));break;case 26:var d=wa;if(Zt(s,e),ea(e),c&512&&(mt||i===null||Oa(i,i.return)),c&4){var f=i!==null?i.memoizedState:null;if(c=e.memoizedState,i===null)if(c===null)if(e.stateNode===null){e:{c=e.type,i=e.memoizedProps,d=d.ownerDocument||d;t:switch(c){case"title":f=d.getElementsByTagName("title")[0],(!f||f[yn]||f[qt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(c),d.head.insertBefore(f,d.querySelector("head > title"))),Rt(f,c,i),f[qt]=e,Ct(f),c=f;break e;case"link":var b=lg("link","href",d).get(c+(i.href||""));if(b){for(var w=0;w<b.length;w++)if(f=b[w],f.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&f.getAttribute("rel")===(i.rel==null?null:i.rel)&&f.getAttribute("title")===(i.title==null?null:i.title)&&f.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){b.splice(w,1);break t}}f=d.createElement(c),Rt(f,c,i),d.head.appendChild(f);break;case"meta":if(b=lg("meta","content",d).get(c+(i.content||""))){for(w=0;w<b.length;w++)if(f=b[w],f.getAttribute("content")===(i.content==null?null:""+i.content)&&f.getAttribute("name")===(i.name==null?null:i.name)&&f.getAttribute("property")===(i.property==null?null:i.property)&&f.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&f.getAttribute("charset")===(i.charSet==null?null:i.charSet)){b.splice(w,1);break t}}f=d.createElement(c),Rt(f,c,i),d.head.appendChild(f);break;default:throw Error(n(468,c))}f[qt]=e,Ct(f),c=f}e.stateNode=c}else og(d,e.type,e.stateNode);else e.stateNode=ig(d,c,e.memoizedProps);else f!==c?(f===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):f.count--,c===null?og(d,e.type,e.stateNode):ig(d,c,e.memoizedProps)):c===null&&e.stateNode!==null&&Vc(e,e.memoizedProps,i.memoizedProps)}break;case 27:Zt(s,e),ea(e),c&512&&(mt||i===null||Oa(i,i.return)),i!==null&&c&4&&Vc(e,e.memoizedProps,i.memoizedProps);break;case 5:if(Zt(s,e),ea(e),c&512&&(mt||i===null||Oa(i,i.return)),e.flags&32){d=e.stateNode;try{fr(d,"")}catch(X){Xe(e,e.return,X)}}c&4&&e.stateNode!=null&&(d=e.memoizedProps,Vc(e,d,i!==null?i.memoizedProps:d)),c&1024&&(Gc=!0);break;case 6:if(Zt(s,e),ea(e),c&4){if(e.stateNode===null)throw Error(n(162));c=e.memoizedProps,i=e.stateNode;try{i.nodeValue=c}catch(X){Xe(e,e.return,X)}}break;case 3:if($l=null,d=wa,wa=Ll(s.containerInfo),Zt(s,e),wa=d,ea(e),c&4&&i!==null&&i.memoizedState.isDehydrated)try{ui(s.containerInfo)}catch(X){Xe(e,e.return,X)}Gc&&(Gc=!1,mm(e));break;case 4:c=wa,wa=Ll(e.stateNode.containerInfo),Zt(s,e),ea(e),wa=c;break;case 12:Zt(s,e),ea(e);break;case 13:Zt(s,e),ea(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(tu=qe()),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Kc(e,c)));break;case 22:d=e.memoizedState!==null;var R=i!==null&&i.memoizedState!==null,F=Xa,se=mt;if(Xa=F||d,mt=se||R,Zt(s,e),mt=se,Xa=F,ea(e),c&8192)e:for(s=e.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(i===null||R||Xa||mt||Gs(e)),i=null,s=e;;){if(s.tag===5||s.tag===26){if(i===null){R=i=s;try{if(f=R.stateNode,d)b=f.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{w=R.stateNode;var oe=R.memoizedProps.style,K=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;w.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(X){Xe(R,R.return,X)}}}else if(s.tag===6){if(i===null){R=s;try{R.stateNode.nodeValue=d?"":R.memoizedProps}catch(X){Xe(R,R.return,X)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===e)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;i===s&&(i=null),s=s.return}i===s&&(i=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=e.updateQueue,c!==null&&(i=c.retryQueue,i!==null&&(c.retryQueue=null,Kc(e,i))));break;case 19:Zt(s,e),ea(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Kc(e,c)));break;case 30:break;case 21:break;default:Zt(s,e),ea(e)}}function ea(e){var s=e.flags;if(s&2){try{for(var i,c=e.return;c!==null;){if(im(c)){i=c;break}c=c.return}if(i==null)throw Error(n(160));switch(i.tag){case 27:var d=i.stateNode,f=Fc(e);_l(e,f,d);break;case 5:var b=i.stateNode;i.flags&32&&(fr(b,""),i.flags&=-33);var w=Fc(e);_l(e,w,b);break;case 3:case 4:var R=i.stateNode.containerInfo,F=Fc(e);Qc(e,F,R);break;default:throw Error(n(161))}}catch(se){Xe(e,e.return,se)}e.flags&=-3}s&4096&&(e.flags&=-4097)}function mm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var s=e;mm(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),e=e.sibling}}function ms(e,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)cm(e,s.alternate,s),s=s.sibling}function Gs(e){for(e=e.child;e!==null;){var s=e;switch(s.tag){case 0:case 11:case 14:case 15:fs(4,s,s.return),Gs(s);break;case 1:Oa(s,s.return);var i=s.stateNode;typeof i.componentWillUnmount=="function"&&rm(s,s.return,i),Gs(s);break;case 27:ai(s.stateNode);case 26:case 5:Oa(s,s.return),Gs(s);break;case 22:s.memoizedState===null&&Gs(s);break;case 30:Gs(s);break;default:Gs(s)}e=e.sibling}}function gs(e,s,i){for(i=i&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,d=e,f=s,b=f.flags;switch(f.tag){case 0:case 11:case 15:gs(d,f,i),Fn(4,f);break;case 1:if(gs(d,f,i),c=f,d=c.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(F){Xe(c,c.return,F)}if(c=f,d=c.updateQueue,d!==null){var w=c.stateNode;try{var R=d.shared.hiddenCallbacks;if(R!==null)for(d.shared.hiddenCallbacks=null,d=0;d<R.length;d++)Ih(R[d],w)}catch(F){Xe(c,c.return,F)}}i&&b&64&&sm(f),Qn(f,f.return);break;case 27:lm(f);case 26:case 5:gs(d,f,i),i&&c===null&&b&4&&nm(f),Qn(f,f.return);break;case 12:gs(d,f,i);break;case 13:gs(d,f,i),i&&b&4&&hm(d,f);break;case 22:f.memoizedState===null&&gs(d,f,i),Qn(f,f.return);break;case 30:break;default:gs(d,f,i)}s=s.sibling}}function Wc(e,s){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(e=s.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&kn(i))}function Xc(e,s){e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&kn(e))}function Aa(e,s,i,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)gm(e,s,i,c),s=s.sibling}function gm(e,s,i,c){var d=s.flags;switch(s.tag){case 0:case 11:case 15:Aa(e,s,i,c),d&2048&&Fn(9,s);break;case 1:Aa(e,s,i,c);break;case 3:Aa(e,s,i,c),d&2048&&(e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&kn(e)));break;case 12:if(d&2048){Aa(e,s,i,c),e=s.stateNode;try{var f=s.memoizedProps,b=f.id,w=f.onPostCommit;typeof w=="function"&&w(b,s.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(R){Xe(s,s.return,R)}}else Aa(e,s,i,c);break;case 13:Aa(e,s,i,c);break;case 23:break;case 22:f=s.stateNode,b=s.alternate,s.memoizedState!==null?f._visibility&2?Aa(e,s,i,c):Gn(e,s):f._visibility&2?Aa(e,s,i,c):(f._visibility|=2,kr(e,s,i,c,(s.subtreeFlags&10256)!==0)),d&2048&&Wc(b,s);break;case 24:Aa(e,s,i,c),d&2048&&Xc(s.alternate,s);break;default:Aa(e,s,i,c)}}function kr(e,s,i,c,d){for(d=d&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var f=e,b=s,w=i,R=c,F=b.flags;switch(b.tag){case 0:case 11:case 15:kr(f,b,w,R,d),Fn(8,b);break;case 23:break;case 22:var se=b.stateNode;b.memoizedState!==null?se._visibility&2?kr(f,b,w,R,d):Gn(f,b):(se._visibility|=2,kr(f,b,w,R,d)),d&&F&2048&&Wc(b.alternate,b);break;case 24:kr(f,b,w,R,d),d&&F&2048&&Xc(b.alternate,b);break;default:kr(f,b,w,R,d)}s=s.sibling}}function Gn(e,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var i=e,c=s,d=c.flags;switch(c.tag){case 22:Gn(i,c),d&2048&&Wc(c.alternate,c);break;case 24:Gn(i,c),d&2048&&Xc(c.alternate,c);break;default:Gn(i,c)}s=s.sibling}}var Kn=8192;function Rr(e){if(e.subtreeFlags&Kn)for(e=e.child;e!==null;)pm(e),e=e.sibling}function pm(e){switch(e.tag){case 26:Rr(e),e.flags&Kn&&e.memoizedState!==null&&_v(wa,e.memoizedState,e.memoizedProps);break;case 5:Rr(e);break;case 3:case 4:var s=wa;wa=Ll(e.stateNode.containerInfo),Rr(e),wa=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=Kn,Kn=16777216,Rr(e),Kn=s):Rr(e));break;default:Rr(e)}}function ym(e){var s=e.alternate;if(s!==null&&(e=s.child,e!==null)){s.child=null;do s=e.sibling,e.sibling=null,e=s;while(e!==null)}}function Wn(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var i=0;i<s.length;i++){var c=s[i];Tt=c,bm(c,e)}ym(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)vm(e),e=e.sibling}function vm(e){switch(e.tag){case 0:case 11:case 15:Wn(e),e.flags&2048&&fs(9,e,e.return);break;case 3:Wn(e);break;case 12:Wn(e);break;case 22:var s=e.stateNode;e.memoizedState!==null&&s._visibility&2&&(e.return===null||e.return.tag!==13)?(s._visibility&=-3,Nl(e)):Wn(e);break;default:Wn(e)}}function Nl(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var i=0;i<s.length;i++){var c=s[i];Tt=c,bm(c,e)}ym(e)}for(e=e.child;e!==null;){switch(s=e,s.tag){case 0:case 11:case 15:fs(8,s,s.return),Nl(s);break;case 22:i=s.stateNode,i._visibility&2&&(i._visibility&=-3,Nl(s));break;default:Nl(s)}e=e.sibling}}function bm(e,s){for(;Tt!==null;){var i=Tt;switch(i.tag){case 0:case 11:case 15:fs(8,i,s);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var c=i.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:kn(i.memoizedState.cache)}if(c=i.child,c!==null)c.return=i,Tt=c;else e:for(i=e;Tt!==null;){c=Tt;var d=c.sibling,f=c.return;if(um(c),c===i){Tt=null;break e}if(d!==null){d.return=f,Tt=d;break e}Tt=f}}}var By={getCacheForType:function(e){var s=Lt(St),i=s.data.get(e);return i===void 0&&(i=e(),s.data.set(e,i)),i}},Py=typeof WeakMap=="function"?WeakMap:Map,Ye=0,Je=null,Re=null,ze=0,Ve=0,ta=null,ps=!1,Mr=!1,Jc=!1,Za=0,ot=0,ys=0,Ks=0,Zc=0,ya=0,Ur=0,Xn=null,Ft=null,eu=!1,tu=0,Cl=1/0,El=null,vs=null,kt=0,bs=null,qr=null,Lr=0,au=0,su=null,xm=null,Jn=0,ru=null;function aa(){if((Ye&2)!==0&&ze!==0)return ze&-ze;if(A.T!==null){var e=_r;return e!==0?e:du()}return Ud()}function wm(){ya===0&&(ya=(ze&536870912)===0||Pe?Ad():536870912);var e=pa.current;return e!==null&&(e.flags|=32),ya}function sa(e,s,i){(e===Je&&(Ve===2||Ve===9)||e.cancelPendingCommit!==null)&&(zr(e,0),xs(e,ze,ya,!1)),pn(e,i),((Ye&2)===0||e!==Je)&&(e===Je&&((Ye&2)===0&&(Ks|=i),ot===4&&xs(e,ze,ya,!1)),ka(e))}function jm(e,s,i){if((Ye&6)!==0)throw Error(n(327));var c=!i&&(s&124)===0&&(s&e.expiredLanes)===0||gn(e,s),d=c?Yy(e,s):lu(e,s,!0),f=c;do{if(d===0){Mr&&!c&&xs(e,s,0,!1);break}else{if(i=e.current.alternate,f&&!Iy(i)){d=lu(e,s,!1),f=!1;continue}if(d===2){if(f=s,e.errorRecoveryDisabledLanes&f)var b=0;else b=e.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){s=b;e:{var w=e;d=Xn;var R=w.current.memoizedState.isDehydrated;if(R&&(zr(w,b).flags|=256),b=lu(w,b,!1),b!==2){if(Jc&&!R){w.errorRecoveryDisabledLanes|=f,Ks|=f,d=4;break e}f=Ft,Ft=d,f!==null&&(Ft===null?Ft=f:Ft.push.apply(Ft,f))}d=b}if(f=!1,d!==2)continue}}if(d===1){zr(e,0),xs(e,s,0,!0);break}e:{switch(c=e,f=d,f){case 0:case 1:throw Error(n(345));case 4:if((s&4194048)!==s)break;case 6:xs(c,s,ya,!ps);break e;case 2:Ft=null;break;case 3:case 5:break;default:throw Error(n(329))}if((s&62914560)===s&&(d=tu+300-qe(),10<d)){if(xs(c,s,ya,!ps),zi(c,0,!0)!==0)break e;c.timeoutHandle=Xm(Sm.bind(null,c,i,Ft,El,eu,s,ya,Ks,Ur,ps,f,2,-0,0),d);break e}Sm(c,i,Ft,El,eu,s,ya,Ks,Ur,ps,f,0,-0,0)}}break}while(!0);ka(e)}function Sm(e,s,i,c,d,f,b,w,R,F,se,oe,K,X){if(e.timeoutHandle=-1,oe=s.subtreeFlags,(oe&8192||(oe&16785408)===16785408)&&(ni={stylesheets:null,count:0,unsuspend:Sv},pm(s),oe=Nv(),oe!==null)){e.cancelPendingCommit=oe(Om.bind(null,e,s,f,i,c,d,b,w,R,se,1,K,X)),xs(e,f,b,!F);return}Om(e,s,f,i,c,d,b,w,R)}function Iy(e){for(var s=e;;){var i=s.tag;if((i===0||i===11||i===15)&&s.flags&16384&&(i=s.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var c=0;c<i.length;c++){var d=i[c],f=d.getSnapshot;d=d.value;try{if(!Xt(f(),d))return!1}catch(b){return!1}}if(i=s.child,s.subtreeFlags&16384&&i!==null)i.return=s,s=i;else{if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function xs(e,s,i,c){s&=~Zc,s&=~Ks,e.suspendedLanes|=s,e.pingedLanes&=~s,c&&(e.warmLanes|=s),c=e.expirationTimes;for(var d=s;0<d;){var f=31-vt(d),b=1<<f;c[f]=-1,d&=~b}i!==0&&Rd(e,i,s)}function Tl(){return(Ye&6)===0?(Zn(0),!1):!0}function nu(){if(Re!==null){if(Ve===0)var e=Re.return;else e=Re,Va=Hs=null,jc(e),Or=null,Hn=0,e=Re;for(;e!==null;)am(e.alternate,e),e=e.return;Re=null}}function zr(e,s){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,iv(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),nu(),Je=e,Re=i=Ia(e.current,null),ze=s,Ve=0,ta=null,ps=!1,Mr=gn(e,s),Jc=!1,Ur=ya=Zc=Ks=ys=ot=0,Ft=Xn=null,eu=!1,(s&8)!==0&&(s|=s&32);var c=e.entangledLanes;if(c!==0)for(e=e.entanglements,c&=s;0<c;){var d=31-vt(c),f=1<<d;s|=e[d],c&=~f}return Za=s,Wi(),i}function _m(e,s){Ae=null,A.H=gl,s===Mn||s===nl?(s=Bh(),Ve=3):s===Lh?(s=Bh(),Ve=4):Ve=s===If?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,ta=s,Re===null&&(ot=1,xl(e,ha(s,e.current)))}function Nm(){var e=A.H;return A.H=gl,e===null?gl:e}function Cm(){var e=A.A;return A.A=By,e}function iu(){ot=4,ps||(ze&4194048)!==ze&&pa.current!==null||(Mr=!0),(ys&134217727)===0&&(Ks&134217727)===0||Je===null||xs(Je,ze,ya,!1)}function lu(e,s,i){var c=Ye;Ye|=2;var d=Nm(),f=Cm();(Je!==e||ze!==s)&&(El=null,zr(e,s)),s=!1;var b=ot;e:do try{if(Ve!==0&&Re!==null){var w=Re,R=ta;switch(Ve){case 8:nu(),b=6;break e;case 3:case 2:case 9:case 6:pa.current===null&&(s=!0);var F=Ve;if(Ve=0,ta=null,$r(e,w,R,F),i&&Mr){b=0;break e}break;default:F=Ve,Ve=0,ta=null,$r(e,w,R,F)}}Hy(),b=ot;break}catch(se){_m(e,se)}while(!0);return s&&e.shellSuspendCounter++,Va=Hs=null,Ye=c,A.H=d,A.A=f,Re===null&&(Je=null,ze=0,Wi()),b}function Hy(){for(;Re!==null;)Em(Re)}function Yy(e,s){var i=Ye;Ye|=2;var c=Nm(),d=Cm();Je!==e||ze!==s?(El=null,Cl=qe()+500,zr(e,s)):Mr=gn(e,s);e:do try{if(Ve!==0&&Re!==null){s=Re;var f=ta;t:switch(Ve){case 1:Ve=0,ta=null,$r(e,s,f,1);break;case 2:case 9:if(zh(f)){Ve=0,ta=null,Tm(s);break}s=function(){Ve!==2&&Ve!==9||Je!==e||(Ve=7),ka(e)},f.then(s,s);break e;case 3:Ve=7;break e;case 4:Ve=5;break e;case 7:zh(f)?(Ve=0,ta=null,Tm(s)):(Ve=0,ta=null,$r(e,s,f,7));break;case 5:var b=null;switch(Re.tag){case 26:b=Re.memoizedState;case 5:case 27:var w=Re;if(!b||cg(b)){Ve=0,ta=null;var R=w.sibling;if(R!==null)Re=R;else{var F=w.return;F!==null?(Re=F,Dl(F)):Re=null}break t}}Ve=0,ta=null,$r(e,s,f,5);break;case 6:Ve=0,ta=null,$r(e,s,f,6);break;case 8:nu(),ot=6;break e;default:throw Error(n(462))}}Vy();break}catch(se){_m(e,se)}while(!0);return Va=Hs=null,A.H=c,A.A=d,Ye=i,Re!==null?0:(Je=null,ze=0,Wi(),ot)}function Vy(){for(;Re!==null&&!De();)Em(Re)}function Em(e){var s=em(e.alternate,e,Za);e.memoizedProps=e.pendingProps,s===null?Dl(e):Re=s}function Tm(e){var s=e,i=s.alternate;switch(s.tag){case 15:case 0:s=Gf(i,s,s.pendingProps,s.type,void 0,ze);break;case 11:s=Gf(i,s,s.pendingProps,s.type.render,s.ref,ze);break;case 5:jc(s);default:am(i,s),s=Re=Th(s,Za),s=em(i,s,Za)}e.memoizedProps=e.pendingProps,s===null?Dl(e):Re=s}function $r(e,s,i,c){Va=Hs=null,jc(s),Or=null,Hn=0;var d=s.return;try{if(My(e,d,s,i,ze)){ot=1,xl(e,ha(i,e.current)),Re=null;return}}catch(f){if(d!==null)throw Re=d,f;ot=1,xl(e,ha(i,e.current)),Re=null;return}s.flags&32768?(Pe||c===1?e=!0:Mr||(ze&536870912)!==0?e=!1:(ps=e=!0,(c===2||c===9||c===3||c===6)&&(c=pa.current,c!==null&&c.tag===13&&(c.flags|=16384))),Dm(s,e)):Dl(s)}function Dl(e){var s=e;do{if((s.flags&32768)!==0){Dm(s,ps);return}e=s.return;var i=qy(s.alternate,s,Za);if(i!==null){Re=i;return}if(s=s.sibling,s!==null){Re=s;return}Re=s=e}while(s!==null);ot===0&&(ot=5)}function Dm(e,s){do{var i=Ly(e.alternate,e);if(i!==null){i.flags&=32767,Re=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!s&&(e=e.sibling,e!==null)){Re=e;return}Re=e=i}while(e!==null);ot=6,Re=null}function Om(e,s,i,c,d,f,b,w,R){e.cancelPendingCommit=null;do Ol();while(kt!==0);if((Ye&6)!==0)throw Error(n(327));if(s!==null){if(s===e.current)throw Error(n(177));if(f=s.lanes|s.childLanes,f|=Xo,S0(e,i,f,b,w,R),e===Je&&(Re=Je=null,ze=0),qr=s,bs=e,Lr=i,au=f,su=d,xm=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Ky(Wt,function(){return Um(),null})):(e.callbackNode=null,e.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=A.T,A.T=null,d=Q.p,Q.p=2,b=Ye,Ye|=4;try{zy(e,s,i)}finally{Ye=b,Q.p=d,A.T=c}}kt=1,Am(),km(),Rm()}}function Am(){if(kt===1){kt=0;var e=bs,s=qr,i=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||i){i=A.T,A.T=null;var c=Q.p;Q.p=2;var d=Ye;Ye|=4;try{fm(s,e);var f=bu,b=vh(e.containerInfo),w=f.focusedElem,R=f.selectionRange;if(b!==w&&w&&w.ownerDocument&&yh(w.ownerDocument.documentElement,w)){if(R!==null&&Fo(w)){var F=R.start,se=R.end;if(se===void 0&&(se=F),"selectionStart"in w)w.selectionStart=F,w.selectionEnd=Math.min(se,w.value.length);else{var oe=w.ownerDocument||document,K=oe&&oe.defaultView||window;if(K.getSelection){var X=K.getSelection(),Te=w.textContent.length,_e=Math.min(R.start,Te),Ke=R.end===void 0?_e:Math.min(R.end,Te);!X.extend&&_e>Ke&&(b=Ke,Ke=_e,_e=b);var B=ph(w,_e),L=ph(w,Ke);if(B&&L&&(X.rangeCount!==1||X.anchorNode!==B.node||X.anchorOffset!==B.offset||X.focusNode!==L.node||X.focusOffset!==L.offset)){var V=oe.createRange();V.setStart(B.node,B.offset),X.removeAllRanges(),_e>Ke?(X.addRange(V),X.extend(L.node,L.offset)):(V.setEnd(L.node,L.offset),X.addRange(V))}}}}for(oe=[],X=w;X=X.parentNode;)X.nodeType===1&&oe.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<oe.length;w++){var ne=oe[w];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}Il=!!vu,bu=vu=null}finally{Ye=d,Q.p=c,A.T=i}}e.current=s,kt=2}}function km(){if(kt===2){kt=0;var e=bs,s=qr,i=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||i){i=A.T,A.T=null;var c=Q.p;Q.p=2;var d=Ye;Ye|=4;try{cm(e,s.alternate,s)}finally{Ye=d,Q.p=c,A.T=i}}kt=3}}function Rm(){if(kt===4||kt===3){kt=0,je();var e=bs,s=qr,i=Lr,c=xm;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?kt=5:(kt=0,qr=bs=null,Mm(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(vs=null),No(i),s=s.stateNode,He&&typeof He.onCommitFiberRoot=="function")try{He.onCommitFiberRoot(We,s,void 0,(s.current.flags&128)===128)}catch(R){}if(c!==null){s=A.T,d=Q.p,Q.p=2,A.T=null;try{for(var f=e.onRecoverableError,b=0;b<c.length;b++){var w=c[b];f(w.value,{componentStack:w.stack})}}finally{A.T=s,Q.p=d}}(Lr&3)!==0&&Ol(),ka(e),d=e.pendingLanes,(i&4194090)!==0&&(d&42)!==0?e===ru?Jn++:(Jn=0,ru=e):Jn=0,Zn(0)}}function Mm(e,s){(e.pooledCacheLanes&=s)===0&&(s=e.pooledCache,s!=null&&(e.pooledCache=null,kn(s)))}function Ol(e){return Am(),km(),Rm(),Um()}function Um(){if(kt!==5)return!1;var e=bs,s=au;au=0;var i=No(Lr),c=A.T,d=Q.p;try{Q.p=32>i?32:i,A.T=null,i=su,su=null;var f=bs,b=Lr;if(kt=0,qr=bs=null,Lr=0,(Ye&6)!==0)throw Error(n(331));var w=Ye;if(Ye|=4,vm(f.current),gm(f,f.current,b,i),Ye=w,Zn(0,!1),He&&typeof He.onPostCommitFiberRoot=="function")try{He.onPostCommitFiberRoot(We,f)}catch(R){}return!0}finally{Q.p=d,A.T=c,Mm(e,s)}}function qm(e,s,i){s=ha(i,s),s=qc(e.stateNode,s,2),e=cs(e,s,2),e!==null&&(pn(e,2),ka(e))}function Xe(e,s,i){if(e.tag===3)qm(e,e,i);else for(;s!==null;){if(s.tag===3){qm(s,e,i);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(vs===null||!vs.has(c))){e=ha(i,e),i=Bf(2),c=cs(s,i,2),c!==null&&(Pf(i,c,s,e),pn(c,2),ka(c));break}}s=s.return}}function ou(e,s,i){var c=e.pingCache;if(c===null){c=e.pingCache=new Py;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(i)||(Jc=!0,d.add(i),e=Fy.bind(null,e,s,i),s.then(e,e))}function Fy(e,s,i){var c=e.pingCache;c!==null&&c.delete(s),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Je===e&&(ze&i)===i&&(ot===4||ot===3&&(ze&62914560)===ze&&300>qe()-tu?(Ye&2)===0&&zr(e,0):Zc|=i,Ur===ze&&(Ur=0)),ka(e)}function Lm(e,s){s===0&&(s=kd()),e=xr(e,s),e!==null&&(pn(e,s),ka(e))}function Qy(e){var s=e.memoizedState,i=0;s!==null&&(i=s.retryLane),Lm(e,i)}function Gy(e,s){var i=0;switch(e.tag){case 13:var c=e.stateNode,d=e.memoizedState;d!==null&&(i=d.retryLane);break;case 19:c=e.stateNode;break;case 22:c=e.stateNode._retryCache;break;default:throw Error(n(314))}c!==null&&c.delete(s),Lm(e,i)}function Ky(e,s){return ye(e,s)}var Al=null,Br=null,cu=!1,kl=!1,uu=!1,Ws=0;function ka(e){e!==Br&&e.next===null&&(Br===null?Al=Br=e:Br=Br.next=e),kl=!0,cu||(cu=!0,Xy())}function Zn(e,s){if(!uu&&kl){uu=!0;do for(var i=!1,c=Al;c!==null;){if(e!==0){var d=c.pendingLanes;if(d===0)var f=0;else{var b=c.suspendedLanes,w=c.pingedLanes;f=(1<<31-vt(42|e)+1)-1,f&=d&~(b&~w),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(i=!0,Pm(c,f))}else f=ze,f=zi(c,c===Je?f:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(f&3)===0||gn(c,f)||(i=!0,Pm(c,f));c=c.next}while(i);uu=!1}}function Wy(){zm()}function zm(){kl=cu=!1;var e=0;Ws!==0&&(nv()&&(e=Ws),Ws=0);for(var s=qe(),i=null,c=Al;c!==null;){var d=c.next,f=$m(c,s);f===0?(c.next=null,i===null?Al=d:i.next=d,d===null&&(Br=i)):(i=c,(e!==0||(f&3)!==0)&&(kl=!0)),c=d}Zn(e)}function $m(e,s){for(var i=e.suspendedLanes,c=e.pingedLanes,d=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var b=31-vt(f),w=1<<b,R=d[b];R===-1?((w&i)===0||(w&c)!==0)&&(d[b]=j0(w,s)):R<=s&&(e.expiredLanes|=w),f&=~w}if(s=Je,i=ze,i=zi(e,e===s?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c=e.callbackNode,i===0||e===s&&(Ve===2||Ve===9)||e.cancelPendingCommit!==null)return c!==null&&c!==null&&pe(c),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||gn(e,i)){if(s=i&-i,s===e.callbackPriority)return s;switch(c!==null&&pe(c),No(i)){case 2:case 8:i=it;break;case 32:i=Wt;break;case 268435456:i=Ea;break;default:i=Wt}return c=Bm.bind(null,e),i=ye(i,c),e.callbackPriority=s,e.callbackNode=i,s}return c!==null&&c!==null&&pe(c),e.callbackPriority=2,e.callbackNode=null,2}function Bm(e,s){if(kt!==0&&kt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Ol()&&e.callbackNode!==i)return null;var c=ze;return c=zi(e,e===Je?c:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c===0?null:(jm(e,c,s),$m(e,qe()),e.callbackNode!=null&&e.callbackNode===i?Bm.bind(null,e):null)}function Pm(e,s){if(Ol())return null;jm(e,s,!0)}function Xy(){lv(function(){(Ye&6)!==0?ye(Le,Wy):zm()})}function du(){return Ws===0&&(Ws=Ad()),Ws}function Im(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Hi(""+e)}function Hm(e,s){var i=s.ownerDocument.createElement("input");return i.name=s.name,i.value=s.value,e.id&&i.setAttribute("form",e.id),s.parentNode.insertBefore(i,s),e=new FormData(e),i.parentNode.removeChild(i),e}function Jy(e,s,i,c,d){if(s==="submit"&&i&&i.stateNode===d){var f=Im((d[It]||null).action),b=c.submitter;b&&(s=(s=b[It]||null)?Im(s.formAction):b.getAttribute("formAction"),s!==null&&(f=s,b=null));var w=new Qi("action","action",null,c,d);e.push({event:w,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ws!==0){var R=b?Hm(d,b):new FormData(d);Ac(i,{pending:!0,data:R,method:d.method,action:f},null,R)}}else typeof f=="function"&&(w.preventDefault(),R=b?Hm(d,b):new FormData(d),Ac(i,{pending:!0,data:R,method:d.method,action:f},f,R))},currentTarget:d}]})}}for(var hu=0;hu<Wo.length;hu++){var fu=Wo[hu],Zy=fu.toLowerCase(),ev=fu[0].toUpperCase()+fu.slice(1);xa(Zy,"on"+ev)}xa(wh,"onAnimationEnd"),xa(jh,"onAnimationIteration"),xa(Sh,"onAnimationStart"),xa("dblclick","onDoubleClick"),xa("focusin","onFocus"),xa("focusout","onBlur"),xa(yy,"onTransitionRun"),xa(vy,"onTransitionStart"),xa(by,"onTransitionCancel"),xa(_h,"onTransitionEnd"),ur("onMouseEnter",["mouseout","mouseover"]),ur("onMouseLeave",["mouseout","mouseover"]),ur("onPointerEnter",["pointerout","pointerover"]),ur("onPointerLeave",["pointerout","pointerover"]),Ms("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ms("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ms("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ms("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ms("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ms("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ei="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ei));function Ym(e,s){s=(s&4)!==0;for(var i=0;i<e.length;i++){var c=e[i],d=c.event;c=c.listeners;e:{var f=void 0;if(s)for(var b=c.length-1;0<=b;b--){var w=c[b],R=w.instance,F=w.currentTarget;if(w=w.listener,R!==f&&d.isPropagationStopped())break e;f=w,d.currentTarget=F;try{f(d)}catch(se){bl(se)}d.currentTarget=null,f=R}else for(b=0;b<c.length;b++){if(w=c[b],R=w.instance,F=w.currentTarget,w=w.listener,R!==f&&d.isPropagationStopped())break e;f=w,d.currentTarget=F;try{f(d)}catch(se){bl(se)}d.currentTarget=null,f=R}}}}function Me(e,s){var i=s[Co];i===void 0&&(i=s[Co]=new Set);var c=e+"__bubble";i.has(c)||(Vm(s,e,2,!1),i.add(c))}function mu(e,s,i){var c=0;s&&(c|=4),Vm(i,e,c,s)}var Rl="_reactListening"+Math.random().toString(36).slice(2);function gu(e){if(!e[Rl]){e[Rl]=!0,Ld.forEach(function(i){i!=="selectionchange"&&(tv.has(i)||mu(i,!1,e),mu(i,!0,e))});var s=e.nodeType===9?e:e.ownerDocument;s===null||s[Rl]||(s[Rl]=!0,mu("selectionchange",!1,s))}}function Vm(e,s,i,c){switch(gg(s)){case 2:var d=Tv;break;case 8:d=Dv;break;default:d=Du}i=d.bind(null,s,i,e),d=void 0,!Lo||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?e.addEventListener(s,i,{capture:!0,passive:d}):e.addEventListener(s,i,!0):d!==void 0?e.addEventListener(s,i,{passive:d}):e.addEventListener(s,i,!1)}function pu(e,s,i,c,d){var f=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var b=c.tag;if(b===3||b===4){var w=c.stateNode.containerInfo;if(w===d)break;if(b===4)for(b=c.return;b!==null;){var R=b.tag;if((R===3||R===4)&&b.stateNode.containerInfo===d)return;b=b.return}for(;w!==null;){if(b=lr(w),b===null)return;if(R=b.tag,R===5||R===6||R===26||R===27){c=f=b;continue e}w=w.parentNode}}c=c.return}Xd(function(){var F=f,se=Uo(i),oe=[];e:{var K=Nh.get(e);if(K!==void 0){var X=Qi,Te=e;switch(e){case"keypress":if(Vi(i)===0)break e;case"keydown":case"keyup":X=K0;break;case"focusin":Te="focus",X=Po;break;case"focusout":Te="blur",X=Po;break;case"beforeblur":case"afterblur":X=Po;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=eh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=L0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=J0;break;case wh:case jh:case Sh:X=B0;break;case _h:X=ey;break;case"scroll":case"scrollend":X=U0;break;case"wheel":X=ay;break;case"copy":case"cut":case"paste":X=I0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=ah;break;case"toggle":case"beforetoggle":X=ry}var _e=(s&4)!==0,Ke=!_e&&(e==="scroll"||e==="scrollend"),B=_e?K!==null?K+"Capture":null:K;_e=[];for(var L=F,V;L!==null;){var ne=L;if(V=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||V===null||B===null||(ne=bn(L,B),ne!=null&&_e.push(ti(L,ne,V))),Ke)break;L=L.return}0<_e.length&&(K=new X(K,Te,null,i,se),oe.push({event:K,listeners:_e}))}}if((s&7)===0){e:{if(K=e==="mouseover"||e==="pointerover",X=e==="mouseout"||e==="pointerout",K&&i!==Mo&&(Te=i.relatedTarget||i.fromElement)&&(lr(Te)||Te[ir]))break e;if((X||K)&&(K=se.window===se?se:(K=se.ownerDocument)?K.defaultView||K.parentWindow:window,X?(Te=i.relatedTarget||i.toElement,X=F,Te=Te?lr(Te):null,Te!==null&&(Ke=u(Te),_e=Te.tag,Te!==Ke||_e!==5&&_e!==27&&_e!==6)&&(Te=null)):(X=null,Te=F),X!==Te)){if(_e=eh,ne="onMouseLeave",B="onMouseEnter",L="mouse",(e==="pointerout"||e==="pointerover")&&(_e=ah,ne="onPointerLeave",B="onPointerEnter",L="pointer"),Ke=X==null?K:vn(X),V=Te==null?K:vn(Te),K=new _e(ne,L+"leave",X,i,se),K.target=Ke,K.relatedTarget=V,ne=null,lr(se)===F&&(_e=new _e(B,L+"enter",Te,i,se),_e.target=V,_e.relatedTarget=Ke,ne=_e),Ke=ne,X&&Te)t:{for(_e=X,B=Te,L=0,V=_e;V;V=Pr(V))L++;for(V=0,ne=B;ne;ne=Pr(ne))V++;for(;0<L-V;)_e=Pr(_e),L--;for(;0<V-L;)B=Pr(B),V--;for(;L--;){if(_e===B||B!==null&&_e===B.alternate)break t;_e=Pr(_e),B=Pr(B)}_e=null}else _e=null;X!==null&&Fm(oe,K,X,_e,!1),Te!==null&&Ke!==null&&Fm(oe,Ke,Te,_e,!0)}}e:{if(K=F?vn(F):window,X=K.nodeName&&K.nodeName.toLowerCase(),X==="select"||X==="input"&&K.type==="file")var ve=uh;else if(oh(K))if(dh)ve=my;else{ve=hy;var ke=dy}else X=K.nodeName,!X||X.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?F&&Ro(F.elementType)&&(ve=uh):ve=fy;if(ve&&(ve=ve(e,F))){ch(oe,ve,i,se);break e}ke&&ke(e,K,F),e==="focusout"&&F&&K.type==="number"&&F.memoizedProps.value!=null&&ko(K,"number",K.value)}switch(ke=F?vn(F):window,e){case"focusin":(oh(ke)||ke.contentEditable==="true")&&(yr=ke,Qo=F,En=null);break;case"focusout":En=Qo=yr=null;break;case"mousedown":Go=!0;break;case"contextmenu":case"mouseup":case"dragend":Go=!1,bh(oe,i,se);break;case"selectionchange":if(py)break;case"keydown":case"keyup":bh(oe,i,se)}var we;if(Ho)e:{switch(e){case"compositionstart":var Ne="onCompositionStart";break e;case"compositionend":Ne="onCompositionEnd";break e;case"compositionupdate":Ne="onCompositionUpdate";break e}Ne=void 0}else pr?ih(e,i)&&(Ne="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(Ne="onCompositionStart");Ne&&(sh&&i.locale!=="ko"&&(pr||Ne!=="onCompositionStart"?Ne==="onCompositionEnd"&&pr&&(we=Jd()):(ns=se,zo="value"in ns?ns.value:ns.textContent,pr=!0)),ke=Ml(F,Ne),0<ke.length&&(Ne=new th(Ne,e,null,i,se),oe.push({event:Ne,listeners:ke}),we?Ne.data=we:(we=lh(i),we!==null&&(Ne.data=we)))),(we=iy?ly(e,i):oy(e,i))&&(Ne=Ml(F,"onBeforeInput"),0<Ne.length&&(ke=new th("onBeforeInput","beforeinput",null,i,se),oe.push({event:ke,listeners:Ne}),ke.data=we)),Jy(oe,e,F,i,se)}Ym(oe,s)})}function ti(e,s,i){return{instance:e,listener:s,currentTarget:i}}function Ml(e,s){for(var i=s+"Capture",c=[];e!==null;){var d=e,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=bn(e,i),d!=null&&c.unshift(ti(e,d,f)),d=bn(e,s),d!=null&&c.push(ti(e,d,f))),e.tag===3)return c;e=e.return}return[]}function Pr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Fm(e,s,i,c,d){for(var f=s._reactName,b=[];i!==null&&i!==c;){var w=i,R=w.alternate,F=w.stateNode;if(w=w.tag,R!==null&&R===c)break;w!==5&&w!==26&&w!==27||F===null||(R=F,d?(F=bn(i,f),F!=null&&b.unshift(ti(i,F,R))):d||(F=bn(i,f),F!=null&&b.push(ti(i,F,R)))),i=i.return}b.length!==0&&e.push({event:s,listeners:b})}var av=/\r\n?/g,sv=/\u0000|\uFFFD/g;function Qm(e){return(typeof e=="string"?e:""+e).replace(av,`
`).replace(sv,"")}function Gm(e,s){return s=Qm(s),Qm(e)===s}function Ul(){}function Ge(e,s,i,c,d,f){switch(i){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||fr(e,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&fr(e,""+c);break;case"className":Bi(e,"class",c);break;case"tabIndex":Bi(e,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Bi(e,i,c);break;case"style":Kd(e,c,f);break;case"data":if(s!=="object"){Bi(e,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||i!=="href")){e.removeAttribute(i);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(i);break}c=Hi(""+c),e.setAttribute(i,c);break;case"action":case"formAction":if(typeof c=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(i==="formAction"?(s!=="input"&&Ge(e,s,"name",d.name,d,null),Ge(e,s,"formEncType",d.formEncType,d,null),Ge(e,s,"formMethod",d.formMethod,d,null),Ge(e,s,"formTarget",d.formTarget,d,null)):(Ge(e,s,"encType",d.encType,d,null),Ge(e,s,"method",d.method,d,null),Ge(e,s,"target",d.target,d,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(i);break}c=Hi(""+c),e.setAttribute(i,c);break;case"onClick":c!=null&&(e.onclick=Ul);break;case"onScroll":c!=null&&Me("scroll",e);break;case"onScrollEnd":c!=null&&Me("scrollend",e);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(n(61));if(i=c.__html,i!=null){if(d.children!=null)throw Error(n(60));e.innerHTML=i}}break;case"multiple":e.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":e.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){e.removeAttribute("xlink:href");break}i=Hi(""+c),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(i,""+c):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":c===!0?e.setAttribute(i,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(i,c):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?e.setAttribute(i,c):e.removeAttribute(i);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?e.removeAttribute(i):e.setAttribute(i,c);break;case"popover":Me("beforetoggle",e),Me("toggle",e),$i(e,"popover",c);break;case"xlinkActuate":Ba(e,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Ba(e,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Ba(e,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Ba(e,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Ba(e,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Ba(e,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Ba(e,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Ba(e,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Ba(e,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":$i(e,"is",c);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=R0.get(i)||i,$i(e,i,c))}}function yu(e,s,i,c,d,f){switch(i){case"style":Kd(e,c,f);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(n(61));if(i=c.__html,i!=null){if(d.children!=null)throw Error(n(60));e.innerHTML=i}}break;case"children":typeof c=="string"?fr(e,c):(typeof c=="number"||typeof c=="bigint")&&fr(e,""+c);break;case"onScroll":c!=null&&Me("scroll",e);break;case"onScrollEnd":c!=null&&Me("scrollend",e);break;case"onClick":c!=null&&(e.onclick=Ul);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zd.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(d=i.endsWith("Capture"),s=i.slice(2,d?i.length-7:void 0),f=e[It]||null,f=f!=null?f[i]:null,typeof f=="function"&&e.removeEventListener(s,f,d),typeof c=="function")){typeof f!="function"&&f!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(s,c,d);break e}i in e?e[i]=c:c===!0?e.setAttribute(i,""):$i(e,i,c)}}}function Rt(e,s,i){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Me("error",e),Me("load",e);var c=!1,d=!1,f;for(f in i)if(i.hasOwnProperty(f)){var b=i[f];if(b!=null)switch(f){case"src":c=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:Ge(e,s,f,b,i,null)}}d&&Ge(e,s,"srcSet",i.srcSet,i,null),c&&Ge(e,s,"src",i.src,i,null);return;case"input":Me("invalid",e);var w=f=b=d=null,R=null,F=null;for(c in i)if(i.hasOwnProperty(c)){var se=i[c];if(se!=null)switch(c){case"name":d=se;break;case"type":b=se;break;case"checked":R=se;break;case"defaultChecked":F=se;break;case"value":f=se;break;case"defaultValue":w=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(n(137,s));break;default:Ge(e,s,c,se,i,null)}}Vd(e,f,w,R,F,b,d,!1),Pi(e);return;case"select":Me("invalid",e),c=b=f=null;for(d in i)if(i.hasOwnProperty(d)&&(w=i[d],w!=null))switch(d){case"value":f=w;break;case"defaultValue":b=w;break;case"multiple":c=w;default:Ge(e,s,d,w,i,null)}s=f,i=b,e.multiple=!!c,s!=null?hr(e,!!c,s,!1):i!=null&&hr(e,!!c,i,!0);return;case"textarea":Me("invalid",e),f=d=c=null;for(b in i)if(i.hasOwnProperty(b)&&(w=i[b],w!=null))switch(b){case"value":c=w;break;case"defaultValue":d=w;break;case"children":f=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(n(91));break;default:Ge(e,s,b,w,i,null)}Qd(e,c,d,f),Pi(e);return;case"option":for(R in i)i.hasOwnProperty(R)&&(c=i[R],c!=null)&&(R==="selected"?e.selected=c&&typeof c!="function"&&typeof c!="symbol":Ge(e,s,R,c,i,null));return;case"dialog":Me("beforetoggle",e),Me("toggle",e),Me("cancel",e),Me("close",e);break;case"iframe":case"object":Me("load",e);break;case"video":case"audio":for(c=0;c<ei.length;c++)Me(ei[c],e);break;case"image":Me("error",e),Me("load",e);break;case"details":Me("toggle",e);break;case"embed":case"source":case"link":Me("error",e),Me("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in i)if(i.hasOwnProperty(F)&&(c=i[F],c!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:Ge(e,s,F,c,i,null)}return;default:if(Ro(s)){for(se in i)i.hasOwnProperty(se)&&(c=i[se],c!==void 0&&yu(e,s,se,c,i,void 0));return}}for(w in i)i.hasOwnProperty(w)&&(c=i[w],c!=null&&Ge(e,s,w,c,i,null))}function rv(e,s,i,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,b=null,w=null,R=null,F=null,se=null;for(X in i){var oe=i[X];if(i.hasOwnProperty(X)&&oe!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":R=oe;default:c.hasOwnProperty(X)||Ge(e,s,X,null,c,oe)}}for(var K in c){var X=c[K];if(oe=i[K],c.hasOwnProperty(K)&&(X!=null||oe!=null))switch(K){case"type":f=X;break;case"name":d=X;break;case"checked":F=X;break;case"defaultChecked":se=X;break;case"value":b=X;break;case"defaultValue":w=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(n(137,s));break;default:X!==oe&&Ge(e,s,K,X,c,oe)}}Ao(e,b,w,R,F,se,f,d);return;case"select":X=b=w=K=null;for(f in i)if(R=i[f],i.hasOwnProperty(f)&&R!=null)switch(f){case"value":break;case"multiple":X=R;default:c.hasOwnProperty(f)||Ge(e,s,f,null,c,R)}for(d in c)if(f=c[d],R=i[d],c.hasOwnProperty(d)&&(f!=null||R!=null))switch(d){case"value":K=f;break;case"defaultValue":w=f;break;case"multiple":b=f;default:f!==R&&Ge(e,s,d,f,c,R)}s=w,i=b,c=X,K!=null?hr(e,!!i,K,!1):!!c!=!!i&&(s!=null?hr(e,!!i,s,!0):hr(e,!!i,i?[]:"",!1));return;case"textarea":X=K=null;for(w in i)if(d=i[w],i.hasOwnProperty(w)&&d!=null&&!c.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Ge(e,s,w,null,c,d)}for(b in c)if(d=c[b],f=i[b],c.hasOwnProperty(b)&&(d!=null||f!=null))switch(b){case"value":K=d;break;case"defaultValue":X=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(n(91));break;default:d!==f&&Ge(e,s,b,d,c,f)}Fd(e,K,X);return;case"option":for(var Te in i)K=i[Te],i.hasOwnProperty(Te)&&K!=null&&!c.hasOwnProperty(Te)&&(Te==="selected"?e.selected=!1:Ge(e,s,Te,null,c,K));for(R in c)K=c[R],X=i[R],c.hasOwnProperty(R)&&K!==X&&(K!=null||X!=null)&&(R==="selected"?e.selected=K&&typeof K!="function"&&typeof K!="symbol":Ge(e,s,R,K,c,X));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in i)K=i[_e],i.hasOwnProperty(_e)&&K!=null&&!c.hasOwnProperty(_e)&&Ge(e,s,_e,null,c,K);for(F in c)if(K=c[F],X=i[F],c.hasOwnProperty(F)&&K!==X&&(K!=null||X!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(n(137,s));break;default:Ge(e,s,F,K,c,X)}return;default:if(Ro(s)){for(var Ke in i)K=i[Ke],i.hasOwnProperty(Ke)&&K!==void 0&&!c.hasOwnProperty(Ke)&&yu(e,s,Ke,void 0,c,K);for(se in c)K=c[se],X=i[se],!c.hasOwnProperty(se)||K===X||K===void 0&&X===void 0||yu(e,s,se,K,c,X);return}}for(var B in i)K=i[B],i.hasOwnProperty(B)&&K!=null&&!c.hasOwnProperty(B)&&Ge(e,s,B,null,c,K);for(oe in c)K=c[oe],X=i[oe],!c.hasOwnProperty(oe)||K===X||K==null&&X==null||Ge(e,s,oe,K,c,X)}var vu=null,bu=null;function ql(e){return e.nodeType===9?e:e.ownerDocument}function Km(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Wm(e,s){if(e===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&s==="foreignObject"?0:e}function xu(e,s){return e==="textarea"||e==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var wu=null;function nv(){var e=window.event;return e&&e.type==="popstate"?e===wu?!1:(wu=e,!0):(wu=null,!1)}var Xm=typeof setTimeout=="function"?setTimeout:void 0,iv=typeof clearTimeout=="function"?clearTimeout:void 0,Jm=typeof Promise=="function"?Promise:void 0,lv=typeof queueMicrotask=="function"?queueMicrotask:typeof Jm!="undefined"?function(e){return Jm.resolve(null).then(e).catch(ov)}:Xm;function ov(e){setTimeout(function(){throw e})}function ws(e){return e==="head"}function Zm(e,s){var i=s,c=0,d=0;do{var f=i.nextSibling;if(e.removeChild(i),f&&f.nodeType===8)if(i=f.data,i==="/$"){if(0<c&&8>c){i=c;var b=e.ownerDocument;if(i&1&&ai(b.documentElement),i&2&&ai(b.body),i&4)for(i=b.head,ai(i),b=i.firstChild;b;){var w=b.nextSibling,R=b.nodeName;b[yn]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&b.rel.toLowerCase()==="stylesheet"||i.removeChild(b),b=w}}if(d===0){e.removeChild(f),ui(s);return}d--}else i==="$"||i==="$?"||i==="$!"?d++:c=i.charCodeAt(0)-48;else c=0;i=f}while(i);ui(s)}function ju(e){var s=e.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var i=s;switch(s=s.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":ju(i),Eo(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function cv(e,s,i,c){for(;e.nodeType===1;){var d=i;if(e.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(c){if(!e[yn])switch(s){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(s==="input"&&e.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=ja(e.nextSibling),e===null)break}return null}function uv(e,s,i){if(s==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=ja(e.nextSibling),e===null))return null;return e}function Su(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function dv(e,s){var i=e.ownerDocument;if(e.data!=="$?"||i.readyState==="complete")s();else{var c=function(){s(),i.removeEventListener("DOMContentLoaded",c)};i.addEventListener("DOMContentLoaded",c),e._reactRetry=c}}function ja(e){for(;e!=null;e=e.nextSibling){var s=e.nodeType;if(s===1||s===3)break;if(s===8){if(s=e.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return e}var _u=null;function eg(e){e=e.previousSibling;for(var s=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(s===0)return e;s--}else i==="/$"&&s++}e=e.previousSibling}return null}function tg(e,s,i){switch(s=ql(i),e){case"html":if(e=s.documentElement,!e)throw Error(n(452));return e;case"head":if(e=s.head,!e)throw Error(n(453));return e;case"body":if(e=s.body,!e)throw Error(n(454));return e;default:throw Error(n(451))}}function ai(e){for(var s=e.attributes;s.length;)e.removeAttributeNode(s[0]);Eo(e)}var va=new Map,ag=new Set;function Ll(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var es=Q.d;Q.d={f:hv,r:fv,D:mv,C:gv,L:pv,m:yv,X:bv,S:vv,M:xv};function hv(){var e=es.f(),s=Tl();return e||s}function fv(e){var s=or(e);s!==null&&s.tag===5&&s.type==="form"?jf(s):es.r(e)}var Ir=typeof document=="undefined"?null:document;function sg(e,s,i){var c=Ir;if(c&&typeof s=="string"&&s){var d=da(s);d='link[rel="'+e+'"][href="'+d+'"]',typeof i=="string"&&(d+='[crossorigin="'+i+'"]'),ag.has(d)||(ag.add(d),e={rel:e,crossOrigin:i,href:s},c.querySelector(d)===null&&(s=c.createElement("link"),Rt(s,"link",e),Ct(s),c.head.appendChild(s)))}}function mv(e){es.D(e),sg("dns-prefetch",e,null)}function gv(e,s){es.C(e,s),sg("preconnect",e,s)}function pv(e,s,i){es.L(e,s,i);var c=Ir;if(c&&e&&s){var d='link[rel="preload"][as="'+da(s)+'"]';s==="image"&&i&&i.imageSrcSet?(d+='[imagesrcset="'+da(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(d+='[imagesizes="'+da(i.imageSizes)+'"]')):d+='[href="'+da(e)+'"]';var f=d;switch(s){case"style":f=Hr(e);break;case"script":f=Yr(e)}va.has(f)||(e=y({rel:"preload",href:s==="image"&&i&&i.imageSrcSet?void 0:e,as:s},i),va.set(f,e),c.querySelector(d)!==null||s==="style"&&c.querySelector(si(f))||s==="script"&&c.querySelector(ri(f))||(s=c.createElement("link"),Rt(s,"link",e),Ct(s),c.head.appendChild(s)))}}function yv(e,s){es.m(e,s);var i=Ir;if(i&&e){var c=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+da(c)+'"][href="'+da(e)+'"]',f=d;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Yr(e)}if(!va.has(f)&&(e=y({rel:"modulepreload",href:e},s),va.set(f,e),i.querySelector(d)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(ri(f)))return}c=i.createElement("link"),Rt(c,"link",e),Ct(c),i.head.appendChild(c)}}}function vv(e,s,i){es.S(e,s,i);var c=Ir;if(c&&e){var d=cr(c).hoistableStyles,f=Hr(e);s=s||"default";var b=d.get(f);if(!b){var w={loading:0,preload:null};if(b=c.querySelector(si(f)))w.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":s},i),(i=va.get(f))&&Nu(e,i);var R=b=c.createElement("link");Ct(R),Rt(R,"link",e),R._p=new Promise(function(F,se){R.onload=F,R.onerror=se}),R.addEventListener("load",function(){w.loading|=1}),R.addEventListener("error",function(){w.loading|=2}),w.loading|=4,zl(b,s,c)}b={type:"stylesheet",instance:b,count:1,state:w},d.set(f,b)}}}function bv(e,s){es.X(e,s);var i=Ir;if(i&&e){var c=cr(i).hoistableScripts,d=Yr(e),f=c.get(d);f||(f=i.querySelector(ri(d)),f||(e=y({src:e,async:!0},s),(s=va.get(d))&&Cu(e,s),f=i.createElement("script"),Ct(f),Rt(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},c.set(d,f))}}function xv(e,s){es.M(e,s);var i=Ir;if(i&&e){var c=cr(i).hoistableScripts,d=Yr(e),f=c.get(d);f||(f=i.querySelector(ri(d)),f||(e=y({src:e,async:!0,type:"module"},s),(s=va.get(d))&&Cu(e,s),f=i.createElement("script"),Ct(f),Rt(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},c.set(d,f))}}function rg(e,s,i,c){var d=(d=ie.current)?Ll(d):null;if(!d)throw Error(n(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(s=Hr(i.href),i=cr(d).hoistableStyles,c=i.get(s),c||(c={type:"style",instance:null,count:0,state:null},i.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=Hr(i.href);var f=cr(d).hoistableStyles,b=f.get(e);if(b||(d=d.ownerDocument||d,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,b),(f=d.querySelector(si(e)))&&!f._p&&(b.instance=f,b.state.loading=5),va.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},va.set(e,i),f||wv(d,e,i,b.state))),s&&c===null)throw Error(n(528,""));return b}if(s&&c!==null)throw Error(n(529,""));return null;case"script":return s=i.async,i=i.src,typeof i=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Yr(i),i=cr(d).hoistableScripts,c=i.get(s),c||(c={type:"script",instance:null,count:0,state:null},i.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,e))}}function Hr(e){return'href="'+da(e)+'"'}function si(e){return'link[rel="stylesheet"]['+e+"]"}function ng(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function wv(e,s,i,c){e.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=e.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),Rt(s,"link",i),Ct(s),e.head.appendChild(s))}function Yr(e){return'[src="'+da(e)+'"]'}function ri(e){return"script[async]"+e}function ig(e,s,i){if(s.count++,s.instance===null)switch(s.type){case"style":var c=e.querySelector('style[data-href~="'+da(i.href)+'"]');if(c)return s.instance=c,Ct(c),c;var d=y({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return c=(e.ownerDocument||e).createElement("style"),Ct(c),Rt(c,"style",d),zl(c,i.precedence,e),s.instance=c;case"stylesheet":d=Hr(i.href);var f=e.querySelector(si(d));if(f)return s.state.loading|=4,s.instance=f,Ct(f),f;c=ng(i),(d=va.get(d))&&Nu(c,d),f=(e.ownerDocument||e).createElement("link"),Ct(f);var b=f;return b._p=new Promise(function(w,R){b.onload=w,b.onerror=R}),Rt(f,"link",c),s.state.loading|=4,zl(f,i.precedence,e),s.instance=f;case"script":return f=Yr(i.src),(d=e.querySelector(ri(f)))?(s.instance=d,Ct(d),d):(c=i,(d=va.get(f))&&(c=y({},i),Cu(c,d)),e=e.ownerDocument||e,d=e.createElement("script"),Ct(d),Rt(d,"link",c),e.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(n(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,zl(c,i.precedence,e));return s.instance}function zl(e,s,i){for(var c=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=c.length?c[c.length-1]:null,f=d,b=0;b<c.length;b++){var w=c[b];if(w.dataset.precedence===s)f=w;else if(f!==d)break}f?f.parentNode.insertBefore(e,f.nextSibling):(s=i.nodeType===9?i.head:i,s.insertBefore(e,s.firstChild))}function Nu(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.title==null&&(e.title=s.title)}function Cu(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.integrity==null&&(e.integrity=s.integrity)}var $l=null;function lg(e,s,i){if($l===null){var c=new Map,d=$l=new Map;d.set(i,c)}else d=$l,c=d.get(i),c||(c=new Map,d.set(i,c));if(c.has(e))return c;for(c.set(e,null),i=i.getElementsByTagName(e),d=0;d<i.length;d++){var f=i[d];if(!(f[yn]||f[qt]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var b=f.getAttribute(s)||"";b=e+b;var w=c.get(b);w?w.push(f):c.set(b,[f])}}return c}function og(e,s,i){e=e.ownerDocument||e,e.head.insertBefore(i,s==="title"?e.querySelector("head > title"):null)}function jv(e,s,i){if(i===1||s.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(e=s.disabled,typeof s.precedence=="string"&&e==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function cg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var ni=null;function Sv(){}function _v(e,s,i){if(ni===null)throw Error(n(475));var c=ni;if(s.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var d=Hr(i.href),f=e.querySelector(si(d));if(f){e=f._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(c.count++,c=Bl.bind(c),e.then(c,c)),s.state.loading|=4,s.instance=f,Ct(f);return}f=e.ownerDocument||e,i=ng(i),(d=va.get(d))&&Nu(i,d),f=f.createElement("link"),Ct(f);var b=f;b._p=new Promise(function(w,R){b.onload=w,b.onerror=R}),Rt(f,"link",i),s.instance=f}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(s,e),(e=s.state.preload)&&(s.state.loading&3)===0&&(c.count++,s=Bl.bind(c),e.addEventListener("load",s),e.addEventListener("error",s))}}function Nv(){if(ni===null)throw Error(n(475));var e=ni;return e.stylesheets&&e.count===0&&Eu(e,e.stylesheets),0<e.count?function(s){var i=setTimeout(function(){if(e.stylesheets&&Eu(e,e.stylesheets),e.unsuspend){var c=e.unsuspend;e.unsuspend=null,c()}},6e4);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(i)}}:null}function Bl(){if(this.count--,this.count===0){if(this.stylesheets)Eu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Pl=null;function Eu(e,s){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Pl=new Map,s.forEach(Cv,e),Pl=null,Bl.call(e))}function Cv(e,s){if(!(s.state.loading&4)){var i=Pl.get(e);if(i)var c=i.get(null);else{i=new Map,Pl.set(e,i);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var b=d[f];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(i.set(b.dataset.precedence,b),c=b)}c&&i.set(null,c)}d=s.instance,b=d.getAttribute("data-precedence"),f=i.get(b)||c,f===c&&i.set(null,d),i.set(b,d),this.count++,c=Bl.bind(this),d.addEventListener("load",c),d.addEventListener("error",c),f?f.parentNode.insertBefore(d,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),s.state.loading|=4}}var ii={$$typeof:q,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function Ev(e,s,i,c,d,f,b,w){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=So(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=So(0),this.hiddenUpdates=So(null),this.identifierPrefix=c,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function ug(e,s,i,c,d,f,b,w,R,F,se,oe){return e=new Ev(e,s,i,b,w,R,F,oe),s=1,f===!0&&(s|=24),f=Jt(3,null,null,s),e.current=f,f.stateNode=e,s=oc(),s.refCount++,e.pooledCache=s,s.refCount++,f.memoizedState={element:c,isDehydrated:i,cache:s},hc(f),e}function dg(e){return e?(e=wr,e):wr}function hg(e,s,i,c,d,f){d=dg(d),c.context===null?c.context=d:c.pendingContext=d,c=os(s),c.payload={element:i},f=f===void 0?null:f,f!==null&&(c.callback=f),i=cs(e,c,s),i!==null&&(sa(i,e,s),qn(i,e,s))}function fg(e,s){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<s?i:s}}function Tu(e,s){fg(e,s),(e=e.alternate)&&fg(e,s)}function mg(e){if(e.tag===13){var s=xr(e,67108864);s!==null&&sa(s,e,67108864),Tu(e,67108864)}}var Il=!0;function Tv(e,s,i,c){var d=A.T;A.T=null;var f=Q.p;try{Q.p=2,Du(e,s,i,c)}finally{Q.p=f,A.T=d}}function Dv(e,s,i,c){var d=A.T;A.T=null;var f=Q.p;try{Q.p=8,Du(e,s,i,c)}finally{Q.p=f,A.T=d}}function Du(e,s,i,c){if(Il){var d=Ou(c);if(d===null)pu(e,s,c,Hl,i),pg(e,c);else if(Av(d,e,s,i,c))c.stopPropagation();else if(pg(e,c),s&4&&-1<Ov.indexOf(e)){for(;d!==null;){var f=or(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var b=Rs(f.pendingLanes);if(b!==0){var w=f;for(w.pendingLanes|=2,w.entangledLanes|=2;b;){var R=1<<31-vt(b);w.entanglements[1]|=R,b&=~R}ka(f),(Ye&6)===0&&(Cl=qe()+500,Zn(0))}}break;case 13:w=xr(f,2),w!==null&&sa(w,f,2),Tl(),Tu(f,2)}if(f=Ou(c),f===null&&pu(e,s,c,Hl,i),f===d)break;d=f}d!==null&&c.stopPropagation()}else pu(e,s,c,null,i)}}function Ou(e){return e=Uo(e),Au(e)}var Hl=null;function Au(e){if(Hl=null,e=lr(e),e!==null){var s=u(e);if(s===null)e=null;else{var i=s.tag;if(i===13){if(e=h(s),e!==null)return e;e=null}else if(i===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null)}}return Hl=e,null}function gg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Se()){case Le:return 2;case it:return 8;case Wt:case $t:return 32;case Ea:return 268435456;default:return 32}default:return 32}}var ku=!1,js=null,Ss=null,_s=null,li=new Map,oi=new Map,Ns=[],Ov="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function pg(e,s){switch(e){case"focusin":case"focusout":js=null;break;case"dragenter":case"dragleave":Ss=null;break;case"mouseover":case"mouseout":_s=null;break;case"pointerover":case"pointerout":li.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":oi.delete(s.pointerId)}}function ci(e,s,i,c,d,f){return e===null||e.nativeEvent!==f?(e={blockedOn:s,domEventName:i,eventSystemFlags:c,nativeEvent:f,targetContainers:[d]},s!==null&&(s=or(s),s!==null&&mg(s)),e):(e.eventSystemFlags|=c,s=e.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),e)}function Av(e,s,i,c,d){switch(s){case"focusin":return js=ci(js,e,s,i,c,d),!0;case"dragenter":return Ss=ci(Ss,e,s,i,c,d),!0;case"mouseover":return _s=ci(_s,e,s,i,c,d),!0;case"pointerover":var f=d.pointerId;return li.set(f,ci(li.get(f)||null,e,s,i,c,d)),!0;case"gotpointercapture":return f=d.pointerId,oi.set(f,ci(oi.get(f)||null,e,s,i,c,d)),!0}return!1}function yg(e){var s=lr(e.target);if(s!==null){var i=u(s);if(i!==null){if(s=i.tag,s===13){if(s=h(i),s!==null){e.blockedOn=s,_0(e.priority,function(){if(i.tag===13){var c=aa();c=_o(c);var d=xr(i,c);d!==null&&sa(d,i,c),Tu(i,c)}});return}}else if(s===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Yl(e){if(e.blockedOn!==null)return!1;for(var s=e.targetContainers;0<s.length;){var i=Ou(e.nativeEvent);if(i===null){i=e.nativeEvent;var c=new i.constructor(i.type,i);Mo=c,i.target.dispatchEvent(c),Mo=null}else return s=or(i),s!==null&&mg(s),e.blockedOn=i,!1;s.shift()}return!0}function vg(e,s,i){Yl(e)&&i.delete(s)}function kv(){ku=!1,js!==null&&Yl(js)&&(js=null),Ss!==null&&Yl(Ss)&&(Ss=null),_s!==null&&Yl(_s)&&(_s=null),li.forEach(vg),oi.forEach(vg)}function Vl(e,s){e.blockedOn===s&&(e.blockedOn=null,ku||(ku=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,kv)))}var Fl=null;function bg(e){Fl!==e&&(Fl=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Fl===e&&(Fl=null);for(var s=0;s<e.length;s+=3){var i=e[s],c=e[s+1],d=e[s+2];if(typeof c!="function"){if(Au(c||i)===null)continue;break}var f=or(i);f!==null&&(e.splice(s,3),s-=3,Ac(f,{pending:!0,data:d,method:i.method,action:c},c,d))}}))}function ui(e){function s(R){return Vl(R,e)}js!==null&&Vl(js,e),Ss!==null&&Vl(Ss,e),_s!==null&&Vl(_s,e),li.forEach(s),oi.forEach(s);for(var i=0;i<Ns.length;i++){var c=Ns[i];c.blockedOn===e&&(c.blockedOn=null)}for(;0<Ns.length&&(i=Ns[0],i.blockedOn===null);)yg(i),i.blockedOn===null&&Ns.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(c=0;c<i.length;c+=3){var d=i[c],f=i[c+1],b=d[It]||null;if(typeof f=="function")b||bg(i);else if(b){var w=null;if(f&&f.hasAttribute("formAction")){if(d=f,b=f[It]||null)w=b.formAction;else if(Au(d)!==null)continue}else w=b.action;typeof w=="function"?i[c+1]=w:(i.splice(c,3),c-=3),bg(i)}}}function Ru(e){this._internalRoot=e}Ql.prototype.render=Ru.prototype.render=function(e){var s=this._internalRoot;if(s===null)throw Error(n(409));var i=s.current,c=aa();hg(i,c,e,s,null,null)},Ql.prototype.unmount=Ru.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var s=e.containerInfo;hg(e.current,2,null,e,null,null),Tl(),s[ir]=null}};function Ql(e){this._internalRoot=e}Ql.prototype.unstable_scheduleHydration=function(e){if(e){var s=Ud();e={blockedOn:null,target:e,priority:s};for(var i=0;i<Ns.length&&s!==0&&s<Ns[i].priority;i++);Ns.splice(i,0,e),i===0&&yg(e)}};var xg=t.version;if(xg!=="19.1.0")throw Error(n(527,xg,"19.1.0"));Q.findDOMNode=function(e){var s=e._reactInternals;if(s===void 0)throw typeof e.render=="function"?Error(n(188)):(e=Object.keys(e).join(","),Error(n(268,e)));return e=m(s),e=e!==null?p(e):null,e=e===null?null:e.stateNode,e};var Rv={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:A,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Gl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gl.isDisabled&&Gl.supportsFiber)try{We=Gl.inject(Rv),He=Gl}catch(e){}}return hi.createRoot=function(e,s){if(!o(e))throw Error(n(299));var i=!1,c="",d=qf,f=Lf,b=zf,w=null;return s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(f=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(w=s.unstable_transitionCallbacks)),s=ug(e,1,!1,null,null,i,c,d,f,b,w,null),e[ir]=s.current,gu(e),new Ru(s)},hi.hydrateRoot=function(e,s,i){if(!o(e))throw Error(n(299));var c=!1,d="",f=qf,b=Lf,w=zf,R=null,F=null;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(b=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(R=i.unstable_transitionCallbacks),i.formState!==void 0&&(F=i.formState)),s=ug(e,1,!0,s,i!=null?i:null,c,d,f,b,w,R,F),s.context=dg(null),i=s.current,c=aa(),c=_o(c),d=os(c),d.callback=null,cs(i,d,c),i=c,s.current.lanes=i,pn(s,i),ka(s),e[ir]=s.current,gu(e),new Ql(s)},hi.version="19.1.0",hi}var Ng;function hb(){if(Ng)return Uu.exports;Ng=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Uu.exports=db(),Uu.exports}var fb=hb();const mb=yp(fb),gb="modulepreload",pb=function(r){return"/CC_Flow_summary_report/"+r},Cg={},yb=function(t,a,n){let o=Promise.resolve();if(a&&a.length>0){let m=function(p){return Promise.all(p.map(y=>Promise.resolve(y).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),g=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));o=m(a.map(p=>{if(p=pb(p),p in Cg)return;Cg[p]=!0;const y=p.endsWith(".css"),x=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${x}`))return;const v=document.createElement("link");if(v.rel=y?"stylesheet":gb,y||(v.as="script"),v.crossOrigin="",v.href=p,g&&v.setAttribute("nonce",g),document.head.appendChild(v),y)return new Promise((j,E)=>{v.addEventListener("load",j),v.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${p}`)))})}))}function u(h){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=h,window.dispatchEvent(g),!g.defaultPrevented)throw h}return o.then(h=>{for(const g of h||[])g.status==="rejected"&&u(g.reason);return t().catch(u)})};var vb=function(){return null};class bb extends M.Component{constructor(a){super(a);fe(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});fe(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(a){return{hasError:!0,error:a,errorInfo:null}}componentDidCatch(a,n){console.error("ErrorBoundary caught an error:",a,n),this.setState({error:a,errorInfo:n}),this.props.onError&&this.props.onError(a,n)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:l.jsx("div",{className:"error-boundary",children:l.jsxs("div",{className:"error-container",children:[l.jsx("div",{className:"error-icon",children:""}),l.jsx("h2",{children:"Algo sali mal"}),l.jsx("p",{className:"error-message",children:"Ha ocurrido un error inesperado en la aplicacin."}),this.state.error&&l.jsxs("details",{className:"error-details",children:[l.jsx("summary",{children:"Detalles del error"}),l.jsxs("div",{className:"error-stack",children:[l.jsx("strong",{children:"Error:"})," ",this.state.error.message,this.state.errorInfo&&l.jsxs(l.Fragment,{children:[l.jsx("br",{}),l.jsx("strong",{children:"Stack:"}),l.jsx("pre",{children:this.state.errorInfo.componentStack})]})]})]}),l.jsxs("div",{className:"error-actions",children:[l.jsx("button",{onClick:this.handleRetry,className:"retry-btn",children:" Reintentar"}),l.jsx("button",{onClick:this.handleReload,className:"reload-btn",children:" Recargar Pgina"})]}),l.jsx("div",{className:"error-help",children:l.jsx("p",{children:"Si el problema persiste, contacta al equipo de desarrollo."})})]})}):this.props.children}}function po(r,t){var a={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(a[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(r);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(r,n[o])&&(a[n[o]]=r[n[o]]);return a}function xb(r,t,a,n){function o(u){return u instanceof a?u:new a(function(h){h(u)})}return new(a||(a=Promise))(function(u,h){function g(y){try{p(n.next(y))}catch(x){h(x)}}function m(y){try{p(n.throw(y))}catch(x){h(x)}}function p(y){y.done?u(y.value):o(y.value).then(g,m)}p((n=n.apply(r,t||[])).next())})}const wb=r=>r?(...t)=>r(...t):(...t)=>fetch(...t);class yd extends Error{constructor(t,a="FunctionsError",n){super(t),this.name=a,this.context=n}}class jb extends yd{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Eg extends yd{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Tg extends yd{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var ed;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(ed||(ed={}));class Sb{constructor(t,{headers:a={},customFetch:n,region:o=ed.Any}={}){this.url=t,this.headers=a,this.region=o,this.fetch=wb(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return xb(this,arguments,void 0,function*(a,n={}){var o;let u,h;try{const{headers:g,method:m,body:p,signal:y,timeout:x}=n;let v={},{region:j}=n;j||(j=this.region);const E=new URL(`${this.url}/${a}`);j&&j!=="any"&&(v["x-region"]=j,E.searchParams.set("forceFunctionRegion",j));let D;p&&(g&&!Object.prototype.hasOwnProperty.call(g,"Content-Type")||!g)?typeof Blob!="undefined"&&p instanceof Blob||p instanceof ArrayBuffer?(v["Content-Type"]="application/octet-stream",D=p):typeof p=="string"?(v["Content-Type"]="text/plain",D=p):typeof FormData!="undefined"&&p instanceof FormData?D=p:(v["Content-Type"]="application/json",D=JSON.stringify(p)):D=p;let O=y;x&&(h=new AbortController,u=setTimeout(()=>h.abort(),x),y?(O=h.signal,y.addEventListener("abort",()=>h.abort())):O=h.signal);const H=yield this.fetch(E.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},v),this.headers),g),body:D,signal:O}).catch(ae=>{throw new jb(ae)}),U=H.headers.get("x-relay-error");if(U&&U==="true")throw new Eg(H);if(!H.ok)throw new Tg(H);let q=((o=H.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),ee;return q==="application/json"?ee=yield H.json():q==="application/octet-stream"||q==="application/pdf"?ee=yield H.blob():q==="text/event-stream"?ee=H:q==="multipart/form-data"?ee=yield H.formData():ee=yield H.text(),{data:ee,error:null,response:H}}catch(g){return{data:null,error:g,response:g instanceof Tg||g instanceof Eg?g.context:void 0}}finally{u&&clearTimeout(u)}})}}var _b=class extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}},Nb=class{constructor(r){var t,a;this.shouldThrowOnError=!1,this.method=r.method,this.url=r.url,this.headers=new Headers(r.headers),this.schema=r.schema,this.body=r.body,this.shouldThrowOnError=(t=r.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=r.signal,this.isMaybeSingle=(a=r.isMaybeSingle)!==null&&a!==void 0?a:!1,r.fetch?this.fetch=r.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(r,t){return this.headers=new Headers(this.headers),this.headers.set(r,t),this}then(r,t){var a=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let o=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(u=>_(this,null,function*(){let h=null,g=null,m=null,p=u.status,y=u.statusText;if(u.ok){var x,v;if(a.method!=="HEAD"){var j;const H=yield u.text();H===""||(a.headers.get("Accept")==="text/csv"||a.headers.get("Accept")&&(!((j=a.headers.get("Accept"))===null||j===void 0)&&j.includes("application/vnd.pgrst.plan+text"))?g=H:g=JSON.parse(H))}const D=(x=a.headers.get("Prefer"))===null||x===void 0?void 0:x.match(/count=(exact|planned|estimated)/),O=(v=u.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");D&&O&&O.length>1&&(m=parseInt(O[1])),a.isMaybeSingle&&a.method==="GET"&&Array.isArray(g)&&(g.length>1?(h={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,m=null,p=406,y="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{var E;const D=yield u.text();try{h=JSON.parse(D),Array.isArray(h)&&u.status===404&&(g=[],h=null,p=200,y="OK")}catch(O){u.status===404&&D===""?(p=204,y="No Content"):h={message:D}}if(h&&a.isMaybeSingle&&(!(h==null||(E=h.details)===null||E===void 0)&&E.includes("0 rows"))&&(h=null,p=200,y="OK"),h&&a.shouldThrowOnError)throw new _b(h)}return{error:h,data:g,count:m,status:p,statusText:y}}));return this.shouldThrowOnError||(o=o.catch(u=>{var h;let g="";const m=u==null?void 0:u.cause;if(m){var p,y,x,v;const E=(p=m==null?void 0:m.message)!==null&&p!==void 0?p:"",D=(y=m==null?void 0:m.code)!==null&&y!==void 0?y:"";g=`${(x=u==null?void 0:u.name)!==null&&x!==void 0?x:"FetchError"}: ${u==null?void 0:u.message}`,g+=`

Caused by: ${(v=m==null?void 0:m.name)!==null&&v!==void 0?v:"Error"}: ${E}`,D&&(g+=` (${D})`),m!=null&&m.stack&&(g+=`
${m.stack}`)}else{var j;g=(j=u==null?void 0:u.stack)!==null&&j!==void 0?j:""}return{error:{message:`${(h=u==null?void 0:u.name)!==null&&h!==void 0?h:"FetchError"}: ${u==null?void 0:u.message}`,details:g,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(r,t)}returns(){return this}overrideTypes(){return this}},Cb=class extends Nb{select(r){let t=!1;const a=(r!=null?r:"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(r,{ascending:t=!0,nullsFirst:a,foreignTable:n,referencedTable:o=n}={}){const u=o?`${o}.order`:"order",h=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${h?`${h},`:""}${r}.${t?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:t,referencedTable:a=t}={}){const n=typeof a=="undefined"?"limit":`${a}.limit`;return this.url.searchParams.set(n,`${r}`),this}range(r,t,{foreignTable:a,referencedTable:n=a}={}){const o=typeof n=="undefined"?"offset":`${n}.offset`,u=typeof n=="undefined"?"limit":`${n}.limit`;return this.url.searchParams.set(o,`${r}`),this.url.searchParams.set(u,`${t-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:r=!1,verbose:t=!1,settings:a=!1,buffers:n=!1,wal:o=!1,format:u="text"}={}){var h;const g=[r?"analyze":null,t?"verbose":null,a?"settings":null,n?"buffers":null,o?"wal":null].filter(Boolean).join("|"),m=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${m}"; options=${g};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(r){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${r}`),this}};const Dg=new RegExp("[,()]");var Zr=class extends Cb{eq(r,t){return this.url.searchParams.append(r,`eq.${t}`),this}neq(r,t){return this.url.searchParams.append(r,`neq.${t}`),this}gt(r,t){return this.url.searchParams.append(r,`gt.${t}`),this}gte(r,t){return this.url.searchParams.append(r,`gte.${t}`),this}lt(r,t){return this.url.searchParams.append(r,`lt.${t}`),this}lte(r,t){return this.url.searchParams.append(r,`lte.${t}`),this}like(r,t){return this.url.searchParams.append(r,`like.${t}`),this}likeAllOf(r,t){return this.url.searchParams.append(r,`like(all).{${t.join(",")}}`),this}likeAnyOf(r,t){return this.url.searchParams.append(r,`like(any).{${t.join(",")}}`),this}ilike(r,t){return this.url.searchParams.append(r,`ilike.${t}`),this}ilikeAllOf(r,t){return this.url.searchParams.append(r,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(r,t){return this.url.searchParams.append(r,`ilike(any).{${t.join(",")}}`),this}regexMatch(r,t){return this.url.searchParams.append(r,`match.${t}`),this}regexIMatch(r,t){return this.url.searchParams.append(r,`imatch.${t}`),this}is(r,t){return this.url.searchParams.append(r,`is.${t}`),this}isDistinct(r,t){return this.url.searchParams.append(r,`isdistinct.${t}`),this}in(r,t){const a=Array.from(new Set(t)).map(n=>typeof n=="string"&&Dg.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(r,`in.(${a})`),this}notIn(r,t){const a=Array.from(new Set(t)).map(n=>typeof n=="string"&&Dg.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(r,`not.in.(${a})`),this}contains(r,t){return typeof t=="string"?this.url.searchParams.append(r,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(r,`cs.{${t.join(",")}}`):this.url.searchParams.append(r,`cs.${JSON.stringify(t)}`),this}containedBy(r,t){return typeof t=="string"?this.url.searchParams.append(r,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(r,`cd.{${t.join(",")}}`):this.url.searchParams.append(r,`cd.${JSON.stringify(t)}`),this}rangeGt(r,t){return this.url.searchParams.append(r,`sr.${t}`),this}rangeGte(r,t){return this.url.searchParams.append(r,`nxl.${t}`),this}rangeLt(r,t){return this.url.searchParams.append(r,`sl.${t}`),this}rangeLte(r,t){return this.url.searchParams.append(r,`nxr.${t}`),this}rangeAdjacent(r,t){return this.url.searchParams.append(r,`adj.${t}`),this}overlaps(r,t){return typeof t=="string"?this.url.searchParams.append(r,`ov.${t}`):this.url.searchParams.append(r,`ov.{${t.join(",")}}`),this}textSearch(r,t,{config:a,type:n}={}){let o="";n==="plain"?o="pl":n==="phrase"?o="ph":n==="websearch"&&(o="w");const u=a===void 0?"":`(${a})`;return this.url.searchParams.append(r,`${o}fts${u}.${t}`),this}match(r){return Object.entries(r).forEach(([t,a])=>{this.url.searchParams.append(t,`eq.${a}`)}),this}not(r,t,a){return this.url.searchParams.append(r,`not.${t}.${a}`),this}or(r,{foreignTable:t,referencedTable:a=t}={}){const n=a?`${a}.or`:"or";return this.url.searchParams.append(n,`(${r})`),this}filter(r,t,a){return this.url.searchParams.append(r,`${t}.${a}`),this}},Eb=class{constructor(r,{headers:t={},schema:a,fetch:n}){this.url=r,this.headers=new Headers(t),this.schema=a,this.fetch=n}select(r,t){const{head:a=!1,count:n}=t!=null?t:{},o=a?"HEAD":"GET";let u=!1;const h=(r!=null?r:"*").split("").map(g=>/\s/.test(g)&&!u?"":(g==='"'&&(u=!u),g)).join("");return this.url.searchParams.set("select",h),n&&this.headers.append("Prefer",`count=${n}`),new Zr({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(r,{count:t,defaultToNull:a=!0}={}){var n;const o="POST";if(t&&this.headers.append("Prefer",`count=${t}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const u=r.reduce((h,g)=>h.concat(Object.keys(g)),[]);if(u.length>0){const h=[...new Set(u)].map(g=>`"${g}"`);this.url.searchParams.set("columns",h.join(","))}}return new Zr({method:o,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(r,{onConflict:t,ignoreDuplicates:a=!1,count:n,defaultToNull:o=!0}={}){var u;const h="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),n&&this.headers.append("Prefer",`count=${n}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const g=r.reduce((m,p)=>m.concat(Object.keys(p)),[]);if(g.length>0){const m=[...new Set(g)].map(p=>`"${p}"`);this.url.searchParams.set("columns",m.join(","))}}return new Zr({method:h,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(r,{count:t}={}){var a;const n="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new Zr({method:n,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:r}={}){var t;const a="DELETE";return r&&this.headers.append("Prefer",`count=${r}`),new Zr({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},Tb=class xp{constructor(t,{headers:a={},schema:n,fetch:o}={}){this.url=t,this.headers=new Headers(a),this.schemaName=n,this.fetch=o}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Eb(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new xp(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,a={},{head:n=!1,get:o=!1,count:u}={}){var h;let g;const m=new URL(`${this.url}/rpc/${t}`);let p;n||o?(g=n?"HEAD":"GET",Object.entries(a).filter(([x,v])=>v!==void 0).map(([x,v])=>[x,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([x,v])=>{m.searchParams.append(x,v)})):(g="POST",p=a);const y=new Headers(this.headers);return u&&y.set("Prefer",`count=${u}`),new Zr({method:g,url:m,headers:y,schema:this.schemaName,body:p,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}};class Db{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket!="undefined")return{type:"native",constructor:WebSocket};if(typeof globalThis!="undefined"&&typeof globalThis.WebSocket!="undefined")return{type:"native",constructor:globalThis.WebSocket};if(typeof global!="undefined"&&typeof global.WebSocket!="undefined")return{type:"native",constructor:global.WebSocket};if(typeof globalThis!="undefined"&&typeof globalThis.WebSocketPair!="undefined"&&typeof globalThis.WebSocket=="undefined")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis!="undefined"&&globalThis.EdgeRuntime||typeof navigator!="undefined"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process!="undefined"){const a=process.versions;if(a&&a.node){const n=a.node,o=parseInt(n.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket!="undefined"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let a=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(a+=`

Suggested solution: ${t.workaround}`),new Error(a)}static createWebSocket(t,a){const n=this.getWebSocketConstructor();return new n(t,a)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch(t){return!1}}}const Ob="2.89.0",Ab=`realtime-js/${Ob}`,wp="1.0.0",kb="2.0.0",Og=wp,td=1e4,Rb=1e3,Mb=100;var Ts;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Ts||(Ts={}));var Nt;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(Nt||(Nt={}));var Na;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(Na||(Na={}));var ad;(function(r){r.websocket="websocket"})(ad||(ad={}));var tr;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(tr||(tr={}));class Ub{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t!=null?t:[]}encode(t,a){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return a(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return a(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var a;return this._isArrayBuffer((a=t.payload)===null||a===void 0?void 0:a.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var a,n;const o=(n=(a=t.payload)===null||a===void 0?void 0:a.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(t){var a,n;const o=(n=(a=t.payload)===null||a===void 0?void 0:a.payload)!==null&&n!==void 0?n:{},h=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,h)}_encodeUserBroadcastPush(t,a,n){var o,u;const h=t.topic,g=(o=t.ref)!==null&&o!==void 0?o:"",m=(u=t.join_ref)!==null&&u!==void 0?u:"",p=t.payload.event,y=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},x=Object.keys(y).length===0?"":JSON.stringify(y);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`ref length ${g.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`topic length ${h.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(x.length>255)throw new Error(`metadata length ${x.length} exceeds maximum of 255`);const v=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+g.length+h.length+p.length+x.length,j=new ArrayBuffer(this.HEADER_LENGTH+v);let E=new DataView(j),D=0;E.setUint8(D++,this.KINDS.userBroadcastPush),E.setUint8(D++,m.length),E.setUint8(D++,g.length),E.setUint8(D++,h.length),E.setUint8(D++,p.length),E.setUint8(D++,x.length),E.setUint8(D++,a),Array.from(m,H=>E.setUint8(D++,H.charCodeAt(0))),Array.from(g,H=>E.setUint8(D++,H.charCodeAt(0))),Array.from(h,H=>E.setUint8(D++,H.charCodeAt(0))),Array.from(p,H=>E.setUint8(D++,H.charCodeAt(0))),Array.from(x,H=>E.setUint8(D++,H.charCodeAt(0)));var O=new Uint8Array(j.byteLength+n.byteLength);return O.set(new Uint8Array(j),0),O.set(new Uint8Array(n),j.byteLength),O.buffer}decode(t,a){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return a(n)}if(typeof t=="string"){const n=JSON.parse(t),[o,u,h,g,m]=n;return a({join_ref:o,ref:u,topic:h,event:g,payload:m})}return a({})}_binaryDecode(t){const a=new DataView(t),n=a.getUint8(0),o=new TextDecoder;if(n===this.KINDS.userBroadcast)return this._decodeUserBroadcast(t,a,o)}_decodeUserBroadcast(t,a,n){const o=a.getUint8(1),u=a.getUint8(2),h=a.getUint8(3),g=a.getUint8(4);let m=this.HEADER_LENGTH+4;const p=n.decode(t.slice(m,m+o));m=m+o;const y=n.decode(t.slice(m,m+u));m=m+u;const x=n.decode(t.slice(m,m+h));m=m+h;const v=t.slice(m,t.byteLength),j=g===this.JSON_ENCODING?JSON.parse(n.decode(v)):v,E={type:this.BROADCAST_EVENT,event:y,payload:j};return h>0&&(E.meta=JSON.parse(x)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:E}}_isArrayBuffer(t){var a;return t instanceof ArrayBuffer||((a=t==null?void 0:t.constructor)===null||a===void 0?void 0:a.name)==="ArrayBuffer"}_pick(t,a){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>a.includes(n)))}}class jp{constructor(t,a){this.callback=t,this.timerCalc=a,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=a}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ze;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(Ze||(Ze={}));const Ag=(r,t,a={})=>{var n;const o=(n=a.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((u,h)=>(u[h]=qb(h,r,t,o),u),{}):{}},qb=(r,t,a,n)=>{const o=t.find(g=>g.name===r),u=o==null?void 0:o.type,h=a[r];return u&&!n.includes(u)?Sp(u,h):sd(h)},Sp=(r,t)=>{if(r.charAt(0)==="_"){const a=r.slice(1,r.length);return Bb(t,a)}switch(r){case Ze.bool:return Lb(t);case Ze.float4:case Ze.float8:case Ze.int2:case Ze.int4:case Ze.int8:case Ze.numeric:case Ze.oid:return zb(t);case Ze.json:case Ze.jsonb:return $b(t);case Ze.timestamp:return Pb(t);case Ze.abstime:case Ze.date:case Ze.daterange:case Ze.int4range:case Ze.int8range:case Ze.money:case Ze.reltime:case Ze.text:case Ze.time:case Ze.timestamptz:case Ze.timetz:case Ze.tsrange:case Ze.tstzrange:return sd(t);default:return sd(t)}},sd=r=>r,Lb=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},zb=r=>{if(typeof r=="string"){const t=parseFloat(r);if(!Number.isNaN(t))return t}return r},$b=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(t){return r}return r},Bb=(r,t)=>{if(typeof r!="string")return r;const a=r.length-1,n=r[a];if(r[0]==="{"&&n==="}"){let u;const h=r.slice(1,a);try{u=JSON.parse("["+h+"]")}catch(g){u=h?h.split(","):[]}return u.map(g=>Sp(t,g))}return r},Pb=r=>typeof r=="string"?r.replace(" ","T"):r,_p=r=>{const t=new URL(r);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class zu{constructor(t,a,n={},o=td){this.channel=t,this.event=a,this.payload=n,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,a){var n;return this._hasReceived(t)&&a((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:a}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,a){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:a})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:a}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(a))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var kg;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(kg||(kg={}));class bi{constructor(t,a){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(a==null?void 0:a.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},o=>{const{onJoin:u,onLeave:h,onSync:g}=this.caller;this.joinRef=this.channel._joinRef(),this.state=bi.syncState(this.state,o,u,h),this.pendingDiffs.forEach(m=>{this.state=bi.syncDiff(this.state,m,u,h)}),this.pendingDiffs=[],g()}),this.channel._on(n.diff,{},o=>{const{onJoin:u,onLeave:h,onSync:g}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=bi.syncDiff(this.state,o,u,h),g())}),this.onJoin((o,u,h)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:u,newPresences:h})}),this.onLeave((o,u,h)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:u,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,a,n,o){const u=this.cloneDeep(t),h=this.transformState(a),g={},m={};return this.map(u,(p,y)=>{h[p]||(m[p]=y)}),this.map(h,(p,y)=>{const x=u[p];if(x){const v=y.map(O=>O.presence_ref),j=x.map(O=>O.presence_ref),E=y.filter(O=>j.indexOf(O.presence_ref)<0),D=x.filter(O=>v.indexOf(O.presence_ref)<0);E.length>0&&(g[p]=E),D.length>0&&(m[p]=D)}else g[p]=y}),this.syncDiff(u,{joins:g,leaves:m},n,o)}static syncDiff(t,a,n,o){const{joins:u,leaves:h}={joins:this.transformState(a.joins),leaves:this.transformState(a.leaves)};return n||(n=()=>{}),o||(o=()=>{}),this.map(u,(g,m)=>{var p;const y=(p=t[g])!==null&&p!==void 0?p:[];if(t[g]=this.cloneDeep(m),y.length>0){const x=t[g].map(j=>j.presence_ref),v=y.filter(j=>x.indexOf(j.presence_ref)<0);t[g].unshift(...v)}n(g,y,m)}),this.map(h,(g,m)=>{let p=t[g];if(!p)return;const y=m.map(x=>x.presence_ref);p=p.filter(x=>y.indexOf(x.presence_ref)<0),t[g]=p,o(g,p,m),p.length===0&&delete t[g]}),t}static map(t,a){return Object.getOwnPropertyNames(t).map(n=>a(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((a,n)=>{const o=t[n];return"metas"in o?a[n]=o.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):a[n]=o,a},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Rg;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(Rg||(Rg={}));var xi;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(xi||(xi={}));var ts;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(ts||(ts={}));class an{constructor(t,a={config:{}},n){var o,u;if(this.topic=t,this.params=a,this.socket=n,this.bindings={},this.state=Nt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},a.config),this.timeout=this.socket.timeout,this.joinPush=new zu(this,Na.join,this.params,this.timeout),this.rejoinTimer=new jp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Nt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Nt.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Nt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Nt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Nt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Na.reply,{},(h,g)=>{this._trigger(this._replyEventName(g),h)}),this.presence=new bi(this),this.broadcastEndpointURL=_p(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((u=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||u===void 0)&&u.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,a=this.timeout){var n,o,u;if(this.socket.isConnected()||this.socket.connect(),this.state==Nt.closed){const{config:{broadcast:h,presence:g,private:m}}=this.params,p=(o=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(j=>j.filter))!==null&&o!==void 0?o:[],y=!!this.bindings[xi.PRESENCE]&&this.bindings[xi.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,x={},v={broadcast:h,presence:Object.assign(Object.assign({},g),{enabled:y}),postgres_changes:p,private:m};this.socket.accessTokenValue&&(x.access_token=this.socket.accessTokenValue),this._onError(j=>t==null?void 0:t(ts.CHANNEL_ERROR,j)),this._onClose(()=>t==null?void 0:t(ts.CLOSED)),this.updateJoinPayload(Object.assign({config:v},x)),this.joinedOnce=!0,this._rejoin(a),this.joinPush.receive("ok",E=>_(this,[E],function*({postgres_changes:j}){var D;if(this.socket._isManualToken()||this.socket.setAuth(),j===void 0){t==null||t(ts.SUBSCRIBED);return}else{const O=this.bindings.postgres_changes,H=(D=O==null?void 0:O.length)!==null&&D!==void 0?D:0,U=[];for(let q=0;q<H;q++){const ee=O[q],{filter:{event:ae,schema:Y,table:re,filter:T}}=ee,C=j&&j[q];if(C&&C.event===ae&&an.isFilterValueEqual(C.schema,Y)&&an.isFilterValueEqual(C.table,re)&&an.isFilterValueEqual(C.filter,T))U.push(Object.assign(Object.assign({},ee),{id:C.id}));else{this.unsubscribe(),this.state=Nt.errored,t==null||t(ts.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=U,t&&t(ts.SUBSCRIBED);return}})).receive("error",j=>{this.state=Nt.errored,t==null||t(ts.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(j).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ts.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(n){return _(this,arguments,function*(t,a={}){return yield this.send({type:"presence",event:"track",payload:t},a.timeout||this.timeout)})}untrack(){return _(this,arguments,function*(t={}){return yield this.send({type:"presence",event:"untrack"},t)})}on(t,a,n){return this.state===Nt.joined&&t===xi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>_(this,null,function*(){return yield this.subscribe()}))),this._on(t,a,n)}httpSend(o,u){return _(this,arguments,function*(t,a,n={}){var h;if(a==null)return Promise.reject("Payload is required for httpSend()");const g={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(g.Authorization=`Bearer ${this.socket.accessTokenValue}`);const m={method:"POST",headers:g,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:a,private:this.private}]})},p=yield this._fetchWithTimeout(this.broadcastEndpointURL,m,(h=n.timeout)!==null&&h!==void 0?h:this.timeout);if(p.status===202)return{success:!0};let y=p.statusText;try{const x=yield p.json();y=x.error||x.message||y}catch(x){}return Promise.reject(new Error(y))})}send(n){return _(this,arguments,function*(t,a={}){var o,u;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:h,payload:g}=t,m={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(m.Authorization=`Bearer ${this.socket.accessTokenValue}`);const p={method:"POST",headers:m,body:JSON.stringify({messages:[{topic:this.subTopic,event:h,payload:g,private:this.private}]})};try{const y=yield this._fetchWithTimeout(this.broadcastEndpointURL,p,(o=a.timeout)!==null&&o!==void 0?o:this.timeout);return yield(u=y.body)===null||u===void 0?void 0:u.cancel(),y.ok?"ok":"error"}catch(y){return y.name==="AbortError"?"timed out":"error"}}else return new Promise(h=>{var g,m,p;const y=this._push(t.type,t,a.timeout||this.timeout);t.type==="broadcast"&&!(!((p=(m=(g=this.params)===null||g===void 0?void 0:g.config)===null||m===void 0?void 0:m.broadcast)===null||p===void 0)&&p.ack)&&h("ok"),y.receive("ok",()=>h("ok")),y.receive("error",()=>h("error")),y.receive("timeout",()=>h("timed out"))})})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Nt.leaving;const a=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Na.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(o=>{n=new zu(this,Na.leave,{},t),n.receive("ok",()=>{a(),o("ok")}).receive("timeout",()=>{a(),o("timed out")}).receive("error",()=>{o("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Nt.closed,this.bindings={}}_fetchWithTimeout(t,a,n){return _(this,null,function*(){const o=new AbortController,u=setTimeout(()=>o.abort(),n),h=yield this.socket.fetch(t,Object.assign(Object.assign({},a),{signal:o.signal}));return clearTimeout(u),h})}_push(t,a,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new zu(this,t,a,n);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Mb){const a=this.pushBuffer.shift();a&&(a.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${a.event}`,a.payload))}}_onMessage(t,a,n){return a}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,a,n){var o,u;const h=t.toLocaleLowerCase(),{close:g,error:m,leave:p,join:y}=Na;if(n&&[g,m,p,y].indexOf(h)>=0&&n!==this._joinRef())return;let v=this._onMessage(h,a,n);if(a&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(j=>{var E,D,O;return((E=j.filter)===null||E===void 0?void 0:E.event)==="*"||((O=(D=j.filter)===null||D===void 0?void 0:D.event)===null||O===void 0?void 0:O.toLocaleLowerCase())===h}).map(j=>j.callback(v,n)):(u=this.bindings[h])===null||u===void 0||u.filter(j=>{var E,D,O,H,U,q;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in j){const ee=j.id,ae=(E=j.filter)===null||E===void 0?void 0:E.event;return ee&&((D=a.ids)===null||D===void 0?void 0:D.includes(ee))&&(ae==="*"||(ae==null?void 0:ae.toLocaleLowerCase())===((O=a.data)===null||O===void 0?void 0:O.type.toLocaleLowerCase()))}else{const ee=(U=(H=j==null?void 0:j.filter)===null||H===void 0?void 0:H.event)===null||U===void 0?void 0:U.toLocaleLowerCase();return ee==="*"||ee===((q=a==null?void 0:a.event)===null||q===void 0?void 0:q.toLocaleLowerCase())}else return j.type.toLocaleLowerCase()===h}).map(j=>{if(typeof v=="object"&&"ids"in v){const E=v.data,{schema:D,table:O,commit_timestamp:H,type:U,errors:q}=E;v=Object.assign(Object.assign({},{schema:D,table:O,commit_timestamp:H,eventType:U,new:{},old:{},errors:q}),this._getPayloadRecords(E))}j.callback(v,n)})}_isClosed(){return this.state===Nt.closed}_isJoined(){return this.state===Nt.joined}_isJoining(){return this.state===Nt.joining}_isLeaving(){return this.state===Nt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,a,n){const o=t.toLocaleLowerCase(),u={type:o,filter:a,callback:n};return this.bindings[o]?this.bindings[o].push(u):this.bindings[o]=[u],this}_off(t,a){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(o=>{var u;return!(((u=o.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===n&&an.isEqual(o.filter,a))})),this}static isEqual(t,a){if(Object.keys(t).length!==Object.keys(a).length)return!1;for(const n in t)if(t[n]!==a[n])return!1;return!0}static isFilterValueEqual(t,a){const n=t!=null?t:void 0,o=a!=null?a:void 0;return n===o}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Na.close,{},t)}_onError(t){this._on(Na.error,{},a=>t(a))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Nt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const a={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(a.new=Ag(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(a.old=Ag(t.columns,t.old_record)),a}}const $u=()=>{},Kl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Ib=[1e3,2e3,5e3,1e4],Hb=1e4,Yb=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Vb{constructor(t,a){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=td,this.transport=null,this.heartbeatIntervalMs=Kl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=$u,this.ref=0,this.reconnectTimer=null,this.vsn=Og,this.logger=$u,this.conn=null,this.sendBuffer=[],this.serializer=new Ub,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>o?(...u)=>o(...u):(...u)=>fetch(...u),!(!((n=a==null?void 0:a.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=a.params.apikey,this.endPoint=`${t}/${ad.websocket}`,this.httpEndpoint=_p(t),this._initializeOptions(a),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(a==null?void 0:a.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Db.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const a=t.message;throw a.includes("Node.js")?new Error(`${a}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${a}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,a){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,a!=null?a:""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}removeChannel(t){return _(this,null,function*(){const a=yield t.unsubscribe();return this.channels.length===0&&this.disconnect(),a})}removeAllChannels(){return _(this,null,function*(){const t=yield Promise.all(this.channels.map(a=>a.unsubscribe()));return this.channels=[],this.disconnect(),t})}log(t,a,n){this.logger(t,a,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ts.connecting:return tr.Connecting;case Ts.open:return tr.Open;case Ts.closing:return tr.Closing;default:return tr.Closed}}isConnected(){return this.connectionState()===tr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,a={config:{}}){const n=`realtime:${t}`,o=this.getChannels().find(u=>u.topic===n);if(o)return o;{const u=new an(`realtime:${t}`,a,this);return this.channels.push(u),u}}push(t){const{topic:a,event:n,payload:o,ref:u}=t,h=()=>{this.encode(t,g=>{var m;(m=this.conn)===null||m===void 0||m.send(g)})};this.log("push",`${a} ${n} (${u})`,o),this.isConnected()?h():this.sendBuffer.push(h)}setAuth(t=null){return _(this,null,function*(){this._authPromise=this._performAuth(t);try{yield this._authPromise}finally{this._authPromise=null}})}_isManualToken(){return this._manuallySetToken}sendHeartbeat(){return _(this,null,function*(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(a){this.log("error","error in heartbeat callback",a)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(a){this.log("error","error in heartbeat callback",a)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Rb,"heartbeat timeout"),setTimeout(()=>{var a;this.isConnected()||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout()},Kl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(a){this.log("error","error in heartbeat callback",a)}this._setAuthSafely("heartbeat")})}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let a=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));a&&(this.log("transport",`leaving duplicate topic "${t}"`),a.unsubscribe())}_remove(t){this.channels=this.channels.filter(a=>a.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,a=>{if(a.topic==="phoenix"&&a.event==="phx_reply")try{this.heartbeatCallback(a.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}a.ref&&a.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:o,payload:u,ref:h}=a,g=h?`(${h})`:"",m=u.status||"";this.log("receive",`${m} ${n} ${o} ${g}`.trim(),u),this.channels.filter(p=>p._isMember(n)).forEach(p=>p._trigger(o,u,h)),this._triggerStateCallbacks("message",a)})}_clearTimer(t){var a;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((a=this.reconnectTimer)===null||a===void 0||a.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Ts.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ts.open||this.conn.readyState===Ts.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(a=>{this.log("error","error waiting for auth on connect",a),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this._terminateWorker()},this.workerRef.onmessage=a=>{a.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var a;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Na.error))}_appendParams(t,a){if(Object.keys(a).length===0)return t;const n=t.match(/\?/)?"&":"?",o=new URLSearchParams(a);return`${t}${n}${o}`}_workerObjectUrl(t){let a;if(t)a=t;else{const n=new Blob([Yb],{type:"application/javascript"});a=URL.createObjectURL(n)}return a}_setConnectionState(t,a=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=a)}_performAuth(t=null){return _(this,null,function*(){let a,n=!1;if(t)a=t,n=!0;else if(this.accessToken)try{a=yield this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),a=this.accessTokenValue}else a=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=a&&(this.accessTokenValue=a,this.channels.forEach(o=>{const u={access_token:a,version:Ab};a&&o.updateJoinPayload(u),o.joinedOnce&&o._isJoined()&&o._push(Na.access_token,{access_token:a})}))})}_waitForAuthIfNeeded(){return _(this,null,function*(){this._authPromise&&(yield this._authPromise)})}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(a=>{this.log("error",`Error setting auth in ${t}`,a)})}_triggerStateCallbacks(t,a){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(a)}catch(o){this.log("error",`error in ${t} callback`,o)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new jp(()=>_(this,null,function*(){setTimeout(()=>_(this,null,function*(){yield this._waitForAuthIfNeeded(),this.isConnected()||this.connect()}),Kl.RECONNECT_DELAY)}),this.reconnectAfterMs)}_initializeOptions(t){var a,n,o,u,h,g,m,p,y,x,v,j;switch(this.transport=(a=t==null?void 0:t.transport)!==null&&a!==void 0?a:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:td,this.heartbeatIntervalMs=(o=t==null?void 0:t.heartbeatIntervalMs)!==null&&o!==void 0?o:Kl.HEARTBEAT_INTERVAL,this.worker=(u=t==null?void 0:t.worker)!==null&&u!==void 0?u:!1,this.accessToken=(h=t==null?void 0:t.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(g=t==null?void 0:t.heartbeatCallback)!==null&&g!==void 0?g:$u,this.vsn=(m=t==null?void 0:t.vsn)!==null&&m!==void 0?m:Og,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=t==null?void 0:t.reconnectAfterMs)!==null&&p!==void 0?p:(E=>Ib[E-1]||Hb),this.vsn){case wp:this.encode=(y=t==null?void 0:t.encode)!==null&&y!==void 0?y:((E,D)=>D(JSON.stringify(E))),this.decode=(x=t==null?void 0:t.decode)!==null&&x!==void 0?x:((E,D)=>D(JSON.parse(E)));break;case kb:this.encode=(v=t==null?void 0:t.encode)!==null&&v!==void 0?v:this.serializer.encode.bind(this.serializer),this.decode=(j=t==null?void 0:t.decode)!==null&&j!==void 0?j:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window!="undefined"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Ni=class extends Error{constructor(r,t){var a;super(r),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((a=t.icebergType)==null?void 0:a.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Fb(r,t,a){const n=new URL(t,r);if(a)for(const[o,u]of Object.entries(a))u!==void 0&&n.searchParams.set(o,u);return n.toString()}function Qb(r){return _(this,null,function*(){return!r||r.type==="none"?{}:r.type==="bearer"?{Authorization:`Bearer ${r.token}`}:r.type==="header"?{[r.name]:r.value}:r.type==="custom"?yield r.getHeaders():{}})}function Gb(r){var a;const t=(a=r.fetchImpl)!=null?a:globalThis.fetch;return{request(p){return _(this,arguments,function*({method:o,path:u,query:h,body:g,headers:m}){var O;const y=Fb(r.baseUrl,u,h),x=yield Qb(r.auth),v=yield t(y,{method:o,headers:$e($e($e({},g?{"Content-Type":"application/json"}:{}),x),m),body:g?JSON.stringify(g):void 0}),j=yield v.text(),E=(v.headers.get("content-type")||"").includes("application/json"),D=E&&j?JSON.parse(j):j;if(!v.ok){const H=E?D:void 0,U=H==null?void 0:H.error;throw new Ni((O=U==null?void 0:U.message)!=null?O:`Request failed with status ${v.status}`,{status:v.status,icebergType:U==null?void 0:U.type,icebergCode:U==null?void 0:U.code,details:H})}return{status:v.status,headers:v.headers,data:D}})}}}function Wl(r){return r.join("")}var Kb=class{constructor(r,t=""){this.client=r,this.prefix=t}listNamespaces(r){return _(this,null,function*(){const t=r?{parent:Wl(r.namespace)}:void 0;return(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))})}createNamespace(r,t){return _(this,null,function*(){const a={namespace:r.namespace,properties:t==null?void 0:t.properties};return(yield this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:a})).data})}dropNamespace(r){return _(this,null,function*(){yield this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Wl(r.namespace)}`})})}loadNamespaceMetadata(r){return _(this,null,function*(){return{properties:(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Wl(r.namespace)}`})).data.properties}})}namespaceExists(r){return _(this,null,function*(){try{return yield this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Wl(r.namespace)}`}),!0}catch(t){if(t instanceof Ni&&t.status===404)return!1;throw t}})}createNamespaceIfNotExists(r,t){return _(this,null,function*(){try{return yield this.createNamespace(r,t)}catch(a){if(a instanceof Ni&&a.status===409)return;throw a}})}};function Vr(r){return r.join("")}var Wb=class{constructor(r,t="",a){this.client=r,this.prefix=t,this.accessDelegation=a}listTables(r){return _(this,null,function*(){return(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Vr(r.namespace)}/tables`})).data.identifiers})}createTable(r,t){return _(this,null,function*(){const a={};return this.accessDelegation&&(a["X-Iceberg-Access-Delegation"]=this.accessDelegation),(yield this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Vr(r.namespace)}/tables`,body:t,headers:a})).data.metadata})}updateTable(r,t){return _(this,null,function*(){const a=yield this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Vr(r.namespace)}/tables/${r.name}`,body:t});return{"metadata-location":a.data["metadata-location"],metadata:a.data.metadata}})}dropTable(r,t){return _(this,null,function*(){var a;yield this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Vr(r.namespace)}/tables/${r.name}`,query:{purgeRequested:String((a=t==null?void 0:t.purge)!=null?a:!1)}})})}loadTable(r){return _(this,null,function*(){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Vr(r.namespace)}/tables/${r.name}`,headers:t})).data.metadata})}tableExists(r){return _(this,null,function*(){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return yield this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Vr(r.namespace)}/tables/${r.name}`,headers:t}),!0}catch(a){if(a instanceof Ni&&a.status===404)return!1;throw a}})}createTableIfNotExists(r,t){return _(this,null,function*(){try{return yield this.createTable(r,t)}catch(a){if(a instanceof Ni&&a.status===409)return yield this.loadTable({namespace:r.namespace,name:t.name});throw a}})}},Xb=class{constructor(r){var n;let t="v1";r.catalogName&&(t+=`/${r.catalogName}`);const a=r.baseUrl.endsWith("/")?r.baseUrl:`${r.baseUrl}/`;this.client=Gb({baseUrl:a,auth:r.auth,fetchImpl:r.fetch}),this.accessDelegation=(n=r.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new Kb(this.client,t),this.tableOps=new Wb(this.client,t,this.accessDelegation)}listNamespaces(r){return _(this,null,function*(){return this.namespaceOps.listNamespaces(r)})}createNamespace(r,t){return _(this,null,function*(){return this.namespaceOps.createNamespace(r,t)})}dropNamespace(r){return _(this,null,function*(){yield this.namespaceOps.dropNamespace(r)})}loadNamespaceMetadata(r){return _(this,null,function*(){return this.namespaceOps.loadNamespaceMetadata(r)})}listTables(r){return _(this,null,function*(){return this.tableOps.listTables(r)})}createTable(r,t){return _(this,null,function*(){return this.tableOps.createTable(r,t)})}updateTable(r,t){return _(this,null,function*(){return this.tableOps.updateTable(r,t)})}dropTable(r,t){return _(this,null,function*(){yield this.tableOps.dropTable(r,t)})}loadTable(r){return _(this,null,function*(){return this.tableOps.loadTable(r)})}namespaceExists(r){return _(this,null,function*(){return this.namespaceOps.namespaceExists(r)})}tableExists(r){return _(this,null,function*(){return this.tableOps.tableExists(r)})}createNamespaceIfNotExists(r,t){return _(this,null,function*(){return this.namespaceOps.createNamespaceIfNotExists(r,t)})}createTableIfNotExists(r,t){return _(this,null,function*(){return this.tableOps.createTableIfNotExists(r,t)})}},yo=class extends Error{constructor(r){super(r),this.__isStorageError=!0,this.name="StorageError"}};function st(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}var Jb=class extends yo{constructor(r,t,a){super(r),this.name="StorageApiError",this.status=t,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},rd=class extends yo{constructor(r,t){super(r),this.name="StorageUnknownError",this.originalError=t}};const vd=r=>r?(...t)=>r(...t):(...t)=>fetch(...t),Zb=()=>Response,nd=r=>{if(Array.isArray(r))return r.map(a=>nd(a));if(typeof r=="function"||r!==Object(r))return r;const t={};return Object.entries(r).forEach(([a,n])=>{const o=a.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));t[o]=nd(n)}),t},ex=r=>{if(typeof r!="object"||r===null)return!1;const t=Object.getPrototypeOf(r);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},tx=r=>!r||typeof r!="string"||r.length===0||r.length>100||r.trim()!==r||r.includes("/")||r.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(r);function Ci(r){"@babel/helpers - typeof";return Ci=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ci(r)}function ax(r,t){if(Ci(r)!="object"||!r)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var n=a.call(r,t);if(Ci(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function sx(r){var t=ax(r,"string");return Ci(t)=="symbol"?t:t+""}function rx(r,t,a){return(t=sx(t))in r?Object.defineProperty(r,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[t]=a,r}function Mg(r,t){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),a.push.apply(a,n)}return a}function Ee(r){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Mg(Object(a),!0).forEach(function(n){rx(r,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):Mg(Object(a)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(a,n))})}return r}const Bu=r=>{var t;return r.msg||r.message||r.error_description||(typeof r.error=="string"?r.error:(t=r.error)===null||t===void 0?void 0:t.message)||JSON.stringify(r)},nx=(r,t,a)=>_(null,null,function*(){r instanceof(yield Zb())&&!(a!=null&&a.noResolveJson)?r.json().then(n=>{const o=r.status||500,u=(n==null?void 0:n.statusCode)||o+"";t(new Jb(Bu(n),o,u))}).catch(n=>{t(new rd(Bu(n),n))}):t(new rd(Bu(r),r))}),ix=(r,t,a,n)=>{const o={method:r,headers:(t==null?void 0:t.headers)||{}};return r==="GET"||!n?o:(ex(n)?(o.headers=Ee({"Content-Type":"application/json"},t==null?void 0:t.headers),o.body=JSON.stringify(n)):o.body=n,t!=null&&t.duplex&&(o.duplex=t.duplex),Ee(Ee({},o),a))};function Ai(r,t,a,n,o,u){return _(this,null,function*(){return new Promise((h,g)=>{r(a,ix(t,n,o,u)).then(m=>{if(!m.ok)throw m;return n!=null&&n.noResolveJson?m:m.json()}).then(m=>h(m)).catch(m=>nx(m,g,n))})})}function Ei(r,t,a,n){return _(this,null,function*(){return Ai(r,"GET",t,a,n)})}function _a(r,t,a,n,o){return _(this,null,function*(){return Ai(r,"POST",t,n,o,a)})}function id(r,t,a,n,o){return _(this,null,function*(){return Ai(r,"PUT",t,n,o,a)})}function lx(r,t,a,n){return _(this,null,function*(){return Ai(r,"HEAD",t,Ee(Ee({},a),{},{noResolveJson:!0}),n)})}function bd(r,t,a,n,o){return _(this,null,function*(){return Ai(r,"DELETE",t,n,o,a)})}var ox=class{constructor(r,t){this.downloadFn=r,this.shouldThrowOnError=t}then(r,t){return this.execute().then(r,t)}execute(){return _(this,null,function*(){var r=this;try{return{data:(yield r.downloadFn()).body,error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(st(t))return{data:null,error:t};throw t}})}};let Np;Np=Symbol.toStringTag;var cx=class{constructor(r,t){this.downloadFn=r,this.shouldThrowOnError=t,this[Np]="BlobDownloadBuilder",this.promise=null}asStream(){return new ox(this.downloadFn,this.shouldThrowOnError)}then(r,t){return this.getPromise().then(r,t)}catch(r){return this.getPromise().catch(r)}finally(r){return this.getPromise().finally(r)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return _(this,null,function*(){var r=this;try{return{data:yield(yield r.downloadFn()).blob(),error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(st(t))return{data:null,error:t};throw t}})}};const ux={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ug={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var dx=class{constructor(r,t={},a,n){this.shouldThrowOnError=!1,this.url=r,this.headers=t,this.bucketId=a,this.fetch=vd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(r,t,a,n){return _(this,null,function*(){var o=this;try{let u;const h=Ee(Ee({},Ug),n);let g=Ee(Ee({},o.headers),r==="POST"&&{"x-upsert":String(h.upsert)});const m=h.metadata;typeof Blob!="undefined"&&a instanceof Blob?(u=new FormData,u.append("cacheControl",h.cacheControl),m&&u.append("metadata",o.encodeMetadata(m)),u.append("",a)):typeof FormData!="undefined"&&a instanceof FormData?(u=a,u.has("cacheControl")||u.append("cacheControl",h.cacheControl),m&&!u.has("metadata")&&u.append("metadata",o.encodeMetadata(m))):(u=a,g["cache-control"]=`max-age=${h.cacheControl}`,g["content-type"]=h.contentType,m&&(g["x-metadata"]=o.toBase64(o.encodeMetadata(m))),(typeof ReadableStream!="undefined"&&u instanceof ReadableStream||u&&typeof u=="object"&&"pipe"in u&&typeof u.pipe=="function")&&!h.duplex&&(h.duplex="half")),n!=null&&n.headers&&(g=Ee(Ee({},g),n.headers));const p=o._removeEmptyFolders(t),y=o._getFinalPath(p),x=yield(r=="PUT"?id:_a)(o.fetch,`${o.url}/object/${y}`,u,Ee({headers:g},h!=null&&h.duplex?{duplex:h.duplex}:{}));return{data:{path:p,id:x.Id,fullPath:x.Key},error:null}}catch(u){if(o.shouldThrowOnError)throw u;if(st(u))return{data:null,error:u};throw u}})}upload(r,t,a){return _(this,null,function*(){return this.uploadOrUpdate("POST",r,t,a)})}uploadToSignedUrl(r,t,a,n){return _(this,null,function*(){var o=this;const u=o._removeEmptyFolders(r),h=o._getFinalPath(u),g=new URL(o.url+`/object/upload/sign/${h}`);g.searchParams.set("token",t);try{let m;const p=Ee({upsert:Ug.upsert},n),y=Ee(Ee({},o.headers),{"x-upsert":String(p.upsert)});return typeof Blob!="undefined"&&a instanceof Blob?(m=new FormData,m.append("cacheControl",p.cacheControl),m.append("",a)):typeof FormData!="undefined"&&a instanceof FormData?(m=a,m.append("cacheControl",p.cacheControl)):(m=a,y["cache-control"]=`max-age=${p.cacheControl}`,y["content-type"]=p.contentType),{data:{path:u,fullPath:(yield id(o.fetch,g.toString(),m,{headers:y})).Key},error:null}}catch(m){if(o.shouldThrowOnError)throw m;if(st(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(r,t){return _(this,null,function*(){var a=this;try{let n=a._getFinalPath(r);const o=Ee({},a.headers);t!=null&&t.upsert&&(o["x-upsert"]="true");const u=yield _a(a.fetch,`${a.url}/object/upload/sign/${n}`,{},{headers:o}),h=new URL(a.url+u.url),g=h.searchParams.get("token");if(!g)throw new yo("No token returned by API");return{data:{signedUrl:h.toString(),path:r,token:g},error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(st(n))return{data:null,error:n};throw n}})}update(r,t,a){return _(this,null,function*(){return this.uploadOrUpdate("PUT",r,t,a)})}move(r,t,a){return _(this,null,function*(){var n=this;try{return{data:yield _a(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:r,destinationKey:t,destinationBucket:a==null?void 0:a.destinationBucket},{headers:n.headers}),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(st(o))return{data:null,error:o};throw o}})}copy(r,t,a){return _(this,null,function*(){var n=this;try{return{data:{path:(yield _a(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:r,destinationKey:t,destinationBucket:a==null?void 0:a.destinationBucket},{headers:n.headers})).Key},error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(st(o))return{data:null,error:o};throw o}})}createSignedUrl(r,t,a){return _(this,null,function*(){var n=this;try{let o=n._getFinalPath(r),u=yield _a(n.fetch,`${n.url}/object/sign/${o}`,Ee({expiresIn:t},a!=null&&a.transform?{transform:a.transform}:{}),{headers:n.headers});const h=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return u={signedUrl:encodeURI(`${n.url}${u.signedURL}${h}`)},{data:u,error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(st(o))return{data:null,error:o};throw o}})}createSignedUrls(r,t,a){return _(this,null,function*(){var n=this;try{const o=yield _a(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:r},{headers:n.headers}),u=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return{data:o.map(h=>Ee(Ee({},h),{},{signedUrl:h.signedURL?encodeURI(`${n.url}${h.signedURL}${u}`):null})),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(st(o))return{data:null,error:o};throw o}})}download(r,t){const a=typeof(t==null?void 0:t.transform)!="undefined"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=n?`?${n}`:"",u=this._getFinalPath(r),h=()=>Ei(this.fetch,`${this.url}/${a}/${u}${o}`,{headers:this.headers,noResolveJson:!0});return new cx(h,this.shouldThrowOnError)}info(r){return _(this,null,function*(){var t=this;const a=t._getFinalPath(r);try{return{data:nd(yield Ei(t.fetch,`${t.url}/object/info/${a}`,{headers:t.headers})),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(st(n))return{data:null,error:n};throw n}})}exists(r){return _(this,null,function*(){var t=this;const a=t._getFinalPath(r);try{return yield lx(t.fetch,`${t.url}/object/${a}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(st(n)&&n instanceof rd){const o=n.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:n}}throw n}})}getPublicUrl(r,t){const a=this._getFinalPath(r),n=[],o=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&n.push(o);const u=typeof(t==null?void 0:t.transform)!="undefined"?"render/image":"object",h=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});h!==""&&n.push(h);let g=n.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${a}${g}`)}}}remove(r){return _(this,null,function*(){var t=this;try{return{data:yield bd(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:r},{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(st(a))return{data:null,error:a};throw a}})}list(r,t,a){return _(this,null,function*(){var n=this;try{const o=Ee(Ee(Ee({},ux),t),{},{prefix:r||""});return{data:yield _a(n.fetch,`${n.url}/object/list/${n.bucketId}`,o,{headers:n.headers},a),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(st(o))return{data:null,error:o};throw o}})}listV2(r,t){return _(this,null,function*(){var a=this;try{const n=Ee({},r);return{data:yield _a(a.fetch,`${a.url}/object/list-v2/${a.bucketId}`,n,{headers:a.headers},t),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(st(n))return{data:null,error:n};throw n}})}encodeMetadata(r){return JSON.stringify(r)}toBase64(r){return typeof Buffer!="undefined"?Buffer.from(r).toString("base64"):btoa(r)}_getFinalPath(r){return`${this.bucketId}/${r.replace(/^\/+/,"")}`}_removeEmptyFolders(r){return r.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(r){const t=[];return r.width&&t.push(`width=${r.width}`),r.height&&t.push(`height=${r.height}`),r.resize&&t.push(`resize=${r.resize}`),r.format&&t.push(`format=${r.format}`),r.quality&&t.push(`quality=${r.quality}`),t.join("&")}};const Cp="2.89.0",Ep={"X-Client-Info":`storage-js/${Cp}`};var hx=class{constructor(r,t={},a,n){this.shouldThrowOnError=!1;const o=new URL(r);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Ee(Ee({},Ep),t),this.fetch=vd(a)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(r){return _(this,null,function*(){var t=this;try{const a=t.listBucketOptionsToQueryString(r);return{data:yield Ei(t.fetch,`${t.url}/bucket${a}`,{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(st(a))return{data:null,error:a};throw a}})}getBucket(r){return _(this,null,function*(){var t=this;try{return{data:yield Ei(t.fetch,`${t.url}/bucket/${r}`,{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(st(a))return{data:null,error:a};throw a}})}createBucket(a){return _(this,arguments,function*(r,t={public:!1}){var n=this;try{return{data:yield _a(n.fetch,`${n.url}/bucket`,{id:r,name:r,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(st(o))return{data:null,error:o};throw o}})}updateBucket(r,t){return _(this,null,function*(){var a=this;try{return{data:yield id(a.fetch,`${a.url}/bucket/${r}`,{id:r,name:r,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(st(n))return{data:null,error:n};throw n}})}emptyBucket(r){return _(this,null,function*(){var t=this;try{return{data:yield _a(t.fetch,`${t.url}/bucket/${r}/empty`,{},{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(st(a))return{data:null,error:a};throw a}})}deleteBucket(r){return _(this,null,function*(){var t=this;try{return{data:yield bd(t.fetch,`${t.url}/bucket/${r}`,{},{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(st(a))return{data:null,error:a};throw a}})}listBucketOptionsToQueryString(r){const t={};return r&&("limit"in r&&(t.limit=String(r.limit)),"offset"in r&&(t.offset=String(r.offset)),r.search&&(t.search=r.search),r.sortColumn&&(t.sortColumn=r.sortColumn),r.sortOrder&&(t.sortOrder=r.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},fx=class{constructor(r,t={},a){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Ee(Ee({},Ep),t),this.fetch=vd(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(r){return _(this,null,function*(){var t=this;try{return{data:yield _a(t.fetch,`${t.url}/bucket`,{name:r},{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(st(a))return{data:null,error:a};throw a}})}listBuckets(r){return _(this,null,function*(){var t=this;try{const a=new URLSearchParams;(r==null?void 0:r.limit)!==void 0&&a.set("limit",r.limit.toString()),(r==null?void 0:r.offset)!==void 0&&a.set("offset",r.offset.toString()),r!=null&&r.sortColumn&&a.set("sortColumn",r.sortColumn),r!=null&&r.sortOrder&&a.set("sortOrder",r.sortOrder),r!=null&&r.search&&a.set("search",r.search);const n=a.toString(),o=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return{data:yield Ei(t.fetch,o,{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(st(a))return{data:null,error:a};throw a}})}deleteBucket(r){return _(this,null,function*(){var t=this;try{return{data:yield bd(t.fetch,`${t.url}/bucket/${r}`,{},{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(st(a))return{data:null,error:a};throw a}})}from(r){var t=this;if(!tx(r))throw new yo("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const a=new Xb({baseUrl:this.url,catalogName:r,auth:{type:"custom",getHeaders:()=>_(this,null,function*(){return t.headers})},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(a,{get(o,u){const h=o[u];return typeof h!="function"?h:(...g)=>_(null,null,function*(){try{return{data:yield h.apply(o,g),error:null}}catch(m){if(n)throw m;return{data:null,error:m}}})}})}};const xd={"X-Client-Info":`storage-js/${Cp}`,"Content-Type":"application/json"};var Tp=class extends Error{constructor(r){super(r),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function na(r){return typeof r=="object"&&r!==null&&"__isStorageVectorsError"in r}var Pu=class extends Tp{constructor(r,t,a){super(r),this.name="StorageVectorsApiError",this.status=t,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},mx=class extends Tp{constructor(r,t){super(r),this.name="StorageVectorsUnknownError",this.originalError=t}};const wd=r=>r?(...t)=>r(...t):(...t)=>fetch(...t),gx=r=>{if(typeof r!="object"||r===null)return!1;const t=Object.getPrototypeOf(r);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},qg=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),px=(r,t,a)=>_(null,null,function*(){if(r&&typeof r=="object"&&"status"in r&&"ok"in r&&typeof r.status=="number"&&!(a!=null&&a.noResolveJson)){const n=r.status||500,o=r;if(typeof o.json=="function")o.json().then(u=>{const h=(u==null?void 0:u.statusCode)||(u==null?void 0:u.code)||n+"";t(new Pu(qg(u),n,h))}).catch(()=>{const u=n+"";t(new Pu(o.statusText||`HTTP ${n} error`,n,u))});else{const u=n+"";t(new Pu(o.statusText||`HTTP ${n} error`,n,u))}}else t(new mx(qg(r),r))}),yx=(r,t,a,n)=>{const o={method:r,headers:(t==null?void 0:t.headers)||{}};return n?(gx(n)?(o.headers=Ee({"Content-Type":"application/json"},t==null?void 0:t.headers),o.body=JSON.stringify(n)):o.body=n,Ee(Ee({},o),a)):o};function vx(r,t,a,n,o,u){return _(this,null,function*(){return new Promise((h,g)=>{r(a,yx(t,n,o,u)).then(m=>{if(!m.ok)throw m;if(n!=null&&n.noResolveJson)return m;const p=m.headers.get("content-type");return!p||!p.includes("application/json")?{}:m.json()}).then(m=>h(m)).catch(m=>px(m,g,n))})})}function ia(r,t,a,n,o){return _(this,null,function*(){return vx(r,"POST",t,n,o,a)})}var bx=class{constructor(r,t={},a){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Ee(Ee({},xd),t),this.fetch=wd(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(r){return _(this,null,function*(){var t=this;try{return{data:(yield ia(t.fetch,`${t.url}/CreateIndex`,r,{headers:t.headers}))||{},error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(na(a))return{data:null,error:a};throw a}})}getIndex(r,t){return _(this,null,function*(){var a=this;try{return{data:yield ia(a.fetch,`${a.url}/GetIndex`,{vectorBucketName:r,indexName:t},{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(na(n))return{data:null,error:n};throw n}})}listIndexes(r){return _(this,null,function*(){var t=this;try{return{data:yield ia(t.fetch,`${t.url}/ListIndexes`,r,{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(na(a))return{data:null,error:a};throw a}})}deleteIndex(r,t){return _(this,null,function*(){var a=this;try{return{data:(yield ia(a.fetch,`${a.url}/DeleteIndex`,{vectorBucketName:r,indexName:t},{headers:a.headers}))||{},error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(na(n))return{data:null,error:n};throw n}})}},xx=class{constructor(r,t={},a){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Ee(Ee({},xd),t),this.fetch=wd(a)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(r){return _(this,null,function*(){var t=this;try{if(r.vectors.length<1||r.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield ia(t.fetch,`${t.url}/PutVectors`,r,{headers:t.headers}))||{},error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(na(a))return{data:null,error:a};throw a}})}getVectors(r){return _(this,null,function*(){var t=this;try{return{data:yield ia(t.fetch,`${t.url}/GetVectors`,r,{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(na(a))return{data:null,error:a};throw a}})}listVectors(r){return _(this,null,function*(){var t=this;try{if(r.segmentCount!==void 0){if(r.segmentCount<1||r.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(r.segmentIndex!==void 0&&(r.segmentIndex<0||r.segmentIndex>=r.segmentCount))throw new Error(`segmentIndex must be between 0 and ${r.segmentCount-1}`)}return{data:yield ia(t.fetch,`${t.url}/ListVectors`,r,{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(na(a))return{data:null,error:a};throw a}})}queryVectors(r){return _(this,null,function*(){var t=this;try{return{data:yield ia(t.fetch,`${t.url}/QueryVectors`,r,{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(na(a))return{data:null,error:a};throw a}})}deleteVectors(r){return _(this,null,function*(){var t=this;try{if(r.keys.length<1||r.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield ia(t.fetch,`${t.url}/DeleteVectors`,r,{headers:t.headers}))||{},error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(na(a))return{data:null,error:a};throw a}})}},wx=class{constructor(r,t={},a){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Ee(Ee({},xd),t),this.fetch=wd(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(r){return _(this,null,function*(){var t=this;try{return{data:(yield ia(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:r},{headers:t.headers}))||{},error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(na(a))return{data:null,error:a};throw a}})}getBucket(r){return _(this,null,function*(){var t=this;try{return{data:yield ia(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:r},{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(na(a))return{data:null,error:a};throw a}})}listBuckets(){return _(this,arguments,function*(r={}){var t=this;try{return{data:yield ia(t.fetch,`${t.url}/ListVectorBuckets`,r,{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(na(a))return{data:null,error:a};throw a}})}deleteBucket(r){return _(this,null,function*(){var t=this;try{return{data:(yield ia(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:r},{headers:t.headers}))||{},error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(na(a))return{data:null,error:a};throw a}})}},jx=class r extends wx{constructor(t,a={}){super(t,a.headers||{},a.fetch)}from(t){return new Sx(this.url,this.headers,t,this.fetch)}createBucket(t){return _(this,null,function*(){var a=()=>Qt(r.prototype,this,"createBucket"),n=this;return a().call(n,t)})}getBucket(t){return _(this,null,function*(){var a=()=>Qt(r.prototype,this,"getBucket"),n=this;return a().call(n,t)})}listBuckets(){return _(this,arguments,function*(t={}){var a=()=>Qt(r.prototype,this,"listBuckets"),n=this;return a().call(n,t)})}deleteBucket(t){return _(this,null,function*(){var a=()=>Qt(r.prototype,this,"deleteBucket"),n=this;return a().call(n,t)})}},Sx=class r extends bx{constructor(t,a,n,o){super(t,a,o),this.vectorBucketName=n}createIndex(t){return _(this,null,function*(){var a=()=>Qt(r.prototype,this,"createIndex"),n=this;return a().call(n,Ee(Ee({},t),{},{vectorBucketName:n.vectorBucketName}))})}listIndexes(){return _(this,arguments,function*(t={}){var a=()=>Qt(r.prototype,this,"listIndexes"),n=this;return a().call(n,Ee(Ee({},t),{},{vectorBucketName:n.vectorBucketName}))})}getIndex(t){return _(this,null,function*(){var a=()=>Qt(r.prototype,this,"getIndex"),n=this;return a().call(n,n.vectorBucketName,t)})}deleteIndex(t){return _(this,null,function*(){var a=()=>Qt(r.prototype,this,"deleteIndex"),n=this;return a().call(n,n.vectorBucketName,t)})}index(t){return new _x(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},_x=class r extends xx{constructor(t,a,n,o,u){super(t,a,u),this.vectorBucketName=n,this.indexName=o}putVectors(t){return _(this,null,function*(){var a=()=>Qt(r.prototype,this,"putVectors"),n=this;return a().call(n,Ee(Ee({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))})}getVectors(t){return _(this,null,function*(){var a=()=>Qt(r.prototype,this,"getVectors"),n=this;return a().call(n,Ee(Ee({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))})}listVectors(){return _(this,arguments,function*(t={}){var a=()=>Qt(r.prototype,this,"listVectors"),n=this;return a().call(n,Ee(Ee({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))})}queryVectors(t){return _(this,null,function*(){var a=()=>Qt(r.prototype,this,"queryVectors"),n=this;return a().call(n,Ee(Ee({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))})}deleteVectors(t){return _(this,null,function*(){var a=()=>Qt(r.prototype,this,"deleteVectors"),n=this;return a().call(n,Ee(Ee({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))})}},Nx=class extends hx{constructor(r,t={},a,n){super(r,t,a,n)}from(r){return new dx(this.url,this.headers,r,this.fetch)}get vectors(){return new jx(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new fx(this.url+"/iceberg",this.headers,this.fetch)}};const Dp="2.89.0",en=30*1e3,ld=3,Iu=ld*en,Cx="http://localhost:9999",Ex="supabase.auth.token",Tx={"X-Client-Info":`gotrue-js/${Dp}`},od="X-Supabase-Api-Version",Op={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Dx=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Ox=600*1e3;class Ti extends Error{constructor(t,a,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=a,this.code=n}}function be(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class Ax extends Ti{constructor(t,a,n){super(t,a,n),this.name="AuthApiError",this.status=a,this.code=n}}function kx(r){return be(r)&&r.name==="AuthApiError"}class ar extends Ti{constructor(t,a){super(t),this.name="AuthUnknownError",this.originalError=a}}class ss extends Ti{constructor(t,a,n,o){super(t,n,o),this.name=a,this.status=n}}class ra extends ss{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Rx(r){return be(r)&&r.name==="AuthSessionMissingError"}class Fr extends ss{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Xl extends ss{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Jl extends ss{constructor(t,a=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Mx(r){return be(r)&&r.name==="AuthImplicitGrantRedirectError"}class Lg extends ss{constructor(t,a=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ux extends ss{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class cd extends ss{constructor(t,a){super(t,"AuthRetryableFetchError",a,void 0)}}function Hu(r){return be(r)&&r.name==="AuthRetryableFetchError"}class zg extends ss{constructor(t,a,n){super(t,"AuthWeakPasswordError",a,"weak_password"),this.reasons=n}}class ud extends ss{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const lo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),$g=` 	
\r=`.split(""),qx=(()=>{const r=new Array(128);for(let t=0;t<r.length;t+=1)r[t]=-1;for(let t=0;t<$g.length;t+=1)r[$g[t].charCodeAt(0)]=-2;for(let t=0;t<lo.length;t+=1)r[lo[t].charCodeAt(0)]=t;return r})();function Bg(r,t,a){if(r!==null)for(t.queue=t.queue<<8|r,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;a(lo[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;a(lo[n]),t.queuedBits-=6}}function Ap(r,t,a){const n=qx[r];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)a(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function Pg(r){const t=[],a=h=>{t.push(String.fromCodePoint(h))},n={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},u=h=>{$x(h,n,a)};for(let h=0;h<r.length;h+=1)Ap(r.charCodeAt(h),o,u);return t.join("")}function Lx(r,t){if(r<=127){t(r);return}else if(r<=2047){t(192|r>>6),t(128|r&63);return}else if(r<=65535){t(224|r>>12),t(128|r>>6&63),t(128|r&63);return}else if(r<=1114111){t(240|r>>18),t(128|r>>12&63),t(128|r>>6&63),t(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function zx(r,t){for(let a=0;a<r.length;a+=1){let n=r.charCodeAt(a);if(n>55295&&n<=56319){const o=(n-55296)*1024&65535;n=(r.charCodeAt(a+1)-56320&65535|o)+65536,a+=1}Lx(n,t)}}function $x(r,t,a){if(t.utf8seq===0){if(r<=127){a(r);return}for(let n=1;n<6;n+=1)if((r>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=r&31;else if(t.utf8seq===3)t.codepoint=r&15;else if(t.utf8seq===4)t.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|r&63,t.utf8seq-=1,t.utf8seq===0&&a(t.codepoint)}}function rn(r){const t=[],a={queue:0,queuedBits:0},n=o=>{t.push(o)};for(let o=0;o<r.length;o+=1)Ap(r.charCodeAt(o),a,n);return new Uint8Array(t)}function Bx(r){const t=[];return zx(r,a=>t.push(a)),new Uint8Array(t)}function sr(r){const t=[],a={queue:0,queuedBits:0},n=o=>{t.push(o)};return r.forEach(o=>Bg(o,a,n)),Bg(null,a,n),t.join("")}function Px(r){return Math.round(Date.now()/1e3)+r}function Ix(){return Symbol("auth-callback")}const Ut=()=>typeof window!="undefined"&&typeof document!="undefined",Xs={tested:!1,writable:!1},kp=()=>{if(!Ut())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch(t){return!1}if(Xs.tested)return Xs.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),Xs.tested=!0,Xs.writable=!0}catch(t){Xs.tested=!0,Xs.writable=!1}return Xs.writable};function Hx(r){const t={},a=new URL(r);if(a.hash&&a.hash[0]==="#")try{new URLSearchParams(a.hash.substring(1)).forEach((o,u)=>{t[u]=o})}catch(n){}return a.searchParams.forEach((n,o)=>{t[o]=n}),t}const Rp=r=>r?(...t)=>r(...t):(...t)=>fetch(...t),Yx=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",tn=(r,t,a)=>_(null,null,function*(){yield r.setItem(t,JSON.stringify(a))}),Js=(r,t)=>_(null,null,function*(){const a=yield r.getItem(t);if(!a)return null;try{return JSON.parse(a)}catch(n){return a}}),Mt=(r,t)=>_(null,null,function*(){yield r.removeItem(t)});class vo{constructor(){this.promise=new vo.promiseConstructor((t,a)=>{this.resolve=t,this.reject=a})}}vo.promiseConstructor=Promise;function Yu(r){const t=r.split(".");if(t.length!==3)throw new ud("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Dx.test(t[n]))throw new ud("JWT not in base64url format");return{header:JSON.parse(Pg(t[0])),payload:JSON.parse(Pg(t[1])),signature:rn(t[2]),raw:{header:t[0],payload:t[1]}}}function Vx(r){return _(this,null,function*(){return yield new Promise(t=>{setTimeout(()=>t(null),r)})})}function Fx(r,t){return new Promise((n,o)=>{_(null,null,function*(){for(let u=0;u<1/0;u++)try{const h=yield r(u);if(!t(u,null,h)){n(h);return}}catch(h){if(!t(u,h)){o(h);return}}})})}function Qx(r){return("0"+r.toString(16)).substr(-2)}function Gx(){const t=new Uint32Array(56);if(typeof crypto=="undefined"){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=a.length;let o="";for(let u=0;u<56;u++)o+=a.charAt(Math.floor(Math.random()*n));return o}return crypto.getRandomValues(t),Array.from(t,Qx).join("")}function Kx(r){return _(this,null,function*(){const a=new TextEncoder().encode(r),n=yield crypto.subtle.digest("SHA-256",a),o=new Uint8Array(n);return Array.from(o).map(u=>String.fromCharCode(u)).join("")})}function Wx(r){return _(this,null,function*(){if(!(typeof crypto!="undefined"&&typeof crypto.subtle!="undefined"&&typeof TextEncoder!="undefined"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const a=yield Kx(r);return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})}function Qr(r,t,a=!1){return _(this,null,function*(){const n=Gx();let o=n;a&&(o+="/PASSWORD_RECOVERY"),yield tn(r,`${t}-code-verifier`,o);const u=yield Wx(n);return[u,n===u?"plain":"s256"]})}const Xx=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Jx(r){const t=r.headers.get(od);if(!t||!t.match(Xx))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(a){return null}}function Zx(r){if(!r)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(r<=t)throw new Error("JWT has expired")}function ew(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const tw=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Gr(r){if(!tw.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Vu(){const r={};return new Proxy(r,{get:(t,a)=>{if(a==="__isUserNotAvailableProxy")return!0;if(typeof a=="symbol"){const n=a.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${a}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function aw(r,t){return new Proxy(r,{get:(a,n,o)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const u=n.toString();if(u==="Symbol(Symbol.toPrimitive)"||u==="Symbol(Symbol.toStringTag)"||u==="Symbol(util.inspect.custom)"||u==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(a,n,o)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(a,n,o)}})}function Ig(r){return JSON.parse(JSON.stringify(r))}const Zs=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),sw=[502,503,504];function Hg(r){return _(this,null,function*(){var t;if(!Yx(r))throw new cd(Zs(r),0);if(sw.includes(r.status))throw new cd(Zs(r),r.status);let a;try{a=yield r.json()}catch(u){throw new ar(Zs(u),u)}let n;const o=Jx(r);if(o&&o.getTime()>=Op["2024-01-01"].timestamp&&typeof a=="object"&&a&&typeof a.code=="string"?n=a.code:typeof a=="object"&&a&&typeof a.error_code=="string"&&(n=a.error_code),n){if(n==="weak_password")throw new zg(Zs(a),r.status,((t=a.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new ra}else if(typeof a=="object"&&a&&typeof a.weak_password=="object"&&a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.reasons.reduce((u,h)=>u&&typeof h=="string",!0))throw new zg(Zs(a),r.status,a.weak_password.reasons);throw new Ax(Zs(a),r.status||500,n)})}const rw=(r,t,a,n)=>{const o={method:r,headers:(t==null?void 0:t.headers)||{}};return r==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),o.body=JSON.stringify(n),Object.assign(Object.assign({},o),a))};function Ce(r,t,a,n){return _(this,null,function*(){var o;const u=Object.assign({},n==null?void 0:n.headers);u[od]||(u[od]=Op["2024-01-01"].name),n!=null&&n.jwt&&(u.Authorization=`Bearer ${n.jwt}`);const h=(o=n==null?void 0:n.query)!==null&&o!==void 0?o:{};n!=null&&n.redirectTo&&(h.redirect_to=n.redirectTo);const g=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",m=yield nw(r,t,a+g,{headers:u,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(m):{data:Object.assign({},m),error:null}})}function nw(r,t,a,n,o,u){return _(this,null,function*(){const h=rw(t,n,o,u);let g;try{g=yield r(a,Object.assign({},h))}catch(m){throw console.error(m),new cd(Zs(m),0)}if(g.ok||(yield Hg(g)),n!=null&&n.noResolveJson)return g;try{return yield g.json()}catch(m){yield Hg(m)}})}function Sa(r){var t;let a=null;ow(r)&&(a=Object.assign({},r),r.expires_at||(a.expires_at=Px(r.expires_in)));const n=(t=r.user)!==null&&t!==void 0?t:r;return{data:{session:a,user:n},error:null}}function Yg(r){const t=Sa(r);return!t.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((a,n)=>a&&typeof n=="string",!0)&&(t.data.weak_password=r.weak_password),t}function Ds(r){var t;return{data:{user:(t=r.user)!==null&&t!==void 0?t:r},error:null}}function iw(r){return{data:r,error:null}}function lw(r){const{action_link:t,email_otp:a,hashed_token:n,redirect_to:o,verification_type:u}=r,h=po(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),g={action_link:t,email_otp:a,hashed_token:n,redirect_to:o,verification_type:u},m=Object.assign({},h);return{data:{properties:g,user:m},error:null}}function Vg(r){return r}function ow(r){return r.access_token&&r.refresh_token&&r.expires_in}const Fu=["global","local","others"];class cw{constructor({url:t="",headers:a={},fetch:n}){this.url=t,this.headers=a,this.fetch=Rp(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}signOut(n){return _(this,arguments,function*(t,a=Fu[0]){if(Fu.indexOf(a)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Fu.join(", ")}`);try{return yield Ce(this.fetch,"POST",`${this.url}/logout?scope=${a}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(o){if(be(o))return{data:null,error:o};throw o}})}inviteUserByEmail(n){return _(this,arguments,function*(t,a={}){try{return yield Ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:a.data},headers:this.headers,redirectTo:a.redirectTo,xform:Ds})}catch(o){if(be(o))return{data:{user:null},error:o};throw o}})}generateLink(t){return _(this,null,function*(){try{const{options:a}=t,n=po(t,["options"]),o=Object.assign(Object.assign({},n),a);return"newEmail"in n&&(o.new_email=n==null?void 0:n.newEmail,delete o.newEmail),yield Ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:lw,redirectTo:a==null?void 0:a.redirectTo})}catch(a){if(be(a))return{data:{properties:null,user:null},error:a};throw a}})}createUser(t){return _(this,null,function*(){try{return yield Ce(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ds})}catch(a){if(be(a))return{data:{user:null},error:a};throw a}})}listUsers(t){return _(this,null,function*(){var a,n,o,u,h,g,m;try{const p={nextPage:null,lastPage:0,total:0},y=yield Ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(a=t==null?void 0:t.page)===null||a===void 0?void 0:a.toString())!==null&&n!==void 0?n:"",per_page:(u=(o=t==null?void 0:t.perPage)===null||o===void 0?void 0:o.toString())!==null&&u!==void 0?u:""},xform:Vg});if(y.error)throw y.error;const x=yield y.json(),v=(h=y.headers.get("x-total-count"))!==null&&h!==void 0?h:0,j=(m=(g=y.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&m!==void 0?m:[];return j.length>0&&(j.forEach(E=>{const D=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),O=JSON.parse(E.split(";")[1].split("=")[1]);p[`${O}Page`]=D}),p.total=parseInt(v)),{data:Object.assign(Object.assign({},x),p),error:null}}catch(p){if(be(p))return{data:{users:[]},error:p};throw p}})}getUserById(t){return _(this,null,function*(){Gr(t);try{return yield Ce(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ds})}catch(a){if(be(a))return{data:{user:null},error:a};throw a}})}updateUserById(t,a){return _(this,null,function*(){Gr(t);try{return yield Ce(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:a,headers:this.headers,xform:Ds})}catch(n){if(be(n))return{data:{user:null},error:n};throw n}})}deleteUser(t,a=!1){return _(this,null,function*(){Gr(t);try{return yield Ce(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:a},xform:Ds})}catch(n){if(be(n))return{data:{user:null},error:n};throw n}})}_listFactors(t){return _(this,null,function*(){Gr(t.userId);try{const{data:a,error:n}=yield Ce(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:a,error:n}}catch(a){if(be(a))return{data:null,error:a};throw a}})}_deleteFactor(t){return _(this,null,function*(){Gr(t.userId),Gr(t.id);try{return{data:yield Ce(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(a){if(be(a))return{data:null,error:a};throw a}})}_listOAuthClients(t){return _(this,null,function*(){var a,n,o,u,h,g,m;try{const p={nextPage:null,lastPage:0,total:0},y=yield Ce(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(a=t==null?void 0:t.page)===null||a===void 0?void 0:a.toString())!==null&&n!==void 0?n:"",per_page:(u=(o=t==null?void 0:t.perPage)===null||o===void 0?void 0:o.toString())!==null&&u!==void 0?u:""},xform:Vg});if(y.error)throw y.error;const x=yield y.json(),v=(h=y.headers.get("x-total-count"))!==null&&h!==void 0?h:0,j=(m=(g=y.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&m!==void 0?m:[];return j.length>0&&(j.forEach(E=>{const D=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),O=JSON.parse(E.split(";")[1].split("=")[1]);p[`${O}Page`]=D}),p.total=parseInt(v)),{data:Object.assign(Object.assign({},x),p),error:null}}catch(p){if(be(p))return{data:{clients:[]},error:p};throw p}})}_createOAuthClient(t){return _(this,null,function*(){try{return yield Ce(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(be(a))return{data:null,error:a};throw a}})}_getOAuthClient(t){return _(this,null,function*(){try{return yield Ce(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(be(a))return{data:null,error:a};throw a}})}_updateOAuthClient(t,a){return _(this,null,function*(){try{return yield Ce(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:a,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(be(n))return{data:null,error:n};throw n}})}_deleteOAuthClient(t){return _(this,null,function*(){try{return yield Ce(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(a){if(be(a))return{data:null,error:a};throw a}})}_regenerateOAuthClientSecret(t){return _(this,null,function*(){try{return yield Ce(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(be(a))return{data:null,error:a};throw a}})}}function Fg(r={}){return{getItem:t=>r[t]||null,setItem:(t,a)=>{r[t]=a},removeItem:t=>{delete r[t]}}}const Kr={debug:!!(globalThis&&kp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Mp extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class uw extends Mp{}function dw(r,t,a){return _(this,null,function*(){Kr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Kr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},t),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(r,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},o=>_(null,null,function*(){if(o){Kr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,o.name);try{return yield a()}finally{Kr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,o.name)}}else{if(t===0)throw Kr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new uw(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(Kr.debug)try{const u=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield a()}})))})}function hw(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(r){typeof self!="undefined"&&(self.globalThis=self)}}function Up(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function fw(r){return parseInt(r,16)}function mw(r){const t=new TextEncoder().encode(r);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function gw(r){var t;const{chainId:a,domain:n,expirationTime:o,issuedAt:u=new Date,nonce:h,notBefore:g,requestId:m,resources:p,scheme:y,uri:x,version:v}=r;{if(!Number.isInteger(a))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${a}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!x)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((t=r.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const j=Up(r.address),E=y?`${y}://${n}`:n,D=r.statement?`${r.statement}
`:"",O=`${E} wants you to sign in with your Ethereum account:
${j}

${D}`;let H=`URI: ${x}
Version: ${v}
Chain ID: ${a}${h?`
Nonce: ${h}`:""}
Issued At: ${u.toISOString()}`;if(o&&(H+=`
Expiration Time: ${o.toISOString()}`),g&&(H+=`
Not Before: ${g.toISOString()}`),m&&(H+=`
Request ID: ${m}`),p){let U=`
Resources:`;for(const q of p){if(!q||typeof q!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${q}`);U+=`
- ${q}`}H+=U}return`${O}
${H}`}class jt extends Error{constructor({message:t,code:a,cause:n,name:o}){var u;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(u=o!=null?o:n instanceof Error?n.name:void 0)!==null&&u!==void 0?u:"Unknown Error",this.code=a}}class oo extends jt{constructor(t,a){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a,message:t}),this.name="WebAuthnUnknownError",this.originalError=a}}function pw({error:r,options:t}){var a,n,o;const{publicKey:u}=t;if(!u)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(t.signal instanceof AbortSignal)return new jt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((a=u.authenticatorSelection)===null||a===void 0?void 0:a.requireResidentKey)===!0)return new jt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(t.mediation==="conditional"&&((n=u.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new jt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((o=u.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new jt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new jt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new jt({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return u.pubKeyCredParams.filter(g=>g.type==="public-key").length===0?new jt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new jt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const h=window.location.hostname;if(qp(h)){if(u.rp.id!==h)return new jt({message:`The RP ID "${u.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new jt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(u.user.id.byteLength<1||u.user.id.byteLength>64)return new jt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new jt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new jt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function yw({error:r,options:t}){const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(t.signal instanceof AbortSignal)return new jt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new jt({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const n=window.location.hostname;if(qp(n)){if(a.rpId!==n)return new jt({message:`The RP ID "${a.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new jt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new jt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new jt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}class vw{createNewAbortSignal(){if(this.controller){const a=new Error("Cancelling existing WebAuthn API call for new one");a.name="AbortError",this.controller.abort(a)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const bw=new vw;function xw(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential!="undefined"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:t,user:a,excludeCredentials:n}=r,o=po(r,["challenge","user","excludeCredentials"]),u=rn(t).buffer,h=Object.assign(Object.assign({},a),{id:rn(a.id).buffer}),g=Object.assign(Object.assign({},o),{challenge:u,user:h});if(n&&n.length>0){g.excludeCredentials=new Array(n.length);for(let m=0;m<n.length;m++){const p=n[m];g.excludeCredentials[m]=Object.assign(Object.assign({},p),{id:rn(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return g}function ww(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential!="undefined"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:t,allowCredentials:a}=r,n=po(r,["challenge","allowCredentials"]),o=rn(t).buffer,u=Object.assign(Object.assign({},n),{challenge:o});if(a&&a.length>0){u.allowCredentials=new Array(a.length);for(let h=0;h<a.length;h++){const g=a[h];u.allowCredentials[h]=Object.assign(Object.assign({},g),{id:rn(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return u}function jw(r){var t;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const a=r;return{id:r.id,rawId:r.id,response:{attestationObject:sr(new Uint8Array(r.response.attestationObject)),clientDataJSON:sr(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(t=a.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Sw(r){var t;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const a=r,n=r.getClientExtensionResults(),o=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:sr(new Uint8Array(o.authenticatorData)),clientDataJSON:sr(new Uint8Array(o.clientDataJSON)),signature:sr(new Uint8Array(o.signature)),userHandle:o.userHandle?sr(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=a.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function qp(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function Qg(){var r,t;return!!(Ut()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator==null?void 0:navigator.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}function _w(r){return _(this,null,function*(){try{const t=yield navigator.credentials.create(r);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new oo("Browser returned unexpected credential type",t)}:{data:null,error:new oo("Empty credential response",t)}}catch(t){return{data:null,error:pw({error:t,options:r})}}})}function Nw(r){return _(this,null,function*(){try{const t=yield navigator.credentials.get(r);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new oo("Browser returned unexpected credential type",t)}:{data:null,error:new oo("Empty credential response",t)}}catch(t){return{data:null,error:yw({error:t,options:r})}}})}const Cw={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Ew={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function co(...r){const t=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),a=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),n={};for(const o of r)if(o)for(const u in o){const h=o[u];if(h!==void 0)if(Array.isArray(h))n[u]=h;else if(a(h))n[u]=h;else if(t(h)){const g=n[u];t(g)?n[u]=co(g,h):n[u]=co(h)}else n[u]=h}return n}function Tw(r,t){return co(Cw,r,t||{})}function Dw(r,t){return co(Ew,r,t||{})}class Ow{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}_enroll(t){return _(this,null,function*(){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))})}_challenge(h,g){return _(this,arguments,function*({factorId:t,webauthn:a,friendlyName:n,signal:o},u){try{const{data:m,error:p}=yield this.client.mfa.challenge({factorId:t,webauthn:a});if(!m)return{data:null,error:p};const y=o!=null?o:bw.createNewAbortSignal();if(m.webauthn.type==="create"){const{user:x}=m.webauthn.credential_options.publicKey;x.name||(x.name=`${x.id}:${n}`),x.displayName||(x.displayName=x.name)}switch(m.webauthn.type){case"create":{const x=Tw(m.webauthn.credential_options.publicKey,u==null?void 0:u.create),{data:v,error:j}=yield _w({publicKey:x,signal:y});return v?{data:{factorId:t,challengeId:m.id,webauthn:{type:m.webauthn.type,credential_response:v}},error:null}:{data:null,error:j}}case"request":{const x=Dw(m.webauthn.credential_options.publicKey,u==null?void 0:u.request),{data:v,error:j}=yield Nw(Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:x,signal:y}));return v?{data:{factorId:t,challengeId:m.id,webauthn:{type:m.webauthn.type,credential_response:v}},error:null}:{data:null,error:j}}}}catch(m){return be(m)?{data:null,error:m}:{data:null,error:new ar("Unexpected error in challenge",m)}}})}_verify(o){return _(this,arguments,function*({challengeId:t,factorId:a,webauthn:n}){return this.client.mfa.verify({factorId:a,challengeId:t,webauthn:n})})}_authenticate(h,g){return _(this,arguments,function*({factorId:t,webauthn:{rpId:a=typeof window!="undefined"?window.location.hostname:void 0,rpOrigins:n=typeof window!="undefined"?[window.location.origin]:void 0,signal:o}={}},u){if(!a)return{data:null,error:new Ti("rpId is required for WebAuthn authentication")};try{if(!Qg())return{data:null,error:new ar("Browser does not support WebAuthn",null)};const{data:m,error:p}=yield this.challenge({factorId:t,webauthn:{rpId:a,rpOrigins:n},signal:o},{request:u});if(!m)return{data:null,error:p};const{webauthn:y}=m;return this._verify({factorId:t,challengeId:m.challengeId,webauthn:{type:y.type,rpId:a,rpOrigins:n,credential_response:y.credential_response}})}catch(m){return be(m)?{data:null,error:m}:{data:null,error:new ar("Unexpected error in authenticate",m)}}})}_register(h,g){return _(this,arguments,function*({friendlyName:t,webauthn:{rpId:a=typeof window!="undefined"?window.location.hostname:void 0,rpOrigins:n=typeof window!="undefined"?[window.location.origin]:void 0,signal:o}={}},u){if(!a)return{data:null,error:new Ti("rpId is required for WebAuthn registration")};try{if(!Qg())return{data:null,error:new ar("Browser does not support WebAuthn",null)};const{data:m,error:p}=yield this._enroll({friendlyName:t});if(!m)return yield this.client.mfa.listFactors().then(v=>{var j;return(j=v.data)===null||j===void 0?void 0:j.all.find(E=>E.factor_type==="webauthn"&&E.friendly_name===t&&E.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v==null?void 0:v.id}):void 0),{data:null,error:p};const{data:y,error:x}=yield this._challenge({factorId:m.id,friendlyName:m.friendly_name,webauthn:{rpId:a,rpOrigins:n},signal:o},{create:u});return y?this._verify({factorId:m.id,challengeId:y.challengeId,webauthn:{rpId:a,rpOrigins:n,type:y.webauthn.type,credential_response:y.webauthn.credential_response}}):{data:null,error:x}}catch(m){return be(m)?{data:null,error:m}:{data:null,error:new ar("Unexpected error in register",m)}}})}}hw();const Aw={url:Cx,storageKey:Ex,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Tx,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};function Gg(r,t,a){return _(this,null,function*(){return yield a()})}const Wr={};class Di{get jwks(){var t,a;return(a=(t=Wr[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&a!==void 0?a:{keys:[]}}set jwks(t){Wr[this.storageKey]=Object.assign(Object.assign({},Wr[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,a;return(a=(t=Wr[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Wr[this.storageKey]=Object.assign(Object.assign({},Wr[this.storageKey]),{cachedAt:t})}constructor(t){var a,n,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const u=Object.assign(Object.assign({},Aw),t);if(this.storageKey=u.storageKey,this.instanceID=(a=Di.nextInstanceID[this.storageKey])!==null&&a!==void 0?a:0,Di.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.instanceID>0&&Ut()){const h=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(h),this.logDebugMessages&&console.trace(h)}if(this.persistSession=u.persistSession,this.autoRefreshToken=u.autoRefreshToken,this.admin=new cw({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=Rp(u.fetch),this.lock=u.lock||Gg,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,this.throwOnError=u.throwOnError,u.lock?this.lock=u.lock:this.persistSession&&Ut()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=dw:this.lock=Gg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Ow(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(u.storage?this.storage=u.storage:kp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Fg(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=Fg(this.memoryStorage)),Ut()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(h){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",h)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",h=>_(this,null,function*(){this._debug("received broadcast notification from other tab or client",h),yield this._notifyAllSubscribers(h.data.event,h.data.session,!1)}))}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Dp}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}initialize(){return _(this,null,function*(){return this.initializePromise?yield this.initializePromise:(this.initializePromise=_(this,null,function*(){return yield this._acquireLock(-1,()=>_(this,null,function*(){return yield this._initialize()}))}),yield this.initializePromise)})}_initialize(){return _(this,null,function*(){var t;try{let a={},n="none";if(Ut()&&(a=Hx(window.location.href),this._isImplicitGrantCallback(a)?n="implicit":(yield this._isPKCECallback(a))&&(n="pkce")),Ut()&&this.detectSessionInUrl&&n!=="none"){const{data:o,error:u}=yield this._getSessionFromURL(a,n);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),Mx(u)){const m=(t=u.details)===null||t===void 0?void 0:t.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:u}}return yield this._removeSession(),{error:u}}const{session:h,redirectType:g}=o;return this._debug("#_initialize()","detected session in URL",h,"redirect type",g),yield this._saveSession(h),setTimeout(()=>_(this,null,function*(){g==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",h):yield this._notifyAllSubscribers("SIGNED_IN",h)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(a){return be(a)?this._returnResult({error:a}):this._returnResult({error:new ar("Unexpected error during initialization",a)})}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signInAnonymously(t){return _(this,null,function*(){var a,n,o;try{const u=yield Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(o=t==null?void 0:t.options)===null||o===void 0?void 0:o.captchaToken}},xform:Sa}),{data:h,error:g}=u;if(g||!h)return this._returnResult({data:{user:null,session:null},error:g});const m=h.session,p=h.user;return h.session&&(yield this._saveSession(h.session),yield this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(u){if(be(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}})}signUp(t){return _(this,null,function*(){var a,n,o;try{let u;if("email"in t){const{email:y,password:x,options:v}=t;let j=null,E=null;this.flowType==="pkce"&&([j,E]=yield Qr(this.storage,this.storageKey)),u=yield Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:y,password:x,data:(a=v==null?void 0:v.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:j,code_challenge_method:E},xform:Sa})}else if("phone"in t){const{phone:y,password:x,options:v}=t;u=yield Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:x,data:(n=v==null?void 0:v.data)!==null&&n!==void 0?n:{},channel:(o=v==null?void 0:v.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:Sa})}else throw new Xl("You must provide either an email or phone number and a password");const{data:h,error:g}=u;if(g||!h)return yield Mt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:g});const m=h.session,p=h.user;return h.session&&(yield this._saveSession(h.session),yield this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(u){if(yield Mt(this.storage,`${this.storageKey}-code-verifier`),be(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}})}signInWithPassword(t){return _(this,null,function*(){try{let a;if("email"in t){const{email:u,password:h,options:g}=t;a=yield Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:h,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Yg})}else if("phone"in t){const{phone:u,password:h,options:g}=t;a=yield Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:h,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Yg})}else throw new Xl("You must provide either an email or phone number and a password");const{data:n,error:o}=a;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!n||!n.session||!n.user){const u=new Fr;return this._returnResult({data:{user:null,session:null},error:u})}return n.session&&(yield this._saveSession(n.session),yield this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:o})}catch(a){if(be(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}signInWithOAuth(t){return _(this,null,function*(){var a,n,o,u;return yield this._handleProviderSignIn(t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(u=t.options)===null||u===void 0?void 0:u.skipBrowserRedirect})})}exchangeCodeForSession(t){return _(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>_(this,null,function*(){return this._exchangeCodeForSession(t)}))})}signInWithWeb3(t){return _(this,null,function*(){const{chain:a}=t;switch(a){case"ethereum":return yield this.signInWithEthereum(t);case"solana":return yield this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${a}"`)}})}signInWithEthereum(t){return _(this,null,function*(){var a,n,o,u,h,g,m,p,y,x,v;let j,E;if("message"in t)j=t.message,E=t.signature;else{const{chain:D,wallet:O,statement:H,options:U}=t;let q;if(Ut())if(typeof O=="object")q=O;else{const C=window;if("ethereum"in C&&typeof C.ethereum=="object"&&"request"in C.ethereum&&typeof C.ethereum.request=="function")q=C.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof O!="object"||!(U!=null&&U.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");q=O}const ee=new URL((a=U==null?void 0:U.url)!==null&&a!==void 0?a:window.location.href),ae=yield q.request({method:"eth_requestAccounts"}).then(C=>C).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!ae||ae.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Y=Up(ae[0]);let re=(n=U==null?void 0:U.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!re){const C=yield q.request({method:"eth_chainId"});re=fw(C)}const T={domain:ee.host,address:Y,statement:H,uri:ee.href,version:"1",chainId:re,nonce:(o=U==null?void 0:U.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(h=(u=U==null?void 0:U.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(g=U==null?void 0:U.signInWithEthereum)===null||g===void 0?void 0:g.expirationTime,notBefore:(m=U==null?void 0:U.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(p=U==null?void 0:U.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(y=U==null?void 0:U.signInWithEthereum)===null||y===void 0?void 0:y.resources};j=gw(T),E=yield q.request({method:"personal_sign",params:[mw(j),Y]})}try{const{data:D,error:O}=yield Ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:j,signature:E},!((x=t.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Sa});if(O)throw O;if(!D||!D.session||!D.user){const H=new Fr;return this._returnResult({data:{user:null,session:null},error:H})}return D.session&&(yield this._saveSession(D.session),yield this._notifyAllSubscribers("SIGNED_IN",D.session)),this._returnResult({data:Object.assign({},D),error:O})}catch(D){if(be(D))return this._returnResult({data:{user:null,session:null},error:D});throw D}})}signInWithSolana(t){return _(this,null,function*(){var a,n,o,u,h,g,m,p,y,x,v,j;let E,D;if("message"in t)E=t.message,D=t.signature;else{const{chain:O,wallet:H,statement:U,options:q}=t;let ee;if(Ut())if(typeof H=="object")ee=H;else{const Y=window;if("solana"in Y&&typeof Y.solana=="object"&&("signIn"in Y.solana&&typeof Y.solana.signIn=="function"||"signMessage"in Y.solana&&typeof Y.solana.signMessage=="function"))ee=Y.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof H!="object"||!(q!=null&&q.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");ee=H}const ae=new URL((a=q==null?void 0:q.url)!==null&&a!==void 0?a:window.location.href);if("signIn"in ee&&ee.signIn){const Y=yield ee.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},q==null?void 0:q.signInWithSolana),{version:"1",domain:ae.host,uri:ae.href}),U?{statement:U}:null));let re;if(Array.isArray(Y)&&Y[0]&&typeof Y[0]=="object")re=Y[0];else if(Y&&typeof Y=="object"&&"signedMessage"in Y&&"signature"in Y)re=Y;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in re&&"signature"in re&&(typeof re.signedMessage=="string"||re.signedMessage instanceof Uint8Array)&&re.signature instanceof Uint8Array)E=typeof re.signedMessage=="string"?re.signedMessage:new TextDecoder().decode(re.signedMessage),D=re.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in ee)||typeof ee.signMessage!="function"||!("publicKey"in ee)||typeof ee!="object"||!ee.publicKey||!("toBase58"in ee.publicKey)||typeof ee.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");E=[`${ae.host} wants you to sign in with your Solana account:`,ee.publicKey.toBase58(),...U?["",U,""]:[""],"Version: 1",`URI: ${ae.href}`,`Issued At: ${(o=(n=q==null?void 0:q.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((u=q==null?void 0:q.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${q.signInWithSolana.notBefore}`]:[],...!((h=q==null?void 0:q.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${q.signInWithSolana.expirationTime}`]:[],...!((g=q==null?void 0:q.signInWithSolana)===null||g===void 0)&&g.chainId?[`Chain ID: ${q.signInWithSolana.chainId}`]:[],...!((m=q==null?void 0:q.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${q.signInWithSolana.nonce}`]:[],...!((p=q==null?void 0:q.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${q.signInWithSolana.requestId}`]:[],...!((x=(y=q==null?void 0:q.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||x===void 0)&&x.length?["Resources",...q.signInWithSolana.resources.map(re=>`- ${re}`)]:[]].join(`
`);const Y=yield ee.signMessage(new TextEncoder().encode(E),"utf8");if(!Y||!(Y instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");D=Y}}try{const{data:O,error:H}=yield Ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:E,signature:sr(D)},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(j=t.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:Sa});if(H)throw H;if(!O||!O.session||!O.user){const U=new Fr;return this._returnResult({data:{user:null,session:null},error:U})}return O.session&&(yield this._saveSession(O.session),yield this._notifyAllSubscribers("SIGNED_IN",O.session)),this._returnResult({data:Object.assign({},O),error:H})}catch(O){if(be(O))return this._returnResult({data:{user:null,session:null},error:O});throw O}})}_exchangeCodeForSession(t){return _(this,null,function*(){const a=yield Js(this.storage,`${this.storageKey}-code-verifier`),[n,o]=(a!=null?a:"").split("/");try{if(!n&&this.flowType==="pkce")throw new Ux;const{data:u,error:h}=yield Ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Sa});if(yield Mt(this.storage,`${this.storageKey}-code-verifier`),h)throw h;if(!u||!u.session||!u.user){const g=new Fr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:g})}return u.session&&(yield this._saveSession(u.session),yield this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:Object.assign(Object.assign({},u),{redirectType:o!=null?o:null}),error:h})}catch(u){if(yield Mt(this.storage,`${this.storageKey}-code-verifier`),be(u))return this._returnResult({data:{user:null,session:null,redirectType:null},error:u});throw u}})}signInWithIdToken(t){return _(this,null,function*(){try{const{options:a,provider:n,token:o,access_token:u,nonce:h}=t,g=yield Ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:o,access_token:u,nonce:h,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Sa}),{data:m,error:p}=g;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!m||!m.session||!m.user){const y=new Fr;return this._returnResult({data:{user:null,session:null},error:y})}return m.session&&(yield this._saveSession(m.session),yield this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:p})}catch(a){if(be(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}signInWithOtp(t){return _(this,null,function*(){var a,n,o,u,h;try{if("email"in t){const{email:g,options:m}=t;let p=null,y=null;this.flowType==="pkce"&&([p,y]=yield Qr(this.storage,this.storageKey));const{error:x}=yield Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:g,data:(a=m==null?void 0:m.data)!==null&&a!==void 0?a:{},create_user:(n=m==null?void 0:m.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:y},redirectTo:m==null?void 0:m.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:x})}if("phone"in t){const{phone:g,options:m}=t,{data:p,error:y}=yield Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:g,data:(o=m==null?void 0:m.data)!==null&&o!==void 0?o:{},create_user:(u=m==null?void 0:m.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},channel:(h=m==null?void 0:m.channel)!==null&&h!==void 0?h:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:y})}throw new Xl("You must provide either an email or phone number.")}catch(g){if(yield Mt(this.storage,`${this.storageKey}-code-verifier`),be(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}})}verifyOtp(t){return _(this,null,function*(){var a,n;try{let o,u;"options"in t&&(o=(a=t.options)===null||a===void 0?void 0:a.redirectTo,u=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:h,error:g}=yield Ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:u}}),redirectTo:o,xform:Sa});if(g)throw g;if(!h)throw new Error("An error occurred on token verification.");const m=h.session,p=h.user;return m!=null&&m.access_token&&(yield this._saveSession(m),yield this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(o){if(be(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}signInWithSSO(t){return _(this,null,function*(){var a,n,o,u,h;try{let g=null,m=null;this.flowType==="pkce"&&([g,m]=yield Qr(this.storage,this.storageKey));const p=yield Ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(a=t.options)===null||a===void 0?void 0:a.redirectTo)!==null&&n!==void 0?n:void 0}),!((o=t==null?void 0:t.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:g,code_challenge_method:m}),headers:this.headers,xform:iw});return!((u=p.data)===null||u===void 0)&&u.url&&Ut()&&!(!((h=t.options)===null||h===void 0)&&h.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(g){if(yield Mt(this.storage,`${this.storageKey}-code-verifier`),be(g))return this._returnResult({data:null,error:g});throw g}})}reauthenticate(){return _(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>_(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return _(this,null,function*(){try{return yield this._useSession(t=>_(this,null,function*(){const{data:{session:a},error:n}=t;if(n)throw n;if(!a)throw new ra;const{error:o}=yield Ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:a.access_token});return this._returnResult({data:{user:null,session:null},error:o})}))}catch(t){if(be(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}})}resend(t){return _(this,null,function*(){try{const a=`${this.url}/resend`;if("email"in t){const{email:n,type:o,options:u}=t,{error:h}=yield Ce(this.fetch,"POST",a,{headers:this.headers,body:{email:n,type:o,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},redirectTo:u==null?void 0:u.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}else if("phone"in t){const{phone:n,type:o,options:u}=t,{data:h,error:g}=yield Ce(this.fetch,"POST",a,{headers:this.headers,body:{phone:n,type:o,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:g})}throw new Xl("You must provide either an email or phone number and a type")}catch(a){if(be(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}getSession(){return _(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>_(this,null,function*(){return this._useSession(a=>_(this,null,function*(){return a}))}))})}_acquireLock(t,a){return _(this,null,function*(){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=_(this,null,function*(){return yield n,yield a()});return this.pendingInLock.push(_(this,null,function*(){try{yield o}catch(u){}})),o}return yield this.lock(`lock:${this.storageKey}`,t,()=>_(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=a();for(this.pendingInLock.push(_(this,null,function*(){try{yield n}catch(o){}})),yield n;this.pendingInLock.length;){const o=[...this.pendingInLock];yield Promise.all(o),this.pendingInLock.splice(0,o.length)}return yield n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(t){return _(this,null,function*(){this._debug("#_useSession","begin");try{const a=yield this.__loadSession();return yield t(a)}finally{this._debug("#_useSession","end")}})}__loadSession(){return _(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const a=yield Js(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",a),a!==null&&(this._isValidSession(a)?t=a:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Iu:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const h=yield Js(this.userStorage,this.storageKey+"-user");h!=null&&h.user?t.user=h.user:t.user=Vu()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const h={value:this.suppressGetSessionWarning};t.user=aw(t.user,h),h.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:o,error:u}=yield this._callRefreshToken(t.refresh_token);return u?this._returnResult({data:{session:null},error:u}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}})}getUser(t){return _(this,null,function*(){if(t)return yield this._getUser(t);yield this.initializePromise;const a=yield this._acquireLock(-1,()=>_(this,null,function*(){return yield this._getUser()}));return a.data.user&&(this.suppressGetSessionWarning=!0),a})}_getUser(t){return _(this,null,function*(){try{return t?yield Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ds}):yield this._useSession(a=>_(this,null,function*(){var n,o,u;const{data:h,error:g}=a;if(g)throw g;return!(!((n=h.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ra}:yield Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(o=h.session)===null||o===void 0?void 0:o.access_token)!==null&&u!==void 0?u:void 0,xform:Ds})}))}catch(a){if(be(a))return Rx(a)&&(yield this._removeSession(),yield Mt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:a});throw a}})}updateUser(n){return _(this,arguments,function*(t,a={}){return yield this.initializePromise,yield this._acquireLock(-1,()=>_(this,null,function*(){return yield this._updateUser(t,a)}))})}_updateUser(n){return _(this,arguments,function*(t,a={}){try{return yield this._useSession(o=>_(this,null,function*(){const{data:u,error:h}=o;if(h)throw h;if(!u.session)throw new ra;const g=u.session;let m=null,p=null;this.flowType==="pkce"&&t.email!=null&&([m,p]=yield Qr(this.storage,this.storageKey));const{data:y,error:x}=yield Ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:a==null?void 0:a.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:m,code_challenge_method:p}),jwt:g.access_token,xform:Ds});if(x)throw x;return g.user=y.user,yield this._saveSession(g),yield this._notifyAllSubscribers("USER_UPDATED",g),this._returnResult({data:{user:g.user},error:null})}))}catch(o){if(yield Mt(this.storage,`${this.storageKey}-code-verifier`),be(o))return this._returnResult({data:{user:null},error:o});throw o}})}setSession(t){return _(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>_(this,null,function*(){return yield this._setSession(t)}))})}_setSession(t){return _(this,null,function*(){try{if(!t.access_token||!t.refresh_token)throw new ra;const a=Date.now()/1e3;let n=a,o=!0,u=null;const{payload:h}=Yu(t.access_token);if(h.exp&&(n=h.exp,o=n<=a),o){const{data:g,error:m}=yield this._callRefreshToken(t.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!g)return{data:{user:null,session:null},error:null};u=g}else{const{data:g,error:m}=yield this._getUser(t.access_token);if(m)throw m;u={access_token:t.access_token,refresh_token:t.refresh_token,user:g.user,token_type:"bearer",expires_in:n-a,expires_at:n},yield this._saveSession(u),yield this._notifyAllSubscribers("SIGNED_IN",u)}return this._returnResult({data:{user:u.user,session:u},error:null})}catch(a){if(be(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}})}refreshSession(t){return _(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>_(this,null,function*(){return yield this._refreshSession(t)}))})}_refreshSession(t){return _(this,null,function*(){try{return yield this._useSession(a=>_(this,null,function*(){var n;if(!t){const{data:h,error:g}=a;if(g)throw g;t=(n=h.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new ra;const{data:o,error:u}=yield this._callRefreshToken(t.refresh_token);return u?this._returnResult({data:{user:null,session:null},error:u}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})}))}catch(a){if(be(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}_getSessionFromURL(t,a){return _(this,null,function*(){try{if(!Ut())throw new Jl("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Jl(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(a){case"implicit":if(this.flowType==="pkce")throw new Lg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Jl("Not a valid implicit grant flow url.");break;default:}if(a==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Lg("No code detected.");const{data:U,error:q}=yield this._exchangeCodeForSession(t.code);if(q)throw q;const ee=new URL(window.location.href);return ee.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ee.toString()),{data:{session:U.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:o,access_token:u,refresh_token:h,expires_in:g,expires_at:m,token_type:p}=t;if(!u||!g||!h||!p)throw new Jl("No session defined in URL");const y=Math.round(Date.now()/1e3),x=parseInt(g);let v=y+x;m&&(v=parseInt(m));const j=v-y;j*1e3<=en&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${j}s, should have been closer to ${x}s`);const E=v-x;y-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,v,y):y-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,v,y);const{data:D,error:O}=yield this._getUser(u);if(O)throw O;const H={provider_token:n,provider_refresh_token:o,access_token:u,expires_in:x,expires_at:v,refresh_token:h,token_type:p,user:D.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:H,redirectType:t.type},error:null})}catch(n){if(be(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}})}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}_isPKCECallback(t){return _(this,null,function*(){const a=yield Js(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&a)})}signOut(){return _(this,arguments,function*(t={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(-1,()=>_(this,null,function*(){return yield this._signOut(t)}))})}_signOut(){return _(this,arguments,function*({scope:t}={scope:"global"}){return yield this._useSession(a=>_(this,null,function*(){var n;const{data:o,error:u}=a;if(u)return this._returnResult({error:u});const h=(n=o.session)===null||n===void 0?void 0:n.access_token;if(h){const{error:g}=yield this.admin.signOut(h,t);if(g&&!(kx(g)&&(g.status===404||g.status===401||g.status===403)))return this._returnResult({error:g})}return t!=="others"&&(yield this._removeSession(),yield Mt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})}))})}onAuthStateChange(t){const a=Ix(),n={id:a,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",a),this.stateChangeEmitters.delete(a)}};return this._debug("#onAuthStateChange()","registered callback with id",a),this.stateChangeEmitters.set(a,n),_(this,null,function*(){yield this.initializePromise,yield this._acquireLock(-1,()=>_(this,null,function*(){this._emitInitialSession(a)}))}),{data:{subscription:n}}}_emitInitialSession(t){return _(this,null,function*(){return yield this._useSession(a=>_(this,null,function*(){var n,o;try{const{data:{session:u},error:h}=a;if(h)throw h;yield(n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",u),this._debug("INITIAL_SESSION","callback id",t,"session",u)}catch(u){yield(o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",t,"error",u),console.error(u)}}))})}resetPasswordForEmail(n){return _(this,arguments,function*(t,a={}){let o=null,u=null;this.flowType==="pkce"&&([o,u]=yield Qr(this.storage,this.storageKey,!0));try{return yield Ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:o,code_challenge_method:u,gotrue_meta_security:{captcha_token:a.captchaToken}},headers:this.headers,redirectTo:a.redirectTo})}catch(h){if(yield Mt(this.storage,`${this.storageKey}-code-verifier`),be(h))return this._returnResult({data:null,error:h});throw h}})}getUserIdentities(){return _(this,null,function*(){var t;try{const{data:a,error:n}=yield this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=a.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(a){if(be(a))return this._returnResult({data:null,error:a});throw a}})}linkIdentity(t){return _(this,null,function*(){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)})}linkIdentityOAuth(t){return _(this,null,function*(){var a;try{const{data:n,error:o}=yield this._useSession(u=>_(this,null,function*(){var h,g,m,p,y;const{data:x,error:v}=u;if(v)throw v;const j=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(h=t.options)===null||h===void 0?void 0:h.redirectTo,scopes:(g=t.options)===null||g===void 0?void 0:g.scopes,queryParams:(m=t.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return yield Ce(this.fetch,"GET",j,{headers:this.headers,jwt:(y=(p=x.session)===null||p===void 0?void 0:p.access_token)!==null&&y!==void 0?y:void 0})}));if(o)throw o;return Ut()&&!(!((a=t.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(be(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}})}linkIdentityIdToken(t){return _(this,null,function*(){return yield this._useSession(a=>_(this,null,function*(){var n;try{const{error:o,data:{session:u}}=a;if(o)throw o;const{options:h,provider:g,token:m,access_token:p,nonce:y}=t,x=yield Ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=u==null?void 0:u.access_token)!==null&&n!==void 0?n:void 0,body:{provider:g,id_token:m,access_token:p,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Sa}),{data:v,error:j}=x;return j?this._returnResult({data:{user:null,session:null},error:j}):!v||!v.session||!v.user?this._returnResult({data:{user:null,session:null},error:new Fr}):(v.session&&(yield this._saveSession(v.session),yield this._notifyAllSubscribers("USER_UPDATED",v.session)),this._returnResult({data:v,error:j}))}catch(o){if(yield Mt(this.storage,`${this.storageKey}-code-verifier`),be(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}))})}unlinkIdentity(t){return _(this,null,function*(){try{return yield this._useSession(a=>_(this,null,function*(){var n,o;const{data:u,error:h}=a;if(h)throw h;return yield Ce(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(o=(n=u.session)===null||n===void 0?void 0:n.access_token)!==null&&o!==void 0?o:void 0})}))}catch(a){if(be(a))return this._returnResult({data:null,error:a});throw a}})}_refreshAccessToken(t){return _(this,null,function*(){const a=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{const n=Date.now();return yield Fx(o=>_(this,null,function*(){return o>0&&(yield Vx(200*Math.pow(2,o-1))),this._debug(a,"refreshing attempt",o),yield Ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Sa})}),(o,u)=>{const h=200*Math.pow(2,o);return u&&Hu(u)&&Date.now()+h-n<en})}catch(n){if(this._debug(a,"error",n),be(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(a,"end")}})}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}_handleProviderSignIn(t,a){return _(this,null,function*(){const n=yield this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",a,"url",n),Ut()&&!a.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}})}_recoverAndRefresh(){return _(this,null,function*(){var t,a;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const o=yield Js(this.storage,this.storageKey);if(o&&this.userStorage){let h=yield Js(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:o.user},yield tn(this.userStorage,this.storageKey+"-user",h)),o.user=(t=h==null?void 0:h.user)!==null&&t!==void 0?t:Vu()}else if(o&&!o.user&&!o.user){const h=yield Js(this.storage,this.storageKey+"-user");h&&(h!=null&&h.user)?(o.user=h.user,yield Mt(this.storage,this.storageKey+"-user"),yield tn(this.storage,this.storageKey,o)):o.user=Vu()}if(this._debug(n,"session from storage",o),!this._isValidSession(o)){this._debug(n,"session is not valid"),o!==null&&(yield this._removeSession());return}const u=((a=o.expires_at)!==null&&a!==void 0?a:1/0)*1e3-Date.now()<Iu;if(this._debug(n,`session has${u?"":" not"} expired with margin of ${Iu}s`),u){if(this.autoRefreshToken&&o.refresh_token){const{error:h}=yield this._callRefreshToken(o.refresh_token);h&&(console.error(h),Hu(h)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",h),yield this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:g}=yield this._getUser(o.access_token);!g&&(h!=null&&h.user)?(o.user=h.user,yield this._saveSession(o),yield this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(n,"error getting user data, skipping SIGNED_IN notification",h)}else yield this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(n,"error",o),console.error(o);return}finally{this._debug(n,"end")}})}_callRefreshToken(t){return _(this,null,function*(){var a,n;if(!t)throw new ra;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new vo;const{data:u,error:h}=yield this._refreshAccessToken(t);if(h)throw h;if(!u.session)throw new ra;yield this._saveSession(u.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const g={data:u.session,error:null};return this.refreshingDeferred.resolve(g),g}catch(u){if(this._debug(o,"error",u),be(u)){const h={data:null,error:u};return Hu(u)||(yield this._removeSession()),(a=this.refreshingDeferred)===null||a===void 0||a.resolve(h),h}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(u),u}finally{this.refreshingDeferred=null,this._debug(o,"end")}})}_notifyAllSubscribers(t,a,n=!0){return _(this,null,function*(){const o=`#_notifyAllSubscribers(${t})`;this._debug(o,"begin",a,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:a});const u=[],h=Array.from(this.stateChangeEmitters.values()).map(g=>_(this,null,function*(){try{yield g.callback(t,a)}catch(m){u.push(m)}}));if(yield Promise.all(h),u.length>0){for(let g=0;g<u.length;g+=1)console.error(u[g]);throw u[0]}}finally{this._debug(o,"end")}})}_saveSession(t){return _(this,null,function*(){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,yield Mt(this.storage,`${this.storageKey}-code-verifier`);const a=Object.assign({},t),n=a.user&&a.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&a.user&&(yield tn(this.userStorage,this.storageKey+"-user",{user:a.user}));const o=Object.assign({},a);delete o.user;const u=Ig(o);yield tn(this.storage,this.storageKey,u)}else{const o=Ig(a);yield tn(this.storage,this.storageKey,o)}})}_removeSession(){return _(this,null,function*(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,yield Mt(this.storage,this.storageKey),yield Mt(this.storage,this.storageKey+"-code-verifier"),yield Mt(this.storage,this.storageKey+"-user"),this.userStorage&&(yield Mt(this.userStorage,this.storageKey+"-user")),yield this._notifyAllSubscribers("SIGNED_OUT",null)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ut()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(a){console.error("removing visibilitychange callback failed",a)}}_startAutoRefresh(){return _(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),en);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno!="undefined"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(()=>_(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0)})}_stopAutoRefresh(){return _(this,null,function*(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)})}startAutoRefresh(){return _(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return _(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return _(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>_(this,null,function*(){try{const t=Date.now();try{return yield this._useSession(a=>_(this,null,function*(){const{data:{session:n}}=a;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((n.expires_at*1e3-t)/en);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${en}ms, refresh threshold is ${ld} ticks`),o<=ld&&(yield this._callRefreshToken(n.refresh_token))}))}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(t){if(t.isAcquireTimeout||t instanceof Mp)this._debug("auto refresh token tick lock not available");else throw t}})}_handleVisibilityChange(){return _(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!Ut()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>_(this,null,function*(){return yield this._onVisibilityChanged(!1)}),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}})}_onVisibilityChanged(t){return _(this,null,function*(){const a=`#_onVisibilityChanged(${t})`;this._debug(a,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(yield this.initializePromise,yield this._acquireLock(-1,()=>_(this,null,function*(){if(document.visibilityState!=="visible"){this._debug(a,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}yield this._recoverAndRefresh()})))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(t,a,n){return _(this,null,function*(){const o=[`provider=${encodeURIComponent(a)}`];if(n!=null&&n.redirectTo&&o.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&o.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[u,h]=yield Qr(this.storage,this.storageKey),g=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(h)}`});o.push(g.toString())}if(n!=null&&n.queryParams){const u=new URLSearchParams(n.queryParams);o.push(u.toString())}return n!=null&&n.skipBrowserRedirect&&o.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${o.join("&")}`})}_unenroll(t){return _(this,null,function*(){try{return yield this._useSession(a=>_(this,null,function*(){var n;const{data:o,error:u}=a;return u?this._returnResult({data:null,error:u}):yield Ce(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token})}))}catch(a){if(be(a))return this._returnResult({data:null,error:a});throw a}})}_enroll(t){return _(this,null,function*(){try{return yield this._useSession(a=>_(this,null,function*(){var n,o;const{data:u,error:h}=a;if(h)return this._returnResult({data:null,error:h});const g=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:m,error:p}=yield Ce(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:(n=u==null?void 0:u.session)===null||n===void 0?void 0:n.access_token});return p?this._returnResult({data:null,error:p}):(t.factorType==="totp"&&m.type==="totp"&&(!((o=m==null?void 0:m.totp)===null||o===void 0)&&o.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))}))}catch(a){if(be(a))return this._returnResult({data:null,error:a});throw a}})}_verify(t){return _(this,null,function*(){return this._acquireLock(-1,()=>_(this,null,function*(){try{return yield this._useSession(a=>_(this,null,function*(){var n;const{data:o,error:u}=a;if(u)return this._returnResult({data:null,error:u});const h=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?jw(t.webauthn.credential_response):Sw(t.webauthn.credential_response)})}:{code:t.code}),{data:g,error:m}=yield Ce(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:h,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return m?this._returnResult({data:null,error:m}):(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+g.expires_in},g)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",g),this._returnResult({data:g,error:m}))}))}catch(a){if(be(a))return this._returnResult({data:null,error:a});throw a}}))})}_challenge(t){return _(this,null,function*(){return this._acquireLock(-1,()=>_(this,null,function*(){try{return yield this._useSession(a=>_(this,null,function*(){var n;const{data:o,error:u}=a;if(u)return this._returnResult({data:null,error:u});const h=yield Ce(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});if(h.error)return h;const{data:g}=h;if(g.type!=="webauthn")return{data:g,error:null};switch(g.webauthn.type){case"create":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:xw(g.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:ww(g.webauthn.credential_options.publicKey)})})}),error:null}}}))}catch(a){if(be(a))return this._returnResult({data:null,error:a});throw a}}))})}_challengeAndVerify(t){return _(this,null,function*(){const{data:a,error:n}=yield this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):yield this._verify({factorId:t.factorId,challengeId:a.id,code:t.code})})}_listFactors(){return _(this,null,function*(){var t;const{data:{user:a},error:n}=yield this.getUser();if(n)return{data:null,error:n};const o={all:[],phone:[],totp:[],webauthn:[]};for(const u of(t=a==null?void 0:a.factors)!==null&&t!==void 0?t:[])o.all.push(u),u.status==="verified"&&o[u.factor_type].push(u);return{data:o,error:null}})}_getAuthenticatorAssuranceLevel(){return _(this,null,function*(){var t,a;const{data:{session:n},error:o}=yield this.getSession();if(o)return this._returnResult({data:null,error:o});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=Yu(n.access_token);let h=null;u.aal&&(h=u.aal);let g=h;((a=(t=n.user.factors)===null||t===void 0?void 0:t.filter(y=>y.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(g="aal2");const p=u.amr||[];return{data:{currentLevel:h,nextLevel:g,currentAuthenticationMethods:p},error:null}})}_getAuthorizationDetails(t){return _(this,null,function*(){try{return yield this._useSession(a=>_(this,null,function*(){const{data:{session:n},error:o}=a;return o?this._returnResult({data:null,error:o}):n?yield Ce(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new ra})}))}catch(a){if(be(a))return this._returnResult({data:null,error:a});throw a}})}_approveAuthorization(t,a){return _(this,null,function*(){try{return yield this._useSession(n=>_(this,null,function*(){const{data:{session:o},error:u}=n;if(u)return this._returnResult({data:null,error:u});if(!o)return this._returnResult({data:null,error:new ra});const h=yield Ce(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:g=>({data:g,error:null})});return h.data&&h.data.redirect_url&&Ut()&&!(a!=null&&a.skipBrowserRedirect)&&window.location.assign(h.data.redirect_url),h}))}catch(n){if(be(n))return this._returnResult({data:null,error:n});throw n}})}_denyAuthorization(t,a){return _(this,null,function*(){try{return yield this._useSession(n=>_(this,null,function*(){const{data:{session:o},error:u}=n;if(u)return this._returnResult({data:null,error:u});if(!o)return this._returnResult({data:null,error:new ra});const h=yield Ce(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:g=>({data:g,error:null})});return h.data&&h.data.redirect_url&&Ut()&&!(a!=null&&a.skipBrowserRedirect)&&window.location.assign(h.data.redirect_url),h}))}catch(n){if(be(n))return this._returnResult({data:null,error:n});throw n}})}_listOAuthGrants(){return _(this,null,function*(){try{return yield this._useSession(t=>_(this,null,function*(){const{data:{session:a},error:n}=t;return n?this._returnResult({data:null,error:n}):a?yield Ce(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:a.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new ra})}))}catch(t){if(be(t))return this._returnResult({data:null,error:t});throw t}})}_revokeOAuthGrant(t){return _(this,null,function*(){try{return yield this._useSession(a=>_(this,null,function*(){const{data:{session:n},error:o}=a;return o?this._returnResult({data:null,error:o}):n?(yield Ce(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new ra})}))}catch(a){if(be(a))return this._returnResult({data:null,error:a});throw a}})}fetchJwk(n){return _(this,arguments,function*(t,a={keys:[]}){let o=a.keys.find(m=>m.kid===t);if(o)return o;const u=Date.now();if(o=this.jwks.keys.find(m=>m.kid===t),o&&this.jwks_cached_at+Ox>u)return o;const{data:h,error:g}=yield Ce(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(g)throw g;return!h.keys||h.keys.length===0||(this.jwks=h,this.jwks_cached_at=u,o=h.keys.find(m=>m.kid===t),!o)?null:o})}getClaims(n){return _(this,arguments,function*(t,a={}){try{let o=t;if(!o){const{data:E,error:D}=yield this.getSession();if(D||!E.session)return this._returnResult({data:null,error:D});o=E.session.access_token}const{header:u,payload:h,signature:g,raw:{header:m,payload:p}}=Yu(o);a!=null&&a.allowExpired||Zx(h.exp);const y=!u.alg||u.alg.startsWith("HS")||!u.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:yield this.fetchJwk(u.kid,a!=null&&a.keys?{keys:a.keys}:a==null?void 0:a.jwks);if(!y){const{error:E}=yield this.getUser(o);if(E)throw E;return{data:{claims:h,header:u,signature:g},error:null}}const x=ew(u.alg),v=yield crypto.subtle.importKey("jwk",y,x,!0,["verify"]);if(!(yield crypto.subtle.verify(x,v,g,Bx(`${m}.${p}`))))throw new ud("Invalid JWT signature");return{data:{claims:h,header:u,signature:g},error:null}}catch(o){if(be(o))return this._returnResult({data:null,error:o});throw o}})}}Di.nextInstanceID={};const kw=Di,Rw="2.89.0";let yi="";typeof Deno!="undefined"?yi="deno":typeof document!="undefined"?yi="web":typeof navigator!="undefined"&&navigator.product==="ReactNative"?yi="react-native":yi="node";const Mw={"X-Client-Info":`supabase-js-${yi}/${Rw}`},Uw={headers:Mw},qw={schema:"public"},Lw={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},zw={};function Oi(r){"@babel/helpers - typeof";return Oi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oi(r)}function $w(r,t){if(Oi(r)!="object"||!r)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var n=a.call(r,t);if(Oi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function Bw(r){var t=$w(r,"string");return Oi(t)=="symbol"?t:t+""}function Pw(r,t,a){return(t=Bw(t))in r?Object.defineProperty(r,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[t]=a,r}function Kg(r,t){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),a.push.apply(a,n)}return a}function ct(r){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Kg(Object(a),!0).forEach(function(n){Pw(r,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):Kg(Object(a)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(a,n))})}return r}const Iw=r=>r?(...t)=>r(...t):(...t)=>fetch(...t),Hw=()=>Headers,Yw=(r,t,a)=>{const n=Iw(a),o=Hw();return(u,h)=>_(null,null,function*(){var g;const m=(g=yield t())!==null&&g!==void 0?g:r;let p=new o(h==null?void 0:h.headers);return p.has("apikey")||p.set("apikey",r),p.has("Authorization")||p.set("Authorization",`Bearer ${m}`),n(u,ct(ct({},h),{},{headers:p}))})};function Vw(r){return r.endsWith("/")?r:r+"/"}function Fw(r,t){var a,n;const{db:o,auth:u,realtime:h,global:g}=r,{db:m,auth:p,realtime:y,global:x}=t,v={db:ct(ct({},m),o),auth:ct(ct({},p),u),realtime:ct(ct({},y),h),storage:{},global:ct(ct(ct({},x),g),{},{headers:ct(ct({},(a=x==null?void 0:x.headers)!==null&&a!==void 0?a:{}),(n=g==null?void 0:g.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>_(null,null,function*(){return""})};return r.accessToken?v.accessToken=r.accessToken:delete v.accessToken,v}function Qw(r){const t=r==null?void 0:r.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Vw(t))}catch(a){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Gw=class extends kw{constructor(r){super(r)}},Kw=class{constructor(r,t,a){var n,o;this.supabaseUrl=r,this.supabaseKey=t;const u=Qw(r);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const h=`sb-${u.hostname.split(".")[0]}-auth-token`,g={db:qw,realtime:zw,auth:ct(ct({},Lw),{},{storageKey:h}),global:Uw},m=Fw(a!=null?a:{},g);if(this.storageKey=(n=m.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(o=m.global.headers)!==null&&o!==void 0?o:{},m.accessToken)this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(y,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}});else{var p;this.auth=this._initSupabaseAuthClient((p=m.auth)!==null&&p!==void 0?p:{},this.headers,m.global.fetch)}this.fetch=Yw(t,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(ct({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.accessToken&&this.accessToken().then(y=>this.realtime.setAuth(y)).catch(y=>console.warn("Failed to set initial Realtime auth token:",y)),this.rest=new Tb(new URL("rest/v1",u).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new Nx(this.storageUrl.href,this.headers,this.fetch,a==null?void 0:a.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new Sb(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(r){return this.rest.from(r)}schema(r){return this.rest.schema(r)}rpc(r,t={},a={head:!1,get:!1,count:void 0}){return this.rest.rpc(r,t,a)}channel(r,t={config:{}}){return this.realtime.channel(r,t)}getChannels(){return this.realtime.getChannels()}removeChannel(r){return this.realtime.removeChannel(r)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return _(this,null,function*(){var r=this,t,a;if(r.accessToken)return yield r.accessToken();const{data:n}=yield r.auth.getSession();return(t=(a=n.session)===null||a===void 0?void 0:a.access_token)!==null&&t!==void 0?t:r.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:r,persistSession:t,detectSessionInUrl:a,storage:n,userStorage:o,storageKey:u,flowType:h,lock:g,debug:m,throwOnError:p},y,x){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Gw({url:this.authUrl.href,headers:ct(ct({},v),y),storageKey:u,autoRefreshToken:r,persistSession:t,detectSessionInUrl:a,storage:n,userStorage:o,flowType:h,lock:g,debug:m,throwOnError:p,fetch:x,hasCustomAuthorizationHeader:Object.keys(this.headers).some(j=>j.toLowerCase()==="authorization")})}_initRealtimeClient(r){return new Vb(this.realtimeUrl.href,ct(ct({},r),{},{params:ct(ct({},{apikey:this.supabaseKey}),r==null?void 0:r.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,t)=>{this._handleTokenChanged(r,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(r,t,a){(r==="TOKEN_REFRESHED"||r==="SIGNED_IN")&&this.changedAccessToken!==a?(this.changedAccessToken=a,this.realtime.setAuth(a)):r==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Ww=(r,t,a)=>new Kw(r,t,a);function Xw(){if(typeof window!="undefined"||typeof process=="undefined")return!1;const r=process.version;if(r==null)return!1;const t=r.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Xw()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Jw="https://tirzmotuypesxopnnitt.supabase.co",Zw="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRpcnptb3R1eXBlc3hvcG5uaXR0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYzOTAyMjEsImV4cCI6MjA3MTk2NjIyMX0.YQaXWOWEFoiAJU412gA4MOXfm10E6XPJJb75FMh_H0k",ba=Ww(Jw,Zw,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storage:window.localStorage,storageKey:"cc-flow-auth"}});class ej{constructor(){fe(this,"config");fe(this,"cache",new Map);fe(this,"CACHE_DURATION",300*1e3);this.config={url:"https://tirzmotuypesxopnnitt.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRpcnptb3R1eXBlc3hvcG5uaXR0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYzOTAyMjEsImV4cCI6MjA3MTk2NjIyMX0.YQaXWOWEFoiAJU412gA4MOXfm10E6XPJJb75FMh_H0k"}}getCacheKey(t,a={}){return`${t}_${JSON.stringify(a)}`}getCachedData(t){const a=this.cache.get(t);return a&&Date.now()-a.timestamp<this.CACHE_DURATION?a.data:null}setCachedData(t,a){this.cache.set(t,{data:a,timestamp:Date.now()})}getCutProductivityByResponsible(t,a){return _(this,null,function*(){const n=this.getCacheKey("cut_productivity_responsible",{startDate:t,endDate:a}),o=this.getCachedData(n);if(o)return o;const u=yield fetch(`${this.config.url}/rest/v1/rpc/get_cut_productivity_by_responsible`,{method:"POST",headers:{apikey:this.config.anonKey,Authorization:`Bearer ${this.config.anonKey}`,"Content-Type":"application/json"},body:JSON.stringify({start_date:t,end_date:a})});if(!u.ok)throw new Error(`Supabase RPC error: ${u.status} ${u.statusText}`);const h=yield u.json();return this.setCachedData(n,h),h})}getCutProductivityByCNC(t,a){return _(this,null,function*(){const n=this.getCacheKey("cut_productivity_cnc",{startDate:t,endDate:a}),o=this.getCachedData(n);if(o)return o;const u=yield fetch(`${this.config.url}/rest/v1/rpc/get_cut_productivity_by_cnc`,{method:"POST",headers:{apikey:this.config.anonKey,Authorization:`Bearer ${this.config.anonKey}`,"Content-Type":"application/json"},body:JSON.stringify({start_date:t,end_date:a})});if(!u.ok)throw new Error(`Supabase RPC error: ${u.status} ${u.statusText}`);const h=yield u.json();return this.setCachedData(n,h),h})}getManufacturingProductivityByResponsible(t,a){return _(this,null,function*(){const n=this.getCacheKey("manufacturing_productivity_responsible",{startDate:t,endDate:a}),o=this.getCachedData(n);if(o)return o;const u=yield fetch(`${this.config.url}/rest/v1/rpc/get_manufacturing_productivity_by_responsible`,{method:"POST",headers:{apikey:this.config.anonKey,Authorization:`Bearer ${this.config.anonKey}`,"Content-Type":"application/json"},body:JSON.stringify({start_date:t,end_date:a})});if(!u.ok)throw new Error(`Supabase RPC error: ${u.status} ${u.statusText}`);const h=yield u.json();return this.setCachedData(n,h),h})}getMainMetrics(t,a){return _(this,null,function*(){const n=this.getCacheKey("main_metrics",{startDate:t,endDate:a}),o=this.getCachedData(n);if(o)return o;const u=yield fetch(`${this.config.url}/rest/v1/rpc/get_main_metrics_factory_analytics`,{method:"POST",headers:{apikey:this.config.anonKey,Authorization:`Bearer ${this.config.anonKey}`,"Content-Type":"application/json"},body:JSON.stringify({start_date:t,end_date:a})});if(!u.ok)throw new Error(`Supabase RPC error: ${u.status} ${u.statusText}`);const h=yield u.json(),g=Array.isArray(h)&&h.length>0?h[0]:h;return this.setCachedData(n,g),g})}getProjectsWithMetrics(o,u){return _(this,arguments,function*(t,a,n={}){const h=this.getCacheKey("projects_with_metrics",$e({startDate:t,endDate:a},n)),g=this.getCachedData(h);if(g)return g;const m=yield fetch(`${this.config.url}/rest/v1/rpc/get_projects_with_metrics`,{method:"POST",headers:{apikey:this.config.anonKey,Authorization:`Bearer ${this.config.anonKey}`,"Content-Type":"application/json"},body:JSON.stringify({start_date:t,end_date:a,pm_filter:n.pm||null,status_filter:n.status||null})});if(!m.ok)throw new Error(`Supabase RPC error: ${m.status} ${m.statusText}`);const p=yield m.json();return this.setCachedData(h,p),p})}getOrdersByProject(t,a,n){return _(this,null,function*(){const o=this.getCacheKey("orders_by_project",{projectName:t,startDate:a,endDate:n}),u=this.getCachedData(o);if(u)return u;const h=yield fetch(`${this.config.url}/rest/v1/rpc/get_orders_by_project`,{method:"POST",headers:{apikey:this.config.anonKey,Authorization:`Bearer ${this.config.anonKey}`,"Content-Type":"application/json"},body:JSON.stringify({project_name:t,start_date:a,end_date:n})});if(!h.ok)throw new Error(`Supabase RPC error: ${h.status} ${h.statusText}`);const g=yield h.json();return this.setCachedData(o,g),g})}getAllProjects(){return _(this,null,function*(){const t="all-projects-supabase",a="all-projects",n=this.getCachedData(t);if(n)return console.log(" Using cached projects data from Supabase"),n;try{console.log(" Fetching projects from Supabase...");const{data:o,error:u}=yield ba.from("Projects").select("*").order("Name").not("Number","is",null);if(u)throw u;const h=(o||[]).map(m=>{var p;return{_RowNumber:void 0,Name:m.Name||"",Number:((p=m.Number)==null?void 0:p.toString())||"",Status:m.Status||"","Project ID":m["Project ID"]||"","Start Date":m["Start Date"]||"","Expected Completion Date":m["Expected Completion Date"]||"","Finalization Date":m["Finalization Date"]||"",PM:m.PM||"","CC/Subcontractor":m["CC/Subcontractor"]||"","Site Supervisor":m["Site Supervisor"]||"","EBA/Non-EBA":m["EBA/Non-EBA"]||"",Contact:m.Contact||"","Expected Square Meters":m["Expected Square Meters"]?Number(m["Expected Square Meters"]):void 0,"Deliveries Allowed":m["Deliveries Allowed"]?Number(m["Deliveries Allowed"]):void 0,"Allowed SQM to buy":m["Allowed SQM to buy"]?Number(m["Allowed SQM to buy"]):void 0,"Real Cut Square Meters":void 0,"Real Cut Linear Meters":void 0,"Total Orders":void 0,"Total Materials":void 0,"Total Sheets":void 0,"Total Allowances":void 0,"Total Deliveries":void 0,"Total Inventory":void 0,"Related Items Requests":void 0,"Related Delivery_Dockets":void 0,"Related People Allowances":void 0}});this.setCachedData(t,h);const g=this.getCachedData(a);return(!g||g.length===0)&&this.setCachedData(a,h),console.log(` Cached ${h.length} projects from Supabase`),h}catch(o){return console.error("Error fetching projects from Supabase:",o),[]}})}getOrdersCutByProject(t){return _(this,null,function*(){const a=`orders-cut-${t}`,n=this.getCachedData(a);if(n)return console.log(` Using cached orders for project: ${t}`),n;try{console.log(` Fetching orders from Supabase for project: ${t}...`);const{data:o,error:u}=yield ba.from("Orders cut").select('"Order ID", "Creation Date", "Status", "Priority", "Responsable", "Colour"').eq("Project",t).order('"Creation Date"',{ascending:!1});if(u)throw u;const h=(o||[]).map(g=>({"Order ID":g["Order ID"]||"",Status:g.Status||"",Priority:g.Priority||"",Colour:g.Colour||"","Creation Date":g["Creation Date"]||"",Responsable:g.Responsable||""}));return this.setCachedData(a,h),console.log(` Cached ${h.length} orders for project: ${t} (sorted by Creation Date)`),h}catch(o){return console.error(`Error fetching orders from Supabase for project ${t}:`,o),[]}})}checkOrderIdExists(t){return _(this,null,function*(){if(!t||!t.trim())return!1;try{const{data:a,error:n}=yield ba.from("Orders cut").select('"Order ID"').eq("Order ID",t.trim()).limit(1).maybeSingle();if(n)throw n;return a!==null}catch(a){return console.error(`Error checking Order ID existence: ${t}`,a),!1}})}checkExistingPanels(t){return _(this,null,function*(){if(t.length===0)return[];const a=this.getCacheKey("existing-panels",{names:t.sort().join(",")}),n=this.getCachedData(a);if(n)return n;try{const o=yield ba.from("Panels").select("Name, Order, Status").in("Name",t);if(o.error)throw new Error(`Supabase error: ${o.error.message}`);const u=o.data||[];return this.setCachedData(a,u),u}catch(o){throw console.error("Error checking existing panels:",o),o}})}createOrderCut(t,a){return _(this,null,function*(){try{console.log(` Creating order cut in Supabase: ${t["Order ID"]}`);const{error:n}=yield ba.from("Orders cut").insert([t]);if(n)throw new Error(`Supabase error creating order: ${n.message}`);console.log(" Order cut created in Supabase"),a.length>0?yield this.createPanels(a):console.warn(" No panels to create for this order")}catch(n){throw console.error("Error creating order cut in Supabase:",n),n}})}createPanels(t){return _(this,null,function*(){if(t.length===0){console.warn(" No panels to create");return}try{for(let n=0;n<t.length;n+=1e3){const o=t.slice(n,n+1e3),{error:u}=yield ba.from("Panels").insert(o);if(u)throw new Error(`Supabase error inserting panels batch ${Math.floor(n/1e3)+1}: ${u.message}`)}console.log(` ${t.length} panels created in Supabase`)}catch(a){throw console.error("Error creating panels in Supabase:",a),a}})}clearCache(){this.cache.clear()}}const Kt=new ej;class Os{constructor(){fe(this,"config");fe(this,"cache",new Map);fe(this,"CACHE_DURATION",300*1e3);fe(this,"PROJECTS_CACHE_DURATION",900*1e3);this.config={appId:"efcdb2a0-181f-4e43-bc65-6887dc279032",apiKey:"V2-cTfzb-hYt3f-e0d9Z-5PD1w-jyqcd-y21HR-ioeLZ-nV3h4",baseUrl:"https://www.appsheet.com/api/v2"},(!this.config.appId||!this.config.apiKey)&&console.warn("AppSheet credentials not configured. Please check your environment variables.")}makeRequest(t,a,n,o){return _(this,null,function*(){const u=`${this.config.baseUrl}/apps/${this.config.appId}/tables/${encodeURIComponent(t)}/Action`;let h=o||{},g=n||[];if(n&&n.length>0&&a==="Find"){const p=[];if(n.forEach(y=>{Object.entries(y).forEach(([x,v])=>{if(v!=null){const j=typeof v=="string"?JSON.stringify(v):v;p.push(`[${x}]=${j}`)}})}),p.length>0){const y=p.length===1?`Filter(${t}, ${p[0]})`:`Filter(${t}, AND(${p.join(", ")}))`;h=at($e({},h),{Selector:y}),g=[]}}let m;a!=="Find"&&a!=="Edit"&&a!=="Add"&&a!=="Delete"?m={Action:a,Properties:$e({Locale:"en-US",Location:"-28.0167, 153.4000",Timezone:"E. Australia Standard Time"},h),Rows:g}:m={Action:a,Properties:$e({Locale:"en-AU",Location:"-28.0167, 153.4000",Timezone:"E. Australia Standard Time"},h),Rows:g};try{const p=yield fetch(u,{method:"POST",headers:{"Content-Type":"application/json",ApplicationAccessKey:this.config.apiKey},body:JSON.stringify(m)});if(!p.ok){const x=yield p.text();throw console.error(`HTTP error! status: ${p.status}, response: ${x}`),new Error(`HTTP error! status: ${p.status}`)}const y=yield p.text();if(!y||y.trim()==="")return console.warn(` Empty response from ${t}`),[];try{const x=JSON.parse(y);return x.Rows&&Array.isArray(x.Rows)?x.Rows:Array.isArray(x)?x:[x]}catch(x){throw console.error(` JSON parse error for ${t}:`,x),console.error(" Response text:",y),new Error(`Invalid JSON response from ${t}`)}}catch(p){throw console.error(`Error making request to ${t}:`,p),new Error(`Failed to fetch data from ${t}: ${p instanceof Error?p.message:"Unknown error"}`)}})}getCachedData(t){const a=this.cache.get(t);if(a){const n=t==="all-projects"?this.PROJECTS_CACHE_DURATION:this.CACHE_DURATION;if(Date.now()-a.timestamp<n)return a.data}return null}setCachedData(t,a){this.cache.set(t,{data:a,timestamp:Date.now()})}getAllProjects(t){return _(this,null,function*(){const a="all-projects",n="all-projects-appsheet",o="all-projects-supabase";if(t!=null&&t.forceAppSheet){const m=this.getCachedData(n);if(m&&m.length>0)return console.log(" Using cached AppSheet data (instant, no request)"),this.setCachedData(a,m),m;console.log(" Force fetching from AppSheet (no cache available)...");try{const y=yield this.makeRequest("projects_dashboard_summary_slice","Find",[],{});return this.setCachedData(n,y),this.setCachedData(a,y),console.log(` Synced ${y.length} projects from AppSheet`),y}catch(p){console.error("Error fetching from AppSheet:",p);const y=this.getCachedData(a);return y||[]}}const u=this.getCachedData(a);if(u)return console.log(" Using cached projects data"),u;const h=Kt.getAllProjects().catch(m=>(console.log(" Supabase getAllProjects failed:",m),[])),g=_(this,null,function*(){try{console.log(" Fetching projects from AppSheet API...");const p=yield this.makeRequest("projects_dashboard_summary_slice","Find",[],{});return this.setCachedData(n,p),this.setCachedData(a,p),console.log(` Cached ${p.length} projects from AppSheet (complete data)`),p}catch(m){return console.error("Error fetching projects from AppSheet:",m),[]}});try{const m=yield h;if(m&&m.length>0){console.log(` Using ${m.length} projects from Supabase (fast response)`),this.setCachedData(o,m);const p=this.getCachedData(a);return(!p||p.length===0)&&this.setCachedData(a,m),g.catch(()=>{console.log(" Background AppSheet update failed")}),m}}catch(m){console.log(" Supabase failed, waiting for AppSheet...",m)}try{const m=yield g;if(m&&m.length>0)return console.log(` Using ${m.length} projects from AppSheet (fallback)`),m}catch(m){console.error("Error fetching projects from both sources:",m)}return[]})}getProjectDataFromCache(t){return _(this,null,function*(){try{const n=(yield this.getAllProjects()).find(o=>o.Name===t);return n?(console.log(` Project data found in cache for: ${t}`),n):(console.warn(` Project not found in cache: ${t}`),null)}catch(a){return console.error("Error getting project data from cache:",a),null}})}getAllItems(){return _(this,null,function*(){const t="all-items",a=this.getCachedData(t);if(a)return a;try{const n=yield this.makeRequest("items_dashboard_summary_slice","Find",[],{});return this.setCachedData(t,n),n}catch(n){return console.error("Error fetching all items:",n),[]}})}getProjectData(t){return _(this,null,function*(){const a=`project-${t}`,n=this.getCachedData(a);if(n)return n;try{const o=`Filter(Projects, [Name]=${JSON.stringify(t)})`,u=yield this.makeRequest("Projects","Find",[],{Selector:o});if(u.length>0){const h=u[0];return this.setCachedData(a,h),h}return null}catch(o){return console.error("Error fetching project data:",o),null}})}getOrdersByProject(t){return _(this,null,function*(){const a=`orders-${t}`,n=this.getCachedData(a);if(n)return n;try{const o=`Filter(Orders, [Project ID]=${JSON.stringify(t)})`,u=yield this.makeRequest("Orders","Find",[],{Selector:o});return this.setCachedData(a,u),u}catch(o){return console.error("Error fetching orders:",o),[]}})}getMaterials(t){return _(this,null,function*(){const a=`materials-${t}`,n=this.getCachedData(a);if(n)return n;try{const o=yield this.getItemsRequestsByProject(t),u=yield this.getOrdersByProject(t),h=yield this.getAllItems(),g=o.map(x=>{const v=h.find(E=>E["Item ID"]===x["Item ID"]),j=u.find(E=>E["Order ID"]===x["Order ID"]);return at($e({},x),{Name:v?v.Name:"Unknown Item","Order Number":j?j.Number:"0","Order Date":j?j["Due Date"]:"","Order Status":j?j.Status:"","Request by":j?j["Created By"]:""})}),m=this.groupMaterialsForSummary(g),p=this.groupMaterialsForDetails(g),y={summary:m,details:p};return this.setCachedData(a,y),y}catch(o){return console.error("Error fetching materials:",o),{summary:[],details:[]}}})}groupMaterialsForSummary(t){const a={"Top hat":{},Angles:{},Screws:{},"Caulking Glue":{},Packers:{},Tapes:{},Others:{}};t.forEach(o=>{const u=Object.prototype.hasOwnProperty.call(a,o.Category)?o.Category:"Others",h=o["Item ID"];a[u][h]||(a[u][h]={Name:o.Name||"Unknown Item",SubCategory:o["Sub Category"]||"",Description:o["Description Material"]||"",Total:0}),a[u][h].Total+=Number(o.Quantity)||0});const n=[];return Object.entries(a).forEach(([o,u])=>{const h=Object.entries(u).map(([g,m])=>({ItemID:g,Name:m.Name,SubCategory:m.SubCategory,Description:m.Description,Total:m.Total}));n.push({category:o,items:h})}),n}groupMaterialsForDetails(t){const a={"Top hat":[],Angles:[],Screws:[],"Caulking Glue":[],Packers:[],Tapes:[],Others:[]};t.forEach(o=>{const u=Object.prototype.hasOwnProperty.call(a,o.Category)?o.Category:"Others";a[u].push(o)});const n=[];return Object.entries(a).forEach(([o,u])=>{n.push({category:o,items:u})}),n}getItemsRequestsByProject(t){return _(this,null,function*(){const a=`items-requests-${t}`,n=this.getCachedData(a);if(n)return n;try{const o=`Filter(Items Request, [Project]=${JSON.stringify(t)})`,u=yield this.makeRequest("Items Request","Find",[],{Selector:o});return this.setCachedData(a,u),u}catch(o){return console.error("Error fetching items requests by Project Name:",o),[]}})}getSheetsData(t){return _(this,null,function*(){const a=`sheets-${t}`,n=this.getCachedData(a);if(n)return n;try{const o=`Filter(Sheets, AND([Project]=${JSON.stringify(t)}, [Off Cut]=false))`,u=yield this.makeRequest("Sheets","Find",[],{Selector:o});if(u.length===0)return this.setCachedData(a,[]),[];const h=[];u.forEach(p=>{if(p["Related Sheets Inventorys"]){const y=p["Related Sheets Inventorys"].split(",").map(x=>x.trim()).filter(x=>x.length>0);h.push(...y)}});let g=[];if(h.length>0){const y=`Filter(Sheets Inventory, OR(${h.map(x=>`[sheet_inventory_id]=${JSON.stringify(x)}`).join(", ")}))`;g=yield this.makeRequest("Sheets Inventory","Find",[],{Selector:y})}const m=u.map(p=>{const y=g.filter(j=>j.sheet===p["Sheet ID"]);let x=0,v=0;if(y.length>0)x=y.filter(j=>Number(j.qty)>0).reduce((j,E)=>j+Number(E.qty),0),v=y.filter(j=>Number(j.qty)<0).reduce((j,E)=>j+Math.abs(Number(E.qty)),0);else{const j=Number(p["Quantity in Factory"])||0,E=Number(p["Quantity in Store"])||0;j>0&&(x=j),E<0&&(v=Math.abs(E))}return at($e({},p),{TotalReceived:x,TotalUsed:v})});return this.setCachedData(a,m),m}catch(o){return console.error("Error fetching sheets:",o),[]}})}getSheetsByProject(t){return _(this,null,function*(){try{console.log(` Fetching sheets from AppSheet for project: ${t}...`);const a=`Filter(Sheets, [Project]=${JSON.stringify(t)})`,n=yield this.makeRequest("Sheets","Find",[],{Selector:a});return n.length===0?(console.log(` No sheets found for project: ${t}`),[]):n.map(u=>({"Sheet ID":u["Sheet ID"]||"",Dimension:u.Dimension||"",Colour:u.Colour||"","Quantity in Factory":Number(u["Quantity in Factory"])||0,"Quantity in Store":Number(u["Quantity in Store"])||0,"Off Cut":u["Off Cut"]=="Y",Comment:u.Comment||""}))}catch(a){return console.error(`Error fetching sheets for project ${t}:`,a),[]}})}getDeliveryDockets(t){return _(this,null,function*(){var o;const a=`deliveries-${t}`,n=this.getCachedData(a);if(n)return n;try{const u=yield this.getProjectData(t);if(!u||!u["Related Delivery_Dockets"])return[];const h=((o=u["Related Delivery_Dockets"])==null?void 0:o.split(",").map(y=>y.trim()).filter(y=>y.length>0))||[];if(h.length===0)return[];const m=`Filter(Delivery_Dockets, OR(${h.map(y=>`[delivery_id]=${JSON.stringify(y)}`).join(", ")}))`,p=yield this.makeRequest("Delivery_Dockets","Find",[],{Selector:m});return this.setCachedData(a,p),p}catch(u){return console.error("Error fetching delivery dockets:",u),[]}})}clearCache(){this.cache.clear()}clearCacheFor(t){this.cache.delete(t)}getPeopleAllowances(t){return _(this,null,function*(){const a=`allowances-${t}`,n=this.getCachedData(a);if(n)return n;try{const o=yield this.makeRequest("People Allowance","Find",[],{Selector:`Filter(People Allowance, [Project]=${JSON.stringify(t)})`});return console.log(" People Allowances API Response:",o),this.setCachedData(a,o),o}catch(o){return console.error("Error fetching people allowances:",o),[]}})}markOrderAsDelivered(t){return _(this,null,function*(){try{console.log(` Marking order ${t} as delivered...`);const a=yield this.makeRequest("Orders cut","Delivered",[{"Order ID":t}]);return a&&a.length>0?(console.log(` Order ${t} marked as delivered successfully`),console.log(" Updated order details:",a[0]),a):(console.error(` Failed to mark order ${t} as delivered - empty response`),[])}catch(a){return console.error(`Error marking order ${t} as delivered:`,a),[]}})}getDocumentsByProject(t){return _(this,null,function*(){try{console.log(` Fetching documents for project: ${t}...`);const a=`Filter(Documents, [Project]=${JSON.stringify(t)})`,n=yield this.makeRequest("Documents","Find",[],{Selector:a});return n&&n.length>0?(console.log(` Found ${n.length} documents for project ${t}`),n):(console.log(` No documents found for project ${t}`),[])}catch(a){return console.error(`Error fetching documents for project ${t}:`,a),[]}})}addDocument(t){return _(this,null,function*(){try{console.log(" Adding document to AppSheet...");const{uploadDocumentToDrive:a}=yield yb(()=>_(null,null,function*(){const{uploadDocumentToDrive:u}=yield import("./uploadService-CpoydQ-Y.js");return{uploadDocumentToDrive:u}}),[]);console.log(" Uploading file to Google Drive...");const n=yield a(t.file,t.Project,t.Orders,t.Name);console.log(` File uploaded to Drive: ${n}`),console.log(" Saving document record in AppSheet...");const o=yield this.makeRequest("Documents","Add",[{Project:t.Project,Name:t.Name,File:n,Orders:t.Orders,Comments:t.Comments||"",Category:t.Category||""}]);return o&&o.length>0?(console.log(" Document added successfully"),o):(console.error(" Failed to add document - empty response"),[])}catch(a){throw console.error("Error adding document:",a),a}})}linkDocumentToOrder(t,a){return _(this,null,function*(){try{console.log(` Linking document ${t} to order ${a}...`);const n=yield this.makeRequest("Documents","Find",[{"Document ID":t}]);if(!n||n.length===0)throw new Error(`Document with ID ${t} not found`);const o=n[0],u=o.Orders||"";let h=[];u&&(typeof u=="string"?h=u.split(",").map(x=>x.trim()).filter(x=>x.length>0):Array.isArray(u)&&(h=u.map(x=>String(x).trim()).filter(x=>x.length>0)));const g=a.trim();g&&!h.includes(g)&&h.push(g);const m=h.join(","),p={"Document ID":t,Orders:m,Comments:o.Comments||"",Category:o.Category||""},y=yield this.makeRequest("Documents","Edit",[p]);return y&&y.length>0?(console.log(` Document ${t} linked to order ${a} successfully`),y):(console.error(" Failed to link document - empty response"),[])}catch(n){throw console.error("Error linking document to order:",n),n}})}createStages(t){return _(this,null,function*(){if(t.length===0)return console.warn(" No stages to create"),[];try{console.log(` Creating ${t.length} stages in AppSheet...`);const a=yield this.makeRequest("Stages Order","Add",t);return a&&a.length>0?(console.log(` ${a.length} stages created successfully in AppSheet`),a):(console.error(" Failed to create stages - empty response"),[])}catch(a){throw console.error("Error creating stages in AppSheet:",a),a}})}createPanels(t){return _(this,null,function*(){if(t.length===0)return console.warn(" No panels to create"),[];try{console.log(` Creating ${t.length} panels in AppSheet...`);const a=yield this.makeRequest("Panels","Add",t);return a&&a.length>0?(console.log(` ${a.length} panels created successfully in AppSheet`),a):(console.error(" Failed to create panels - empty response"),[])}catch(a){throw console.error("Error creating panels in AppSheet:",a),a}})}addOrderCut(t){return _(this,null,function*(){try{console.log(` Creating order cut in AppSheet: ${t["Order ID"]}`);const a=yield this.makeRequest("Orders cut","Add",[t]);if(!a||a.length===0)throw new Error("Failed to create order cut in AppSheet - empty response");return console.log(" Order cut created successfully in AppSheet"),a}catch(a){throw console.error("Error creating order cut in AppSheet:",a),a}})}createSheetsInventory(t){return _(this,null,function*(){if(t.length===0)return console.warn(" No sheets inventory records to create"),[];try{console.log(` Creating ${t.length} sheets inventory records in AppSheet...`);const a=t.map(o=>({sheet:o["Sheet ID"],order:o.order,qty:o.qty,change_time:o.change_time})),n=yield this.makeRequest("Sheets Inventory","Add",a);return n&&n.length>0?(console.log(` ${n.length} sheets inventory records created successfully in AppSheet`),n):(console.error(" Failed to create sheets inventory - empty response"),[])}catch(a){throw console.error("Error creating sheets inventory in AppSheet:",a),a}})}createOrderCut(t,a,n){return _(this,null,function*(){try{console.log(` Creating order cut in AppSheet: ${t["Order ID"]}`),console.log(" Creating order...");const o=yield this.makeRequest("Orders cut","Add",[t]);if(!o||o.length===0)throw new Error("Failed to create order in AppSheet - empty response");console.log(" Order created successfully in AppSheet"),console.log(" Creating stages...");let u=[];try{u=yield this.createStages(a)}catch(g){console.error(" Error creating stages, but continuing:",g)}console.log(" Creating panels...");let h=[];try{h=yield this.createPanels(n)}catch(g){console.error(" Error creating panels, but continuing:",g)}return console.log(" Order cut creation completed in AppSheet"),{order:o,stages:u,panels:h}}catch(o){throw console.error("Error creating order cut in AppSheet:",o),o}})}}const mn=new Os,Lp=()=>la({queryKey:["projects-list"],queryFn:()=>mn.getAllProjects(),staleTime:600*1e3,gcTime:1200*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1,retry:2,retryDelay:1e3}),jd=()=>la({queryKey:["items"],queryFn:()=>mn.getAllItems(),staleTime:3600*1e3,gcTime:1440*60*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1,retry:1,retryDelay:2e3}),zp=r=>la({queryKey:["project",r],queryFn:()=>mn.getProjectDataFromCache(r),enabled:!!r,staleTime:900*1e3,gcTime:1800*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1,retry:!1}),tj=r=>la({queryKey:["project-materials",r],queryFn:()=>mn.getMaterials(r),enabled:!!r,staleTime:300*1e3,gcTime:900*1e3}),aj=r=>la({queryKey:["project-sheets",r],queryFn:()=>mn.getSheetsData(r),enabled:!!r,staleTime:300*1e3,gcTime:900*1e3}),sj=r=>la({queryKey:["project-allowances",r],queryFn:()=>mn.getPeopleAllowances(r),enabled:!!r,staleTime:300*1e3,gcTime:900*1e3}),rj=({children:r})=>{const{isLoading:t,isError:a}=jd();return l.jsxs(l.Fragment,{children:[r,t&&l.jsx("div",{className:"progressive-loader",children:l.jsx("div",{className:"loader-indicator",children:l.jsx("div",{className:"loader-spinner"})})}),a&&l.jsx("div",{className:"progressive-loader error",children:l.jsx("div",{className:"loader-indicator",children:l.jsx("span",{className:"error-icon",children:""})})})]})},$p=()=>{const[r,t]=M.useState(()=>new URLSearchParams(window.location.search).get("project")),a=M.useCallback(u=>{if(r===u)return;t(u);const h=new URL(window.location.href);u?h.searchParams.set("project",u):h.searchParams.delete("project"),window.history.replaceState({},"",h.toString())},[r]),n=M.useCallback(u=>{a(u)},[a]),o=M.useCallback(()=>{a(null)},[a]);return M.useEffect(()=>{const u=()=>{const g=new URLSearchParams(window.location.search).get("project");t(g)};return window.addEventListener("popstate",u),()=>window.removeEventListener("popstate",u)},[]),{projectParam:r,setProjectParam:a,updateUrlWithProject:n,clearProjectParam:o}},ki=r=>{M.useEffect(()=>{const t=document.title;return document.title=r,()=>{document.title=t}},[r])},Ca=()=>l.jsx("div",{className:"loading-spinner",role:"status","aria-label":"Loading"}),Qu=({isLoading:r,children:t,sectionName:a})=>r?l.jsx("div",{className:"section-loader",children:l.jsxs("div",{className:"section-loading-content",children:[l.jsx(Ca,{}),l.jsxs("p",{className:"section-loading-text",children:["Loading ",a,"..."]})]})}):l.jsx(l.Fragment,{children:t}),nj=({onProjectSelect:r})=>{var ee,ae;const[t,a]=M.useState(""),[n,o]=M.useState(""),[u,h]=M.useState("In Progress"),[g,m]=M.useState(!1),p=M.useRef(null),{projectParam:y,updateUrlWithProject:x}=$p(),{data:v=[],isLoading:j,error:E,refetch:D}=Lp(),O=M.useMemo(()=>[...v].sort((re,T)=>re.Name.localeCompare(T.Name)).filter(re=>{const T=re.Name.toLowerCase().includes(n.toLowerCase()),C=u==="all"||re.Status===u;return T&&C}),[v,n,u]);M.useEffect(()=>{if(y&&v.length>0){const Y=v.find(re=>re.Name===y);Y&&t!==y&&(a(y),r(Y))}},[y,v,r,t]),M.useEffect(()=>{const Y=re=>{p.current&&!p.current.contains(re.target)&&m(!1)};return document.addEventListener("mousedown",Y),()=>document.removeEventListener("mousedown",Y)},[]);const H=Y=>_(null,null,function*(){a(Y),m(!1);const re=v.find(T=>T.Name===Y);re&&(x(Y),r(re))}),U=Y=>{switch(Y){case"To Do":return"#87CEEB";case"In Progress":return"#FFA500";case"Defects":return"#FF6347";case"Done":return"#32CD32";default:return"#95a5a6"}},q=Y=>{switch(Y){case"To Do":return"";case"In Progress":return"";case"Defects":return"";case"Done":return"";default:return""}};return j?l.jsx("div",{className:"project-selector",children:l.jsxs("div",{className:"loading-container",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{className:"loading-text",children:"Loading projects..."}),l.jsxs("div",{className:"loading-dots",children:[l.jsx("span",{}),l.jsx("span",{}),l.jsx("span",{})]})]})}):E?l.jsx("div",{className:"project-selector",children:l.jsxs("div",{className:"error-container",children:[l.jsx("div",{className:"error-icon",children:""}),l.jsx("h3",{className:"error-title",children:"Connection Error"}),l.jsx("p",{className:"error-message",children:E.message||"Error loading projects"}),l.jsxs("button",{onClick:()=>D(),className:"retry-button",children:[l.jsx("span",{className:"retry-icon",children:""}),l.jsx("span",{className:"retry-text",children:"Retry Connection"})]})]})}):v.length===0?l.jsx("div",{className:"project-selector",children:l.jsxs("div",{className:"empty-container",children:[l.jsx("div",{className:"empty-icon",children:""}),l.jsx("h3",{className:"empty-title",children:"No Projects Available"}),l.jsx("p",{className:"empty-message",children:"There are no projects to display at the moment."})]})}):l.jsx("div",{className:"project-selector",children:l.jsx("div",{className:"combobox-section",children:l.jsxs("div",{className:"combobox-container",ref:p,children:[l.jsxs("div",{className:"combobox-wrapper",children:[l.jsxs("div",{className:`combobox ${g?"open":""}`,onClick:()=>m(!0),children:[l.jsxs("div",{className:"combobox-input",children:[l.jsx("span",{className:"combobox-icon",children:""}),l.jsx("input",{type:"text",placeholder:"Search and select project...",value:n,onChange:Y=>{o(Y.target.value),m(!0)},onClick:Y=>Y.stopPropagation(),className:"combobox-search"}),n&&l.jsx("button",{className:"clear-search",onClick:Y=>{Y.stopPropagation(),o("")},children:""})]}),l.jsx("div",{className:"combobox-arrow",children:""})]}),g&&l.jsxs("div",{className:"combobox-dropdown",children:[l.jsxs("div",{className:"dropdown-header",children:[l.jsx("div",{className:"filter-tabs",children:["all","To Do","In Progress","Defects","Done"].map(Y=>l.jsxs("button",{className:`filter-tab ${u===Y?"active":""}`,onClick:re=>{re.stopPropagation(),h(Y)},style:{"--status-color":Y==="all"?"#95a5a6":U(Y)},title:Y==="all"?"All Projects":Y,children:[l.jsx("span",{className:"tab-icon",children:Y==="all"?"":q(Y)}),l.jsx("span",{className:"tab-text",children:Y==="all"?"All":Y}),l.jsx("span",{className:"tab-count",children:Y==="all"?v.length:v.filter(re=>re.Status===Y).length})]},Y))}),l.jsx("div",{className:"mobile-results-indicator",children:l.jsxs("span",{className:"results-count",children:[O.length," of ",v.length," projects"]})})]}),l.jsx("div",{className:"dropdown-list",children:O.length>0?O.map(Y=>l.jsx("div",{className:`dropdown-item ${t===Y.Name?"selected":""}`,onClick:re=>{re.stopPropagation(),H(Y.Name)},children:l.jsxs("div",{className:"item-content",children:[l.jsxs("div",{className:"item-main",children:[l.jsx("div",{className:"item-name",children:Y.Name}),l.jsx("div",{className:"item-status",children:l.jsxs("span",{className:"status-badge",style:{backgroundColor:U(Y.Status||"")},children:[q(Y.Status||"")," ",Y.Status||"Unknown"]})})]}),l.jsx("div",{className:"item-check",children:t===Y.Name?"":""})]})},Y.Name)):l.jsxs("div",{className:"no-results",children:[l.jsx("div",{className:"no-results-icon",children:""}),l.jsxs("div",{className:"no-results-text",children:[l.jsx("div",{className:"no-results-title",children:"No projects found"}),l.jsx("div",{className:"no-results-subtitle",children:"Try adjusting your search or filters"})]})]})})]})]}),t&&l.jsxs("div",{className:"selected-project",children:[l.jsxs("div",{className:"selected-project-info",children:[l.jsx("div",{className:"project-name",children:t}),l.jsx("div",{className:"project-status",children:l.jsx("span",{className:"status-indicator",style:{backgroundColor:U(((ee=v.find(Y=>Y.Name===t))==null?void 0:ee.Status)||"")},children:((ae=v.find(Y=>Y.Name===t))==null?void 0:ae.Status)||"Unknown"})})]}),j&&l.jsxs("div",{className:"loading-indicator",children:[l.jsx("div",{className:"loading-dot"}),l.jsx("div",{className:"loading-dot"}),l.jsx("div",{className:"loading-dot"})]})]})]})})})},Gu=r=>{if(!r)return"N/A";try{const t=new Date(r);if(isNaN(t.getTime()))return r;const a=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),o=t.getFullYear();return`${a}/${n}/${o}`}catch(t){return console.warn("Error formateando fecha:",r,t),r}},ij=r=>{if(!r)return"N/A";try{const t=new Date(r);if(isNaN(t.getTime()))return r;const a=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),o=t.getFullYear(),u=t.getHours().toString().padStart(2,"0"),h=t.getMinutes().toString().padStart(2,"0");return`${a}/${n}/${o} ${u}:${h}`}catch(t){return console.warn("Error formateando fecha y hora:",r,t),r}};function lj(){var p,y,x,v,j,E;const r=new Date,a=new Intl.DateTimeFormat("en-AU",{timeZone:"Australia/Brisbane",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).formatToParts(r),n=(p=a.find(D=>D.type==="year"))==null?void 0:p.value,o=(y=a.find(D=>D.type==="month"))==null?void 0:y.value,u=(x=a.find(D=>D.type==="day"))==null?void 0:x.value,h=(v=a.find(D=>D.type==="hour"))==null?void 0:v.value,g=(j=a.find(D=>D.type==="minute"))==null?void 0:j.value,m=(E=a.find(D=>D.type==="second"))==null?void 0:E.value;return`${n}-${o}-${u} ${h}:${g}:${m}`}const Zl={"Top hat":"",Angles:"",Screws:"","Caulking Glue":"",Packers:"",Tapes:"",Others:""},oj=({materials:r,isLoading:t=!1})=>{const[a,n]=M.useState(null),o=M.useMemo(()=>r.summary.map(h=>at($e({},h),{category:`${Zl[h.category]||""} ${h.category} ${Zl[h.category]||""}`})),[r.summary]),u=M.useMemo(()=>r.details.map(h=>at($e({},h),{category:`${Zl[h.category]||""} ${h.category} ${Zl[h.category]||""}`})),[r.details]);return t?l.jsxs("div",{className:"materials-table-container",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Loading materials..."})]}):r.summary.length===0&&r.details.length===0?l.jsxs("div",{className:"materials-table-container",children:[l.jsx("h2",{children:" Material Tables"}),l.jsx("p",{children:"No materials available for this project."})]}):l.jsxs("div",{className:"materials-table-container",children:[l.jsx("h2",{id:"material-tables",children:"Material Tables"}),l.jsxs("div",{id:"materialsTablesContainer",children:[l.jsx("button",{id:"btnSummary",className:a==="summary"?"active":"",onClick:()=>n(a==="summary"?null:"summary"),children:" Summary Table"}),l.jsx("button",{id:"btnDetails",className:a==="details"?"active":"",onClick:()=>n(a==="details"?null:"details"),children:" Detailed Table"})]}),l.jsx("div",{className:"table-scroll-container",children:l.jsxs("table",{id:"materialsTable",className:a==="summary"?"":"hidden",children:[l.jsxs("thead",{children:[l.jsx("tr",{children:l.jsx("th",{colSpan:4,children:"Summary materials"})}),l.jsxs("tr",{children:[l.jsx("th",{children:" Name"}),l.jsx("th",{children:" Sub Category"}),l.jsx("th",{children:" Description"}),l.jsx("th",{children:" Total"})]})]}),l.jsx("tbody",{children:o.map(h=>h.items.length===0?null:l.jsxs(io.Fragment,{children:[l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"category",children:h.category})}),h.items.map(g=>l.jsxs("tr",{className:"item",children:[l.jsx("td",{children:g.Name}),l.jsx("td",{children:g.SubCategory}),l.jsx("td",{children:g.Description}),l.jsx("td",{children:g.Total})]},g.ItemID))]},h.category))})]})}),l.jsx("div",{className:"table-scroll-container",children:l.jsxs("table",{id:"materialsTable_details",className:a==="details"?"":"hidden",children:[l.jsxs("thead",{children:[l.jsx("tr",{children:l.jsx("th",{colSpan:8,children:"Summary detailed materials"})}),l.jsxs("tr",{children:[l.jsx("th",{children:" Order"}),l.jsx("th",{children:" Status"}),l.jsx("th",{children:" Date"}),l.jsx("th",{children:" Name"}),l.jsx("th",{children:" Description"}),l.jsx("th",{children:" User Spec"}),l.jsx("th",{children:" Request by"}),l.jsx("th",{children:" Quantity"})]})]}),l.jsx("tbody",{children:u.map(h=>h.items.length===0?null:l.jsxs(io.Fragment,{children:[l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"category",children:h.category})}),h.items.map((g,m)=>l.jsxs("tr",{className:"item",children:[l.jsx("td",{children:g["Order Number"]}),l.jsx("td",{children:g["Order Status"]==="Delivered"?"":""}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:ij(g["Order Date"])}),l.jsx("td",{children:g.Name}),l.jsx("td",{children:g["Description Material"]}),l.jsx("td",{children:g.Description}),l.jsx("td",{children:g["Request by"]}),l.jsx("td",{children:g.Quantity})]},`${g["Item ID"]}-${m}`))]},h.category))})]})})]})};var Wg=(function(){if(typeof window!="undefined"){if(window.devicePixelRatio)return window.devicePixelRatio;var r=window.screen;if(r)return(r.deviceXDPI||1)/(r.logicalXDPI||1)}return 1})(),wi={toTextLines:function(r){var t=[],a;for(r=[].concat(r);r.length;)a=r.pop(),typeof a=="string"?t.unshift.apply(t,a.split(`
`)):Array.isArray(a)?r.push.apply(r,a):vi(r)||t.unshift(""+a);return t},textSize:function(r,t,a){var n=[].concat(t),o=n.length,u=r.font,h=0,g;for(r.font=a.string,g=0;g<o;++g)h=Math.max(r.measureText(n[g]).width,h);return r.font=u,{height:o*a.lineHeight,width:h}},bound:function(r,t,a){return Math.max(r,Math.min(t,a))},arrayDiff:function(r,t){var a=r.slice(),n=[],o,u,h,g;for(o=0,h=t.length;o<h;++o)g=t[o],u=a.indexOf(g),u===-1?n.push([g,1]):a.splice(u,1);for(o=0,h=a.length;o<h;++o)n.push([a[o],-1]);return n},rasterize:function(r){return Math.round(r*Wg)/Wg}};function Ku(r,t){var a=t.x,n=t.y;if(a===null)return{x:0,y:-1};if(n===null)return{x:1,y:0};var o=r.x-a,u=r.y-n,h=Math.sqrt(o*o+u*u);return{x:h?o/h:0,y:h?u/h:-1}}function cj(r,t,a,n,o){switch(o){case"center":a=n=0;break;case"bottom":a=0,n=1;break;case"right":a=1,n=0;break;case"left":a=-1,n=0;break;case"top":a=0,n=-1;break;case"start":a=-a,n=-n;break;case"end":break;default:o*=Math.PI/180,a=Math.cos(o),n=Math.sin(o);break}return{x:r,y:t,vx:a,vy:n}}var uj=0,Bp=1,Pp=2,Ip=4,Hp=8;function eo(r,t,a){var n=uj;return r<a.left?n|=Bp:r>a.right&&(n|=Pp),t<a.top?n|=Hp:t>a.bottom&&(n|=Ip),n}function dj(r,t){for(var a=r.x0,n=r.y0,o=r.x1,u=r.y1,h=eo(a,n,t),g=eo(o,u,t),m,p,y;!(!(h|g)||h&g);)m=h||g,m&Hp?(p=a+(o-a)*(t.top-n)/(u-n),y=t.top):m&Ip?(p=a+(o-a)*(t.bottom-n)/(u-n),y=t.bottom):m&Pp?(y=n+(u-n)*(t.right-a)/(o-a),p=t.right):m&Bp&&(y=n+(u-n)*(t.left-a)/(o-a),p=t.left),m===h?(a=p,n=y,h=eo(a,n,t)):(o=p,u=y,g=eo(o,u,t));return{x0:a,x1:o,y0:n,y1:u}}function to(r,t){var a=t.anchor,n=r,o,u;return t.clamp&&(n=dj(n,t.area)),a==="start"?(o=n.x0,u=n.y0):a==="end"?(o=n.x1,u=n.y1):(o=(n.x0+n.x1)/2,u=(n.y0+n.y1)/2),cj(o,u,r.vx,r.vy,t.align)}var ao={arc:function(r,t){var a=(r.startAngle+r.endAngle)/2,n=Math.cos(a),o=Math.sin(a),u=r.innerRadius,h=r.outerRadius;return to({x0:r.x+n*u,y0:r.y+o*u,x1:r.x+n*h,y1:r.y+o*h,vx:n,vy:o},t)},point:function(r,t){var a=Ku(r,t.origin),n=a.x*r.options.radius,o=a.y*r.options.radius;return to({x0:r.x-n,y0:r.y-o,x1:r.x+n,y1:r.y+o,vx:a.x,vy:a.y},t)},bar:function(r,t){var a=Ku(r,t.origin),n=r.x,o=r.y,u=0,h=0;return r.horizontal?(n=Math.min(r.x,r.base),u=Math.abs(r.base-r.x)):(o=Math.min(r.y,r.base),h=Math.abs(r.base-r.y)),to({x0:n,y0:o+h,x1:n+u,y1:o,vx:a.x,vy:a.y},t)},fallback:function(r,t){var a=Ku(r,t.origin);return to({x0:r.x,y0:r.y,x1:r.x+(r.width||0),y1:r.y+(r.height||0),vx:a.x,vy:a.y},t)}},as=wi.rasterize;function hj(r){var t=r.borderWidth||0,a=r.padding,n=r.size.height,o=r.size.width,u=-o/2,h=-n/2;return{frame:{x:u-a.left-t,y:h-a.top-t,w:o+a.width+t*2,h:n+a.height+t*2},text:{x:u,y:h,w:o,h:n}}}function fj(r,t){var a=t.chart.getDatasetMeta(t.datasetIndex).vScale;if(!a)return null;if(a.xCenter!==void 0&&a.yCenter!==void 0)return{x:a.xCenter,y:a.yCenter};var n=a.getBasePixel();return r.horizontal?{x:n,y:null}:{x:null,y:n}}function mj(r){return r instanceof Jv?ao.arc:r instanceof gd?ao.point:r instanceof on?ao.bar:ao.fallback}function gj(r,t,a,n,o,u){var h=Math.PI/2;if(u){var g=Math.min(u,o/2,n/2),m=t+g,p=a+g,y=t+n-g,x=a+o-g;r.moveTo(t,p),m<y&&p<x?(r.arc(m,p,g,-Math.PI,-h),r.arc(y,p,g,-h,0),r.arc(y,x,g,0,h),r.arc(m,x,g,h,Math.PI)):m<y?(r.moveTo(m,a),r.arc(y,p,g,-h,h),r.arc(m,p,g,h,Math.PI+h)):p<x?(r.arc(m,p,g,-Math.PI,0),r.arc(m,x,g,0,Math.PI)):r.arc(m,p,g,-Math.PI,Math.PI),r.closePath(),r.moveTo(t,a)}else r.rect(t,a,n,o)}function pj(r,t,a){var n=a.backgroundColor,o=a.borderColor,u=a.borderWidth;!n&&(!o||!u)||(r.beginPath(),gj(r,as(t.x)+u/2,as(t.y)+u/2,as(t.w)-u,as(t.h)-u,a.borderRadius),r.closePath(),n&&(r.fillStyle=n,r.fill()),o&&u&&(r.strokeStyle=o,r.lineWidth=u,r.lineJoin="miter",r.stroke()))}function yj(r,t,a){var n=a.lineHeight,o=r.w,u=r.x,h=r.y+n/2;return t==="center"?u+=o/2:(t==="end"||t==="right")&&(u+=o),{h:n,w:o,x:u,y:h}}function vj(r,t,a){var n=r.shadowBlur,o=a.stroked,u=as(a.x),h=as(a.y),g=as(a.w);o&&r.strokeText(t,u,h,g),a.filled&&(n&&o&&(r.shadowBlur=0),r.fillText(t,u,h,g),n&&o&&(r.shadowBlur=n))}function bj(r,t,a,n){var o=n.textAlign,u=n.color,h=!!u,g=n.font,m=t.length,p=n.textStrokeColor,y=n.textStrokeWidth,x=p&&y,v;if(!(!m||!h&&!x))for(a=yj(a,o,g),r.font=g.string,r.textAlign=o,r.textBaseline="middle",r.shadowBlur=n.textShadowBlur,r.shadowColor=n.textShadowColor,h&&(r.fillStyle=u),x&&(r.lineJoin="round",r.lineWidth=y,r.strokeStyle=p),v=0,m=t.length;v<m;++v)vj(r,t[v],{stroked:x,filled:h,w:a.w,x:a.x,y:a.y+a.h*v})}var Yp=function(r,t,a,n){var o=this;o._config=r,o._index=n,o._model=null,o._rects=null,o._ctx=t,o._el=a};_i(Yp.prototype,{_modelize:function(r,t,a,n){var o=this,u=o._index,h=Kv(wt([a.font,{}],n,u)),g=wt([a.color,Wv.color],n,u);return{align:wt([a.align,"center"],n,u),anchor:wt([a.anchor,"center"],n,u),area:n.chart.chartArea,backgroundColor:wt([a.backgroundColor,null],n,u),borderColor:wt([a.borderColor,null],n,u),borderRadius:wt([a.borderRadius,0],n,u),borderWidth:wt([a.borderWidth,0],n,u),clamp:wt([a.clamp,!1],n,u),clip:wt([a.clip,!1],n,u),color:g,display:r,font:h,lines:t,offset:wt([a.offset,4],n,u),opacity:wt([a.opacity,1],n,u),origin:fj(o._el,n),padding:Xv(wt([a.padding,4],n,u)),positioner:mj(o._el),rotation:wt([a.rotation,0],n,u)*(Math.PI/180),size:wi.textSize(o._ctx,t,h),textAlign:wt([a.textAlign,"start"],n,u),textShadowBlur:wt([a.textShadowBlur,0],n,u),textShadowColor:wt([a.textShadowColor,g],n,u),textStrokeColor:wt([a.textStrokeColor,g],n,u),textStrokeWidth:wt([a.textStrokeWidth,0],n,u)}},update:function(r){var t=this,a=null,n=null,o=t._index,u=t._config,h,g,m,p=wt([u.display,!0],r,o);p&&(h=r.dataset.data[o],g=Gv(gp(u.formatter,[h,r]),h),m=vi(g)?[]:wi.toTextLines(g),m.length&&(a=t._modelize(p,m,u,r),n=hj(a))),t._model=a,t._rects=n},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(r,t){var a=this,n=r.ctx,o=a._model,u=a._rects,h;this.visible()&&(n.save(),o.clip&&(h=o.area,n.beginPath(),n.rect(h.left,h.top,h.right-h.left,h.bottom-h.top),n.clip()),n.globalAlpha=wi.bound(0,o.opacity,1),n.translate(as(t.x),as(t.y)),n.rotate(o.rotation),pj(n,u.frame,o),bj(n,o.lines,u.text,o),n.restore())}});var xj=Number.MIN_SAFE_INTEGER||-9007199254740991,wj=Number.MAX_SAFE_INTEGER||9007199254740991;function fi(r,t,a){var n=Math.cos(a),o=Math.sin(a),u=t.x,h=t.y;return{x:u+n*(r.x-u)-o*(r.y-h),y:h+o*(r.x-u)+n*(r.y-h)}}function Xg(r,t){var a=wj,n=xj,o=t.origin,u,h,g,m,p;for(u=0;u<r.length;++u)h=r[u],g=h.x-o.x,m=h.y-o.y,p=t.vx*g+t.vy*m,a=Math.min(a,p),n=Math.max(n,p);return{min:a,max:n}}function so(r,t){var a=t.x-r.x,n=t.y-r.y,o=Math.sqrt(a*a+n*n);return{vx:(t.x-r.x)/o,vy:(t.y-r.y)/o,origin:r,ln:o}}var Vp=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};_i(Vp.prototype,{center:function(){var r=this._rect;return{x:r.x+r.w/2,y:r.y+r.h/2}},update:function(r,t,a){this._rotation=a,this._rect={x:t.x+r.x,y:t.y+r.y,w:t.w,h:t.h}},contains:function(r){var t=this,a=1,n=t._rect;return r=fi(r,t.center(),-t._rotation),!(r.x<n.x-a||r.y<n.y-a||r.x>n.x+n.w+a*2||r.y>n.y+n.h+a*2)},intersects:function(r){var t=this._points(),a=r._points(),n=[so(t[0],t[1]),so(t[0],t[3])],o,u,h;for(this._rotation!==r._rotation&&n.push(so(a[0],a[1]),so(a[0],a[3])),o=0;o<n.length;++o)if(u=Xg(t,n[o]),h=Xg(a,n[o]),u.max<h.min||h.max<u.min)return!1;return!0},_points:function(){var r=this,t=r._rect,a=r._rotation,n=r.center();return[fi({x:t.x,y:t.y},n,a),fi({x:t.x+t.w,y:t.y},n,a),fi({x:t.x+t.w,y:t.y+t.h},n,a),fi({x:t.x,y:t.y+t.h},n,a)]}});function Fp(r,t,a){var n=t.positioner(r,t),o=n.vx,u=n.vy;if(!o&&!u)return{x:n.x,y:n.y};var h=a.w,g=a.h,m=t.rotation,p=Math.abs(h/2*Math.cos(m))+Math.abs(g/2*Math.sin(m)),y=Math.abs(h/2*Math.sin(m))+Math.abs(g/2*Math.cos(m)),x=1/Math.max(Math.abs(o),Math.abs(u));return p*=o*x,y*=u*x,p+=t.offset*o,y+=t.offset*u,{x:n.x+p,y:n.y+y}}function jj(r,t){var a,n,o,u;for(a=r.length-1;a>=0;--a)for(o=r[a].$layout,n=a-1;n>=0&&o._visible;--n)u=r[n].$layout,u._visible&&o._box.intersects(u._box)&&t(o,u);return r}function Sj(r){var t,a,n,o,u,h,g;for(t=0,a=r.length;t<a;++t)n=r[t],o=n.$layout,o._visible&&(g=new Proxy(n._el,{get:(m,p)=>m.getProps([p],!0)[p]}),u=n.geometry(),h=Fp(g,n.model(),u),o._box.update(h,u,n.rotation()));return jj(r,function(m,p){var y=m._hidable,x=p._hidable;y&&x||x?p._visible=!1:y&&(m._visible=!1)})}var ji={prepare:function(r){var t=[],a,n,o,u,h;for(a=0,o=r.length;a<o;++a)for(n=0,u=r[a].length;n<u;++n)h=r[a][n],t.push(h),h.$layout={_box:new Vp,_hidable:!1,_visible:!0,_set:a,_idx:h._index};return t.sort(function(g,m){var p=g.$layout,y=m.$layout;return p._idx===y._idx?y._set-p._set:y._idx-p._idx}),this.update(t),t},update:function(r){var t=!1,a,n,o,u,h;for(a=0,n=r.length;a<n;++a)o=r[a],u=o.model(),h=o.$layout,h._hidable=u&&u.display==="auto",h._visible=o.visible(),t|=h._hidable;t&&Sj(r)},lookup:function(r,t){var a,n;for(a=r.length-1;a>=0;--a)if(n=r[a].$layout,n&&n._visible&&n._box.contains(t))return r[a];return null},draw:function(r,t){var a,n,o,u,h,g;for(a=0,n=t.length;a<n;++a)o=t[a],u=o.$layout,u._visible&&(h=o.geometry(),g=Fp(o._el,o.model(),h),u._box.update(g,h,o.rotation()),o.draw(r,g))}},_j=function(r){if(vi(r))return null;var t=r,a,n,o;if(Fv(r))if(!vi(r.label))t=r.label;else if(!vi(r.r))t=r.r;else for(t="",a=Object.keys(r),o=0,n=a.length;o<n;++o)t+=(o!==0?", ":"")+a[o]+": "+r[a[o]];return""+t},Nj={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:_j,labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},Gt="$datalabels",Qp="$default";function Cj(r,t){var a=r.datalabels,n={},o=[],u,h;return a===!1?null:(a===!0&&(a={}),t=_i({},[t,a]),u=t.labels||{},h=Object.keys(u),delete t.labels,h.length?h.forEach(function(g){u[g]&&o.push(_i({},[t,u[g],{_key:g}]))}):o.push(t),n=o.reduce(function(g,m){return Qv(m.listeners||{},function(p,y){g[y]=g[y]||{},g[y][m._key||Qp]=p}),delete m.listeners,g},{}),{labels:o,listeners:n})}function dd(r,t,a,n){if(t){var o=a.$context,u=a.$groups,h;t[u._set]&&(h=t[u._set][u._key],h&&gp(h,[o,n])===!0&&(r[Gt]._dirty=!0,a.update(o)))}}function Ej(r,t,a,n,o){var u,h;!a&&!n||(a?n?a!==n&&(h=u=!0):h=!0:u=!0,h&&dd(r,t.leave,a,o),u&&dd(r,t.enter,n,o))}function Tj(r,t){var a=r[Gt],n=a._listeners,o,u;if(!(!n.enter&&!n.leave)){if(t.type==="mousemove")u=ji.lookup(a._labels,t);else if(t.type!=="mouseout")return;o=a._hovered,a._hovered=u,Ej(r,n,o,u,t)}}function Dj(r,t){var a=r[Gt],n=a._listeners.click,o=n&&ji.lookup(a._labels,t);o&&dd(r,n,o,t)}var Oj={id:"datalabels",defaults:Nj,beforeInit:function(r){r[Gt]={_actives:[]}},beforeUpdate:function(r){var t=r[Gt];t._listened=!1,t._listeners={},t._datasets=[],t._labels=[]},afterDatasetUpdate:function(r,t,a){var n=t.index,o=r[Gt],u=o._datasets[n]=[],h=r.isDatasetVisible(n),g=r.data.datasets[n],m=Cj(g,a),p=t.meta.data||[],y=r.ctx,x,v,j,E,D,O,H,U;for(y.save(),x=0,j=p.length;x<j;++x)if(H=p[x],H[Gt]=[],h&&H&&r.getDataVisibility(x)&&!H.skip)for(v=0,E=m.labels.length;v<E;++v)D=m.labels[v],O=D._key,U=new Yp(D,y,H,x),U.$groups={_set:n,_key:O||Qp},U.$context={active:!1,chart:r,dataIndex:x,dataset:g,datasetIndex:n},U.update(U.$context),H[Gt].push(U),u.push(U);y.restore(),_i(o._listeners,m.listeners,{merger:function(q,ee,ae){ee[q]=ee[q]||{},ee[q][t.index]=ae[q],o._listened=!0}})},afterUpdate:function(r){r[Gt]._labels=ji.prepare(r[Gt]._datasets)},afterDatasetsDraw:function(r){ji.draw(r,r[Gt]._labels)},beforeEvent:function(r,t){if(r[Gt]._listened){var a=t.event;switch(a.type){case"mousemove":case"mouseout":Tj(r,a);break;case"click":Dj(r,a);break}}},afterEvent:function(r){var t=r[Gt],a=t._actives,n=t._actives=r.getActiveElements(),o=wi.arrayDiff(a,n),u,h,g,m,p,y,x;for(u=0,h=o.length;u<h;++u)if(p=o[u],p[1])for(x=p[0].element[Gt]||[],g=0,m=x.length;g<m;++g)y=x[g],y.$context.active=p[1]===1,y.update(y.$context);(t._dirty||o.length)&&(ji.update(t._labels),r.render()),delete t._dirty}};$a.register(cn,un,on,dn,hn,fn,Oj,pd);const Aj=({sheets:r,isLoading:t=!1})=>{if(t)return l.jsxs("div",{className:"chart-container",children:[l.jsx("h3",{children:"Comparison of Purchased vs Used Sheets"}),l.jsx("div",{className:"loading-spinner",id:"sheetsLoadingSpinner"}),l.jsx("p",{children:"Loading sheets data..."})]});if(!r||r.length===0)return l.jsxs("div",{className:"chart-container",children:[l.jsx("h3",{children:"Comparison of Purchased vs Used Sheets"}),l.jsx("p",{children:"No sheets data available for this project."})]});const a=r.length,n=r.reduce((g,m)=>g+(m.TotalReceived||0),0),o=r.reduce((g,m)=>g+(m.TotalUsed||0),0),u={labels:r.map(g=>g.Sheet),datasets:[{label:"Total Received",data:r.map(g=>g.TotalReceived||0),backgroundColor:"rgba(75, 192, 192, 0.6)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1},{label:"Total Used",data:r.map(g=>g.TotalUsed||0),backgroundColor:"rgba(255, 99, 132, 0.6)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1}]},h={responsive:!0,maintainAspectRatio:!1,layout:{padding:{bottom:25}},plugins:{datalabels:{color:"#000",align:"top",anchor:"end",font:{size:12,weight:"bold"},formatter:function(g){return g>0?g.toString():"0"}},legend:{position:"top",font:{size:16,weight:"bold"}},title:{display:!0,text:"Sheets Overview by Details",font:{size:20,weight:"bold"}}},scales:{x:{title:{display:!0,text:"Sheets",font:{size:16,weight:"bold"}},ticks:{autoSkip:!0,maxRotation:45,minRotation:0,font:{size:12,weight:"bold"}}},y:{beginAtZero:!0,title:{display:!0,text:"Quantity",font:{size:16,weight:"bold"}},ticks:{font:{size:14,weight:"bold"}}}}};return l.jsxs("div",{className:"chart-container",children:[l.jsx("h3",{children:"Comparison of Purchased vs Used Sheets"}),l.jsx("div",{className:"chart-wrapper",children:l.jsx(Zv,{data:u,options:h})}),l.jsxs("div",{className:"chart-info",style:{display:"flex",justifyContent:"space-around",marginTop:"20px",flexWrap:"wrap",gap:"20px"},children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Total Sheets:"})," ",a]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Total Received:"})," ",n]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Total Used:"})," ",o]})]})]})},Gp=6048e5,kj=864e5,Ri=6e4,Mi=36e5,Rj=1e3,Jg=Symbol.for("constructDateFrom");function ut(r,t){return typeof r=="function"?r(t):r&&typeof r=="object"&&Jg in r?r[Jg](t):r instanceof Date?new r.constructor(t):new Date(t)}function Oe(r,t){return ut(t||r,r)}function bo(r,t,a){const n=Oe(r,a==null?void 0:a.in);return isNaN(t)?ut((a==null?void 0:a.in)||r,NaN):(t&&n.setDate(n.getDate()+t),n)}function Sd(r,t,a){const n=Oe(r,a==null?void 0:a.in);if(isNaN(t))return ut(r,NaN);if(!t)return n;const o=n.getDate(),u=ut(r,n.getTime());u.setMonth(n.getMonth()+t+1,0);const h=u.getDate();return o>=h?u:(n.setFullYear(u.getFullYear(),u.getMonth(),o),n)}function _d(r,t,a){return ut(r,+Oe(r)+t)}function Mj(r,t,a){return _d(r,t*Mi)}let Uj={};function rr(){return Uj}function Ua(r,t){var g,m,p,y,x,v,j,E;const a=rr(),n=(E=(j=(y=(p=t==null?void 0:t.weekStartsOn)!=null?p:(m=(g=t==null?void 0:t.locale)==null?void 0:g.options)==null?void 0:m.weekStartsOn)!=null?y:a.weekStartsOn)!=null?j:(v=(x=a.locale)==null?void 0:x.options)==null?void 0:v.weekStartsOn)!=null?E:0,o=Oe(r,t==null?void 0:t.in),u=o.getDay(),h=(u<n?7:0)+u-n;return o.setDate(o.getDate()-h),o.setHours(0,0,0,0),o}function ln(r,t){return Ua(r,at($e({},t),{weekStartsOn:1}))}function Kp(r,t){const a=Oe(r,t==null?void 0:t.in),n=a.getFullYear(),o=ut(a,0);o.setFullYear(n+1,0,4),o.setHours(0,0,0,0);const u=ln(o),h=ut(a,0);h.setFullYear(n,0,4),h.setHours(0,0,0,0);const g=ln(h);return a.getTime()>=u.getTime()?n+1:a.getTime()>=g.getTime()?n:n-1}function uo(r){const t=Oe(r),a=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return a.setUTCFullYear(t.getFullYear()),+r-+a}function nr(r,...t){const a=ut.bind(null,t.find(n=>typeof n=="object"));return t.map(a)}function hd(r,t){const a=Oe(r,t==null?void 0:t.in);return a.setHours(0,0,0,0),a}function Wp(r,t,a){const[n,o]=nr(a==null?void 0:a.in,r,t),u=hd(n),h=hd(o),g=+u-uo(u),m=+h-uo(h);return Math.round((g-m)/kj)}function qj(r,t){const a=Kp(r,t),n=ut(r,0);return n.setFullYear(a,0,4),n.setHours(0,0,0,0),ln(n)}function Lj(r,t,a){const n=Oe(r,a==null?void 0:a.in);return n.setTime(n.getTime()+t*Ri),n}function zj(r,t,a){return Sd(r,t*3,a)}function $j(r,t,a){return _d(r,t*1e3)}function Bj(r,t,a){return bo(r,t*7,a)}function Pj(r,t,a){return Sd(r,t*12,a)}function Si(r,t){const a=+Oe(r)-+Oe(t);return a<0?-1:a>0?1:a}function Ij(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function Xp(r){return!(!Ij(r)&&typeof r!="number"||isNaN(+Oe(r)))}function Hj(r,t,a){const[n,o]=nr(a==null?void 0:a.in,r,t),u=n.getFullYear()-o.getFullYear(),h=n.getMonth()-o.getMonth();return u*12+h}function Yj(r,t,a){const[n,o]=nr(a==null?void 0:a.in,r,t);return n.getFullYear()-o.getFullYear()}function Jp(r,t,a){const[n,o]=nr(a==null?void 0:a.in,r,t),u=Zg(n,o),h=Math.abs(Wp(n,o));n.setDate(n.getDate()-u*h);const g=+(Zg(n,o)===-u),m=u*(h-g);return m===0?0:m}function Zg(r,t){const a=r.getFullYear()-t.getFullYear()||r.getMonth()-t.getMonth()||r.getDate()-t.getDate()||r.getHours()-t.getHours()||r.getMinutes()-t.getMinutes()||r.getSeconds()-t.getSeconds()||r.getMilliseconds()-t.getMilliseconds();return a<0?-1:a>0?1:a}function Ui(r){return t=>{const n=(r?Math[r]:Math.trunc)(t);return n===0?0:n}}function Vj(r,t,a){const[n,o]=nr(a==null?void 0:a.in,r,t),u=(+n-+o)/Mi;return Ui(a==null?void 0:a.roundingMethod)(u)}function Nd(r,t){return+Oe(r)-+Oe(t)}function Fj(r,t,a){const n=Nd(r,t)/Ri;return Ui(a==null?void 0:a.roundingMethod)(n)}function Zp(r,t){const a=Oe(r,t==null?void 0:t.in);return a.setHours(23,59,59,999),a}function e0(r,t){const a=Oe(r,t==null?void 0:t.in),n=a.getMonth();return a.setFullYear(a.getFullYear(),n+1,0),a.setHours(23,59,59,999),a}function Qj(r,t){const a=Oe(r,t==null?void 0:t.in);return+Zp(a,t)==+e0(a,t)}function t0(r,t,a){const[n,o,u]=nr(a==null?void 0:a.in,r,r,t),h=Si(o,u),g=Math.abs(Hj(o,u));if(g<1)return 0;o.getMonth()===1&&o.getDate()>27&&o.setDate(30),o.setMonth(o.getMonth()-h*g);let m=Si(o,u)===-h;Qj(n)&&g===1&&Si(n,u)===1&&(m=!1);const p=h*(g-+m);return p===0?0:p}function Gj(r,t,a){const n=t0(r,t,a)/3;return Ui(a==null?void 0:a.roundingMethod)(n)}function Kj(r,t,a){const n=Nd(r,t)/1e3;return Ui(a==null?void 0:a.roundingMethod)(n)}function Wj(r,t,a){const n=Jp(r,t,a)/7;return Ui(a==null?void 0:a.roundingMethod)(n)}function Xj(r,t,a){const[n,o]=nr(a==null?void 0:a.in,r,t),u=Si(n,o),h=Math.abs(Yj(n,o));n.setFullYear(1584),o.setFullYear(1584);const g=Si(n,o)===-u,m=u*(h-+g);return m===0?0:m}function Jj(r,t){const a=Oe(r,t==null?void 0:t.in),n=a.getMonth(),o=n-n%3;return a.setMonth(o,1),a.setHours(0,0,0,0),a}function Zj(r,t){const a=Oe(r,t==null?void 0:t.in);return a.setDate(1),a.setHours(0,0,0,0),a}function eS(r,t){const a=Oe(r,t==null?void 0:t.in),n=a.getFullYear();return a.setFullYear(n+1,0,0),a.setHours(23,59,59,999),a}function a0(r,t){const a=Oe(r,t==null?void 0:t.in);return a.setFullYear(a.getFullYear(),0,1),a.setHours(0,0,0,0),a}function tS(r,t){const a=Oe(r,t==null?void 0:t.in);return a.setMinutes(59,59,999),a}function aS(r,t){var g,m,p,y;const a=rr(),n=(y=(p=a.weekStartsOn)!=null?p:(m=(g=a.locale)==null?void 0:g.options)==null?void 0:m.weekStartsOn)!=null?y:0,o=Oe(r,t==null?void 0:t.in),u=o.getDay(),h=(u<n?-7:0)+6-(u-n);return o.setDate(o.getDate()+h),o.setHours(23,59,59,999),o}function sS(r,t){const a=Oe(r,t==null?void 0:t.in);return a.setSeconds(59,999),a}function rS(r,t){const a=Oe(r,t==null?void 0:t.in),n=a.getMonth(),o=n-n%3+3;return a.setMonth(o,0),a.setHours(23,59,59,999),a}function nS(r,t){const a=Oe(r,t==null?void 0:t.in);return a.setMilliseconds(999),a}const iS={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},lS=(r,t,a)=>{let n;const o=iS[r];return typeof o=="string"?n=o:t===1?n=o.one:n=o.other.replace("{{count}}",t.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+n:n+" ago":n};function Wu(r){return(t={})=>{const a=t.width?String(t.width):r.defaultWidth;return r.formats[a]||r.formats[r.defaultWidth]}}const oS={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},cS={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},uS={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},dS={date:Wu({formats:oS,defaultWidth:"full"}),time:Wu({formats:cS,defaultWidth:"full"}),dateTime:Wu({formats:uS,defaultWidth:"full"})},hS={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},fS=(r,t,a,n)=>hS[r];function mi(r){return(t,a)=>{const n=a!=null&&a.context?String(a.context):"standalone";let o;if(n==="formatting"&&r.formattingValues){const h=r.defaultFormattingWidth||r.defaultWidth,g=a!=null&&a.width?String(a.width):h;o=r.formattingValues[g]||r.formattingValues[h]}else{const h=r.defaultWidth,g=a!=null&&a.width?String(a.width):r.defaultWidth;o=r.values[g]||r.values[h]}const u=r.argumentCallback?r.argumentCallback(t):t;return o[u]}}const mS={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},gS={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},pS={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},yS={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},vS={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},bS={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},xS=(r,t)=>{const a=Number(r),n=a%100;if(n>20||n<10)switch(n%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},wS={ordinalNumber:xS,era:mi({values:mS,defaultWidth:"wide"}),quarter:mi({values:gS,defaultWidth:"wide",argumentCallback:r=>r-1}),month:mi({values:pS,defaultWidth:"wide"}),day:mi({values:yS,defaultWidth:"wide"}),dayPeriod:mi({values:vS,defaultWidth:"wide",formattingValues:bS,defaultFormattingWidth:"wide"})};function gi(r){return(t,a={})=>{const n=a.width,o=n&&r.matchPatterns[n]||r.matchPatterns[r.defaultMatchWidth],u=t.match(o);if(!u)return null;const h=u[0],g=n&&r.parsePatterns[n]||r.parsePatterns[r.defaultParseWidth],m=Array.isArray(g)?SS(g,x=>x.test(h)):jS(g,x=>x.test(h));let p;p=r.valueCallback?r.valueCallback(m):m,p=a.valueCallback?a.valueCallback(p):p;const y=t.slice(h.length);return{value:p,rest:y}}}function jS(r,t){for(const a in r)if(Object.prototype.hasOwnProperty.call(r,a)&&t(r[a]))return a}function SS(r,t){for(let a=0;a<r.length;a++)if(t(r[a]))return a}function _S(r){return(t,a={})=>{const n=t.match(r.matchPattern);if(!n)return null;const o=n[0],u=t.match(r.parsePattern);if(!u)return null;let h=r.valueCallback?r.valueCallback(u[0]):u[0];h=a.valueCallback?a.valueCallback(h):h;const g=t.slice(o.length);return{value:h,rest:g}}}const NS=/^(\d+)(th|st|nd|rd)?/i,CS=/\d+/i,ES={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},TS={any:[/^b/i,/^(a|c)/i]},DS={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},OS={any:[/1/i,/2/i,/3/i,/4/i]},AS={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},kS={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},RS={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},MS={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},US={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},qS={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},LS={ordinalNumber:_S({matchPattern:NS,parsePattern:CS,valueCallback:r=>parseInt(r,10)}),era:gi({matchPatterns:ES,defaultMatchWidth:"wide",parsePatterns:TS,defaultParseWidth:"any"}),quarter:gi({matchPatterns:DS,defaultMatchWidth:"wide",parsePatterns:OS,defaultParseWidth:"any",valueCallback:r=>r+1}),month:gi({matchPatterns:AS,defaultMatchWidth:"wide",parsePatterns:kS,defaultParseWidth:"any"}),day:gi({matchPatterns:RS,defaultMatchWidth:"wide",parsePatterns:MS,defaultParseWidth:"any"}),dayPeriod:gi({matchPatterns:US,defaultMatchWidth:"any",parsePatterns:qS,defaultParseWidth:"any"})},s0={code:"en-US",formatDistance:lS,formatLong:dS,formatRelative:fS,localize:wS,match:LS,options:{weekStartsOn:0,firstWeekContainsDate:1}};function zS(r,t){const a=Oe(r,t==null?void 0:t.in);return Wp(a,a0(a))+1}function r0(r,t){const a=Oe(r,t==null?void 0:t.in),n=+ln(a)-+qj(a);return Math.round(n/Gp)+1}function Cd(r,t){var y,x,v,j,E,D,O,H;const a=Oe(r,t==null?void 0:t.in),n=a.getFullYear(),o=rr(),u=(H=(O=(j=(v=t==null?void 0:t.firstWeekContainsDate)!=null?v:(x=(y=t==null?void 0:t.locale)==null?void 0:y.options)==null?void 0:x.firstWeekContainsDate)!=null?j:o.firstWeekContainsDate)!=null?O:(D=(E=o.locale)==null?void 0:E.options)==null?void 0:D.firstWeekContainsDate)!=null?H:1,h=ut((t==null?void 0:t.in)||r,0);h.setFullYear(n+1,0,u),h.setHours(0,0,0,0);const g=Ua(h,t),m=ut((t==null?void 0:t.in)||r,0);m.setFullYear(n,0,u),m.setHours(0,0,0,0);const p=Ua(m,t);return+a>=+g?n+1:+a>=+p?n:n-1}function $S(r,t){var g,m,p,y,x,v,j,E;const a=rr(),n=(E=(j=(y=(p=t==null?void 0:t.firstWeekContainsDate)!=null?p:(m=(g=t==null?void 0:t.locale)==null?void 0:g.options)==null?void 0:m.firstWeekContainsDate)!=null?y:a.firstWeekContainsDate)!=null?j:(v=(x=a.locale)==null?void 0:x.options)==null?void 0:v.firstWeekContainsDate)!=null?E:1,o=Cd(r,t),u=ut((t==null?void 0:t.in)||r,0);return u.setFullYear(o,0,n),u.setHours(0,0,0,0),Ua(u,t)}function n0(r,t){const a=Oe(r,t==null?void 0:t.in),n=+Ua(a,t)-+$S(a,t);return Math.round(n/Gp)+1}function Fe(r,t){const a=r<0?"-":"",n=Math.abs(r).toString().padStart(t,"0");return a+n}const Es={y(r,t){const a=r.getFullYear(),n=a>0?a:1-a;return Fe(t==="yy"?n%100:n,t.length)},M(r,t){const a=r.getMonth();return t==="M"?String(a+1):Fe(a+1,2)},d(r,t){return Fe(r.getDate(),t.length)},a(r,t){const a=r.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];default:return a==="am"?"a.m.":"p.m."}},h(r,t){return Fe(r.getHours()%12||12,t.length)},H(r,t){return Fe(r.getHours(),t.length)},m(r,t){return Fe(r.getMinutes(),t.length)},s(r,t){return Fe(r.getSeconds(),t.length)},S(r,t){const a=t.length,n=r.getMilliseconds(),o=Math.trunc(n*Math.pow(10,a-3));return Fe(o,t.length)}},Xr={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ep={G:function(r,t,a){const n=r.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return a.era(n,{width:"abbreviated"});case"GGGGG":return a.era(n,{width:"narrow"});default:return a.era(n,{width:"wide"})}},y:function(r,t,a){if(t==="yo"){const n=r.getFullYear(),o=n>0?n:1-n;return a.ordinalNumber(o,{unit:"year"})}return Es.y(r,t)},Y:function(r,t,a,n){const o=Cd(r,n),u=o>0?o:1-o;if(t==="YY"){const h=u%100;return Fe(h,2)}return t==="Yo"?a.ordinalNumber(u,{unit:"year"}):Fe(u,t.length)},R:function(r,t){const a=Kp(r);return Fe(a,t.length)},u:function(r,t){const a=r.getFullYear();return Fe(a,t.length)},Q:function(r,t,a){const n=Math.ceil((r.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return Fe(n,2);case"Qo":return a.ordinalNumber(n,{unit:"quarter"});case"QQQ":return a.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(n,{width:"narrow",context:"formatting"});default:return a.quarter(n,{width:"wide",context:"formatting"})}},q:function(r,t,a){const n=Math.ceil((r.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return Fe(n,2);case"qo":return a.ordinalNumber(n,{unit:"quarter"});case"qqq":return a.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(n,{width:"narrow",context:"standalone"});default:return a.quarter(n,{width:"wide",context:"standalone"})}},M:function(r,t,a){const n=r.getMonth();switch(t){case"M":case"MM":return Es.M(r,t);case"Mo":return a.ordinalNumber(n+1,{unit:"month"});case"MMM":return a.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(n,{width:"narrow",context:"formatting"});default:return a.month(n,{width:"wide",context:"formatting"})}},L:function(r,t,a){const n=r.getMonth();switch(t){case"L":return String(n+1);case"LL":return Fe(n+1,2);case"Lo":return a.ordinalNumber(n+1,{unit:"month"});case"LLL":return a.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(n,{width:"narrow",context:"standalone"});default:return a.month(n,{width:"wide",context:"standalone"})}},w:function(r,t,a,n){const o=n0(r,n);return t==="wo"?a.ordinalNumber(o,{unit:"week"}):Fe(o,t.length)},I:function(r,t,a){const n=r0(r);return t==="Io"?a.ordinalNumber(n,{unit:"week"}):Fe(n,t.length)},d:function(r,t,a){return t==="do"?a.ordinalNumber(r.getDate(),{unit:"date"}):Es.d(r,t)},D:function(r,t,a){const n=zS(r);return t==="Do"?a.ordinalNumber(n,{unit:"dayOfYear"}):Fe(n,t.length)},E:function(r,t,a){const n=r.getDay();switch(t){case"E":case"EE":case"EEE":return a.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(n,{width:"short",context:"formatting"});default:return a.day(n,{width:"wide",context:"formatting"})}},e:function(r,t,a,n){const o=r.getDay(),u=(o-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(u);case"ee":return Fe(u,2);case"eo":return a.ordinalNumber(u,{unit:"day"});case"eee":return a.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(o,{width:"short",context:"formatting"});default:return a.day(o,{width:"wide",context:"formatting"})}},c:function(r,t,a,n){const o=r.getDay(),u=(o-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(u);case"cc":return Fe(u,t.length);case"co":return a.ordinalNumber(u,{unit:"day"});case"ccc":return a.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(o,{width:"narrow",context:"standalone"});case"cccccc":return a.day(o,{width:"short",context:"standalone"});default:return a.day(o,{width:"wide",context:"standalone"})}},i:function(r,t,a){const n=r.getDay(),o=n===0?7:n;switch(t){case"i":return String(o);case"ii":return Fe(o,t.length);case"io":return a.ordinalNumber(o,{unit:"day"});case"iii":return a.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(n,{width:"short",context:"formatting"});default:return a.day(n,{width:"wide",context:"formatting"})}},a:function(r,t,a){const o=r.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(o,{width:"narrow",context:"formatting"});default:return a.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(r,t,a){const n=r.getHours();let o;switch(n===12?o=Xr.noon:n===0?o=Xr.midnight:o=n/12>=1?"pm":"am",t){case"b":case"bb":return a.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(o,{width:"narrow",context:"formatting"});default:return a.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(r,t,a){const n=r.getHours();let o;switch(n>=17?o=Xr.evening:n>=12?o=Xr.afternoon:n>=4?o=Xr.morning:o=Xr.night,t){case"B":case"BB":case"BBB":return a.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(o,{width:"narrow",context:"formatting"});default:return a.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(r,t,a){if(t==="ho"){let n=r.getHours()%12;return n===0&&(n=12),a.ordinalNumber(n,{unit:"hour"})}return Es.h(r,t)},H:function(r,t,a){return t==="Ho"?a.ordinalNumber(r.getHours(),{unit:"hour"}):Es.H(r,t)},K:function(r,t,a){const n=r.getHours()%12;return t==="Ko"?a.ordinalNumber(n,{unit:"hour"}):Fe(n,t.length)},k:function(r,t,a){let n=r.getHours();return n===0&&(n=24),t==="ko"?a.ordinalNumber(n,{unit:"hour"}):Fe(n,t.length)},m:function(r,t,a){return t==="mo"?a.ordinalNumber(r.getMinutes(),{unit:"minute"}):Es.m(r,t)},s:function(r,t,a){return t==="so"?a.ordinalNumber(r.getSeconds(),{unit:"second"}):Es.s(r,t)},S:function(r,t){return Es.S(r,t)},X:function(r,t,a){const n=r.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return ap(n);case"XXXX":case"XX":return er(n);default:return er(n,":")}},x:function(r,t,a){const n=r.getTimezoneOffset();switch(t){case"x":return ap(n);case"xxxx":case"xx":return er(n);default:return er(n,":")}},O:function(r,t,a){const n=r.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+tp(n,":");default:return"GMT"+er(n,":")}},z:function(r,t,a){const n=r.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+tp(n,":");default:return"GMT"+er(n,":")}},t:function(r,t,a){const n=Math.trunc(+r/1e3);return Fe(n,t.length)},T:function(r,t,a){return Fe(+r,t.length)}};function tp(r,t=""){const a=r>0?"-":"+",n=Math.abs(r),o=Math.trunc(n/60),u=n%60;return u===0?a+String(o):a+String(o)+t+Fe(u,2)}function ap(r,t){return r%60===0?(r>0?"-":"+")+Fe(Math.abs(r)/60,2):er(r,t)}function er(r,t=""){const a=r>0?"-":"+",n=Math.abs(r),o=Fe(Math.trunc(n/60),2),u=Fe(n%60,2);return a+o+t+u}const sp=(r,t)=>{switch(r){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},i0=(r,t)=>{switch(r){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},BS=(r,t)=>{const a=r.match(/(P+)(p+)?/)||[],n=a[1],o=a[2];if(!o)return sp(r,t);let u;switch(n){case"P":u=t.dateTime({width:"short"});break;case"PP":u=t.dateTime({width:"medium"});break;case"PPP":u=t.dateTime({width:"long"});break;default:u=t.dateTime({width:"full"});break}return u.replace("{{date}}",sp(n,t)).replace("{{time}}",i0(o,t))},fd={p:i0,P:BS},PS=/^D+$/,IS=/^Y+$/,HS=["D","DD","YY","YYYY"];function l0(r){return PS.test(r)}function o0(r){return IS.test(r)}function md(r,t,a){const n=YS(r,t,a);if(console.warn(n),HS.includes(r))throw new RangeError(n)}function YS(r,t,a){const n=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${t}\`) for formatting ${n} to the input \`${a}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const VS=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,FS=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,QS=/^'([^]*?)'?$/,GS=/''/g,KS=/[a-zA-Z]/;function WS(r,t,a){var y,x,v,j,E,D,O,H,U,q,ee,ae,Y,re,T,C,G,z;const n=rr(),o=(x=(y=a==null?void 0:a.locale)!=null?y:n.locale)!=null?x:s0,u=(q=(U=(D=(E=a==null?void 0:a.firstWeekContainsDate)!=null?E:(j=(v=a==null?void 0:a.locale)==null?void 0:v.options)==null?void 0:j.firstWeekContainsDate)!=null?D:n.firstWeekContainsDate)!=null?U:(H=(O=n.locale)==null?void 0:O.options)==null?void 0:H.firstWeekContainsDate)!=null?q:1,h=(z=(G=(re=(Y=a==null?void 0:a.weekStartsOn)!=null?Y:(ae=(ee=a==null?void 0:a.locale)==null?void 0:ee.options)==null?void 0:ae.weekStartsOn)!=null?re:n.weekStartsOn)!=null?G:(C=(T=n.locale)==null?void 0:T.options)==null?void 0:C.weekStartsOn)!=null?z:0,g=Oe(r,a==null?void 0:a.in);if(!Xp(g))throw new RangeError("Invalid time value");let m=t.match(FS).map(W=>{const de=W[0];if(de==="p"||de==="P"){const ge=fd[de];return ge(W,o.formatLong)}return W}).join("").match(VS).map(W=>{if(W==="''")return{isToken:!1,value:"'"};const de=W[0];if(de==="'")return{isToken:!1,value:XS(W)};if(ep[de])return{isToken:!0,value:W};if(de.match(KS))throw new RangeError("Format string contains an unescaped latin alphabet character `"+de+"`");return{isToken:!1,value:W}});o.localize.preprocessor&&(m=o.localize.preprocessor(g,m));const p={firstWeekContainsDate:u,weekStartsOn:h,locale:o};return m.map(W=>{if(!W.isToken)return W.value;const de=W.value;(!(a!=null&&a.useAdditionalWeekYearTokens)&&o0(de)||!(a!=null&&a.useAdditionalDayOfYearTokens)&&l0(de))&&md(de,t,String(r));const ge=ep[de[0]];return ge(g,de,o.localize,p)}).join("")}function XS(r){const t=r.match(QS);return t?t[1].replace(GS,"'"):r}function JS(){return Object.assign({},rr())}function ZS(r,t){const a=Oe(r,t==null?void 0:t.in).getDay();return a===0?7:a}function e_(r,t){const a=t_(t)?new t(0):ut(t,0);return a.setFullYear(r.getFullYear(),r.getMonth(),r.getDate()),a.setHours(r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()),a}function t_(r){var t;return typeof r=="function"&&((t=r.prototype)==null?void 0:t.constructor)===r}const a_=10;class c0{constructor(){fe(this,"subPriority",0)}validate(t,a){return!0}}class s_ extends c0{constructor(t,a,n,o,u){super(),this.value=t,this.validateValue=a,this.setValue=n,this.priority=o,u&&(this.subPriority=u)}validate(t,a){return this.validateValue(t,this.value,a)}set(t,a,n){return this.setValue(t,a,this.value,n)}}class r_ extends c0{constructor(a,n){super();fe(this,"priority",a_);fe(this,"subPriority",-1);this.context=a||(o=>ut(n,o))}set(a,n){return n.timestampIsSet?a:ut(a,e_(a,this.context))}}class Ie{run(t,a,n,o){const u=this.parse(t,a,n,o);return u?{setter:new s_(u.value,this.validate,this.set,this.priority,this.subPriority),rest:u.rest}:null}validate(t,a,n){return!0}}class n_ extends Ie{constructor(){super(...arguments);fe(this,"priority",140);fe(this,"incompatibleTokens",["R","u","t","T"])}parse(a,n,o){switch(n){case"G":case"GG":case"GGG":return o.era(a,{width:"abbreviated"})||o.era(a,{width:"narrow"});case"GGGGG":return o.era(a,{width:"narrow"});default:return o.era(a,{width:"wide"})||o.era(a,{width:"abbreviated"})||o.era(a,{width:"narrow"})}}set(a,n,o){return n.era=o,a.setFullYear(o,0,1),a.setHours(0,0,0,0),a}}const gt={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Ra={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function pt(r,t){return r&&{value:t(r.value),rest:r.rest}}function rt(r,t){const a=t.match(r);return a?{value:parseInt(a[0],10),rest:t.slice(a[0].length)}:null}function Ma(r,t){const a=t.match(r);if(!a)return null;if(a[0]==="Z")return{value:0,rest:t.slice(1)};const n=a[1]==="+"?1:-1,o=a[2]?parseInt(a[2],10):0,u=a[3]?parseInt(a[3],10):0,h=a[5]?parseInt(a[5],10):0;return{value:n*(o*Mi+u*Ri+h*Rj),rest:t.slice(a[0].length)}}function u0(r){return rt(gt.anyDigitsSigned,r)}function dt(r,t){switch(r){case 1:return rt(gt.singleDigit,t);case 2:return rt(gt.twoDigits,t);case 3:return rt(gt.threeDigits,t);case 4:return rt(gt.fourDigits,t);default:return rt(new RegExp("^\\d{1,"+r+"}"),t)}}function ho(r,t){switch(r){case 1:return rt(gt.singleDigitSigned,t);case 2:return rt(gt.twoDigitsSigned,t);case 3:return rt(gt.threeDigitsSigned,t);case 4:return rt(gt.fourDigitsSigned,t);default:return rt(new RegExp("^-?\\d{1,"+r+"}"),t)}}function Ed(r){switch(r){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function d0(r,t){const a=t>0,n=a?t:1-t;let o;if(n<=50)o=r||100;else{const u=n+50,h=Math.trunc(u/100)*100,g=r>=u%100;o=r+h-(g?100:0)}return a?o:1-o}function h0(r){return r%400===0||r%4===0&&r%100!==0}class i_ extends Ie{constructor(){super(...arguments);fe(this,"priority",130);fe(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(a,n,o){const u=h=>({year:h,isTwoDigitYear:n==="yy"});switch(n){case"y":return pt(dt(4,a),u);case"yo":return pt(o.ordinalNumber(a,{unit:"year"}),u);default:return pt(dt(n.length,a),u)}}validate(a,n){return n.isTwoDigitYear||n.year>0}set(a,n,o){const u=a.getFullYear();if(o.isTwoDigitYear){const g=d0(o.year,u);return a.setFullYear(g,0,1),a.setHours(0,0,0,0),a}const h=!("era"in n)||n.era===1?o.year:1-o.year;return a.setFullYear(h,0,1),a.setHours(0,0,0,0),a}}class l_ extends Ie{constructor(){super(...arguments);fe(this,"priority",130);fe(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(a,n,o){const u=h=>({year:h,isTwoDigitYear:n==="YY"});switch(n){case"Y":return pt(dt(4,a),u);case"Yo":return pt(o.ordinalNumber(a,{unit:"year"}),u);default:return pt(dt(n.length,a),u)}}validate(a,n){return n.isTwoDigitYear||n.year>0}set(a,n,o,u){const h=Cd(a,u);if(o.isTwoDigitYear){const m=d0(o.year,h);return a.setFullYear(m,0,u.firstWeekContainsDate),a.setHours(0,0,0,0),Ua(a,u)}const g=!("era"in n)||n.era===1?o.year:1-o.year;return a.setFullYear(g,0,u.firstWeekContainsDate),a.setHours(0,0,0,0),Ua(a,u)}}class o_ extends Ie{constructor(){super(...arguments);fe(this,"priority",130);fe(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(a,n){return ho(n==="R"?4:n.length,a)}set(a,n,o){const u=ut(a,0);return u.setFullYear(o,0,4),u.setHours(0,0,0,0),ln(u)}}class c_ extends Ie{constructor(){super(...arguments);fe(this,"priority",130);fe(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(a,n){return ho(n==="u"?4:n.length,a)}set(a,n,o){return a.setFullYear(o,0,1),a.setHours(0,0,0,0),a}}class u_ extends Ie{constructor(){super(...arguments);fe(this,"priority",120);fe(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(a,n,o){switch(n){case"Q":case"QQ":return dt(n.length,a);case"Qo":return o.ordinalNumber(a,{unit:"quarter"});case"QQQ":return o.quarter(a,{width:"abbreviated",context:"formatting"})||o.quarter(a,{width:"narrow",context:"formatting"});case"QQQQQ":return o.quarter(a,{width:"narrow",context:"formatting"});default:return o.quarter(a,{width:"wide",context:"formatting"})||o.quarter(a,{width:"abbreviated",context:"formatting"})||o.quarter(a,{width:"narrow",context:"formatting"})}}validate(a,n){return n>=1&&n<=4}set(a,n,o){return a.setMonth((o-1)*3,1),a.setHours(0,0,0,0),a}}class d_ extends Ie{constructor(){super(...arguments);fe(this,"priority",120);fe(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(a,n,o){switch(n){case"q":case"qq":return dt(n.length,a);case"qo":return o.ordinalNumber(a,{unit:"quarter"});case"qqq":return o.quarter(a,{width:"abbreviated",context:"standalone"})||o.quarter(a,{width:"narrow",context:"standalone"});case"qqqqq":return o.quarter(a,{width:"narrow",context:"standalone"});default:return o.quarter(a,{width:"wide",context:"standalone"})||o.quarter(a,{width:"abbreviated",context:"standalone"})||o.quarter(a,{width:"narrow",context:"standalone"})}}validate(a,n){return n>=1&&n<=4}set(a,n,o){return a.setMonth((o-1)*3,1),a.setHours(0,0,0,0),a}}class h_ extends Ie{constructor(){super(...arguments);fe(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);fe(this,"priority",110)}parse(a,n,o){const u=h=>h-1;switch(n){case"M":return pt(rt(gt.month,a),u);case"MM":return pt(dt(2,a),u);case"Mo":return pt(o.ordinalNumber(a,{unit:"month"}),u);case"MMM":return o.month(a,{width:"abbreviated",context:"formatting"})||o.month(a,{width:"narrow",context:"formatting"});case"MMMMM":return o.month(a,{width:"narrow",context:"formatting"});default:return o.month(a,{width:"wide",context:"formatting"})||o.month(a,{width:"abbreviated",context:"formatting"})||o.month(a,{width:"narrow",context:"formatting"})}}validate(a,n){return n>=0&&n<=11}set(a,n,o){return a.setMonth(o,1),a.setHours(0,0,0,0),a}}class f_ extends Ie{constructor(){super(...arguments);fe(this,"priority",110);fe(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(a,n,o){const u=h=>h-1;switch(n){case"L":return pt(rt(gt.month,a),u);case"LL":return pt(dt(2,a),u);case"Lo":return pt(o.ordinalNumber(a,{unit:"month"}),u);case"LLL":return o.month(a,{width:"abbreviated",context:"standalone"})||o.month(a,{width:"narrow",context:"standalone"});case"LLLLL":return o.month(a,{width:"narrow",context:"standalone"});default:return o.month(a,{width:"wide",context:"standalone"})||o.month(a,{width:"abbreviated",context:"standalone"})||o.month(a,{width:"narrow",context:"standalone"})}}validate(a,n){return n>=0&&n<=11}set(a,n,o){return a.setMonth(o,1),a.setHours(0,0,0,0),a}}function m_(r,t,a){const n=Oe(r,a==null?void 0:a.in),o=n0(n,a)-t;return n.setDate(n.getDate()-o*7),Oe(n,a==null?void 0:a.in)}class g_ extends Ie{constructor(){super(...arguments);fe(this,"priority",100);fe(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(a,n,o){switch(n){case"w":return rt(gt.week,a);case"wo":return o.ordinalNumber(a,{unit:"week"});default:return dt(n.length,a)}}validate(a,n){return n>=1&&n<=53}set(a,n,o,u){return Ua(m_(a,o,u),u)}}function p_(r,t,a){const n=Oe(r,a==null?void 0:a.in),o=r0(n,a)-t;return n.setDate(n.getDate()-o*7),n}class y_ extends Ie{constructor(){super(...arguments);fe(this,"priority",100);fe(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(a,n,o){switch(n){case"I":return rt(gt.week,a);case"Io":return o.ordinalNumber(a,{unit:"week"});default:return dt(n.length,a)}}validate(a,n){return n>=1&&n<=53}set(a,n,o){return ln(p_(a,o))}}const v_=[31,28,31,30,31,30,31,31,30,31,30,31],b_=[31,29,31,30,31,30,31,31,30,31,30,31];class x_ extends Ie{constructor(){super(...arguments);fe(this,"priority",90);fe(this,"subPriority",1);fe(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(a,n,o){switch(n){case"d":return rt(gt.date,a);case"do":return o.ordinalNumber(a,{unit:"date"});default:return dt(n.length,a)}}validate(a,n){const o=a.getFullYear(),u=h0(o),h=a.getMonth();return u?n>=1&&n<=b_[h]:n>=1&&n<=v_[h]}set(a,n,o){return a.setDate(o),a.setHours(0,0,0,0),a}}class w_ extends Ie{constructor(){super(...arguments);fe(this,"priority",90);fe(this,"subpriority",1);fe(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(a,n,o){switch(n){case"D":case"DD":return rt(gt.dayOfYear,a);case"Do":return o.ordinalNumber(a,{unit:"date"});default:return dt(n.length,a)}}validate(a,n){const o=a.getFullYear();return h0(o)?n>=1&&n<=366:n>=1&&n<=365}set(a,n,o){return a.setMonth(0,o),a.setHours(0,0,0,0),a}}function Td(r,t,a){var x,v,j,E,D,O,H,U;const n=rr(),o=(U=(H=(E=(j=a==null?void 0:a.weekStartsOn)!=null?j:(v=(x=a==null?void 0:a.locale)==null?void 0:x.options)==null?void 0:v.weekStartsOn)!=null?E:n.weekStartsOn)!=null?H:(O=(D=n.locale)==null?void 0:D.options)==null?void 0:O.weekStartsOn)!=null?U:0,u=Oe(r,a==null?void 0:a.in),h=u.getDay(),m=(t%7+7)%7,p=7-o,y=t<0||t>6?t-(h+p)%7:(m+p)%7-(h+p)%7;return bo(u,y,a)}class j_ extends Ie{constructor(){super(...arguments);fe(this,"priority",90);fe(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(a,n,o){switch(n){case"E":case"EE":case"EEE":return o.day(a,{width:"abbreviated",context:"formatting"})||o.day(a,{width:"short",context:"formatting"})||o.day(a,{width:"narrow",context:"formatting"});case"EEEEE":return o.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(a,{width:"short",context:"formatting"})||o.day(a,{width:"narrow",context:"formatting"});default:return o.day(a,{width:"wide",context:"formatting"})||o.day(a,{width:"abbreviated",context:"formatting"})||o.day(a,{width:"short",context:"formatting"})||o.day(a,{width:"narrow",context:"formatting"})}}validate(a,n){return n>=0&&n<=6}set(a,n,o,u){return a=Td(a,o,u),a.setHours(0,0,0,0),a}}class S_ extends Ie{constructor(){super(...arguments);fe(this,"priority",90);fe(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(a,n,o,u){const h=g=>{const m=Math.floor((g-1)/7)*7;return(g+u.weekStartsOn+6)%7+m};switch(n){case"e":case"ee":return pt(dt(n.length,a),h);case"eo":return pt(o.ordinalNumber(a,{unit:"day"}),h);case"eee":return o.day(a,{width:"abbreviated",context:"formatting"})||o.day(a,{width:"short",context:"formatting"})||o.day(a,{width:"narrow",context:"formatting"});case"eeeee":return o.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return o.day(a,{width:"short",context:"formatting"})||o.day(a,{width:"narrow",context:"formatting"});default:return o.day(a,{width:"wide",context:"formatting"})||o.day(a,{width:"abbreviated",context:"formatting"})||o.day(a,{width:"short",context:"formatting"})||o.day(a,{width:"narrow",context:"formatting"})}}validate(a,n){return n>=0&&n<=6}set(a,n,o,u){return a=Td(a,o,u),a.setHours(0,0,0,0),a}}class __ extends Ie{constructor(){super(...arguments);fe(this,"priority",90);fe(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(a,n,o,u){const h=g=>{const m=Math.floor((g-1)/7)*7;return(g+u.weekStartsOn+6)%7+m};switch(n){case"c":case"cc":return pt(dt(n.length,a),h);case"co":return pt(o.ordinalNumber(a,{unit:"day"}),h);case"ccc":return o.day(a,{width:"abbreviated",context:"standalone"})||o.day(a,{width:"short",context:"standalone"})||o.day(a,{width:"narrow",context:"standalone"});case"ccccc":return o.day(a,{width:"narrow",context:"standalone"});case"cccccc":return o.day(a,{width:"short",context:"standalone"})||o.day(a,{width:"narrow",context:"standalone"});default:return o.day(a,{width:"wide",context:"standalone"})||o.day(a,{width:"abbreviated",context:"standalone"})||o.day(a,{width:"short",context:"standalone"})||o.day(a,{width:"narrow",context:"standalone"})}}validate(a,n){return n>=0&&n<=6}set(a,n,o,u){return a=Td(a,o,u),a.setHours(0,0,0,0),a}}function N_(r,t,a){const n=Oe(r,a==null?void 0:a.in),o=ZS(n,a),u=t-o;return bo(n,u,a)}class C_ extends Ie{constructor(){super(...arguments);fe(this,"priority",90);fe(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(a,n,o){const u=h=>h===0?7:h;switch(n){case"i":case"ii":return dt(n.length,a);case"io":return o.ordinalNumber(a,{unit:"day"});case"iii":return pt(o.day(a,{width:"abbreviated",context:"formatting"})||o.day(a,{width:"short",context:"formatting"})||o.day(a,{width:"narrow",context:"formatting"}),u);case"iiiii":return pt(o.day(a,{width:"narrow",context:"formatting"}),u);case"iiiiii":return pt(o.day(a,{width:"short",context:"formatting"})||o.day(a,{width:"narrow",context:"formatting"}),u);default:return pt(o.day(a,{width:"wide",context:"formatting"})||o.day(a,{width:"abbreviated",context:"formatting"})||o.day(a,{width:"short",context:"formatting"})||o.day(a,{width:"narrow",context:"formatting"}),u)}}validate(a,n){return n>=1&&n<=7}set(a,n,o){return a=N_(a,o),a.setHours(0,0,0,0),a}}class E_ extends Ie{constructor(){super(...arguments);fe(this,"priority",80);fe(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(a,n,o){switch(n){case"a":case"aa":case"aaa":return o.dayPeriod(a,{width:"abbreviated",context:"formatting"})||o.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaaa":return o.dayPeriod(a,{width:"narrow",context:"formatting"});default:return o.dayPeriod(a,{width:"wide",context:"formatting"})||o.dayPeriod(a,{width:"abbreviated",context:"formatting"})||o.dayPeriod(a,{width:"narrow",context:"formatting"})}}set(a,n,o){return a.setHours(Ed(o),0,0,0),a}}class T_ extends Ie{constructor(){super(...arguments);fe(this,"priority",80);fe(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(a,n,o){switch(n){case"b":case"bb":case"bbb":return o.dayPeriod(a,{width:"abbreviated",context:"formatting"})||o.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbbb":return o.dayPeriod(a,{width:"narrow",context:"formatting"});default:return o.dayPeriod(a,{width:"wide",context:"formatting"})||o.dayPeriod(a,{width:"abbreviated",context:"formatting"})||o.dayPeriod(a,{width:"narrow",context:"formatting"})}}set(a,n,o){return a.setHours(Ed(o),0,0,0),a}}class D_ extends Ie{constructor(){super(...arguments);fe(this,"priority",80);fe(this,"incompatibleTokens",["a","b","t","T"])}parse(a,n,o){switch(n){case"B":case"BB":case"BBB":return o.dayPeriod(a,{width:"abbreviated",context:"formatting"})||o.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBBB":return o.dayPeriod(a,{width:"narrow",context:"formatting"});default:return o.dayPeriod(a,{width:"wide",context:"formatting"})||o.dayPeriod(a,{width:"abbreviated",context:"formatting"})||o.dayPeriod(a,{width:"narrow",context:"formatting"})}}set(a,n,o){return a.setHours(Ed(o),0,0,0),a}}class O_ extends Ie{constructor(){super(...arguments);fe(this,"priority",70);fe(this,"incompatibleTokens",["H","K","k","t","T"])}parse(a,n,o){switch(n){case"h":return rt(gt.hour12h,a);case"ho":return o.ordinalNumber(a,{unit:"hour"});default:return dt(n.length,a)}}validate(a,n){return n>=1&&n<=12}set(a,n,o){const u=a.getHours()>=12;return u&&o<12?a.setHours(o+12,0,0,0):!u&&o===12?a.setHours(0,0,0,0):a.setHours(o,0,0,0),a}}class A_ extends Ie{constructor(){super(...arguments);fe(this,"priority",70);fe(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(a,n,o){switch(n){case"H":return rt(gt.hour23h,a);case"Ho":return o.ordinalNumber(a,{unit:"hour"});default:return dt(n.length,a)}}validate(a,n){return n>=0&&n<=23}set(a,n,o){return a.setHours(o,0,0,0),a}}class k_ extends Ie{constructor(){super(...arguments);fe(this,"priority",70);fe(this,"incompatibleTokens",["h","H","k","t","T"])}parse(a,n,o){switch(n){case"K":return rt(gt.hour11h,a);case"Ko":return o.ordinalNumber(a,{unit:"hour"});default:return dt(n.length,a)}}validate(a,n){return n>=0&&n<=11}set(a,n,o){return a.getHours()>=12&&o<12?a.setHours(o+12,0,0,0):a.setHours(o,0,0,0),a}}class R_ extends Ie{constructor(){super(...arguments);fe(this,"priority",70);fe(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(a,n,o){switch(n){case"k":return rt(gt.hour24h,a);case"ko":return o.ordinalNumber(a,{unit:"hour"});default:return dt(n.length,a)}}validate(a,n){return n>=1&&n<=24}set(a,n,o){const u=o<=24?o%24:o;return a.setHours(u,0,0,0),a}}class M_ extends Ie{constructor(){super(...arguments);fe(this,"priority",60);fe(this,"incompatibleTokens",["t","T"])}parse(a,n,o){switch(n){case"m":return rt(gt.minute,a);case"mo":return o.ordinalNumber(a,{unit:"minute"});default:return dt(n.length,a)}}validate(a,n){return n>=0&&n<=59}set(a,n,o){return a.setMinutes(o,0,0),a}}class U_ extends Ie{constructor(){super(...arguments);fe(this,"priority",50);fe(this,"incompatibleTokens",["t","T"])}parse(a,n,o){switch(n){case"s":return rt(gt.second,a);case"so":return o.ordinalNumber(a,{unit:"second"});default:return dt(n.length,a)}}validate(a,n){return n>=0&&n<=59}set(a,n,o){return a.setSeconds(o,0),a}}class q_ extends Ie{constructor(){super(...arguments);fe(this,"priority",30);fe(this,"incompatibleTokens",["t","T"])}parse(a,n){const o=u=>Math.trunc(u*Math.pow(10,-n.length+3));return pt(dt(n.length,a),o)}set(a,n,o){return a.setMilliseconds(o),a}}class L_ extends Ie{constructor(){super(...arguments);fe(this,"priority",10);fe(this,"incompatibleTokens",["t","T","x"])}parse(a,n){switch(n){case"X":return Ma(Ra.basicOptionalMinutes,a);case"XX":return Ma(Ra.basic,a);case"XXXX":return Ma(Ra.basicOptionalSeconds,a);case"XXXXX":return Ma(Ra.extendedOptionalSeconds,a);default:return Ma(Ra.extended,a)}}set(a,n,o){return n.timestampIsSet?a:ut(a,a.getTime()-uo(a)-o)}}class z_ extends Ie{constructor(){super(...arguments);fe(this,"priority",10);fe(this,"incompatibleTokens",["t","T","X"])}parse(a,n){switch(n){case"x":return Ma(Ra.basicOptionalMinutes,a);case"xx":return Ma(Ra.basic,a);case"xxxx":return Ma(Ra.basicOptionalSeconds,a);case"xxxxx":return Ma(Ra.extendedOptionalSeconds,a);default:return Ma(Ra.extended,a)}}set(a,n,o){return n.timestampIsSet?a:ut(a,a.getTime()-uo(a)-o)}}class $_ extends Ie{constructor(){super(...arguments);fe(this,"priority",40);fe(this,"incompatibleTokens","*")}parse(a){return u0(a)}set(a,n,o){return[ut(a,o*1e3),{timestampIsSet:!0}]}}class B_ extends Ie{constructor(){super(...arguments);fe(this,"priority",20);fe(this,"incompatibleTokens","*")}parse(a){return u0(a)}set(a,n,o){return[ut(a,o),{timestampIsSet:!0}]}}const P_={G:new n_,y:new i_,Y:new l_,R:new o_,u:new c_,Q:new u_,q:new d_,M:new h_,L:new f_,w:new g_,I:new y_,d:new x_,D:new w_,E:new j_,e:new S_,c:new __,i:new C_,a:new E_,b:new T_,B:new D_,h:new O_,H:new A_,K:new k_,k:new R_,m:new M_,s:new U_,S:new q_,X:new L_,x:new z_,t:new $_,T:new B_},I_=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,H_=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Y_=/^'([^]*?)'?$/,V_=/''/g,F_=/\S/,Q_=/[a-zA-Z]/;function G_(r,t,a,n){var O,H,U,q,ee,ae,Y,re,T,C,G,z,W,de,ge,xe,A,Q;const o=()=>ut((n==null?void 0:n.in)||a,NaN),u=JS(),h=(H=(O=n==null?void 0:n.locale)!=null?O:u.locale)!=null?H:s0,g=(C=(T=(ae=(ee=n==null?void 0:n.firstWeekContainsDate)!=null?ee:(q=(U=n==null?void 0:n.locale)==null?void 0:U.options)==null?void 0:q.firstWeekContainsDate)!=null?ae:u.firstWeekContainsDate)!=null?T:(re=(Y=u.locale)==null?void 0:Y.options)==null?void 0:re.firstWeekContainsDate)!=null?C:1,m=(Q=(A=(de=(W=n==null?void 0:n.weekStartsOn)!=null?W:(z=(G=n==null?void 0:n.locale)==null?void 0:G.options)==null?void 0:z.weekStartsOn)!=null?de:u.weekStartsOn)!=null?A:(xe=(ge=u.locale)==null?void 0:ge.options)==null?void 0:xe.weekStartsOn)!=null?Q:0;if(!t)return r?o():Oe(a,n==null?void 0:n.in);const p={firstWeekContainsDate:g,weekStartsOn:m,locale:h},y=[new r_(n==null?void 0:n.in,a)],x=t.match(H_).map(te=>{const le=te[0];if(le in fd){const S=fd[le];return S(te,h.formatLong)}return te}).join("").match(I_),v=[];for(let te of x){!(n!=null&&n.useAdditionalWeekYearTokens)&&o0(te)&&md(te,t,r),!(n!=null&&n.useAdditionalDayOfYearTokens)&&l0(te)&&md(te,t,r);const le=te[0],S=P_[le];if(S){const{incompatibleTokens:N}=S;if(Array.isArray(N)){const P=v.find(ce=>N.includes(ce.token)||ce.token===le);if(P)throw new RangeError(`The format string mustn't contain \`${P.fullToken}\` and \`${te}\` at the same time`)}else if(S.incompatibleTokens==="*"&&v.length>0)throw new RangeError(`The format string mustn't contain \`${te}\` and any other token at the same time`);v.push({token:le,fullToken:te});const $=S.run(r,te,h.match,p);if(!$)return o();y.push($.setter),r=$.rest}else{if(le.match(Q_))throw new RangeError("Format string contains an unescaped latin alphabet character `"+le+"`");if(te==="''"?te="'":le==="'"&&(te=K_(te)),r.indexOf(te)===0)r=r.slice(te.length);else return o()}}if(r.length>0&&F_.test(r))return o();const j=y.map(te=>te.priority).sort((te,le)=>le-te).filter((te,le,S)=>S.indexOf(te)===le).map(te=>y.filter(le=>le.priority===te).sort((le,S)=>S.subPriority-le.subPriority)).map(te=>te[0]);let E=Oe(a,n==null?void 0:n.in);if(isNaN(+E))return o();const D={};for(const te of j){if(!te.validate(E,p))return o();const le=te.set(E,D,p);Array.isArray(le)?(E=le[0],Object.assign(D,le[1])):E=le}return E}function K_(r){return r.match(Y_)[1].replace(V_,"'")}function W_(r,t){const a=Oe(r,t==null?void 0:t.in);return a.setMinutes(0,0,0),a}function X_(r,t){const a=Oe(r,t==null?void 0:t.in);return a.setSeconds(0,0),a}function J_(r,t){const a=Oe(r,t==null?void 0:t.in);return a.setMilliseconds(0),a}function Z_(r,t){var p;const a=()=>ut(t==null?void 0:t.in,NaN),n=(p=t==null?void 0:t.additionalDigits)!=null?p:2,o=sN(r);let u;if(o.date){const y=rN(o.date,n);u=nN(y.restDateString,y.year)}if(!u||isNaN(+u))return a();const h=+u;let g=0,m;if(o.time&&(g=iN(o.time),isNaN(g)))return a();if(o.timezone){if(m=lN(o.timezone),isNaN(m))return a()}else{const y=new Date(h+g),x=Oe(0,t==null?void 0:t.in);return x.setFullYear(y.getUTCFullYear(),y.getUTCMonth(),y.getUTCDate()),x.setHours(y.getUTCHours(),y.getUTCMinutes(),y.getUTCSeconds(),y.getUTCMilliseconds()),x}return Oe(h+g+m,t==null?void 0:t.in)}const ro={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},eN=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,tN=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,aN=/^([+-])(\d{2})(?::?(\d{2}))?$/;function sN(r){const t={},a=r.split(ro.dateTimeDelimiter);let n;if(a.length>2)return t;if(/:/.test(a[0])?n=a[0]:(t.date=a[0],n=a[1],ro.timeZoneDelimiter.test(t.date)&&(t.date=r.split(ro.timeZoneDelimiter)[0],n=r.substr(t.date.length,r.length))),n){const o=ro.timezone.exec(n);o?(t.time=n.replace(o[1],""),t.timezone=o[1]):t.time=n}return t}function rN(r,t){const a=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=r.match(a);if(!n)return{year:NaN,restDateString:""};const o=n[1]?parseInt(n[1]):null,u=n[2]?parseInt(n[2]):null;return{year:u===null?o:u*100,restDateString:r.slice((n[1]||n[2]).length)}}function nN(r,t){if(t===null)return new Date(NaN);const a=r.match(eN);if(!a)return new Date(NaN);const n=!!a[4],o=pi(a[1]),u=pi(a[2])-1,h=pi(a[3]),g=pi(a[4]),m=pi(a[5])-1;if(n)return hN(t,g,m)?oN(t,g,m):new Date(NaN);{const p=new Date(0);return!uN(t,u,h)||!dN(t,o)?new Date(NaN):(p.setUTCFullYear(t,u,Math.max(o,h)),p)}}function pi(r){return r?parseInt(r):1}function iN(r){const t=r.match(tN);if(!t)return NaN;const a=Xu(t[1]),n=Xu(t[2]),o=Xu(t[3]);return fN(a,n,o)?a*Mi+n*Ri+o*1e3:NaN}function Xu(r){return r&&parseFloat(r.replace(",","."))||0}function lN(r){if(r==="Z")return 0;const t=r.match(aN);if(!t)return 0;const a=t[1]==="+"?-1:1,n=parseInt(t[2]),o=t[3]&&parseInt(t[3])||0;return mN(n,o)?a*(n*Mi+o*Ri):NaN}function oN(r,t,a){const n=new Date(0);n.setUTCFullYear(r,0,4);const o=n.getUTCDay()||7,u=(t-1)*7+a+1-o;return n.setUTCDate(n.getUTCDate()+u),n}const cN=[31,null,31,30,31,30,31,31,30,31,30,31];function f0(r){return r%400===0||r%4===0&&r%100!==0}function uN(r,t,a){return t>=0&&t<=11&&a>=1&&a<=(cN[t]||(f0(r)?29:28))}function dN(r,t){return t>=1&&t<=(f0(r)?366:365)}function hN(r,t,a){return t>=1&&t<=53&&a>=0&&a<=6}function fN(r,t,a){return r===24?t===0&&a===0:a>=0&&a<60&&t>=0&&t<60&&r>=0&&r<25}function mN(r,t){return t>=0&&t<=59}const gN={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};eb._date.override({_id:"date-fns",formats:function(){return gN},parse:function(r,t){if(r===null||typeof r=="undefined")return null;const a=typeof r;return a==="number"||r instanceof Date?r=Oe(r):a==="string"&&(typeof t=="string"?r=G_(r,t,new Date,this.options):r=Z_(r,this.options)),Xp(r)?r.getTime():null},format:function(r,t){return WS(r,t,this.options)},add:function(r,t,a){switch(a){case"millisecond":return _d(r,t);case"second":return $j(r,t);case"minute":return Lj(r,t);case"hour":return Mj(r,t);case"day":return bo(r,t);case"week":return Bj(r,t);case"month":return Sd(r,t);case"quarter":return zj(r,t);case"year":return Pj(r,t);default:return r}},diff:function(r,t,a){switch(a){case"millisecond":return Nd(r,t);case"second":return Kj(r,t);case"minute":return Fj(r,t);case"hour":return Vj(r,t);case"day":return Jp(r,t);case"week":return Wj(r,t);case"month":return t0(r,t);case"quarter":return Gj(r,t);case"year":return Xj(r,t);default:return 0}},startOf:function(r,t,a){switch(t){case"second":return J_(r);case"minute":return X_(r);case"hour":return W_(r);case"day":return hd(r);case"week":return Ua(r);case"isoWeek":return Ua(r,{weekStartsOn:+a});case"month":return Zj(r);case"quarter":return Jj(r);case"year":return a0(r);default:return r}},endOf:function(r,t){switch(t){case"second":return nS(r);case"minute":return sS(r);case"hour":return tS(r);case"day":return Zp(r);case"week":return aS(r);case"month":return e0(r);case"quarter":return rS(r);case"year":return eS(r);default:return r}}});new Os;const pN=r=>la({queryKey:["project-deliveries",r],queryFn:()=>_(null,null,function*(){const a=yield new Os().getDeliveryDockets(r);console.log(" Raw deliveries data:",a);const n=a.map(m=>{const p=m["Ready at"];if(!p)return console.warn(" No Ready at date found for delivery:",m),null;try{const[y,x]=p.split(" "),v=y.split("/");let j,E,D;parseInt(v[0])>12?[j,E,D]=v:[E,j,D]=v;const O=`${D}-${E.padStart(2,"0")}-${j.padStart(2,"0")}T${x||"00:00:00"}`,H=new Date(O);return isNaN(H.getTime())?(console.warn(" Invalid date format:",p),null):at($e({},m),{parsedDate:H,dayKey:H.toISOString().split("T")[0]})}catch(y){return console.warn(" Error parsing date:",p,y),null}}).filter(Boolean);console.log(" Processed deliveries:",n);const o={};n.forEach(m=>{o[m.dayKey]=(o[m.dayKey]||0)+1});const u=Object.keys(o).sort();let h=0;const g=u.map(m=>(h+=o[m],h));return console.log(" Date counts:",o),console.log(" Sorted dates:",u),console.log(" Cumulative data:",g),{deliveries:n,dateCounts:o,sortedDates:u,dailyData:u.map(m=>o[m]),cumulativeData:g,totalDeliveries:n.length}}),enabled:!!r,staleTime:300*1e3});$a.register(cn,un,gd,pp,dn,hn,fn,tb,pd);const yN=({projectName:r})=>{const{data:t,isLoading:a,error:n}=pN(r),{data:o,isLoading:u}=zp(r);if(a||u)return l.jsx(Ca,{});if(n)return l.jsx("div",{className:"error-message",children:"Error loading delivery data"});if(!t||!o)return l.jsx("div",{className:"no-data",children:"No delivery data available"});const{sortedDates:h,dailyData:g,cumulativeData:m,totalDeliveries:p}=t,y=o["Deliveries Allowed"]?parseInt(o["Deliveries Allowed"].toString()):0,v=p>=Math.floor(y*.9)&&p<y,j=p>=y&&y>0,E={labels:h,datasets:[{label:"Trips per Day",data:g,borderColor:"#4caf50",backgroundColor:"rgba(76,175,80,0.2)",pointBackgroundColor:"#0af013",pointRadius:6,fill:!0,tension:.3},{label:"Cumulative Trips",data:m,borderColor:"#c1c536",backgroundColor:"rgba(193,197,54,0.2)",pointBackgroundColor:"#ffc107",pointRadius:6,fill:!0,tension:.3},{label:"Delivery Allowances",data:h.map(()=>y),borderColor:"#cb4335",borderWidth:4,borderDash:[5,5],pointRadius:0,fill:!1}]},D={responsive:!0,maintainAspectRatio:!1,animation:{duration:2e3,easing:"easeInOutQuad"},plugins:{title:{display:!0,text:"Daily and Cumulative Trips",font:{size:18,weight:"bold"}},tooltip:{mode:"index",intersect:!1},legend:{labels:{usePointStyle:!0,font:{size:14}}},datalabels:{display:!1}},interaction:{mode:"index",intersect:!1},scales:{x:{type:"time",time:{unit:"day"},title:{display:!0,text:"Date",font:{size:16,weight:"bold"}}},y:{beginAtZero:!0,title:{display:!0,text:"Number of Trips",font:{size:16,weight:"bold"}}}}};return l.jsxs("div",{className:"chart-container",children:[l.jsx("div",{className:"chart-info",children:l.jsxs("div",{className:"chart-stats trips-stats-row",children:[l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"emoji",children:""}),l.jsx("span",{className:"stat-label",children:"Delivery Allowances:"}),l.jsx("span",{className:"stat-value",children:y})]}),l.jsxs("div",{className:`stat-item trips-made-stat${j?" danger":v?" warning":""}`,children:[l.jsx("span",{className:"emoji",children:""}),l.jsx("span",{className:"stat-label",children:"Trips Made:"}),l.jsx("span",{className:"stat-value",children:p}),j&&l.jsx("span",{className:"stat-alert",title:"Exceeded delivery allowance",children:""}),v&&!j&&l.jsx("span",{className:"stat-alert",title:"Close to delivery allowance",children:""})]})]})}),l.jsx("div",{className:"chart-wrapper",children:l.jsx(ab,{data:E,options:D})})]})},vN=({onMetricsUpdate:r,showDetails:t=!1})=>{const[a,n]=M.useState({loadTime:0,renderTime:0,memoryUsage:0,domSize:0,jsHeapSize:0,timestamp:Date.now()}),[o,u]=M.useState(!1),[h,g]=M.useState(t),m=M.useCallback(()=>{if(performance&&performance.getEntriesByType){const O=performance.getEntriesByType("navigation")[0];if(O)return O.loadEventEnd-O.fetchStart}return performance.now()},[]),p=M.useCallback(()=>{if("memory"in performance){const O=performance.memory;return{used:Math.round(O.usedJSHeapSize/1024/1024),total:Math.round(O.totalJSHeapSize/1024/1024),limit:Math.round(O.jsHeapSizeLimit/1024/1024)}}return{used:0,total:0,limit:0}},[]),y=M.useCallback(()=>document.querySelectorAll("*").length,[]),x=M.useCallback(()=>new Promise(O=>{const H=performance.now();requestAnimationFrame(()=>{requestAnimationFrame(()=>{const U=performance.now();O(U-H)})})}),[]),v=M.useCallback(()=>_(null,null,function*(){u(!0);try{const O=m(),H=yield x(),U=p(),q=y(),ee={loadTime:Math.round(O),renderTime:Math.round(H),memoryUsage:U.used,domSize:q,jsHeapSize:U.total,timestamp:Date.now()};n(ee),r&&r(ee)}catch(O){console.error("Error measuring performance:",O)}finally{u(!1)}}),[m,x,p,y,r]);M.useEffect(()=>{const O=setInterval(()=>{o||v()},3e4);return()=>clearInterval(O)},[v,o]),M.useEffect(()=>{const O=setTimeout(()=>{v()},1e3);return()=>clearTimeout(O)},[v]);const j=(O,H)=>O<=H.good?"good":O<=H.warning?"warning":"poor",E=O=>{switch(O){case"good":return"";case"warning":return"";case"poor":return"";default:return""}},D=O=>{switch(O){case"good":return"performance-good";case"warning":return"performance-warning";case"poor":return"performance-poor";default:return"performance-unknown"}};return l.jsxs("div",{className:"performance-monitor",children:[l.jsxs("div",{className:"monitor-header",children:[l.jsx("h3",{children:" Performance Monitor"}),l.jsxs("div",{className:"monitor-controls",children:[l.jsx("button",{onClick:v,disabled:o,className:"monitor-btn",children:o?" Monitoring...":" Measure Performance"}),l.jsx("button",{onClick:()=>g(!h),className:"toggle-details-btn",children:h?" Hide Details":" Show Details"})]})]}),l.jsxs("div",{className:"performance-metrics",children:[l.jsxs("div",{className:"metric-grid",children:[l.jsxs("div",{className:`metric-item ${D(j(a.loadTime,{good:2e3,warning:5e3}))}`,children:[l.jsx("div",{className:"metric-icon",children:E(j(a.loadTime,{good:2e3,warning:5e3}))}),l.jsxs("div",{className:"metric-content",children:[l.jsx("div",{className:"metric-label",children:"Load Time"}),l.jsxs("div",{className:"metric-value",children:[a.loadTime,"ms"]})]})]}),l.jsxs("div",{className:`metric-item ${D(j(a.renderTime,{good:16,warning:33}))}`,children:[l.jsx("div",{className:"metric-icon",children:E(j(a.renderTime,{good:16,warning:33}))}),l.jsxs("div",{className:"metric-content",children:[l.jsx("div",{className:"metric-label",children:"Render Time"}),l.jsxs("div",{className:"metric-value",children:[a.renderTime,"ms"]})]})]}),l.jsxs("div",{className:`metric-item ${D(j(a.memoryUsage,{good:50,warning:100}))}`,children:[l.jsx("div",{className:"metric-icon",children:E(j(a.memoryUsage,{good:50,warning:100}))}),l.jsxs("div",{className:"metric-content",children:[l.jsx("div",{className:"metric-label",children:"Memory Usage"}),l.jsxs("div",{className:"metric-value",children:[a.memoryUsage,"MB"]})]})]}),l.jsxs("div",{className:`metric-item ${D(j(a.domSize,{good:1e3,warning:3e3}))}`,children:[l.jsx("div",{className:"metric-icon",children:E(j(a.domSize,{good:1e3,warning:3e3}))}),l.jsxs("div",{className:"metric-content",children:[l.jsx("div",{className:"metric-label",children:"DOM Elements"}),l.jsx("div",{className:"metric-value",children:a.domSize})]})]}),l.jsxs("div",{className:`metric-item ${D(j(a.jsHeapSize,{good:100,warning:200}))}`,children:[l.jsx("div",{className:"metric-icon",children:E(j(a.jsHeapSize,{good:100,warning:200}))}),l.jsxs("div",{className:"metric-content",children:[l.jsx("div",{className:"metric-label",children:"JS Heap Size"}),l.jsxs("div",{className:"metric-value",children:[a.jsHeapSize,"MB"]})]})]})]}),h&&l.jsxs("div",{className:"performance-details",children:[l.jsx("h4",{children:"Performance Recommendations"}),l.jsxs("div",{className:"recommendations",children:[a.loadTime>5e3&&l.jsxs("div",{className:"recommendation warning",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"High load time. Consider optimizing bundle size or implementing lazy loading."})]}),a.renderTime>33&&l.jsxs("div",{className:"recommendation warning",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"High render time. Review heavy components or implement React.memo."})]}),a.memoryUsage>100&&l.jsxs("div",{className:"recommendation warning",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"High memory usage. Check for memory leaks or optimize state management."})]}),a.domSize>3e3&&l.jsxs("div",{className:"recommendation warning",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Large DOM tree. Consider virtualizing lists or reducing component complexity."})]}),a.jsHeapSize>200&&l.jsxs("div",{className:"recommendation warning",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Large JS heap. Review object allocations and garbage collection."})]}),a.loadTime<=2e3&&a.renderTime<=16&&a.memoryUsage<=50&&l.jsxs("div",{className:"recommendation good",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Excellent performance! The application is running optimally."})]})]}),l.jsxs("div",{className:"performance-info",children:[l.jsx("h5",{children:"Measurement Details"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Load Time:"})," Time from fetch start to load event end"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Render Time:"})," Time for two animation frames (real render measurement)"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Memory Usage:"})," Current JavaScript heap usage"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"DOM Elements:"})," Total number of DOM nodes"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"JS Heap Size:"})," Total allocated JavaScript heap"]})]}),l.jsx("p",{children:l.jsxs("em",{children:["Last updated: ",new Date(a.timestamp).toLocaleTimeString()]})})]})]})]})]})},bN=({allowances:r,isLoading:t=!1})=>{if(t)return l.jsxs("div",{className:"allowances-container",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Loading allowances..."})]});if(!r||r.length===0)return l.jsxs("div",{className:"allowances-container",children:[l.jsx("h2",{id:"project-allowances-section",children:"Project Allowances"}),l.jsx("div",{className:"no-allowances",children:l.jsx("p",{children:"No personnel allowances registered for this project."})})]});const a=r.reduce((m,p)=>{const y=p.Type||"Other",x=p.Category||"General";return m[y]||(m[y]={}),m[y][x]||(m[y][x]=[]),m[y][x].push(p),m},{}),n=(m,p)=>{if(p)switch(p.toLowerCase()){case"drafting":return"";case"tradesman":return"";case"labourers":return"";case"pms":return"";case"vertical access":return""}switch(m.toLowerCase()){case"drafting":return"";case"factory":return"";case"site":return"";case"tradesman":return"";case"labourer":return"";case"pm":return"";case"vertical access":return"";default:return""}},o=(m,p)=>{switch(m.toLowerCase()){case"site":switch(p.toLowerCase()){case"tradesman":return"Tradesman Allowances (days)";case"labourers":return"Labourers Allowances (days)";case"pms":return"PMs Allowances (days)";default:return`${p} Allowances (days)`}case"factory":switch(p.toLowerCase()){case"drafting":return"Drafting Allowances (days)";case"labourers":return"Labourers Allowances (days)";default:return`${p} Allowances (days)`}default:return`${p} Allowances (days)`}},u=m=>m<50?"#4caf50":m<99?"#c1c536":"#cb4335",h=(m,p)=>{if(!p||p===0)return"";const y=m/p*100;return y>=100?"danger":y>=90?"warning":""},g=(m,p)=>!p||p===0?0:m/p*100;return l.jsxs("div",{className:"allowances-container",children:[l.jsx("h2",{id:"project-allowances-section",children:"Project Allowances"}),Object.entries(a).map(([m,p])=>l.jsxs("div",{children:[l.jsxs("h3",{children:[m," Allowances"]}),Object.entries(p).map(([y,x])=>l.jsxs("div",{children:[l.jsx("h4",{children:y}),x.map((v,j)=>{const E=g(Number(v["Days Used"]),Number(v["Days Allowed"])),D=h(Number(v["Days Used"]),Number(v["Days Allowed"]));return l.jsxs("div",{className:`allowance-card ${D}`,children:[l.jsxs("p",{children:[l.jsx("span",{className:"emoji",children:n(m,y)}),l.jsxs("strong",{children:[o(m,y),":     "]}),l.jsx("i",{children:v["Days Allowed"]||"0"})]}),l.jsxs("p",{children:[l.jsx("span",{className:"emoji",children:""}),l.jsx("strong",{children:"Current days used:     "}),l.jsx("i",{children:v["Days Used"]||"0.00"})]}),l.jsx("div",{className:"progress-container",children:l.jsxs("div",{className:"progress-bar",style:{"--progress-width":`${E}%`,"--progress-color":u(E),"--progress-color-light":u(E)==="#4caf50"?"#66bb6a":u(E)==="#c1c536"?"#d4e157":"#ef5350"},children:[E.toFixed(2),"%"]})})]},j)})]},y))]},m))]})};function xN(r,t){const a=`https://www.appsheet.com/start/${r}`,n={EvalType:"BOOLEAN",OperatorName:"Equals",IsAtomic:!0,IsSargable:!0,SourceExpr:`[${t.filterField}] :: ${t.filterValue}`,Children:[{EvalType:"COLUMN",ColIndex:2,ColName:t.filterField,ContextLevel:0,SourceExpr:`[${t.filterField}]`,Children:[],ColumnsReferenced:[2],AncColumnsReferenced:[],TablesReferenced:[],ResultType:"Ref",ResultTypeQualifier:{ReferencedTableName:t.tableName,ReferencedRootTableName:t.tableName,ReferencedType:"Name",ReferencedKeyColumn:"Name",IsAPartOf:!1,RelationshipName:null,InputMode:"Auto"},IsPure:!0,MayBeExpensive:!1,EagerEvalChildren:!0},{EvalType:"CONSTANT",ConstantValue:t.filterValue,SourceExpr:t.filterValue,Children:[],ColumnsReferenced:[],AncColumnsReferenced:[],TablesReferenced:[],ResultType:"Ref",ResultTypeQualifier:{ReferencedTableName:t.tableName,ReferencedRootTableName:t.tableName,ReferencedType:"Name",ReferencedKeyColumn:"Name",IsAPartOf:!1,RelationshipName:null,InputMode:"Auto"},IsPure:!0,MayBeExpensive:!1,EagerEvalChildren:!0}],ColumnsReferenced:[2],AncColumnsReferenced:[],TablesReferenced:[],ResultType:"Yes/No",ResultTypeQualifier:{YesLabel:"",NoLabel:""},IsPure:!0,MayBeExpensive:!1,EagerEvalChildren:!0},o=encodeURIComponent(JSON.stringify(n));return`${a}#control=${encodeURIComponent(t.tableName)}&filter=${o}`}function wN(r){return xN("efcdb2a0-181f-4e43-bc65-6887dc279032",{tableName:"Delivery Dockets",filterField:"Project",filterValue:r})}const jN=()=>{var re;const[r,t]=M.useState(""),[a,n]=M.useState({sheets:!0,trips:!1}),[o,u]=M.useState(!1),[h,g]=M.useState(!1),{projectParam:m}=$p(),p=M.useRef(!1);ki("CC Project Dashboard"),jd();const{data:y,error:x}=zp(r),{data:v,isLoading:j}=sj(r),{data:E,isLoading:D}=tj(r),{data:O,isLoading:H}=aj(r),U=x;M.useEffect(()=>{m&&!p.current&&(t(m),p.current=!0)},[m]);const q=T=>{t(T.Name)},ee=T=>{n(C=>at($e({},C),{[T]:!C[T]}))},ae=T=>T<50?"#4caf50":T<99?"#c1c536":"#cb4335",Y=(T,C)=>{if(!T||!C)return"";const G=Number(T),z=Number(C),W=G/z*100;return W>=100?"danger":W>=90?"warning":""};return U?l.jsxs("div",{className:"container",children:[l.jsx("h1",{children:"Error"}),l.jsxs("p",{children:["Error loading project data: ",x==null?void 0:x.message]}),l.jsx("button",{onClick:()=>window.location.reload(),children:"Retry"})]}):l.jsxs("div",{className:"container accordion",id:"accordion",children:[l.jsx("h1",{children:"PROJECTS SUMMARY"}),l.jsx(nj,{onProjectSelect:q}),y?l.jsxs("div",{className:"project-info",children:[l.jsxs("div",{className:"project-header",children:[l.jsx("h2",{className:"project-title",children:y.Name||"N/A"}),l.jsx("span",{className:`status-badge ${((re=y.Status)==null?void 0:re.toLowerCase())||"unknown"}`,children:y.Status||"N/A"})]}),l.jsxs("div",{className:"project-details-grid",children:[l.jsxs("div",{className:"detail-section",children:[l.jsx("h3",{children:" Project Details"}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Project Number:"}),l.jsx("span",{className:"detail-value",children:y.Number||""})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"CC/Subcontractor:"}),l.jsx("span",{className:"detail-value",children:y["CC/Subcontractor"]||""})]})]}),l.jsxs("div",{className:"detail-section",children:[l.jsx("h3",{children:" Timeline"}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Start Date:"}),l.jsx("span",{className:"detail-value",children:Gu(y["Start Date"])})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Expected Completion:"}),l.jsx("span",{className:"detail-value",children:Gu(y["Expected Completion Date"])})]}),y["Finalization Date"]&&l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Finalization Date:"}),l.jsx("span",{className:"detail-value",children:Gu(y["Finalization Date"])})]})]}),l.jsxs("div",{className:"detail-section",children:[l.jsx("h3",{children:" Team"}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Project Manager:"}),l.jsx("span",{className:"detail-value",children:y.PM||"N/A"})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Site Supervisor:"}),l.jsx("span",{className:"detail-value",children:y["Site Supervisor"]||"N/A"})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"EBA/Non-EBA:"}),l.jsx("span",{className:"detail-value",children:y["EBA/Non-EBA"]||"N/A"})]})]}),y.Contact&&l.jsxs("div",{className:"detail-section contact-section",children:[l.jsx("h3",{children:" Contact Information"}),l.jsx("div",{className:"contact-toggle",children:l.jsx("button",{className:"contact-toggle-btn",onClick:()=>g(!h),children:h?" Hide Contact":" Show Contact"})}),h&&l.jsx("div",{className:"contact-content",children:l.jsx("pre",{className:"contact-text",children:y.Contact})})]})]}),l.jsx("div",{className:"project-footer",children:l.jsxs("span",{className:"last-updated",children:["Last updated: ",new Date().toLocaleString()]})})]}):r?l.jsx("div",{className:"project-info loading",children:l.jsxs("div",{className:"loading-placeholder",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Loading project data..."})]})}):l.jsx("div",{className:"project-info empty",children:l.jsxs("div",{className:"empty-state",children:[l.jsx("span",{className:"empty-icon",children:""}),l.jsx("h3",{children:"Select a Project"}),l.jsx("p",{children:"Choose a project from the dropdown above to view its details and statistics."})]})}),l.jsx("h2",{id:"cutting-information",children:"Cutting Information"}),y?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"cutting-info-grid",children:[l.jsxs("div",{className:"cutting-item",children:[l.jsx("span",{className:"cutting-icon",children:""}),l.jsx("span",{className:"cutting-label",children:"Expected Square Meters:"}),l.jsx("span",{className:"cutting-value",children:y["Expected Square Meters"]||"0"})]}),l.jsxs("div",{className:`cutting-item ${Y(String(y["Real Cut Square Meters"]||""),String(y["Expected Square Meters"]||""))}`,children:[l.jsx("span",{className:"cutting-icon",children:""}),l.jsx("span",{className:"cutting-label",children:"Real Cut Square Meters:"}),l.jsx("span",{className:"cutting-value",children:y["Real Cut Square Meters"]||"0.00"})]}),y["Allowed SQM to buy"]&&l.jsxs("div",{className:"cutting-item",children:[l.jsx("span",{className:"cutting-icon",children:""}),l.jsx("span",{className:"cutting-label",children:"Allowed SQM to Buy:"}),l.jsx("span",{className:"cutting-value",children:y["Allowed SQM to buy"]})]})]}),l.jsx("p",{className:"cutting-note",children:l.jsx("em",{children:'Note: The value of "Real Cut Square Meters" includes all square meters in the system, including panels that have not yet been cut or orders that are in "Ready to Cut" status.'})}),l.jsx("div",{className:"progress-container",children:l.jsx("div",{className:"progress-bar",style:{"--progress-width":`${y["Real Cut Square Meters"]&&y["Expected Square Meters"]?Number(y["Real Cut Square Meters"])/Number(y["Expected Square Meters"])*100:0}%`,backgroundColor:ae(y["Real Cut Square Meters"]&&y["Expected Square Meters"]?Number(y["Real Cut Square Meters"])/Number(y["Expected Square Meters"])*100:0)},children:y["Real Cut Square Meters"]&&y["Expected Square Meters"]?`${(Number(y["Real Cut Square Meters"])/Number(y["Expected Square Meters"])*100).toFixed(2)}%`:"0%"})})]}):l.jsx("div",{className:"cutting-info-placeholder",children:l.jsxs("div",{className:"placeholder-content",children:[l.jsx("span",{className:"placeholder-icon",children:""}),l.jsx("p",{children:"Cutting information will appear here when a project is selected."})]})}),l.jsx(Qu,{isLoading:H,sectionName:"Sheets Overview",children:l.jsxs("div",{className:`accordion-item ${a.sheets?"active":""}`,children:[l.jsx("div",{className:"accordion-header",id:"sheets",onClick:()=>ee("sheets"),children:l.jsxs("h2",{children:[l.jsx("span",{className:"accordion-indicator",children:""}),"Sheets Overview",l.jsx("span",{className:"accordion-indicator",children:" "})]})}),l.jsx("div",{className:"accordion-body",children:l.jsx(Aj,{sheets:O||[],isLoading:H})})]})}),l.jsx(Qu,{isLoading:j,sectionName:"Project Allowances",children:l.jsx(bN,{allowances:v||[],isLoading:j})}),l.jsx(Qu,{isLoading:D,sectionName:"Material Tables",children:l.jsx(oj,{materials:E||{summary:[],details:[]},isLoading:D})}),l.jsx("h2",{id:"trips-over-time",children:"Trips Over Time"}),l.jsxs("p",{children:[l.jsx("em",{children:'These data are collected from the "Delivery Dockets" performed by the manufacturing team. You can view the detailed records by '}),l.jsx("a",{href:r?wN(r):"#",target:"_blank",children:"clicking here"}),"."]}),l.jsxs("div",{className:"chart-container",children:[l.jsx("h3",{children:"Daily and Cumulative Trips"}),l.jsx("p",{id:"deliveryDates",style:{display:"none"}}),l.jsx(yN,{projectName:r})]}),o&&l.jsxs(l.Fragment,{children:[l.jsx(vN,{onMetricsUpdate:T=>{console.log("Performance metrics:",T)},showDetails:!0}),l.jsx("div",{className:"debug-info",children:l.jsxs("span",{className:"last-update",children:["Last updated: ",new Date().toLocaleString()]})})]}),l.jsx("div",{style:{marginTop:"20px",textAlign:"center"},children:l.jsx("button",{onClick:()=>u(!o),style:{background:"transparent",border:"1px solid #ccc",padding:"5px 10px",fontSize:"12px",color:"#666"},children:o?" Hide Debug Tools":" Show Debug Tools"})})]})},m0=r=>window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?`/${r}`:`/CC_Flow_summary_report/${r}`,xo=()=>m0("CC-logo-NEW_1.webp"),fo=()=>m0("favicon.png"),SN=()=>{const[r]=nb(),[t,a]=M.useState(""),[n,o]=M.useState(!1),[u,h]=M.useState(""),[g,m]=M.useState(""),[p,y]=M.useState(null),[x,v]=M.useState(null),[j,E]=M.useState(!1),[D,O]=M.useState(12),H=new Os;ki("CC Delivery"),M.useEffect(()=>{const ae=()=>{window.innerWidth<=480||window.innerWidth<=768,O(12)};return ae(),window.addEventListener("resize",ae),()=>window.removeEventListener("resize",ae)},[]);const U=ae=>/^[A-Z]{2,3}-\d+$/.test(ae);M.useEffect(()=>{const ae=r.get("Order_ID")||r.get("order_ID");ae&&(a(ae),v(U(ae)),h(""),m(""),y(null))},[r]),M.useEffect(()=>{v(t?U(t):null)},[t]);const q=ae=>_(null,null,function*(){if(ae.preventDefault(),!t.trim()){h("Please enter a valid Order ID"),m("error");return}if(!x){h("Order ID format must be XX-00 (e.g., FL-1, AB-123)"),m("error");return}o(!0),h(""),m(""),y(null);try{const Y=yield H.markOrderAsDelivered(t.trim());Y&&Y.length>0?(y(Y[0]),h(""),m("success"),a("")):(h("Error marking order as delivered"),m("error"))}catch(Y){console.error("Error marking order as delivered:",Y),h("Error processing request. Please try again."),m("error")}finally{o(!1)}}),ee=ae=>{const Y=ae.target.value.toUpperCase();a(Y),u&&(h(""),m("")),p&&y(null)};return l.jsx("div",{className:"order-delivery-container",children:l.jsxs("div",{className:"order-delivery-card",children:[l.jsx("div",{className:"watermark-pattern",children:l.jsx("div",{className:"watermark-grid",children:Array.from({length:D},(ae,Y)=>l.jsx("img",{src:xo(),alt:"CC Logo Watermark",className:"watermark",style:{"--i":Y}},Y))})}),l.jsxs("div",{className:"order-delivery-header",children:[l.jsx("h1",{children:"Mark Order as Delivered"}),l.jsx("p",{children:"Enter the Order ID to mark it as delivered"})]}),l.jsxs("form",{onSubmit:q,className:"order-delivery-form",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"orderId",children:"Order ID:"}),l.jsxs("div",{className:"input-container",children:[l.jsx("input",{type:"text",id:"orderId",value:t,onChange:ee,placeholder:"Enter Order ID (e.g., FL-1)",className:`form-input ${x===!1?"invalid":x===!0?"valid":""}`,disabled:n,required:!0,"aria-describedby":"orderId-help",style:{textTransform:"uppercase"},onKeyDown:ae=>{if(ae.key==="Enter"&&!n&&x){ae.preventDefault();const Y=ae.currentTarget.form;if(Y){const re=new Event("submit",{bubbles:!0,cancelable:!0});Y.dispatchEvent(re)}}}}),x===!0&&l.jsx("span",{className:"validation-icon valid",children:""}),x===!1&&l.jsx("span",{className:"validation-icon invalid",children:""})]}),l.jsx("div",{id:"orderId-help",className:"help-text",children:"Format: XX-00 (e.g., FL-1, AB-123)"})]}),l.jsx("button",{type:"submit",className:`submit-button ${n?"loading":""}`,disabled:n||x===!1,"aria-label":"Mark order as delivered",children:n?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"spinner"}),"Processing..."]}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:fo(),alt:"CC Favicon",className:"button-favicon"}),"Mark as Delivered",l.jsx("img",{src:fo(),alt:"CC Favicon",className:"button-favicon"})]})})]}),u&&!p&&l.jsx("div",{className:`message ${g}`,role:"alert",children:u}),p&&g==="success"&&l.jsxs("div",{className:"order-details-card",children:[l.jsxs("div",{className:"order-details-header",children:[l.jsx("span",{className:"success-icon",children:""}),l.jsx("h3",{children:"Order Successfully Delivered"})]}),l.jsxs("div",{className:"order-details-content",children:[l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:"Order ID:"}),l.jsx("span",{className:"detail-value",children:p["Order ID"]})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:"Project:"}),l.jsx("span",{className:"detail-value",children:p.Project})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:"Responsible:"}),l.jsx("span",{className:"detail-value",children:p.Responsable})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:"Color:"}),l.jsx("span",{className:"detail-value",children:p.Colour})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:"Square Meters:"}),l.jsxs("span",{className:"detail-value",children:[p["Meters Square"]," m"]})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:"Delivery Date:"}),l.jsx("span",{className:"detail-value",children:new Date().toLocaleDateString()})]})]})]}),l.jsxs("div",{className:"order-delivery-info",children:[l.jsxs("button",{className:"info-toggle-button",onClick:()=>E(!j),"aria-expanded":j,"aria-controls":"info-content",children:[l.jsxs("div",{className:"info-toggle-left",children:[l.jsx("div",{className:"info-icon",children:""}),l.jsx("span",{className:"info-toggle-text",children:"Help & Information"})]}),l.jsx("span",{className:`info-toggle-icon ${j?"open":""}`,children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:l.jsx("path",{d:"M6 9L12 15L18 9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),l.jsx("div",{id:"info-content",className:`info-content ${j?"show":""}`,"aria-hidden":!j,children:l.jsxs("div",{className:"info-content-inner",children:[l.jsxs("div",{className:"info-section",children:[l.jsx("h4",{className:"info-section-title",children:"How to use"}),l.jsxs("ul",{className:"info-list",children:[l.jsx("li",{children:"Enter the Order ID in the field above"}),l.jsx("li",{children:"Format must be XX-00 (e.g., FL-1, AB-123)"}),l.jsx("li",{children:'Click "Mark as Delivered" to confirm'})]})]}),l.jsxs("div",{className:"info-section",children:[l.jsx("h4",{className:"info-section-title",children:"Important notes"}),l.jsxs("ul",{className:"info-list",children:[l.jsx("li",{children:"Once confirmed, the order cannot be undone"}),l.jsx("li",{children:"Delivery date will be automatically recorded"})]})]})]})})]})]})})},nn=({children:r,className:t="",delay:a=0,duration:n=300,direction:o="fade",stagger:u=0,index:h=0})=>{const g=()=>`transition-all ease-out ${{up:"opacity-0 animate-slide-up",down:"opacity-0 animate-slide-down",left:"opacity-0 animate-slide-left",right:"opacity-0 animate-slide-right",fade:"opacity-0 animate-fade-in",scale:"opacity-0 animate-scale-in"}[o]}`,m=()=>({animationDelay:`${a+u*h}ms`,animationDuration:`${n}ms`,animationFillMode:"forwards"});return l.jsx("div",{className:`${g()} ${t}`,style:at($e({},m()),{contain:"layout style paint"}),children:r})},_N=({size:r="md",color:t="blue",text:a})=>{const n={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"},o={blue:"text-blue-600",gray:"text-gray-600",green:"text-green-600",red:"text-red-600"};return l.jsxs("div",{className:"flex flex-col items-center justify-center space-y-3",children:[l.jsx("div",{className:`${n[r]} ${o[t]} animate-spin`,children:l.jsxs("svg",{className:"w-full h-full",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),a&&l.jsx("p",{className:`text-sm ${o[t]} animate-pulse`,children:a})]})},g0=({children:r,className:t="",scale:a=!0,glow:n=!1,color:o="blue"})=>{const u=a?"hover:scale-105":"",h=n?`hover:shadow-lg hover:shadow-${o}-200`:"hover:shadow-md";return l.jsx("div",{className:`transition-all duration-200 ease-in-out ${u} ${h} ${t}`,children:r})},NN=({children:r,className:t=""})=>l.jsx("div",{className:`animate-page-enter ${t}`,children:r}),CN=[{id:"analytics",label:"Analytics",icon:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})},{id:"cut-process",label:"Cut Process",icon:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.121 14.121L19 19m-7-7l7-7m-7 7l-2.879 2.879M12 12L9.121 9.121m0 5.758a3 3 0 10-4.243-4.243 3 3 0 004.243 4.243zm5.758-9.758a3 3 0 10-4.243-4.243 3 3 0 004.243 4.243z"})})},{id:"manufacturing",label:"Manufacturing",icon:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2zm5-18v2M7 7h2v5a1 1 0 01-1 1H7V7z"})})}],EN=({currentView:r,onViewChange:t,isOpen:a,onToggle:n,showHintAnimation:o=!1})=>l.jsxs(l.Fragment,{children:[a&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:n}),l.jsx("div",{className:`
        fixed inset-y-0 left-0 z-50 bg-white shadow-lg transform transition-all duration-300 ease-in-out
        ${a?"w-64":"w-16"}
        md:relative md:z-50
      `,children:l.jsxs("div",{className:"flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-400",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:l.jsx("img",{src:fo(),alt:"CC Logo",className:"w-8 h-8"})}),a&&l.jsx("span",{className:"text-xl font-bold text-gray-900 whitespace-nowrap",children:"Cladding Creations"})]}),l.jsx("button",{onClick:n,className:`p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200 ${o?"animate-sidebar-hint animate-sidebar-wiggle animate-sidebar-glow":""}`,title:a?"Collapse sidebar":"Expand sidebar",children:l.jsx("svg",{className:`w-5 h-5 text-white transition-transform duration-200 ${a?"rotate-180":"rotate-0"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),l.jsx("nav",{className:"flex-1 p-4 space-y-2",children:CN.map((u,h)=>l.jsx(nn,{direction:"left",delay:h*100,className:"w-full",children:l.jsx(g0,{scale:!0,glow:!0,color:"blue",children:l.jsxs("button",{onClick:()=>t(u.id),className:`
                      w-full flex items-center rounded-sm text-left transition-all duration-200 group micro-bounce relative z-10
                      ${a?"px-4 py-3 space-x-3":"px-3 py-3 justify-center"}
                      ${r===u.id?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"}
                    `,title:a?void 0:u.label,children:[l.jsx("div",{className:"flex-shrink-0",children:u.icon}),a&&l.jsx("span",{className:"font-medium whitespace-nowrap",children:u.label})]})})},u.id))}),l.jsx("div",{className:"p-8 border-t border-gray-600",children:l.jsx("div",{className:`flex items-center text-sm text-gray-600 ${a?"space-x-3":"justify-center"}`,children:a&&l.jsx("img",{src:xo(),alt:"CC Logo",className:"w-4/5"})})})]})})]}),TN=({dateRange:r,onDateRangeChange:t,onQuickRangeChange:a})=>{const[n,o]=M.useState("30d"),[u,h]=M.useState({start:r.startDate,end:r.endDate});M.useEffect(()=>{h({start:r.startDate,end:r.endDate})},[r]);const g=[{value:"today",label:"Today"},{value:"thisWeek",label:"This week"},{value:"7d",label:"Last 7 days"},{value:"30d",label:"Last 30 days"},{value:"90d",label:"Last 90 days"},{value:"1y",label:"Last year"},{value:"custom",label:"Custom range"}],m=v=>{o(v),v!=="custom"&&a(v)},p=(v,j)=>{const E=at($e({},u),{[v]:j});h(E),n==="custom"&&t({startDate:E.start,endDate:E.end})},x=((v,j)=>{const E=new Date(v+"T00:00:00"),D=new Date(j+"T00:00:00"),O=Math.ceil((D.getTime()-E.getTime())/(1e3*60*60*24))+1,H=E.getFullYear(),U=D.getFullYear(),q=H!==U,ee=E.toLocaleDateString("en-AU",{day:"numeric",month:"short",year:q?"numeric":void 0}),ae=D.toLocaleDateString("en-AU",{day:"numeric",month:"short",year:"numeric"});return{formatted:`${ee} - ${ae}`,days:O}})(r.startDate,r.endDate);return l.jsxs("div",{className:"relative",children:[l.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[l.jsxs("div",{className:"flex items-center space-x-2 bg-gradient-to-r from-purple-500 to-indigo-600 text-white px-4 py-2 rounded-lg shadow-lg",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),l.jsx("span",{className:"font-bold text-sm",children:"DATE RANGE CONTROL"})]}),l.jsx("div",{className:"h-px bg-gradient-to-r from-purple-300 to-transparent flex-1"})]}),l.jsxs("div",{className:"flex items-center space-x-6",children:[l.jsxs("div",{className:"flex items-center space-x-4 bg-gradient-to-r from-emerald-50 via-green-50 to-teal-50 border-3 border-emerald-300 rounded-2xl px-6 py-4 shadow-xl",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-emerald-500 rounded-full shadow-lg",children:l.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),l.jsx("span",{className:"text-sm font-bold text-emerald-800 uppercase tracking-wide",children:"Active Range:"})]}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"text-lg text-emerald-900 font-bold bg-white px-4 py-2 rounded-lg shadow-md border-2 border-emerald-200",children:x.formatted}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("div",{className:"w-2 h-2 bg-emerald-400 rounded-full"}),l.jsx("div",{className:"w-4 h-0.5 bg-emerald-400"}),l.jsx("div",{className:"w-2 h-2 bg-emerald-400 rounded-full"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("div",{className:"text-sm text-emerald-700 bg-emerald-200 px-4 py-2 rounded-full font-bold shadow-md border border-emerald-300",children:[x.days," ",x.days===1?"day":"days"]}),l.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"})]})]})]}),l.jsx("div",{className:"w-16 h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent"}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"flex items-center space-x-3 bg-gradient-to-r from-indigo-50 to-blue-50 border-2 border-indigo-200 rounded-xl px-4 py-3 shadow-lg",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("svg",{className:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),l.jsx("label",{className:"text-sm font-bold text-indigo-800",children:"Select Period:"})]}),l.jsx("select",{value:n,onChange:v=>m(v.target.value),className:"px-4 py-2 text-sm font-semibold border-2 border-indigo-300 rounded-lg focus:ring-4 focus:ring-indigo-200 focus:border-indigo-500 transition-all duration-300 bg-white shadow-md hover:shadow-lg hover:border-indigo-400 min-w-[140px]",children:g.map(v=>l.jsx("option",{value:v.value,children:v.label},v.value))}),l.jsx("svg",{className:"w-4 h-4 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),n==="custom"&&l.jsxs("div",{className:"flex items-center space-x-3 bg-gradient-to-r from-amber-50 to-orange-50 border-2 border-amber-200 rounded-xl px-4 py-3 shadow-lg",children:[l.jsx("svg",{className:"w-5 h-5 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"text-xs font-semibold text-amber-700 mb-1",children:"From"}),l.jsx("input",{type:"date",value:u.start,onChange:v=>p("start",v.target.value),className:"px-3 py-2 text-sm font-semibold border-2 border-amber-300 rounded-lg focus:ring-4 focus:ring-amber-200 focus:border-amber-500 transition-all duration-300 bg-white shadow-md hover:shadow-lg hover:border-amber-400"})]}),l.jsx("div",{className:"flex items-center",children:l.jsx("svg",{className:"w-4 h-4 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"text-xs font-semibold text-amber-700 mb-1",children:"To"}),l.jsx("input",{type:"date",value:u.end,onChange:v=>p("end",v.target.value),className:"px-3 py-2 text-sm font-semibold border-2 border-amber-300 rounded-lg focus:ring-4 focus:ring-amber-200 focus:border-amber-500 transition-all duration-300 bg-white shadow-md hover:shadow-lg hover:border-amber-400"})]})]})]})]})]})]})},DN=({dateRange:r,onDateRangeChange:t,onQuickRangeChange:a,onExportCSV:n,canExport:o=!1})=>l.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 px-8 py-6 min-h-[80px] flex items-center",children:l.jsxs("div",{className:"flex items-center justify-between w-full",children:[l.jsx("div",{className:"w-15"}),l.jsx("div",{className:"flex items-center",children:l.jsxs("button",{onClick:n,disabled:!o,className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors duration-200 text-sm font-medium ${o?"bg-blue-600 hover:bg-blue-700 text-white cursor-pointer":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,title:o?"Export dashboard data":"No data available for export",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),l.jsx("span",{children:"Export Data"})]})}),l.jsx("div",{className:"flex-1 flex justify-center",children:l.jsx("h2",{className:"text-xl font-bold text-gray-900 mt-[10px]!",children:"CC Analytics"})}),l.jsxs("div",{className:"flex items-center space-x-8 min-w-0 flex-shrink-0",children:[l.jsx(TN,{dateRange:r,onDateRangeChange:t,onQuickRangeChange:a}),l.jsx("img",{src:fo(),alt:"CC Logo",className:"w-10 h-10 flex-shrink-0"})]})]})}),Ot=({children:r,className:t="",padding:a="md",hover:n=!1})=>{const o={sm:"p-4",md:"p-6",lg:"p-8"};return l.jsx("div",{className:`
      bg-white rounded-xl shadow-sm border border-gray-200
      ${o[a]}
      ${n?"hover:shadow-md transition-shadow duration-200":""}
      ${t}
    `,children:r})},ON=({title:r,value:t,change:a,icon:n,trend:o="stable",className:u=""})=>{const h=m=>{switch(m){case"up":return"text-green-600";case"down":return"text-red-600";default:return"text-gray-600"}},g=m=>{switch(m){case"increase":return"text-green-600 bg-green-50";case"decrease":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}};return l.jsx(g0,{scale:!0,glow:!0,color:"blue",children:l.jsx(Ot,{className:`${u} hover-lift`,children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:r}),l.jsx("p",{className:"text-3xl font-bold text-gray-900",children:t}),a&&l.jsxs("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium mt-2 ${g(a.type)}`,children:[l.jsx("span",{className:"mr-1",children:a.type==="increase"?"":a.type==="decrease"?"":""}),Math.abs(a.value),"%"]})]}),n&&l.jsx("div",{className:`rounded-lg ${h(o)}`,children:n})]})})})},Dd=({data:r,loading:t=!1})=>{if(t){const o=(r.totalSqmCut!==void 0?1:0)+(r.totalSqmManufactured!==void 0?1:0)+(r.projects!==void 0?1:0)+(r.responsibles!==void 0?1:0)+1,u=()=>o===1?"grid grid-cols-1 gap-6 justify-center":o===2?"grid grid-cols-1 md:grid-cols-2 gap-6 justify-center":o===3?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 justify-center":"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 justify-center";return l.jsx("div",{className:u(),children:[...Array(o)].map((h,g)=>l.jsx("div",{className:"animate-pulse",children:l.jsx("div",{className:"bg-gray-200 rounded-xl h-32"})},g))})}const a=[];r.totalSqmCut!==void 0&&a.push({title:"Total SQM Cut",value:`${r.totalSqmCut.toLocaleString()} m`,change:{value:0,type:"neutral"},trend:"stable",icon:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.121 14.121L19 19m-7-7l7-7m-7 7l-2.879 2.879M12 12L9.121 9.121m0 5.758a3 3 0 10-4.243-4.243 3 3 0 004.243 4.243zm8.879-8.879a3 3 0 10-4.243-4.243 3 3 0 004.243 4.243z"})})}),r.totalSqmManufactured!==void 0&&a.push({title:"Total SQM Manufactured",value:`${r.totalSqmManufactured.toLocaleString()} m`,change:{value:0,type:"neutral"},trend:"stable",icon:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2zm5-18v2M7 7h2v5a1 1 0 01-1 1H7V7z"})})}),r.projects!==void 0&&a.push({title:"Projects",value:r.projects,change:{value:0,type:"neutral"},trend:"stable",icon:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),r.responsibles!==void 0&&a.push({title:"Responsibles",value:r.responsibles,change:{value:0,type:"neutral"},trend:"stable",icon:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),a.push({title:"Total Panels",value:r.totalPanels.toLocaleString(),change:{value:0,type:"neutral"},trend:"stable",icon:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})});const n=()=>{const o=a.length;return o===1?"grid grid-cols-1 gap-6 justify-center":o===2?"grid grid-cols-1 md:grid-cols-2 gap-6 justify-center":o===3?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 justify-center":"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 justify-center"};return l.jsx("div",{className:n(),children:a.map((o,u)=>l.jsx(nn,{direction:"up",delay:u*100,className:"w-full",children:l.jsx(ON,{title:o.title,value:o.value,change:o.change,trend:o.trend,icon:o.icon})},u))})},AN="Australia/Brisbane",p0=()=>{const r=new Date;return new Date(r.toLocaleString("en-US",{timeZone:AN}))},mo=r=>{const t=[7,9,11,14],a=[9,12,14],n=[14];return r===1||r===2||r===3||r===5?t:r===4?a:r===6?n:[]},y0=r=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][r],wo=()=>{const r=p0(),t=r.getDay(),a=r.getHours(),n=r.getMinutes(),o=a+n/60,h=mo(t).find(x=>x>o);if(h)return`Today at ${go(h)} (Brisbane)`;const g=(t+1)%7,p=mo(g)[0];return`${y0(g)} at ${go(p)} (Brisbane)`},Od=()=>{const r=p0(),t=r.getDay(),a=r.getHours(),n=r.getMinutes(),o=a+n/60,h=[...mo(t)].reverse().find(x=>x<o);if(h)return`Today at ${go(h)} (Brisbane)`;const g=(t-1+7)%7,m=mo(g),p=m[m.length-1];return`${y0(g)} at ${go(p)} (Brisbane)`},go=r=>{const t=Math.floor(r),a=Math.round(r%1*60),n=t>=12?"PM":"AM";return`${t>12?t-12:t===0?12:t}:${a.toString().padStart(2,"0")} ${n}`};$a.register(cn,un,on,pp,gd,dn,hn,fn,pd);const kN=({data:r,title:t,loading:a=!1})=>{const n=M.useRef(null),o=M.useRef(null);if(M.useEffect(()=>{if(!n.current||a||!r||r.length===0)return;o.current&&o.current.destroy();const u=r.length>0?r.reduce((y,x)=>y+x.cut,0)/r.length:0,h=new Array(r.length).fill(u),g=r.map(y=>y.cut>=u?"rgb(34, 197, 94)":"rgb(239, 68, 68)"),m=r.length>0?r.reduce((y,x)=>x.cut+x.manufactured>y.cut+y.manufactured?x:y):{date:""},p=n.current.getContext("2d");if(p)return o.current=new $a(p,{type:"bar",data:{labels:r.map(y=>{const[x,v,j]=y.date.split("-").map(Number);return new Date(x,v-1,j).toLocaleDateString("en-AU",{month:"short",day:"numeric"})}),datasets:[{label:"SQM Cut",data:r.map(y=>y.cut),backgroundColor:"rgba(59, 130, 246, 0.5)",borderColor:"rgb(59, 130, 246)",borderWidth:1,order:1,datalabels:{display:!1}},{label:"SQM Manufactured",data:r.map(y=>y.manufactured),backgroundColor:"rgba(34, 197, 94, 0.5)",borderColor:"rgb(34, 197, 94)",borderWidth:1,order:1,datalabels:{display:!1}},{label:"Average Cut",data:h,type:"line",borderColor:"rgb(251, 191, 36)",backgroundColor:"rgba(251, 191, 36, 0.1)",borderWidth:2,fill:!1,tension:.1,pointRadius:4,pointHoverRadius:6,pointBackgroundColor:g,pointBorderColor:g,pointBorderWidth:2,order:0,datalabels:{display:!1}}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20}},title:{display:!0,text:t,font:{size:25,weight:"bold"}},tooltip:{mode:"index",intersect:!1,callbacks:{afterTitle:y=>{const x=y[0].dataIndex;return r[x].date===m.date?[" Peak Production Day"]:[]}}}},scales:{x:{display:!0,title:{display:!0,text:"Date"},grid:{display:!1}},y:{display:!0,title:{display:!0,text:"SQM (m)"},beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.1)"}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}}),()=>{o.current&&o.current.destroy()}},[r,t,a]),a)return l.jsx(Ot,{children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),l.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})});if(!r||r.length===0){const u=wo();return l.jsx(Ot,{children:l.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Data Available Yet"}),l.jsx("p",{className:"text-sm text-center mb-3",children:"No productivity data available for the selected date range."}),l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-center max-w-sm",children:l.jsxs("p",{className:"text-xs text-blue-500 font-medium italic mb-1",children:["Next sync: ",u]})})]})})}return l.jsx(nn,{direction:"fade",delay:200,children:l.jsxs(Ot,{className:"hover-lift",children:[l.jsx("div",{className:"relative h-120 animate-chart-fade-in",children:l.jsx("canvas",{ref:n})}),l.jsx("div",{className:"mt-4 p-3 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg border border-yellow-200 animate-fade-in",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"text-yellow-600",children:""}),l.jsxs("span",{className:"text-sm font-bold text-gray-700",children:["Peak Production Day: ",(()=>{if(r.length===0)return"No data available";const h=r.reduce((x,v)=>v.cut+v.manufactured>x.cut+x.manufactured?v:x).date,[g,m,p]=h.split("-").map(Number);return new Date(g,m-1,p).toLocaleDateString("en-AU",{weekday:"long",month:"long",day:"numeric"})})()]})]})})]})})},rp=({children:r,onClick:t,variant:a="primary",size:n="md",disabled:o=!1,loading:u=!1,className:h=""})=>{const g="inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2",m={primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 disabled:bg-blue-300",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500 disabled:bg-gray-300",outline:"border border-gray-300 text-gray-700 bg-white hover:bg-gray-50 focus:ring-blue-500 disabled:bg-gray-50 disabled:text-gray-400",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-gray-500 disabled:text-gray-400"},p={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return l.jsxs("button",{onClick:t,disabled:o||u,className:`
        ${g}
        ${m[a]}
        ${p[n]}
        ${h}
      `,children:[u&&l.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r]})};class RN{constructor(t={}){fe(this,"memoryCache",new Map);fe(this,"defaultTTL");fe(this,"maxSize");this.defaultTTL=t.ttl||300*1e3,this.maxSize=t.maxSize||100}generateKey(t,a){const n=Object.keys(a).sort().map(o=>`${o}:${a[o]}`).join("|");return`${t}:${n}`}get(t,a){const n=this.generateKey(t,a),o=this.memoryCache.get(n);return o?Date.now()-o.timestamp>o.ttl?(this.memoryCache.delete(n),null):o.data:null}set(t,a,n,o){const u=this.generateKey(t,a);this.memoryCache.size>=this.maxSize&&this.cleanup(),this.memoryCache.set(u,{data:n,timestamp:Date.now(),ttl:o||this.defaultTTL})}invalidate(t){const a=[];for(const n of this.memoryCache.keys())n.startsWith(`${t}:`)&&a.push(n);a.forEach(n=>this.memoryCache.delete(n))}cleanup(){const t=Date.now(),a=[];for(const[n,o]of this.memoryCache.entries())t-o.timestamp>o.ttl&&a.push(n);a.forEach(n=>this.memoryCache.delete(n)),this.memoryCache.size>=this.maxSize&&Array.from(this.memoryCache.entries()).sort((u,h)=>u[1].timestamp-h[1].timestamp).slice(0,Math.floor(this.maxSize/2)).forEach(([u])=>this.memoryCache.delete(u))}clear(){this.memoryCache.clear()}getStats(){const t=Date.now();let a=0,n=0;for(const o of this.memoryCache.values())t-o.timestamp>o.ttl?a++:n++;return{total:this.memoryCache.size,active:n,expired:a,maxSize:this.maxSize}}}const qa=new RN({ttl:300*1e3,maxSize:50}),La={MAIN_METRICS:"main_metrics",PROJECTS:"projects",CUT_PRODUCTIVITY:"cut_productivity",MANUFACTURING_PRODUCTIVITY:"manufacturing_productivity",CNC_PRODUCTIVITY:"cnc_productivity",MAIN_CHART:"main_chart",CUT_CHART:"cut_chart",MANUFACTURING_CHART:"manufacturing_chart",CNC_CHART:"cnc_chart",ORDERS_BY_PROJECT:"orders_by_project"},qi={SHORT:120*1e3,MEDIUM:300*1e3,LONG:900*1e3,VERY_LONG:3600*1e3},MN=(r,t,a,n={})=>{const[o,u]=M.useState([]),[h,g]=M.useState(!1),[m,p]=M.useState(null),y=M.useCallback(()=>_(null,null,function*(){if(!r||!t||!a){u([]);return}const x={projectName:r,startDate:t,endDate:a};if(!n.forceRefresh){const v=qa.get(La.ORDERS_BY_PROJECT,x);if(v){u(v);return}}try{g(!0),p(null);const v=yield Kt.getOrdersByProject(r,t,a);qa.set(La.ORDERS_BY_PROJECT,x,v,n.ttl||qi.MEDIUM),u(v)}catch(v){console.error("Error fetching project orders:",v),p(v instanceof Error?v.message:"Error desconocido")}finally{g(!1)}}),[r,t,a,n.forceRefresh,n.ttl]);return M.useEffect(()=>{r&&t&&a&&y()},[y,r,t,a]),{orders:o,loading:h,error:m,refetch:y}},UN=({projectName:r,startDate:t,endDate:a})=>{const{orders:n,loading:o,error:u}=MN(r,t,a),h=m=>m?new Date(m).toLocaleDateString("en-AU",{year:"numeric",month:"short",day:"numeric"}):"N/A",g=m=>{if(!m)return"bg-gray-100 text-gray-800";switch(m.toLowerCase()){case"delivered":case"entregado":return"bg-green-100 text-green-800";case"delivering":return"bg-yellow-100 text-yellow-800";case"manufacturing":case"fabricando":return"bg-gray-100 text-gray-800";case"cutting":case"cortando":return"bg-orange-100 text-orange-800";default:return"bg-blue-100 text-blue-800"}};return o?l.jsx("div",{className:"flex items-center justify-center py-8",children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-4 bg-gray-200 rounded w-48 mb-2"}),l.jsx("div",{className:"h-4 bg-gray-200 rounded w-32"})]})}):u?l.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"text-red-600",children:l.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),l.jsxs("div",{className:"ml-3",children:[l.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading orders"}),l.jsx("p",{className:"text-sm text-red-700 mt-1",children:u})]})]})}):n.length===0?l.jsx("div",{className:"text-center py-8",children:l.jsxs("div",{className:"text-gray-500",children:[l.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),l.jsx("p",{className:"text-sm",children:"No orders found for this project in the selected period"})]})}):l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex items-center justify-center border-b border-gray-200 pb-4 mb-8",children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("h4",{className:"text-xl font-bold text-gray-900",children:"Orders"}),l.jsx("div",{className:"w-16 h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent"}),l.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:[n.length," orders"]})]})}),l.jsx("div",{className:"w-full border-t border-gray-100 my-4"}),l.jsx("div",{className:"space-y-4",children:n.map((m,p)=>l.jsxs("div",{className:"bg-gradient-to-r from-white to-gray-50 border border-gray-200 rounded-xl p-6 hover:shadow-lg hover:border-blue-300 transition-all duration-300",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-blue-100 text-blue-800 text-lg font-bold rounded-lg",children:p+1}),l.jsxs("div",{children:[l.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["Order #",m.order_id]}),l.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full ml-3 ${g(m.status)}`,children:(m.status||"Unknown").toUpperCase()})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-sm text-gray-500",children:"Created"}),l.jsx("div",{className:"font-medium text-gray-900",children:h(m.creation_date)})]})]}),l.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[l.jsxs("div",{className:"text-center p-4 bg-white rounded-lg border border-gray-100",children:[l.jsx("div",{className:"text-sm font-medium text-gray-500 mb-2",children:"Total Area"}),l.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[(m.total_area||0).toFixed(2)," m"]})]}),l.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg border border-blue-200",children:[l.jsx("div",{className:"text-sm font-medium text-blue-600 mb-2",children:"Cut SQM"}),l.jsxs("div",{className:"text-2xl font-bold text-blue-700",children:[(m.cut_sqm||0).toFixed(2)," m"]})]}),l.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg border border-green-200",children:[l.jsx("div",{className:"text-sm font-medium text-green-600 mb-2",children:"Manufactured SQM"}),l.jsxs("div",{className:"text-2xl font-bold text-green-700",children:[(m.manufactured_sqm||0).toFixed(2)," m"]})]}),l.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg border border-purple-200",children:[l.jsx("div",{className:"text-sm font-medium text-purple-600 mb-2",children:"Panels"}),l.jsx("div",{className:"text-2xl font-bold text-purple-700",children:m.panels_count||0})]})]}),l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[l.jsxs("div",{className:"flex items-center space-x-6",children:[m.expected_date&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"w-3 h-3 bg-yellow-400 rounded-full"}),l.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Expected: ",h(m.expected_date)]})]}),m.delivered_date&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"w-3 h-3 bg-green-400 rounded-full"}),l.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Delivered: ",h(m.delivered_date)]})]})]}),l.jsxs("div",{className:"text-sm text-gray-500",children:["Order #",m.order_id]})]})]},m.order_id))})]})},qN=({projects:r,loading:t=!1,dateRange:a})=>{const[n,o]=M.useState(new Set),u=p=>{const y=new Set(n);y.has(p)?y.delete(p):y.add(p),o(y)},h=p=>{switch(p){case"In Progress":return"bg-green-100 text-green-800";case"Done":return"bg-blue-100 text-blue-800";case"To Do":return"bg-yellow-100 text-yellow-800";case"Defects":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},g=p=>window.location.hostname==="gasti10.github.io"?`https://gasti10.github.io/CC_Flow_summary_report/?project=${encodeURIComponent(p)}`:`http://localhost:3000/?project=${encodeURIComponent(p)}`,m=p=>{const y=g(p);window.open(y,"_blank")};return t?l.jsx(Ot,{children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),l.jsx("div",{className:"space-y-3",children:[...Array(5)].map((p,y)=>l.jsx("div",{className:"h-16 bg-gray-200 rounded"},y))})]})}):l.jsxs(Ot,{children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Projects"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Worked on projects during the selected period"})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b-2 border-gray-300 bg-gray-50",children:[l.jsx("th",{className:"text-center py-4 px-6 font-semibold text-gray-800 text-sm",children:"Name"}),l.jsx("th",{className:"text-center py-4 px-4 font-semibold text-gray-800 text-sm",children:"Number"}),l.jsx("th",{className:"text-center py-4 px-4 font-semibold text-gray-800 text-sm",children:"PM"}),l.jsx("th",{className:"text-center py-4 px-4 font-semibold text-gray-800 text-sm",children:"Supervisor"}),l.jsx("th",{className:"text-center py-4 px-4 font-semibold text-gray-800 text-sm",children:"Status"}),l.jsx("th",{className:"text-center py-4 px-4 font-semibold text-gray-800 text-sm",children:"Progress"}),l.jsx("th",{className:"text-center py-4 px-4 font-semibold text-gray-800 text-sm",children:"SQM Cut"}),l.jsx("th",{className:"text-center py-4 px-4 font-semibold text-gray-800 text-sm",children:"SQM Manufactured"}),l.jsx("th",{className:"text-center py-4 px-6 font-semibold text-gray-800 text-sm",children:"Actions"})]})}),l.jsx("tbody",{children:r.map(p=>l.jsxs(io.Fragment,{children:[l.jsxs("tr",{className:"border-b border-gray-200 hover:bg-blue-50 transition-colors duration-200",children:[l.jsx("td",{className:"py-6 px-6",children:l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"font-semibold text-gray-900 text-base",children:p.name}),l.jsx("div",{className:"text-sm text-gray-600 space-y-1",children:l.jsxs("div",{className:"flex items-center space-x-4 justify-center",children:[l.jsxs("span",{className:"flex items-center",children:[l.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full mr-2"}),"Start: ",p.startDate?new Date(p.startDate).toLocaleDateString("en-AU"):"N/A"]}),l.jsxs("span",{className:"flex items-center",children:[l.jsx("span",{className:"w-2 h-2 bg-yellow-400 rounded-full mr-2"}),"Expected: ",p.expectedCompletionDate?new Date(p.expectedCompletionDate).toLocaleDateString("en-AU"):"N/A"]}),l.jsxs("span",{className:"flex items-center",children:[l.jsx("span",{className:"w-2 h-2 bg-red-400 rounded-full mr-2"}),"End: ",p.endDate?new Date(p.endDate).toLocaleDateString("en-AU"):"N/A"]})]})})]})}),l.jsx("td",{className:"py-6 px-4 text-center",children:l.jsxs("span",{className:"inline-flex items-center justify-center w-12 h-8 bg-blue-100 text-blue-800 text-sm font-bold rounded-lg",children:["#",p.number]})}),l.jsx("td",{className:"py-6 px-4 text-center",children:l.jsx("div",{className:"text-sm font-medium text-gray-800",children:p.pm||"N/A"})}),l.jsx("td",{className:"py-6 px-4 text-center",children:l.jsx("div",{className:"text-sm font-medium text-gray-800",children:p.supervisor||"N/A"})}),l.jsx("td",{className:"py-6 px-4",children:l.jsx("span",{className:`inline-flex px-3 py-1.5 text-xs font-semibold rounded-full ${h(p.status)}`,children:p.status.replace("-"," ").toUpperCase()})}),l.jsx("td",{className:"py-6 px-4",children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-3",children:l.jsx("div",{className:`h-3 rounded-full transition-all duration-500 ${p.progress>=100?"bg-gradient-to-r from-red-500 to-red-600":p.progress>=85?"bg-gradient-to-r from-yellow-500 to-yellow-600":"bg-gradient-to-r from-blue-500 to-blue-600"}`,style:{width:`${Math.min(p.progress,100)}%`}})}),l.jsxs("span",{className:"text-sm font-semibold text-gray-700 min-w-[3rem]",children:[p.progress,"%"]})]})}),l.jsx("td",{className:"py-6 px-4 text-center",children:l.jsxs("div",{className:"text-sm font-semibold text-blue-700",children:[p.sqmCut.toLocaleString()," m"]})}),l.jsx("td",{className:"py-6 px-4 text-center",children:l.jsxs("div",{className:"text-sm font-semibold text-green-700",children:[p.sqmManufactured.toLocaleString()," m"]})}),l.jsx("td",{className:"py-6 px-6",children:l.jsxs("div",{className:"flex flex-col space-y-2",children:[l.jsx(rp,{variant:"ghost",size:"sm",onClick:()=>m(p.name),className:"px-4 py-2 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50",children:"Project Dashboard "}),l.jsx(rp,{variant:"outline",size:"sm",onClick:()=>u(p.id),className:"px-4 py-2 text-sm font-medium",children:n.has(p.id)?" Hide Orders":" Show Orders"})]})})]}),n.has(p.id)&&l.jsx("tr",{className:"bg-gradient-to-r from-gray-50 to-blue-50",children:l.jsx("td",{colSpan:9,className:"py-8 px-8",children:l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:l.jsx(UN,{projectName:p.name,startDate:a.startDate,endDate:a.endDate})})})})]},p.id))})]})})]})},sn=({title:r,icon:t,variant:a="default",className:n=""})=>{const u=(()=>{switch(a){case"charts":return{lineColor:"from-blue-400 to-blue-600",iconBg:"from-blue-500 to-blue-700",iconColor:"text-white",icon:"",label:"Charts"};case"performance":return{lineColor:"from-green-400 to-green-600",iconBg:"from-green-500 to-green-700",iconColor:"text-white",icon:"",label:"Performance"};case"projects":return{lineColor:"from-purple-400 to-purple-600",iconBg:"from-purple-500 to-purple-700",iconColor:"text-white",icon:"",label:"Projects"};case"cnc":return{lineColor:"from-orange-400 to-orange-600",iconBg:"from-orange-500 to-orange-700",iconColor:"text-white",icon:"",label:"CNC"};default:return{lineColor:"from-gray-400 to-gray-600",iconBg:"from-gray-500 to-gray-700",iconColor:"text-white",icon:"",label:"Section"}}})();return l.jsx("div",{className:`flex items-center justify-center py-12 ${n}`,children:l.jsxs("div",{className:"relative group",children:[l.jsxs("div",{className:"flex items-center space-x-6",children:[l.jsx("div",{className:`w-20 h-px bg-gradient-to-r from-transparent via-${u.lineColor.split("-")[1]}-400 to-${u.lineColor.split("-")[3]}-600 transform group-hover:scale-x-150 transition-all duration-500`}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:`w-12 h-12 bg-gradient-to-br ${u.iconBg} rounded-full flex items-center justify-center shadow-lg group-hover:shadow-xl group-hover:scale-110 transition-all duration-300`,children:l.jsx("span",{className:`${u.iconColor} text-lg`,children:t||u.icon})}),l.jsx("div",{className:`absolute -inset-3 bg-${u.lineColor.split("-")[1]}-200 rounded-full opacity-0 group-hover:opacity-30 group-hover:animate-ping transition-all duration-300`})]}),l.jsx("div",{className:`w-20 h-px bg-gradient-to-l from-transparent via-${u.lineColor.split("-")[1]}-400 to-${u.lineColor.split("-")[3]}-600 transform group-hover:scale-x-150 transition-all duration-500`})]}),l.jsx("div",{className:"absolute -top-12 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-all duration-300",children:l.jsx("div",{className:`bg-${u.lineColor.split("-")[1]}-600 text-white text-xs font-medium px-3 py-1 rounded-full shadow-lg`,children:r||u.label})})]})})},LN=(r,t,a={})=>{const[n,o]=M.useState(null),[u,h]=M.useState(!0),[g,m]=M.useState(null),p=M.useCallback(()=>_(null,null,function*(){const y={startDate:r,endDate:t};if(!a.forceRefresh){const x=qa.get(La.MAIN_METRICS,y);if(x){o(x),h(!1);return}}try{h(!0),m(null);const x=yield Kt.getMainMetrics(r,t);qa.set(La.MAIN_METRICS,y,x,a.ttl||qi.MEDIUM),o(x)}catch(x){console.error("Error fetching main metrics:",x),m(x instanceof Error?x.message:"Error desconocido")}finally{h(!1)}}),[r,t,a.forceRefresh,a.ttl]);return M.useEffect(()=>{r&&t&&p()},[p,r,t]),{data:n,loading:u,error:g,refetch:p}},zN=(r,t,a={})=>{const[n,o]=M.useState([]),[u,h]=M.useState(!0),[g,m]=M.useState(null),p=M.useCallback(()=>_(null,null,function*(){const y={startDate:r,endDate:t};if(!a.forceRefresh){const x=qa.get(La.PROJECTS,y);if(x){o(x),h(!1);return}}try{h(!0),m(null);const x=yield Kt.getProjectsWithMetrics(r,t);qa.set(La.PROJECTS,y,x,a.ttl||qi.MEDIUM),o(x)}catch(x){console.error("Error fetching projects:",x),m(x instanceof Error?x.message:"Error desconocido")}finally{h(!1)}}),[r,t,a.forceRefresh,a.ttl]);return M.useEffect(()=>{r&&t&&p()},[p,r,t]),{data:n,loading:u,error:g,refetch:p}},$N=(r,t,a={})=>{const[n,o]=M.useState([]),[u,h]=M.useState(!0),[g,m]=M.useState(null),p=M.useCallback(()=>_(null,null,function*(){const y={startDate:r,endDate:t};if(!a.forceRefresh){const x=qa.get(La.CUT_PRODUCTIVITY,y);if(x){o(x),h(!1);return}}try{h(!0),m(null);const x=yield Kt.getCutProductivityByResponsible(r,t);qa.set(La.CUT_PRODUCTIVITY,y,x,a.ttl||qi.SHORT),o(x)}catch(x){console.error("Error fetching cut productivity:",x),m(x instanceof Error?x.message:"Error desconocido")}finally{h(!1)}}),[r,t,a.forceRefresh,a.ttl]);return M.useEffect(()=>{r&&t&&p()},[p,r,t]),{data:n,loading:u,error:g,refetch:p}},BN=(r,t,a={})=>{const[n,o]=M.useState([]),[u,h]=M.useState(!0),[g,m]=M.useState(null),p=M.useCallback(()=>_(null,null,function*(){const y={startDate:r,endDate:t};if(!a.forceRefresh){const x=qa.get(La.MANUFACTURING_PRODUCTIVITY,y);if(x){o(x),h(!1);return}}try{h(!0),m(null);const x=yield Kt.getManufacturingProductivityByResponsible(r,t);qa.set(La.MANUFACTURING_PRODUCTIVITY,y,x,a.ttl||qi.SHORT),o(x)}catch(x){console.error("Error fetching manufacturing productivity:",x),m(x instanceof Error?x.message:"Error desconocido")}finally{h(!1)}}),[r,t,a.forceRefresh,a.ttl]);return M.useEffect(()=>{r&&t&&p()},[p,r,t]),{data:n,loading:u,error:g,refetch:p}},v0=({startDate:r,endDate:t})=>{const{data:a,loading:n,error:o,refetch:u}=LN(r,t),{data:h,loading:g,error:m,refetch:p}=zN(r,t),{data:y,loading:x,error:v,refetch:j}=$N(r,t),{data:E,loading:D,error:O,refetch:H}=BN(r,t),U=PN(y,E),q=n||g||x||D,ee=o||m||v||O,ae=M.useCallback(()=>{u(),p(),j(),H()},[u,p,j,H]);return{mainMetrics:a,projects:h,chartData:U,loading:q,error:ee,refetch:ae}},PN=(r,t)=>{const a=new Map,n=new Map;r.forEach(h=>{const g=h.fecha,m=a.get(g)||0;a.set(g,m+h.total_area)}),console.log("cutData",r),console.log("cutByDate",a),t.forEach(h=>{const g=h.fecha,m=n.get(g)||0;n.set(g,m+h.total_area)}),console.log("manufacturingData",t),console.log("manufacturingByDate",n);const o=new Set([...a.keys(),...n.keys()]);return Array.from(o).sort().map(h=>({date:h,cut:a.get(h)||0,manufactured:n.get(h)||0}))},np=({dateRange:r})=>{const{mainMetrics:t,projects:a,chartData:n,loading:o,error:u,refetch:h}=v0(r),g=Od(),m=wo(),p=t?{totalSqmCut:t.total_sqm_cut,totalSqmManufactured:t.total_sqm_manufactured,projects:a.length,totalPanels:a.reduce((x,v)=>x+(v.total_panels||0),0)||0}:{totalSqmCut:0,totalSqmManufactured:0,projects:0,totalPanels:0},y=a.map((x,v)=>{var j;return{id:`project-${v}`,name:x.project_name,number:((j=x.project_number)==null?void 0:j.toString())||"N/A",pm:x.pm||"N/A",supervisor:x.site_supervisor||"N/A",status:x.status||"To Do",sqmCut:x.total_sqm_cut||0,sqmManufactured:x.total_sqm_manufactured||0,totalPanels:x.total_panels||0,progress:Math.round(x.progress_percentage||0),startDate:x.project_start_date,endDate:x.finalization_date||"",expectedCompletionDate:x.expected_completion_date,details:{panels:x.total_panels||0,materials:[],priority:"medium"}}});return l.jsxs("div",{className:"space-y-0",children:[o&&l.jsx("div",{className:"flex items-center justify-center py-12",children:l.jsx(_N,{size:"lg",color:"blue",text:"Loading analytics data..."})}),l.jsxs("div",{className:"flex items-center justify-between py-8",children:[l.jsx("div",{className:"w-32"}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Factory Analytics Dashboard"}),l.jsx("p",{className:"text-gray-600 italic",children:"Comprehensive overview of factory operations and performance metrics"})]}),l.jsx("div",{className:"flex items-center space-x-3",children:l.jsxs("div",{className:"text-sm text-gray-500",children:[l.jsxs("div",{className:"text-base font-medium",children:["Last sync: ",g]}),l.jsxs("div",{className:"text-xs italic",children:["Next sync: ",m]})]})})]}),u&&l.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"text-red-400 mr-3",children:""}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading data"}),l.jsx("p",{className:"text-sm text-red-600 mt-1",children:u})]})]}),l.jsx("button",{onClick:h,className:"px-3 py-1 bg-red-100 hover:bg-red-200 text-red-700 rounded-md text-sm font-medium transition-colors duration-200",children:"Retry"})]})}),l.jsx("section",{className:"py-8",children:l.jsx(nn,{direction:"up",delay:200,children:l.jsx(Dd,{data:p,loading:o})})}),l.jsx(sn,{variant:"charts",title:"Charts"}),l.jsx("section",{className:"py-8",children:l.jsx(nn,{direction:"up",delay:400,children:l.jsx(kN,{data:n,title:"Daily Production Overview",loading:o})})}),l.jsx(sn,{variant:"projects",title:"Projects"}),l.jsx("section",{className:"py-8",children:l.jsx(nn,{direction:"up",delay:600,children:l.jsx(qN,{projects:y,loading:o,dateRange:r})})})]})};$a.register(cn,un,on,dn,hn,fn);const IN=({data:r,title:t,loading:a=!1})=>{const n=M.useRef(null),o=M.useRef(null);return M.useEffect(()=>{if(!n.current||a)return;o.current&&o.current.destroy();const u=r.reduce((v,j)=>(v[j.date]||(v[j.date]={}),v[j.date][j.responsible]||(v[j.date][j.responsible]=0),v[j.date][j.responsible]+=j.cut,v),{}),h=Object.keys(u).sort(),g=Array.from(new Set(r.map(v=>v.responsible))),p=(v=>{const j=["rgb(239, 68, 68)","rgb(251, 146, 60)","rgb(251, 191, 36)","rgb(132, 204, 22)","rgb(34, 197, 94)","rgb(16, 185, 129)","rgb(6, 182, 212)","rgb(59, 130, 246)","rgb(147, 51, 234)","rgb(168, 85, 247)"];if(v>j.length){const E=[];for(let D=j.length;D<v;D++){const H=(300+(D-j.length)*36)%360,U=75+D%2*15,q=50+D%3*8;E.push(`hsl(${H}, ${U}%, ${q}%)`)}return[...j,...E]}return j.slice(0,v)})(g.length),y=g.map((v,j)=>({label:v,data:h.map(E=>u[E][v]||0),backgroundColor:p[j%p.length],borderColor:p[j%p.length],borderWidth:1,datalabels:{display:!1}})),x=n.current.getContext("2d");if(x)return o.current=new $a(x,{type:"bar",data:{labels:h.map(v=>{const[j,E,D]=v.split("-").map(Number);return new Date(j,E-1,D).toLocaleDateString("en-AU",{month:"short",day:"numeric"})}),datasets:y},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20,font:{size:12}}},title:{display:!0,text:t,font:{size:25,weight:"bold"}},tooltip:{mode:"index",intersect:!1,callbacks:{title:v=>{const j=h[v[0].dataIndex],[E,D,O]=j.split("-").map(Number);return new Date(E,D-1,O).toLocaleDateString("en-AU",{weekday:"long",month:"long",day:"numeric"})},label:v=>{const j=v.dataset.label,E=v.parsed.y;return`${j}: ${E.toLocaleString()} m`},footer:v=>`Total: ${v.reduce((E,D)=>E+D.parsed.y,0).toLocaleString()} m`}}},scales:{x:{display:!0,title:{display:!0,text:"Date"},grid:{display:!1},stacked:!0},y:{display:!0,title:{display:!0,text:"SQM Cut (m)"},beginAtZero:!0,stacked:!0,grid:{color:"rgba(0, 0, 0, 0.1)"}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}}),()=>{o.current&&o.current.destroy()}},[r,t,a]),a?l.jsx(Ot,{children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),l.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):l.jsx(Ot,{children:l.jsx("div",{className:"relative h-96",children:l.jsx("canvas",{ref:n})})})};$a.register(cn,un,on,dn,hn,fn);const HN=({data:r,title:t,loading:a=!1})=>{const n=M.useRef(null),o=M.useRef(null);return M.useEffect(()=>{if(!n.current||a)return;o.current&&o.current.destroy();const u=r.reduce((x,v)=>(x[v.date]||(x[v.date]={}),x[v.date][v.cnc]||(x[v.date][v.cnc]=0),x[v.date][v.cnc]+=v.cut,x),{}),h=Object.keys(u).sort(),g=Array.from(new Set(r.map(x=>x.cnc))),m=["rgb(59, 130, 246)","rgb(34, 197, 94)","rgb(251, 191, 36)","rgb(239, 68, 68)","rgb(168, 85, 247)","rgb(236, 72, 153)"],p=g.map((x,v)=>({label:x,data:h.map(j=>u[j][x]||0),backgroundColor:m[v%m.length],borderColor:m[v%m.length],borderWidth:1,datalabels:{display:!1}})),y=n.current.getContext("2d");if(y)return o.current=new $a(y,{type:"bar",data:{labels:h.map(x=>{const[v,j,E]=x.split("-").map(Number);return new Date(v,j-1,E).toLocaleDateString("en-AU",{month:"short",day:"numeric"})}),datasets:p},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20,font:{size:12}}},title:{display:!0,text:t,font:{size:25,weight:"bold"}},tooltip:{mode:"index",intersect:!1,callbacks:{title:x=>{const v=h[x[0].dataIndex],[j,E,D]=v.split("-").map(Number);return new Date(j,E-1,D).toLocaleDateString("en-AU",{weekday:"long",month:"long",day:"numeric"})},label:x=>{const v=x.dataset.label,j=x.parsed.y;return`${v}: ${j.toLocaleString()} m`},footer:x=>`Total: ${x.reduce((j,E)=>j+E.parsed.y,0).toLocaleString()} m`}}},scales:{x:{display:!0,title:{display:!0,text:"Date"},grid:{display:!1},stacked:!0},y:{display:!0,title:{display:!0,text:"SQM Cut (m)"},beginAtZero:!0,stacked:!0,grid:{color:"rgba(0, 0, 0, 0.1)"}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}}),()=>{o.current&&o.current.destroy()}},[r,t,a]),a?l.jsx(Ot,{children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),l.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):l.jsx(Ot,{children:l.jsx("div",{className:"relative h-96",children:l.jsx("canvas",{ref:n})})})},b0=({data:r,loading:t=!1,title:a})=>{if(t)return l.jsx(Ot,{children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),l.jsx("div",{className:"space-y-3",children:[...Array(5)].map((o,u)=>l.jsx("div",{className:"h-16 bg-gray-200 rounded"},u))})]})});if(!r||r.length===0)return l.jsx(Ot,{children:l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"text-4xl mb-4",children:""}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Data Available"}),l.jsx("p",{className:"text-gray-500",children:"No data available for the selected period"})]})});const n=[...r].sort((o,u)=>u.totalSqm-o.totalSqm);return l.jsxs(Ot,{children:[l.jsx("div",{className:"mb-6",children:l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:a})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-gray-200",children:[l.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Responsible"}),l.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Total Panels"}),l.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Total SQM"}),l.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Avg SQM/Panel"})]})}),l.jsx("tbody",{children:n.map((o,u)=>{const h=o.totalPanels>0?o.totalSqm/o.totalPanels:0,g=u===0;return l.jsxs("tr",{className:`
                    border-b border-gray-100 hover:bg-gray-50 transition-colors duration-200
                    ${g?"bg-yellow-50":""}
                  `,children:[l.jsx("td",{className:"py-4 px-4",children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:`
                        w-8 h-8 flex items-center justify-center text-white text-sm font-medium`,children:g?"":""}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-gray-900",children:o.responsible||"Unknown"}),g&&l.jsx("div",{className:"text-xs text-yellow-600 font-medium",children:"Top Performer"})]})]})}),l.jsx("td",{className:"py-4 px-4",children:l.jsx("div",{className:"text-sm text-gray-900 font-medium",children:o.totalPanels.toLocaleString()})}),l.jsx("td",{className:"py-4 px-4",children:l.jsxs("div",{className:"text-sm text-gray-900 font-medium",children:[o.totalSqm.toFixed(2)," m"]})}),l.jsx("td",{className:"py-4 px-4",children:l.jsxs("div",{className:"text-sm text-gray-900 font-medium",children:[h.toFixed(2)," m"]})})]},o.responsible)})})]})}),l.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-900",children:r.reduce((o,u)=>o+u.totalPanels,0).toLocaleString()}),l.jsx("div",{className:"text-sm text-gray-600",children:"Total Panels"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[r.reduce((o,u)=>o+u.totalSqm,0).toFixed(2)," m"]}),l.jsx("div",{className:"text-sm text-gray-600",children:"Total SQM"})]})]})})]})},YN=({data:r,loading:t=!1,title:a})=>{if(t)return l.jsx(Ot,{children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),l.jsx("div",{className:"space-y-3",children:[...Array(3)].map((o,u)=>l.jsx("div",{className:"h-16 bg-gray-200 rounded"},u))})]})});if(!r||r.length===0)return l.jsx(Ot,{children:l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"text-4xl mb-4",children:""}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No CNC Data Available"}),l.jsx("p",{className:"text-gray-500",children:"No CNC data available for the selected period"})]})});const n=[...r].sort((o,u)=>u.totalSqm-o.totalSqm);return l.jsxs(Ot,{children:[l.jsx("div",{className:"mb-6",children:l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:a})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-gray-200",children:[l.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"CNC Machine"}),l.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Total Panels"}),l.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Total SQM"}),l.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Avg SQM/Panel"}),l.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Inactive Days"})]})}),l.jsx("tbody",{children:n.map((o,u)=>{const h=o.totalPanels>0?o.totalSqm/o.totalPanels:0,g=u===0,m=o.totalDaysInRange>0?o.inactiveDays/o.totalDaysInRange*100:0,p=m>50;return l.jsxs("tr",{className:`
                    border-b border-gray-100 hover:bg-gray-50 transition-colors duration-200
                    ${g?"bg-yellow-50":""}
                    ${p?"bg-red-50":""}
                  `,children:[l.jsx("td",{className:"py-4 px-4",children:l.jsxs("div",{className:"flex items-center space-x-3 justify-center",children:[l.jsx("div",{className:`
                        w-8 h-8 flex items-center justify-center text-white text-sm font-medium rounded-full    
                      `,children:""}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-gray-900",children:o.cnc||"Unknown"}),g&&l.jsx("div",{className:"text-xs text-yellow-600 font-medium",children:"Top Performer"}),p&&l.jsx("div",{className:"text-xs text-red-600 font-medium",children:"Inactive"})]})]})}),l.jsx("td",{className:"py-4 px-4",children:l.jsx("div",{className:"text-sm text-gray-900 font-medium",children:o.totalPanels.toLocaleString()})}),l.jsx("td",{className:"py-4 px-4",children:l.jsxs("div",{className:"text-sm text-gray-900 font-medium",children:[o.totalSqm.toFixed(2)," m"]})}),l.jsx("td",{className:"py-4 px-4",children:l.jsxs("div",{className:"text-sm text-gray-900 font-medium",children:[h.toFixed(2)," m"]})}),l.jsx("td",{className:"py-4 px-4",children:l.jsx("div",{className:"flex items-center justify-center",children:l.jsxs("span",{className:`
                        inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
                        ${m===0?"bg-green-100 text-green-800":m<=50?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}
                      `,children:[o.inactiveDays," days (",m.toFixed(1),"%)"]})})})]},o.cnc)})})]})}),l.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-900",children:r.reduce((o,u)=>o+u.totalPanels,0).toLocaleString()}),l.jsx("div",{className:"text-sm text-gray-600",children:"Total Panels"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[r.reduce((o,u)=>o+u.totalSqm,0).toFixed(2)," m"]}),l.jsx("div",{className:"text-sm text-gray-600",children:"Total SQM"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-900",children:r.reduce((o,u)=>o+u.inactiveDays,0)}),l.jsx("div",{className:"text-sm text-gray-600",children:"Total Inactive Days"})]})]})})]})},VN=({startDate:r,endDate:t})=>{const[a,n]=M.useState([]),[o,u]=M.useState([]),[h,g]=M.useState([]),[m,p]=M.useState([]),[y,x]=M.useState(!0),[v,j]=M.useState(null);return M.useEffect(()=>{r&&t&&_(null,null,function*(){try{x(!0),j(null);const[D,O]=yield Promise.all([Kt.getCutProductivityByResponsible(r,t),Kt.getCutProductivityByCNC(r,t)]),H=D.map(C=>({date:C.fecha,responsible:C.responsable||"Sin asignar",cut:C.total_area})),U=O.map(C=>({date:C.fecha,cnc:C.cnc||"Sin asignar",cut:C.total_area})),q=new Map,ee=new Map;D.forEach(C=>{const G=C.responsable||"Sin asignar";q.has(G)||q.set(G,{totalPanels:0,totalSqm:0,efficiency:0});const z=q.get(G);z.totalPanels+=C.panel_count,z.totalSqm+=C.total_area}),q.forEach(C=>{C.efficiency=C.totalSqm>0?Math.min(100,C.totalSqm/100*10):0}),["1","2","3"].forEach(C=>{ee.set(C,{totalPanels:0,totalSqm:0,inactiveDays:0,totalDaysInRange:0})}),O.forEach(C=>{const G=C.cnc||"Sin asignar";ee.has(G)||ee.set(G,{totalPanels:0,totalSqm:0,inactiveDays:0,totalDaysInRange:0});const z=ee.get(G);z.totalPanels+=C.panel_count,z.totalSqm+=C.total_area});const Y=new Date(r),re=new Date(t),T=Math.ceil((re.getTime()-Y.getTime())/(1e3*60*60*24))+1;ee.forEach((C,G)=>{const z=new Set(O.filter(de=>de.cnc===G).map(de=>de.fecha)),W=T-z.size;C.inactiveDays=Math.max(0,W),C.totalDaysInRange=T}),n(H),u(U),g(Array.from(q.entries()).map(([C,G])=>$e({responsible:C},G))),p(Array.from(ee.entries()).map(([C,G])=>$e({cnc:C},G)))}catch(D){console.error("Error fetching cut process data:",D),j(D instanceof Error?D.message:"Error desconocido")}finally{x(!1)}})},[r,t]),{responsibleData:a,cncData:o,responsiblesTable:h,cncTable:m,loading:y,error:v}},FN=({dateRange:r})=>{const{responsibleData:t,cncData:a,responsiblesTable:n,cncTable:o,loading:u,error:h}=VN(r),g=Od(),m=wo(),p=t.reduce((j,E)=>j+E.cut,0),y=n.reduce((j,E)=>j+E.totalPanels,0),x=new Set(t.map(j=>j.responsible)).size,v={totalSqmCut:p,responsibles:x,totalPanels:y};return l.jsxs("div",{className:"space-y-10",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"w-32"}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Cut Process Analytics"}),l.jsx("p",{className:"text-gray-600 italic",children:"Detailed analysis of cutting operations and performance by responsible person and CNC machines"})]}),l.jsx("div",{className:"flex items-center space-x-3",children:l.jsxs("div",{className:"text-sm text-gray-500",children:[l.jsxs("div",{className:"text-base font-medium",children:["Last sync: ",g]}),l.jsxs("div",{className:"text-xs italic",children:["Next sync: ",m]})]})})]}),h&&l.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"text-red-400 mr-3",children:""}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading data"}),l.jsx("p",{className:"text-sm text-red-600 mt-1",children:h})]})]})}),l.jsx("div",{className:"space-y-4",children:l.jsx(Dd,{data:v,loading:u})}),l.jsx(sn,{variant:"charts",title:"Charts"}),l.jsx("div",{className:"space-y-4",children:l.jsx(IN,{data:t,title:"Daily Cutting",loading:u})}),l.jsx(sn,{variant:"performance",title:"Performance"}),l.jsx("div",{className:"space-y-4",children:l.jsx(b0,{data:n,title:"Performance by Responsible Person",loading:u})}),l.jsx(sn,{variant:"cnc",title:"CNC Machines"}),l.jsx("div",{className:"space-y-4",children:l.jsx(HN,{data:a,title:"Daily CNC",loading:u})}),l.jsx(sn,{variant:"cnc",title:"CNC Performance"}),l.jsx("div",{className:"space-y-4",children:l.jsx(YN,{data:o,title:"CNC Machine Performance",loading:u})})]})};$a.register(cn,un,on,dn,hn,fn);const QN=({data:r,title:t,loading:a=!1})=>{const n=M.useRef(null),o=M.useRef(null);return M.useEffect(()=>{if(!n.current||a)return;o.current&&o.current.destroy();const u=r.reduce((v,j)=>(v[j.date]||(v[j.date]={}),v[j.date][j.responsible]||(v[j.date][j.responsible]=0),v[j.date][j.responsible]+=j.manufactured,v),{}),h=Object.keys(u).sort(),g=Array.from(new Set(r.map(v=>v.responsible))),p=(v=>{const j=["rgb(239, 68, 68)","rgb(251, 146, 60)","rgb(251, 191, 36)","rgb(132, 204, 22)","rgb(34, 197, 94)","rgb(16, 185, 129)","rgb(6, 182, 212)","rgb(59, 130, 246)","rgb(147, 51, 234)","rgb(168, 85, 247)"];if(v>j.length){const E=[];for(let D=j.length;D<v;D++){const H=(300+(D-j.length)*36)%360,U=75+D%2*15,q=50+D%3*8;E.push(`hsl(${H}, ${U}%, ${q}%)`)}return[...j,...E]}return j.slice(0,v)})(g.length),y=g.map((v,j)=>({label:v,data:h.map(E=>u[E][v]||0),backgroundColor:p[j%p.length],borderColor:p[j%p.length],borderWidth:1,datalabels:{display:!1}})),x=n.current.getContext("2d");if(x)return o.current=new $a(x,{type:"bar",data:{labels:h.map(v=>{const[j,E,D]=v.split("-").map(Number);return new Date(j,E-1,D).toLocaleDateString("en-AU",{month:"short",day:"numeric"})}),datasets:y},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20,font:{size:12}}},title:{display:!0,text:t,font:{size:25,weight:"bold"}},tooltip:{mode:"index",intersect:!1,callbacks:{title:v=>{const j=h[v[0].dataIndex],[E,D,O]=j.split("-").map(Number);return new Date(E,D-1,O).toLocaleDateString("en-AU",{weekday:"long",month:"long",day:"numeric"})},label:v=>{const j=v.dataset.label,E=v.parsed.y;return`${j}: ${E.toLocaleString()} m`},footer:v=>`Total: ${v.reduce((E,D)=>E+D.parsed.y,0).toLocaleString()} m`}}},scales:{x:{display:!0,title:{display:!0,text:"Date"},grid:{display:!1},stacked:!0},y:{display:!0,title:{display:!0,text:"SQM Manufactured (m)"},beginAtZero:!0,stacked:!0,grid:{color:"rgba(0, 0, 0, 0.1)"}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}}),()=>{o.current&&o.current.destroy()}},[r,t,a]),a?l.jsx(Ot,{children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),l.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):l.jsx(Ot,{children:l.jsx("div",{className:"relative h-96",children:l.jsx("canvas",{ref:n})})})},GN=({startDate:r,endDate:t})=>{const[a,n]=M.useState([]),[o,u]=M.useState([]),[h,g]=M.useState(!0),[m,p]=M.useState(null);return M.useEffect(()=>{r&&t&&_(null,null,function*(){try{g(!0),p(null);const x=yield Kt.getManufacturingProductivityByResponsible(r,t),v=x.map(E=>({date:E.fecha,responsible:E.responsable||"Sin asignar",manufactured:E.total_area})),j=new Map;x.forEach(E=>{const D=E.responsable||"Sin asignar";j.has(D)||j.set(D,{totalPanels:0,totalSqm:0,efficiency:0});const O=j.get(D);O.totalPanels+=E.panel_count,O.totalSqm+=E.total_area}),j.forEach(E=>{E.efficiency=E.totalSqm>0?Math.min(100,E.totalSqm/100*10):0}),n(v),u(Array.from(j.entries()).map(([E,D])=>$e({responsible:E},D)))}catch(x){console.error("Error fetching manufacturing data:",x),p(x instanceof Error?x.message:"Error desconocido")}finally{g(!1)}})},[r,t]),{responsibleData:a,responsiblesTable:o,loading:h,error:m}},KN=({dateRange:r})=>{const{responsibleData:t,responsiblesTable:a,loading:n,error:o}=GN(r),u=Od(),h=wo(),g=t.reduce((x,v)=>x+v.manufactured,0),m=a.reduce((x,v)=>x+v.totalPanels,0),p=new Set(t.map(x=>x.responsible)).size,y={totalSqmManufactured:g,responsibles:p,totalPanels:m};return l.jsxs("div",{className:"space-y-10",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"w-32"}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Manufacturing Analytics"}),l.jsx("p",{className:"text-gray-600 italic",children:"Detailed analysis of manufacturing operations and performance by responsible person"})]}),l.jsx("div",{className:"flex items-center space-x-3",children:l.jsxs("div",{className:"text-sm text-gray-500",children:[l.jsxs("div",{className:"text-base font-medium",children:["Last sync: ",u]}),l.jsxs("div",{className:"text-xs italic",children:["Next sync: ",h]})]})})]}),o&&l.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"text-red-400 mr-3",children:""}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading data"}),l.jsx("p",{className:"text-sm text-red-600 mt-1",children:o})]})]})}),l.jsx("div",{className:"space-y-4",children:l.jsx(Dd,{data:y,loading:n})}),l.jsx("div",{className:"flex items-center justify-center space-y-4",children:l.jsxs("div",{className:"relative group",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:"w-16 h-px bg-gradient-to-r from-transparent via-green-400 to-green-600 transform group-hover:scale-x-150 transition-all duration-500"}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-green-500 to-green-700 rounded-full flex items-center justify-center shadow-lg group-hover:shadow-xl group-hover:scale-110 transition-all duration-300",children:l.jsx("span",{className:"text-white text-sm font-bold",children:""})}),l.jsx("div",{className:"absolute -inset-2 bg-green-200 rounded-full opacity-0 group-hover:opacity-30 group-hover:animate-ping transition-all duration-300"})]}),l.jsx("div",{className:"w-16 h-px bg-gradient-to-l from-transparent via-green-400 to-green-600 transform group-hover:scale-x-150 transition-all duration-500"})]}),l.jsx("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-all duration-300",children:l.jsx("span",{className:"text-xs font-medium text-green-600 bg-white px-2 py-1 rounded-full shadow-sm",children:"Charts"})})]})}),l.jsx("div",{className:"space-y-4",children:l.jsx(QN,{data:t,title:"Daily Manufacturing",loading:n})}),l.jsx("div",{className:"flex items-center justify-center my-16",children:l.jsxs("div",{className:"relative group cursor-pointer",children:[l.jsxs("div",{className:"flex items-center space-x-6",children:[l.jsxs("div",{className:"flex space-x-1",children:[l.jsx("div",{className:"w-2 h-2 bg-blue-300 rounded-full group-hover:bg-blue-500 transition-colors duration-300"}),l.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full group-hover:bg-blue-600 transition-colors duration-300 delay-75"}),l.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full group-hover:bg-blue-700 transition-colors duration-300 delay-150"}),l.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full group-hover:bg-blue-600 transition-colors duration-300 delay-75"}),l.jsx("div",{className:"w-2 h-2 bg-blue-300 rounded-full group-hover:bg-blue-500 transition-colors duration-300"})]}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-700 rounded-lg flex items-center justify-center shadow-lg group-hover:shadow-2xl group-hover:rotate-12 transition-all duration-300",children:l.jsx("span",{className:"text-white text-lg",children:""})}),l.jsx("div",{className:"absolute -inset-3 bg-blue-200 rounded-lg opacity-0 group-hover:opacity-20 group-hover:animate-pulse transition-all duration-300"})]}),l.jsxs("div",{className:"flex space-x-1",children:[l.jsx("div",{className:"w-2 h-2 bg-blue-300 rounded-full group-hover:bg-blue-500 transition-colors duration-300"}),l.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full group-hover:bg-blue-600 transition-colors duration-300 delay-75"}),l.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full group-hover:bg-blue-700 transition-colors duration-300 delay-150"}),l.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full group-hover:bg-blue-600 transition-colors duration-300 delay-75"}),l.jsx("div",{className:"w-2 h-2 bg-blue-300 rounded-full group-hover:bg-blue-500 transition-colors duration-300"})]})]}),l.jsx("div",{className:"absolute -top-10 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-all duration-300",children:l.jsx("div",{className:"bg-blue-600 text-white text-xs font-medium px-3 py-1 rounded-full shadow-lg",children:"Performance"})})]})}),l.jsx("div",{className:"space-y-4",children:l.jsx(b0,{data:a,title:"Performance by Responsible Person",loading:n})})]})},Ju=r=>{const t=r.getFullYear(),a=String(r.getMonth()+1).padStart(2,"0"),n=String(r.getDate()).padStart(2,"0");return`${t}-${a}-${n}`},WN=()=>{const r=M.useCallback(Ju,[]),[t,a]=M.useState(()=>{const u=new Date,h=new Date(u);return h.setDate(u.getDate()-29),{startDate:Ju(h),endDate:Ju(u)}}),n=M.useCallback(u=>{a(u)},[]),o=M.useCallback(u=>{const h=new Date,g=new Date(h);switch(u){case"today":a({startDate:r(h),endDate:r(h)});return;case"thisWeek":{const m=h.getDay(),p=m===0?6:m-1;g.setDate(h.getDate()-p);break}case"7d":g.setDate(h.getDate()-6);break;case"30d":g.setDate(h.getDate()-29);break;case"90d":g.setDate(h.getDate()-89);break;case"1y":g.setFullYear(h.getFullYear()-1);break}a({startDate:r(g),endDate:r(h)})},[r]);return{dateRange:t,setDateRange:n,setQuickRange:o,formatDate:r}},XN=(r,t)=>{const a=JN(r);ZN(a,`${t}.csv`,"text/csv")},JN=r=>{const t=[];return t.push("=== FACTORY ANALYTICS REPORT ==="),t.push(`Generated: ${new Date(r.exportDate).toLocaleString("en-AU")}`),t.push(`Date Range: ${r.dateRange.start} to ${r.dateRange.end}`),t.push("Company: Cladding Creations"),t.push(""),t.push("=== MAIN METRICS ==="),t.push("Metric,Value,Unit"),t.push(`Total SQM Cut,${r.metrics.totalCutArea.toFixed(2)},SQM`),t.push(`Total SQM Manufactured,${r.metrics.totalManufacturedArea.toFixed(2)},SQM`),t.push(`Total Projects,${r.projects.length},units`),t.push(`Total Panels,${r.metrics.totalPanels},units`),t.push(""),r.projects&&r.projects.length>0&&(t.push("=== PROJECTS SUMMARY ==="),t.push("Project Number,Project Name,PM,Supervisor,Status,Real Total Cut SQM,Expected Total SQM,Progress %,Allowed SQM to Buy,Start Date,Expected Date,Finalization Date,SQM Cut,SQM Manufactured,Total Panels"),r.projects.forEach(a=>{t.push([`"${a.projectNumber}"`,`"${a.projectName}"`,`"${a.pm}"`,`"${a.supervisor}"`,`"${a.status}"`,a.realTotalCutSqm.toFixed(2),a.expectedTotalSqm.toFixed(2),a.progressPercentage,a.allowedSqmToBuy.toFixed(2),a.startDate,a.expectedDate,a.finalizationDate,a.cutSqm.toFixed(2),a.manufacturedSqm.toFixed(2),a.totalPanels].join(","))}),t.push("")),r.chartData&&r.chartData.length>0&&(t.push("=== DAILY PRODUCTIVITY ==="),t.push("Date,SQM Cut,SQM Manufactured"),r.chartData.forEach(a=>{t.push([a.date,a.cutArea.toFixed(2),a.manufacturedArea.toFixed(2)].join(","))})),t.join(`
`)},ZN=(r,t,a)=>{const n=new Blob([r],{type:a}),o=URL.createObjectURL(n),u=document.createElement("a");u.href=o,u.download=t,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(o)},e1=(r,t,a)=>`${r}_${t}_to_${a}`,t1=()=>({exportData:M.useCallback(t=>{if(!t.mainMetrics||!t.projects||!t.chartData){console.error("Missing data for export");return}const a={metrics:{totalCutArea:t.mainMetrics.total_sqm_cut,totalManufacturedArea:t.mainMetrics.total_sqm_manufactured,totalPanels:t.projects.reduce((o,u)=>o+(u.total_panels||0),0)},projects:t.projects.map(o=>{var u;return{projectNumber:((u=o.project_number)==null?void 0:u.toString())||"N/A",projectName:o.project_name,pm:o.pm||"N/A",supervisor:o.site_supervisor||"N/A",status:o.status||"N/A",realTotalCutSqm:o.real_cut_square_meters||0,expectedTotalSqm:o.expected_square_meters||0,progressPercentage:Math.round(o.progress_percentage||0),allowedSqmToBuy:o.allowed_sqm_to_buy||0,startDate:o.project_start_date||"",expectedDate:o.expected_completion_date||"",finalizationDate:o.finalization_date||"",cutSqm:o.total_sqm_cut||0,manufacturedSqm:o.total_sqm_manufactured||0,totalPanels:o.total_panels||0}}),chartData:t.chartData.map(o=>({date:o.date,cutArea:o.cut,manufacturedArea:o.manufactured})),exportDate:new Date().toISOString(),dateRange:{start:t.dateRange.startDate,end:t.dateRange.endDate}},n=e1("CC_Analytics_Report",t.dateRange.startDate,t.dateRange.endDate);XN(a,n)},[])}),a1=r=>{const{mainMetrics:t,projects:a,chartData:n}=v0(r),{exportData:o}=t1();return{handleExportCSV:M.useCallback(()=>{t&&a&&n&&o({mainMetrics:t,projects:a,chartData:n,dateRange:r})},[t,a,n,r,o]),canExport:!!(t&&a&&n)}},s1=({currentView:r,onViewChange:t,isOpen:a,onToggle:n})=>{const[o,u]=M.useState(!1);return M.useEffect(()=>{const h=setTimeout(()=>{u(!0),setTimeout(()=>{u(!1)},2e3)},1e3);return()=>clearTimeout(h)},[]),l.jsx(EN,{currentView:r,onViewChange:t,isOpen:a,onToggle:n,showHintAnimation:o})},r1=()=>{const[r,t]=M.useState("analytics"),[a,n]=M.useState(!1),{dateRange:o,setDateRange:u,setQuickRange:h}=WN(),{handleExportCSV:g,canExport:m}=a1(o);ki("CC Analytics Dashboard"),M.useEffect(()=>{const x=setTimeout(()=>{n(!0)},1e3);return()=>clearTimeout(x)},[]);const p=M.useCallback(()=>{switch(r){case"analytics":return l.jsx(np,{dateRange:o});case"cut-process":return l.jsx(FN,{dateRange:o});case"manufacturing":return l.jsx(KN,{dateRange:o});default:return l.jsx(np,{dateRange:o})}},[r,o]),y=M.useCallback(()=>{n(!a)},[a]);return l.jsxs("div",{className:"flex h-screen bg-gray-50",children:[l.jsx(s1,{currentView:r,onViewChange:t,isOpen:a,onToggle:y}),l.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden transition-all duration-300",children:[l.jsx(DN,{dateRange:o,onDateRangeChange:u,onQuickRangeChange:h,onExportCSV:g,canExport:m}),l.jsx("main",{className:"flex-1 overflow-auto p-8",children:l.jsx(NN,{children:p()})}),l.jsx("footer",{className:"bg-white border-t border-gray-200 px-8 py-6 sticky bottom-0",children:l.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[l.jsx("div",{className:"w-16 h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent"}),l.jsx("div",{className:"flex items-center space-x-3",children:l.jsx("img",{src:xo(),alt:"CC Logo",className:"h-10 w-auto"})}),l.jsx("div",{className:"w-16 h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent"}),l.jsx("div",{className:"text-center",children:l.jsxs("div",{className:"text-sm text-gray-500 mb-1",children:["Developed by"," ",l.jsx("a",{href:"https://www.gjouglard.com.ar",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 hover:underline transition-colors duration-200 font-medium",children:"GJ"})]})}),l.jsx("div",{className:"w-16 h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent"})]})})]})]})},n1=()=>{const{data:r,isLoading:t}=jd(),{data:a,isLoading:n}=Lp();return M.useEffect(()=>{console.log(" Precargando datos en background...")},[]),M.useEffect(()=>{!t&&!n&&(console.log(" Datos precargados exitosamente"),console.log(` ${(a==null?void 0:a.length)||0} proyectos cargados`),console.log(` ${(r==null?void 0:r.length)||0} items cargados`))},[t,n,a==null?void 0:a.length,r==null?void 0:r.length]),null},i1=({logoPath:r,menuItems:t})=>{const[a,n]=M.useState(!1),o=M.useRef(null),u=vp();M.useEffect(()=>{const m=p=>{o.current&&!o.current.contains(p.target)&&n(!1)};return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[]);const h=()=>{n(!a)},g=m=>{u(m),n(!1)};return l.jsxs("div",{className:"logo-menu-container",ref:o,children:[l.jsxs("div",{className:"logo-button",onClick:h,children:[l.jsx("img",{src:r,alt:"CC Logo",className:"logo-image"}),l.jsx("div",{className:`menu-arrow ${a?"open":""}`,children:""})]}),a&&l.jsxs("div",{className:"menu-dropdown",children:[l.jsx("div",{className:"menu-header",children:l.jsx("span",{children:"Other Functions"})}),l.jsx("div",{className:"menu-items",children:t.map(m=>l.jsxs("button",{className:"menu-item",onClick:()=>g(m.path),children:[m.icon&&l.jsx("span",{className:"menu-item-icon",children:m.icon}),l.jsx("span",{className:"menu-item-label",children:m.label})]},m.id))})]})]})},ip={"/":{name:"main",animationDuration:4e3,showDataPreloader:!0,loadingText:"Loading projects...",showHeader:!0},"/order-delivery":{name:"order-delivery",animationDuration:1200,showDataPreloader:!1,loadingText:"Loading...",showHeader:!1},"/analytics":{name:"analytics",animationDuration:1200,showDataPreloader:!1,loadingText:"Loading CC Analytics...",showHeader:!1},"/login":{name:"login",animationDuration:0,showDataPreloader:!1,loadingText:"",showHeader:!1},"/creator-of-orders":{name:"creator-of-orders",animationDuration:1200,showDataPreloader:!1,loadingText:"Loading...",showHeader:!1}},l1=r=>ip[r]||ip["/"],x0=M.createContext(void 0),o1=({children:r})=>{const[t,a]=M.useState(null),[n,o]=M.useState(null),[u,h]=M.useState(!0);M.useEffect(()=>{ba.auth.getSession().then(({data:{session:v}})=>{var j;o(v),a((j=v==null?void 0:v.user)!=null?j:null),h(!1)});const{data:{subscription:x}}=ba.auth.onAuthStateChange((v,j)=>{var E;o(j),a((E=j==null?void 0:j.user)!=null?E:null),h(!1)});return()=>x.unsubscribe()},[]);const y={user:t,session:n,loading:u,sendOtp:x=>_(null,null,function*(){const{error:v}=yield ba.auth.signInWithOtp({email:x,options:{shouldCreateUser:!0}});return{error:v}}),verifyOtp:(x,v)=>_(null,null,function*(){const{data:j,error:E}=yield ba.auth.verifyOtp({email:x,token:v,type:"email"});return{data:j,error:E}}),signOut:()=>_(null,null,function*(){yield ba.auth.signOut(),a(null),o(null)})};return l.jsx(x0.Provider,{value:y,children:r})},jo=()=>{const r=M.useContext(x0);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r},c1=()=>{const[r,t]=M.useState(""),[a,n]=M.useState(""),[o,u]=M.useState("email"),[h,g]=M.useState(!1),[m,p]=M.useState(null),{sendOtp:y,verifyOtp:x,user:v}=jo(),j=vp(),E=()=>window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?"/CC-logo-NEW_1.webp":"/CC_Flow_summary_report/CC-logo-NEW_1.webp",D=()=>window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?"/Cladding-Creations-Showcase.jpeg":"/CC_Flow_summary_report/Cladding-Creations-Showcase.jpeg";ki("CC Login"),M.useEffect(()=>{if(v){const q=new URLSearchParams(window.location.search).get("from")||"/creator-of-orders";j(q,{replace:!0})}},[v,j]);const O=q=>_(null,null,function*(){if(q.preventDefault(),g(!0),p(null),!r||!r.includes("@")){p({type:"error",text:"Please enter a valid email"}),g(!1);return}try{const{error:ee}=yield y(r);ee?p({type:"error",text:ee.message||"Error sending code"}):(p({type:"success",text:"Check your email for the 6-digit code."}),u("code"))}catch(ee){p({type:"error",text:"An unexpected error occurred. Please try again."})}finally{g(!1)}}),H=q=>_(null,null,function*(){if(q.preventDefault(),g(!0),p(null),!a||a.length!==6){p({type:"error",text:"Please enter the 6-digit code"}),g(!1);return}try{const{error:ee}=yield x(r,a);if(ee)p({type:"error",text:ee.message||"Invalid code. Please try again."}),n("");else{const ae=new URLSearchParams(window.location.search).get("from")||"/creator-of-orders";j(ae,{replace:!0})}}catch(ee){p({type:"error",text:"An unexpected error occurred. Please try again."}),n("")}finally{g(!1)}}),U=()=>{u("email"),n(""),p(null)};return l.jsxs("div",{className:"login-container",children:[l.jsxs("div",{className:"login-image-section",children:[l.jsx("img",{src:D(),alt:"Cladding Creations",className:"login-showcase-image"}),l.jsx("div",{className:"login-image-overlay"})]}),l.jsx("div",{className:"login-form-section",children:l.jsxs("div",{className:"login-content",children:[l.jsx("div",{className:"login-logo",children:l.jsx("img",{src:E(),alt:"CC Logo"})}),l.jsxs("div",{className:"login-header",children:[l.jsx("h1",{children:"Welcome"}),l.jsx("p",{children:o==="email"?"Enter your email to receive a login code. Can use your Cladding Creations email address.":"Enter the 6-digit code sent to your email"})]}),o==="email"?l.jsxs("form",{onSubmit:O,className:"login-form",children:[l.jsx("div",{className:"form-group",children:l.jsx("input",{id:"email",type:"email",value:r,onChange:q=>t(q.target.value),placeholder:"your-email@claddingcreations.com.au",required:!0,disabled:h,autoComplete:"email"})}),m&&l.jsx("div",{className:`message ${m.type}`,children:m.text}),l.jsx("button",{type:"submit",className:"login-button",disabled:h,children:h?"Sending...":"Send Code"})]}):l.jsxs("form",{onSubmit:H,className:"login-form",children:[l.jsx("div",{className:"form-group",children:l.jsx("input",{id:"code",type:"text",value:a,onChange:q=>{const ee=q.target.value.replace(/\D/g,"").slice(0,6);n(ee)},placeholder:"000000",required:!0,disabled:h,autoComplete:"one-time-code",maxLength:6,className:"code-input"})}),m&&l.jsx("div",{className:`message ${m.type}`,children:m.text}),l.jsx("button",{type:"submit",className:"login-button",disabled:h||a.length!==6,children:h?"Verifying...":"Verify Code"}),l.jsx("button",{type:"button",onClick:U,className:"login-button-secondary",disabled:h,children:"Change Email"})]}),l.jsx("div",{className:"login-footer",children:l.jsx("p",{className:"help-text",children:o==="email"?"You will receive a 6-digit code in your email":`Code sent to ${r}`})})]})})]})},u1=({children:r})=>{const{user:t,loading:a}=jo(),n=bp();return a?l.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:l.jsx(Ca,{})}):t?l.jsx(l.Fragment,{children:r}):l.jsx(ib,{to:"/login",state:{from:n.pathname},replace:!0})},w0=M.createContext(void 0),d1=()=>new Date().toISOString().split("T")[0],lp={project:"",orderId:"",status:"Ready to cut",responsable:"",expectedTo:d1(),priority:"Normal",selectedSheets:[],sheets:"",colour:"",ignoredSheetDimensions:[],panels:[],csvFile:null,orderComment:"",documents:[],selectedExistingDocuments:[]},op={step1:{isValid:!1,errors:[]},step2:{isValid:!1,errors:[]},step3:{isValid:!1,errors:[]},step4:{isValid:!0,errors:[]},step5:{isValid:!1,errors:[]}};function h1({children:r}){const[t,a]=M.useState(1),[n,o]=M.useState(lp),[u,h]=M.useState(op),[g,m]=M.useState(!1),[p,y]=M.useState(null),[x,v]=M.useState(!1),[j,E]=M.useState(null),D=M.useCallback((Y,re)=>{const T=re||n,C=[];switch(Y){case 1:T.project||C.push("Project is required"),T.orderId?j===!1?C.push("Order ID already exists. Please use a different Order ID."):j===null&&T.orderId.trim().length>0&&C.push("Please wait while we verify the Order ID availability"):C.push("Order ID is required"),T.responsable||C.push("Responsable is required"),T.expectedTo||C.push("Expected to is required");break;case 2:T.panels.length===0?C.push("Must import at least one valid panel"):(T.panels.filter(de=>de.isDuplicate).length>0&&C.push("Please fix duplicate panel names in the CSV"),T.panels.filter(de=>de.existsInDatabase).length>0&&C.push("Some panel names already exist in the database. Please rename them."));break;case 3:if(T.selectedSheets.length===0)C.push("Must select at least one sheet");else{T.selectedSheets.filter(xe=>xe.qty<=0).length>0&&C.push("All selected sheets must have a quantity greater than 0"),T.selectedSheets.filter(xe=>!xe.colour||xe.colour.trim()==="").length>0&&C.push("All sheets must have a colour");const de=new Set(T.ignoredSheetDimensions||[]),ge=new Set(T.panels.map(xe=>{var A;return(A=xe.sheetName)==null?void 0:A.trim()}).filter(Boolean).filter(xe=>!de.has(xe)));T.selectedSheets.length<ge.size&&C.push("Please select a colour for every detected sheet size")}break;case 4:T.documents.length>0&&(T.documents.filter(de=>!de.name||de.name.trim()==="").length>0&&C.push("All documents must have a name"),T.documents.filter(de=>!de.category||de.category.trim()==="").length>0&&C.push("All documents must have a category"));break;case 5:T.project||C.push("Project is required"),T.orderId||C.push("Order ID is required"),T.selectedSheets.length===0&&C.push("Must select at least one sheet"),T.panels.length===0&&C.push("Must import at least one valid panel");break}const G=C.length===0;return h(z=>at($e({},z),{[`step${Y}`]:{isValid:G,errors:C}})),G},[n,j]),O=M.useCallback(Y=>{o(re=>{const T=$e($e({},re),Y);if(Y.selectedSheets!==void 0)if(Y.selectedSheets.length>0){const C=Y.selectedSheets[0];T.colour=C.colour;const G=Y.selectedSheets.map(z=>`${z.dimension} - ${z.colour}`);T.sheets=G.join(", ")}else T.colour="",T.sheets="";return T})},[]);M.useEffect(()=>{D(t,n)},[n,t,j,D]);const H=M.useCallback(()=>{D(t)&&t<5&&a(Y=>Y+1)},[t,D]),U=M.useCallback(()=>{t>1&&a(Y=>Y-1)},[t]),q=M.useCallback(Y=>{Y>=1&&Y<=5&&a(Y)},[]),ee=M.useCallback(()=>{a(1),o(lp),h(op),m(!1),y(null),v(!1),E(null)},[]),ae={currentStep:t,formData:n,validation:u,isLoading:g,error:p,success:x,orderIdIsValid:j,updateFormData:O,validateStep:D,nextStep:H,previousStep:U,goToStep:q,resetWizard:ee,setLoading:m,setError:y,setSuccess:v,setOrderIdIsValid:E};return l.jsx(w0.Provider,{value:ae,children:r})}function za(){const r=M.useContext(w0);if(r===void 0)throw new Error("useWizard must be used within a WizardProvider");return r}const cp=[{number:1,label:"Order Information"},{number:2,label:"Panels Import"},{number:3,label:"Sheets Selection"},{number:4,label:"Upload Documents"},{number:5,label:"Review & Create"}];function f1(){const{currentStep:r}=za();return l.jsx("div",{className:"wizard-progress",children:cp.map((t,a)=>l.jsxs("div",{className:"wizard-progress-item",children:[a>0&&l.jsx("div",{className:"wizard-progress-line-before",children:l.jsx("div",{className:`wizard-progress-line-fill ${r>=t.number?"completed":""}`})}),l.jsxs("div",{className:`wizard-progress-step ${r===t.number?"active":r>t.number?"completed":"pending"}`,children:[l.jsx("div",{className:"wizard-progress-step-number",children:t.number}),l.jsx("div",{className:"wizard-progress-step-label",children:t.label})]}),a<cp.length-1&&l.jsx("div",{className:"wizard-progress-line-after",children:l.jsx("div",{className:`wizard-progress-line-fill ${r>t.number?"completed":""}`})})]},t.number))})}function m1(){var v,j;const{currentStep:r,previousStep:t,nextStep:a,validateStep:n,isLoading:o,validation:u}=za(),h=()=>{n(r)&&a()},g=()=>{t()},m=r===1,p=r===5,y=(j=(v=u[`step${r}`])==null?void 0:v.isValid)!=null?j:!1,x=o||!y;return l.jsxs("div",{className:"wizard-navigation",children:[l.jsx("button",{type:"button",onClick:g,disabled:m||o,className:"wizard-nav-button wizard-nav-button-prev",children:"Previous"}),p?null:l.jsx("button",{type:"button",onClick:h,disabled:x,className:"wizard-nav-button wizard-nav-button-next",children:"Next"})]})}function g1(r){const{data:t,isLoading:a,error:n}=la({queryKey:["lastOrder",r],queryFn:()=>_(null,null,function*(){var h;if(!r)return null;const u=yield Kt.getOrdersCutByProject(r);return u.length===0?null:((h=u[0])==null?void 0:h["Order ID"])||null}),enabled:!!r,staleTime:3e5}),o=t?p1(t):"";return{lastOrderId:t||"",nextOrderId:o,isLoading:a,error:n}}function p1(r){const t=r.match(/(\d+)$/);if(t){const a=parseInt(t[1],10),n=r.substring(0,r.length-t[1].length),o=a+1,u=t[1].length;return`${n}${o.toString().padStart(u,"0")}`}return`${r}-1`}function y1(r,t=500){const[a,n]=M.useState(r);M.useEffect(()=>{const g=setTimeout(()=>{n(r)},t);return()=>clearTimeout(g)},[r,t]);const{data:o,isLoading:u}=la({queryKey:["orderIdValidation",a],queryFn:()=>_(null,null,function*(){return!a||!a.trim()?null:yield Kt.checkOrderIdExists(a)}),enabled:!!a&&a.trim().length>0,staleTime:120*1e3,retry:!1});return{isValid:a.trim().length===0||o===null?null:!o,isChecking:u&&a.trim().length>0}}const up=new Os,v1=[{value:"Ready to cut",label:"Ready to cut",icon:""},{value:"cutting",label:"Cutting",icon:""},{value:"manufacturing",label:"Manufacturing",icon:""},{value:"delivering",label:"Delivering",icon:""},{value:"delivered",label:"Delivered",icon:""}],b1=[{value:"Normal",label:"Normal",color:"#48bb78",bgColor:"#c6f6d5"},{value:"High",label:"High",color:"#d69e2e",bgColor:"#fefcbf"},{value:"Urgent",label:"Urgent",color:"#e53e3e",bgColor:"#fed7d7"}],x1=r=>{if(!r)return"N/A";try{const t=new Date(r);if(isNaN(t.getTime()))return r;const a=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),o=t.getFullYear();return`${a}/${n}/${o}`}catch(t){return r}},w1=r=>r<50?"#48bb78":r<90?"#ecc94b":"#e53e3e";function dp(){var xe;const{formData:r,updateFormData:t,validation:a}=za(),{user:n}=jo(),[o,u]=M.useState(!1),h=Hv(),[g,m]=M.useState(""),[p,y]=M.useState(!1),[x,v]=M.useState(!1),{data:j,isLoading:E}=la({queryKey:["projects"],queryFn:()=>up.getAllProjects(),staleTime:900*1e3}),D=M.useMemo(()=>!r.project||!j?null:j.find(A=>A.Name===r.project)||null,[r.project,j]),{data:O,isLoading:H}=la({queryKey:["orders-by-project",r.project],queryFn:()=>Kt.getOrdersCutByProject(r.project||""),enabled:!!r.project,staleTime:300*1e3}),U=M.useMemo(()=>{if(!j)return[];if(!g.trim())return j;const A=g.toLowerCase().trim();return j.filter(Q=>{var N,$,P;const te=(N=Q.Name)==null?void 0:N.toLowerCase().includes(A),le=($=Q.Number)==null?void 0:$.toString().includes(A),S=(P=Q.PM)==null?void 0:P.toLowerCase().includes(A);return te||le||S})},[j,g]);M.useEffect(()=>{D!=null&&D.Name&&m(D.Name)},[D]);const q=M.useMemo(()=>{if(!D)return null;const A=Number(D["Expected Square Meters"])||0,Q=Number(D["Real Cut Square Meters"])||0;if(A===0)return null;const te=A,le=te>0?Q/te*100:0;return{expected:A,realCut:Q,reference:te,percentage:Math.min(le,100),actualPercentage:le,color:w1(Q>0&&A>0?Q/A*100:0),hasRealCut:Q>0}},[D]),{nextOrderId:ee,isLoading:ae}=g1(r.project||null),{isValid:Y,isChecking:re}=y1(r.orderId,500),{setOrderIdIsValid:T}=za();M.useEffect(()=>{T(Y)},[Y,T]),M.useEffect(()=>{(!r.orderId||r.orderId.trim().length===0)&&T(null)},[r.orderId,T]),M.useEffect(()=>{if(n!=null&&n.email&&!r.responsable){const A=n.email.split("@")[0].charAt(0).toUpperCase()+n.email.split("@")[0].slice(1);t({responsable:A})}},[n==null?void 0:n.email,r.responsable,t]),M.useEffect(()=>{r.project&&ee&&!x?t({orderId:ee}):r.project||(t({orderId:""}),v(!1))},[r.project,ee,t,x]),M.useEffect(()=>{v(!1)},[r.project]);const C=M.useCallback(()=>_(null,null,function*(){u(!0);try{const A=yield up.getAllProjects({forceAppSheet:!0});h.setQueryData(["projects"],A),console.log(" Sync completed - data refreshed from AppSheet")}catch(A){console.error("Error syncing from AppSheet:",A)}finally{u(!1)}}),[h]),G=(A,Q)=>{t({[A]:Q}),A==="orderId"&&v(!0)},z=A=>{t({project:A}),m(A),y(!1)},W=A=>{m(A),y(!0),A.trim()||t({project:""})},de=A=>{t({priority:A})},ge=a.step1;return E?l.jsxs("div",{className:"step-container step-loading",children:[l.jsx(Ca,{}),l.jsx("p",{children:"Loading projects..."})]}):l.jsxs("div",{className:"step-container step1-order",children:[l.jsx("h2",{className:"step-title",children:"Order Information"}),l.jsx("p",{className:"step-description",children:"Complete the basic information for the cutting order"}),l.jsxs("div",{className:"step1-layout",children:[l.jsxs("div",{className:"step1-form-column",children:[l.jsxs("div",{className:"form-row-compact",children:[l.jsxs("div",{className:"form-group form-group-large",children:[l.jsx("label",{htmlFor:"project",className:"form-label required",children:"Project"}),l.jsxs("div",{className:"project-search-container",children:[l.jsx("input",{id:"project",type:"text",value:g,onChange:A=>W(A.target.value),onFocus:()=>y(!0),onBlur:()=>{setTimeout(()=>y(!1),200)},className:`form-input project-search-input ${ge.errors.includes("The project is required")?"error":""}`,placeholder:"Search project by name, number, or PM...",autoComplete:"off"}),p&&U.length>0&&l.jsxs("div",{className:"project-dropdown",children:[U.slice(0,10).map(A=>l.jsxs("div",{className:`project-dropdown-item ${r.project===A.Name?"selected":""}`,onMouseDown:Q=>{Q.preventDefault(),z(A.Name)},children:[l.jsxs("div",{className:"project-dropdown-name",children:[A.Name,A.Number&&l.jsxs("span",{className:"project-dropdown-number",children:["#",A.Number]})]}),A.PM&&l.jsxs("div",{className:"project-dropdown-pm",children:["PM: ",A.PM]})]},A.Name)),U.length>10&&l.jsxs("div",{className:"project-dropdown-footer",children:["Showing 10 of ",U.length," projects"]})]}),p&&g.trim()&&U.length===0&&l.jsx("div",{className:"project-dropdown",children:l.jsx("div",{className:"project-dropdown-empty",children:"No projects found"})})]}),ge.errors.includes("The project is required")&&l.jsx("span",{className:"form-error",children:"The project is required"})]}),l.jsxs("div",{className:"form-group form-group-small",children:[l.jsxs("label",{htmlFor:"orderId",className:"form-label required",children:[l.jsx("span",{className:"label-icon",children:""}),"Order ID"]}),l.jsxs("div",{className:"input-with-validation",children:[l.jsx("input",{id:"orderId",type:"text",value:r.orderId,onChange:A=>G("orderId",A.target.value),className:`form-input input-centered ${ge.errors.includes("The Order ID is required")?"error":Y===!0?"valid":""}`,placeholder:ae?"...":"Auto",disabled:ae}),ae&&l.jsx("span",{className:"input-loading",children:""}),!ae&&re&&l.jsx("span",{className:"input-validation-icon checking",title:"Checking availability...",children:""}),!ae&&!re&&Y===!0&&l.jsx("span",{className:"input-validation-icon valid",title:"Order ID is available",children:""}),!ae&&!re&&Y===!1&&l.jsx("span",{className:"input-validation-icon invalid",title:"Order ID already exists",children:""})]}),ge.errors.includes("The Order ID is required")&&l.jsx("span",{className:"form-error",children:"Required"}),ge.errors.includes("Order ID already exists. Please use a different Order ID.")&&l.jsx("span",{className:"form-error",children:"This Order ID already exists."}),ge.errors.includes("Please wait while we verify the Order ID availability")&&l.jsx("span",{className:"form-error",children:"Please wait while we verify the Order ID availability"}),Y===!1&&!ge.errors.some(A=>A.includes("Order ID already exists"))&&l.jsx("span",{className:"form-error",children:"This Order ID already exists"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"status",className:"form-label required",children:"Status"}),l.jsx("select",{id:"status",value:r.status,onChange:A=>G("status",A.target.value),className:"form-select select-centered",children:v1.map(A=>l.jsxs("option",{value:A.value,children:[A.icon," ",A.label]},A.value))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"responsable",className:"form-label required",children:"Responsable"}),l.jsx("input",{id:"responsable",type:"text",value:r.responsable,onChange:A=>G("responsable",A.target.value),className:`form-input ${ge.errors.includes("The responsible is required")?"error":""}`,placeholder:"Enter responsable name"}),ge.errors.includes("The responsible is required")&&l.jsx("span",{className:"form-error",children:"The responsible is required"})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{className:"form-label required",children:[l.jsx("span",{className:"label-icon",children:""}),"Priority"]}),l.jsx("div",{className:"priority-toggle-group",children:b1.map(A=>l.jsxs("button",{type:"button",className:`priority-toggle-btn priority-${A.value.toLowerCase()} ${r.priority===A.value?"selected":""}`,onClick:()=>de(A.value),style:{"--priority-color":A.color,"--priority-bg":A.bgColor},children:[A.value==="Urgent"?"":A.value==="High"?"":"",l.jsx("span",{children:A.label})]},A.value))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"expectedTo",className:"form-label required",children:"Expected to"}),l.jsx("input",{id:"expectedTo",type:"date",value:r.expectedTo,onChange:A=>G("expectedTo",A.target.value),className:`form-input input-centered ${ge.errors.includes("The expected date is required")?"error":""}`,min:new Date().toISOString().split("T")[0]}),ge.errors.includes("The expected date is required")&&l.jsx("span",{className:"form-error",children:"The expected date is required"})]})]}),l.jsx("div",{className:"step1-info-column",children:D?l.jsxs("div",{className:"project-info-card",children:[l.jsxs("div",{className:"project-info-header",children:[l.jsxs("h3",{className:"project-info-title",children:[l.jsx("span",{className:"info-icon",children:""}),"Project Information"]}),l.jsx("span",{className:`header-status-badge status-${(xe=D.Status)==null?void 0:xe.toLowerCase().replace(/\s+/g,"-")}`,children:D.Status||"N/A"})]}),q&&l.jsxs("div",{className:"project-progress-section",children:[l.jsxs("div",{className:"progress-header",children:[l.jsx("span",{className:"progress-label",children:"Cutting Progress"}),q.hasRealCut&&l.jsxs("span",{className:"progress-percentage",style:{color:q.color},children:[q.actualPercentage.toFixed(1),"%"]})]}),l.jsx("div",{className:"progress-bar-container",children:l.jsx("div",{className:"progress-bar-fill",style:{width:`${q.percentage}%`,backgroundColor:q.color}})}),l.jsxs("div",{className:"progress-stats",children:[l.jsxs("div",{className:"progress-stat-row",children:[l.jsx("span",{className:"stat-label",children:"Real Cut:"}),l.jsxs("span",{className:"stat-value-with-sync",children:[l.jsx("span",{className:"stat-value",style:{color:q.hasRealCut?q.color:"#a0aec0"},children:q.hasRealCut?`${q.realCut.toFixed(2)} m`:"No data"}),l.jsx("button",{type:"button",className:`sync-btn ${o?"syncing":""}`,onClick:C,disabled:o,title:"Sync data from AppSheet",children:o?"":""})]})]}),l.jsxs("div",{className:"progress-stat-row",children:[l.jsx("span",{className:"stat-label",children:"Expected:"}),l.jsxs("span",{className:"stat-value",children:[q.expected.toLocaleString()," m"]})]})]})]}),l.jsxs("div",{className:"project-info-grid",children:[l.jsxs("div",{className:"info-item",children:[l.jsx("span",{className:"info-label",children:"Project Manager"}),l.jsx("span",{className:"info-value",children:D.PM||"N/A"})]}),l.jsxs("div",{className:"info-item",children:[l.jsx("span",{className:"info-label",children:"Site Supervisor"}),l.jsx("span",{className:"info-value",children:D["Site Supervisor"]||"N/A"})]}),D["Total Orders"]!==void 0&&Number(D["Total Orders"])>0&&l.jsxs("div",{className:"info-item",children:[l.jsx("span",{className:"info-label",children:"Total Orders"}),l.jsx("span",{className:"info-value highlight",children:D["Total Orders"]})]})]}),l.jsxs("div",{className:"project-orders-section",children:[l.jsxs("h4",{className:"orders-section-title",children:[l.jsx("span",{className:"orders-icon",children:""}),"Project Orders",O&&O.length>0&&l.jsxs("span",{className:"orders-count",children:["(",O.length,")"]})]}),H?l.jsxs("div",{className:"orders-loading",children:[l.jsx(Ca,{}),l.jsx("span",{children:"Loading orders..."})]}):O&&O.length>0?l.jsxs("div",{className:"orders-list",children:[O.sort((A,Q)=>{const te=new Date(A["Creation Date"]||0);return new Date(Q["Creation Date"]||0).getTime()-te.getTime()}).slice(0,10).map(A=>{var Q;return l.jsxs("div",{className:`order-item ${A["Order ID"]===r.orderId?"current-order":""}`,children:[l.jsxs("div",{className:"order-item-header",children:[l.jsx("span",{className:"order-id",children:A["Order ID"]}),l.jsx("span",{className:`order-status status-${(Q=A.Status)==null?void 0:Q.toLowerCase().replace(/\s+/g,"-")}`,children:A.Status||"N/A"})]}),l.jsxs("div",{className:"order-item-details",children:[A.Priority&&l.jsx("span",{className:`order-priority priority-${A.Priority.toLowerCase()}`,children:A.Priority}),A.Colour&&l.jsxs("span",{className:"order-colour",children:["Colour: ",A.Colour]}),A["Creation Date"]&&l.jsxs("span",{className:"order-date",children:["Created: ",x1(A["Creation Date"])]}),A.Responsable&&l.jsxs("span",{className:"order-responsable",children:["Responsable: ",A.Responsable]})]})]},A["Order ID"])}),O.length>10&&l.jsxs("div",{className:"orders-footer",children:["Showing 10 of ",O.length," orders"]})]}):l.jsx("div",{className:"orders-empty",children:l.jsx("p",{children:"No orders found for this project"})})]})]}):l.jsxs("div",{className:"project-info-placeholder",children:[l.jsx("span",{className:"placeholder-icon",children:""}),l.jsx("p",{children:"Select a project to view its information"})]})})]}),ge.errors.length>0&&l.jsxs("div",{className:"step-validation-errors",children:[l.jsx("p",{className:"validation-title",children:"Please correct the following errors:"}),l.jsx("ul",{children:ge.errors.map((A,Q)=>l.jsx("li",{children:A},Q))})]})]})}var no={exports:{}};var j1=no.exports,hp;function S1(){return hp||(hp=1,(function(r,t){((a,n)=>{r.exports=n()})(j1,function a(){var n=typeof self!="undefined"?self:typeof window!="undefined"?window:n!==void 0?n:{},o,u=!n.document&&!!n.postMessage,h=n.IS_PAPA_WORKER||!1,g={},m=0,p={};function y(T){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(C){var G=ae(C);G.chunkSize=parseInt(G.chunkSize),C.step||C.chunk||(G.chunkSize=null),this._handle=new D(G),(this._handle.streamer=this)._config=G}.call(this,T),this.parseChunk=function(C,G){var z=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<z){let de=this._config.newline;de||(W=this._config.quoteChar||'"',de=this._handle.guessLineEndings(C,W)),C=[...C.split(de).slice(z)].join(de)}this.isFirstChunk&&re(this._config.beforeFirstChunk)&&(W=this._config.beforeFirstChunk(C))!==void 0&&(C=W),this.isFirstChunk=!1,this._halted=!1;var z=this._partialLine+C,W=(this._partialLine="",this._handle.parse(z,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(C=W.meta.cursor,z=(this._finished||(this._partialLine=z.substring(C-this._baseIndex),this._baseIndex=C),W&&W.data&&(this._rowCount+=W.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),h)n.postMessage({results:W,workerId:p.WORKER_ID,finished:z});else if(re(this._config.chunk)&&!G){if(this._config.chunk(W,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=W=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(W.data),this._completeResults.errors=this._completeResults.errors.concat(W.errors),this._completeResults.meta=W.meta),this._completed||!z||!re(this._config.complete)||W&&W.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),z||W&&W.meta.paused||this._nextChunk(),W}this._halted=!0},this._sendError=function(C){re(this._config.error)?this._config.error(C):h&&this._config.error&&n.postMessage({workerId:p.WORKER_ID,error:C,finished:!1})}}function x(T){var C;(T=T||{}).chunkSize||(T.chunkSize=p.RemoteChunkSize),y.call(this,T),this._nextChunk=u?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(G){this._input=G,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(C=new XMLHttpRequest,this._config.withCredentials&&(C.withCredentials=this._config.withCredentials),u||(C.onload=Y(this._chunkLoaded,this),C.onerror=Y(this._chunkError,this)),C.open(this._config.downloadRequestBody?"POST":"GET",this._input,!u),this._config.downloadRequestHeaders){var G,z=this._config.downloadRequestHeaders;for(G in z)C.setRequestHeader(G,z[G])}var W;this._config.chunkSize&&(W=this._start+this._config.chunkSize-1,C.setRequestHeader("Range","bytes="+this._start+"-"+W));try{C.send(this._config.downloadRequestBody)}catch(de){this._chunkError(de.message)}u&&C.status===0&&this._chunkError()}},this._chunkLoaded=function(){C.readyState===4&&(C.status<200||400<=C.status?this._chunkError():(this._start+=this._config.chunkSize||C.responseText.length,this._finished=!this._config.chunkSize||this._start>=(G=>(G=G.getResponseHeader("Content-Range"))!==null?parseInt(G.substring(G.lastIndexOf("/")+1)):-1)(C),this.parseChunk(C.responseText)))},this._chunkError=function(G){G=C.statusText||G,this._sendError(new Error(G))}}function v(T){(T=T||{}).chunkSize||(T.chunkSize=p.LocalChunkSize),y.call(this,T);var C,G,z=typeof FileReader!="undefined";this.stream=function(W){this._input=W,G=W.slice||W.webkitSlice||W.mozSlice,z?((C=new FileReader).onload=Y(this._chunkLoaded,this),C.onerror=Y(this._chunkError,this)):C=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var W=this._input,de=(this._config.chunkSize&&(de=Math.min(this._start+this._config.chunkSize,this._input.size),W=G.call(W,this._start,de)),C.readAsText(W,this._config.encoding));z||this._chunkLoaded({target:{result:de}})},this._chunkLoaded=function(W){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(W.target.result)},this._chunkError=function(){this._sendError(C.error)}}function j(T){var C;y.call(this,T=T||{}),this.stream=function(G){return C=G,this._nextChunk()},this._nextChunk=function(){var G,z;if(!this._finished)return G=this._config.chunkSize,C=G?(z=C.substring(0,G),C.substring(G)):(z=C,""),this._finished=!C,this.parseChunk(z)}}function E(T){y.call(this,T=T||{});var C=[],G=!0,z=!1;this.pause=function(){y.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){y.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(W){this._input=W,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){z&&C.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),C.length?this.parseChunk(C.shift()):G=!0},this._streamData=Y(function(W){try{C.push(typeof W=="string"?W:W.toString(this._config.encoding)),G&&(G=!1,this._checkIsFinished(),this.parseChunk(C.shift()))}catch(de){this._streamError(de)}},this),this._streamError=Y(function(W){this._streamCleanUp(),this._sendError(W)},this),this._streamEnd=Y(function(){this._streamCleanUp(),z=!0,this._streamData("")},this),this._streamCleanUp=Y(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function D(T){var C,G,z,W,de=Math.pow(2,53),ge=-de,xe=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,A=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Q=this,te=0,le=0,S=!1,N=!1,$=[],P={data:[],errors:[],meta:{}};function ce(k){return T.skipEmptyLines==="greedy"?k.join("").trim()==="":k.length===1&&k[0].length===0}function ue(){if(P&&z&&(he("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+p.DefaultDelimiter+"'"),z=!1),T.skipEmptyLines&&(P.data=P.data.filter(function(Z){return!ce(Z)})),ie()){let Z=function(me,ye){re(T.transformHeader)&&(me=T.transformHeader(me,ye)),$.push(me)};if(P)if(Array.isArray(P.data[0])){for(var k=0;ie()&&k<P.data.length;k++)P.data[k].forEach(Z);P.data.splice(0,1)}else P.data.forEach(Z)}function I(Z,me){for(var ye=T.header?{}:[],pe=0;pe<Z.length;pe++){var De=pe,je=Z[pe],je=((qe,Se)=>(Le=>(T.dynamicTypingFunction&&T.dynamicTyping[Le]===void 0&&(T.dynamicTyping[Le]=T.dynamicTypingFunction(Le)),(T.dynamicTyping[Le]||T.dynamicTyping)===!0))(qe)?Se==="true"||Se==="TRUE"||Se!=="false"&&Se!=="FALSE"&&((Le=>{if(xe.test(Le)&&(Le=parseFloat(Le),ge<Le&&Le<de))return 1})(Se)?parseFloat(Se):A.test(Se)?new Date(Se):Se===""?null:Se):Se)(De=T.header?pe>=$.length?"__parsed_extra":$[pe]:De,je=T.transform?T.transform(je,De):je);De==="__parsed_extra"?(ye[De]=ye[De]||[],ye[De].push(je)):ye[De]=je}return T.header&&(pe>$.length?he("FieldMismatch","TooManyFields","Too many fields: expected "+$.length+" fields but parsed "+pe,le+me):pe<$.length&&he("FieldMismatch","TooFewFields","Too few fields: expected "+$.length+" fields but parsed "+pe,le+me)),ye}var J;P&&(T.header||T.dynamicTyping||T.transform)&&(J=1,!P.data.length||Array.isArray(P.data[0])?(P.data=P.data.map(I),J=P.data.length):P.data=I(P.data,0),T.header&&P.meta&&(P.meta.fields=$),le+=J)}function ie(){return T.header&&$.length===0}function he(k,I,J,Z){k={type:k,code:I,message:J},Z!==void 0&&(k.row=Z),P.errors.push(k)}re(T.step)&&(W=T.step,T.step=function(k){P=k,ie()?ue():(ue(),P.data.length!==0&&(te+=k.data.length,T.preview&&te>T.preview?G.abort():(P.data=P.data[0],W(P,Q))))}),this.parse=function(k,I,J){var Z=T.quoteChar||'"',Z=(T.newline||(T.newline=this.guessLineEndings(k,Z)),z=!1,T.delimiter?re(T.delimiter)&&(T.delimiter=T.delimiter(k),P.meta.delimiter=T.delimiter):((Z=((me,ye,pe,De,je)=>{var qe,Se,Le,it;je=je||[",","	","|",";",p.RECORD_SEP,p.UNIT_SEP];for(var Wt=0;Wt<je.length;Wt++){for(var $t,Ea=je[Wt],ht=0,Bt=0,We=0,He=(Le=void 0,new H({comments:De,delimiter:Ea,newline:ye,preview:10}).parse(me)),yt=0;yt<He.data.length;yt++)pe&&ce(He.data[yt])?We++:($t=He.data[yt].length,Bt+=$t,Le===void 0?Le=$t:0<$t&&(ht+=Math.abs($t-Le),Le=$t));0<He.data.length&&(Bt/=He.data.length-We),(Se===void 0||ht<=Se)&&(it===void 0||it<Bt)&&1.99<Bt&&(Se=ht,qe=Ea,it=Bt)}return{successful:!!(T.delimiter=qe),bestDelimiter:qe}})(k,T.newline,T.skipEmptyLines,T.comments,T.delimitersToGuess)).successful?T.delimiter=Z.bestDelimiter:(z=!0,T.delimiter=p.DefaultDelimiter),P.meta.delimiter=T.delimiter),ae(T));return T.preview&&T.header&&Z.preview++,C=k,G=new H(Z),P=G.parse(C,I,J),ue(),S?{meta:{paused:!0}}:P||{meta:{paused:!1}}},this.paused=function(){return S},this.pause=function(){S=!0,G.abort(),C=re(T.chunk)?"":C.substring(G.getCharIndex())},this.resume=function(){Q.streamer._halted?(S=!1,Q.streamer.parseChunk(C,!0)):setTimeout(Q.resume,3)},this.aborted=function(){return N},this.abort=function(){N=!0,G.abort(),P.meta.aborted=!0,re(T.complete)&&T.complete(P),C=""},this.guessLineEndings=function(me,Z){me=me.substring(0,1048576);var Z=new RegExp(O(Z)+"([^]*?)"+O(Z),"gm"),J=(me=me.replace(Z,"")).split("\r"),Z=me.split(`
`),me=1<Z.length&&Z[0].length<J[0].length;if(J.length===1||me)return`
`;for(var ye=0,pe=0;pe<J.length;pe++)J[pe][0]===`
`&&ye++;return ye>=J.length/2?`\r
`:"\r"}}function O(T){return T.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function H(T){var C=(T=T||{}).delimiter,G=T.newline,z=T.comments,W=T.step,de=T.preview,ge=T.fastMode,xe=null,A=!1,Q=T.quoteChar==null?'"':T.quoteChar,te=Q;if(T.escapeChar!==void 0&&(te=T.escapeChar),(typeof C!="string"||-1<p.BAD_DELIMITERS.indexOf(C))&&(C=","),z===C)throw new Error("Comment character same as delimiter");z===!0?z="#":(typeof z!="string"||-1<p.BAD_DELIMITERS.indexOf(z))&&(z=!1),G!==`
`&&G!=="\r"&&G!==`\r
`&&(G=`
`);var le=0,S=!1;this.parse=function(N,$,P){if(typeof N!="string")throw new Error("Input must be a string");var ce=N.length,ue=C.length,ie=G.length,he=z.length,k=re(W),I=[],J=[],Z=[],me=le=0;if(!N)return ht();if(ge||ge!==!1&&N.indexOf(Q)===-1){for(var ye=N.split(G),pe=0;pe<ye.length;pe++){if(Z=ye[pe],le+=Z.length,pe!==ye.length-1)le+=G.length;else if(P)return ht();if(!z||Z.substring(0,he)!==z){if(k){if(I=[],it(Z.split(C)),Bt(),S)return ht()}else it(Z.split(C));if(de&&de<=pe)return I=I.slice(0,de),ht(!0)}}return ht()}for(var De=N.indexOf(C,le),je=N.indexOf(G,le),qe=new RegExp(O(te)+O(Q),"g"),Se=N.indexOf(Q,le);;)if(N[le]===Q)for(Se=le,le++;;){if((Se=N.indexOf(Q,Se+1))===-1)return P||J.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:I.length,index:le}),$t();if(Se===ce-1)return $t(N.substring(le,Se).replace(qe,Q));if(Q===te&&N[Se+1]===te)Se++;else if(Q===te||Se===0||N[Se-1]!==te){De!==-1&&De<Se+1&&(De=N.indexOf(C,Se+1));var Le=Wt((je=je!==-1&&je<Se+1?N.indexOf(G,Se+1):je)===-1?De:Math.min(De,je));if(N.substr(Se+1+Le,ue)===C){Z.push(N.substring(le,Se).replace(qe,Q)),N[le=Se+1+Le+ue]!==Q&&(Se=N.indexOf(Q,le)),De=N.indexOf(C,le),je=N.indexOf(G,le);break}if(Le=Wt(je),N.substring(Se+1+Le,Se+1+Le+ie)===G){if(Z.push(N.substring(le,Se).replace(qe,Q)),Ea(Se+1+Le+ie),De=N.indexOf(C,le),Se=N.indexOf(Q,le),k&&(Bt(),S))return ht();if(de&&I.length>=de)return ht(!0);break}J.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:I.length,index:le}),Se++}}else if(z&&Z.length===0&&N.substring(le,le+he)===z){if(je===-1)return ht();le=je+ie,je=N.indexOf(G,le),De=N.indexOf(C,le)}else if(De!==-1&&(De<je||je===-1))Z.push(N.substring(le,De)),le=De+ue,De=N.indexOf(C,le);else{if(je===-1)break;if(Z.push(N.substring(le,je)),Ea(je+ie),k&&(Bt(),S))return ht();if(de&&I.length>=de)return ht(!0)}return $t();function it(We){I.push(We),me=le}function Wt(We){var He=0;return He=We!==-1&&(We=N.substring(Se+1,We))&&We.trim()===""?We.length:He}function $t(We){return P||(We===void 0&&(We=N.substring(le)),Z.push(We),le=ce,it(Z),k&&Bt()),ht()}function Ea(We){le=We,it(Z),Z=[],je=N.indexOf(G,le)}function ht(We){if(T.header&&!$&&I.length&&!A){var He=I[0],yt=Object.create(null),vt=new Set(He);let As=!1;for(let oa=0;oa<He.length;oa++){let Pt=He[oa];if(yt[Pt=re(T.transformHeader)?T.transformHeader(Pt,oa):Pt]){let ca,ks=yt[Pt];for(;ca=Pt+"_"+ks,ks++,vt.has(ca););vt.add(ca),He[oa]=ca,yt[Pt]++,As=!0,(xe=xe===null?{}:xe)[ca]=Pt}else yt[Pt]=1,He[oa]=Pt;vt.add(Pt)}As&&console.warn("Duplicate headers found and renamed."),A=!0}return{data:I,errors:J,meta:{delimiter:C,linebreak:G,aborted:S,truncated:!!We,cursor:me+($||0),renamedHeaders:xe}}}function Bt(){W(ht()),I=[],J=[]}},this.abort=function(){S=!0},this.getCharIndex=function(){return le}}function U(T){var C=T.data,G=g[C.workerId],z=!1;if(C.error)G.userError(C.error,C.file);else if(C.results&&C.results.data){var W={abort:function(){z=!0,q(C.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:ee,resume:ee};if(re(G.userStep)){for(var de=0;de<C.results.data.length&&(G.userStep({data:C.results.data[de],errors:C.results.errors,meta:C.results.meta},W),!z);de++);delete C.results}else re(G.userChunk)&&(G.userChunk(C.results,W,C.file),delete C.results)}C.finished&&!z&&q(C.workerId,C.results)}function q(T,C){var G=g[T];re(G.userComplete)&&G.userComplete(C),G.terminate(),delete g[T]}function ee(){throw new Error("Not implemented.")}function ae(T){if(typeof T!="object"||T===null)return T;var C,G=Array.isArray(T)?[]:{};for(C in T)G[C]=ae(T[C]);return G}function Y(T,C){return function(){T.apply(C,arguments)}}function re(T){return typeof T=="function"}return p.parse=function(T,C){var G=(C=C||{}).dynamicTyping||!1;if(re(G)&&(C.dynamicTypingFunction=G,G={}),C.dynamicTyping=G,C.transform=!!re(C.transform)&&C.transform,!C.worker||!p.WORKERS_SUPPORTED)return G=null,p.NODE_STREAM_INPUT,typeof T=="string"?(T=(z=>z.charCodeAt(0)!==65279?z:z.slice(1))(T),G=new(C.download?x:j)(C)):T.readable===!0&&re(T.read)&&re(T.on)?G=new E(C):(n.File&&T instanceof File||T instanceof Object)&&(G=new v(C)),G.stream(T);(G=(()=>{var z;return!!p.WORKERS_SUPPORTED&&(z=(()=>{var W=n.URL||n.webkitURL||null,de=a.toString();return p.BLOB_URL||(p.BLOB_URL=W.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",de,")();"],{type:"text/javascript"})))})(),(z=new n.Worker(z)).onmessage=U,z.id=m++,g[z.id]=z)})()).userStep=C.step,G.userChunk=C.chunk,G.userComplete=C.complete,G.userError=C.error,C.step=re(C.step),C.chunk=re(C.chunk),C.complete=re(C.complete),C.error=re(C.error),delete C.worker,G.postMessage({input:T,config:C,workerId:G.id})},p.unparse=function(T,C){var G=!1,z=!0,W=",",de=`\r
`,ge='"',xe=ge+ge,A=!1,Q=null,te=!1,le=((()=>{if(typeof C=="object"){if(typeof C.delimiter!="string"||p.BAD_DELIMITERS.filter(function($){return C.delimiter.indexOf($)!==-1}).length||(W=C.delimiter),typeof C.quotes!="boolean"&&typeof C.quotes!="function"&&!Array.isArray(C.quotes)||(G=C.quotes),typeof C.skipEmptyLines!="boolean"&&typeof C.skipEmptyLines!="string"||(A=C.skipEmptyLines),typeof C.newline=="string"&&(de=C.newline),typeof C.quoteChar=="string"&&(ge=C.quoteChar),typeof C.header=="boolean"&&(z=C.header),Array.isArray(C.columns)){if(C.columns.length===0)throw new Error("Option columns is empty");Q=C.columns}C.escapeChar!==void 0&&(xe=C.escapeChar+ge),C.escapeFormulae instanceof RegExp?te=C.escapeFormulae:typeof C.escapeFormulae=="boolean"&&C.escapeFormulae&&(te=/^[=+\-@\t\r].*$/)}})(),new RegExp(O(ge),"g"));if(typeof T=="string"&&(T=JSON.parse(T)),Array.isArray(T)){if(!T.length||Array.isArray(T[0]))return S(null,T,A);if(typeof T[0]=="object")return S(Q||Object.keys(T[0]),T,A)}else if(typeof T=="object")return typeof T.data=="string"&&(T.data=JSON.parse(T.data)),Array.isArray(T.data)&&(T.fields||(T.fields=T.meta&&T.meta.fields||Q),T.fields||(T.fields=Array.isArray(T.data[0])?T.fields:typeof T.data[0]=="object"?Object.keys(T.data[0]):[]),Array.isArray(T.data[0])||typeof T.data[0]=="object"||(T.data=[T.data])),S(T.fields||[],T.data||[],A);throw new Error("Unable to serialize unrecognized input");function S($,P,ce){var ue="",ie=(typeof $=="string"&&($=JSON.parse($)),typeof P=="string"&&(P=JSON.parse(P)),Array.isArray($)&&0<$.length),he=!Array.isArray(P[0]);if(ie&&z){for(var k=0;k<$.length;k++)0<k&&(ue+=W),ue+=N($[k],k);0<P.length&&(ue+=de)}for(var I=0;I<P.length;I++){var J=(ie?$:P[I]).length,Z=!1,me=ie?Object.keys(P[I]).length===0:P[I].length===0;if(ce&&!ie&&(Z=ce==="greedy"?P[I].join("").trim()==="":P[I].length===1&&P[I][0].length===0),ce==="greedy"&&ie){for(var ye=[],pe=0;pe<J;pe++){var De=he?$[pe]:pe;ye.push(P[I][De])}Z=ye.join("").trim()===""}if(!Z){for(var je=0;je<J;je++){0<je&&!me&&(ue+=W);var qe=ie&&he?$[je]:je;ue+=N(P[I][qe],je)}I<P.length-1&&(!ce||0<J&&!me)&&(ue+=de)}}return ue}function N($,P){var ce,ue;return $==null?"":$.constructor===Date?JSON.stringify($).slice(1,25):(ue=!1,te&&typeof $=="string"&&te.test($)&&($="'"+$,ue=!0),ce=$.toString().replace(le,xe),(ue=ue||G===!0||typeof G=="function"&&G($,P)||Array.isArray(G)&&G[P]||((ie,he)=>{for(var k=0;k<he.length;k++)if(-1<ie.indexOf(he[k]))return!0;return!1})(ce,p.BAD_DELIMITERS)||-1<ce.indexOf(W)||ce.charAt(0)===" "||ce.charAt(ce.length-1)===" ")?ge+ce+ge:ce)}},p.RECORD_SEP="",p.UNIT_SEP="",p.BYTE_ORDER_MARK="\uFEFF",p.BAD_DELIMITERS=["\r",`
`,'"',p.BYTE_ORDER_MARK],p.WORKERS_SUPPORTED=!u&&!!n.Worker,p.NODE_STREAM_INPUT=1,p.LocalChunkSize=10485760,p.RemoteChunkSize=5242880,p.DefaultDelimiter=",",p.Parser=H,p.ParserHandle=D,p.NetworkStreamer=x,p.FileStreamer=v,p.StringStreamer=j,p.ReadableStreamStreamer=E,n.jQuery&&((o=n.jQuery).fn.parse=function(T){var C=T.config||{},G=[];return this.each(function(de){if(!(o(this).prop("tagName").toUpperCase()==="INPUT"&&o(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var ge=0;ge<this.files.length;ge++)G.push({file:this.files[ge],inputElem:this,instanceConfig:o.extend({},C)})}),z(),this;function z(){if(G.length===0)re(T.complete)&&T.complete();else{var de,ge,xe,A,Q=G[0];if(re(T.before)){var te=T.before(Q.file,Q.inputElem);if(typeof te=="object"){if(te.action==="abort")return de="AbortError",ge=Q.file,xe=Q.inputElem,A=te.reason,void(re(T.error)&&T.error({name:de},ge,xe,A));if(te.action==="skip")return void W();typeof te.config=="object"&&(Q.instanceConfig=o.extend(Q.instanceConfig,te.config))}else if(te==="skip")return void W()}var le=Q.instanceConfig.complete;Q.instanceConfig.complete=function(S){re(le)&&le(S,Q.file,Q.inputElem),W()},p.parse(Q.file,Q.instanceConfig)}}function W(){G.splice(0,1),z()}}),h&&(n.onmessage=function(T){T=T.data,p.WORKER_ID===void 0&&T&&(p.WORKER_ID=T.workerId),typeof T.input=="string"?n.postMessage({workerId:p.WORKER_ID,results:p.parse(T.input,T.config),finished:!0}):(n.File&&T.input instanceof File||T.input instanceof Object)&&(T=p.parse(T.input,T.config))&&n.postMessage({workerId:p.WORKER_ID,results:T,finished:!0})}),(x.prototype=Object.create(y.prototype)).constructor=x,(v.prototype=Object.create(y.prototype)).constructor=v,(j.prototype=Object.create(j.prototype)).constructor=j,(E.prototype=Object.create(y.prototype)).constructor=E,p})})(no)),no.exports}var _1=S1();const N1=yp(_1);function C1(){const{formData:r,updateFormData:t,validation:a}=za(),[n,o]=M.useState(!1),[u,h]=M.useState(null),g=M.useRef(null),m=U=>{var ee;const q=(ee=U.target.files)==null?void 0:ee[0];if(q){if(!q.name.endsWith(".csv")){h("Please select a CSV file");return}o(!0),h(null),N1.parse(q,{header:!1,skipEmptyLines:!0,complete:ae=>_(null,null,function*(){try{const Y=p(ae.data),re=Y.map(W=>W.name),T=yield Kt.checkExistingPanels(re),C=new Set(T.map(W=>W.Name)),G=new Map(T.map(W=>[W.Name,{Order:W.Order,Status:W.Status}])),z=Y.map(W=>{var de,ge;return at($e({},W),{existsInDatabase:C.has(W.name),existingOrder:((de=G.get(W.name))==null?void 0:de.Order)||null,existingStatus:((ge=G.get(W.name))==null?void 0:ge.Status)||null})});t({panels:z,csvFile:q}),h(null)}catch(Y){h(Y instanceof Error?Y.message:"Error processing the CSV file")}finally{o(!1)}}),error:ae=>{h(`Error reading CSV: ${ae.message}`),o(!1)}})}},p=U=>{if(!U||U.length===0)throw new Error("CSV file is empty or invalid.");const[q,...ee]=U,ae=(q||[]).map(z=>(z!=null?z:"").toString().trim()),Y=y(ae,["SheetName","Sheet Name","Sheet"]),re=y(ae,["NestNumber","Nest Number","Nest"]),T=x(ae);if(T.length===0)throw new Error("No part columns found. Please make sure the CSV includes PartName columns.");if(Y===-1)throw new Error("SheetName column not found. Please include SheetName or Sheet Name.");if(re===-1)throw new Error("NestNumber column not found. Please include NestNumber or Nest Number.");const C=[];for(const z of ee){const W=v(z,Y),de=v(z,re);for(const ge of T){const xe=v(z,ge.nameIndex);if(!xe)continue;const A=xe.toUpperCase();if(A.includes("OFFCUT")||A.includes("REMNANT")||A.includes("SCRAP"))continue;const Q=j(v(z,ge.areaIndex)),te=j(v(z,ge.cutLengthIndex)),le=Math.max(1,Math.floor(j(v(z,ge.qtyIndex))||1));for(let S=0;S<le;S+=1)C.push({name:xe.trim(),area:Q,cutDistance:te,sheetName:W.trim(),nestNumber:de.trim(),comment:""})}}if(C.length===0)throw new Error("No valid panels found in the CSV. Please check that the file contains the correct columns.");const G=C.reduce((z,W)=>(z.set(W.name,(z.get(W.name)||0)+1),z),new Map);return C.map(z=>at($e({},z),{isDuplicate:(G.get(z.name)||0)>1}))},y=(U,q)=>{var ae;const ee=U.map(Y=>Y.toLowerCase().trim());return(ae=q.map(Y=>ee.indexOf(Y.toLowerCase().trim())).find(Y=>Y!==-1))!=null?ae:-1},x=U=>{const q=U.map(ae=>ae.toLowerCase().replace(/\s+/g,"")),ee=q.map((ae,Y)=>ae==="partname"?Y:-1).filter(ae=>ae!==-1);return ee.map((ae,Y)=>{const re=Y<ee.length-1?ee[Y+1]:U.length,T=q.slice(ae+1,re),C=T.findIndex(W=>W==="partarea"),G=T.findIndex(W=>W==="cutlength"||W==="cutdistance"),z=T.findIndex(W=>W==="partqtyinnest");return{nameIndex:ae,areaIndex:C>=0?ae+1+C:-1,cutLengthIndex:G>=0?ae+1+G:-1,qtyIndex:z>=0?ae+1+z:-1}})},v=(U,q)=>{if(q<0||q>=U.length)return"";const ee=U[q];return(ee!=null?ee:"").toString().trim()},j=U=>{if(!U)return 0;const q=U.replace(/,/g,"").trim(),ee=Number(q);return Number.isFinite(ee)?ee:0},E=()=>{t({panels:[],csvFile:null}),h(null),g.current&&(g.current.value="")},D=a.step2,O=M.useMemo(()=>{const U=r.panels.reduce((q,ee)=>(q.set(ee.name,(q.get(ee.name)||0)+1),q),new Map);return Array.from(U.entries()).filter(([,q])=>q>1).map(([q])=>q).sort()},[r.panels]),H=M.useMemo(()=>r.panels.filter(U=>U.existsInDatabase).map(U=>({name:U.name,existingOrder:U.existingOrder,existingStatus:U.existingStatus})).sort((U,q)=>U.name.localeCompare(q.name)),[r.panels]);return l.jsxs("div",{className:"step-container step2-panels",children:[l.jsx("h2",{className:"step-title",children:"Import Panels from CSV"}),l.jsx("p",{className:"step-description",children:"Upload the nesting CSV. We will extract panels from PartName columns and use SheetName and NestNumber from the file."}),l.jsxs("div",{className:"step2-upload",children:[l.jsxs("div",{className:"upload-area",children:[l.jsx("input",{ref:g,type:"file",accept:".csv",onChange:m,className:"file-input",id:"csv-file-input",disabled:n}),l.jsx("label",{htmlFor:"csv-file-input",className:`upload-label ${n?"processing":""} ${r.csvFile?"uploaded":""}`,children:n?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"upload-icon",children:""}),l.jsx("span",{children:"Processing CSV..."})]}):r.csvFile?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"upload-icon",children:""}),l.jsx("span",{children:r.csvFile.name}),l.jsxs("span",{className:"upload-size",children:["(",(r.csvFile.size/1024).toFixed(2)," KB)"]})]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"upload-icon",children:""}),l.jsx("span",{children:"Click to select CSV file"})]})})]}),r.csvFile&&l.jsx("button",{type:"button",onClick:E,className:"clear-button",disabled:n,children:"Clear"})]}),u&&l.jsx("div",{className:"step-error-message",children:l.jsx("p",{children:u})}),l.jsxs("div",{className:"step2-comment-section",children:[l.jsx("label",{htmlFor:"order-comment",className:"comment-label",children:"Order Comment (Optional)"}),l.jsx("textarea",{id:"order-comment",value:r.orderComment||"",onChange:U=>t({orderComment:U.target.value}),className:"comment-textarea",placeholder:"Add any additional comments or notes for this order...",rows:3})]}),O.length>0&&l.jsxs("div",{className:"step-warning-message step-warning-internal",children:[l.jsx("p",{className:"warning-title",children:" Duplicate panel names detected in CSV"}),l.jsx("p",{className:"warning-description",children:"Please review the CSV before creating the order."}),l.jsx("ul",{children:O.slice(0,10).map(U=>l.jsx("li",{children:U},U))}),O.length>10&&l.jsxs("p",{className:"warning-more",children:["... and ",O.length-10," more duplicates"]})]}),H.length>0&&l.jsxs("div",{className:"step-warning-message step-warning-database",children:[l.jsx("p",{className:"warning-title",children:" Panel names already exist in database"}),l.jsx("p",{className:"warning-description",children:"These panel names already exist in Supabase. Please rename them before creating the order."}),l.jsx("div",{className:"existing-panels-list",children:H.slice(0,10).map(U=>l.jsxs("div",{className:"existing-panel-item",children:[l.jsx("span",{className:"existing-panel-name",children:U.name}),l.jsxs("span",{className:"existing-panel-info",children:["Order: ",U.existingOrder||"N/A"," | Status: ",U.existingStatus||"N/A"]})]},U.name))}),H.length>10&&l.jsxs("p",{className:"warning-more",children:["... and ",H.length-10," more existing panels"]})]}),r.panels.length>0&&l.jsxs("div",{className:"step2-preview",children:[l.jsxs("div",{className:"preview-header",children:[l.jsx("h3",{children:"Preview of Processed Panels"}),l.jsxs("span",{className:"preview-count",children:[r.panels.length," panel(s)"]})]}),l.jsxs("div",{className:"preview-table-container",children:[l.jsxs("table",{className:"preview-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Name"}),l.jsx("th",{children:"Area"}),l.jsx("th",{children:"Cut Distance"}),l.jsx("th",{children:"Sheet Name"}),l.jsx("th",{children:"Nest Number"}),l.jsx("th",{children:"Comment"})]})}),l.jsx("tbody",{children:r.panels.slice(0,50).map((U,q)=>l.jsxs("tr",{className:U.isDuplicate?"panel-duplicate-row":U.existsInDatabase?"panel-exists-row":void 0,children:[l.jsxs("td",{className:"col-name",children:[l.jsx("span",{className:U.isDuplicate?"panel-name-duplicate":U.existsInDatabase?"panel-name-exists":void 0,children:U.name}),U.isDuplicate&&l.jsx("span",{className:"panel-duplicate-badge",children:"Duplicate in CSV"}),U.existsInDatabase&&l.jsx("span",{className:"panel-exists-badge",children:"Exists in DB"})]}),l.jsx("td",{className:"col-number",children:U.area.toFixed(2)}),l.jsx("td",{className:"col-number",children:U.cutDistance.toFixed(2)}),l.jsx("td",{className:"col-text",children:U.sheetName}),l.jsx("td",{className:"col-text",children:U.nestNumber}),l.jsx("td",{className:"col-comment",children:U.comment})]},q))})]}),r.panels.length>50&&l.jsxs("p",{className:"preview-more",children:["... and ",r.panels.length-50," more panel(s)"]})]}),l.jsxs("div",{className:"preview-summary",children:[l.jsxs("div",{className:"summary-item",children:[l.jsx("span",{className:"summary-label",children:"Total Panels:"}),l.jsx("span",{className:"summary-value",children:r.panels.length})]}),l.jsxs("div",{className:"summary-item",children:[l.jsx("span",{className:"summary-label",children:"Total Area:"}),l.jsxs("span",{className:"summary-value",children:[r.panels.reduce((U,q)=>U+q.area,0).toFixed(2)," ","m"]})]}),l.jsxs("div",{className:"summary-item",children:[l.jsx("span",{className:"summary-label",children:"Cut Distance Total:"}),l.jsxs("span",{className:"summary-value",children:[r.panels.reduce((U,q)=>U+q.cutDistance,0).toFixed(2)," ","m"]})]})]})]}),D.errors.length>0&&l.jsxs("div",{className:"step-validation-errors",children:[l.jsx("p",{className:"validation-title",children:"Please correct the following errors:"}),l.jsx("ul",{children:D.errors.map((U,q)=>l.jsx("li",{children:U},q))})]})]})}const E1=new Os,Ue=r=>(r||"").trim().replace(/\s+/g,"").toLowerCase(),T1=r=>r.length===0?null:r.reduce((t,a)=>{const n=Number(t["Quantity in Factory"])||0;return(Number(a["Quantity in Factory"])||0)>n?a:t},r[0]);function D1(){const{formData:r,updateFormData:t,validation:a}=za(),[n,o]=M.useState("all"),[u,h]=M.useState("all"),[g,m]=M.useState("all"),[p,y]=M.useState(null),x=M.useMemo(()=>new Set((r.ignoredSheetDimensions||[]).map(Ue)),[r.ignoredSheetDimensions]),{data:v,isLoading:j}=la({queryKey:["sheets-by-project",r.project],queryFn:()=>E1.getSheetsByProject(r.project||""),enabled:!!r.project,staleTime:0}),E=M.useMemo(()=>{const S=new Map;return r.panels.forEach(N=>{var ce,ue,ie,he,k;const $=(ce=N.sheetName)==null?void 0:ce.trim();if(!$)return;const P=(ue=N.nestNumber)==null?void 0:ue.trim();S.has($)||S.set($,new Set),P?(ie=S.get($))==null||ie.add(P):(k=S.get($))==null||k.add(`${N.name}-${((he=S.get($))==null?void 0:he.size)||0}`)}),Array.from(S.entries()).map(([N,$])=>({dimension:N,qty:$.size})).sort((N,$)=>N.dimension.localeCompare($.dimension))},[r.panels]),D=M.useMemo(()=>E.filter(S=>!x.has(Ue(S.dimension))),[E,x]),O=M.useMemo(()=>new Set(D.map(S=>Ue(S.dimension))),[D]),H=M.useMemo(()=>{const S=new Map;return v&&v.forEach(N=>{if(!N.Dimension)return;const $=Ue(N.Dimension);S.has($)||S.set($,[]),S.get($).push(N)}),S},[v]),U=M.useMemo(()=>D.map(S=>{const N=H.get(Ue(S.dimension))||[];if(N.length===0)return null;const $=T1(N);return $?{dimension:S.dimension,sheet:$,qty:S.qty,isSuggested:N.length>1}:null}).filter(Boolean),[D,H]);M.useEffect(()=>{if(D.length===0)return;const S=[],N=new Set(D.map(ie=>Ue(ie.dimension))),$=new Map(U.map(ie=>[ie.dimension,ie]));D.forEach(ie=>{const he=Ue(ie.dimension),k=r.selectedSheets.find(J=>Ue(J.dimension)===he);if(k){S.push(at($e({},k),{qty:k.qty>0?k.qty:ie.qty}));return}const I=$.get(ie.dimension);if(I){const J=I.sheet;S.push({sheetId:J["Sheet ID"],dimension:J.Dimension||ie.dimension,colour:J.Colour||"",qty:I.qty,sheetData:J})}});const P=r.selectedSheets.filter(ie=>!N.has(Ue(ie.dimension)));S.push(...P);const ce=r.selectedSheets.map(ie=>({sheetId:ie.sheetId,dimension:ie.dimension,colour:ie.colour,qty:ie.qty})),ue=S.map(ie=>({sheetId:ie.sheetId,dimension:ie.dimension,colour:ie.colour,qty:ie.qty}));JSON.stringify(ce)!==JSON.stringify(ue)&&t({selectedSheets:S})},[D,H,U,r.selectedSheets,t]),M.useEffect(()=>{var $;if(!(($=r.ignoredSheetDimensions)!=null&&$.length))return;const S=new Set(E.map(P=>Ue(P.dimension))),N=r.ignoredSheetDimensions.filter(P=>S.has(Ue(P)));N.length!==r.ignoredSheetDimensions.length&&t({ignoredSheetDimensions:N})},[E,r.ignoredSheetDimensions,t]);const q=M.useMemo(()=>{if(!v)return[];const S=new Set(v.map(N=>N.Dimension).filter(Boolean).map(N=>Ue(N)));return Array.from(S).sort()},[v]),ee=M.useMemo(()=>{if(!v)return[];const S=new Set(v.map(N=>N.Colour).filter(Boolean));return Array.from(S).sort()},[v]),ae=M.useMemo(()=>v?v.filter(S=>{if(n!=="all"){const N=S["Off Cut"]===!0||S["Off Cut"]==="true"||S["Off Cut"]==="Yes";if(n==="yes"&&!N||n==="no"&&N)return!1}return!(u!=="all"&&Ue(S.Dimension)!==Ue(u)||g!=="all"&&S.Colour!==g)}):[],[v,n,u,g]),Y=M.useMemo(()=>{if(!ae.length)return[];const S=[],N=new Set;D.forEach(P=>{const ce=Ue(P.dimension),ue=ae.filter(he=>Ue(he.Dimension)===ce);if(ue.length===0)return;S.push({type:"header",key:`detected-${P.dimension}`,label:`Detected - ${P.dimension}`});const ie=ue.reduce((he,k)=>{const I=k.Colour||"No Colour";return he[I]||(he[I]=[]),he[I].push(k),he},{});Object.keys(ie).sort().forEach(he=>{S.push({type:"subheader",key:`detected-${P.dimension}-${he}`,label:he}),ie[he].sort((I,J)=>J["Quantity in Factory"]-I["Quantity in Factory"]).forEach(I=>{S.push({type:"sheet",key:I["Sheet ID"],sheet:I}),N.add(I["Sheet ID"])})})});const $=ae.filter(P=>!N.has(P["Sheet ID"]));if($.length>0){S.push({type:"header",key:"other-sheets",label:"Other sheets"});const P=$.reduce((ue,ie)=>{const k=ie["Off Cut"]===!0||ie["Off Cut"]==="true"||ie["Off Cut"]==="Yes"?"offcut":"regular";return ue[k]||(ue[k]=[]),ue[k].push(ie),ue},{}),ce=(ue,ie)=>{var k;const he=((k=P[ue])==null?void 0:k.reduce((I,J)=>{const Z=J.Colour||"No Colour";return I[Z]||(I[Z]=[]),I[Z].push(J),I},{}))||{};Object.keys(he).sort().forEach(I=>{S.push({type:"subheader",key:`${ie}-${I}`,label:`${ie} - ${I}`}),he[I].sort((Z,me)=>me["Quantity in Factory"]-Z["Quantity in Factory"]).forEach(Z=>{S.push({type:"sheet",key:Z["Sheet ID"],sheet:Z})})})};ce("regular","Regular"),ce("offcut","Off Cut")}return S},[D,ae]),re=S=>{const N=Ue(S);t({selectedSheets:r.selectedSheets.filter($=>Ue($.dimension)!==N),ignoredSheetDimensions:Array.from(new Set([...r.ignoredSheetDimensions||[],S]))}),Ue(p||"")===N&&(y(null),h("all"))},T=S=>{var P,ce;const N=r.selectedSheets.findIndex(ue=>ue.sheetId===S["Sheet ID"]);let $;if(N>=0){const ue=((P=S.Dimension)==null?void 0:P.trim())||"";if(ue&&O.has(Ue(ue))){const ie=D.find(he=>Ue(he.dimension)===Ue(ue));re((ce=ie==null?void 0:ie.dimension)!=null?ce:ue);return}$=r.selectedSheets.filter(ie=>ie.sheetId!==S["Sheet ID"])}else{const ue=Ue(S.Dimension||""),ie=E.find(he=>Ue(he.dimension)===ue);$=r.selectedSheets.filter(he=>Ue(he.dimension)!==ue),$.push({sheetId:S["Sheet ID"],dimension:S.Dimension||"",colour:S.Colour||"",qty:(ie==null?void 0:ie.qty)||1,sheetData:S})}t({selectedSheets:$})},C=(S,N)=>{const $=r.selectedSheets.map(P=>P.sheetId===S?at($e({},P),{qty:Math.max(1,N)}):P);t({selectedSheets:$})},G=S=>r.selectedSheets.some(N=>N.sheetId===S),z=S=>{const N=r.selectedSheets.find($=>$.sheetId===S);return(N==null?void 0:N.qty)||0},W=(S,N)=>z(S)>N,de=D.filter(S=>!r.selectedSheets.some(N=>Ue(N.dimension)===Ue(S.dimension))),ge=M.useMemo(()=>new Set(U.filter(S=>S.isSuggested).map(S=>S.sheet["Sheet ID"])),[U]),xe=M.useMemo(()=>D.map(S=>{const N=Ue(S.dimension),$=r.selectedSheets.find(ce=>Ue(ce.dimension)===N),P=U.find(ce=>Ue(ce.dimension)===N);return{dimension:S.dimension,qty:S.qty,colour:($==null?void 0:$.colour)||"",isSelected:!!$,isSuggested:!!$&&!!(P!=null&&P.isSuggested)&&($==null?void 0:$.sheetId)===(P==null?void 0:P.sheet["Sheet ID"])}}),[D,r.selectedSheets,U]),A=M.useMemo(()=>xe.filter(S=>!S.isSelected),[xe]),Q=S=>{o("all"),m("all"),h(S),y(S)},te=S=>{re(S)},le=a.step3;return r.project?r.panels.length===0?l.jsx("div",{className:"step-container step-error",children:l.jsx("p",{children:"Please import panels in Step 2 first"})}):j?l.jsxs("div",{className:"step-container step-loading",children:[l.jsx(Ca,{}),l.jsx("p",{children:"Loading sheets..."})]}):l.jsxs("div",{className:"step-container step3-sheets",children:[l.jsx("h2",{className:"step-title",children:"Sheet Selection"}),l.jsx("p",{className:"step-description",children:"We detected the sheets from the nesting CSV. Please select the colour for each sheet size."}),A.length>0&&l.jsxs("div",{className:"detected-sheets-banner",children:[l.jsx("div",{className:"detected-banner-header",children:l.jsxs("div",{children:[l.jsx("h3",{children:"Detected Sheets"}),l.jsx("p",{children:"Quickly focus the table by selecting a chip."})]})}),l.jsx("div",{className:"detected-chips",children:A.map(S=>l.jsxs("div",{className:`detected-chip ${S.isSelected?"chip-selected":"chip-missing"} ${S.isSuggested?"chip-suggested":""}`,children:[l.jsx("button",{type:"button",className:"chip-remove","aria-label":`Remove ${S.dimension}`,onClick:()=>te(S.dimension),children:""}),l.jsxs("div",{className:"chip-top",children:[l.jsx("span",{className:"chip-dimension",children:S.dimension}),l.jsxs("span",{className:"chip-qty",children:["qty ",S.qty]})]}),l.jsxs("div",{className:"chip-colour",children:[S.colour?S.colour:"colour ?",S.isSuggested&&l.jsx("span",{className:"chip-suggested-badge",children:"Suggested"})]}),l.jsx("button",{type:"button",className:"chip-action",onClick:()=>Q(S.dimension),children:S.colour?"Change colour":"Select colour"})]},S.dimension))})]}),de.length>0&&l.jsxs("div",{className:"sheet-warning",children:[l.jsx("p",{children:"Please select a colour for:"}),l.jsx("ul",{className:"sheet-warning-list",children:de.map(S=>l.jsxs("li",{children:[S.dimension," (qty ",S.qty,")"]},S.dimension))})]}),l.jsxs("div",{className:"step3-filters",children:[l.jsxs("div",{className:"filter-group",children:[l.jsx("label",{htmlFor:"offcut-filter",className:"filter-label",children:"Off Cut"}),l.jsxs("select",{id:"offcut-filter",value:n,onChange:S=>o(S.target.value),className:"filter-select",children:[l.jsx("option",{value:"all",children:"All"}),l.jsx("option",{value:"no",children:"No"}),l.jsx("option",{value:"yes",children:"Yes"})]})]}),l.jsxs("div",{className:"filter-group",children:[l.jsx("label",{htmlFor:"dimension-filter",className:"filter-label",children:"Dimension"}),l.jsxs("select",{id:"dimension-filter",value:u,onChange:S=>h(S.target.value),className:"filter-select",children:[l.jsx("option",{value:"all",children:"All"}),q.map(S=>l.jsx("option",{value:S,children:S},S))]})]}),l.jsxs("div",{className:"filter-group",children:[l.jsx("label",{htmlFor:"colour-filter",className:"filter-label",children:"Colour"}),l.jsxs("select",{id:"colour-filter",value:g,onChange:S=>m(S.target.value),className:"filter-select",children:[l.jsx("option",{value:"all",children:"All"}),ee.map(S=>l.jsx("option",{value:S,children:S},S))]})]})]}),l.jsxs("div",{className:"step3-content-layout",children:[l.jsx("div",{className:"step3-main-content",children:ae.length===0?l.jsx("div",{className:"step-empty",children:l.jsx("p",{children:"No sheets found for this project."})}):l.jsx("div",{className:"step3-table-container",children:l.jsxs("table",{className:"step3-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{className:"col-checkbox",children:"Select"}),l.jsx("th",{className:"col-order-qty",children:"Order Qty"}),l.jsx("th",{className:"col-dimension",children:"Dimension"}),l.jsx("th",{className:"col-colour",children:"Colour"}),l.jsx("th",{className:"col-qty-factory",children:"Qty Factory"}),l.jsx("th",{className:"col-qty-store",children:"Qty Store"}),l.jsx("th",{className:"col-offcut",children:"Off Cut"}),l.jsx("th",{className:"col-comment",children:"Comment"})]})}),l.jsx("tbody",{children:Y.map(S=>{if(S.type==="header")return l.jsx("tr",{className:"group-header",children:l.jsx("td",{colSpan:8,className:"group-header-cell",style:{textAlign:"center"},children:l.jsx("span",{className:"group-label",children:S.label})})},S.key);if(S.type==="subheader")return l.jsx("tr",{className:"group-subheader",children:l.jsx("td",{colSpan:8,className:"group-subheader-cell",style:{textAlign:"center"},children:l.jsx("span",{className:"group-subheader-label",children:S.label})})},S.key);const N=S.sheet,$=G(N["Sheet ID"]),P=z(N["Sheet ID"]),ce=N["Quantity in Factory"]<=0,ue=$&&W(N["Sheet ID"],N["Quantity in Factory"]),ie=O.has(Ue(N.Dimension||"")),he=p&&Ue(N.Dimension||"")===Ue(p),k=ge.has(N["Sheet ID"]);return l.jsxs("tr",{className:`${$?"selected":""} ${ce?"low-stock":""} ${ue?"exceeds-qty":""} ${ie?"dimension-match":""} ${he?"focused-dimension":""}`,children:[l.jsx("td",{className:"col-checkbox",children:l.jsx("input",{type:"checkbox",checked:$,onChange:()=>T(N),className:"sheet-checkbox"})}),l.jsx("td",{className:"col-order-qty",children:$?l.jsxs("div",{className:"qty-input-wrapper",children:[l.jsx("input",{type:"number",min:"1",value:P,onChange:I=>C(N["Sheet ID"],parseInt(I.target.value,10)||1),className:`qty-input ${ue?"exceeds-qty-input":""}`}),ue&&l.jsx("span",{className:"qty-warning-icon",title:`Order Qty (${P}) exceeds Factory Qty (${N["Quantity in Factory"]})`,children:""})]}):l.jsx("span",{className:"qty-placeholder",children:"-"})}),l.jsx("td",{className:"col-dimension",children:N.Dimension}),l.jsxs("td",{className:"col-colour",children:[N.Colour,k&&l.jsx("span",{className:"suggested-badge",children:"Suggested"})]}),l.jsx("td",{className:`col-qty-factory ${ce?"zero-qty":""}`,children:N["Quantity in Factory"]}),l.jsx("td",{className:"col-qty-store",children:N["Quantity in Store"]}),l.jsx("td",{className:"col-offcut",children:N["Off Cut"]?"Yes":"No"}),l.jsx("td",{className:"col-comment",children:l.jsx("span",{className:"comment-text",title:N.Comment||void 0,children:N.Comment||"-"})})]},S.key)})})]})})}),r.selectedSheets.length>0&&l.jsxs("div",{className:"step3-summary-sidebar",children:[l.jsxs("div",{className:"summary-header",children:[l.jsx("h3",{children:"Selected Sheets"}),l.jsx("span",{className:"summary-badge",children:r.selectedSheets.length})]}),l.jsx("div",{className:"summary-items",children:r.selectedSheets.map(S=>{const N=v==null?void 0:v.find(ce=>ce["Sheet ID"]===S.sheetId),$=(N==null?void 0:N["Quantity in Factory"])||0,P=S.qty>$;return l.jsxs("div",{className:`summary-item ${P?"exceeds-qty":""}`,children:[l.jsxs("div",{className:"summary-item-info",children:[l.jsx("span",{className:"summary-item-dimension",children:S.dimension}),l.jsx("span",{className:"summary-item-colour",children:S.colour}),P&&l.jsxs("span",{className:"summary-item-warning",children:[" Order Qty (",S.qty,") exceeds Factory Qty (",$,")"]})]}),l.jsxs("div",{className:"summary-item-actions",children:[l.jsxs("div",{className:"summary-qty-wrapper",children:[l.jsx("input",{type:"number",min:"1",value:S.qty,onChange:ce=>C(S.sheetId,parseInt(ce.target.value,10)||1),className:`summary-qty-input ${P?"exceeds-qty-input":""}`}),P&&l.jsx("span",{className:"summary-qty-warning-icon",title:`Order Qty (${S.qty}) exceeds Factory Qty (${$})`,children:""})]}),l.jsx("button",{onClick:()=>{const ce=D.find(ue=>Ue(ue.dimension)===Ue(S.dimension));ce?re(ce.dimension):t({selectedSheets:r.selectedSheets.filter(ue=>ue.sheetId!==S.sheetId)})},className:"summary-remove-btn",title:"Remove",children:""})]})]},S.sheetId)})}),l.jsx("div",{className:"summary-footer",children:l.jsxs("div",{className:"summary-colour",children:[l.jsx("span",{className:"summary-colour-label",children:"Order Colour:"}),l.jsx("span",{className:"summary-colour-value",children:r.colour||"No defined"})]})})]})]}),le.errors.length>0&&l.jsxs("div",{className:"step-validation-errors",children:[l.jsx("p",{className:"validation-title",children:"Please correct the following errors:"}),l.jsx("ul",{children:le.errors.map((S,N)=>l.jsx("li",{children:S},N))})]})]}):l.jsx("div",{className:"step-container step-error",children:l.jsx("p",{children:"Please select a project in Step 1"})})}const Zu=new Os;function fp(r){if(!r)return new Date(0);const t=r.split(" ");if(t.length!==2)return new Date(0);const[a,n]=t,[o,u,h]=a.split("/").map(Number),[g,m,p]=n.split(":").map(Number);return new Date(h,u-1,o,g,m,p)}function mp(){return`doc-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}const O1=new Set(["Cut List","Delivery Docket"]);function A1(){const{formData:r,updateFormData:t,validation:a,setLoading:n,setError:o,isLoading:u}=za(),[h,g]=M.useState(new Set),[m,p]=M.useState(new Map),[y,x]=M.useState(new Set),[v,j]=M.useState(new Set),[E,D]=M.useState(""),[O,H]=M.useState(new Map),[U,q]=M.useState(new Map),ee=M.useRef(null),{data:ae,isLoading:Y}=la({queryKey:["documents-by-project",r.project],queryFn:()=>Zu.getDocumentsByProject(r.project||""),enabled:!!r.project,staleTime:0}),re=M.useMemo(()=>ae!=null&&ae.length?ae.filter(k=>!O1.has((k.Category||"").trim())):ae!=null?ae:[],[ae]),T=(k,I)=>{var Z,me,ye,pe;if(!I.trim())return!0;const J=I.toLowerCase();return((Z=k.Name)==null?void 0:Z.toLowerCase().includes(J))||((me=k.File)==null?void 0:me.toLowerCase().includes(J))||((ye=k.Comments)==null?void 0:ye.toLowerCase().includes(J))||((pe=k.Category)==null?void 0:pe.toLowerCase().includes(J))},C=M.useMemo(()=>{if(!re||re.length===0)return[];const k=E.trim()?re.filter(J=>T(J,E)):re;if(k.length===0)return[];const I=new Map;return k.forEach(J=>{const Z=J.Category||"Uncategorized";I.has(Z)||I.set(Z,[]),I.get(Z).push(J)}),I.forEach(J=>{J.sort((Z,me)=>{const ye=fp(Z["Created at"]||"");return fp(me["Created at"]||"").getTime()-ye.getTime()})}),Array.from(I.entries()).map(([J,Z])=>({category:J,documents:Z})).sort((J,Z)=>J.category==="Uncategorized"?1:Z.category==="Uncategorized"?-1:J.category.localeCompare(Z.category))},[re,E]),G=M.useMemo(()=>{if(!ae||ae.length===0)return[];const k=new Set;return ae.forEach(I=>{const J=I.Category;J&&J.trim()&&k.add(J)}),Array.from(k).sort()},[ae]),z=k=>{j(I=>{const J=new Set(I);return J.has(k)?J.delete(k):J.add(k),J})},W=k=>{const I=k.target.files;if(!I||I.length===0)return;const J=Array.from(I).map(Z=>({id:mp(),file:Z,name:Z.name,comments:"",category:"",uploaded:!1,saved:!1}));t({documents:[...r.documents,...J]}),ee.current&&(ee.current.value="")},de=k=>{t({documents:r.documents.filter(I=>I.id!==k)}),m.delete(k),p(new Map(m))},ge=(k,I)=>{t({documents:r.documents.map(J=>J.id===k?at($e({},J),{name:I}):J)})},xe=(k,I)=>{t({documents:r.documents.map(J=>J.id===k?at($e({},J),{comments:I}):J)})};M.useEffect(()=>{H(k=>{const I=new Map(k),J=new Set(r.documents.map(Z=>Z.id));r.documents.forEach(Z=>{I.has(Z.id)||I.set(Z.id,Z.category||"")});for(const[Z]of I)J.has(Z)||I.delete(Z);return I})},[r.documents]);const A=(k,I)=>{H(J=>{const Z=new Map(J);return Z.set(k,I),Z}),q(J=>{const Z=new Map(J);return Z.set(k,!0),Z}),t({documents:r.documents.map(J=>J.id===k?at($e({},J),{category:I}):J)})},Q=(k,I)=>{H(J=>{const Z=new Map(J);return Z.set(k,I),Z}),q(J=>{const Z=new Map(J);return Z.set(k,!1),Z}),t({documents:r.documents.map(J=>J.id===k?at($e({},J),{category:I}):J)})},te=k=>{const I=O.get(k)||"";if(!I.trim())return G;const J=I.toLowerCase().trim();return G.filter(Z=>Z.toLowerCase().includes(J))},le=k=>_(null,null,function*(){if(!(k.uploaded&&k.saved)){if(!k.category||!k.category.trim()){const I="Category is required before uploading";m.set(k.id,I),p(new Map(m)),o(I);return}g(I=>new Set(I).add(k.id)),m.delete(k.id),p(new Map(m));try{n(!0),yield Zu.addDocument({file:k.file,Project:r.project,Name:k.name,Orders:r.orderId,Comments:k.comments||"",Category:k.category||""}),t({documents:r.documents.map(I=>I.id===k.id?at($e({},I),{uploaded:!0,saved:!0}):I)})}catch(I){const J=I instanceof Error?I.message:"Error uploading document";m.set(k.id,J),p(new Map(m)),o(J)}finally{g(I=>{const J=new Set(I);return J.delete(k.id),J}),n(!1)}}}),S=()=>_(null,null,function*(){const k=r.documents.filter(I=>!I.uploaded||!I.saved);for(const I of k)yield le(I)}),N=k=>{if(r.selectedExistingDocuments.some(J=>J.documentId===k["Document ID"]))t({selectedExistingDocuments:r.selectedExistingDocuments.filter(J=>J.documentId!==k["Document ID"])});else{const J={id:mp(),documentId:k["Document ID"],name:k.Name,file:k.File,comments:k.Comments||"",category:k.Category||"",createdAt:k["Created at"]||"",linked:!1};t({selectedExistingDocuments:[...r.selectedExistingDocuments,J]})}},$=k=>_(null,null,function*(){if(!k.linked){x(I=>new Set(I).add(k.id)),m.delete(k.id),p(new Map(m));try{n(!0),yield Zu.linkDocumentToOrder(k.documentId,r.orderId),t({selectedExistingDocuments:r.selectedExistingDocuments.map(I=>I.id===k.id?at($e({},I),{linked:!0}):I)})}catch(I){const J=I instanceof Error?I.message:"Error linking document";m.set(k.id,J),p(new Map(m)),o(J)}finally{x(I=>{const J=new Set(I);return J.delete(k.id),J}),n(!1)}}}),P=()=>_(null,null,function*(){const k=r.selectedExistingDocuments.filter(I=>!I.linked);for(const I of k)yield $(I)}),ce=k=>r.selectedExistingDocuments.some(I=>I.documentId===k);M.useEffect(()=>{const k=I=>{I.target.closest(".category-selector-wrapper")||q(new Map)};return document.addEventListener("mousedown",k),()=>{document.removeEventListener("mousedown",k)}},[]);const ue=a.step4,ie=r.documents.length>0,he=r.documents.some(k=>!k.uploaded||!k.saved);return l.jsxs("div",{className:"step-container step4-documents",children:[l.jsx("h2",{className:"step-title",children:"Upload Documents"}),l.jsx("p",{className:"step-description",children:"Upload or select documents related to this order. Documents will be saved to CC Flow App and registered in Documents section."}),r.project&&l.jsxs("div",{className:"step4-existing-documents",children:[l.jsxs("div",{className:"step4-existing-header",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"step4-section-title",children:"Existing Documents"}),l.jsx("p",{className:"step4-section-description",children:"Select existing documents from this project to link to this order."})]}),l.jsx("div",{className:"step4-search-container",children:l.jsxs("div",{className:"step4-search-input-wrapper",children:[l.jsx("span",{className:"step4-search-icon",children:""}),l.jsx("input",{type:"text",value:E,onChange:k=>D(k.target.value),className:"step4-search-input",placeholder:"Search documents..."}),E&&l.jsx("button",{type:"button",onClick:()=>D(""),className:"step4-search-clear","aria-label":"Clear search",children:""})]})})]}),Y?l.jsxs("div",{className:"step-loading",children:[l.jsx(Ca,{}),l.jsx("span",{children:"Loading existing documents..."})]}):re&&re.length>0?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"step4-existing-list",children:C.length===0?l.jsx("div",{className:"step-empty",children:l.jsx("p",{children:E?`No documents found matching "${E}"`:"No documents found for this project."})}):C.map(({category:k,documents:I})=>{const J=v.has(k);return l.jsxs("div",{className:"document-category-group",children:[l.jsx("div",{className:"document-category-header",onClick:()=>z(k),children:l.jsxs("div",{className:"document-category-header-content",children:[l.jsx("span",{className:`document-category-chevron ${J?"expanded":""}`,children:""}),l.jsx("h4",{className:"document-category-title",children:k}),l.jsxs("span",{className:"document-category-count",children:["(",I.length," ",I.length===1?"document":"documents",")"]})]})}),J&&l.jsx("div",{className:"document-category-items",children:I.map(Z=>{const me=ce(Z["Document ID"]),ye=r.selectedExistingDocuments.find(je=>je.documentId===Z["Document ID"]),pe=ye?y.has(ye.id):!1,De=ye?m.get(ye.id):void 0;return l.jsxs("div",{className:`existing-document-item ${me?"selected":""} ${ye!=null&&ye.linked?"linked":""} ${De?"error":""}`,onClick:()=>N(Z),children:[l.jsx("div",{className:"existing-document-checkbox",children:l.jsx("input",{type:"checkbox",checked:me,onChange:()=>N(Z),onClick:je=>je.stopPropagation()})}),l.jsxs("div",{className:"existing-document-info",children:[l.jsx("div",{className:"existing-document-name",children:Z.Name}),l.jsx("div",{className:"existing-document-file",children:Z.File}),Z.Comments&&l.jsx("div",{className:"existing-document-comments",children:Z.Comments}),Z["Created at"]&&l.jsxs("div",{className:"existing-document-date",children:["Created: ",Z["Created at"]]})]}),me&&ye&&l.jsxs("div",{className:"existing-document-actions",children:[ye.linked?l.jsxs("div",{className:"document-status",children:[l.jsx("span",{className:"status-icon",children:""}),l.jsx("span",{children:"Linked"})]}):l.jsx("button",{type:"button",onClick:je=>{je.stopPropagation(),$(ye)},disabled:pe||u,className:"link-document-button",children:pe?l.jsxs(l.Fragment,{children:[l.jsx(Ca,{}),"Linking..."]}):"Link to Order"}),De&&l.jsx("div",{className:"document-error",children:De})]})]},Z["Document ID"])})})]},k)})}),r.selectedExistingDocuments.length>0&&l.jsx("div",{className:"step4-existing-actions",children:l.jsx("button",{type:"button",onClick:P,disabled:u||y.size>0||r.selectedExistingDocuments.every(k=>k.linked),className:"link-all-button",children:u||y.size>0?l.jsxs(l.Fragment,{children:[l.jsx(Ca,{}),"Linking..."]}):`Link All Selected (${r.selectedExistingDocuments.filter(k=>!k.linked).length})`})})]}):l.jsx("div",{className:"step-empty",children:l.jsx("p",{children:"No existing documents found for this project."})})]}),l.jsxs("div",{className:"step4-upload-section",children:[l.jsx("h3",{className:"step4-section-title",children:"Upload New Documents"}),l.jsxs("div",{className:"step4-upload-area",children:[l.jsx("input",{ref:ee,type:"file",id:"document-upload",className:"file-input",multiple:!0,accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png",onChange:W}),l.jsxs("label",{htmlFor:"document-upload",className:"upload-label",children:[l.jsx("span",{className:"upload-icon",children:""}),l.jsxs("div",{className:"upload-text",children:[l.jsx("strong",{children:"Click to select files"}),l.jsx("span",{children:"or drag and drop"}),l.jsx("span",{className:"upload-hint",children:"PDF, DOC, DOCX, XLS, XLSX, JPG, PNG (Max 50MB per file)"})]})]})]})]}),ie&&l.jsxs("div",{className:"step4-documents-list",children:[l.jsxs("div",{className:"step4-documents-header",children:[l.jsxs("h3",{children:["Documents (",r.documents.length,")"]}),he&&l.jsx("button",{type:"button",onClick:S,disabled:u||h.size>0,className:"upload-all-button",children:u||h.size>0?l.jsxs(l.Fragment,{children:[l.jsx(Ca,{}),"Uploading..."]}):"Upload All"})]}),r.documents.map(k=>{var Z;const I=h.has(k.id),J=m.get(k.id);return l.jsxs("div",{className:`document-item ${k.uploaded&&k.saved?"uploaded":""} ${J?"error":""}`,children:[l.jsxs("div",{className:"document-item-header",children:[l.jsxs("div",{className:"document-item-info",children:[l.jsx("span",{className:"document-icon",children:k.uploaded&&k.saved?"":""}),l.jsxs("div",{className:"document-details",children:[l.jsx("input",{type:"text",value:k.name,onChange:me=>ge(k.id,me.target.value),className:"document-name-input",placeholder:"Document name",disabled:k.saved}),l.jsx("span",{className:"document-file-name",children:k.file.name}),k.filePath&&l.jsx("span",{className:"document-path",children:k.filePath})]})]}),l.jsx("button",{type:"button",onClick:()=>de(k.id),className:"remove-document-button",disabled:I,children:""})]}),l.jsxs("div",{className:"document-item-body",children:[l.jsx("div",{className:"document-fields-row",children:l.jsxs("div",{className:"document-field",children:[l.jsxs("label",{className:"document-field-label",children:["Category ",l.jsx("span",{className:"required-asterisk",children:"*"})]}),l.jsxs("div",{className:"category-selector-wrapper",children:[l.jsx("input",{type:"text",value:O.get(k.id)||k.category||"",onChange:me=>A(k.id,me.target.value),onFocus:()=>{k.saved||q(me=>{const ye=new Map(me);return ye.set(k.id,!0),ye})},onBlur:()=>{setTimeout(()=>{q(me=>{const ye=new Map(me);return ye.set(k.id,!1),ye})},200)},className:`document-category-input ${!k.category&&!k.saved?"error":""}`,placeholder:"Add or select a category",disabled:k.saved,autoComplete:"off",required:!0}),!k.saved&&U.get(k.id)&&te(k.id).length>0&&l.jsxs("div",{className:"category-selector-dropdown",children:[l.jsx("div",{className:"category-selector-options",children:te(k.id).slice(0,10).map(me=>l.jsx("div",{className:`category-selector-option ${k.category===me?"selected":""}`,onMouseDown:ye=>ye.preventDefault(),onClick:()=>Q(k.id,me),children:me},me))}),te(k.id).length>10&&l.jsxs("div",{className:"category-selector-footer",children:["Showing 10 of ",te(k.id).length," categories"]})]}),!k.saved&&U.get(k.id)&&((Z=O.get(k.id))==null?void 0:Z.trim())&&te(k.id).length===0&&l.jsx("div",{className:"category-selector-dropdown",children:l.jsx("div",{className:"category-selector-empty",children:"No categories found. The text you type will be used as the category."})})]}),!k.category&&!k.saved&&l.jsx("span",{className:"field-error",children:"Category is required"})]})}),l.jsx("textarea",{value:k.comments,onChange:me=>xe(k.id,me.target.value),className:"document-comments",placeholder:"Comments (optional)",rows:2,disabled:k.saved}),J&&l.jsx("div",{className:"document-error",children:J}),l.jsx("div",{className:"document-actions",children:!k.uploaded||!k.saved?l.jsx("button",{type:"button",onClick:()=>le(k),disabled:I||u||!k.category||!k.category.trim(),className:"upload-document-button",children:I?l.jsxs(l.Fragment,{children:[l.jsx(Ca,{}),"Uploading..."]}):"Upload to CC Flow 2026"}):l.jsxs("div",{className:"document-status",children:[l.jsx("span",{className:"status-icon",children:""}),l.jsx("span",{children:"Uploaded and saved on CC Flow App 2026"})]})})]})]},k.id)})]}),!ie&&l.jsx("div",{className:"step-empty",children:l.jsx("p",{children:"No documents added yet. Select files above to get started."})}),ue.errors.length>0&&l.jsx("div",{className:"step-validation-errors",children:l.jsx("ul",{children:ue.errors.map((k,I)=>l.jsx("li",{children:k},I))})}),l.jsx("div",{className:"step4-info",children:l.jsxs("p",{children:[l.jsx("strong",{children:"Note:"})," Documents are optional. You can skip this step or add documents later. All uploaded documents will be associated with this order."]})})]})}var Li={};(function r(t,a,n,o){var u=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),h=typeof Path2D=="function"&&typeof DOMMatrix=="function",g=(function(){if(!t.OffscreenCanvas)return!1;try{var S=new OffscreenCanvas(1,1),N=S.getContext("2d");N.fillRect(0,0,1,1);var $=S.transferToImageBitmap();N.createPattern($,"no-repeat")}catch(P){return!1}return!0})();function m(){}function p(S){var N=a.exports.Promise,$=N!==void 0?N:t.Promise;return typeof $=="function"?new $(S):(S(m,m),null)}var y=(function(S,N){return{transform:function($){if(S)return $;if(N.has($))return N.get($);var P=new OffscreenCanvas($.width,$.height),ce=P.getContext("2d");return ce.drawImage($,0,0),N.set($,P),P},clear:function(){N.clear()}}})(g,new Map),x=(function(){var S=Math.floor(16.666666666666668),N,$,P={},ce=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(N=function(ue){var ie=Math.random();return P[ie]=requestAnimationFrame(function he(k){ce===k||ce+S-1<k?(ce=k,delete P[ie],ue()):P[ie]=requestAnimationFrame(he)}),ie},$=function(ue){P[ue]&&cancelAnimationFrame(P[ue])}):(N=function(ue){return setTimeout(ue,S)},$=function(ue){return clearTimeout(ue)}),{frame:N,cancel:$}})(),v=(function(){var S,N,$={};function P(ce){function ue(ie,he){ce.postMessage({options:ie||{},callback:he})}ce.init=function(he){var k=he.transferControlToOffscreen();ce.postMessage({canvas:k},[k])},ce.fire=function(he,k,I){if(N)return ue(he,null),N;var J=Math.random().toString(36).slice(2);return N=p(function(Z){function me(ye){ye.data.callback===J&&(delete $[J],ce.removeEventListener("message",me),N=null,y.clear(),I(),Z())}ce.addEventListener("message",me),ue(he,J),$[J]=me.bind(null,{data:{callback:J}})}),N},ce.reset=function(){ce.postMessage({reset:!0});for(var he in $)$[he](),delete $[he]}}return function(){if(S)return S;if(!n&&u){var ce=["var CONFETTI, SIZE = {}, module = {};","("+r.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{S=new Worker(URL.createObjectURL(new Blob([ce])))}catch(ue){return typeof console!="undefined"&&typeof console.warn=="function"&&console.warn(" Could not load worker",ue),null}P(S)}return S}})(),j={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function E(S,N){return N?N(S):S}function D(S){return S!=null}function O(S,N,$){return E(S&&D(S[N])?S[N]:j[N],$)}function H(S){return S<0?0:Math.floor(S)}function U(S,N){return Math.floor(Math.random()*(N-S))+S}function q(S){return parseInt(S,16)}function ee(S){return S.map(ae)}function ae(S){var N=String(S).replace(/[^0-9a-f]/gi,"");return N.length<6&&(N=N[0]+N[0]+N[1]+N[1]+N[2]+N[2]),{r:q(N.substring(0,2)),g:q(N.substring(2,4)),b:q(N.substring(4,6))}}function Y(S){var N=O(S,"origin",Object);return N.x=O(N,"x",Number),N.y=O(N,"y",Number),N}function re(S){S.width=document.documentElement.clientWidth,S.height=document.documentElement.clientHeight}function T(S){var N=S.getBoundingClientRect();S.width=N.width,S.height=N.height}function C(S){var N=document.createElement("canvas");return N.style.position="fixed",N.style.top="0px",N.style.left="0px",N.style.pointerEvents="none",N.style.zIndex=S,N}function G(S,N,$,P,ce,ue,ie,he,k){S.save(),S.translate(N,$),S.rotate(ue),S.scale(P,ce),S.arc(0,0,1,ie,he,k),S.restore()}function z(S){var N=S.angle*(Math.PI/180),$=S.spread*(Math.PI/180);return{x:S.x,y:S.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:S.startVelocity*.5+Math.random()*S.startVelocity,angle2D:-N+(.5*$-Math.random()*$),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:S.color,shape:S.shape,tick:0,totalTicks:S.ticks,decay:S.decay,drift:S.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:S.gravity*3,ovalScalar:.6,scalar:S.scalar,flat:S.flat}}function W(S,N){N.x+=Math.cos(N.angle2D)*N.velocity+N.drift,N.y+=Math.sin(N.angle2D)*N.velocity+N.gravity,N.velocity*=N.decay,N.flat?(N.wobble=0,N.wobbleX=N.x+10*N.scalar,N.wobbleY=N.y+10*N.scalar,N.tiltSin=0,N.tiltCos=0,N.random=1):(N.wobble+=N.wobbleSpeed,N.wobbleX=N.x+10*N.scalar*Math.cos(N.wobble),N.wobbleY=N.y+10*N.scalar*Math.sin(N.wobble),N.tiltAngle+=.1,N.tiltSin=Math.sin(N.tiltAngle),N.tiltCos=Math.cos(N.tiltAngle),N.random=Math.random()+2);var $=N.tick++/N.totalTicks,P=N.x+N.random*N.tiltCos,ce=N.y+N.random*N.tiltSin,ue=N.wobbleX+N.random*N.tiltCos,ie=N.wobbleY+N.random*N.tiltSin;if(S.fillStyle="rgba("+N.color.r+", "+N.color.g+", "+N.color.b+", "+(1-$)+")",S.beginPath(),h&&N.shape.type==="path"&&typeof N.shape.path=="string"&&Array.isArray(N.shape.matrix))S.fill(Q(N.shape.path,N.shape.matrix,N.x,N.y,Math.abs(ue-P)*.1,Math.abs(ie-ce)*.1,Math.PI/10*N.wobble));else if(N.shape.type==="bitmap"){var he=Math.PI/10*N.wobble,k=Math.abs(ue-P)*.1,I=Math.abs(ie-ce)*.1,J=N.shape.bitmap.width*N.scalar,Z=N.shape.bitmap.height*N.scalar,me=new DOMMatrix([Math.cos(he)*k,Math.sin(he)*k,-Math.sin(he)*I,Math.cos(he)*I,N.x,N.y]);me.multiplySelf(new DOMMatrix(N.shape.matrix));var ye=S.createPattern(y.transform(N.shape.bitmap),"no-repeat");ye.setTransform(me),S.globalAlpha=1-$,S.fillStyle=ye,S.fillRect(N.x-J/2,N.y-Z/2,J,Z),S.globalAlpha=1}else if(N.shape==="circle")S.ellipse?S.ellipse(N.x,N.y,Math.abs(ue-P)*N.ovalScalar,Math.abs(ie-ce)*N.ovalScalar,Math.PI/10*N.wobble,0,2*Math.PI):G(S,N.x,N.y,Math.abs(ue-P)*N.ovalScalar,Math.abs(ie-ce)*N.ovalScalar,Math.PI/10*N.wobble,0,2*Math.PI);else if(N.shape==="star")for(var pe=Math.PI/2*3,De=4*N.scalar,je=8*N.scalar,qe=N.x,Se=N.y,Le=5,it=Math.PI/Le;Le--;)qe=N.x+Math.cos(pe)*je,Se=N.y+Math.sin(pe)*je,S.lineTo(qe,Se),pe+=it,qe=N.x+Math.cos(pe)*De,Se=N.y+Math.sin(pe)*De,S.lineTo(qe,Se),pe+=it;else S.moveTo(Math.floor(N.x),Math.floor(N.y)),S.lineTo(Math.floor(N.wobbleX),Math.floor(ce)),S.lineTo(Math.floor(ue),Math.floor(ie)),S.lineTo(Math.floor(P),Math.floor(N.wobbleY));return S.closePath(),S.fill(),N.tick<N.totalTicks}function de(S,N,$,P,ce){var ue=N.slice(),ie=S.getContext("2d"),he,k,I=p(function(J){function Z(){he=k=null,ie.clearRect(0,0,P.width,P.height),y.clear(),ce(),J()}function me(){n&&!(P.width===o.width&&P.height===o.height)&&(P.width=S.width=o.width,P.height=S.height=o.height),!P.width&&!P.height&&($(S),P.width=S.width,P.height=S.height),ie.clearRect(0,0,P.width,P.height),ue=ue.filter(function(ye){return W(ie,ye)}),ue.length?he=x.frame(me):Z()}he=x.frame(me),k=Z});return{addFettis:function(J){return ue=ue.concat(J),I},canvas:S,promise:I,reset:function(){he&&x.cancel(he),k&&k()}}}function ge(S,N){var $=!S,P=!!O(N||{},"resize"),ce=!1,ue=O(N,"disableForReducedMotion",Boolean),ie=u&&!!O(N||{},"useWorker"),he=ie?v():null,k=$?re:T,I=S&&he?!!S.__confetti_initialized:!1,J=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,Z;function me(pe,De,je){for(var qe=O(pe,"particleCount",H),Se=O(pe,"angle",Number),Le=O(pe,"spread",Number),it=O(pe,"startVelocity",Number),Wt=O(pe,"decay",Number),$t=O(pe,"gravity",Number),Ea=O(pe,"drift",Number),ht=O(pe,"colors",ee),Bt=O(pe,"ticks",Number),We=O(pe,"shapes"),He=O(pe,"scalar"),yt=!!O(pe,"flat"),vt=Y(pe),As=qe,oa=[],Pt=S.width*vt.x,ca=S.height*vt.y;As--;)oa.push(z({x:Pt,y:ca,angle:Se,spread:Le,startVelocity:it,color:ht[As%ht.length],shape:We[U(0,We.length)],ticks:Bt,decay:Wt,gravity:$t,drift:Ea,scalar:He,flat:yt}));return Z?Z.addFettis(oa):(Z=de(S,oa,k,De,je),Z.promise)}function ye(pe){var De=ue||O(pe,"disableForReducedMotion",Boolean),je=O(pe,"zIndex",Number);if(De&&J)return p(function(it){it()});$&&Z?S=Z.canvas:$&&!S&&(S=C(je),document.body.appendChild(S)),P&&!I&&k(S);var qe={width:S.width,height:S.height};he&&!I&&he.init(S),I=!0,he&&(S.__confetti_initialized=!0);function Se(){if(he){var it={getBoundingClientRect:function(){if(!$)return S.getBoundingClientRect()}};k(it),he.postMessage({resize:{width:it.width,height:it.height}});return}qe.width=qe.height=null}function Le(){Z=null,P&&(ce=!1,t.removeEventListener("resize",Se)),$&&S&&(document.body.contains(S)&&document.body.removeChild(S),S=null,I=!1)}return P&&!ce&&(ce=!0,t.addEventListener("resize",Se,!1)),he?he.fire(pe,qe,Le):me(pe,qe,Le)}return ye.reset=function(){he&&he.reset(),Z&&Z.reset()},ye}var xe;function A(){return xe||(xe=ge(null,{useWorker:!0,resize:!0})),xe}function Q(S,N,$,P,ce,ue,ie){var he=new Path2D(S),k=new Path2D;k.addPath(he,new DOMMatrix(N));var I=new Path2D;return I.addPath(k,new DOMMatrix([Math.cos(ie)*ce,Math.sin(ie)*ce,-Math.sin(ie)*ue,Math.cos(ie)*ue,$,P])),I}function te(S){if(!h)throw new Error("path confetti are not supported in this browser");var N,$;typeof S=="string"?N=S:(N=S.path,$=S.matrix);var P=new Path2D(N),ce=document.createElement("canvas"),ue=ce.getContext("2d");if(!$){for(var ie=1e3,he=ie,k=ie,I=0,J=0,Z,me,ye=0;ye<ie;ye+=2)for(var pe=0;pe<ie;pe+=2)ue.isPointInPath(P,ye,pe,"nonzero")&&(he=Math.min(he,ye),k=Math.min(k,pe),I=Math.max(I,ye),J=Math.max(J,pe));Z=I-he,me=J-k;var De=10,je=Math.min(De/Z,De/me);$=[je,0,0,je,-Math.round(Z/2+he)*je,-Math.round(me/2+k)*je]}return{type:"path",path:N,matrix:$}}function le(S){var N,$=1,P="#000000",ce='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof S=="string"?N=S:(N=S.text,$="scalar"in S?S.scalar:$,ce="fontFamily"in S?S.fontFamily:ce,P="color"in S?S.color:P);var ue=10*$,ie=""+ue+"px "+ce,he=new OffscreenCanvas(ue,ue),k=he.getContext("2d");k.font=ie;var I=k.measureText(N),J=Math.ceil(I.actualBoundingBoxRight+I.actualBoundingBoxLeft),Z=Math.ceil(I.actualBoundingBoxAscent+I.actualBoundingBoxDescent),me=2,ye=I.actualBoundingBoxLeft+me,pe=I.actualBoundingBoxAscent+me;J+=me+me,Z+=me+me,he=new OffscreenCanvas(J,Z),k=he.getContext("2d"),k.font=ie,k.fillStyle=P,k.fillText(N,ye,pe);var De=1/$;return{type:"bitmap",bitmap:he.transferToImageBitmap(),matrix:[De,0,0,De,-J*De/2,-Z*De/2]}}a.exports=function(){return A().apply(this,arguments)},a.exports.reset=function(){A().reset()},a.exports.create=ge,a.exports.shapeFromPath=te,a.exports.shapeFromText=le})((function(){return typeof window!="undefined"?window:typeof self!="undefined"?self:this||{}})(),Li,!1);const k1=Li.exports;Li.exports.create;const Jr=new Os;function R1(r,t,a=!0,n){return _(this,null,function*(){const o=[],u=[],h=lj(),g=r.documents.filter(j=>!j.uploaded||!j.saved),m=r.selectedExistingDocuments.filter(j=>!j.linked),p=g.length>0||m.length>0,y=7,x=p?(g.length>0?1:0)+(m.length>0?1:0):0,v=y+x;try{n==null||n({step:1,totalSteps:v,message:"Preparing order data...",status:"in-progress"});const j={"Order ID":r.orderId,Project:r.project,Responsable:r.responsable,Status:r.status,Colour:r.colour,Notification:a,"Creation Date":h},E=[{Order:r.orderId,Action:"Cut","Quality Control":t},{Order:r.orderId,Action:"Manufacturing","Quality Control":t},{Order:r.orderId,Action:"Packaging","Quality Control":t}],D=r.panels.map(O=>({Name:O.name,Project:r.project,Status:"Ready to cut",Area:O.area,"Cut Distance":O.cutDistance,Order:r.orderId,"Creation Date":h,Comment:O.comment||"",Image:"",Priority:r.priority,"Nest Number":O.nestNumber,Sheet:O.sheetName}));n==null||n({step:1,totalSteps:v,message:"Order data prepared",status:"completed"}),n==null||n({step:2,totalSteps:v,message:"Creating order in DB...",status:"in-progress"});try{const{error:O}=yield ba.from("Orders cut").insert([j]);if(O)throw new Error(`Supabase error creating order: ${O.message}`);n==null||n({step:2,totalSteps:v,message:"Order created in DB",status:"completed"})}catch(O){const H=O instanceof Error?O.message:"Unknown error";throw o.push(`Failed to create order in Supabase: ${H}`),n==null||n({step:2,totalSteps:v,message:`Error: ${H}`,status:"error"}),O}n==null||n({step:3,totalSteps:v,message:`Creating panels in DB (${D.length} panels)...`,status:"in-progress"});try{D.length>0?(yield Kt.createPanels(D),n==null||n({step:3,totalSteps:v,message:`Panels created in DB (${D.length} panels)`,status:"completed"})):n==null||n({step:3,totalSteps:v,message:"No panels to create",status:"completed"})}catch(O){const H=O instanceof Error?O.message:"Unknown error";throw o.push(`Failed to create panels in Supabase: ${H}`),n==null||n({step:3,totalSteps:v,message:`Error: ${H}`,status:"error"}),O}n==null||n({step:4,totalSteps:v,message:"Creating order in CC Flow 2026...",status:"in-progress"});try{yield Jr.addOrderCut(j),n==null||n({step:4,totalSteps:v,message:"Order created in CC Flow 2026",status:"completed"})}catch(O){const H=O instanceof Error?O.message:"Unknown error";u.push(`Failed to create order in AppSheet: ${H}`),n==null||n({step:4,totalSteps:v,message:`Warning: ${H}`,status:"error"})}n==null||n({step:5,totalSteps:v,message:"Creating stages in CC Flow 2026 (3 stages)...",status:"in-progress"});try{yield Jr.createStages(E),n==null||n({step:5,totalSteps:v,message:"Stages created in CC Flow 2026 (3 stages)",status:"completed"})}catch(O){const H=O instanceof Error?O.message:"Unknown error";u.push(`Failed to create stages in AppSheet: ${H}`),n==null||n({step:5,totalSteps:v,message:`Warning: ${H}`,status:"error"})}n==null||n({step:6,totalSteps:v,message:`Creating panels in CC Flow 2026 (${D.length} panels)...`,status:"in-progress"});try{D.length>0?(yield Jr.createPanels(D),n==null||n({step:6,totalSteps:v,message:`Panels created in CC Flow 2026 (${D.length} panels)`,status:"completed"})):n==null||n({step:6,totalSteps:v,message:"No panels to create",status:"completed"})}catch(O){const H=O instanceof Error?O.message:"Unknown error";u.push(`Failed to create panels in AppSheet: ${H}`),n==null||n({step:6,totalSteps:v,message:`Warning: ${H}`,status:"error"})}n==null||n({step:7,totalSteps:v,message:`Updating sheets inventory in CC Flow 2026 (${r.selectedSheets.length} sheets)...`,status:"in-progress"});try{if(r.selectedSheets.length>0){const O=r.selectedSheets.map(H=>({"Sheet ID":H.sheetId,order:r.orderId,qty:-H.qty,change_time:h}));yield Jr.createSheetsInventory(O),n==null||n({step:7,totalSteps:v,message:`Sheets inventory updated in CC Flow 2026 (${r.selectedSheets.length} sheets)`,status:"completed"})}else n==null||n({step:7,totalSteps:v,message:"No sheets to update in inventory",status:"completed"})}catch(O){const H=O instanceof Error?O.message:"Unknown error";u.push(`Failed to update sheets inventory in AppSheet: ${H}`),n==null||n({step:7,totalSteps:v,message:`Warning: ${H}`,status:"error"})}if(p){let O=y;if(g.length>0){O++,n==null||n({step:O,totalSteps:v,message:`Uploading ${g.length} new document(s)...`,status:"in-progress"});for(let H=0;H<g.length;H++){const U=g[H];if(!U.category||!U.category.trim()){u.push(`Document "${U.name}" skipped: Category is required`);continue}try{yield Jr.addDocument({file:U.file,Project:r.project,Name:U.name,Orders:r.orderId,Comments:U.comments||"",Category:U.category||""})}catch(q){const ee=q instanceof Error?q.message:"Unknown error";u.push(`Failed to upload document "${U.name}": ${ee}`)}}n==null||n({step:O,totalSteps:v,message:`Uploaded ${g.length} new document(s)`,status:"completed"})}if(m.length>0){O++,n==null||n({step:O,totalSteps:v,message:`Linking ${m.length} existing document(s)...`,status:"in-progress"});for(let H=0;H<m.length;H++){const U=m[H];try{yield Jr.linkDocumentToOrder(U.documentId,r.orderId)}catch(q){const ee=q instanceof Error?q.message:"Unknown error";u.push(`Failed to link document "${U.name}": ${ee}`)}}n==null||n({step:O,totalSteps:v,message:`Linked ${m.length} existing document(s)`,status:"completed"})}}return{success:o.length===0,orderId:r.orderId,errors:o,warnings:u}}catch(j){const E=j instanceof Error?j.message:"Unknown error";return{success:!1,orderId:r.orderId,errors:[...o,E],warnings:u}}})}const M1=["#16a34a","#22c55e","#15803d","#fbbf24","#fde047","#ffffff"];function U1(){const n=o=>{setTimeout(()=>{k1({particleCount:80,spread:360,origin:{x:.5,y:.45},startVelocity:38,colors:M1,ticks:120,gravity:.9,scalar:.95,drift:0})},o)};for(let o=0;o<5;o++)n(o*120)}function q1(){const{formData:r,validation:t,setLoading:a,setError:n,setSuccess:o,resetWizard:u,isLoading:h,goToStep:g}=za(),[m,p]=M.useState(!1),[y,x]=M.useState(null),[v,j]=M.useState(null),[E,D]=M.useState(!1),[O,H]=M.useState(!0),U=M.useRef(!1);M.useEffect(()=>{const z=window.matchMedia("(prefers-reduced-motion: reduce)").matches;y!=null&&y.success&&!U.current&&!z&&(U.current=!0,U1()),y!=null&&y.success||(U.current=!1)},[y==null?void 0:y.success]);const q=z=>{D(z)},ee=z=>{H(z)},ae=()=>_(null,null,function*(){if(!t.step5.isValid)return;a(!0),n(null),o(!1);const z=r.documents.filter(A=>!A.uploaded||!A.saved),W=r.selectedExistingDocuments.filter(A=>!A.linked),de=[{number:1,label:"Preparing order data",status:"pending"},{number:2,label:"Creating order in DB",status:"pending"},{number:3,label:`Creating panels in DB (${r.panels.length} panels)`,status:"pending"},{number:4,label:"Creating order in CC Flow 2026",status:"pending"},{number:5,label:"Creating stages in CC Flow 2026 (3 stages)",status:"pending"},{number:6,label:`Creating panels in CC Flow 2026 (${r.panels.length} panels)`,status:"pending"},{number:7,label:"Updating sheets inventory in CC Flow 2026",status:"pending"}],ge=[];z.length>0&&ge.push({number:de.length+ge.length+1,label:`Uploading ${z.length} new document(s)`,status:"pending"}),W.length>0&&ge.push({number:de.length+ge.length+1,label:`Linking ${W.length} existing document(s)`,status:"pending"});const xe=[...de,...ge];j({currentStep:0,totalSteps:xe.length,message:"Starting order creation...",steps:xe});try{const A=yield R1(r,E,O,Q=>{j(te=>{if(!te)return te;const le=[...te.steps];return le[Q.step-1]=at($e({},le[Q.step-1]),{status:Q.status}),{currentStep:Q.step,totalSteps:Q.totalSteps,message:Q.message,steps:le}})});if(x(A),j(null),A.success)o(!0),A.warnings.length>0&&console.warn(" Order created with warnings:",A.warnings);else{const Q=A.errors.length>0?A.errors[0]:"Failed to create order";n(Q)}}catch(A){const Q=A instanceof Error?A.message:"Unknown error";n(Q),x({success:!1,orderId:r.orderId,errors:[Q],warnings:[]}),j(null)}finally{a(!1),p(!1)}}),Y=()=>{u(),x(null),p(!1)},re=t.step5,T=r.panels.reduce((z,W)=>z+W.area,0),C=r.panels.reduce((z,W)=>z+W.cutDistance,0),G=r.selectedSheets.reduce((z,W)=>z+W.qty,0);return y!=null&&y.success?l.jsx("div",{className:"step-container step5-review step-success",children:l.jsxs("div",{className:"success-content success-content-enter",children:[l.jsx("div",{className:"success-icon-wrapper",children:l.jsxs("svg",{className:"success-icon-svg",viewBox:"0 0 52 52","aria-hidden":!0,children:[l.jsx("circle",{className:"success-icon-circle",cx:"26",cy:"26",r:"24",fill:"none",stroke:"currentColor",strokeWidth:"2"}),l.jsx("path",{className:"success-icon-check",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M14 27l8 8 16-20"})]})}),l.jsx("h2",{className:"success-title success-title-enter",children:"Order Created Successfully!"}),l.jsxs("p",{className:"success-message success-message-enter",children:["Your order ",l.jsx("strong",{children:y.orderId})," for project ",l.jsx("strong",{children:r.project})," has been created and is ready for processing."]}),l.jsxs("div",{className:"success-order-info",children:[l.jsxs("div",{className:"success-info-item",children:[l.jsx("span",{className:"success-info-label",children:"Order ID:"}),l.jsx("span",{className:"success-info-value",children:y.orderId})]}),l.jsxs("div",{className:"success-info-item",children:[l.jsx("span",{className:"success-info-label",children:"Project:"}),l.jsx("span",{className:"success-info-value",children:r.project})]})]}),y.warnings&&y.warnings.length>0&&l.jsxs("div",{className:"success-warnings",children:[l.jsx("p",{className:"warnings-title",children:"Warnings:"}),l.jsx("ul",{children:y.warnings.map((z,W)=>l.jsx("li",{children:z},W))})]}),(()=>{const z=r.documents,W=r.selectedExistingDocuments,de=z,ge=W,xe=de.length+ge.length;return xe>0?l.jsxs("div",{className:"success-documents-section success-documents-summary",children:[l.jsxs("div",{className:"success-documents-header",children:[l.jsx("span",{className:"success-icon-small",children:""}),l.jsxs("p",{className:"success-documents-title",children:[xe," document",xe!==1?"s":""," processed"]})]}),l.jsxs("div",{className:"success-documents-list",children:[de.length>0&&l.jsxs("div",{className:"success-documents-group",children:[l.jsxs("span",{className:"documents-group-label",children:["Uploaded (",de.length,"):"]}),l.jsx("div",{className:"documents-group-items",children:de.map(Q=>l.jsx("span",{className:"document-item-badge",children:Q.name},Q.id))})]}),ge.length>0&&l.jsxs("div",{className:"success-documents-group",children:[l.jsxs("span",{className:"documents-group-label",children:["Linked (",ge.length,"):"]}),l.jsx("div",{className:"documents-group-items",children:ge.map(Q=>l.jsx("span",{className:"document-item-badge",children:Q.name},Q.documentId))})]})]}),l.jsx("button",{type:"button",onClick:()=>g(4),className:"action-button action-button-secondary",children:"Add More Documents"})]}):l.jsxs("div",{className:"success-documents-section success-documents-warning",children:[l.jsxs("div",{className:"success-documents-header",children:[l.jsx("span",{className:"warning-icon",children:""}),l.jsx("p",{className:"success-documents-title",children:"No documents were added to this order"})]}),l.jsx("p",{className:"success-documents-message",children:"Consider adding documents such as cut lists, elevation, drawings or other relevant files."}),l.jsx("button",{type:"button",onClick:()=>g(4),className:"action-button action-button-secondary",children:"Add Documents Now"})]})})(),l.jsx("p",{className:"success-next-step",children:"What would you like to do next?"}),l.jsx("div",{className:"success-actions",children:l.jsxs("button",{type:"button",onClick:Y,className:"action-button success-cta-button",children:[l.jsx("span",{className:"success-cta-icon","aria-hidden":!0,children:l.jsx("svg",{viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:l.jsx("path",{d:"M8 3v10M3 8h10"})})}),"Create another order"]})})]})}):l.jsxs("div",{className:"step-container step5-review",children:[l.jsx("h2",{className:"step-title",children:"Review and Create Order"}),l.jsx("p",{className:"step-description",children:"Review all the information before creating the order."}),h&&v&&l.jsx("div",{className:"step-loading-overlay",children:l.jsxs("div",{className:"creation-progress-container",children:[l.jsx("h3",{className:"progress-title",children:"Creating Order..."}),l.jsx("div",{className:"progress-bar-container",children:l.jsx("div",{className:"progress-bar-fill",style:{width:`${v.currentStep/v.totalSteps*100}%`}})}),l.jsx("div",{className:"progress-steps-list",children:v.steps.map(z=>l.jsxs("div",{className:`progress-step-item progress-step-${z.status}`,children:[l.jsxs("div",{className:"progress-step-icon",children:[z.status==="completed"&&"",z.status==="in-progress"&&"",z.status==="pending"&&"",z.status==="error"&&""]}),l.jsx("span",{className:"progress-step-label",children:z.label})]},z.number))}),l.jsx("p",{className:"progress-message",children:v.message})]})}),l.jsxs("div",{className:"step5-sections",children:[l.jsxs("section",{className:"review-section",children:[l.jsx("h3",{className:"section-title",children:"Order Information"}),l.jsxs("div",{className:"review-highlight-grid",children:[l.jsxs("div",{className:"review-item-highlight review-item-highlight-animated review-item-order-id",style:{animationDelay:"0.1s"},children:[l.jsx("span",{className:"review-label-highlight",children:"Order ID"}),l.jsx("span",{className:"review-value-highlight",children:r.orderId})]}),l.jsxs("div",{className:"review-item-highlight review-item-highlight-animated review-item-project",style:{animationDelay:"0.2s"},children:[l.jsx("span",{className:"review-label-highlight",children:"Project"}),l.jsx("span",{className:"review-value-highlight",children:r.project})]}),l.jsxs("div",{className:"review-item-highlight review-item-highlight-animated review-item-sheets",style:{animationDelay:"0.3s"},children:[l.jsx("span",{className:"review-label-highlight",children:"Sheets"}),l.jsx("span",{className:"review-value-highlight",children:r.sheets||"N/A"})]})]}),l.jsxs("div",{className:"review-controls-inline",children:[l.jsxs("div",{className:"review-control-item-inline review-control-notification review-control-animated",style:{animationDelay:"0.4s"},onClick:()=>ee(!O),role:"button",tabIndex:0,onKeyDown:z=>{(z.key==="Enter"||z.key===" ")&&(z.preventDefault(),ee(!O))},children:[l.jsxs("div",{className:"control-header-inline",children:[l.jsx("span",{className:"control-label-inline",children:"Notification"}),l.jsxs("div",{className:"tooltip-container",onClick:z=>z.stopPropagation(),children:[l.jsx("span",{className:"tooltip-icon",children:""}),l.jsx("div",{className:"tooltip-content",children:"When enabled, a notification will be sent to the Factory workers about this order."})]})]}),l.jsxs("label",{className:"toggle-switch toggle-switch-enhanced",onClick:z=>z.stopPropagation(),children:[l.jsx("input",{type:"checkbox",checked:O,onChange:z=>ee(z.target.checked)}),l.jsx("span",{className:"toggle-slider"})]})]}),l.jsxs("div",{className:"review-control-item-inline review-control-quality review-control-animated",style:{animationDelay:"0.5s"},onClick:()=>q(!E),role:"button",tabIndex:0,onKeyDown:z=>{(z.key==="Enter"||z.key===" ")&&(z.preventDefault(),q(!E))},children:[l.jsxs("div",{className:"control-header-inline",children:[l.jsx("span",{className:"control-label-inline",children:"Quality Control"}),l.jsxs("div",{className:"tooltip-container",onClick:z=>z.stopPropagation(),children:[l.jsx("span",{className:"tooltip-icon",children:""}),l.jsx("div",{className:"tooltip-content",children:"When enabled, in the Manufacturing stage it will be mandatory to take a photo of each manufactured panel."})]})]}),l.jsxs("label",{className:"toggle-switch toggle-switch-enhanced",onClick:z=>z.stopPropagation(),children:[l.jsx("input",{type:"checkbox",checked:E,onChange:z=>q(z.target.checked)}),l.jsx("span",{className:"toggle-slider"})]})]})]}),l.jsxs("div",{className:"review-grid review-grid-secondary",children:[l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Status:"}),l.jsx("span",{className:"review-value",children:r.status})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Responsible:"}),l.jsx("span",{className:"review-value",children:r.responsable})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Expected to:"}),l.jsx("span",{className:"review-value",children:new Date(r.expectedTo).toLocaleDateString("es-ES")})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Priority:"}),l.jsx("span",{className:"review-value",children:r.priority})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Colour:"}),l.jsx("span",{className:"review-value",children:r.colour||"N/A"})]}),r.orderComment&&l.jsxs("div",{className:"review-item review-item-full",children:[l.jsx("span",{className:"review-label",children:"Order Comment:"}),l.jsx("span",{className:"review-value",children:r.orderComment})]})]})]}),l.jsxs("section",{className:"review-section",children:[l.jsxs("h3",{className:"section-title",children:["Selected Sheets (",r.selectedSheets.length,")"]}),l.jsx("div",{className:"review-table-container",children:l.jsxs("table",{className:"review-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Dimension"}),l.jsx("th",{children:"Colour"}),l.jsx("th",{children:"Qty"})]})}),l.jsx("tbody",{children:r.selectedSheets.map(z=>l.jsxs("tr",{children:[l.jsx("td",{children:z.dimension}),l.jsx("td",{children:z.colour}),l.jsx("td",{children:z.qty})]},z.sheetId))})]})}),l.jsxs("div",{className:"review-summary-item review-summary-item-centered",children:[l.jsx("span",{className:"summary-label",children:"Total Sheets Qty:"}),l.jsx("span",{className:"summary-value",children:G})]})]}),l.jsxs("section",{className:"review-section",children:[l.jsxs("h3",{className:"section-title",children:["Summary of Panels (",r.panels.length,")"]}),l.jsxs("div",{className:"review-summary-grid",children:[l.jsxs("div",{className:"review-summary-item",children:[l.jsx("span",{className:"summary-label",children:"Total Panels:"}),l.jsx("span",{className:"summary-value",children:r.panels.length})]}),l.jsxs("div",{className:"review-summary-item",children:[l.jsx("span",{className:"summary-label",children:"Total Area:"}),l.jsxs("span",{className:"summary-value",children:[T.toFixed(2)," m"]})]}),l.jsxs("div",{className:"review-summary-item",children:[l.jsx("span",{className:"summary-label",children:"Cut Distance Total:"}),l.jsxs("span",{className:"summary-value",children:[C.toFixed(2)," m"]})]})]})]}),l.jsxs("section",{className:"review-section",children:[l.jsxs("div",{className:"review-section-header",children:[l.jsxs("h3",{className:"section-title",children:["Documents (",r.documents.length+r.selectedExistingDocuments.length,")"]}),l.jsx("button",{type:"button",onClick:()=>g(4),className:"review-action-button",disabled:h,children:r.documents.length===0&&r.selectedExistingDocuments.length===0?"Add Documents":"Manage Documents"})]}),r.documents.length===0&&r.selectedExistingDocuments.length===0?l.jsxs("div",{className:"review-empty-state",children:[l.jsx("span",{className:"empty-icon",children:""}),l.jsx("p",{className:"empty-message",children:"No documents added yet. You can add them now or after creating the order."})]}):l.jsxs("div",{className:"review-documents-list",children:[r.documents.map(z=>l.jsxs("div",{className:"review-document-item",children:[l.jsxs("div",{className:"review-document-info",children:[l.jsx("span",{className:"document-name",children:z.name}),l.jsx("span",{className:"document-category",children:z.category||"Uncategorized"})]}),l.jsx("span",{className:`document-status ${z.uploaded&&z.saved?"uploaded":"pending"}`,children:z.uploaded&&z.saved?" Uploaded":" Pending"})]},z.id)),r.selectedExistingDocuments.map(z=>l.jsxs("div",{className:"review-document-item",children:[l.jsxs("div",{className:"review-document-info",children:[l.jsx("span",{className:"document-name",children:z.name}),l.jsx("span",{className:"document-category",children:z.category||"Uncategorized"})]}),l.jsx("span",{className:"document-status linked",children:" To Link"})]},z.documentId))]})]})]}),re.errors.length>0&&l.jsxs("div",{className:"step-validation-errors",children:[l.jsx("p",{className:"validation-title",children:"Please correct the following errors:"}),l.jsx("ul",{children:re.errors.map((z,W)=>l.jsx("li",{children:z},W))})]}),y&&!y.success&&l.jsxs("div",{className:"step-error-message",children:[l.jsx("p",{children:l.jsx("strong",{children:"Error creating order:"})}),y.errors&&y.errors.length>0&&l.jsx("ul",{children:y.errors.map((z,W)=>l.jsx("li",{children:z},W))}),y.warnings&&y.warnings.length>0&&l.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid #fecaca"},children:[l.jsx("p",{children:l.jsx("strong",{children:"Warnings:"})}),l.jsx("ul",{children:y.warnings.map((z,W)=>l.jsx("li",{children:z},W))})]})]}),l.jsx("div",{className:"step5-actions",children:m?l.jsxs("div",{className:"confirm-dialog",children:[l.jsx("p",{className:"confirm-message",children:"Are you sure you want to create this order?"}),l.jsxs("div",{className:"confirm-actions",children:[l.jsx("button",{type:"button",onClick:()=>p(!1),className:"confirm-button confirm-button-cancel",disabled:h,children:"Cancelar"}),l.jsx("button",{type:"button",onClick:ae,disabled:h,className:"confirm-button confirm-button-confirm",children:h?"Creating...":"Confirm"})]})]}):l.jsx("button",{type:"button",onClick:()=>p(!0),disabled:!re.isValid||h,className:"create-order-button",children:"Create Order"})})]})}function L1(){const{currentStep:r}=za();switch(r){case 1:return l.jsx(dp,{});case 2:return l.jsx(C1,{});case 3:return l.jsx(D1,{});case 4:return l.jsx(A1,{});case 5:return l.jsx(q1,{});default:return l.jsx(dp,{})}}const z1=()=>{const{user:r,signOut:t}=jo(),{currentStep:a}=za(),n=M.useRef(null);ki("Creator of Orders - Cladding Creations"),M.useEffect(()=>{const m=setTimeout(()=>{n.current?n.current.scrollIntoView({behavior:"smooth",block:"start"}):window.scrollTo({top:0,behavior:"smooth"})},a===1?200:100);return()=>clearTimeout(m)},[a]);const h=a===2||a===3;return l.jsxs("div",{className:"creator-of-orders",children:[l.jsxs("div",{className:"creator-header",children:[l.jsxs("div",{className:"creator-header-left",children:[l.jsx("img",{src:xo(),alt:"Cladding Creations",className:"creator-logo"}),l.jsx("h1",{children:"Panel Order Creator"})]}),l.jsxs("div",{className:"user-info",children:[l.jsxs("span",{children:["Welcome, ",r==null?void 0:r.email]}),l.jsx("button",{onClick:()=>t(),className:"logout-button",children:"Logout"})]})]}),l.jsx("div",{className:`creator-content ${h?"step2-full-width":""}`,children:l.jsxs("div",{ref:n,className:`wizard-container ${h?"step2-full-width":""}`,children:[l.jsx(f1,{}),l.jsx("div",{className:"wizard-steps-container",children:l.jsx(L1,{})}),l.jsx(m1,{})]})})]})},$1=()=>l.jsx(h1,{children:l.jsx(z1,{})}),B1=new Yv({defaultOptions:{queries:{staleTime:600*1e3,gcTime:1800*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1}}}),P1=[{id:"cutting-information",label:"Cutting Information"},{id:"sheets",label:"Sheets"},{id:"project-allowances-section",label:"Allowances"},{id:"material-tables",label:"Material"},{id:"trips-over-time",label:"Trips"}],I1=r=>{const t=document.getElementById(r),a=document.querySelector(".main-header");if(t&&a){const n=a.offsetHeight,o=t.getBoundingClientRect().top+window.scrollY-n-8;window.scrollTo({top:o,behavior:"smooth"})}};function H1(){const r=bp(),[t,a]=M.useState(!0),[n,o]=M.useState(!1),[u,h]=M.useState(0),g=l1(r.pathname),p=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?"/CC-logo-NEW_1.webp":"/CC_Flow_summary_report/CC-logo-NEW_1.webp",y=[{id:"order-delivery",label:"Order Delivery",path:"/order-delivery",icon:""},{id:"analytics",label:"CC Analytics",path:"/analytics",icon:""}];return M.useEffect(()=>{const{animationDuration:x}=g;if(x===0){a(!1),o(!0);return}const v=x*.25,j=x*.5,E=x*.75,D=x,O=setTimeout(()=>{h(1)},v),H=setTimeout(()=>{h(2)},j),U=setTimeout(()=>{h(3)},E),q=setTimeout(()=>{a(!1),setTimeout(()=>{o(!0)},200)},D);return()=>{clearTimeout(O),clearTimeout(H),clearTimeout(U),clearTimeout(q)}},[g]),l.jsx("div",{className:`App ${t?"loading":"loaded"}`,children:l.jsxs(bb,{children:[g.showDataPreloader&&l.jsx(n1,{}),t&&l.jsx("div",{className:`loading-screen phase-${u}`,children:l.jsxs("div",{className:"loading-content",children:[l.jsx("img",{src:p,alt:"CC Logo",className:"loading-logo"}),l.jsx("div",{className:"loading-subtitle",children:g.loadingText})]})}),n&&l.jsx(l.Fragment,{children:l.jsx(rj,{children:l.jsxs(ob,{children:[l.jsx(di,{path:"/",element:l.jsxs(l.Fragment,{children:[g.showHeader&&l.jsxs("header",{className:"main-header",children:[l.jsx("div",{className:"header-left",children:l.jsx(i1,{logoPath:p,menuItems:y})}),l.jsx("nav",{className:"header-nav",children:P1.map(x=>l.jsx("button",{className:"nav-link",onClick:()=>I1(x.id),children:x.label},x.id))})]}),l.jsx(jN,{})]})}),l.jsx(di,{path:"/order-delivery",element:l.jsx(SN,{})}),l.jsx(di,{path:"/analytics",element:l.jsx(r1,{})}),l.jsx(di,{path:"/login",element:l.jsx(c1,{})}),l.jsx(di,{path:"/creator-of-orders",element:l.jsx(u1,{children:l.jsx($1,{})})})]})})})]})})}function Y1(){return l.jsx(Vv,{client:B1,children:l.jsxs(o1,{children:[l.jsx(lb,{children:l.jsx(H1,{})}),l.jsx(vb,{initialIsOpen:!1})]})})}mb.createRoot(document.getElementById("root")).render(l.jsx(io.StrictMode,{children:l.jsx(Y1,{})}))});export default V1();
