var Ov=Object.defineProperty,Dv=Object.defineProperties;var Av=Object.getOwnPropertyDescriptors;var pg=Object.getOwnPropertySymbols,Rv=Object.getPrototypeOf,kv=Object.prototype.hasOwnProperty,Mv=Object.prototype.propertyIsEnumerable,Uv=Reflect.get;var Du=(s,t,r)=>t in s?Ov(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,Xe=(s,t)=>{for(var r in t||(t={}))kv.call(t,r)&&Du(s,r,t[r]);if(pg)for(var r of pg(t))Mv.call(t,r)&&Du(s,r,t[r]);return s},Xt=(s,t)=>Dv(s,Av(t));var qv=(s,t)=>()=>(t||s((t={exports:{}}).exports,t),t.exports);var ae=(s,t,r)=>Du(s,typeof t!="symbol"?t+"":t,r);var Bt=(s,t,r)=>Uv(Rv(s),r,t);var _=(s,t,r)=>new Promise((n,l)=>{var u=m=>{try{g(r.next(m))}catch(y){l(y)}},h=m=>{try{g(r.throw(m))}catch(y){l(y)}},g=m=>m.done?n(m.value):Promise.resolve(m.value).then(u,h);g((r=r.apply(s,t)).next())});import{j as c,u as wa,a as Lv,Q as zv,b as Pv}from"./query-B4Ur1_o1.js";import{r as k,R as wi,m as ji,i as gi,a as $v,e as Bv,c as c0,b as mt,v as Hv,t as Iv,d as Yv,f as Vv,A as Qv,P as ud,B as an,C as ka,g as rn,L as sn,p as nn,h as ln,j as on,k as dd,l as Gv,n as Kv,o as u0,T as Fv,q as Xv}from"./charts-D_SN6vdU.js";import{r as Wv,a as Jv,g as d0}from"./vendor-C0DUGSOM.js";import{u as Zv,a as h0,b as f0,N as eb,H as tb,R as ab,c as oi}from"./router-D2KI5rDd.js";var ON=qv(tt=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function r(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function n(l){if(l.ep)return;l.ep=!0;const u=r(l);fetch(l.href,u)}})();var Au={exports:{}},ci={},Ru={exports:{}},ku={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vg;function rb(){return vg||(vg=1,function(s){function t(H,G){var X=H.length;H.push(G);e:for(;0<X;){var J=X-1>>>1,le=H[J];if(0<l(le,G))H[J]=G,H[X]=le,X=J;else break e}}function r(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var G=H[0],X=H.pop();if(X!==G){H[0]=X;e:for(var J=0,le=H.length,ie=le>>>1;J<ie;){var se=2*(J+1)-1,te=H[se],ve=se+1,Oe=H[ve];if(0>l(te,X))ve<le&&0>l(Oe,te)?(H[J]=Oe,H[ve]=X,J=ve):(H[J]=te,H[se]=X,J=se);else if(ve<le&&0>l(Oe,X))H[J]=Oe,H[ve]=X,J=ve;else break e}}return G}function l(H,G){var X=H.sortIndex-G.sortIndex;return X!==0?X:H.id-G.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var h=Date,g=h.now();s.unstable_now=function(){return h.now()-g}}var m=[],y=[],p=1,b=null,x=3,j=!1,S=!1,C=!1,A=!1,q=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate!="undefined"?setImmediate:null;function Q(H){for(var G=r(y);G!==null;){if(G.callback===null)n(y);else if(G.startTime<=H)n(y),G.sortIndex=G.expirationTime,t(m,G);else break;G=r(y)}}function I(H){if(C=!1,Q(H),!S)if(r(m)!==null)S=!0,D||(D=!0,W());else{var G=r(y);G!==null&&ee(I,G.startTime-H)}}var D=!1,Y=-1,N=5,T=-1;function $(){return A?!0:!(s.unstable_now()-T<N)}function Z(){if(A=!1,D){var H=s.unstable_now();T=H;var G=!0;try{e:{S=!1,C&&(C=!1,P(Y),Y=-1),j=!0;var X=x;try{t:{for(Q(H),b=r(m);b!==null&&!(b.expirationTime>H&&$());){var J=b.callback;if(typeof J=="function"){b.callback=null,x=b.priorityLevel;var le=J(b.expirationTime<=H);if(H=s.unstable_now(),typeof le=="function"){b.callback=le,Q(H),G=!0;break t}b===r(m)&&n(m),Q(H)}else n(m);b=r(m)}if(b!==null)G=!0;else{var ie=r(y);ie!==null&&ee(I,ie.startTime-H),G=!1}}break e}finally{b=null,x=X,j=!1}G=void 0}}finally{G?W():D=!1}}}var W;if(typeof M=="function")W=function(){M(Z)};else if(typeof MessageChannel!="undefined"){var re=new MessageChannel,Te=re.port2;re.port1.onmessage=Z,W=function(){Te.postMessage(null)}}else W=function(){q(Z,0)};function ee(H,G){Y=q(function(){H(s.unstable_now())},G)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(H){H.callback=null},s.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<H?Math.floor(1e3/H):5},s.unstable_getCurrentPriorityLevel=function(){return x},s.unstable_next=function(H){switch(x){case 1:case 2:case 3:var G=3;break;default:G=x}var X=x;x=G;try{return H()}finally{x=X}},s.unstable_requestPaint=function(){A=!0},s.unstable_runWithPriority=function(H,G){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var X=x;x=H;try{return G()}finally{x=X}},s.unstable_scheduleCallback=function(H,G,X){var J=s.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?J+X:J):X=J,H){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=X+le,H={id:p++,callback:G,priorityLevel:H,startTime:X,expirationTime:le,sortIndex:-1},X>J?(H.sortIndex=X,t(y,H),r(m)===null&&H===r(y)&&(C?(P(Y),Y=-1):C=!0,ee(I,X-J))):(H.sortIndex=le,t(m,H),S||j||(S=!0,D||(D=!0,W()))),H},s.unstable_shouldYield=$,s.unstable_wrapCallback=function(H){var G=x;return function(){var X=x;x=G;try{return H.apply(this,arguments)}finally{x=X}}}}(ku)),ku}var bg;function sb(){return bg||(bg=1,Ru.exports=rb()),Ru.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xg;function nb(){if(xg)return ci;xg=1;var s=sb(),t=Wv(),r=Jv();function n(e){var a="https://react.dev/errors/"+e;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)a+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var a=e,i=e;if(e.alternate)for(;a.return;)a=a.return;else{e=a;do a=e,(a.flags&4098)!==0&&(i=a.return),e=a.return;while(e)}return a.tag===3?i:null}function h(e){if(e.tag===13){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function g(e){if(u(e)!==e)throw Error(n(188))}function m(e){var a=e.alternate;if(!a){if(a=u(e),a===null)throw Error(n(188));return a!==e?null:e}for(var i=e,o=a;;){var d=i.return;if(d===null)break;var f=d.alternate;if(f===null){if(o=d.return,o!==null){i=o;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===i)return g(d),e;if(f===o)return g(d),a;f=f.sibling}throw Error(n(188))}if(i.return!==o.return)i=d,o=f;else{for(var v=!1,w=d.child;w;){if(w===i){v=!0,i=d,o=f;break}if(w===o){v=!0,o=d,i=f;break}w=w.sibling}if(!v){for(w=f.child;w;){if(w===i){v=!0,i=f,o=d;break}if(w===o){v=!0,o=f,i=d;break}w=w.sibling}if(!v)throw Error(n(189))}}if(i.alternate!==o)throw Error(n(190))}if(i.tag!==3)throw Error(n(188));return i.stateNode.current===i?e:a}function y(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e;for(e=e.child;e!==null;){if(a=y(e),a!==null)return a;e=e.sibling}return null}var p=Object.assign,b=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),q=Symbol.for("react.provider"),P=Symbol.for("react.consumer"),M=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function W(e){return e===null||typeof e!="object"?null:(e=Z&&e[Z]||e["@@iterator"],typeof e=="function"?e:null)}var re=Symbol.for("react.client.reference");function Te(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===re?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case S:return"Fragment";case A:return"Profiler";case C:return"StrictMode";case I:return"Suspense";case D:return"SuspenseList";case T:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case j:return"Portal";case M:return(e.displayName||"Context")+".Provider";case P:return(e._context.displayName||"Context")+".Consumer";case Q:var a=e.render;return e=e.displayName,e||(e=a.displayName||a.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Y:return a=e.displayName||null,a!==null?a:Te(e.type)||"Memo";case N:a=e._payload,e=e._init;try{return Te(e(a))}catch(i){}}return null}var ee=Array.isArray,H=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},J=[],le=-1;function ie(e){return{current:e}}function se(e){0>le||(e.current=J[le],J[le]=null,le--)}function te(e,a){le++,J[le]=e.current,e.current=a}var ve=ie(null),Oe=ie(null),He=ie(null),Tt=ie(null);function be(e,a){switch(te(He,a),te(Oe,e),te(ve,null),a.nodeType){case 9:case 11:e=(e=a.documentElement)&&(e=e.namespaceURI)?Vm(e):0;break;default:if(e=a.tagName,a=a.namespaceURI)a=Vm(a),e=Qm(a,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}se(ve),te(ve,e)}function we(){se(ve),se(Oe),se(He)}function Ie(e){e.memoizedState!==null&&te(Tt,e);var a=ve.current,i=Qm(a,e.type);a!==i&&(te(Oe,e),te(ve,i))}function me(e){Oe.current===e&&(se(ve),se(Oe)),Tt.current===e&&(se(Tt),ri._currentValue=X)}var Ye=Object.prototype.hasOwnProperty,We=s.unstable_scheduleCallback,De=s.unstable_cancelCallback,qe=s.unstable_shouldYield,_e=s.unstable_requestPaint,at=s.unstable_now,pe=s.unstable_getCurrentPriorityLevel,Ve=s.unstable_ImmediatePriority,ha=s.unstable_UserBlockingPriority,fa=s.unstable_NormalPriority,ea=s.unstable_LowPriority,Ja=s.unstable_IdlePriority,bt=s.log,ta=s.unstable_setDisableYieldValue,Ke=null,Le=null;function xt(e){if(typeof bt=="function"&&ta(e),Le&&typeof Le.setStrictMode=="function")try{Le.setStrictMode(Ke,e)}catch(a){}}var Et=Math.clz32?Math.clz32:aa,Ui=Math.log,Za=Math.LN2;function aa(e){return e>>>=0,e===0?32:31-(Ui(e)/Za|0)|0}var ja=256,Cr=4194304;function Or(e){var a=e&42;if(a!==0)return a;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function qi(e,a,i){var o=e.pendingLanes;if(o===0)return 0;var d=0,f=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var w=o&134217727;return w!==0?(o=w&~f,o!==0?d=Or(o):(v&=w,v!==0?d=Or(v):i||(i=w&~e,i!==0&&(d=Or(i))))):(w=o&~f,w!==0?d=Or(w):v!==0?d=Or(v):i||(i=o&~e,i!==0&&(d=Or(i)))),d===0?0:a!==0&&a!==d&&(a&f)===0&&(f=d&-d,i=a&-a,f>=i||f===32&&(i&4194048)!==0)?a:d}function hn(e,a){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&a)===0}function yy(e,a){switch(e){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ed(){var e=ja;return ja<<=1,(ja&4194048)===0&&(ja=256),e}function Cd(){var e=Cr;return Cr<<=1,(Cr&62914560)===0&&(Cr=4194304),e}function bo(e){for(var a=[],i=0;31>i;i++)a.push(e);return a}function fn(e,a){e.pendingLanes|=a,a!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function py(e,a,i,o,d,f){var v=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var w=e.entanglements,E=e.expirationTimes,L=e.hiddenUpdates;for(i=v&~i;0<i;){var V=31-Et(i),F=1<<V;w[V]=0,E[V]=-1;var z=L[V];if(z!==null)for(L[V]=null,V=0;V<z.length;V++){var B=z[V];B!==null&&(B.lane&=-536870913)}i&=~F}o!==0&&Od(e,o,0),f!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=f&~(v&~a))}function Od(e,a,i){e.pendingLanes|=a,e.suspendedLanes&=~a;var o=31-Et(a);e.entangledLanes|=a,e.entanglements[o]=e.entanglements[o]|1073741824|i&4194090}function Dd(e,a){var i=e.entangledLanes|=a;for(e=e.entanglements;i;){var o=31-Et(i),d=1<<o;d&a|e[o]&a&&(e[o]|=a),i&=~d}}function xo(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function wo(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ad(){var e=G.p;return e!==0?e:(e=window.event,e===void 0?32:dg(e.type))}function vy(e,a){var i=G.p;try{return G.p=e,a()}finally{G.p=i}}var er=Math.random().toString(36).slice(2),kt="__reactFiber$"+er,qt="__reactProps$"+er,as="__reactContainer$"+er,jo="__reactEvents$"+er,by="__reactListeners$"+er,xy="__reactHandles$"+er,Rd="__reactResources$"+er,mn="__reactMarker$"+er;function _o(e){delete e[kt],delete e[qt],delete e[jo],delete e[by],delete e[xy]}function rs(e){var a=e[kt];if(a)return a;for(var i=e.parentNode;i;){if(a=i[as]||i[kt]){if(i=a.alternate,a.child!==null||i!==null&&i.child!==null)for(e=Xm(e);e!==null;){if(i=e[kt])return i;e=Xm(e)}return a}e=i,i=e.parentNode}return null}function ss(e){if(e=e[kt]||e[as]){var a=e.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return e}return null}function gn(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e.stateNode;throw Error(n(33))}function ns(e){var a=e[Rd];return a||(a=e[Rd]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function wt(e){e[mn]=!0}var kd=new Set,Md={};function Dr(e,a){is(e,a),is(e+"Capture",a)}function is(e,a){for(Md[e]=a,e=0;e<a.length;e++)kd.add(a[e])}var wy=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ud={},qd={};function jy(e){return Ye.call(qd,e)?!0:Ye.call(Ud,e)?!1:wy.test(e)?qd[e]=!0:(Ud[e]=!0,!1)}function Li(e,a,i){if(jy(a))if(i===null)e.removeAttribute(a);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(a);return;case"boolean":var o=a.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(a);return}}e.setAttribute(a,""+i)}}function zi(e,a,i){if(i===null)e.removeAttribute(a);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttribute(a,""+i)}}function Ma(e,a,i,o){if(o===null)e.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(a,i,""+o)}}var So,Ld;function ls(e){if(So===void 0)try{throw Error()}catch(i){var a=i.stack.trim().match(/\n( *(at )?)/);So=a&&a[1]||"",Ld=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+So+e+Ld}var No=!1;function To(e,a){if(!e||No)return"";No=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(a){var F=function(){throw Error()};if(Object.defineProperty(F.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(F,[])}catch(B){var z=B}Reflect.construct(e,[],F)}else{try{F.call()}catch(B){z=B}e.call(F.prototype)}}else{try{throw Error()}catch(B){z=B}(F=e())&&typeof F.catch=="function"&&F.catch(function(){})}}catch(B){if(B&&z&&typeof B.stack=="string")return[B.stack,z.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),v=f[0],w=f[1];if(v&&w){var E=v.split(`
`),L=w.split(`
`);for(d=o=0;o<E.length&&!E[o].includes("DetermineComponentFrameRoot");)o++;for(;d<L.length&&!L[d].includes("DetermineComponentFrameRoot");)d++;if(o===E.length||d===L.length)for(o=E.length-1,d=L.length-1;1<=o&&0<=d&&E[o]!==L[d];)d--;for(;1<=o&&0<=d;o--,d--)if(E[o]!==L[d]){if(o!==1||d!==1)do if(o--,d--,0>d||E[o]!==L[d]){var V=`
`+E[o].replace(" at new "," at ");return e.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",e.displayName)),V}while(1<=o&&0<=d);break}}}finally{No=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?ls(i):""}function _y(e){switch(e.tag){case 26:case 27:case 5:return ls(e.type);case 16:return ls("Lazy");case 13:return ls("Suspense");case 19:return ls("SuspenseList");case 0:case 15:return To(e.type,!1);case 11:return To(e.type.render,!1);case 1:return To(e.type,!0);case 31:return ls("Activity");default:return""}}function zd(e){try{var a="";do a+=_y(e),e=e.return;while(e);return a}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}function ra(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Pd(e){var a=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Sy(e){var a=Pd(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,a),o=""+e[a];if(!e.hasOwnProperty(a)&&typeof i!="undefined"&&typeof i.get=="function"&&typeof i.set=="function"){var d=i.get,f=i.set;return Object.defineProperty(e,a,{configurable:!0,get:function(){return d.call(this)},set:function(v){o=""+v,f.call(this,v)}}),Object.defineProperty(e,a,{enumerable:i.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){e._valueTracker=null,delete e[a]}}}}function Pi(e){e._valueTracker||(e._valueTracker=Sy(e))}function $d(e){if(!e)return!1;var a=e._valueTracker;if(!a)return!0;var i=a.getValue(),o="";return e&&(o=Pd(e)?e.checked?"true":"false":e.value),e=o,e!==i?(a.setValue(e),!0):!1}function $i(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(a){return e.body}}var Ny=/[\n"\\]/g;function sa(e){return e.replace(Ny,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Eo(e,a,i,o,d,f,v,w){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),a!=null?v==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+ra(a)):e.value!==""+ra(a)&&(e.value=""+ra(a)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),a!=null?Co(e,v,ra(a)):i!=null?Co(e,v,ra(i)):o!=null&&e.removeAttribute("value"),d==null&&f!=null&&(e.defaultChecked=!!f),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?e.name=""+ra(w):e.removeAttribute("name")}function Bd(e,a,i,o,d,f,v,w){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),a!=null||i!=null){if(!(f!=="submit"&&f!=="reset"||a!=null))return;i=i!=null?""+ra(i):"",a=a!=null?""+ra(a):i,w||a===e.value||(e.value=a),e.defaultValue=a}o=o!=null?o:d,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=w?e.checked:!!o,e.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v)}function Co(e,a,i){a==="number"&&$i(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function os(e,a,i,o){if(e=e.options,a){a={};for(var d=0;d<i.length;d++)a["$"+i[d]]=!0;for(i=0;i<e.length;i++)d=a.hasOwnProperty("$"+e[i].value),e[i].selected!==d&&(e[i].selected=d),d&&o&&(e[i].defaultSelected=!0)}else{for(i=""+ra(i),a=null,d=0;d<e.length;d++){if(e[d].value===i){e[d].selected=!0,o&&(e[d].defaultSelected=!0);return}a!==null||e[d].disabled||(a=e[d])}a!==null&&(a.selected=!0)}}function Hd(e,a,i){if(a!=null&&(a=""+ra(a),a!==e.value&&(e.value=a),i==null)){e.defaultValue!==a&&(e.defaultValue=a);return}e.defaultValue=i!=null?""+ra(i):""}function Id(e,a,i,o){if(a==null){if(o!=null){if(i!=null)throw Error(n(92));if(ee(o)){if(1<o.length)throw Error(n(93));o=o[0]}i=o}i==null&&(i=""),a=i}i=ra(a),e.defaultValue=i,o=e.textContent,o===i&&o!==""&&o!==null&&(e.value=o)}function cs(e,a){if(a){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=a;return}}e.textContent=a}var Ty=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yd(e,a,i){var o=a.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?o?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="":o?e.setProperty(a,i):typeof i!="number"||i===0||Ty.has(a)?a==="float"?e.cssFloat=i:e[a]=(""+i).trim():e[a]=i+"px"}function Vd(e,a,i){if(a!=null&&typeof a!="object")throw Error(n(62));if(e=e.style,i!=null){for(var o in i)!i.hasOwnProperty(o)||a!=null&&a.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var d in a)o=a[d],a.hasOwnProperty(d)&&i[d]!==o&&Yd(e,d,o)}else for(var f in a)a.hasOwnProperty(f)&&Yd(e,f,a[f])}function Oo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ey=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Cy=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bi(e){return Cy.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Do=null;function Ao(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var us=null,ds=null;function Qd(e){var a=ss(e);if(a&&(e=a.stateNode)){var i=e[qt]||null;e:switch(e=a.stateNode,a.type){case"input":if(Eo(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),a=i.name,i.type==="radio"&&a!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+sa(""+a)+'"][type="radio"]'),a=0;a<i.length;a++){var o=i[a];if(o!==e&&o.form===e.form){var d=o[qt]||null;if(!d)throw Error(n(90));Eo(o,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(a=0;a<i.length;a++)o=i[a],o.form===e.form&&$d(o)}break e;case"textarea":Hd(e,i.value,i.defaultValue);break e;case"select":a=i.value,a!=null&&os(e,!!i.multiple,a,!1)}}}var Ro=!1;function Gd(e,a,i){if(Ro)return e(a,i);Ro=!0;try{var o=e(a);return o}finally{if(Ro=!1,(us!==null||ds!==null)&&(Tl(),us&&(a=us,e=ds,ds=us=null,Qd(a),e)))for(a=0;a<e.length;a++)Qd(e[a])}}function yn(e,a){var i=e.stateNode;if(i===null)return null;var o=i[qt]||null;if(o===null)return null;i=o[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(n(231,a,typeof i));return i}var Ua=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),ko=!1;if(Ua)try{var pn={};Object.defineProperty(pn,"passive",{get:function(){ko=!0}}),window.addEventListener("test",pn,pn),window.removeEventListener("test",pn,pn)}catch(e){ko=!1}var tr=null,Mo=null,Hi=null;function Kd(){if(Hi)return Hi;var e,a=Mo,i=a.length,o,d="value"in tr?tr.value:tr.textContent,f=d.length;for(e=0;e<i&&a[e]===d[e];e++);var v=i-e;for(o=1;o<=v&&a[i-o]===d[f-o];o++);return Hi=d.slice(e,1<o?1-o:void 0)}function Ii(e){var a=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&a===13&&(e=13)):e=a,e===10&&(e=13),32<=e||e===13?e:0}function Yi(){return!0}function Fd(){return!1}function Lt(e){function a(i,o,d,f,v){this._reactName=i,this._targetInst=d,this.type=o,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(i=e[w],this[w]=i?i(f):f[w]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Yi:Fd,this.isPropagationStopped=Fd,this}return p(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Yi)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Yi)},persist:function(){},isPersistent:Yi}),a}var Ar={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vi=Lt(Ar),vn=p({},Ar,{view:0,detail:0}),Oy=Lt(vn),Uo,qo,bn,Qi=p({},vn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==bn&&(bn&&e.type==="mousemove"?(Uo=e.screenX-bn.screenX,qo=e.screenY-bn.screenY):qo=Uo=0,bn=e),Uo)},movementY:function(e){return"movementY"in e?e.movementY:qo}}),Xd=Lt(Qi),Dy=p({},Qi,{dataTransfer:0}),Ay=Lt(Dy),Ry=p({},vn,{relatedTarget:0}),Lo=Lt(Ry),ky=p({},Ar,{animationName:0,elapsedTime:0,pseudoElement:0}),My=Lt(ky),Uy=p({},Ar,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),qy=Lt(Uy),Ly=p({},Ar,{data:0}),Wd=Lt(Ly),zy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Py={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$y={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function By(e){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(e):(e=$y[e])?!!a[e]:!1}function zo(){return By}var Hy=p({},vn,{key:function(e){if(e.key){var a=zy[e.key]||e.key;if(a!=="Unidentified")return a}return e.type==="keypress"?(e=Ii(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Py[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zo,charCode:function(e){return e.type==="keypress"?Ii(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ii(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Iy=Lt(Hy),Yy=p({},Qi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jd=Lt(Yy),Vy=p({},vn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zo}),Qy=Lt(Vy),Gy=p({},Ar,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ky=Lt(Gy),Fy=p({},Qi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Xy=Lt(Fy),Wy=p({},Ar,{newState:0,oldState:0}),Jy=Lt(Wy),Zy=[9,13,27,32],Po=Ua&&"CompositionEvent"in window,xn=null;Ua&&"documentMode"in document&&(xn=document.documentMode);var ep=Ua&&"TextEvent"in window&&!xn,Zd=Ua&&(!Po||xn&&8<xn&&11>=xn),eh=" ",th=!1;function ah(e,a){switch(e){case"keyup":return Zy.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var hs=!1;function tp(e,a){switch(e){case"compositionend":return rh(a);case"keypress":return a.which!==32?null:(th=!0,eh);case"textInput":return e=a.data,e===eh&&th?null:e;default:return null}}function ap(e,a){if(hs)return e==="compositionend"||!Po&&ah(e,a)?(e=Kd(),Hi=Mo=tr=null,hs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Zd&&a.locale!=="ko"?null:a.data;default:return null}}var rp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sh(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a==="input"?!!rp[e.type]:a==="textarea"}function nh(e,a,i,o){us?ds?ds.push(o):ds=[o]:us=o,a=Rl(a,"onChange"),0<a.length&&(i=new Vi("onChange","change",null,i,o),e.push({event:i,listeners:a}))}var wn=null,jn=null;function sp(e){$m(e,0)}function Gi(e){var a=gn(e);if($d(a))return e}function ih(e,a){if(e==="change")return a}var lh=!1;if(Ua){var $o;if(Ua){var Bo="oninput"in document;if(!Bo){var oh=document.createElement("div");oh.setAttribute("oninput","return;"),Bo=typeof oh.oninput=="function"}$o=Bo}else $o=!1;lh=$o&&(!document.documentMode||9<document.documentMode)}function ch(){wn&&(wn.detachEvent("onpropertychange",uh),jn=wn=null)}function uh(e){if(e.propertyName==="value"&&Gi(jn)){var a=[];nh(a,jn,e,Ao(e)),Gd(sp,a)}}function np(e,a,i){e==="focusin"?(ch(),wn=a,jn=i,wn.attachEvent("onpropertychange",uh)):e==="focusout"&&ch()}function ip(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Gi(jn)}function lp(e,a){if(e==="click")return Gi(a)}function op(e,a){if(e==="input"||e==="change")return Gi(a)}function cp(e,a){return e===a&&(e!==0||1/e===1/a)||e!==e&&a!==a}var It=typeof Object.is=="function"?Object.is:cp;function _n(e,a){if(It(e,a))return!0;if(typeof e!="object"||e===null||typeof a!="object"||a===null)return!1;var i=Object.keys(e),o=Object.keys(a);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var d=i[o];if(!Ye.call(a,d)||!It(e[d],a[d]))return!1}return!0}function dh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hh(e,a){var i=dh(e);e=0;for(var o;i;){if(i.nodeType===3){if(o=e+i.textContent.length,e<=a&&o>=a)return{node:i,offset:a-e};e=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=dh(i)}}function fh(e,a){return e&&a?e===a?!0:e&&e.nodeType===3?!1:a&&a.nodeType===3?fh(e,a.parentNode):"contains"in e?e.contains(a):e.compareDocumentPosition?!!(e.compareDocumentPosition(a)&16):!1:!1}function mh(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var a=$i(e.document);a instanceof e.HTMLIFrameElement;){try{var i=typeof a.contentWindow.location.href=="string"}catch(o){i=!1}if(i)e=a.contentWindow;else break;a=$i(e.document)}return a}function Ho(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a&&(a==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||a==="textarea"||e.contentEditable==="true")}var up=Ua&&"documentMode"in document&&11>=document.documentMode,fs=null,Io=null,Sn=null,Yo=!1;function gh(e,a,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Yo||fs==null||fs!==$i(o)||(o=fs,"selectionStart"in o&&Ho(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Sn&&_n(Sn,o)||(Sn=o,o=Rl(Io,"onSelect"),0<o.length&&(a=new Vi("onSelect","select",null,a,i),e.push({event:a,listeners:o}),a.target=fs)))}function Rr(e,a){var i={};return i[e.toLowerCase()]=a.toLowerCase(),i["Webkit"+e]="webkit"+a,i["Moz"+e]="moz"+a,i}var ms={animationend:Rr("Animation","AnimationEnd"),animationiteration:Rr("Animation","AnimationIteration"),animationstart:Rr("Animation","AnimationStart"),transitionrun:Rr("Transition","TransitionRun"),transitionstart:Rr("Transition","TransitionStart"),transitioncancel:Rr("Transition","TransitionCancel"),transitionend:Rr("Transition","TransitionEnd")},Vo={},yh={};Ua&&(yh=document.createElement("div").style,"AnimationEvent"in window||(delete ms.animationend.animation,delete ms.animationiteration.animation,delete ms.animationstart.animation),"TransitionEvent"in window||delete ms.transitionend.transition);function kr(e){if(Vo[e])return Vo[e];if(!ms[e])return e;var a=ms[e],i;for(i in a)if(a.hasOwnProperty(i)&&i in yh)return Vo[e]=a[i];return e}var ph=kr("animationend"),vh=kr("animationiteration"),bh=kr("animationstart"),dp=kr("transitionrun"),hp=kr("transitionstart"),fp=kr("transitioncancel"),xh=kr("transitionend"),wh=new Map,Qo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qo.push("scrollEnd");function ma(e,a){wh.set(e,a),Dr(a,[e])}var jh=new WeakMap;function na(e,a){if(typeof e=="object"&&e!==null){var i=jh.get(e);return i!==void 0?i:(a={value:e,source:a,stack:zd(a)},jh.set(e,a),a)}return{value:e,source:a,stack:zd(a)}}var ia=[],gs=0,Go=0;function Ki(){for(var e=gs,a=Go=gs=0;a<e;){var i=ia[a];ia[a++]=null;var o=ia[a];ia[a++]=null;var d=ia[a];ia[a++]=null;var f=ia[a];if(ia[a++]=null,o!==null&&d!==null){var v=o.pending;v===null?d.next=d:(d.next=v.next,v.next=d),o.pending=d}f!==0&&_h(i,d,f)}}function Fi(e,a,i,o){ia[gs++]=e,ia[gs++]=a,ia[gs++]=i,ia[gs++]=o,Go|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function Ko(e,a,i,o){return Fi(e,a,i,o),Xi(e)}function ys(e,a){return Fi(e,null,null,a),Xi(e)}function _h(e,a,i){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i);for(var d=!1,f=e.return;f!==null;)f.childLanes|=i,o=f.alternate,o!==null&&(o.childLanes|=i),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(d=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,d&&a!==null&&(d=31-Et(i),e=f.hiddenUpdates,o=e[d],o===null?e[d]=[a]:o.push(a),a.lane=i|536870912),f):null}function Xi(e){if(50<Fn)throw Fn=0,eu=null,Error(n(185));for(var a=e.return;a!==null;)e=a,a=e.return;return e.tag===3?e.stateNode:null}var ps={};function mp(e,a,i,o){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(e,a,i,o){return new mp(e,a,i,o)}function Fo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function qa(e,a){var i=e.alternate;return i===null?(i=Yt(e.tag,a,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=a,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,a=e.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Sh(e,a){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=a,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,a=i.dependencies,e.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),e}function Wi(e,a,i,o,d,f){var v=0;if(o=e,typeof e=="function")Fo(e)&&(v=1);else if(typeof e=="string")v=yv(e,i,ve.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case T:return e=Yt(31,i,a,d),e.elementType=T,e.lanes=f,e;case S:return Mr(i.children,d,f,a);case C:v=8,d|=24;break;case A:return e=Yt(12,i,a,d|2),e.elementType=A,e.lanes=f,e;case I:return e=Yt(13,i,a,d),e.elementType=I,e.lanes=f,e;case D:return e=Yt(19,i,a,d),e.elementType=D,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case q:case M:v=10;break e;case P:v=9;break e;case Q:v=11;break e;case Y:v=14;break e;case N:v=16,o=null;break e}v=29,i=Error(n(130,e===null?"null":typeof e,"")),o=null}return a=Yt(v,i,a,d),a.elementType=e,a.type=o,a.lanes=f,a}function Mr(e,a,i,o){return e=Yt(7,e,o,a),e.lanes=i,e}function Xo(e,a,i){return e=Yt(6,e,null,a),e.lanes=i,e}function Wo(e,a,i){return a=Yt(4,e.children!==null?e.children:[],e.key,a),a.lanes=i,a.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},a}var vs=[],bs=0,Ji=null,Zi=0,la=[],oa=0,Ur=null,La=1,za="";function qr(e,a){vs[bs++]=Zi,vs[bs++]=Ji,Ji=e,Zi=a}function Nh(e,a,i){la[oa++]=La,la[oa++]=za,la[oa++]=Ur,Ur=e;var o=La;e=za;var d=32-Et(o)-1;o&=~(1<<d),i+=1;var f=32-Et(a)+d;if(30<f){var v=d-d%5;f=(o&(1<<v)-1).toString(32),o>>=v,d-=v,La=1<<32-Et(a)+d|i<<d|o,za=f+e}else La=1<<f|i<<d|o,za=e}function Jo(e){e.return!==null&&(qr(e,1),Nh(e,1,0))}function Zo(e){for(;e===Ji;)Ji=vs[--bs],vs[bs]=null,Zi=vs[--bs],vs[bs]=null;for(;e===Ur;)Ur=la[--oa],la[oa]=null,za=la[--oa],la[oa]=null,La=la[--oa],la[oa]=null}var Ut=null,rt=null,Ae=!1,Lr=null,_a=!1,ec=Error(n(519));function zr(e){var a=Error(n(418,""));throw En(na(a,e)),ec}function Th(e){var a=e.stateNode,i=e.type,o=e.memoizedProps;switch(a[kt]=e,a[qt]=o,i){case"dialog":Ne("cancel",a),Ne("close",a);break;case"iframe":case"object":case"embed":Ne("load",a);break;case"video":case"audio":for(i=0;i<Wn.length;i++)Ne(Wn[i],a);break;case"source":Ne("error",a);break;case"img":case"image":case"link":Ne("error",a),Ne("load",a);break;case"details":Ne("toggle",a);break;case"input":Ne("invalid",a),Bd(a,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),Pi(a);break;case"select":Ne("invalid",a);break;case"textarea":Ne("invalid",a),Id(a,o.value,o.defaultValue,o.children),Pi(a)}i=o.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||a.textContent===""+i||o.suppressHydrationWarning===!0||Ym(a.textContent,i)?(o.popover!=null&&(Ne("beforetoggle",a),Ne("toggle",a)),o.onScroll!=null&&Ne("scroll",a),o.onScrollEnd!=null&&Ne("scrollend",a),o.onClick!=null&&(a.onclick=kl),a=!0):a=!1,a||zr(e)}function Eh(e){for(Ut=e.return;Ut;)switch(Ut.tag){case 5:case 13:_a=!1;return;case 27:case 3:_a=!0;return;default:Ut=Ut.return}}function Nn(e){if(e!==Ut)return!1;if(!Ae)return Eh(e),Ae=!0,!1;var a=e.tag,i;if((i=a!==3&&a!==27)&&((i=a===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||yu(e.type,e.memoizedProps)),i=!i),i&&rt&&zr(e),Eh(e),a===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(n(317));e:{for(e=e.nextSibling,a=0;e;){if(e.nodeType===8)if(i=e.data,i==="/$"){if(a===0){rt=ya(e.nextSibling);break e}a--}else i!=="$"&&i!=="$!"&&i!=="$?"||a++;e=e.nextSibling}rt=null}}else a===27?(a=rt,pr(e.type)?(e=xu,xu=null,rt=e):rt=a):rt=Ut?ya(e.stateNode.nextSibling):null;return!0}function Tn(){rt=Ut=null,Ae=!1}function Ch(){var e=Lr;return e!==null&&($t===null?$t=e:$t.push.apply($t,e),Lr=null),e}function En(e){Lr===null?Lr=[e]:Lr.push(e)}var tc=ie(null),Pr=null,Pa=null;function ar(e,a,i){te(tc,a._currentValue),a._currentValue=i}function $a(e){e._currentValue=tc.current,se(tc)}function ac(e,a,i){for(;e!==null;){var o=e.alternate;if((e.childLanes&a)!==a?(e.childLanes|=a,o!==null&&(o.childLanes|=a)):o!==null&&(o.childLanes&a)!==a&&(o.childLanes|=a),e===i)break;e=e.return}}function rc(e,a,i,o){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var f=d.dependencies;if(f!==null){var v=d.child;f=f.firstContext;e:for(;f!==null;){var w=f;f=d;for(var E=0;E<a.length;E++)if(w.context===a[E]){f.lanes|=i,w=f.alternate,w!==null&&(w.lanes|=i),ac(f.return,i,e),o||(v=null);break e}f=w.next}}else if(d.tag===18){if(v=d.return,v===null)throw Error(n(341));v.lanes|=i,f=v.alternate,f!==null&&(f.lanes|=i),ac(v,i,e),v=null}else v=d.child;if(v!==null)v.return=d;else for(v=d;v!==null;){if(v===e){v=null;break}if(d=v.sibling,d!==null){d.return=v.return,v=d;break}v=v.return}d=v}}function Cn(e,a,i,o){e=null;for(var d=a,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var v=d.alternate;if(v===null)throw Error(n(387));if(v=v.memoizedProps,v!==null){var w=d.type;It(d.pendingProps.value,v.value)||(e!==null?e.push(w):e=[w])}}else if(d===Tt.current){if(v=d.alternate,v===null)throw Error(n(387));v.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(ri):e=[ri])}d=d.return}e!==null&&rc(a,e,i,o),a.flags|=262144}function el(e){for(e=e.firstContext;e!==null;){if(!It(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function $r(e){Pr=e,Pa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Mt(e){return Oh(Pr,e)}function tl(e,a){return Pr===null&&$r(e),Oh(e,a)}function Oh(e,a){var i=a._currentValue;if(a={context:a,memoizedValue:i,next:null},Pa===null){if(e===null)throw Error(n(308));Pa=a,e.dependencies={lanes:0,firstContext:a},e.flags|=524288}else Pa=Pa.next=a;return i}var gp=typeof AbortController!="undefined"?AbortController:function(){var e=[],a=this.signal={aborted:!1,addEventListener:function(i,o){e.push(o)}};this.abort=function(){a.aborted=!0,e.forEach(function(i){return i()})}},yp=s.unstable_scheduleCallback,pp=s.unstable_NormalPriority,yt={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sc(){return{controller:new gp,data:new Map,refCount:0}}function On(e){e.refCount--,e.refCount===0&&yp(pp,function(){e.controller.abort()})}var Dn=null,nc=0,xs=0,ws=null;function vp(e,a){if(Dn===null){var i=Dn=[];nc=0,xs=lu(),ws={status:"pending",value:void 0,then:function(o){i.push(o)}}}return nc++,a.then(Dh,Dh),a}function Dh(){if(--nc===0&&Dn!==null){ws!==null&&(ws.status="fulfilled");var e=Dn;Dn=null,xs=0,ws=null;for(var a=0;a<e.length;a++)(0,e[a])()}}function bp(e,a){var i=[],o={status:"pending",value:null,reason:null,then:function(d){i.push(d)}};return e.then(function(){o.status="fulfilled",o.value=a;for(var d=0;d<i.length;d++)(0,i[d])(a)},function(d){for(o.status="rejected",o.reason=d,d=0;d<i.length;d++)(0,i[d])(void 0)}),o}var Ah=H.S;H.S=function(e,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&vp(e,a),Ah!==null&&Ah(e,a)};var Br=ie(null);function ic(){var e=Br.current;return e!==null?e:Qe.pooledCache}function al(e,a){a===null?te(Br,Br.current):te(Br,a.pool)}function Rh(){var e=ic();return e===null?null:{parent:yt._currentValue,pool:e}}var An=Error(n(460)),kh=Error(n(474)),rl=Error(n(542)),lc={then:function(){}};function Mh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function sl(){}function Uh(e,a,i){switch(i=e[i],i===void 0?e.push(a):i!==a&&(a.then(sl,sl),a=i),a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,Lh(e),e;default:if(typeof a.status=="string")a.then(sl,sl);else{if(e=Qe,e!==null&&100<e.shellSuspendCounter)throw Error(n(482));e=a,e.status="pending",e.then(function(o){if(a.status==="pending"){var d=a;d.status="fulfilled",d.value=o}},function(o){if(a.status==="pending"){var d=a;d.status="rejected",d.reason=o}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,Lh(e),e}throw Rn=a,An}}var Rn=null;function qh(){if(Rn===null)throw Error(n(459));var e=Rn;return Rn=null,e}function Lh(e){if(e===An||e===rl)throw Error(n(483))}var rr=!1;function oc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cc(e,a){e=e.updateQueue,a.updateQueue===e&&(a.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function sr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function nr(e,a,i){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(ke&2)!==0){var d=o.pending;return d===null?a.next=a:(a.next=d.next,d.next=a),o.pending=a,a=Xi(e),_h(e,null,i),a}return Fi(e,o,a,i),Xi(e)}function kn(e,a,i){if(a=a.updateQueue,a!==null&&(a=a.shared,(i&4194048)!==0)){var o=a.lanes;o&=e.pendingLanes,i|=o,a.lanes=i,Dd(e,i)}}function uc(e,a){var i=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var d=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var v={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};f===null?d=f=v:f=f.next=v,i=i.next}while(i!==null);f===null?d=f=a:f=f.next=a}else d=f=a;i={baseState:o.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=a:e.next=a,i.lastBaseUpdate=a}var dc=!1;function Mn(){if(dc){var e=ws;if(e!==null)throw e}}function Un(e,a,i,o){dc=!1;var d=e.updateQueue;rr=!1;var f=d.firstBaseUpdate,v=d.lastBaseUpdate,w=d.shared.pending;if(w!==null){d.shared.pending=null;var E=w,L=E.next;E.next=null,v===null?f=L:v.next=L,v=E;var V=e.alternate;V!==null&&(V=V.updateQueue,w=V.lastBaseUpdate,w!==v&&(w===null?V.firstBaseUpdate=L:w.next=L,V.lastBaseUpdate=E))}if(f!==null){var F=d.baseState;v=0,V=L=E=null,w=f;do{var z=w.lane&-536870913,B=z!==w.lane;if(B?(Ee&z)===z:(o&z)===z){z!==0&&z===xs&&(dc=!0),V!==null&&(V=V.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var ge=e,ue=w;z=a;var $e=i;switch(ue.tag){case 1:if(ge=ue.payload,typeof ge=="function"){F=ge.call($e,F,z);break e}F=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=ue.payload,z=typeof ge=="function"?ge.call($e,F,z):ge,z==null)break e;F=p({},F,z);break e;case 2:rr=!0}}z=w.callback,z!==null&&(e.flags|=64,B&&(e.flags|=8192),B=d.callbacks,B===null?d.callbacks=[z]:B.push(z))}else B={lane:z,tag:w.tag,payload:w.payload,callback:w.callback,next:null},V===null?(L=V=B,E=F):V=V.next=B,v|=z;if(w=w.next,w===null){if(w=d.shared.pending,w===null)break;B=w,w=B.next,B.next=null,d.lastBaseUpdate=B,d.shared.pending=null}}while(!0);V===null&&(E=F),d.baseState=E,d.firstBaseUpdate=L,d.lastBaseUpdate=V,f===null&&(d.shared.lanes=0),fr|=v,e.lanes=v,e.memoizedState=F}}function zh(e,a){if(typeof e!="function")throw Error(n(191,e));e.call(a)}function Ph(e,a){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)zh(i[e],a)}var js=ie(null),nl=ie(0);function $h(e,a){e=Ga,te(nl,e),te(js,a),Ga=e|a.baseLanes}function hc(){te(nl,Ga),te(js,js.current)}function fc(){Ga=nl.current,se(js),se(nl)}var ir=0,xe=null,ze=null,ht=null,il=!1,_s=!1,Hr=!1,ll=0,qn=0,Ss=null,xp=0;function ot(){throw Error(n(321))}function mc(e,a){if(a===null)return!1;for(var i=0;i<a.length&&i<e.length;i++)if(!It(e[i],a[i]))return!1;return!0}function gc(e,a,i,o,d,f){return ir=f,xe=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,H.H=e===null||e.memoizedState===null?Sf:Nf,Hr=!1,f=i(o,d),Hr=!1,_s&&(f=Hh(a,i,o,d)),Bh(e),f}function Bh(e){H.H=fl;var a=ze!==null&&ze.next!==null;if(ir=0,ht=ze=xe=null,il=!1,qn=0,Ss=null,a)throw Error(n(300));e===null||jt||(e=e.dependencies,e!==null&&el(e)&&(jt=!0))}function Hh(e,a,i,o){xe=e;var d=0;do{if(_s&&(Ss=null),qn=0,_s=!1,25<=d)throw Error(n(301));if(d+=1,ht=ze=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}H.H=Ep,f=a(i,o)}while(_s);return f}function wp(){var e=H.H,a=e.useState()[0];return a=typeof a.then=="function"?Ln(a):a,e=e.useState()[0],(ze!==null?ze.memoizedState:null)!==e&&(xe.flags|=1024),a}function yc(){var e=ll!==0;return ll=0,e}function pc(e,a,i){a.updateQueue=e.updateQueue,a.flags&=-2053,e.lanes&=~i}function vc(e){if(il){for(e=e.memoizedState;e!==null;){var a=e.queue;a!==null&&(a.pending=null),e=e.next}il=!1}ir=0,ht=ze=xe=null,_s=!1,qn=ll=0,Ss=null}function zt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?xe.memoizedState=ht=e:ht=ht.next=e,ht}function ft(){if(ze===null){var e=xe.alternate;e=e!==null?e.memoizedState:null}else e=ze.next;var a=ht===null?xe.memoizedState:ht.next;if(a!==null)ht=a,ze=e;else{if(e===null)throw xe.alternate===null?Error(n(467)):Error(n(310));ze=e,e={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},ht===null?xe.memoizedState=ht=e:ht=ht.next=e}return ht}function bc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ln(e){var a=qn;return qn+=1,Ss===null&&(Ss=[]),e=Uh(Ss,e,a),a=xe,(ht===null?a.memoizedState:ht.next)===null&&(a=a.alternate,H.H=a===null||a.memoizedState===null?Sf:Nf),e}function ol(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ln(e);if(e.$$typeof===M)return Mt(e)}throw Error(n(438,String(e)))}function xc(e){var a=null,i=xe.updateQueue;if(i!==null&&(a=i.memoCache),a==null){var o=xe.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(a={data:o.data.map(function(d){return d.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),i===null&&(i=bc(),xe.updateQueue=i),i.memoCache=a,i=a.data[a.index],i===void 0)for(i=a.data[a.index]=Array(e),o=0;o<e;o++)i[o]=$;return a.index++,i}function Ba(e,a){return typeof a=="function"?a(e):a}function cl(e){var a=ft();return wc(a,ze,e)}function wc(e,a,i){var o=e.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=i;var d=e.baseQueue,f=o.pending;if(f!==null){if(d!==null){var v=d.next;d.next=f.next,f.next=v}a.baseQueue=d=f,o.pending=null}if(f=e.baseState,d===null)e.memoizedState=f;else{a=d.next;var w=v=null,E=null,L=a,V=!1;do{var F=L.lane&-536870913;if(F!==L.lane?(Ee&F)===F:(ir&F)===F){var z=L.revertLane;if(z===0)E!==null&&(E=E.next={lane:0,revertLane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),F===xs&&(V=!0);else if((ir&z)===z){L=L.next,z===xs&&(V=!0);continue}else F={lane:0,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},E===null?(w=E=F,v=f):E=E.next=F,xe.lanes|=z,fr|=z;F=L.action,Hr&&i(f,F),f=L.hasEagerState?L.eagerState:i(f,F)}else z={lane:F,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},E===null?(w=E=z,v=f):E=E.next=z,xe.lanes|=F,fr|=F;L=L.next}while(L!==null&&L!==a);if(E===null?v=f:E.next=w,!It(f,e.memoizedState)&&(jt=!0,V&&(i=ws,i!==null)))throw i;e.memoizedState=f,e.baseState=v,e.baseQueue=E,o.lastRenderedState=f}return d===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function jc(e){var a=ft(),i=a.queue;if(i===null)throw Error(n(311));i.lastRenderedReducer=e;var o=i.dispatch,d=i.pending,f=a.memoizedState;if(d!==null){i.pending=null;var v=d=d.next;do f=e(f,v.action),v=v.next;while(v!==d);It(f,a.memoizedState)||(jt=!0),a.memoizedState=f,a.baseQueue===null&&(a.baseState=f),i.lastRenderedState=f}return[f,o]}function Ih(e,a,i){var o=xe,d=ft(),f=Ae;if(f){if(i===void 0)throw Error(n(407));i=i()}else i=a();var v=!It((ze||d).memoizedState,i);v&&(d.memoizedState=i,jt=!0),d=d.queue;var w=Qh.bind(null,o,d,e);if(zn(2048,8,w,[e]),d.getSnapshot!==a||v||ht!==null&&ht.memoizedState.tag&1){if(o.flags|=2048,Ns(9,ul(),Vh.bind(null,o,d,i,a),null),Qe===null)throw Error(n(349));f||(ir&124)!==0||Yh(o,a,i)}return i}function Yh(e,a,i){e.flags|=16384,e={getSnapshot:a,value:i},a=xe.updateQueue,a===null?(a=bc(),xe.updateQueue=a,a.stores=[e]):(i=a.stores,i===null?a.stores=[e]:i.push(e))}function Vh(e,a,i,o){a.value=i,a.getSnapshot=o,Gh(a)&&Kh(e)}function Qh(e,a,i){return i(function(){Gh(a)&&Kh(e)})}function Gh(e){var a=e.getSnapshot;e=e.value;try{var i=a();return!It(e,i)}catch(o){return!0}}function Kh(e){var a=ys(e,2);a!==null&&Ft(a,e,2)}function _c(e){var a=zt();if(typeof e=="function"){var i=e;if(e=i(),Hr){xt(!0);try{i()}finally{xt(!1)}}}return a.memoizedState=a.baseState=e,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ba,lastRenderedState:e},a}function Fh(e,a,i,o){return e.baseState=i,wc(e,ze,typeof o=="function"?o:Ba)}function jp(e,a,i,o,d){if(hl(e))throw Error(n(485));if(e=a.action,e!==null){var f={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};H.T!==null?i(!0):f.isTransition=!1,o(f),i=a.pending,i===null?(f.next=a.pending=f,Xh(a,f)):(f.next=i.next,a.pending=i.next=f)}}function Xh(e,a){var i=a.action,o=a.payload,d=e.state;if(a.isTransition){var f=H.T,v={};H.T=v;try{var w=i(d,o),E=H.S;E!==null&&E(v,w),Wh(e,a,w)}catch(L){Sc(e,a,L)}finally{H.T=f}}else try{f=i(d,o),Wh(e,a,f)}catch(L){Sc(e,a,L)}}function Wh(e,a,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(o){Jh(e,a,o)},function(o){return Sc(e,a,o)}):Jh(e,a,i)}function Jh(e,a,i){a.status="fulfilled",a.value=i,Zh(a),e.state=i,a=e.pending,a!==null&&(i=a.next,i===a?e.pending=null:(i=i.next,a.next=i,Xh(e,i)))}function Sc(e,a,i){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do a.status="rejected",a.reason=i,Zh(a),a=a.next;while(a!==o)}e.action=null}function Zh(e){e=e.listeners;for(var a=0;a<e.length;a++)(0,e[a])()}function ef(e,a){return a}function tf(e,a){if(Ae){var i=Qe.formState;if(i!==null){e:{var o=xe;if(Ae){if(rt){t:{for(var d=rt,f=_a;d.nodeType!==8;){if(!f){d=null;break t}if(d=ya(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){rt=ya(d.nextSibling),o=d.data==="F!";break e}}zr(o)}o=!1}o&&(a=i[0])}}return i=zt(),i.memoizedState=i.baseState=a,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ef,lastRenderedState:a},i.queue=o,i=wf.bind(null,xe,o),o.dispatch=i,o=_c(!1),f=Oc.bind(null,xe,!1,o.queue),o=zt(),d={state:a,dispatch:null,action:e,pending:null},o.queue=d,i=jp.bind(null,xe,d,f,i),d.dispatch=i,o.memoizedState=e,[a,i,!1]}function af(e){var a=ft();return rf(a,ze,e)}function rf(e,a,i){if(a=wc(e,a,ef)[0],e=cl(Ba)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var o=Ln(a)}catch(v){throw v===An?rl:v}else o=a;a=ft();var d=a.queue,f=d.dispatch;return i!==a.memoizedState&&(xe.flags|=2048,Ns(9,ul(),_p.bind(null,d,i),null)),[o,f,e]}function _p(e,a){e.action=a}function sf(e){var a=ft(),i=ze;if(i!==null)return rf(a,i,e);ft(),a=a.memoizedState,i=ft();var o=i.queue.dispatch;return i.memoizedState=e,[a,o,!1]}function Ns(e,a,i,o){return e={tag:e,create:i,deps:o,inst:a,next:null},a=xe.updateQueue,a===null&&(a=bc(),xe.updateQueue=a),i=a.lastEffect,i===null?a.lastEffect=e.next=e:(o=i.next,i.next=e,e.next=o,a.lastEffect=e),e}function ul(){return{destroy:void 0,resource:void 0}}function nf(){return ft().memoizedState}function dl(e,a,i,o){var d=zt();o=o===void 0?null:o,xe.flags|=e,d.memoizedState=Ns(1|a,ul(),i,o)}function zn(e,a,i,o){var d=ft();o=o===void 0?null:o;var f=d.memoizedState.inst;ze!==null&&o!==null&&mc(o,ze.memoizedState.deps)?d.memoizedState=Ns(a,f,i,o):(xe.flags|=e,d.memoizedState=Ns(1|a,f,i,o))}function lf(e,a){dl(8390656,8,e,a)}function of(e,a){zn(2048,8,e,a)}function cf(e,a){return zn(4,2,e,a)}function uf(e,a){return zn(4,4,e,a)}function df(e,a){if(typeof a=="function"){e=e();var i=a(e);return function(){typeof i=="function"?i():a(null)}}if(a!=null)return e=e(),a.current=e,function(){a.current=null}}function hf(e,a,i){i=i!=null?i.concat([e]):null,zn(4,4,df.bind(null,a,e),i)}function Nc(){}function ff(e,a){var i=ft();a=a===void 0?null:a;var o=i.memoizedState;return a!==null&&mc(a,o[1])?o[0]:(i.memoizedState=[e,a],e)}function mf(e,a){var i=ft();a=a===void 0?null:a;var o=i.memoizedState;if(a!==null&&mc(a,o[1]))return o[0];if(o=e(),Hr){xt(!0);try{e()}finally{xt(!1)}}return i.memoizedState=[o,a],o}function Tc(e,a,i){return i===void 0||(ir&1073741824)!==0?e.memoizedState=a:(e.memoizedState=i,e=pm(),xe.lanes|=e,fr|=e,i)}function gf(e,a,i,o){return It(i,a)?i:js.current!==null?(e=Tc(e,i,o),It(e,a)||(jt=!0),e):(ir&42)===0?(jt=!0,e.memoizedState=i):(e=pm(),xe.lanes|=e,fr|=e,a)}function yf(e,a,i,o,d){var f=G.p;G.p=f!==0&&8>f?f:8;var v=H.T,w={};H.T=w,Oc(e,!1,a,i);try{var E=d(),L=H.S;if(L!==null&&L(w,E),E!==null&&typeof E=="object"&&typeof E.then=="function"){var V=bp(E,o);Pn(e,a,V,Kt(e))}else Pn(e,a,o,Kt(e))}catch(F){Pn(e,a,{then:function(){},status:"rejected",reason:F},Kt())}finally{G.p=f,H.T=v}}function Sp(){}function Ec(e,a,i,o){if(e.tag!==5)throw Error(n(476));var d=pf(e).queue;yf(e,d,a,X,i===null?Sp:function(){return vf(e),i(o)})}function pf(e){var a=e.memoizedState;if(a!==null)return a;a={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ba,lastRenderedState:X},next:null};var i={};return a.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ba,lastRenderedState:i},next:null},e.memoizedState=a,e=e.alternate,e!==null&&(e.memoizedState=a),a}function vf(e){var a=pf(e).next.queue;Pn(e,a,{},Kt())}function Cc(){return Mt(ri)}function bf(){return ft().memoizedState}function xf(){return ft().memoizedState}function Np(e){for(var a=e.return;a!==null;){switch(a.tag){case 24:case 3:var i=Kt();e=sr(i);var o=nr(a,e,i);o!==null&&(Ft(o,a,i),kn(o,a,i)),a={cache:sc()},e.payload=a;return}a=a.return}}function Tp(e,a,i){var o=Kt();i={lane:o,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},hl(e)?jf(a,i):(i=Ko(e,a,i,o),i!==null&&(Ft(i,e,o),_f(i,a,o)))}function wf(e,a,i){var o=Kt();Pn(e,a,i,o)}function Pn(e,a,i,o){var d={lane:o,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(hl(e))jf(a,d);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=a.lastRenderedReducer,f!==null))try{var v=a.lastRenderedState,w=f(v,i);if(d.hasEagerState=!0,d.eagerState=w,It(w,v))return Fi(e,a,d,0),Qe===null&&Ki(),!1}catch(E){}finally{}if(i=Ko(e,a,d,o),i!==null)return Ft(i,e,o),_f(i,a,o),!0}return!1}function Oc(e,a,i,o){if(o={lane:2,revertLane:lu(),action:o,hasEagerState:!1,eagerState:null,next:null},hl(e)){if(a)throw Error(n(479))}else a=Ko(e,i,o,2),a!==null&&Ft(a,e,2)}function hl(e){var a=e.alternate;return e===xe||a!==null&&a===xe}function jf(e,a){_s=il=!0;var i=e.pending;i===null?a.next=a:(a.next=i.next,i.next=a),e.pending=a}function _f(e,a,i){if((i&4194048)!==0){var o=a.lanes;o&=e.pendingLanes,i|=o,a.lanes=i,Dd(e,i)}}var fl={readContext:Mt,use:ol,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useLayoutEffect:ot,useInsertionEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useSyncExternalStore:ot,useId:ot,useHostTransitionStatus:ot,useFormState:ot,useActionState:ot,useOptimistic:ot,useMemoCache:ot,useCacheRefresh:ot},Sf={readContext:Mt,use:ol,useCallback:function(e,a){return zt().memoizedState=[e,a===void 0?null:a],e},useContext:Mt,useEffect:lf,useImperativeHandle:function(e,a,i){i=i!=null?i.concat([e]):null,dl(4194308,4,df.bind(null,a,e),i)},useLayoutEffect:function(e,a){return dl(4194308,4,e,a)},useInsertionEffect:function(e,a){dl(4,2,e,a)},useMemo:function(e,a){var i=zt();a=a===void 0?null:a;var o=e();if(Hr){xt(!0);try{e()}finally{xt(!1)}}return i.memoizedState=[o,a],o},useReducer:function(e,a,i){var o=zt();if(i!==void 0){var d=i(a);if(Hr){xt(!0);try{i(a)}finally{xt(!1)}}}else d=a;return o.memoizedState=o.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},o.queue=e,e=e.dispatch=Tp.bind(null,xe,e),[o.memoizedState,e]},useRef:function(e){var a=zt();return e={current:e},a.memoizedState=e},useState:function(e){e=_c(e);var a=e.queue,i=wf.bind(null,xe,a);return a.dispatch=i,[e.memoizedState,i]},useDebugValue:Nc,useDeferredValue:function(e,a){var i=zt();return Tc(i,e,a)},useTransition:function(){var e=_c(!1);return e=yf.bind(null,xe,e.queue,!0,!1),zt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,a,i){var o=xe,d=zt();if(Ae){if(i===void 0)throw Error(n(407));i=i()}else{if(i=a(),Qe===null)throw Error(n(349));(Ee&124)!==0||Yh(o,a,i)}d.memoizedState=i;var f={value:i,getSnapshot:a};return d.queue=f,lf(Qh.bind(null,o,f,e),[e]),o.flags|=2048,Ns(9,ul(),Vh.bind(null,o,f,i,a),null),i},useId:function(){var e=zt(),a=Qe.identifierPrefix;if(Ae){var i=za,o=La;i=(o&~(1<<32-Et(o)-1)).toString(32)+i,a=""+a+"R"+i,i=ll++,0<i&&(a+="H"+i.toString(32)),a+=""}else i=xp++,a=""+a+"r"+i.toString(32)+"";return e.memoizedState=a},useHostTransitionStatus:Cc,useFormState:tf,useActionState:tf,useOptimistic:function(e){var a=zt();a.memoizedState=a.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=i,a=Oc.bind(null,xe,!0,i),i.dispatch=a,[e,a]},useMemoCache:xc,useCacheRefresh:function(){return zt().memoizedState=Np.bind(null,xe)}},Nf={readContext:Mt,use:ol,useCallback:ff,useContext:Mt,useEffect:of,useImperativeHandle:hf,useInsertionEffect:cf,useLayoutEffect:uf,useMemo:mf,useReducer:cl,useRef:nf,useState:function(){return cl(Ba)},useDebugValue:Nc,useDeferredValue:function(e,a){var i=ft();return gf(i,ze.memoizedState,e,a)},useTransition:function(){var e=cl(Ba)[0],a=ft().memoizedState;return[typeof e=="boolean"?e:Ln(e),a]},useSyncExternalStore:Ih,useId:bf,useHostTransitionStatus:Cc,useFormState:af,useActionState:af,useOptimistic:function(e,a){var i=ft();return Fh(i,ze,e,a)},useMemoCache:xc,useCacheRefresh:xf},Ep={readContext:Mt,use:ol,useCallback:ff,useContext:Mt,useEffect:of,useImperativeHandle:hf,useInsertionEffect:cf,useLayoutEffect:uf,useMemo:mf,useReducer:jc,useRef:nf,useState:function(){return jc(Ba)},useDebugValue:Nc,useDeferredValue:function(e,a){var i=ft();return ze===null?Tc(i,e,a):gf(i,ze.memoizedState,e,a)},useTransition:function(){var e=jc(Ba)[0],a=ft().memoizedState;return[typeof e=="boolean"?e:Ln(e),a]},useSyncExternalStore:Ih,useId:bf,useHostTransitionStatus:Cc,useFormState:sf,useActionState:sf,useOptimistic:function(e,a){var i=ft();return ze!==null?Fh(i,ze,e,a):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:xc,useCacheRefresh:xf},Ts=null,$n=0;function ml(e){var a=$n;return $n+=1,Ts===null&&(Ts=[]),Uh(Ts,e,a)}function Bn(e,a){a=a.props.ref,e.ref=a!==void 0?a:null}function gl(e,a){throw a.$$typeof===b?Error(n(525)):(e=Object.prototype.toString.call(a),Error(n(31,e==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":e)))}function Tf(e){var a=e._init;return a(e._payload)}function Ef(e){function a(R,O){if(e){var U=R.deletions;U===null?(R.deletions=[O],R.flags|=16):U.push(O)}}function i(R,O){if(!e)return null;for(;O!==null;)a(R,O),O=O.sibling;return null}function o(R){for(var O=new Map;R!==null;)R.key!==null?O.set(R.key,R):O.set(R.index,R),R=R.sibling;return O}function d(R,O){return R=qa(R,O),R.index=0,R.sibling=null,R}function f(R,O,U){return R.index=U,e?(U=R.alternate,U!==null?(U=U.index,U<O?(R.flags|=67108866,O):U):(R.flags|=67108866,O)):(R.flags|=1048576,O)}function v(R){return e&&R.alternate===null&&(R.flags|=67108866),R}function w(R,O,U,K){return O===null||O.tag!==6?(O=Xo(U,R.mode,K),O.return=R,O):(O=d(O,U),O.return=R,O)}function E(R,O,U,K){var ne=U.type;return ne===S?V(R,O,U.props.children,K,U.key):O!==null&&(O.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===N&&Tf(ne)===O.type)?(O=d(O,U.props),Bn(O,U),O.return=R,O):(O=Wi(U.type,U.key,U.props,null,R.mode,K),Bn(O,U),O.return=R,O)}function L(R,O,U,K){return O===null||O.tag!==4||O.stateNode.containerInfo!==U.containerInfo||O.stateNode.implementation!==U.implementation?(O=Wo(U,R.mode,K),O.return=R,O):(O=d(O,U.children||[]),O.return=R,O)}function V(R,O,U,K,ne){return O===null||O.tag!==7?(O=Mr(U,R.mode,K,ne),O.return=R,O):(O=d(O,U),O.return=R,O)}function F(R,O,U){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=Xo(""+O,R.mode,U),O.return=R,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case x:return U=Wi(O.type,O.key,O.props,null,R.mode,U),Bn(U,O),U.return=R,U;case j:return O=Wo(O,R.mode,U),O.return=R,O;case N:var K=O._init;return O=K(O._payload),F(R,O,U)}if(ee(O)||W(O))return O=Mr(O,R.mode,U,null),O.return=R,O;if(typeof O.then=="function")return F(R,ml(O),U);if(O.$$typeof===M)return F(R,tl(R,O),U);gl(R,O)}return null}function z(R,O,U,K){var ne=O!==null?O.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return ne!==null?null:w(R,O,""+U,K);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case x:return U.key===ne?E(R,O,U,K):null;case j:return U.key===ne?L(R,O,U,K):null;case N:return ne=U._init,U=ne(U._payload),z(R,O,U,K)}if(ee(U)||W(U))return ne!==null?null:V(R,O,U,K,null);if(typeof U.then=="function")return z(R,O,ml(U),K);if(U.$$typeof===M)return z(R,O,tl(R,U),K);gl(R,U)}return null}function B(R,O,U,K,ne){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return R=R.get(U)||null,w(O,R,""+K,ne);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case x:return R=R.get(K.key===null?U:K.key)||null,E(O,R,K,ne);case j:return R=R.get(K.key===null?U:K.key)||null,L(O,R,K,ne);case N:var je=K._init;return K=je(K._payload),B(R,O,U,K,ne)}if(ee(K)||W(K))return R=R.get(U)||null,V(O,R,K,ne,null);if(typeof K.then=="function")return B(R,O,U,ml(K),ne);if(K.$$typeof===M)return B(R,O,U,tl(O,K),ne);gl(O,K)}return null}function ge(R,O,U,K){for(var ne=null,je=null,ce=O,de=O=0,St=null;ce!==null&&de<U.length;de++){ce.index>de?(St=ce,ce=null):St=ce.sibling;var Ce=z(R,ce,U[de],K);if(Ce===null){ce===null&&(ce=St);break}e&&ce&&Ce.alternate===null&&a(R,ce),O=f(Ce,O,de),je===null?ne=Ce:je.sibling=Ce,je=Ce,ce=St}if(de===U.length)return i(R,ce),Ae&&qr(R,de),ne;if(ce===null){for(;de<U.length;de++)ce=F(R,U[de],K),ce!==null&&(O=f(ce,O,de),je===null?ne=ce:je.sibling=ce,je=ce);return Ae&&qr(R,de),ne}for(ce=o(ce);de<U.length;de++)St=B(ce,R,de,U[de],K),St!==null&&(e&&St.alternate!==null&&ce.delete(St.key===null?de:St.key),O=f(St,O,de),je===null?ne=St:je.sibling=St,je=St);return e&&ce.forEach(function(jr){return a(R,jr)}),Ae&&qr(R,de),ne}function ue(R,O,U,K){if(U==null)throw Error(n(151));for(var ne=null,je=null,ce=O,de=O=0,St=null,Ce=U.next();ce!==null&&!Ce.done;de++,Ce=U.next()){ce.index>de?(St=ce,ce=null):St=ce.sibling;var jr=z(R,ce,Ce.value,K);if(jr===null){ce===null&&(ce=St);break}e&&ce&&jr.alternate===null&&a(R,ce),O=f(jr,O,de),je===null?ne=jr:je.sibling=jr,je=jr,ce=St}if(Ce.done)return i(R,ce),Ae&&qr(R,de),ne;if(ce===null){for(;!Ce.done;de++,Ce=U.next())Ce=F(R,Ce.value,K),Ce!==null&&(O=f(Ce,O,de),je===null?ne=Ce:je.sibling=Ce,je=Ce);return Ae&&qr(R,de),ne}for(ce=o(ce);!Ce.done;de++,Ce=U.next())Ce=B(ce,R,de,Ce.value,K),Ce!==null&&(e&&Ce.alternate!==null&&ce.delete(Ce.key===null?de:Ce.key),O=f(Ce,O,de),je===null?ne=Ce:je.sibling=Ce,je=Ce);return e&&ce.forEach(function(Cv){return a(R,Cv)}),Ae&&qr(R,de),ne}function $e(R,O,U,K){if(typeof U=="object"&&U!==null&&U.type===S&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case x:e:{for(var ne=U.key;O!==null;){if(O.key===ne){if(ne=U.type,ne===S){if(O.tag===7){i(R,O.sibling),K=d(O,U.props.children),K.return=R,R=K;break e}}else if(O.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===N&&Tf(ne)===O.type){i(R,O.sibling),K=d(O,U.props),Bn(K,U),K.return=R,R=K;break e}i(R,O);break}else a(R,O);O=O.sibling}U.type===S?(K=Mr(U.props.children,R.mode,K,U.key),K.return=R,R=K):(K=Wi(U.type,U.key,U.props,null,R.mode,K),Bn(K,U),K.return=R,R=K)}return v(R);case j:e:{for(ne=U.key;O!==null;){if(O.key===ne)if(O.tag===4&&O.stateNode.containerInfo===U.containerInfo&&O.stateNode.implementation===U.implementation){i(R,O.sibling),K=d(O,U.children||[]),K.return=R,R=K;break e}else{i(R,O);break}else a(R,O);O=O.sibling}K=Wo(U,R.mode,K),K.return=R,R=K}return v(R);case N:return ne=U._init,U=ne(U._payload),$e(R,O,U,K)}if(ee(U))return ge(R,O,U,K);if(W(U)){if(ne=W(U),typeof ne!="function")throw Error(n(150));return U=ne.call(U),ue(R,O,U,K)}if(typeof U.then=="function")return $e(R,O,ml(U),K);if(U.$$typeof===M)return $e(R,O,tl(R,U),K);gl(R,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,O!==null&&O.tag===6?(i(R,O.sibling),K=d(O,U),K.return=R,R=K):(i(R,O),K=Xo(U,R.mode,K),K.return=R,R=K),v(R)):i(R,O)}return function(R,O,U,K){try{$n=0;var ne=$e(R,O,U,K);return Ts=null,ne}catch(ce){if(ce===An||ce===rl)throw ce;var je=Yt(29,ce,null,R.mode);return je.lanes=K,je.return=R,je}finally{}}}var Es=Ef(!0),Cf=Ef(!1),ca=ie(null),Sa=null;function lr(e){var a=e.alternate;te(pt,pt.current&1),te(ca,e),Sa===null&&(a===null||js.current!==null||a.memoizedState!==null)&&(Sa=e)}function Of(e){if(e.tag===22){if(te(pt,pt.current),te(ca,e),Sa===null){var a=e.alternate;a!==null&&a.memoizedState!==null&&(Sa=e)}}else or()}function or(){te(pt,pt.current),te(ca,ca.current)}function Ha(e){se(ca),Sa===e&&(Sa=null),se(pt)}var pt=ie(0);function yl(e){for(var a=e;a!==null;){if(a.tag===13){var i=a.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||bu(i)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function Dc(e,a,i,o){a=e.memoizedState,i=i(o,a),i=i==null?a:p({},a,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Ac={enqueueSetState:function(e,a,i){e=e._reactInternals;var o=Kt(),d=sr(o);d.payload=a,i!=null&&(d.callback=i),a=nr(e,d,o),a!==null&&(Ft(a,e,o),kn(a,e,o))},enqueueReplaceState:function(e,a,i){e=e._reactInternals;var o=Kt(),d=sr(o);d.tag=1,d.payload=a,i!=null&&(d.callback=i),a=nr(e,d,o),a!==null&&(Ft(a,e,o),kn(a,e,o))},enqueueForceUpdate:function(e,a){e=e._reactInternals;var i=Kt(),o=sr(i);o.tag=2,a!=null&&(o.callback=a),a=nr(e,o,i),a!==null&&(Ft(a,e,i),kn(a,e,i))}};function Df(e,a,i,o,d,f,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,v):a.prototype&&a.prototype.isPureReactComponent?!_n(i,o)||!_n(d,f):!0}function Af(e,a,i,o){e=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(i,o),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(i,o),a.state!==e&&Ac.enqueueReplaceState(a,a.state,null)}function Ir(e,a){var i=a;if("ref"in a){i={};for(var o in a)o!=="ref"&&(i[o]=a[o])}if(e=e.defaultProps){i===a&&(i=p({},i));for(var d in e)i[d]===void 0&&(i[d]=e[d])}return i}var pl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Rf(e){pl(e)}function kf(e){console.error(e)}function Mf(e){pl(e)}function vl(e,a){try{var i=e.onUncaughtError;i(a.value,{componentStack:a.stack})}catch(o){setTimeout(function(){throw o})}}function Uf(e,a,i){try{var o=e.onCaughtError;o(i.value,{componentStack:i.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Rc(e,a,i){return i=sr(i),i.tag=3,i.payload={element:null},i.callback=function(){vl(e,a)},i}function qf(e){return e=sr(e),e.tag=3,e}function Lf(e,a,i,o){var d=i.type.getDerivedStateFromError;if(typeof d=="function"){var f=o.value;e.payload=function(){return d(f)},e.callback=function(){Uf(a,i,o)}}var v=i.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Uf(a,i,o),typeof d!="function"&&(mr===null?mr=new Set([this]):mr.add(this));var w=o.stack;this.componentDidCatch(o.value,{componentStack:w!==null?w:""})})}function Cp(e,a,i,o,d){if(i.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(a=i.alternate,a!==null&&Cn(a,i,d,!0),i=ca.current,i!==null){switch(i.tag){case 13:return Sa===null?au():i.alternate===null&&st===0&&(st=3),i.flags&=-257,i.flags|=65536,i.lanes=d,o===lc?i.flags|=16384:(a=i.updateQueue,a===null?i.updateQueue=new Set([o]):a.add(o),su(e,o,d)),!1;case 22:return i.flags|=65536,o===lc?i.flags|=16384:(a=i.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([o])},i.updateQueue=a):(i=a.retryQueue,i===null?a.retryQueue=new Set([o]):i.add(o)),su(e,o,d)),!1}throw Error(n(435,i.tag))}return su(e,o,d),au(),!1}if(Ae)return a=ca.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=d,o!==ec&&(e=Error(n(422),{cause:o}),En(na(e,i)))):(o!==ec&&(a=Error(n(423),{cause:o}),En(na(a,i))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,o=na(o,i),d=Rc(e.stateNode,o,d),uc(e,d),st!==4&&(st=2)),!1;var f=Error(n(520),{cause:o});if(f=na(f,i),Kn===null?Kn=[f]:Kn.push(f),st!==4&&(st=2),a===null)return!0;o=na(o,i),i=a;do{switch(i.tag){case 3:return i.flags|=65536,e=d&-d,i.lanes|=e,e=Rc(i.stateNode,o,e),uc(i,e),!1;case 1:if(a=i.type,f=i.stateNode,(i.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(mr===null||!mr.has(f))))return i.flags|=65536,d&=-d,i.lanes|=d,d=qf(d),Lf(d,e,i,o),uc(i,d),!1}i=i.return}while(i!==null);return!1}var zf=Error(n(461)),jt=!1;function Ct(e,a,i,o){a.child=e===null?Cf(a,null,i,o):Es(a,e.child,i,o)}function Pf(e,a,i,o,d){i=i.render;var f=a.ref;if("ref"in o){var v={};for(var w in o)w!=="ref"&&(v[w]=o[w])}else v=o;return $r(a),o=gc(e,a,i,v,f,d),w=yc(),e!==null&&!jt?(pc(e,a,d),Ia(e,a,d)):(Ae&&w&&Jo(a),a.flags|=1,Ct(e,a,o,d),a.child)}function $f(e,a,i,o,d){if(e===null){var f=i.type;return typeof f=="function"&&!Fo(f)&&f.defaultProps===void 0&&i.compare===null?(a.tag=15,a.type=f,Bf(e,a,f,o,d)):(e=Wi(i.type,null,o,a,a.mode,d),e.ref=a.ref,e.return=a,a.child=e)}if(f=e.child,!$c(e,d)){var v=f.memoizedProps;if(i=i.compare,i=i!==null?i:_n,i(v,o)&&e.ref===a.ref)return Ia(e,a,d)}return a.flags|=1,e=qa(f,o),e.ref=a.ref,e.return=a,a.child=e}function Bf(e,a,i,o,d){if(e!==null){var f=e.memoizedProps;if(_n(f,o)&&e.ref===a.ref)if(jt=!1,a.pendingProps=o=f,$c(e,d))(e.flags&131072)!==0&&(jt=!0);else return a.lanes=e.lanes,Ia(e,a,d)}return kc(e,a,i,o,d)}function Hf(e,a,i){var o=a.pendingProps,d=o.children,f=e!==null?e.memoizedState:null;if(o.mode==="hidden"){if((a.flags&128)!==0){if(o=f!==null?f.baseLanes|i:i,e!==null){for(d=a.child=e.child,f=0;d!==null;)f=f|d.lanes|d.childLanes,d=d.sibling;a.childLanes=f&~o}else a.childLanes=0,a.child=null;return If(e,a,o,i)}if((i&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},e!==null&&al(a,f!==null?f.cachePool:null),f!==null?$h(a,f):hc(),Of(a);else return a.lanes=a.childLanes=536870912,If(e,a,f!==null?f.baseLanes|i:i,i)}else f!==null?(al(a,f.cachePool),$h(a,f),or(),a.memoizedState=null):(e!==null&&al(a,null),hc(),or());return Ct(e,a,d,i),a.child}function If(e,a,i,o){var d=ic();return d=d===null?null:{parent:yt._currentValue,pool:d},a.memoizedState={baseLanes:i,cachePool:d},e!==null&&al(a,null),hc(),Of(a),e!==null&&Cn(e,a,o,!0),null}function bl(e,a){var i=a.ref;if(i===null)e!==null&&e.ref!==null&&(a.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(n(284));(e===null||e.ref!==i)&&(a.flags|=4194816)}}function kc(e,a,i,o,d){return $r(a),i=gc(e,a,i,o,void 0,d),o=yc(),e!==null&&!jt?(pc(e,a,d),Ia(e,a,d)):(Ae&&o&&Jo(a),a.flags|=1,Ct(e,a,i,d),a.child)}function Yf(e,a,i,o,d,f){return $r(a),a.updateQueue=null,i=Hh(a,o,i,d),Bh(e),o=yc(),e!==null&&!jt?(pc(e,a,f),Ia(e,a,f)):(Ae&&o&&Jo(a),a.flags|=1,Ct(e,a,i,f),a.child)}function Vf(e,a,i,o,d){if($r(a),a.stateNode===null){var f=ps,v=i.contextType;typeof v=="object"&&v!==null&&(f=Mt(v)),f=new i(o,f),a.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Ac,a.stateNode=f,f._reactInternals=a,f=a.stateNode,f.props=o,f.state=a.memoizedState,f.refs={},oc(a),v=i.contextType,f.context=typeof v=="object"&&v!==null?Mt(v):ps,f.state=a.memoizedState,v=i.getDerivedStateFromProps,typeof v=="function"&&(Dc(a,i,v,o),f.state=a.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&Ac.enqueueReplaceState(f,f.state,null),Un(a,o,f,d),Mn(),f.state=a.memoizedState),typeof f.componentDidMount=="function"&&(a.flags|=4194308),o=!0}else if(e===null){f=a.stateNode;var w=a.memoizedProps,E=Ir(i,w);f.props=E;var L=f.context,V=i.contextType;v=ps,typeof V=="object"&&V!==null&&(v=Mt(V));var F=i.getDerivedStateFromProps;V=typeof F=="function"||typeof f.getSnapshotBeforeUpdate=="function",w=a.pendingProps!==w,V||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(w||L!==v)&&Af(a,f,o,v),rr=!1;var z=a.memoizedState;f.state=z,Un(a,o,f,d),Mn(),L=a.memoizedState,w||z!==L||rr?(typeof F=="function"&&(Dc(a,i,F,o),L=a.memoizedState),(E=rr||Df(a,i,E,o,z,L,v))?(V||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(a.flags|=4194308)):(typeof f.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=o,a.memoizedState=L),f.props=o,f.state=L,f.context=v,o=E):(typeof f.componentDidMount=="function"&&(a.flags|=4194308),o=!1)}else{f=a.stateNode,cc(e,a),v=a.memoizedProps,V=Ir(i,v),f.props=V,F=a.pendingProps,z=f.context,L=i.contextType,E=ps,typeof L=="object"&&L!==null&&(E=Mt(L)),w=i.getDerivedStateFromProps,(L=typeof w=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==F||z!==E)&&Af(a,f,o,E),rr=!1,z=a.memoizedState,f.state=z,Un(a,o,f,d),Mn();var B=a.memoizedState;v!==F||z!==B||rr||e!==null&&e.dependencies!==null&&el(e.dependencies)?(typeof w=="function"&&(Dc(a,i,w,o),B=a.memoizedState),(V=rr||Df(a,i,V,o,z,B,E)||e!==null&&e.dependencies!==null&&el(e.dependencies))?(L||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,B,E),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,B,E)),typeof f.componentDidUpdate=="function"&&(a.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(a.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(a.flags|=1024),a.memoizedProps=o,a.memoizedState=B),f.props=o,f.state=B,f.context=E,o=V):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(a.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(a.flags|=1024),o=!1)}return f=o,bl(e,a),o=(a.flags&128)!==0,f||o?(f=a.stateNode,i=o&&typeof i.getDerivedStateFromError!="function"?null:f.render(),a.flags|=1,e!==null&&o?(a.child=Es(a,e.child,null,d),a.child=Es(a,null,i,d)):Ct(e,a,i,d),a.memoizedState=f.state,e=a.child):e=Ia(e,a,d),e}function Qf(e,a,i,o){return Tn(),a.flags|=256,Ct(e,a,i,o),a.child}var Mc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Uc(e){return{baseLanes:e,cachePool:Rh()}}function qc(e,a,i){return e=e!==null?e.childLanes&~i:0,a&&(e|=ua),e}function Gf(e,a,i){var o=a.pendingProps,d=!1,f=(a.flags&128)!==0,v;if((v=f)||(v=e!==null&&e.memoizedState===null?!1:(pt.current&2)!==0),v&&(d=!0,a.flags&=-129),v=(a.flags&32)!==0,a.flags&=-33,e===null){if(Ae){if(d?lr(a):or(),Ae){var w=rt,E;if(E=w){e:{for(E=w,w=_a;E.nodeType!==8;){if(!w){w=null;break e}if(E=ya(E.nextSibling),E===null){w=null;break e}}w=E}w!==null?(a.memoizedState={dehydrated:w,treeContext:Ur!==null?{id:La,overflow:za}:null,retryLane:536870912,hydrationErrors:null},E=Yt(18,null,null,0),E.stateNode=w,E.return=a,a.child=E,Ut=a,rt=null,E=!0):E=!1}E||zr(a)}if(w=a.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return bu(w)?a.lanes=32:a.lanes=536870912,null;Ha(a)}return w=o.children,o=o.fallback,d?(or(),d=a.mode,w=xl({mode:"hidden",children:w},d),o=Mr(o,d,i,null),w.return=a,o.return=a,w.sibling=o,a.child=w,d=a.child,d.memoizedState=Uc(i),d.childLanes=qc(e,v,i),a.memoizedState=Mc,o):(lr(a),Lc(a,w))}if(E=e.memoizedState,E!==null&&(w=E.dehydrated,w!==null)){if(f)a.flags&256?(lr(a),a.flags&=-257,a=zc(e,a,i)):a.memoizedState!==null?(or(),a.child=e.child,a.flags|=128,a=null):(or(),d=o.fallback,w=a.mode,o=xl({mode:"visible",children:o.children},w),d=Mr(d,w,i,null),d.flags|=2,o.return=a,d.return=a,o.sibling=d,a.child=o,Es(a,e.child,null,i),o=a.child,o.memoizedState=Uc(i),o.childLanes=qc(e,v,i),a.memoizedState=Mc,a=d);else if(lr(a),bu(w)){if(v=w.nextSibling&&w.nextSibling.dataset,v)var L=v.dgst;v=L,o=Error(n(419)),o.stack="",o.digest=v,En({value:o,source:null,stack:null}),a=zc(e,a,i)}else if(jt||Cn(e,a,i,!1),v=(i&e.childLanes)!==0,jt||v){if(v=Qe,v!==null&&(o=i&-i,o=(o&42)!==0?1:xo(o),o=(o&(v.suspendedLanes|i))!==0?0:o,o!==0&&o!==E.retryLane))throw E.retryLane=o,ys(e,o),Ft(v,e,o),zf;w.data==="$?"||au(),a=zc(e,a,i)}else w.data==="$?"?(a.flags|=192,a.child=e.child,a=null):(e=E.treeContext,rt=ya(w.nextSibling),Ut=a,Ae=!0,Lr=null,_a=!1,e!==null&&(la[oa++]=La,la[oa++]=za,la[oa++]=Ur,La=e.id,za=e.overflow,Ur=a),a=Lc(a,o.children),a.flags|=4096);return a}return d?(or(),d=o.fallback,w=a.mode,E=e.child,L=E.sibling,o=qa(E,{mode:"hidden",children:o.children}),o.subtreeFlags=E.subtreeFlags&65011712,L!==null?d=qa(L,d):(d=Mr(d,w,i,null),d.flags|=2),d.return=a,o.return=a,o.sibling=d,a.child=o,o=d,d=a.child,w=e.child.memoizedState,w===null?w=Uc(i):(E=w.cachePool,E!==null?(L=yt._currentValue,E=E.parent!==L?{parent:L,pool:L}:E):E=Rh(),w={baseLanes:w.baseLanes|i,cachePool:E}),d.memoizedState=w,d.childLanes=qc(e,v,i),a.memoizedState=Mc,o):(lr(a),i=e.child,e=i.sibling,i=qa(i,{mode:"visible",children:o.children}),i.return=a,i.sibling=null,e!==null&&(v=a.deletions,v===null?(a.deletions=[e],a.flags|=16):v.push(e)),a.child=i,a.memoizedState=null,i)}function Lc(e,a){return a=xl({mode:"visible",children:a},e.mode),a.return=e,e.child=a}function xl(e,a){return e=Yt(22,e,null,a),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function zc(e,a,i){return Es(a,e.child,null,i),e=Lc(a,a.pendingProps.children),e.flags|=2,a.memoizedState=null,e}function Kf(e,a,i){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a),ac(e.return,a,i)}function Pc(e,a,i,o,d){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:d}:(f.isBackwards=a,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=i,f.tailMode=d)}function Ff(e,a,i){var o=a.pendingProps,d=o.revealOrder,f=o.tail;if(Ct(e,a,o.children,i),o=pt.current,(o&2)!==0)o=o&1|2,a.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=a.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Kf(e,i,a);else if(e.tag===19)Kf(e,i,a);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===a)break e;for(;e.sibling===null;){if(e.return===null||e.return===a)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}switch(te(pt,o),d){case"forwards":for(i=a.child,d=null;i!==null;)e=i.alternate,e!==null&&yl(e)===null&&(d=i),i=i.sibling;i=d,i===null?(d=a.child,a.child=null):(d=i.sibling,i.sibling=null),Pc(a,!1,d,i,f);break;case"backwards":for(i=null,d=a.child,a.child=null;d!==null;){if(e=d.alternate,e!==null&&yl(e)===null){a.child=d;break}e=d.sibling,d.sibling=i,i=d,d=e}Pc(a,!0,i,null,f);break;case"together":Pc(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Ia(e,a,i){if(e!==null&&(a.dependencies=e.dependencies),fr|=a.lanes,(i&a.childLanes)===0)if(e!==null){if(Cn(e,a,i,!1),(i&a.childLanes)===0)return null}else return null;if(e!==null&&a.child!==e.child)throw Error(n(153));if(a.child!==null){for(e=a.child,i=qa(e,e.pendingProps),a.child=i,i.return=a;e.sibling!==null;)e=e.sibling,i=i.sibling=qa(e,e.pendingProps),i.return=a;i.sibling=null}return a.child}function $c(e,a){return(e.lanes&a)!==0?!0:(e=e.dependencies,!!(e!==null&&el(e)))}function Op(e,a,i){switch(a.tag){case 3:be(a,a.stateNode.containerInfo),ar(a,yt,e.memoizedState.cache),Tn();break;case 27:case 5:Ie(a);break;case 4:be(a,a.stateNode.containerInfo);break;case 10:ar(a,a.type,a.memoizedProps.value);break;case 13:var o=a.memoizedState;if(o!==null)return o.dehydrated!==null?(lr(a),a.flags|=128,null):(i&a.child.childLanes)!==0?Gf(e,a,i):(lr(a),e=Ia(e,a,i),e!==null?e.sibling:null);lr(a);break;case 19:var d=(e.flags&128)!==0;if(o=(i&a.childLanes)!==0,o||(Cn(e,a,i,!1),o=(i&a.childLanes)!==0),d){if(o)return Ff(e,a,i);a.flags|=128}if(d=a.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),te(pt,pt.current),o)break;return null;case 22:case 23:return a.lanes=0,Hf(e,a,i);case 24:ar(a,yt,e.memoizedState.cache)}return Ia(e,a,i)}function Xf(e,a,i){if(e!==null)if(e.memoizedProps!==a.pendingProps)jt=!0;else{if(!$c(e,i)&&(a.flags&128)===0)return jt=!1,Op(e,a,i);jt=(e.flags&131072)!==0}else jt=!1,Ae&&(a.flags&1048576)!==0&&Nh(a,Zi,a.index);switch(a.lanes=0,a.tag){case 16:e:{e=a.pendingProps;var o=a.elementType,d=o._init;if(o=d(o._payload),a.type=o,typeof o=="function")Fo(o)?(e=Ir(o,e),a.tag=1,a=Vf(null,a,o,e,i)):(a.tag=0,a=kc(null,a,o,e,i));else{if(o!=null){if(d=o.$$typeof,d===Q){a.tag=11,a=Pf(null,a,o,e,i);break e}else if(d===Y){a.tag=14,a=$f(null,a,o,e,i);break e}}throw a=Te(o)||o,Error(n(306,a,""))}}return a;case 0:return kc(e,a,a.type,a.pendingProps,i);case 1:return o=a.type,d=Ir(o,a.pendingProps),Vf(e,a,o,d,i);case 3:e:{if(be(a,a.stateNode.containerInfo),e===null)throw Error(n(387));o=a.pendingProps;var f=a.memoizedState;d=f.element,cc(e,a),Un(a,o,null,i);var v=a.memoizedState;if(o=v.cache,ar(a,yt,o),o!==f.cache&&rc(a,[yt],i,!0),Mn(),o=v.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:v.cache},a.updateQueue.baseState=f,a.memoizedState=f,a.flags&256){a=Qf(e,a,o,i);break e}else if(o!==d){d=na(Error(n(424)),a),En(d),a=Qf(e,a,o,i);break e}else{switch(e=a.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(rt=ya(e.firstChild),Ut=a,Ae=!0,Lr=null,_a=!0,i=Cf(a,null,o,i),a.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(Tn(),o===d){a=Ia(e,a,i);break e}Ct(e,a,o,i)}a=a.child}return a;case 26:return bl(e,a),e===null?(i=eg(a.type,null,a.pendingProps,null))?a.memoizedState=i:Ae||(i=a.type,e=a.pendingProps,o=Ml(He.current).createElement(i),o[kt]=a,o[qt]=e,Dt(o,i,e),wt(o),a.stateNode=o):a.memoizedState=eg(a.type,e.memoizedProps,a.pendingProps,e.memoizedState),null;case 27:return Ie(a),e===null&&Ae&&(o=a.stateNode=Wm(a.type,a.pendingProps,He.current),Ut=a,_a=!0,d=rt,pr(a.type)?(xu=d,rt=ya(o.firstChild)):rt=d),Ct(e,a,a.pendingProps.children,i),bl(e,a),e===null&&(a.flags|=4194304),a.child;case 5:return e===null&&Ae&&((d=o=rt)&&(o=rv(o,a.type,a.pendingProps,_a),o!==null?(a.stateNode=o,Ut=a,rt=ya(o.firstChild),_a=!1,d=!0):d=!1),d||zr(a)),Ie(a),d=a.type,f=a.pendingProps,v=e!==null?e.memoizedProps:null,o=f.children,yu(d,f)?o=null:v!==null&&yu(d,v)&&(a.flags|=32),a.memoizedState!==null&&(d=gc(e,a,wp,null,null,i),ri._currentValue=d),bl(e,a),Ct(e,a,o,i),a.child;case 6:return e===null&&Ae&&((e=i=rt)&&(i=sv(i,a.pendingProps,_a),i!==null?(a.stateNode=i,Ut=a,rt=null,e=!0):e=!1),e||zr(a)),null;case 13:return Gf(e,a,i);case 4:return be(a,a.stateNode.containerInfo),o=a.pendingProps,e===null?a.child=Es(a,null,o,i):Ct(e,a,o,i),a.child;case 11:return Pf(e,a,a.type,a.pendingProps,i);case 7:return Ct(e,a,a.pendingProps,i),a.child;case 8:return Ct(e,a,a.pendingProps.children,i),a.child;case 12:return Ct(e,a,a.pendingProps.children,i),a.child;case 10:return o=a.pendingProps,ar(a,a.type,o.value),Ct(e,a,o.children,i),a.child;case 9:return d=a.type._context,o=a.pendingProps.children,$r(a),d=Mt(d),o=o(d),a.flags|=1,Ct(e,a,o,i),a.child;case 14:return $f(e,a,a.type,a.pendingProps,i);case 15:return Bf(e,a,a.type,a.pendingProps,i);case 19:return Ff(e,a,i);case 31:return o=a.pendingProps,i=a.mode,o={mode:o.mode,children:o.children},e===null?(i=xl(o,i),i.ref=a.ref,a.child=i,i.return=a,a=i):(i=qa(e.child,o),i.ref=a.ref,a.child=i,i.return=a,a=i),a;case 22:return Hf(e,a,i);case 24:return $r(a),o=Mt(yt),e===null?(d=ic(),d===null&&(d=Qe,f=sc(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=i),d=f),a.memoizedState={parent:o,cache:d},oc(a),ar(a,yt,d)):((e.lanes&i)!==0&&(cc(e,a),Un(a,null,null,i),Mn()),d=e.memoizedState,f=a.memoizedState,d.parent!==o?(d={parent:o,cache:o},a.memoizedState=d,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=d),ar(a,yt,o)):(o=f.cache,ar(a,yt,o),o!==d.cache&&rc(a,[yt],i,!0))),Ct(e,a,a.pendingProps.children,i),a.child;case 29:throw a.pendingProps}throw Error(n(156,a.tag))}function Ya(e){e.flags|=4}function Wf(e,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!ng(a)){if(a=ca.current,a!==null&&((Ee&4194048)===Ee?Sa!==null:(Ee&62914560)!==Ee&&(Ee&536870912)===0||a!==Sa))throw Rn=lc,kh;e.flags|=8192}}function wl(e,a){a!==null&&(e.flags|=4),e.flags&16384&&(a=e.tag!==22?Cd():536870912,e.lanes|=a,As|=a)}function Hn(e,a){if(!Ae)switch(e.tailMode){case"hidden":a=e.tail;for(var i=null;a!==null;)a.alternate!==null&&(i=a),a=a.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?a||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Je(e){var a=e.alternate!==null&&e.alternate.child===e.child,i=0,o=0;if(a)for(var d=e.child;d!==null;)i|=d.lanes|d.childLanes,o|=d.subtreeFlags&65011712,o|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)i|=d.lanes|d.childLanes,o|=d.subtreeFlags,o|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=o,e.childLanes=i,a}function Dp(e,a,i){var o=a.pendingProps;switch(Zo(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(a),null;case 1:return Je(a),null;case 3:return i=a.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),a.memoizedState.cache!==o&&(a.flags|=2048),$a(yt),we(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Nn(a)?Ya(a):e===null||e.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Ch())),Je(a),null;case 26:return i=a.memoizedState,e===null?(Ya(a),i!==null?(Je(a),Wf(a,i)):(Je(a),a.flags&=-16777217)):i?i!==e.memoizedState?(Ya(a),Je(a),Wf(a,i)):(Je(a),a.flags&=-16777217):(e.memoizedProps!==o&&Ya(a),Je(a),a.flags&=-16777217),null;case 27:me(a),i=He.current;var d=a.type;if(e!==null&&a.stateNode!=null)e.memoizedProps!==o&&Ya(a);else{if(!o){if(a.stateNode===null)throw Error(n(166));return Je(a),null}e=ve.current,Nn(a)?Th(a):(e=Wm(d,o,i),a.stateNode=e,Ya(a))}return Je(a),null;case 5:if(me(a),i=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==o&&Ya(a);else{if(!o){if(a.stateNode===null)throw Error(n(166));return Je(a),null}if(e=ve.current,Nn(a))Th(a);else{switch(d=Ml(He.current),e){case 1:e=d.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:e=d.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":e=d.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":e=d.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof o.is=="string"?d.createElement("select",{is:o.is}):d.createElement("select"),o.multiple?e.multiple=!0:o.size&&(e.size=o.size);break;default:e=typeof o.is=="string"?d.createElement(i,{is:o.is}):d.createElement(i)}}e[kt]=a,e[qt]=o;e:for(d=a.child;d!==null;){if(d.tag===5||d.tag===6)e.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break e;for(;d.sibling===null;){if(d.return===null||d.return===a)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}a.stateNode=e;e:switch(Dt(e,i,o),i){case"button":case"input":case"select":case"textarea":e=!!o.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ya(a)}}return Je(a),a.flags&=-16777217,null;case 6:if(e&&a.stateNode!=null)e.memoizedProps!==o&&Ya(a);else{if(typeof o!="string"&&a.stateNode===null)throw Error(n(166));if(e=He.current,Nn(a)){if(e=a.stateNode,i=a.memoizedProps,o=null,d=Ut,d!==null)switch(d.tag){case 27:case 5:o=d.memoizedProps}e[kt]=a,e=!!(e.nodeValue===i||o!==null&&o.suppressHydrationWarning===!0||Ym(e.nodeValue,i)),e||zr(a)}else e=Ml(e).createTextNode(o),e[kt]=a,a.stateNode=e}return Je(a),null;case 13:if(o=a.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=Nn(a),o!==null&&o.dehydrated!==null){if(e===null){if(!d)throw Error(n(318));if(d=a.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(n(317));d[kt]=a}else Tn(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Je(a),d=!1}else d=Ch(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return a.flags&256?(Ha(a),a):(Ha(a),null)}if(Ha(a),(a.flags&128)!==0)return a.lanes=i,a;if(i=o!==null,e=e!==null&&e.memoizedState!==null,i){o=a.child,d=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(d=o.alternate.memoizedState.cachePool.pool);var f=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==d&&(o.flags|=2048)}return i!==e&&i&&(a.child.flags|=8192),wl(a,a.updateQueue),Je(a),null;case 4:return we(),e===null&&du(a.stateNode.containerInfo),Je(a),null;case 10:return $a(a.type),Je(a),null;case 19:if(se(pt),d=a.memoizedState,d===null)return Je(a),null;if(o=(a.flags&128)!==0,f=d.rendering,f===null)if(o)Hn(d,!1);else{if(st!==0||e!==null&&(e.flags&128)!==0)for(e=a.child;e!==null;){if(f=yl(e),f!==null){for(a.flags|=128,Hn(d,!1),e=f.updateQueue,a.updateQueue=e,wl(a,e),a.subtreeFlags=0,e=i,i=a.child;i!==null;)Sh(i,e),i=i.sibling;return te(pt,pt.current&1|2),a.child}e=e.sibling}d.tail!==null&&at()>Sl&&(a.flags|=128,o=!0,Hn(d,!1),a.lanes=4194304)}else{if(!o)if(e=yl(f),e!==null){if(a.flags|=128,o=!0,e=e.updateQueue,a.updateQueue=e,wl(a,e),Hn(d,!0),d.tail===null&&d.tailMode==="hidden"&&!f.alternate&&!Ae)return Je(a),null}else 2*at()-d.renderingStartTime>Sl&&i!==536870912&&(a.flags|=128,o=!0,Hn(d,!1),a.lanes=4194304);d.isBackwards?(f.sibling=a.child,a.child=f):(e=d.last,e!==null?e.sibling=f:a.child=f,d.last=f)}return d.tail!==null?(a=d.tail,d.rendering=a,d.tail=a.sibling,d.renderingStartTime=at(),a.sibling=null,e=pt.current,te(pt,o?e&1|2:e&1),a):(Je(a),null);case 22:case 23:return Ha(a),fc(),o=a.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(a.flags|=8192):o&&(a.flags|=8192),o?(i&536870912)!==0&&(a.flags&128)===0&&(Je(a),a.subtreeFlags&6&&(a.flags|=8192)):Je(a),i=a.updateQueue,i!==null&&wl(a,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),o=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(o=a.memoizedState.cachePool.pool),o!==i&&(a.flags|=2048),e!==null&&se(Br),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),a.memoizedState.cache!==i&&(a.flags|=2048),$a(yt),Je(a),null;case 25:return null;case 30:return null}throw Error(n(156,a.tag))}function Ap(e,a){switch(Zo(a),a.tag){case 1:return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 3:return $a(yt),we(),e=a.flags,(e&65536)!==0&&(e&128)===0?(a.flags=e&-65537|128,a):null;case 26:case 27:case 5:return me(a),null;case 13:if(Ha(a),e=a.memoizedState,e!==null&&e.dehydrated!==null){if(a.alternate===null)throw Error(n(340));Tn()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 19:return se(pt),null;case 4:return we(),null;case 10:return $a(a.type),null;case 22:case 23:return Ha(a),fc(),e!==null&&se(Br),e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 24:return $a(yt),null;case 25:return null;default:return null}}function Jf(e,a){switch(Zo(a),a.tag){case 3:$a(yt),we();break;case 26:case 27:case 5:me(a);break;case 4:we();break;case 13:Ha(a);break;case 19:se(pt);break;case 10:$a(a.type);break;case 22:case 23:Ha(a),fc(),e!==null&&se(Br);break;case 24:$a(yt)}}function In(e,a){try{var i=a.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var d=o.next;i=d;do{if((i.tag&e)===e){o=void 0;var f=i.create,v=i.inst;o=f(),v.destroy=o}i=i.next}while(i!==d)}}catch(w){Be(a,a.return,w)}}function cr(e,a,i){try{var o=a.updateQueue,d=o!==null?o.lastEffect:null;if(d!==null){var f=d.next;o=f;do{if((o.tag&e)===e){var v=o.inst,w=v.destroy;if(w!==void 0){v.destroy=void 0,d=a;var E=i,L=w;try{L()}catch(V){Be(d,E,V)}}}o=o.next}while(o!==f)}}catch(V){Be(a,a.return,V)}}function Zf(e){var a=e.updateQueue;if(a!==null){var i=e.stateNode;try{Ph(a,i)}catch(o){Be(e,e.return,o)}}}function em(e,a,i){i.props=Ir(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(o){Be(e,a,o)}}function Yn(e,a){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof i=="function"?e.refCleanup=i(o):i.current=o}}catch(d){Be(e,a,d)}}function Na(e,a){var i=e.ref,o=e.refCleanup;if(i!==null)if(typeof o=="function")try{o()}catch(d){Be(e,a,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(d){Be(e,a,d)}else i.current=null}function tm(e){var a=e.type,i=e.memoizedProps,o=e.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":i.autoFocus&&o.focus();break e;case"img":i.src?o.src=i.src:i.srcSet&&(o.srcset=i.srcSet)}}catch(d){Be(e,e.return,d)}}function Bc(e,a,i){try{var o=e.stateNode;Jp(o,e.type,i,a),o[qt]=a}catch(d){Be(e,e.return,d)}}function am(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&pr(e.type)||e.tag===4}function Hc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||am(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&pr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ic(e,a,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,a?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,a):(a=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.appendChild(e),i=i._reactRootContainer,i!=null||a.onclick!==null||(a.onclick=kl));else if(o!==4&&(o===27&&pr(e.type)&&(i=e.stateNode,a=null),e=e.child,e!==null))for(Ic(e,a,i),e=e.sibling;e!==null;)Ic(e,a,i),e=e.sibling}function jl(e,a,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,a?i.insertBefore(e,a):i.appendChild(e);else if(o!==4&&(o===27&&pr(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(jl(e,a,i),e=e.sibling;e!==null;)jl(e,a,i),e=e.sibling}function rm(e){var a=e.stateNode,i=e.memoizedProps;try{for(var o=e.type,d=a.attributes;d.length;)a.removeAttributeNode(d[0]);Dt(a,o,i),a[kt]=e,a[qt]=i}catch(f){Be(e,e.return,f)}}var Va=!1,ct=!1,Yc=!1,sm=typeof WeakSet=="function"?WeakSet:Set,_t=null;function Rp(e,a){if(e=e.containerInfo,mu=$l,e=mh(e),Ho(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var d=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{i.nodeType,f.nodeType}catch(ue){i=null;break e}var v=0,w=-1,E=-1,L=0,V=0,F=e,z=null;t:for(;;){for(var B;F!==i||d!==0&&F.nodeType!==3||(w=v+d),F!==f||o!==0&&F.nodeType!==3||(E=v+o),F.nodeType===3&&(v+=F.nodeValue.length),(B=F.firstChild)!==null;)z=F,F=B;for(;;){if(F===e)break t;if(z===i&&++L===d&&(w=v),z===f&&++V===o&&(E=v),(B=F.nextSibling)!==null)break;F=z,z=F.parentNode}F=B}i=w===-1||E===-1?null:{start:w,end:E}}else i=null}i=i||{start:0,end:0}}else i=null;for(gu={focusedElem:e,selectionRange:i},$l=!1,_t=a;_t!==null;)if(a=_t,e=a.child,(a.subtreeFlags&1024)!==0&&e!==null)e.return=a,_t=e;else for(;_t!==null;){switch(a=_t,f=a.alternate,e=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,i=a,d=f.memoizedProps,f=f.memoizedState,o=i.stateNode;try{var ge=Ir(i.type,d,i.elementType===i.type);e=o.getSnapshotBeforeUpdate(ge,f),o.__reactInternalSnapshotBeforeUpdate=e}catch(ue){Be(i,i.return,ue)}}break;case 3:if((e&1024)!==0){if(e=a.stateNode.containerInfo,i=e.nodeType,i===9)vu(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":vu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(n(163))}if(e=a.sibling,e!==null){e.return=a.return,_t=e;break}_t=a.return}}function nm(e,a,i){var o=i.flags;switch(i.tag){case 0:case 11:case 15:ur(e,i),o&4&&In(5,i);break;case 1:if(ur(e,i),o&4)if(e=i.stateNode,a===null)try{e.componentDidMount()}catch(v){Be(i,i.return,v)}else{var d=Ir(i.type,a.memoizedProps);a=a.memoizedState;try{e.componentDidUpdate(d,a,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Be(i,i.return,v)}}o&64&&Zf(i),o&512&&Yn(i,i.return);break;case 3:if(ur(e,i),o&64&&(e=i.updateQueue,e!==null)){if(a=null,i.child!==null)switch(i.child.tag){case 27:case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}try{Ph(e,a)}catch(v){Be(i,i.return,v)}}break;case 27:a===null&&o&4&&rm(i);case 26:case 5:ur(e,i),a===null&&o&4&&tm(i),o&512&&Yn(i,i.return);break;case 12:ur(e,i);break;case 13:ur(e,i),o&4&&om(e,i),o&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=Bp.bind(null,i),nv(e,i))));break;case 22:if(o=i.memoizedState!==null||Va,!o){a=a!==null&&a.memoizedState!==null||ct,d=Va;var f=ct;Va=o,(ct=a)&&!f?dr(e,i,(i.subtreeFlags&8772)!==0):ur(e,i),Va=d,ct=f}break;case 30:break;default:ur(e,i)}}function im(e){var a=e.alternate;a!==null&&(e.alternate=null,im(a)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(a=e.stateNode,a!==null&&_o(a)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Fe=null,Pt=!1;function Qa(e,a,i){for(i=i.child;i!==null;)lm(e,a,i),i=i.sibling}function lm(e,a,i){if(Le&&typeof Le.onCommitFiberUnmount=="function")try{Le.onCommitFiberUnmount(Ke,i)}catch(f){}switch(i.tag){case 26:ct||Na(i,a),Qa(e,a,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:ct||Na(i,a);var o=Fe,d=Pt;pr(i.type)&&(Fe=i.stateNode,Pt=!1),Qa(e,a,i),Zn(i.stateNode),Fe=o,Pt=d;break;case 5:ct||Na(i,a);case 6:if(o=Fe,d=Pt,Fe=null,Qa(e,a,i),Fe=o,Pt=d,Fe!==null)if(Pt)try{(Fe.nodeType===9?Fe.body:Fe.nodeName==="HTML"?Fe.ownerDocument.body:Fe).removeChild(i.stateNode)}catch(f){Be(i,a,f)}else try{Fe.removeChild(i.stateNode)}catch(f){Be(i,a,f)}break;case 18:Fe!==null&&(Pt?(e=Fe,Fm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),li(e)):Fm(Fe,i.stateNode));break;case 4:o=Fe,d=Pt,Fe=i.stateNode.containerInfo,Pt=!0,Qa(e,a,i),Fe=o,Pt=d;break;case 0:case 11:case 14:case 15:ct||cr(2,i,a),ct||cr(4,i,a),Qa(e,a,i);break;case 1:ct||(Na(i,a),o=i.stateNode,typeof o.componentWillUnmount=="function"&&em(i,a,o)),Qa(e,a,i);break;case 21:Qa(e,a,i);break;case 22:ct=(o=ct)||i.memoizedState!==null,Qa(e,a,i),ct=o;break;default:Qa(e,a,i)}}function om(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{li(e)}catch(i){Be(a,a.return,i)}}function kp(e){switch(e.tag){case 13:case 19:var a=e.stateNode;return a===null&&(a=e.stateNode=new sm),a;case 22:return e=e.stateNode,a=e._retryCache,a===null&&(a=e._retryCache=new sm),a;default:throw Error(n(435,e.tag))}}function Vc(e,a){var i=kp(e);a.forEach(function(o){var d=Hp.bind(null,e,o);i.has(o)||(i.add(o),o.then(d,d))})}function Vt(e,a){var i=a.deletions;if(i!==null)for(var o=0;o<i.length;o++){var d=i[o],f=e,v=a,w=v;e:for(;w!==null;){switch(w.tag){case 27:if(pr(w.type)){Fe=w.stateNode,Pt=!1;break e}break;case 5:Fe=w.stateNode,Pt=!1;break e;case 3:case 4:Fe=w.stateNode.containerInfo,Pt=!0;break e}w=w.return}if(Fe===null)throw Error(n(160));lm(f,v,d),Fe=null,Pt=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)cm(a,e),a=a.sibling}var ga=null;function cm(e,a){var i=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Vt(a,e),Qt(e),o&4&&(cr(3,e,e.return),In(3,e),cr(5,e,e.return));break;case 1:Vt(a,e),Qt(e),o&512&&(ct||i===null||Na(i,i.return)),o&64&&Va&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?o:i.concat(o))));break;case 26:var d=ga;if(Vt(a,e),Qt(e),o&512&&(ct||i===null||Na(i,i.return)),o&4){var f=i!==null?i.memoizedState:null;if(o=e.memoizedState,i===null)if(o===null)if(e.stateNode===null){e:{o=e.type,i=e.memoizedProps,d=d.ownerDocument||d;t:switch(o){case"title":f=d.getElementsByTagName("title")[0],(!f||f[mn]||f[kt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(o),d.head.insertBefore(f,d.querySelector("head > title"))),Dt(f,o,i),f[kt]=e,wt(f),o=f;break e;case"link":var v=rg("link","href",d).get(o+(i.href||""));if(v){for(var w=0;w<v.length;w++)if(f=v[w],f.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&f.getAttribute("rel")===(i.rel==null?null:i.rel)&&f.getAttribute("title")===(i.title==null?null:i.title)&&f.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){v.splice(w,1);break t}}f=d.createElement(o),Dt(f,o,i),d.head.appendChild(f);break;case"meta":if(v=rg("meta","content",d).get(o+(i.content||""))){for(w=0;w<v.length;w++)if(f=v[w],f.getAttribute("content")===(i.content==null?null:""+i.content)&&f.getAttribute("name")===(i.name==null?null:i.name)&&f.getAttribute("property")===(i.property==null?null:i.property)&&f.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&f.getAttribute("charset")===(i.charSet==null?null:i.charSet)){v.splice(w,1);break t}}f=d.createElement(o),Dt(f,o,i),d.head.appendChild(f);break;default:throw Error(n(468,o))}f[kt]=e,wt(f),o=f}e.stateNode=o}else sg(d,e.type,e.stateNode);else e.stateNode=ag(d,o,e.memoizedProps);else f!==o?(f===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):f.count--,o===null?sg(d,e.type,e.stateNode):ag(d,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Bc(e,e.memoizedProps,i.memoizedProps)}break;case 27:Vt(a,e),Qt(e),o&512&&(ct||i===null||Na(i,i.return)),i!==null&&o&4&&Bc(e,e.memoizedProps,i.memoizedProps);break;case 5:if(Vt(a,e),Qt(e),o&512&&(ct||i===null||Na(i,i.return)),e.flags&32){d=e.stateNode;try{cs(d,"")}catch(B){Be(e,e.return,B)}}o&4&&e.stateNode!=null&&(d=e.memoizedProps,Bc(e,d,i!==null?i.memoizedProps:d)),o&1024&&(Yc=!0);break;case 6:if(Vt(a,e),Qt(e),o&4){if(e.stateNode===null)throw Error(n(162));o=e.memoizedProps,i=e.stateNode;try{i.nodeValue=o}catch(B){Be(e,e.return,B)}}break;case 3:if(Ll=null,d=ga,ga=Ul(a.containerInfo),Vt(a,e),ga=d,Qt(e),o&4&&i!==null&&i.memoizedState.isDehydrated)try{li(a.containerInfo)}catch(B){Be(e,e.return,B)}Yc&&(Yc=!1,um(e));break;case 4:o=ga,ga=Ul(e.stateNode.containerInfo),Vt(a,e),Qt(e),ga=o;break;case 12:Vt(a,e),Qt(e);break;case 13:Vt(a,e),Qt(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Wc=at()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Vc(e,o)));break;case 22:d=e.memoizedState!==null;var E=i!==null&&i.memoizedState!==null,L=Va,V=ct;if(Va=L||d,ct=V||E,Vt(a,e),ct=V,Va=L,Qt(e),o&8192)e:for(a=e.stateNode,a._visibility=d?a._visibility&-2:a._visibility|1,d&&(i===null||E||Va||ct||Yr(e)),i=null,a=e;;){if(a.tag===5||a.tag===26){if(i===null){E=i=a;try{if(f=E.stateNode,d)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{w=E.stateNode;var F=E.memoizedProps.style,z=F!=null&&F.hasOwnProperty("display")?F.display:null;w.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(B){Be(E,E.return,B)}}}else if(a.tag===6){if(i===null){E=a;try{E.stateNode.nodeValue=d?"":E.memoizedProps}catch(B){Be(E,E.return,B)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===e)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;i===a&&(i=null),a=a.return}i===a&&(i=null),a.sibling.return=a.return,a=a.sibling}o&4&&(o=e.updateQueue,o!==null&&(i=o.retryQueue,i!==null&&(o.retryQueue=null,Vc(e,i))));break;case 19:Vt(a,e),Qt(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Vc(e,o)));break;case 30:break;case 21:break;default:Vt(a,e),Qt(e)}}function Qt(e){var a=e.flags;if(a&2){try{for(var i,o=e.return;o!==null;){if(am(o)){i=o;break}o=o.return}if(i==null)throw Error(n(160));switch(i.tag){case 27:var d=i.stateNode,f=Hc(e);jl(e,f,d);break;case 5:var v=i.stateNode;i.flags&32&&(cs(v,""),i.flags&=-33);var w=Hc(e);jl(e,w,v);break;case 3:case 4:var E=i.stateNode.containerInfo,L=Hc(e);Ic(e,L,E);break;default:throw Error(n(161))}}catch(V){Be(e,e.return,V)}e.flags&=-3}a&4096&&(e.flags&=-4097)}function um(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var a=e;um(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),e=e.sibling}}function ur(e,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)nm(e,a.alternate,a),a=a.sibling}function Yr(e){for(e=e.child;e!==null;){var a=e;switch(a.tag){case 0:case 11:case 14:case 15:cr(4,a,a.return),Yr(a);break;case 1:Na(a,a.return);var i=a.stateNode;typeof i.componentWillUnmount=="function"&&em(a,a.return,i),Yr(a);break;case 27:Zn(a.stateNode);case 26:case 5:Na(a,a.return),Yr(a);break;case 22:a.memoizedState===null&&Yr(a);break;case 30:Yr(a);break;default:Yr(a)}e=e.sibling}}function dr(e,a,i){for(i=i&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var o=a.alternate,d=e,f=a,v=f.flags;switch(f.tag){case 0:case 11:case 15:dr(d,f,i),In(4,f);break;case 1:if(dr(d,f,i),o=f,d=o.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(L){Be(o,o.return,L)}if(o=f,d=o.updateQueue,d!==null){var w=o.stateNode;try{var E=d.shared.hiddenCallbacks;if(E!==null)for(d.shared.hiddenCallbacks=null,d=0;d<E.length;d++)zh(E[d],w)}catch(L){Be(o,o.return,L)}}i&&v&64&&Zf(f),Yn(f,f.return);break;case 27:rm(f);case 26:case 5:dr(d,f,i),i&&o===null&&v&4&&tm(f),Yn(f,f.return);break;case 12:dr(d,f,i);break;case 13:dr(d,f,i),i&&v&4&&om(d,f);break;case 22:f.memoizedState===null&&dr(d,f,i),Yn(f,f.return);break;case 30:break;default:dr(d,f,i)}a=a.sibling}}function Qc(e,a){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(e=a.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&On(i))}function Gc(e,a){e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&On(e))}function Ta(e,a,i,o){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)dm(e,a,i,o),a=a.sibling}function dm(e,a,i,o){var d=a.flags;switch(a.tag){case 0:case 11:case 15:Ta(e,a,i,o),d&2048&&In(9,a);break;case 1:Ta(e,a,i,o);break;case 3:Ta(e,a,i,o),d&2048&&(e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&On(e)));break;case 12:if(d&2048){Ta(e,a,i,o),e=a.stateNode;try{var f=a.memoizedProps,v=f.id,w=f.onPostCommit;typeof w=="function"&&w(v,a.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(E){Be(a,a.return,E)}}else Ta(e,a,i,o);break;case 13:Ta(e,a,i,o);break;case 23:break;case 22:f=a.stateNode,v=a.alternate,a.memoizedState!==null?f._visibility&2?Ta(e,a,i,o):Vn(e,a):f._visibility&2?Ta(e,a,i,o):(f._visibility|=2,Cs(e,a,i,o,(a.subtreeFlags&10256)!==0)),d&2048&&Qc(v,a);break;case 24:Ta(e,a,i,o),d&2048&&Gc(a.alternate,a);break;default:Ta(e,a,i,o)}}function Cs(e,a,i,o,d){for(d=d&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var f=e,v=a,w=i,E=o,L=v.flags;switch(v.tag){case 0:case 11:case 15:Cs(f,v,w,E,d),In(8,v);break;case 23:break;case 22:var V=v.stateNode;v.memoizedState!==null?V._visibility&2?Cs(f,v,w,E,d):Vn(f,v):(V._visibility|=2,Cs(f,v,w,E,d)),d&&L&2048&&Qc(v.alternate,v);break;case 24:Cs(f,v,w,E,d),d&&L&2048&&Gc(v.alternate,v);break;default:Cs(f,v,w,E,d)}a=a.sibling}}function Vn(e,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var i=e,o=a,d=o.flags;switch(o.tag){case 22:Vn(i,o),d&2048&&Qc(o.alternate,o);break;case 24:Vn(i,o),d&2048&&Gc(o.alternate,o);break;default:Vn(i,o)}a=a.sibling}}var Qn=8192;function Os(e){if(e.subtreeFlags&Qn)for(e=e.child;e!==null;)hm(e),e=e.sibling}function hm(e){switch(e.tag){case 26:Os(e),e.flags&Qn&&e.memoizedState!==null&&vv(ga,e.memoizedState,e.memoizedProps);break;case 5:Os(e);break;case 3:case 4:var a=ga;ga=Ul(e.stateNode.containerInfo),Os(e),ga=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=Qn,Qn=16777216,Os(e),Qn=a):Os(e));break;default:Os(e)}}function fm(e){var a=e.alternate;if(a!==null&&(e=a.child,e!==null)){a.child=null;do a=e.sibling,e.sibling=null,e=a;while(e!==null)}}function Gn(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var i=0;i<a.length;i++){var o=a[i];_t=o,gm(o,e)}fm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)mm(e),e=e.sibling}function mm(e){switch(e.tag){case 0:case 11:case 15:Gn(e),e.flags&2048&&cr(9,e,e.return);break;case 3:Gn(e);break;case 12:Gn(e);break;case 22:var a=e.stateNode;e.memoizedState!==null&&a._visibility&2&&(e.return===null||e.return.tag!==13)?(a._visibility&=-3,_l(e)):Gn(e);break;default:Gn(e)}}function _l(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var i=0;i<a.length;i++){var o=a[i];_t=o,gm(o,e)}fm(e)}for(e=e.child;e!==null;){switch(a=e,a.tag){case 0:case 11:case 15:cr(8,a,a.return),_l(a);break;case 22:i=a.stateNode,i._visibility&2&&(i._visibility&=-3,_l(a));break;default:_l(a)}e=e.sibling}}function gm(e,a){for(;_t!==null;){var i=_t;switch(i.tag){case 0:case 11:case 15:cr(8,i,a);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var o=i.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:On(i.memoizedState.cache)}if(o=i.child,o!==null)o.return=i,_t=o;else e:for(i=e;_t!==null;){o=_t;var d=o.sibling,f=o.return;if(im(o),o===i){_t=null;break e}if(d!==null){d.return=f,_t=d;break e}_t=f}}}var Mp={getCacheForType:function(e){var a=Mt(yt),i=a.data.get(e);return i===void 0&&(i=e(),a.data.set(e,i)),i}},Up=typeof WeakMap=="function"?WeakMap:Map,ke=0,Qe=null,Se=null,Ee=0,Me=0,Gt=null,hr=!1,Ds=!1,Kc=!1,Ga=0,st=0,fr=0,Vr=0,Fc=0,ua=0,As=0,Kn=null,$t=null,Xc=!1,Wc=0,Sl=1/0,Nl=null,mr=null,Ot=0,gr=null,Rs=null,ks=0,Jc=0,Zc=null,ym=null,Fn=0,eu=null;function Kt(){if((ke&2)!==0&&Ee!==0)return Ee&-Ee;if(H.T!==null){var e=xs;return e!==0?e:lu()}return Ad()}function pm(){ua===0&&(ua=(Ee&536870912)===0||Ae?Ed():536870912);var e=ca.current;return e!==null&&(e.flags|=32),ua}function Ft(e,a,i){(e===Qe&&(Me===2||Me===9)||e.cancelPendingCommit!==null)&&(Ms(e,0),yr(e,Ee,ua,!1)),fn(e,i),((ke&2)===0||e!==Qe)&&(e===Qe&&((ke&2)===0&&(Vr|=i),st===4&&yr(e,Ee,ua,!1)),Ea(e))}function vm(e,a,i){if((ke&6)!==0)throw Error(n(327));var o=!i&&(a&124)===0&&(a&e.expiredLanes)===0||hn(e,a),d=o?zp(e,a):ru(e,a,!0),f=o;do{if(d===0){Ds&&!o&&yr(e,a,0,!1);break}else{if(i=e.current.alternate,f&&!qp(i)){d=ru(e,a,!1),f=!1;continue}if(d===2){if(f=a,e.errorRecoveryDisabledLanes&f)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){a=v;e:{var w=e;d=Kn;var E=w.current.memoizedState.isDehydrated;if(E&&(Ms(w,v).flags|=256),v=ru(w,v,!1),v!==2){if(Kc&&!E){w.errorRecoveryDisabledLanes|=f,Vr|=f,d=4;break e}f=$t,$t=d,f!==null&&($t===null?$t=f:$t.push.apply($t,f))}d=v}if(f=!1,d!==2)continue}}if(d===1){Ms(e,0),yr(e,a,0,!0);break}e:{switch(o=e,f=d,f){case 0:case 1:throw Error(n(345));case 4:if((a&4194048)!==a)break;case 6:yr(o,a,ua,!hr);break e;case 2:$t=null;break;case 3:case 5:break;default:throw Error(n(329))}if((a&62914560)===a&&(d=Wc+300-at(),10<d)){if(yr(o,a,ua,!hr),qi(o,0,!0)!==0)break e;o.timeoutHandle=Gm(bm.bind(null,o,i,$t,Nl,Xc,a,ua,Vr,As,hr,f,2,-0,0),d);break e}bm(o,i,$t,Nl,Xc,a,ua,Vr,As,hr,f,0,-0,0)}}break}while(!0);Ea(e)}function bm(e,a,i,o,d,f,v,w,E,L,V,F,z,B){if(e.timeoutHandle=-1,F=a.subtreeFlags,(F&8192||(F&16785408)===16785408)&&(ai={stylesheets:null,count:0,unsuspend:pv},hm(a),F=bv(),F!==null)){e.cancelPendingCommit=F(Tm.bind(null,e,a,f,i,o,d,v,w,E,V,1,z,B)),yr(e,f,v,!L);return}Tm(e,a,f,i,o,d,v,w,E)}function qp(e){for(var a=e;;){var i=a.tag;if((i===0||i===11||i===15)&&a.flags&16384&&(i=a.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var o=0;o<i.length;o++){var d=i[o],f=d.getSnapshot;d=d.value;try{if(!It(f(),d))return!1}catch(v){return!1}}if(i=a.child,a.subtreeFlags&16384&&i!==null)i.return=a,a=i;else{if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function yr(e,a,i,o){a&=~Fc,a&=~Vr,e.suspendedLanes|=a,e.pingedLanes&=~a,o&&(e.warmLanes|=a),o=e.expirationTimes;for(var d=a;0<d;){var f=31-Et(d),v=1<<f;o[f]=-1,d&=~v}i!==0&&Od(e,i,a)}function Tl(){return(ke&6)===0?(Xn(0),!1):!0}function tu(){if(Se!==null){if(Me===0)var e=Se.return;else e=Se,Pa=Pr=null,vc(e),Ts=null,$n=0,e=Se;for(;e!==null;)Jf(e.alternate,e),e=e.return;Se=null}}function Ms(e,a){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,ev(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),tu(),Qe=e,Se=i=qa(e.current,null),Ee=a,Me=0,Gt=null,hr=!1,Ds=hn(e,a),Kc=!1,As=ua=Fc=Vr=fr=st=0,$t=Kn=null,Xc=!1,(a&8)!==0&&(a|=a&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=a;0<o;){var d=31-Et(o),f=1<<d;a|=e[d],o&=~f}return Ga=a,Ki(),i}function xm(e,a){xe=null,H.H=fl,a===An||a===rl?(a=qh(),Me=3):a===kh?(a=qh(),Me=4):Me=a===zf?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Gt=a,Se===null&&(st=1,vl(e,na(a,e.current)))}function wm(){var e=H.H;return H.H=fl,e===null?fl:e}function jm(){var e=H.A;return H.A=Mp,e}function au(){st=4,hr||(Ee&4194048)!==Ee&&ca.current!==null||(Ds=!0),(fr&134217727)===0&&(Vr&134217727)===0||Qe===null||yr(Qe,Ee,ua,!1)}function ru(e,a,i){var o=ke;ke|=2;var d=wm(),f=jm();(Qe!==e||Ee!==a)&&(Nl=null,Ms(e,a)),a=!1;var v=st;e:do try{if(Me!==0&&Se!==null){var w=Se,E=Gt;switch(Me){case 8:tu(),v=6;break e;case 3:case 2:case 9:case 6:ca.current===null&&(a=!0);var L=Me;if(Me=0,Gt=null,Us(e,w,E,L),i&&Ds){v=0;break e}break;default:L=Me,Me=0,Gt=null,Us(e,w,E,L)}}Lp(),v=st;break}catch(V){xm(e,V)}while(!0);return a&&e.shellSuspendCounter++,Pa=Pr=null,ke=o,H.H=d,H.A=f,Se===null&&(Qe=null,Ee=0,Ki()),v}function Lp(){for(;Se!==null;)_m(Se)}function zp(e,a){var i=ke;ke|=2;var o=wm(),d=jm();Qe!==e||Ee!==a?(Nl=null,Sl=at()+500,Ms(e,a)):Ds=hn(e,a);e:do try{if(Me!==0&&Se!==null){a=Se;var f=Gt;t:switch(Me){case 1:Me=0,Gt=null,Us(e,a,f,1);break;case 2:case 9:if(Mh(f)){Me=0,Gt=null,Sm(a);break}a=function(){Me!==2&&Me!==9||Qe!==e||(Me=7),Ea(e)},f.then(a,a);break e;case 3:Me=7;break e;case 4:Me=5;break e;case 7:Mh(f)?(Me=0,Gt=null,Sm(a)):(Me=0,Gt=null,Us(e,a,f,7));break;case 5:var v=null;switch(Se.tag){case 26:v=Se.memoizedState;case 5:case 27:var w=Se;if(!v||ng(v)){Me=0,Gt=null;var E=w.sibling;if(E!==null)Se=E;else{var L=w.return;L!==null?(Se=L,El(L)):Se=null}break t}}Me=0,Gt=null,Us(e,a,f,5);break;case 6:Me=0,Gt=null,Us(e,a,f,6);break;case 8:tu(),st=6;break e;default:throw Error(n(462))}}Pp();break}catch(V){xm(e,V)}while(!0);return Pa=Pr=null,H.H=o,H.A=d,ke=i,Se!==null?0:(Qe=null,Ee=0,Ki(),st)}function Pp(){for(;Se!==null&&!qe();)_m(Se)}function _m(e){var a=Xf(e.alternate,e,Ga);e.memoizedProps=e.pendingProps,a===null?El(e):Se=a}function Sm(e){var a=e,i=a.alternate;switch(a.tag){case 15:case 0:a=Yf(i,a,a.pendingProps,a.type,void 0,Ee);break;case 11:a=Yf(i,a,a.pendingProps,a.type.render,a.ref,Ee);break;case 5:vc(a);default:Jf(i,a),a=Se=Sh(a,Ga),a=Xf(i,a,Ga)}e.memoizedProps=e.pendingProps,a===null?El(e):Se=a}function Us(e,a,i,o){Pa=Pr=null,vc(a),Ts=null,$n=0;var d=a.return;try{if(Cp(e,d,a,i,Ee)){st=1,vl(e,na(i,e.current)),Se=null;return}}catch(f){if(d!==null)throw Se=d,f;st=1,vl(e,na(i,e.current)),Se=null;return}a.flags&32768?(Ae||o===1?e=!0:Ds||(Ee&536870912)!==0?e=!1:(hr=e=!0,(o===2||o===9||o===3||o===6)&&(o=ca.current,o!==null&&o.tag===13&&(o.flags|=16384))),Nm(a,e)):El(a)}function El(e){var a=e;do{if((a.flags&32768)!==0){Nm(a,hr);return}e=a.return;var i=Dp(a.alternate,a,Ga);if(i!==null){Se=i;return}if(a=a.sibling,a!==null){Se=a;return}Se=a=e}while(a!==null);st===0&&(st=5)}function Nm(e,a){do{var i=Ap(e.alternate,e);if(i!==null){i.flags&=32767,Se=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!a&&(e=e.sibling,e!==null)){Se=e;return}Se=e=i}while(e!==null);st=6,Se=null}function Tm(e,a,i,o,d,f,v,w,E){e.cancelPendingCommit=null;do Cl();while(Ot!==0);if((ke&6)!==0)throw Error(n(327));if(a!==null){if(a===e.current)throw Error(n(177));if(f=a.lanes|a.childLanes,f|=Go,py(e,i,f,v,w,E),e===Qe&&(Se=Qe=null,Ee=0),Rs=a,gr=e,ks=i,Jc=f,Zc=d,ym=o,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Ip(fa,function(){return Am(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||o){o=H.T,H.T=null,d=G.p,G.p=2,v=ke,ke|=4;try{Rp(e,a,i)}finally{ke=v,G.p=d,H.T=o}}Ot=1,Em(),Cm(),Om()}}function Em(){if(Ot===1){Ot=0;var e=gr,a=Rs,i=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||i){i=H.T,H.T=null;var o=G.p;G.p=2;var d=ke;ke|=4;try{cm(a,e);var f=gu,v=mh(e.containerInfo),w=f.focusedElem,E=f.selectionRange;if(v!==w&&w&&w.ownerDocument&&fh(w.ownerDocument.documentElement,w)){if(E!==null&&Ho(w)){var L=E.start,V=E.end;if(V===void 0&&(V=L),"selectionStart"in w)w.selectionStart=L,w.selectionEnd=Math.min(V,w.value.length);else{var F=w.ownerDocument||document,z=F&&F.defaultView||window;if(z.getSelection){var B=z.getSelection(),ge=w.textContent.length,ue=Math.min(E.start,ge),$e=E.end===void 0?ue:Math.min(E.end,ge);!B.extend&&ue>$e&&(v=$e,$e=ue,ue=v);var R=hh(w,ue),O=hh(w,$e);if(R&&O&&(B.rangeCount!==1||B.anchorNode!==R.node||B.anchorOffset!==R.offset||B.focusNode!==O.node||B.focusOffset!==O.offset)){var U=F.createRange();U.setStart(R.node,R.offset),B.removeAllRanges(),ue>$e?(B.addRange(U),B.extend(O.node,O.offset)):(U.setEnd(O.node,O.offset),B.addRange(U))}}}}for(F=[],B=w;B=B.parentNode;)B.nodeType===1&&F.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<F.length;w++){var K=F[w];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}$l=!!mu,gu=mu=null}finally{ke=d,G.p=o,H.T=i}}e.current=a,Ot=2}}function Cm(){if(Ot===2){Ot=0;var e=gr,a=Rs,i=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||i){i=H.T,H.T=null;var o=G.p;G.p=2;var d=ke;ke|=4;try{nm(e,a.alternate,a)}finally{ke=d,G.p=o,H.T=i}}Ot=3}}function Om(){if(Ot===4||Ot===3){Ot=0,_e();var e=gr,a=Rs,i=ks,o=ym;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Ot=5:(Ot=0,Rs=gr=null,Dm(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(mr=null),wo(i),a=a.stateNode,Le&&typeof Le.onCommitFiberRoot=="function")try{Le.onCommitFiberRoot(Ke,a,void 0,(a.current.flags&128)===128)}catch(E){}if(o!==null){a=H.T,d=G.p,G.p=2,H.T=null;try{for(var f=e.onRecoverableError,v=0;v<o.length;v++){var w=o[v];f(w.value,{componentStack:w.stack})}}finally{H.T=a,G.p=d}}(ks&3)!==0&&Cl(),Ea(e),d=e.pendingLanes,(i&4194090)!==0&&(d&42)!==0?e===eu?Fn++:(Fn=0,eu=e):Fn=0,Xn(0)}}function Dm(e,a){(e.pooledCacheLanes&=a)===0&&(a=e.pooledCache,a!=null&&(e.pooledCache=null,On(a)))}function Cl(e){return Em(),Cm(),Om(),Am()}function Am(){if(Ot!==5)return!1;var e=gr,a=Jc;Jc=0;var i=wo(ks),o=H.T,d=G.p;try{G.p=32>i?32:i,H.T=null,i=Zc,Zc=null;var f=gr,v=ks;if(Ot=0,Rs=gr=null,ks=0,(ke&6)!==0)throw Error(n(331));var w=ke;if(ke|=4,mm(f.current),dm(f,f.current,v,i),ke=w,Xn(0,!1),Le&&typeof Le.onPostCommitFiberRoot=="function")try{Le.onPostCommitFiberRoot(Ke,f)}catch(E){}return!0}finally{G.p=d,H.T=o,Dm(e,a)}}function Rm(e,a,i){a=na(i,a),a=Rc(e.stateNode,a,2),e=nr(e,a,2),e!==null&&(fn(e,2),Ea(e))}function Be(e,a,i){if(e.tag===3)Rm(e,e,i);else for(;a!==null;){if(a.tag===3){Rm(a,e,i);break}else if(a.tag===1){var o=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(mr===null||!mr.has(o))){e=na(i,e),i=qf(2),o=nr(a,i,2),o!==null&&(Lf(i,o,a,e),fn(o,2),Ea(o));break}}a=a.return}}function su(e,a,i){var o=e.pingCache;if(o===null){o=e.pingCache=new Up;var d=new Set;o.set(a,d)}else d=o.get(a),d===void 0&&(d=new Set,o.set(a,d));d.has(i)||(Kc=!0,d.add(i),e=$p.bind(null,e,a,i),a.then(e,e))}function $p(e,a,i){var o=e.pingCache;o!==null&&o.delete(a),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Qe===e&&(Ee&i)===i&&(st===4||st===3&&(Ee&62914560)===Ee&&300>at()-Wc?(ke&2)===0&&Ms(e,0):Fc|=i,As===Ee&&(As=0)),Ea(e)}function km(e,a){a===0&&(a=Cd()),e=ys(e,a),e!==null&&(fn(e,a),Ea(e))}function Bp(e){var a=e.memoizedState,i=0;a!==null&&(i=a.retryLane),km(e,i)}function Hp(e,a){var i=0;switch(e.tag){case 13:var o=e.stateNode,d=e.memoizedState;d!==null&&(i=d.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(n(314))}o!==null&&o.delete(a),km(e,i)}function Ip(e,a){return We(e,a)}var Ol=null,qs=null,nu=!1,Dl=!1,iu=!1,Qr=0;function Ea(e){e!==qs&&e.next===null&&(qs===null?Ol=qs=e:qs=qs.next=e),Dl=!0,nu||(nu=!0,Vp())}function Xn(e,a){if(!iu&&Dl){iu=!0;do for(var i=!1,o=Ol;o!==null;){if(e!==0){var d=o.pendingLanes;if(d===0)var f=0;else{var v=o.suspendedLanes,w=o.pingedLanes;f=(1<<31-Et(42|e)+1)-1,f&=d&~(v&~w),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(i=!0,Lm(o,f))}else f=Ee,f=qi(o,o===Qe?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||hn(o,f)||(i=!0,Lm(o,f));o=o.next}while(i);iu=!1}}function Yp(){Mm()}function Mm(){Dl=nu=!1;var e=0;Qr!==0&&(Zp()&&(e=Qr),Qr=0);for(var a=at(),i=null,o=Ol;o!==null;){var d=o.next,f=Um(o,a);f===0?(o.next=null,i===null?Ol=d:i.next=d,d===null&&(qs=i)):(i=o,(e!==0||(f&3)!==0)&&(Dl=!0)),o=d}Xn(e)}function Um(e,a){for(var i=e.suspendedLanes,o=e.pingedLanes,d=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var v=31-Et(f),w=1<<v,E=d[v];E===-1?((w&i)===0||(w&o)!==0)&&(d[v]=yy(w,a)):E<=a&&(e.expiredLanes|=w),f&=~w}if(a=Qe,i=Ee,i=qi(e,e===a?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,i===0||e===a&&(Me===2||Me===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&De(o),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||hn(e,i)){if(a=i&-i,a===e.callbackPriority)return a;switch(o!==null&&De(o),wo(i)){case 2:case 8:i=ha;break;case 32:i=fa;break;case 268435456:i=Ja;break;default:i=fa}return o=qm.bind(null,e),i=We(i,o),e.callbackPriority=a,e.callbackNode=i,a}return o!==null&&o!==null&&De(o),e.callbackPriority=2,e.callbackNode=null,2}function qm(e,a){if(Ot!==0&&Ot!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Cl()&&e.callbackNode!==i)return null;var o=Ee;return o=qi(e,e===Qe?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(vm(e,o,a),Um(e,at()),e.callbackNode!=null&&e.callbackNode===i?qm.bind(null,e):null)}function Lm(e,a){if(Cl())return null;vm(e,a,!0)}function Vp(){tv(function(){(ke&6)!==0?We(Ve,Yp):Mm()})}function lu(){return Qr===0&&(Qr=Ed()),Qr}function zm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Bi(""+e)}function Pm(e,a){var i=a.ownerDocument.createElement("input");return i.name=a.name,i.value=a.value,e.id&&i.setAttribute("form",e.id),a.parentNode.insertBefore(i,a),e=new FormData(e),i.parentNode.removeChild(i),e}function Qp(e,a,i,o,d){if(a==="submit"&&i&&i.stateNode===d){var f=zm((d[qt]||null).action),v=o.submitter;v&&(a=(a=v[qt]||null)?zm(a.formAction):v.getAttribute("formAction"),a!==null&&(f=a,v=null));var w=new Vi("action","action",null,o,d);e.push({event:w,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Qr!==0){var E=v?Pm(d,v):new FormData(d);Ec(i,{pending:!0,data:E,method:d.method,action:f},null,E)}}else typeof f=="function"&&(w.preventDefault(),E=v?Pm(d,v):new FormData(d),Ec(i,{pending:!0,data:E,method:d.method,action:f},f,E))},currentTarget:d}]})}}for(var ou=0;ou<Qo.length;ou++){var cu=Qo[ou],Gp=cu.toLowerCase(),Kp=cu[0].toUpperCase()+cu.slice(1);ma(Gp,"on"+Kp)}ma(ph,"onAnimationEnd"),ma(vh,"onAnimationIteration"),ma(bh,"onAnimationStart"),ma("dblclick","onDoubleClick"),ma("focusin","onFocus"),ma("focusout","onBlur"),ma(dp,"onTransitionRun"),ma(hp,"onTransitionStart"),ma(fp,"onTransitionCancel"),ma(xh,"onTransitionEnd"),is("onMouseEnter",["mouseout","mouseover"]),is("onMouseLeave",["mouseout","mouseover"]),is("onPointerEnter",["pointerout","pointerover"]),is("onPointerLeave",["pointerout","pointerover"]),Dr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Dr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Dr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Dr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Dr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Dr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fp=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wn));function $m(e,a){a=(a&4)!==0;for(var i=0;i<e.length;i++){var o=e[i],d=o.event;o=o.listeners;e:{var f=void 0;if(a)for(var v=o.length-1;0<=v;v--){var w=o[v],E=w.instance,L=w.currentTarget;if(w=w.listener,E!==f&&d.isPropagationStopped())break e;f=w,d.currentTarget=L;try{f(d)}catch(V){pl(V)}d.currentTarget=null,f=E}else for(v=0;v<o.length;v++){if(w=o[v],E=w.instance,L=w.currentTarget,w=w.listener,E!==f&&d.isPropagationStopped())break e;f=w,d.currentTarget=L;try{f(d)}catch(V){pl(V)}d.currentTarget=null,f=E}}}}function Ne(e,a){var i=a[jo];i===void 0&&(i=a[jo]=new Set);var o=e+"__bubble";i.has(o)||(Bm(a,e,2,!1),i.add(o))}function uu(e,a,i){var o=0;a&&(o|=4),Bm(i,e,o,a)}var Al="_reactListening"+Math.random().toString(36).slice(2);function du(e){if(!e[Al]){e[Al]=!0,kd.forEach(function(i){i!=="selectionchange"&&(Fp.has(i)||uu(i,!1,e),uu(i,!0,e))});var a=e.nodeType===9?e:e.ownerDocument;a===null||a[Al]||(a[Al]=!0,uu("selectionchange",!1,a))}}function Bm(e,a,i,o){switch(dg(a)){case 2:var d=jv;break;case 8:d=_v;break;default:d=Nu}i=d.bind(null,a,i,e),d=void 0,!ko||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(d=!0),o?d!==void 0?e.addEventListener(a,i,{capture:!0,passive:d}):e.addEventListener(a,i,!0):d!==void 0?e.addEventListener(a,i,{passive:d}):e.addEventListener(a,i,!1)}function hu(e,a,i,o,d){var f=o;if((a&1)===0&&(a&2)===0&&o!==null)e:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var w=o.stateNode.containerInfo;if(w===d)break;if(v===4)for(v=o.return;v!==null;){var E=v.tag;if((E===3||E===4)&&v.stateNode.containerInfo===d)return;v=v.return}for(;w!==null;){if(v=rs(w),v===null)return;if(E=v.tag,E===5||E===6||E===26||E===27){o=f=v;continue e}w=w.parentNode}}o=o.return}Gd(function(){var L=f,V=Ao(i),F=[];e:{var z=wh.get(e);if(z!==void 0){var B=Vi,ge=e;switch(e){case"keypress":if(Ii(i)===0)break e;case"keydown":case"keyup":B=Iy;break;case"focusin":ge="focus",B=Lo;break;case"focusout":ge="blur",B=Lo;break;case"beforeblur":case"afterblur":B=Lo;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=Xd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=Ay;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=Qy;break;case ph:case vh:case bh:B=My;break;case xh:B=Ky;break;case"scroll":case"scrollend":B=Oy;break;case"wheel":B=Xy;break;case"copy":case"cut":case"paste":B=qy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=Jd;break;case"toggle":case"beforetoggle":B=Jy}var ue=(a&4)!==0,$e=!ue&&(e==="scroll"||e==="scrollend"),R=ue?z!==null?z+"Capture":null:z;ue=[];for(var O=L,U;O!==null;){var K=O;if(U=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||U===null||R===null||(K=yn(O,R),K!=null&&ue.push(Jn(O,K,U))),$e)break;O=O.return}0<ue.length&&(z=new B(z,ge,null,i,V),F.push({event:z,listeners:ue}))}}if((a&7)===0){e:{if(z=e==="mouseover"||e==="pointerover",B=e==="mouseout"||e==="pointerout",z&&i!==Do&&(ge=i.relatedTarget||i.fromElement)&&(rs(ge)||ge[as]))break e;if((B||z)&&(z=V.window===V?V:(z=V.ownerDocument)?z.defaultView||z.parentWindow:window,B?(ge=i.relatedTarget||i.toElement,B=L,ge=ge?rs(ge):null,ge!==null&&($e=u(ge),ue=ge.tag,ge!==$e||ue!==5&&ue!==27&&ue!==6)&&(ge=null)):(B=null,ge=L),B!==ge)){if(ue=Xd,K="onMouseLeave",R="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(ue=Jd,K="onPointerLeave",R="onPointerEnter",O="pointer"),$e=B==null?z:gn(B),U=ge==null?z:gn(ge),z=new ue(K,O+"leave",B,i,V),z.target=$e,z.relatedTarget=U,K=null,rs(V)===L&&(ue=new ue(R,O+"enter",ge,i,V),ue.target=U,ue.relatedTarget=$e,K=ue),$e=K,B&&ge)t:{for(ue=B,R=ge,O=0,U=ue;U;U=Ls(U))O++;for(U=0,K=R;K;K=Ls(K))U++;for(;0<O-U;)ue=Ls(ue),O--;for(;0<U-O;)R=Ls(R),U--;for(;O--;){if(ue===R||R!==null&&ue===R.alternate)break t;ue=Ls(ue),R=Ls(R)}ue=null}else ue=null;B!==null&&Hm(F,z,B,ue,!1),ge!==null&&$e!==null&&Hm(F,$e,ge,ue,!0)}}e:{if(z=L?gn(L):window,B=z.nodeName&&z.nodeName.toLowerCase(),B==="select"||B==="input"&&z.type==="file")var ne=ih;else if(sh(z))if(lh)ne=op;else{ne=ip;var je=np}else B=z.nodeName,!B||B.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?L&&Oo(L.elementType)&&(ne=ih):ne=lp;if(ne&&(ne=ne(e,L))){nh(F,ne,i,V);break e}je&&je(e,z,L),e==="focusout"&&L&&z.type==="number"&&L.memoizedProps.value!=null&&Co(z,"number",z.value)}switch(je=L?gn(L):window,e){case"focusin":(sh(je)||je.contentEditable==="true")&&(fs=je,Io=L,Sn=null);break;case"focusout":Sn=Io=fs=null;break;case"mousedown":Yo=!0;break;case"contextmenu":case"mouseup":case"dragend":Yo=!1,gh(F,i,V);break;case"selectionchange":if(up)break;case"keydown":case"keyup":gh(F,i,V)}var ce;if(Po)e:{switch(e){case"compositionstart":var de="onCompositionStart";break e;case"compositionend":de="onCompositionEnd";break e;case"compositionupdate":de="onCompositionUpdate";break e}de=void 0}else hs?ah(e,i)&&(de="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(de="onCompositionStart");de&&(Zd&&i.locale!=="ko"&&(hs||de!=="onCompositionStart"?de==="onCompositionEnd"&&hs&&(ce=Kd()):(tr=V,Mo="value"in tr?tr.value:tr.textContent,hs=!0)),je=Rl(L,de),0<je.length&&(de=new Wd(de,e,null,i,V),F.push({event:de,listeners:je}),ce?de.data=ce:(ce=rh(i),ce!==null&&(de.data=ce)))),(ce=ep?tp(e,i):ap(e,i))&&(de=Rl(L,"onBeforeInput"),0<de.length&&(je=new Wd("onBeforeInput","beforeinput",null,i,V),F.push({event:je,listeners:de}),je.data=ce)),Qp(F,e,L,i,V)}$m(F,a)})}function Jn(e,a,i){return{instance:e,listener:a,currentTarget:i}}function Rl(e,a){for(var i=a+"Capture",o=[];e!==null;){var d=e,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=yn(e,i),d!=null&&o.unshift(Jn(e,d,f)),d=yn(e,a),d!=null&&o.push(Jn(e,d,f))),e.tag===3)return o;e=e.return}return[]}function Ls(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Hm(e,a,i,o,d){for(var f=a._reactName,v=[];i!==null&&i!==o;){var w=i,E=w.alternate,L=w.stateNode;if(w=w.tag,E!==null&&E===o)break;w!==5&&w!==26&&w!==27||L===null||(E=L,d?(L=yn(i,f),L!=null&&v.unshift(Jn(i,L,E))):d||(L=yn(i,f),L!=null&&v.push(Jn(i,L,E)))),i=i.return}v.length!==0&&e.push({event:a,listeners:v})}var Xp=/\r\n?/g,Wp=/\u0000|\uFFFD/g;function Im(e){return(typeof e=="string"?e:""+e).replace(Xp,`
`).replace(Wp,"")}function Ym(e,a){return a=Im(a),Im(e)===a}function kl(){}function Pe(e,a,i,o,d,f){switch(i){case"children":typeof o=="string"?a==="body"||a==="textarea"&&o===""||cs(e,o):(typeof o=="number"||typeof o=="bigint")&&a!=="body"&&cs(e,""+o);break;case"className":zi(e,"class",o);break;case"tabIndex":zi(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":zi(e,i,o);break;case"style":Vd(e,o,f);break;case"data":if(a!=="object"){zi(e,"data",o);break}case"src":case"href":if(o===""&&(a!=="a"||i!=="href")){e.removeAttribute(i);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=Bi(""+o),e.setAttribute(i,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(i==="formAction"?(a!=="input"&&Pe(e,a,"name",d.name,d,null),Pe(e,a,"formEncType",d.formEncType,d,null),Pe(e,a,"formMethod",d.formMethod,d,null),Pe(e,a,"formTarget",d.formTarget,d,null)):(Pe(e,a,"encType",d.encType,d,null),Pe(e,a,"method",d.method,d,null),Pe(e,a,"target",d.target,d,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=Bi(""+o),e.setAttribute(i,o);break;case"onClick":o!=null&&(e.onclick=kl);break;case"onScroll":o!=null&&Ne("scroll",e);break;case"onScrollEnd":o!=null&&Ne("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(n(61));if(i=o.__html,i!=null){if(d.children!=null)throw Error(n(60));e.innerHTML=i}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}i=Bi(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""+o):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":o===!0?e.setAttribute(i,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,o):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(i,o):e.removeAttribute(i);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(i):e.setAttribute(i,o);break;case"popover":Ne("beforetoggle",e),Ne("toggle",e),Li(e,"popover",o);break;case"xlinkActuate":Ma(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Ma(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Ma(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Ma(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Ma(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Ma(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Ma(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Ma(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Ma(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Li(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Ey.get(i)||i,Li(e,i,o))}}function fu(e,a,i,o,d,f){switch(i){case"style":Vd(e,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(n(61));if(i=o.__html,i!=null){if(d.children!=null)throw Error(n(60));e.innerHTML=i}}break;case"children":typeof o=="string"?cs(e,o):(typeof o=="number"||typeof o=="bigint")&&cs(e,""+o);break;case"onScroll":o!=null&&Ne("scroll",e);break;case"onScrollEnd":o!=null&&Ne("scrollend",e);break;case"onClick":o!=null&&(e.onclick=kl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Md.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(d=i.endsWith("Capture"),a=i.slice(2,d?i.length-7:void 0),f=e[qt]||null,f=f!=null?f[i]:null,typeof f=="function"&&e.removeEventListener(a,f,d),typeof o=="function")){typeof f!="function"&&f!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(a,o,d);break e}i in e?e[i]=o:o===!0?e.setAttribute(i,""):Li(e,i,o)}}}function Dt(e,a,i){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ne("error",e),Ne("load",e);var o=!1,d=!1,f;for(f in i)if(i.hasOwnProperty(f)){var v=i[f];if(v!=null)switch(f){case"src":o=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,a));default:Pe(e,a,f,v,i,null)}}d&&Pe(e,a,"srcSet",i.srcSet,i,null),o&&Pe(e,a,"src",i.src,i,null);return;case"input":Ne("invalid",e);var w=f=v=d=null,E=null,L=null;for(o in i)if(i.hasOwnProperty(o)){var V=i[o];if(V!=null)switch(o){case"name":d=V;break;case"type":v=V;break;case"checked":E=V;break;case"defaultChecked":L=V;break;case"value":f=V;break;case"defaultValue":w=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(n(137,a));break;default:Pe(e,a,o,V,i,null)}}Bd(e,f,w,E,L,v,d,!1),Pi(e);return;case"select":Ne("invalid",e),o=v=f=null;for(d in i)if(i.hasOwnProperty(d)&&(w=i[d],w!=null))switch(d){case"value":f=w;break;case"defaultValue":v=w;break;case"multiple":o=w;default:Pe(e,a,d,w,i,null)}a=f,i=v,e.multiple=!!o,a!=null?os(e,!!o,a,!1):i!=null&&os(e,!!o,i,!0);return;case"textarea":Ne("invalid",e),f=d=o=null;for(v in i)if(i.hasOwnProperty(v)&&(w=i[v],w!=null))switch(v){case"value":o=w;break;case"defaultValue":d=w;break;case"children":f=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(n(91));break;default:Pe(e,a,v,w,i,null)}Id(e,o,d,f),Pi(e);return;case"option":for(E in i)if(i.hasOwnProperty(E)&&(o=i[E],o!=null))switch(E){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Pe(e,a,E,o,i,null)}return;case"dialog":Ne("beforetoggle",e),Ne("toggle",e),Ne("cancel",e),Ne("close",e);break;case"iframe":case"object":Ne("load",e);break;case"video":case"audio":for(o=0;o<Wn.length;o++)Ne(Wn[o],e);break;case"image":Ne("error",e),Ne("load",e);break;case"details":Ne("toggle",e);break;case"embed":case"source":case"link":Ne("error",e),Ne("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in i)if(i.hasOwnProperty(L)&&(o=i[L],o!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,a));default:Pe(e,a,L,o,i,null)}return;default:if(Oo(a)){for(V in i)i.hasOwnProperty(V)&&(o=i[V],o!==void 0&&fu(e,a,V,o,i,void 0));return}}for(w in i)i.hasOwnProperty(w)&&(o=i[w],o!=null&&Pe(e,a,w,o,i,null))}function Jp(e,a,i,o){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,v=null,w=null,E=null,L=null,V=null;for(B in i){var F=i[B];if(i.hasOwnProperty(B)&&F!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":E=F;default:o.hasOwnProperty(B)||Pe(e,a,B,null,o,F)}}for(var z in o){var B=o[z];if(F=i[z],o.hasOwnProperty(z)&&(B!=null||F!=null))switch(z){case"type":f=B;break;case"name":d=B;break;case"checked":L=B;break;case"defaultChecked":V=B;break;case"value":v=B;break;case"defaultValue":w=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(n(137,a));break;default:B!==F&&Pe(e,a,z,B,o,F)}}Eo(e,v,w,E,L,V,f,d);return;case"select":B=v=w=z=null;for(f in i)if(E=i[f],i.hasOwnProperty(f)&&E!=null)switch(f){case"value":break;case"multiple":B=E;default:o.hasOwnProperty(f)||Pe(e,a,f,null,o,E)}for(d in o)if(f=o[d],E=i[d],o.hasOwnProperty(d)&&(f!=null||E!=null))switch(d){case"value":z=f;break;case"defaultValue":w=f;break;case"multiple":v=f;default:f!==E&&Pe(e,a,d,f,o,E)}a=w,i=v,o=B,z!=null?os(e,!!i,z,!1):!!o!=!!i&&(a!=null?os(e,!!i,a,!0):os(e,!!i,i?[]:"",!1));return;case"textarea":B=z=null;for(w in i)if(d=i[w],i.hasOwnProperty(w)&&d!=null&&!o.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Pe(e,a,w,null,o,d)}for(v in o)if(d=o[v],f=i[v],o.hasOwnProperty(v)&&(d!=null||f!=null))switch(v){case"value":z=d;break;case"defaultValue":B=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(n(91));break;default:d!==f&&Pe(e,a,v,d,o,f)}Hd(e,z,B);return;case"option":for(var ge in i)if(z=i[ge],i.hasOwnProperty(ge)&&z!=null&&!o.hasOwnProperty(ge))switch(ge){case"selected":e.selected=!1;break;default:Pe(e,a,ge,null,o,z)}for(E in o)if(z=o[E],B=i[E],o.hasOwnProperty(E)&&z!==B&&(z!=null||B!=null))switch(E){case"selected":e.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:Pe(e,a,E,z,o,B)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ue in i)z=i[ue],i.hasOwnProperty(ue)&&z!=null&&!o.hasOwnProperty(ue)&&Pe(e,a,ue,null,o,z);for(L in o)if(z=o[L],B=i[L],o.hasOwnProperty(L)&&z!==B&&(z!=null||B!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(n(137,a));break;default:Pe(e,a,L,z,o,B)}return;default:if(Oo(a)){for(var $e in i)z=i[$e],i.hasOwnProperty($e)&&z!==void 0&&!o.hasOwnProperty($e)&&fu(e,a,$e,void 0,o,z);for(V in o)z=o[V],B=i[V],!o.hasOwnProperty(V)||z===B||z===void 0&&B===void 0||fu(e,a,V,z,o,B);return}}for(var R in i)z=i[R],i.hasOwnProperty(R)&&z!=null&&!o.hasOwnProperty(R)&&Pe(e,a,R,null,o,z);for(F in o)z=o[F],B=i[F],!o.hasOwnProperty(F)||z===B||z==null&&B==null||Pe(e,a,F,z,o,B)}var mu=null,gu=null;function Ml(e){return e.nodeType===9?e:e.ownerDocument}function Vm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Qm(e,a){if(e===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&a==="foreignObject"?0:e}function yu(e,a){return e==="textarea"||e==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var pu=null;function Zp(){var e=window.event;return e&&e.type==="popstate"?e===pu?!1:(pu=e,!0):(pu=null,!1)}var Gm=typeof setTimeout=="function"?setTimeout:void 0,ev=typeof clearTimeout=="function"?clearTimeout:void 0,Km=typeof Promise=="function"?Promise:void 0,tv=typeof queueMicrotask=="function"?queueMicrotask:typeof Km!="undefined"?function(e){return Km.resolve(null).then(e).catch(av)}:Gm;function av(e){setTimeout(function(){throw e})}function pr(e){return e==="head"}function Fm(e,a){var i=a,o=0,d=0;do{var f=i.nextSibling;if(e.removeChild(i),f&&f.nodeType===8)if(i=f.data,i==="/$"){if(0<o&&8>o){i=o;var v=e.ownerDocument;if(i&1&&Zn(v.documentElement),i&2&&Zn(v.body),i&4)for(i=v.head,Zn(i),v=i.firstChild;v;){var w=v.nextSibling,E=v.nodeName;v[mn]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&v.rel.toLowerCase()==="stylesheet"||i.removeChild(v),v=w}}if(d===0){e.removeChild(f),li(a);return}d--}else i==="$"||i==="$?"||i==="$!"?d++:o=i.charCodeAt(0)-48;else o=0;i=f}while(i);li(a)}function vu(e){var a=e.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var i=a;switch(a=a.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":vu(i),_o(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function rv(e,a,i,o){for(;e.nodeType===1;){var d=i;if(e.nodeName.toLowerCase()!==a.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[mn])switch(a){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(a==="input"&&e.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=ya(e.nextSibling),e===null)break}return null}function sv(e,a,i){if(a==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=ya(e.nextSibling),e===null))return null;return e}function bu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function nv(e,a){var i=e.ownerDocument;if(e.data!=="$?"||i.readyState==="complete")a();else{var o=function(){a(),i.removeEventListener("DOMContentLoaded",o)};i.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function ya(e){for(;e!=null;e=e.nextSibling){var a=e.nodeType;if(a===1||a===3)break;if(a===8){if(a=e.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return e}var xu=null;function Xm(e){e=e.previousSibling;for(var a=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(a===0)return e;a--}else i==="/$"&&a++}e=e.previousSibling}return null}function Wm(e,a,i){switch(a=Ml(i),e){case"html":if(e=a.documentElement,!e)throw Error(n(452));return e;case"head":if(e=a.head,!e)throw Error(n(453));return e;case"body":if(e=a.body,!e)throw Error(n(454));return e;default:throw Error(n(451))}}function Zn(e){for(var a=e.attributes;a.length;)e.removeAttributeNode(a[0]);_o(e)}var da=new Map,Jm=new Set;function Ul(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ka=G.d;G.d={f:iv,r:lv,D:ov,C:cv,L:uv,m:dv,X:fv,S:hv,M:mv};function iv(){var e=Ka.f(),a=Tl();return e||a}function lv(e){var a=ss(e);a!==null&&a.tag===5&&a.type==="form"?vf(a):Ka.r(e)}var zs=typeof document=="undefined"?null:document;function Zm(e,a,i){var o=zs;if(o&&typeof a=="string"&&a){var d=sa(a);d='link[rel="'+e+'"][href="'+d+'"]',typeof i=="string"&&(d+='[crossorigin="'+i+'"]'),Jm.has(d)||(Jm.add(d),e={rel:e,crossOrigin:i,href:a},o.querySelector(d)===null&&(a=o.createElement("link"),Dt(a,"link",e),wt(a),o.head.appendChild(a)))}}function ov(e){Ka.D(e),Zm("dns-prefetch",e,null)}function cv(e,a){Ka.C(e,a),Zm("preconnect",e,a)}function uv(e,a,i){Ka.L(e,a,i);var o=zs;if(o&&e&&a){var d='link[rel="preload"][as="'+sa(a)+'"]';a==="image"&&i&&i.imageSrcSet?(d+='[imagesrcset="'+sa(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(d+='[imagesizes="'+sa(i.imageSizes)+'"]')):d+='[href="'+sa(e)+'"]';var f=d;switch(a){case"style":f=Ps(e);break;case"script":f=$s(e)}da.has(f)||(e=p({rel:"preload",href:a==="image"&&i&&i.imageSrcSet?void 0:e,as:a},i),da.set(f,e),o.querySelector(d)!==null||a==="style"&&o.querySelector(ei(f))||a==="script"&&o.querySelector(ti(f))||(a=o.createElement("link"),Dt(a,"link",e),wt(a),o.head.appendChild(a)))}}function dv(e,a){Ka.m(e,a);var i=zs;if(i&&e){var o=a&&typeof a.as=="string"?a.as:"script",d='link[rel="modulepreload"][as="'+sa(o)+'"][href="'+sa(e)+'"]',f=d;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=$s(e)}if(!da.has(f)&&(e=p({rel:"modulepreload",href:e},a),da.set(f,e),i.querySelector(d)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(ti(f)))return}o=i.createElement("link"),Dt(o,"link",e),wt(o),i.head.appendChild(o)}}}function hv(e,a,i){Ka.S(e,a,i);var o=zs;if(o&&e){var d=ns(o).hoistableStyles,f=Ps(e);a=a||"default";var v=d.get(f);if(!v){var w={loading:0,preload:null};if(v=o.querySelector(ei(f)))w.loading=5;else{e=p({rel:"stylesheet",href:e,"data-precedence":a},i),(i=da.get(f))&&wu(e,i);var E=v=o.createElement("link");wt(E),Dt(E,"link",e),E._p=new Promise(function(L,V){E.onload=L,E.onerror=V}),E.addEventListener("load",function(){w.loading|=1}),E.addEventListener("error",function(){w.loading|=2}),w.loading|=4,ql(v,a,o)}v={type:"stylesheet",instance:v,count:1,state:w},d.set(f,v)}}}function fv(e,a){Ka.X(e,a);var i=zs;if(i&&e){var o=ns(i).hoistableScripts,d=$s(e),f=o.get(d);f||(f=i.querySelector(ti(d)),f||(e=p({src:e,async:!0},a),(a=da.get(d))&&ju(e,a),f=i.createElement("script"),wt(f),Dt(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(d,f))}}function mv(e,a){Ka.M(e,a);var i=zs;if(i&&e){var o=ns(i).hoistableScripts,d=$s(e),f=o.get(d);f||(f=i.querySelector(ti(d)),f||(e=p({src:e,async:!0,type:"module"},a),(a=da.get(d))&&ju(e,a),f=i.createElement("script"),wt(f),Dt(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(d,f))}}function eg(e,a,i,o){var d=(d=He.current)?Ul(d):null;if(!d)throw Error(n(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(a=Ps(i.href),i=ns(d).hoistableStyles,o=i.get(a),o||(o={type:"style",instance:null,count:0,state:null},i.set(a,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=Ps(i.href);var f=ns(d).hoistableStyles,v=f.get(e);if(v||(d=d.ownerDocument||d,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,v),(f=d.querySelector(ei(e)))&&!f._p&&(v.instance=f,v.state.loading=5),da.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},da.set(e,i),f||gv(d,e,i,v.state))),a&&o===null)throw Error(n(528,""));return v}if(a&&o!==null)throw Error(n(529,""));return null;case"script":return a=i.async,i=i.src,typeof i=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=$s(i),i=ns(d).hoistableScripts,o=i.get(a),o||(o={type:"script",instance:null,count:0,state:null},i.set(a,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,e))}}function Ps(e){return'href="'+sa(e)+'"'}function ei(e){return'link[rel="stylesheet"]['+e+"]"}function tg(e){return p({},e,{"data-precedence":e.precedence,precedence:null})}function gv(e,a,i,o){e.querySelector('link[rel="preload"][as="style"]['+a+"]")?o.loading=1:(a=e.createElement("link"),o.preload=a,a.addEventListener("load",function(){return o.loading|=1}),a.addEventListener("error",function(){return o.loading|=2}),Dt(a,"link",i),wt(a),e.head.appendChild(a))}function $s(e){return'[src="'+sa(e)+'"]'}function ti(e){return"script[async]"+e}function ag(e,a,i){if(a.count++,a.instance===null)switch(a.type){case"style":var o=e.querySelector('style[data-href~="'+sa(i.href)+'"]');if(o)return a.instance=o,wt(o),o;var d=p({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),wt(o),Dt(o,"style",d),ql(o,i.precedence,e),a.instance=o;case"stylesheet":d=Ps(i.href);var f=e.querySelector(ei(d));if(f)return a.state.loading|=4,a.instance=f,wt(f),f;o=tg(i),(d=da.get(d))&&wu(o,d),f=(e.ownerDocument||e).createElement("link"),wt(f);var v=f;return v._p=new Promise(function(w,E){v.onload=w,v.onerror=E}),Dt(f,"link",o),a.state.loading|=4,ql(f,i.precedence,e),a.instance=f;case"script":return f=$s(i.src),(d=e.querySelector(ti(f)))?(a.instance=d,wt(d),d):(o=i,(d=da.get(f))&&(o=p({},i),ju(o,d)),e=e.ownerDocument||e,d=e.createElement("script"),wt(d),Dt(d,"link",o),e.head.appendChild(d),a.instance=d);case"void":return null;default:throw Error(n(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(o=a.instance,a.state.loading|=4,ql(o,i.precedence,e));return a.instance}function ql(e,a,i){for(var o=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=o.length?o[o.length-1]:null,f=d,v=0;v<o.length;v++){var w=o[v];if(w.dataset.precedence===a)f=w;else if(f!==d)break}f?f.parentNode.insertBefore(e,f.nextSibling):(a=i.nodeType===9?i.head:i,a.insertBefore(e,a.firstChild))}function wu(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.title==null&&(e.title=a.title)}function ju(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.integrity==null&&(e.integrity=a.integrity)}var Ll=null;function rg(e,a,i){if(Ll===null){var o=new Map,d=Ll=new Map;d.set(i,o)}else d=Ll,o=d.get(i),o||(o=new Map,d.set(i,o));if(o.has(e))return o;for(o.set(e,null),i=i.getElementsByTagName(e),d=0;d<i.length;d++){var f=i[d];if(!(f[mn]||f[kt]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(a)||"";v=e+v;var w=o.get(v);w?w.push(f):o.set(v,[f])}}return o}function sg(e,a,i){e=e.ownerDocument||e,e.head.insertBefore(i,a==="title"?e.querySelector("head > title"):null)}function yv(e,a,i){if(i===1||a.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return e=a.disabled,typeof a.precedence=="string"&&e==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function ng(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var ai=null;function pv(){}function vv(e,a,i){if(ai===null)throw Error(n(475));var o=ai;if(a.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var d=Ps(i.href),f=e.querySelector(ei(d));if(f){e=f._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(o.count++,o=zl.bind(o),e.then(o,o)),a.state.loading|=4,a.instance=f,wt(f);return}f=e.ownerDocument||e,i=tg(i),(d=da.get(d))&&wu(i,d),f=f.createElement("link"),wt(f);var v=f;v._p=new Promise(function(w,E){v.onload=w,v.onerror=E}),Dt(f,"link",i),a.instance=f}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(a,e),(e=a.state.preload)&&(a.state.loading&3)===0&&(o.count++,a=zl.bind(o),e.addEventListener("load",a),e.addEventListener("error",a))}}function bv(){if(ai===null)throw Error(n(475));var e=ai;return e.stylesheets&&e.count===0&&_u(e,e.stylesheets),0<e.count?function(a){var i=setTimeout(function(){if(e.stylesheets&&_u(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(i)}}:null}function zl(){if(this.count--,this.count===0){if(this.stylesheets)_u(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Pl=null;function _u(e,a){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Pl=new Map,a.forEach(xv,e),Pl=null,zl.call(e))}function xv(e,a){if(!(a.state.loading&4)){var i=Pl.get(e);if(i)var o=i.get(null);else{i=new Map,Pl.set(e,i);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var v=d[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(i.set(v.dataset.precedence,v),o=v)}o&&i.set(null,o)}d=a.instance,v=d.getAttribute("data-precedence"),f=i.get(v)||o,f===o&&i.set(null,d),i.set(v,d),this.count++,o=zl.bind(this),d.addEventListener("load",o),d.addEventListener("error",o),f?f.parentNode.insertBefore(d,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),a.state.loading|=4}}var ri={$$typeof:M,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function wv(e,a,i,o,d,f,v,w){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bo(0),this.hiddenUpdates=bo(null),this.identifierPrefix=o,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function ig(e,a,i,o,d,f,v,w,E,L,V,F){return e=new wv(e,a,i,v,w,E,L,F),a=1,f===!0&&(a|=24),f=Yt(3,null,null,a),e.current=f,f.stateNode=e,a=sc(),a.refCount++,e.pooledCache=a,a.refCount++,f.memoizedState={element:o,isDehydrated:i,cache:a},oc(f),e}function lg(e){return e?(e=ps,e):ps}function og(e,a,i,o,d,f){d=lg(d),o.context===null?o.context=d:o.pendingContext=d,o=sr(a),o.payload={element:i},f=f===void 0?null:f,f!==null&&(o.callback=f),i=nr(e,o,a),i!==null&&(Ft(i,e,a),kn(i,e,a))}function cg(e,a){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<a?i:a}}function Su(e,a){cg(e,a),(e=e.alternate)&&cg(e,a)}function ug(e){if(e.tag===13){var a=ys(e,67108864);a!==null&&Ft(a,e,67108864),Su(e,67108864)}}var $l=!0;function jv(e,a,i,o){var d=H.T;H.T=null;var f=G.p;try{G.p=2,Nu(e,a,i,o)}finally{G.p=f,H.T=d}}function _v(e,a,i,o){var d=H.T;H.T=null;var f=G.p;try{G.p=8,Nu(e,a,i,o)}finally{G.p=f,H.T=d}}function Nu(e,a,i,o){if($l){var d=Tu(o);if(d===null)hu(e,a,o,Bl,i),hg(e,o);else if(Nv(d,e,a,i,o))o.stopPropagation();else if(hg(e,o),a&4&&-1<Sv.indexOf(e)){for(;d!==null;){var f=ss(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=Or(f.pendingLanes);if(v!==0){var w=f;for(w.pendingLanes|=2,w.entangledLanes|=2;v;){var E=1<<31-Et(v);w.entanglements[1]|=E,v&=~E}Ea(f),(ke&6)===0&&(Sl=at()+500,Xn(0))}}break;case 13:w=ys(f,2),w!==null&&Ft(w,f,2),Tl(),Su(f,2)}if(f=Tu(o),f===null&&hu(e,a,o,Bl,i),f===d)break;d=f}d!==null&&o.stopPropagation()}else hu(e,a,o,null,i)}}function Tu(e){return e=Ao(e),Eu(e)}var Bl=null;function Eu(e){if(Bl=null,e=rs(e),e!==null){var a=u(e);if(a===null)e=null;else{var i=a.tag;if(i===13){if(e=h(a),e!==null)return e;e=null}else if(i===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;e=null}else a!==e&&(e=null)}}return Bl=e,null}function dg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pe()){case Ve:return 2;case ha:return 8;case fa:case ea:return 32;case Ja:return 268435456;default:return 32}default:return 32}}var Cu=!1,vr=null,br=null,xr=null,si=new Map,ni=new Map,wr=[],Sv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hg(e,a){switch(e){case"focusin":case"focusout":vr=null;break;case"dragenter":case"dragleave":br=null;break;case"mouseover":case"mouseout":xr=null;break;case"pointerover":case"pointerout":si.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":ni.delete(a.pointerId)}}function ii(e,a,i,o,d,f){return e===null||e.nativeEvent!==f?(e={blockedOn:a,domEventName:i,eventSystemFlags:o,nativeEvent:f,targetContainers:[d]},a!==null&&(a=ss(a),a!==null&&ug(a)),e):(e.eventSystemFlags|=o,a=e.targetContainers,d!==null&&a.indexOf(d)===-1&&a.push(d),e)}function Nv(e,a,i,o,d){switch(a){case"focusin":return vr=ii(vr,e,a,i,o,d),!0;case"dragenter":return br=ii(br,e,a,i,o,d),!0;case"mouseover":return xr=ii(xr,e,a,i,o,d),!0;case"pointerover":var f=d.pointerId;return si.set(f,ii(si.get(f)||null,e,a,i,o,d)),!0;case"gotpointercapture":return f=d.pointerId,ni.set(f,ii(ni.get(f)||null,e,a,i,o,d)),!0}return!1}function fg(e){var a=rs(e.target);if(a!==null){var i=u(a);if(i!==null){if(a=i.tag,a===13){if(a=h(i),a!==null){e.blockedOn=a,vy(e.priority,function(){if(i.tag===13){var o=Kt();o=xo(o);var d=ys(i,o);d!==null&&Ft(d,i,o),Su(i,o)}});return}}else if(a===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Hl(e){if(e.blockedOn!==null)return!1;for(var a=e.targetContainers;0<a.length;){var i=Tu(e.nativeEvent);if(i===null){i=e.nativeEvent;var o=new i.constructor(i.type,i);Do=o,i.target.dispatchEvent(o),Do=null}else return a=ss(i),a!==null&&ug(a),e.blockedOn=i,!1;a.shift()}return!0}function mg(e,a,i){Hl(e)&&i.delete(a)}function Tv(){Cu=!1,vr!==null&&Hl(vr)&&(vr=null),br!==null&&Hl(br)&&(br=null),xr!==null&&Hl(xr)&&(xr=null),si.forEach(mg),ni.forEach(mg)}function Il(e,a){e.blockedOn===a&&(e.blockedOn=null,Cu||(Cu=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Tv)))}var Yl=null;function gg(e){Yl!==e&&(Yl=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Yl===e&&(Yl=null);for(var a=0;a<e.length;a+=3){var i=e[a],o=e[a+1],d=e[a+2];if(typeof o!="function"){if(Eu(o||i)===null)continue;break}var f=ss(i);f!==null&&(e.splice(a,3),a-=3,Ec(f,{pending:!0,data:d,method:i.method,action:o},o,d))}}))}function li(e){function a(E){return Il(E,e)}vr!==null&&Il(vr,e),br!==null&&Il(br,e),xr!==null&&Il(xr,e),si.forEach(a),ni.forEach(a);for(var i=0;i<wr.length;i++){var o=wr[i];o.blockedOn===e&&(o.blockedOn=null)}for(;0<wr.length&&(i=wr[0],i.blockedOn===null);)fg(i),i.blockedOn===null&&wr.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(o=0;o<i.length;o+=3){var d=i[o],f=i[o+1],v=d[qt]||null;if(typeof f=="function")v||gg(i);else if(v){var w=null;if(f&&f.hasAttribute("formAction")){if(d=f,v=f[qt]||null)w=v.formAction;else if(Eu(d)!==null)continue}else w=v.action;typeof w=="function"?i[o+1]=w:(i.splice(o,3),o-=3),gg(i)}}}function Ou(e){this._internalRoot=e}Vl.prototype.render=Ou.prototype.render=function(e){var a=this._internalRoot;if(a===null)throw Error(n(409));var i=a.current,o=Kt();og(i,o,e,a,null,null)},Vl.prototype.unmount=Ou.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var a=e.containerInfo;og(e.current,2,null,e,null,null),Tl(),a[as]=null}};function Vl(e){this._internalRoot=e}Vl.prototype.unstable_scheduleHydration=function(e){if(e){var a=Ad();e={blockedOn:null,target:e,priority:a};for(var i=0;i<wr.length&&a!==0&&a<wr[i].priority;i++);wr.splice(i,0,e),i===0&&fg(e)}};var yg=t.version;if(yg!=="19.1.0")throw Error(n(527,yg,"19.1.0"));G.findDOMNode=function(e){var a=e._reactInternals;if(a===void 0)throw typeof e.render=="function"?Error(n(188)):(e=Object.keys(e).join(","),Error(n(268,e)));return e=m(a),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var Ev={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Ql=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ql.isDisabled&&Ql.supportsFiber)try{Ke=Ql.inject(Ev),Le=Ql}catch(e){}}return ci.createRoot=function(e,a){if(!l(e))throw Error(n(299));var i=!1,o="",d=Rf,f=kf,v=Mf,w=null;return a!=null&&(a.unstable_strictMode===!0&&(i=!0),a.identifierPrefix!==void 0&&(o=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(f=a.onCaughtError),a.onRecoverableError!==void 0&&(v=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(w=a.unstable_transitionCallbacks)),a=ig(e,1,!1,null,null,i,o,d,f,v,w,null),e[as]=a.current,du(e),new Ou(a)},ci.hydrateRoot=function(e,a,i){if(!l(e))throw Error(n(299));var o=!1,d="",f=Rf,v=kf,w=Mf,E=null,L=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(v=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(E=i.unstable_transitionCallbacks),i.formState!==void 0&&(L=i.formState)),a=ig(e,1,!0,a,i!=null?i:null,o,d,f,v,w,E,L),a.context=lg(null),i=a.current,o=Kt(),o=xo(o),d=sr(o),d.callback=null,nr(i,d,o),i=o,a.current.lanes=i,fn(a,i),Ea(a),e[as]=a.current,du(e),new Vl(a)},ci.version="19.1.0",ci}var wg;function ib(){if(wg)return Au.exports;wg=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Au.exports=nb(),Au.exports}var lb=ib();const ob=d0(lb);var cb=function(){return null};class ub extends k.Component{constructor(r){super(r);ae(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});ae(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r,errorInfo:null}}componentDidCatch(r,n){console.error("ErrorBoundary caught an error:",r,n),this.setState({error:r,errorInfo:n}),this.props.onError&&this.props.onError(r,n)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:c.jsx("div",{className:"error-boundary",children:c.jsxs("div",{className:"error-container",children:[c.jsx("div",{className:"error-icon",children:""}),c.jsx("h2",{children:"Algo sali mal"}),c.jsx("p",{className:"error-message",children:"Ha ocurrido un error inesperado en la aplicacin."}),this.state.error&&c.jsxs("details",{className:"error-details",children:[c.jsx("summary",{children:"Detalles del error"}),c.jsxs("div",{className:"error-stack",children:[c.jsx("strong",{children:"Error:"})," ",this.state.error.message,this.state.errorInfo&&c.jsxs(c.Fragment,{children:[c.jsx("br",{}),c.jsx("strong",{children:"Stack:"}),c.jsx("pre",{children:this.state.errorInfo.componentStack})]})]})]}),c.jsxs("div",{className:"error-actions",children:[c.jsx("button",{onClick:this.handleRetry,className:"retry-btn",children:" Reintentar"}),c.jsx("button",{onClick:this.handleReload,className:"reload-btn",children:" Recargar Pgina"})]}),c.jsx("div",{className:"error-help",children:c.jsx("p",{children:"Si el problema persiste, contacta al equipo de desarrollo."})})]})}):this.props.children}}function fo(s,t){var r={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(r[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,n=Object.getOwnPropertySymbols(s);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(s,n[l])&&(r[n[l]]=s[n[l]]);return r}function db(s,t,r,n){function l(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function g(p){try{y(n.next(p))}catch(b){h(b)}}function m(p){try{y(n.throw(p))}catch(b){h(b)}}function y(p){p.done?u(p.value):l(p.value).then(g,m)}y((n=n.apply(s,t||[])).next())})}const hb=s=>s?(...t)=>s(...t):(...t)=>fetch(...t);class hd extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class fb extends hd{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class jg extends hd{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class _g extends hd{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Fu;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(Fu||(Fu={}));class mb{constructor(t,{headers:r={},customFetch:n,region:l=Fu.Any}={}){this.url=t,this.headers=r,this.region=l,this.fetch=hb(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return db(this,arguments,void 0,function*(r,n={}){var l;let u,h;try{const{headers:g,method:m,body:y,signal:p,timeout:b}=n;let x={},{region:j}=n;j||(j=this.region);const S=new URL(`${this.url}/${r}`);j&&j!=="any"&&(x["x-region"]=j,S.searchParams.set("forceFunctionRegion",j));let C;y&&(g&&!Object.prototype.hasOwnProperty.call(g,"Content-Type")||!g)?typeof Blob!="undefined"&&y instanceof Blob||y instanceof ArrayBuffer?(x["Content-Type"]="application/octet-stream",C=y):typeof y=="string"?(x["Content-Type"]="text/plain",C=y):typeof FormData!="undefined"&&y instanceof FormData?C=y:(x["Content-Type"]="application/json",C=JSON.stringify(y)):C=y;let A=p;b&&(h=new AbortController,u=setTimeout(()=>h.abort(),b),p?(A=h.signal,p.addEventListener("abort",()=>h.abort())):A=h.signal);const q=yield this.fetch(S.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},x),this.headers),g),body:C,signal:A}).catch(I=>{throw new fb(I)}),P=q.headers.get("x-relay-error");if(P&&P==="true")throw new jg(q);if(!q.ok)throw new _g(q);let M=((l=q.headers.get("Content-Type"))!==null&&l!==void 0?l:"text/plain").split(";")[0].trim(),Q;return M==="application/json"?Q=yield q.json():M==="application/octet-stream"||M==="application/pdf"?Q=yield q.blob():M==="text/event-stream"?Q=q:M==="multipart/form-data"?Q=yield q.formData():Q=yield q.text(),{data:Q,error:null,response:q}}catch(g){return{data:null,error:g,response:g instanceof _g||g instanceof jg?g.context:void 0}}finally{u&&clearTimeout(u)}})}}var gb=class extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}},yb=class{constructor(s){var t,r;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(t=s.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=s.signal,this.isMaybeSingle=(r=s.isMaybeSingle)!==null&&r!==void 0?r:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,t){return this.headers=new Headers(this.headers),this.headers.set(s,t),this}then(s,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let l=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(u=>_(this,null,function*(){let h=null,g=null,m=null,y=u.status,p=u.statusText;if(u.ok){var b,x;if(r.method!=="HEAD"){var j;const q=yield u.text();q===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((j=r.headers.get("Accept"))===null||j===void 0)&&j.includes("application/vnd.pgrst.plan+text"))?g=q:g=JSON.parse(q))}const C=(b=r.headers.get("Prefer"))===null||b===void 0?void 0:b.match(/count=(exact|planned|estimated)/),A=(x=u.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");C&&A&&A.length>1&&(m=parseInt(A[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(g)&&(g.length>1?(h={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,m=null,y=406,p="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{var S;const C=yield u.text();try{h=JSON.parse(C),Array.isArray(h)&&u.status===404&&(g=[],h=null,y=200,p="OK")}catch(A){u.status===404&&C===""?(y=204,p="No Content"):h={message:C}}if(h&&r.isMaybeSingle&&(!(h==null||(S=h.details)===null||S===void 0)&&S.includes("0 rows"))&&(h=null,y=200,p="OK"),h&&r.shouldThrowOnError)throw new gb(h)}return{error:h,data:g,count:m,status:y,statusText:p}}));return this.shouldThrowOnError||(l=l.catch(u=>{var h;let g="";const m=u==null?void 0:u.cause;if(m){var y,p,b,x;const S=(y=m==null?void 0:m.message)!==null&&y!==void 0?y:"",C=(p=m==null?void 0:m.code)!==null&&p!==void 0?p:"";g=`${(b=u==null?void 0:u.name)!==null&&b!==void 0?b:"FetchError"}: ${u==null?void 0:u.message}`,g+=`

Caused by: ${(x=m==null?void 0:m.name)!==null&&x!==void 0?x:"Error"}: ${S}`,C&&(g+=` (${C})`),m!=null&&m.stack&&(g+=`
${m.stack}`)}else{var j;g=(j=u==null?void 0:u.stack)!==null&&j!==void 0?j:""}return{error:{message:`${(h=u==null?void 0:u.name)!==null&&h!==void 0?h:"FetchError"}: ${u==null?void 0:u.message}`,details:g,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),l.then(s,t)}returns(){return this}overrideTypes(){return this}},pb=class extends yb{select(s){let t=!1;const r=(s!=null?s:"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:l=n}={}){const u=l?`${l}.order`:"order",h=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${h?`${h},`:""}${s}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r=="undefined"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${s}`),this}range(s,t,{foreignTable:r,referencedTable:n=r}={}){const l=typeof n=="undefined"?"offset":`${n}.offset`,u=typeof n=="undefined"?"limit":`${n}.limit`;return this.url.searchParams.set(l,`${s}`),this.url.searchParams.set(u,`${t-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:l=!1,format:u="text"}={}){var h;const g=[s?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,l?"wal":null].filter(Boolean).join("|"),m=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${m}"; options=${g};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}};const Sg=new RegExp("[,()]");var Ks=class extends pb{eq(s,t){return this.url.searchParams.append(s,`eq.${t}`),this}neq(s,t){return this.url.searchParams.append(s,`neq.${t}`),this}gt(s,t){return this.url.searchParams.append(s,`gt.${t}`),this}gte(s,t){return this.url.searchParams.append(s,`gte.${t}`),this}lt(s,t){return this.url.searchParams.append(s,`lt.${t}`),this}lte(s,t){return this.url.searchParams.append(s,`lte.${t}`),this}like(s,t){return this.url.searchParams.append(s,`like.${t}`),this}likeAllOf(s,t){return this.url.searchParams.append(s,`like(all).{${t.join(",")}}`),this}likeAnyOf(s,t){return this.url.searchParams.append(s,`like(any).{${t.join(",")}}`),this}ilike(s,t){return this.url.searchParams.append(s,`ilike.${t}`),this}ilikeAllOf(s,t){return this.url.searchParams.append(s,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(s,t){return this.url.searchParams.append(s,`ilike(any).{${t.join(",")}}`),this}regexMatch(s,t){return this.url.searchParams.append(s,`match.${t}`),this}regexIMatch(s,t){return this.url.searchParams.append(s,`imatch.${t}`),this}is(s,t){return this.url.searchParams.append(s,`is.${t}`),this}isDistinct(s,t){return this.url.searchParams.append(s,`isdistinct.${t}`),this}in(s,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&Sg.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(s,`in.(${r})`),this}notIn(s,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&Sg.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(s,`not.in.(${r})`),this}contains(s,t){return typeof t=="string"?this.url.searchParams.append(s,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(s,`cs.{${t.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(t)}`),this}containedBy(s,t){return typeof t=="string"?this.url.searchParams.append(s,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(s,`cd.{${t.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(t)}`),this}rangeGt(s,t){return this.url.searchParams.append(s,`sr.${t}`),this}rangeGte(s,t){return this.url.searchParams.append(s,`nxl.${t}`),this}rangeLt(s,t){return this.url.searchParams.append(s,`sl.${t}`),this}rangeLte(s,t){return this.url.searchParams.append(s,`nxr.${t}`),this}rangeAdjacent(s,t){return this.url.searchParams.append(s,`adj.${t}`),this}overlaps(s,t){return typeof t=="string"?this.url.searchParams.append(s,`ov.${t}`):this.url.searchParams.append(s,`ov.{${t.join(",")}}`),this}textSearch(s,t,{config:r,type:n}={}){let l="";n==="plain"?l="pl":n==="phrase"?l="ph":n==="websearch"&&(l="w");const u=r===void 0?"":`(${r})`;return this.url.searchParams.append(s,`${l}fts${u}.${t}`),this}match(s){return Object.entries(s).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(s,t,r){return this.url.searchParams.append(s,`not.${t}.${r}`),this}or(s,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${s})`),this}filter(s,t,r){return this.url.searchParams.append(s,`${t}.${r}`),this}},vb=class{constructor(s,{headers:t={},schema:r,fetch:n}){this.url=s,this.headers=new Headers(t),this.schema=r,this.fetch=n}select(s,t){const{head:r=!1,count:n}=t!=null?t:{},l=r?"HEAD":"GET";let u=!1;const h=(s!=null?s:"*").split("").map(g=>/\s/.test(g)&&!u?"":(g==='"'&&(u=!u),g)).join("");return this.url.searchParams.set("select",h),n&&this.headers.append("Prefer",`count=${n}`),new Ks({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:t,defaultToNull:r=!0}={}){var n;const l="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const u=s.reduce((h,g)=>h.concat(Object.keys(g)),[]);if(u.length>0){const h=[...new Set(u)].map(g=>`"${g}"`);this.url.searchParams.set("columns",h.join(","))}}return new Ks({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(s,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:l=!0}={}){var u;const h="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),n&&this.headers.append("Prefer",`count=${n}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const g=s.reduce((m,y)=>m.concat(Object.keys(y)),[]);if(g.length>0){const m=[...new Set(g)].map(y=>`"${y}"`);this.url.searchParams.set("columns",m.join(","))}}return new Ks({method:h,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(s,{count:t}={}){var r;const n="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new Ks({method:n,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:s}={}){var t;const r="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new Ks({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},bb=class m0{constructor(t,{headers:r={},schema:n,fetch:l}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=l}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new vb(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new m0(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:l=!1,count:u}={}){var h;let g;const m=new URL(`${this.url}/rpc/${t}`);let y;n||l?(g=n?"HEAD":"GET",Object.entries(r).filter(([b,x])=>x!==void 0).map(([b,x])=>[b,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([b,x])=>{m.searchParams.append(b,x)})):(g="POST",y=r);const p=new Headers(this.headers);return u&&p.set("Prefer",`count=${u}`),new Ks({method:g,url:m,headers:p,schema:this.schemaName,body:y,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}};class xb{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket!="undefined")return{type:"native",constructor:WebSocket};if(typeof globalThis!="undefined"&&typeof globalThis.WebSocket!="undefined")return{type:"native",constructor:globalThis.WebSocket};if(typeof global!="undefined"&&typeof global.WebSocket!="undefined")return{type:"native",constructor:global.WebSocket};if(typeof globalThis!="undefined"&&typeof globalThis.WebSocketPair!="undefined"&&typeof globalThis.WebSocket=="undefined")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis!="undefined"&&globalThis.EdgeRuntime||typeof navigator!="undefined"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process!="undefined"){const r=process.versions;if(r&&r.node){const n=r.node,l=parseInt(n.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket!="undefined"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch(t){return!1}}}const wb="2.89.0",jb=`realtime-js/${wb}`,g0="1.0.0",_b="2.0.0",Ng=g0,Xu=1e4,Sb=1e3,Nb=100;var Sr;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(Sr||(Sr={}));var vt;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(vt||(vt={}));var ba;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(ba||(ba={}));var Wu;(function(s){s.websocket="websocket"})(Wu||(Wu={}));var Wr;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(Wr||(Wr={}));class Tb{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t!=null?t:[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const l=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,l)}_encodeJsonUserBroadcastPush(t){var r,n;const l=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},h=new TextEncoder().encode(JSON.stringify(l)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,h)}_encodeUserBroadcastPush(t,r,n){var l,u;const h=t.topic,g=(l=t.ref)!==null&&l!==void 0?l:"",m=(u=t.join_ref)!==null&&u!==void 0?u:"",y=t.payload.event,p=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},b=Object.keys(p).length===0?"":JSON.stringify(p);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`ref length ${g.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`topic length ${h.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`userEvent length ${y.length} exceeds maximum of 255`);if(b.length>255)throw new Error(`metadata length ${b.length} exceeds maximum of 255`);const x=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+g.length+h.length+y.length+b.length,j=new ArrayBuffer(this.HEADER_LENGTH+x);let S=new DataView(j),C=0;S.setUint8(C++,this.KINDS.userBroadcastPush),S.setUint8(C++,m.length),S.setUint8(C++,g.length),S.setUint8(C++,h.length),S.setUint8(C++,y.length),S.setUint8(C++,b.length),S.setUint8(C++,r),Array.from(m,q=>S.setUint8(C++,q.charCodeAt(0))),Array.from(g,q=>S.setUint8(C++,q.charCodeAt(0))),Array.from(h,q=>S.setUint8(C++,q.charCodeAt(0))),Array.from(y,q=>S.setUint8(C++,q.charCodeAt(0))),Array.from(b,q=>S.setUint8(C++,q.charCodeAt(0)));var A=new Uint8Array(j.byteLength+n.byteLength);return A.set(new Uint8Array(j),0),A.set(new Uint8Array(n),j.byteLength),A.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[l,u,h,g,m]=n;return r({join_ref:l,ref:u,topic:h,event:g,payload:m})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),l=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,l)}}_decodeUserBroadcast(t,r,n){const l=r.getUint8(1),u=r.getUint8(2),h=r.getUint8(3),g=r.getUint8(4);let m=this.HEADER_LENGTH+4;const y=n.decode(t.slice(m,m+l));m=m+l;const p=n.decode(t.slice(m,m+u));m=m+u;const b=n.decode(t.slice(m,m+h));m=m+h;const x=t.slice(m,t.byteLength),j=g===this.JSON_ENCODING?JSON.parse(n.decode(x)):x,S={type:this.BROADCAST_EVENT,event:p,payload:j};return h>0&&(S.meta=JSON.parse(b)),{join_ref:null,ref:null,topic:y,event:this.BROADCAST_EVENT,payload:S}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class y0{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ge;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(Ge||(Ge={}));const Tg=(s,t,r={})=>{var n;const l=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((u,h)=>(u[h]=Eb(h,s,t,l),u),{}):{}},Eb=(s,t,r,n)=>{const l=t.find(g=>g.name===s),u=l==null?void 0:l.type,h=r[s];return u&&!n.includes(u)?p0(u,h):Ju(h)},p0=(s,t)=>{if(s.charAt(0)==="_"){const r=s.slice(1,s.length);return Ab(t,r)}switch(s){case Ge.bool:return Cb(t);case Ge.float4:case Ge.float8:case Ge.int2:case Ge.int4:case Ge.int8:case Ge.numeric:case Ge.oid:return Ob(t);case Ge.json:case Ge.jsonb:return Db(t);case Ge.timestamp:return Rb(t);case Ge.abstime:case Ge.date:case Ge.daterange:case Ge.int4range:case Ge.int8range:case Ge.money:case Ge.reltime:case Ge.text:case Ge.time:case Ge.timestamptz:case Ge.timetz:case Ge.tsrange:case Ge.tstzrange:return Ju(t);default:return Ju(t)}},Ju=s=>s,Cb=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},Ob=s=>{if(typeof s=="string"){const t=parseFloat(s);if(!Number.isNaN(t))return t}return s},Db=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(t){return s}return s},Ab=(s,t)=>{if(typeof s!="string")return s;const r=s.length-1,n=s[r];if(s[0]==="{"&&n==="}"){let u;const h=s.slice(1,r);try{u=JSON.parse("["+h+"]")}catch(g){u=h?h.split(","):[]}return u.map(g=>p0(t,g))}return s},Rb=s=>typeof s=="string"?s.replace(" ","T"):s,v0=s=>{const t=new URL(s);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Mu{constructor(t,r,n={},l=Xu){this.channel=t,this.event=r,this.payload=n,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Eg;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(Eg||(Eg={}));class yi{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},l=>{const{onJoin:u,onLeave:h,onSync:g}=this.caller;this.joinRef=this.channel._joinRef(),this.state=yi.syncState(this.state,l,u,h),this.pendingDiffs.forEach(m=>{this.state=yi.syncDiff(this.state,m,u,h)}),this.pendingDiffs=[],g()}),this.channel._on(n.diff,{},l=>{const{onJoin:u,onLeave:h,onSync:g}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=yi.syncDiff(this.state,l,u,h),g())}),this.onJoin((l,u,h)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:u,newPresences:h})}),this.onLeave((l,u,h)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:u,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,l){const u=this.cloneDeep(t),h=this.transformState(r),g={},m={};return this.map(u,(y,p)=>{h[y]||(m[y]=p)}),this.map(h,(y,p)=>{const b=u[y];if(b){const x=p.map(A=>A.presence_ref),j=b.map(A=>A.presence_ref),S=p.filter(A=>j.indexOf(A.presence_ref)<0),C=b.filter(A=>x.indexOf(A.presence_ref)<0);S.length>0&&(g[y]=S),C.length>0&&(m[y]=C)}else g[y]=p}),this.syncDiff(u,{joins:g,leaves:m},n,l)}static syncDiff(t,r,n,l){const{joins:u,leaves:h}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),l||(l=()=>{}),this.map(u,(g,m)=>{var y;const p=(y=t[g])!==null&&y!==void 0?y:[];if(t[g]=this.cloneDeep(m),p.length>0){const b=t[g].map(j=>j.presence_ref),x=p.filter(j=>b.indexOf(j.presence_ref)<0);t[g].unshift(...x)}n(g,p,m)}),this.map(h,(g,m)=>{let y=t[g];if(!y)return;const p=m.map(b=>b.presence_ref);y=y.filter(b=>p.indexOf(b.presence_ref)<0),t[g]=y,l(g,y,m),y.length===0&&delete t[g]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const l=t[n];return"metas"in l?r[n]=l.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):r[n]=l,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Cg;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(Cg||(Cg={}));var pi;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(pi||(pi={}));var Fa;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(Fa||(Fa={}));class Ws{constructor(t,r={config:{}},n){var l,u;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=vt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Mu(this,ba.join,this.params,this.timeout),this.rejoinTimer=new y0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=vt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=vt.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=vt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ba.reply,{},(h,g)=>{this._trigger(this._replyEventName(g),h)}),this.presence=new yi(this),this.broadcastEndpointURL=v0(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((u=(l=this.params.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,l,u;if(this.socket.isConnected()||this.socket.connect(),this.state==vt.closed){const{config:{broadcast:h,presence:g,private:m}}=this.params,y=(l=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(j=>j.filter))!==null&&l!==void 0?l:[],p=!!this.bindings[pi.PRESENCE]&&this.bindings[pi.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,b={},x={broadcast:h,presence:Object.assign(Object.assign({},g),{enabled:p}),postgres_changes:y,private:m};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this._onError(j=>t==null?void 0:t(Fa.CHANNEL_ERROR,j)),this._onClose(()=>t==null?void 0:t(Fa.CLOSED)),this.updateJoinPayload(Object.assign({config:x},b)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",S=>_(this,[S],function*({postgres_changes:j}){var C;if(this.socket._isManualToken()||this.socket.setAuth(),j===void 0){t==null||t(Fa.SUBSCRIBED);return}else{const A=this.bindings.postgres_changes,q=(C=A==null?void 0:A.length)!==null&&C!==void 0?C:0,P=[];for(let M=0;M<q;M++){const Q=A[M],{filter:{event:I,schema:D,table:Y,filter:N}}=Q,T=j&&j[M];if(T&&T.event===I&&Ws.isFilterValueEqual(T.schema,D)&&Ws.isFilterValueEqual(T.table,Y)&&Ws.isFilterValueEqual(T.filter,N))P.push(Object.assign(Object.assign({},Q),{id:T.id}));else{this.unsubscribe(),this.state=vt.errored,t==null||t(Fa.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=P,t&&t(Fa.SUBSCRIBED);return}})).receive("error",j=>{this.state=vt.errored,t==null||t(Fa.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(j).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Fa.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(n){return _(this,arguments,function*(t,r={}){return yield this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)})}untrack(){return _(this,arguments,function*(t={}){return yield this.send({type:"presence",event:"untrack"},t)})}on(t,r,n){return this.state===vt.joined&&t===pi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>_(this,null,function*(){return yield this.subscribe()}))),this._on(t,r,n)}httpSend(l,u){return _(this,arguments,function*(t,r,n={}){var h;if(r==null)return Promise.reject("Payload is required for httpSend()");const g={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(g.Authorization=`Bearer ${this.socket.accessTokenValue}`);const m={method:"POST",headers:g,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},y=yield this._fetchWithTimeout(this.broadcastEndpointURL,m,(h=n.timeout)!==null&&h!==void 0?h:this.timeout);if(y.status===202)return{success:!0};let p=y.statusText;try{const b=yield y.json();p=b.error||b.message||p}catch(b){}return Promise.reject(new Error(p))})}send(n){return _(this,arguments,function*(t,r={}){var l,u;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:h,payload:g}=t,m={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(m.Authorization=`Bearer ${this.socket.accessTokenValue}`);const y={method:"POST",headers:m,body:JSON.stringify({messages:[{topic:this.subTopic,event:h,payload:g,private:this.private}]})};try{const p=yield this._fetchWithTimeout(this.broadcastEndpointURL,y,(l=r.timeout)!==null&&l!==void 0?l:this.timeout);return yield(u=p.body)===null||u===void 0?void 0:u.cancel(),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(h=>{var g,m,y;const p=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((y=(m=(g=this.params)===null||g===void 0?void 0:g.config)===null||m===void 0?void 0:m.broadcast)===null||y===void 0)&&y.ack)&&h("ok"),p.receive("ok",()=>h("ok")),p.receive("error",()=>h("error")),p.receive("timeout",()=>h("timed out"))})})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=vt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ba.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(l=>{n=new Mu(this,ba.leave,{},t),n.receive("ok",()=>{r(),l("ok")}).receive("timeout",()=>{r(),l("timed out")}).receive("error",()=>{l("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=vt.closed,this.bindings={}}_fetchWithTimeout(t,r,n){return _(this,null,function*(){const l=new AbortController,u=setTimeout(()=>l.abort(),n),h=yield this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:l.signal}));return clearTimeout(u),h})}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new Mu(this,t,r,n);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Nb){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var l,u;const h=t.toLocaleLowerCase(),{close:g,error:m,leave:y,join:p}=ba;if(n&&[g,m,y,p].indexOf(h)>=0&&n!==this._joinRef())return;let x=this._onMessage(h,r,n);if(r&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(j=>{var S,C,A;return((S=j.filter)===null||S===void 0?void 0:S.event)==="*"||((A=(C=j.filter)===null||C===void 0?void 0:C.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===h}).map(j=>j.callback(x,n)):(u=this.bindings[h])===null||u===void 0||u.filter(j=>{var S,C,A,q,P,M;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in j){const Q=j.id,I=(S=j.filter)===null||S===void 0?void 0:S.event;return Q&&((C=r.ids)===null||C===void 0?void 0:C.includes(Q))&&(I==="*"||(I==null?void 0:I.toLocaleLowerCase())===((A=r.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const Q=(P=(q=j==null?void 0:j.filter)===null||q===void 0?void 0:q.event)===null||P===void 0?void 0:P.toLocaleLowerCase();return Q==="*"||Q===((M=r==null?void 0:r.event)===null||M===void 0?void 0:M.toLocaleLowerCase())}else return j.type.toLocaleLowerCase()===h}).map(j=>{if(typeof x=="object"&&"ids"in x){const S=x.data,{schema:C,table:A,commit_timestamp:q,type:P,errors:M}=S;x=Object.assign(Object.assign({},{schema:C,table:A,commit_timestamp:q,eventType:P,new:{},old:{},errors:M}),this._getPayloadRecords(S))}j.callback(x,n)})}_isClosed(){return this.state===vt.closed}_isJoined(){return this.state===vt.joined}_isJoining(){return this.state===vt.joining}_isLeaving(){return this.state===vt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const l=t.toLocaleLowerCase(),u={type:l,filter:r,callback:n};return this.bindings[l]?this.bindings[l].push(u):this.bindings[l]=[u],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(l=>{var u;return!(((u=l.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===n&&Ws.isEqual(l.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){const n=t!=null?t:void 0,l=r!=null?r:void 0;return n===l}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ba.close,{},t)}_onError(t){this._on(ba.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=vt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Tg(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Tg(t.columns,t.old_record)),r}}const Uu=()=>{},Gl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},kb=[1e3,2e3,5e3,1e4],Mb=1e4,Ub=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class qb{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Xu,this.transport=null,this.heartbeatIntervalMs=Gl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Uu,this.ref=0,this.reconnectTimer=null,this.vsn=Ng,this.logger=Uu,this.conn=null,this.sendBuffer=[],this.serializer=new Tb,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=l=>l?(...u)=>l(...u):(...u)=>fetch(...u),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Wu.websocket}`,this.httpEndpoint=v0(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=xb.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r!=null?r:""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}removeChannel(t){return _(this,null,function*(){const r=yield t.unsubscribe();return this.channels.length===0&&this.disconnect(),r})}removeAllChannels(){return _(this,null,function*(){const t=yield Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t})}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Sr.connecting:return Wr.Connecting;case Sr.open:return Wr.Open;case Sr.closing:return Wr.Closing;default:return Wr.Closed}}isConnected(){return this.connectionState()===Wr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,l=this.getChannels().find(u=>u.topic===n);if(l)return l;{const u=new Ws(`realtime:${t}`,r,this);return this.channels.push(u),u}}push(t){const{topic:r,event:n,payload:l,ref:u}=t,h=()=>{this.encode(t,g=>{var m;(m=this.conn)===null||m===void 0||m.send(g)})};this.log("push",`${r} ${n} (${u})`,l),this.isConnected()?h():this.sendBuffer.push(h)}setAuth(t=null){return _(this,null,function*(){this._authPromise=this._performAuth(t);try{yield this._authPromise}finally{this._authPromise=null}})}_isManualToken(){return this._manuallySetToken}sendHeartbeat(){return _(this,null,function*(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Sb,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Gl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")})}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(y){this.log("error","error in heartbeat callback",y)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:l,payload:u,ref:h}=r,g=h?`(${h})`:"",m=u.status||"";this.log("receive",`${m} ${n} ${l} ${g}`.trim(),u),this.channels.filter(y=>y._isMember(n)).forEach(y=>y._trigger(l,u,h)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Sr.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Sr.open||this.conn.readyState===Sr.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(ba.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",l=new URLSearchParams(r);return`${t}${n}${l}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([Ub],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}_performAuth(t=null){return _(this,null,function*(){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=yield this.accessToken()}catch(l){this.log("error","Error fetching access token from callback",l),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(l=>{const u={access_token:r,version:jb};r&&l.updateJoinPayload(u),l.joinedOnce&&l._isJoined()&&l._push(ba.access_token,{access_token:r})}))})}_waitForAuthIfNeeded(){return _(this,null,function*(){this._authPromise&&(yield this._authPromise)})}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(l){this.log("error",`error in ${t} callback`,l)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new y0(()=>_(this,null,function*(){setTimeout(()=>_(this,null,function*(){yield this._waitForAuthIfNeeded(),this.isConnected()||this.connect()}),Gl.RECONNECT_DELAY)}),this.reconnectAfterMs)}_initializeOptions(t){var r,n,l,u,h,g,m,y,p,b,x,j;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Xu,this.heartbeatIntervalMs=(l=t==null?void 0:t.heartbeatIntervalMs)!==null&&l!==void 0?l:Gl.HEARTBEAT_INTERVAL,this.worker=(u=t==null?void 0:t.worker)!==null&&u!==void 0?u:!1,this.accessToken=(h=t==null?void 0:t.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(g=t==null?void 0:t.heartbeatCallback)!==null&&g!==void 0?g:Uu,this.vsn=(m=t==null?void 0:t.vsn)!==null&&m!==void 0?m:Ng,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(y=t==null?void 0:t.reconnectAfterMs)!==null&&y!==void 0?y:S=>kb[S-1]||Mb,this.vsn){case g0:this.encode=(p=t==null?void 0:t.encode)!==null&&p!==void 0?p:(S,C)=>C(JSON.stringify(S)),this.decode=(b=t==null?void 0:t.decode)!==null&&b!==void 0?b:(S,C)=>C(JSON.parse(S));break;case _b:this.encode=(x=t==null?void 0:t.encode)!==null&&x!==void 0?x:this.serializer.encode.bind(this.serializer),this.decode=(j=t==null?void 0:t.decode)!==null&&j!==void 0?j:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window!="undefined"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var _i=class extends Error{constructor(s,t){var r;super(s),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Lb(s,t,r){const n=new URL(t,s);if(r)for(const[l,u]of Object.entries(r))u!==void 0&&n.searchParams.set(l,u);return n.toString()}function zb(s){return _(this,null,function*(){return!s||s.type==="none"?{}:s.type==="bearer"?{Authorization:`Bearer ${s.token}`}:s.type==="header"?{[s.name]:s.value}:s.type==="custom"?yield s.getHeaders():{}})}function Pb(s){var r;const t=(r=s.fetchImpl)!=null?r:globalThis.fetch;return{request(y){return _(this,arguments,function*({method:l,path:u,query:h,body:g,headers:m}){var A;const p=Lb(s.baseUrl,u,h),b=yield zb(s.auth),x=yield t(p,{method:l,headers:Xe(Xe(Xe({},g?{"Content-Type":"application/json"}:{}),b),m),body:g?JSON.stringify(g):void 0}),j=yield x.text(),S=(x.headers.get("content-type")||"").includes("application/json"),C=S&&j?JSON.parse(j):j;if(!x.ok){const q=S?C:void 0,P=q==null?void 0:q.error;throw new _i((A=P==null?void 0:P.message)!=null?A:`Request failed with status ${x.status}`,{status:x.status,icebergType:P==null?void 0:P.type,icebergCode:P==null?void 0:P.code,details:q})}return{status:x.status,headers:x.headers,data:C}})}}}function Kl(s){return s.join("")}var $b=class{constructor(s,t=""){this.client=s,this.prefix=t}listNamespaces(s){return _(this,null,function*(){const t=s?{parent:Kl(s.namespace)}:void 0;return(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))})}createNamespace(s,t){return _(this,null,function*(){const r={namespace:s.namespace,properties:t==null?void 0:t.properties};return(yield this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data})}dropNamespace(s){return _(this,null,function*(){yield this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Kl(s.namespace)}`})})}loadNamespaceMetadata(s){return _(this,null,function*(){return{properties:(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Kl(s.namespace)}`})).data.properties}})}namespaceExists(s){return _(this,null,function*(){try{return yield this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Kl(s.namespace)}`}),!0}catch(t){if(t instanceof _i&&t.status===404)return!1;throw t}})}createNamespaceIfNotExists(s,t){return _(this,null,function*(){try{return yield this.createNamespace(s,t)}catch(r){if(r instanceof _i&&r.status===409)return;throw r}})}};function Bs(s){return s.join("")}var Bb=class{constructor(s,t="",r){this.client=s,this.prefix=t,this.accessDelegation=r}listTables(s){return _(this,null,function*(){return(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Bs(s.namespace)}/tables`})).data.identifiers})}createTable(s,t){return _(this,null,function*(){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(yield this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Bs(s.namespace)}/tables`,body:t,headers:r})).data.metadata})}updateTable(s,t){return _(this,null,function*(){const r=yield this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Bs(s.namespace)}/tables/${s.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}})}dropTable(s,t){return _(this,null,function*(){var r;yield this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Bs(s.namespace)}/tables/${s.name}`,query:{purgeRequested:String((r=t==null?void 0:t.purge)!=null?r:!1)}})})}loadTable(s){return _(this,null,function*(){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Bs(s.namespace)}/tables/${s.name}`,headers:t})).data.metadata})}tableExists(s){return _(this,null,function*(){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return yield this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Bs(s.namespace)}/tables/${s.name}`,headers:t}),!0}catch(r){if(r instanceof _i&&r.status===404)return!1;throw r}})}createTableIfNotExists(s,t){return _(this,null,function*(){try{return yield this.createTable(s,t)}catch(r){if(r instanceof _i&&r.status===409)return yield this.loadTable({namespace:s.namespace,name:t.name});throw r}})}},Hb=class{constructor(s){var n;let t="v1";s.catalogName&&(t+=`/${s.catalogName}`);const r=s.baseUrl.endsWith("/")?s.baseUrl:`${s.baseUrl}/`;this.client=Pb({baseUrl:r,auth:s.auth,fetchImpl:s.fetch}),this.accessDelegation=(n=s.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new $b(this.client,t),this.tableOps=new Bb(this.client,t,this.accessDelegation)}listNamespaces(s){return _(this,null,function*(){return this.namespaceOps.listNamespaces(s)})}createNamespace(s,t){return _(this,null,function*(){return this.namespaceOps.createNamespace(s,t)})}dropNamespace(s){return _(this,null,function*(){yield this.namespaceOps.dropNamespace(s)})}loadNamespaceMetadata(s){return _(this,null,function*(){return this.namespaceOps.loadNamespaceMetadata(s)})}listTables(s){return _(this,null,function*(){return this.tableOps.listTables(s)})}createTable(s,t){return _(this,null,function*(){return this.tableOps.createTable(s,t)})}updateTable(s,t){return _(this,null,function*(){return this.tableOps.updateTable(s,t)})}dropTable(s,t){return _(this,null,function*(){yield this.tableOps.dropTable(s,t)})}loadTable(s){return _(this,null,function*(){return this.tableOps.loadTable(s)})}namespaceExists(s){return _(this,null,function*(){return this.namespaceOps.namespaceExists(s)})}tableExists(s){return _(this,null,function*(){return this.tableOps.tableExists(s)})}createNamespaceIfNotExists(s,t){return _(this,null,function*(){return this.namespaceOps.createNamespaceIfNotExists(s,t)})}createTableIfNotExists(s,t){return _(this,null,function*(){return this.tableOps.createTableIfNotExists(s,t)})}},mo=class extends Error{constructor(s){super(s),this.__isStorageError=!0,this.name="StorageError"}};function Ze(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}var Ib=class extends mo{constructor(s,t,r){super(s),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Zu=class extends mo{constructor(s,t){super(s),this.name="StorageUnknownError",this.originalError=t}};const fd=s=>s?(...t)=>s(...t):(...t)=>fetch(...t),Yb=()=>Response,ed=s=>{if(Array.isArray(s))return s.map(r=>ed(r));if(typeof s=="function"||s!==Object(s))return s;const t={};return Object.entries(s).forEach(([r,n])=>{const l=r.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));t[l]=ed(n)}),t},Vb=s=>{if(typeof s!="object"||s===null)return!1;const t=Object.getPrototypeOf(s);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},Qb=s=>!s||typeof s!="string"||s.length===0||s.length>100||s.trim()!==s||s.includes("/")||s.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(s);function Si(s){"@babel/helpers - typeof";return Si=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Si(s)}function Gb(s,t){if(Si(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var n=r.call(s,t);if(Si(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}function Kb(s){var t=Gb(s,"string");return Si(t)=="symbol"?t:t+""}function Fb(s,t,r){return(t=Kb(t))in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function Og(s,t){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(s,l).enumerable})),r.push.apply(r,n)}return r}function fe(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Og(Object(r),!0).forEach(function(n){Fb(s,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):Og(Object(r)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(r,n))})}return s}const qu=s=>{var t;return s.msg||s.message||s.error_description||(typeof s.error=="string"?s.error:(t=s.error)===null||t===void 0?void 0:t.message)||JSON.stringify(s)},Xb=(s,t,r)=>_(null,null,function*(){s instanceof(yield Yb())&&!(r!=null&&r.noResolveJson)?s.json().then(n=>{const l=s.status||500,u=(n==null?void 0:n.statusCode)||l+"";t(new Ib(qu(n),l,u))}).catch(n=>{t(new Zu(qu(n),n))}):t(new Zu(qu(s),s))}),Wb=(s,t,r,n)=>{const l={method:s,headers:(t==null?void 0:t.headers)||{}};return s==="GET"||!n?l:(Vb(n)?(l.headers=fe({"Content-Type":"application/json"},t==null?void 0:t.headers),l.body=JSON.stringify(n)):l.body=n,t!=null&&t.duplex&&(l.duplex=t.duplex),fe(fe({},l),r))};function Oi(s,t,r,n,l,u){return _(this,null,function*(){return new Promise((h,g)=>{s(r,Wb(t,n,l,u)).then(m=>{if(!m.ok)throw m;return n!=null&&n.noResolveJson?m:m.json()}).then(m=>h(m)).catch(m=>Xb(m,g,n))})})}function Ni(s,t,r,n){return _(this,null,function*(){return Oi(s,"GET",t,r,n)})}function va(s,t,r,n,l){return _(this,null,function*(){return Oi(s,"POST",t,n,l,r)})}function td(s,t,r,n,l){return _(this,null,function*(){return Oi(s,"PUT",t,n,l,r)})}function Jb(s,t,r,n){return _(this,null,function*(){return Oi(s,"HEAD",t,fe(fe({},r),{},{noResolveJson:!0}),n)})}function md(s,t,r,n,l){return _(this,null,function*(){return Oi(s,"DELETE",t,n,l,r)})}var Zb=class{constructor(s,t){this.downloadFn=s,this.shouldThrowOnError=t}then(s,t){return this.execute().then(s,t)}execute(){return _(this,null,function*(){var s=this;try{return{data:(yield s.downloadFn()).body,error:null}}catch(t){if(s.shouldThrowOnError)throw t;if(Ze(t))return{data:null,error:t};throw t}})}};let b0;b0=Symbol.toStringTag;var ex=class{constructor(s,t){this.downloadFn=s,this.shouldThrowOnError=t,this[b0]="BlobDownloadBuilder",this.promise=null}asStream(){return new Zb(this.downloadFn,this.shouldThrowOnError)}then(s,t){return this.getPromise().then(s,t)}catch(s){return this.getPromise().catch(s)}finally(s){return this.getPromise().finally(s)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return _(this,null,function*(){var s=this;try{return{data:yield(yield s.downloadFn()).blob(),error:null}}catch(t){if(s.shouldThrowOnError)throw t;if(Ze(t))return{data:null,error:t};throw t}})}};const tx={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Dg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var ax=class{constructor(s,t={},r,n){this.shouldThrowOnError=!1,this.url=s,this.headers=t,this.bucketId=r,this.fetch=fd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(s,t,r,n){return _(this,null,function*(){var l=this;try{let u;const h=fe(fe({},Dg),n);let g=fe(fe({},l.headers),s==="POST"&&{"x-upsert":String(h.upsert)});const m=h.metadata;typeof Blob!="undefined"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",h.cacheControl),m&&u.append("metadata",l.encodeMetadata(m)),u.append("",r)):typeof FormData!="undefined"&&r instanceof FormData?(u=r,u.has("cacheControl")||u.append("cacheControl",h.cacheControl),m&&!u.has("metadata")&&u.append("metadata",l.encodeMetadata(m))):(u=r,g["cache-control"]=`max-age=${h.cacheControl}`,g["content-type"]=h.contentType,m&&(g["x-metadata"]=l.toBase64(l.encodeMetadata(m))),(typeof ReadableStream!="undefined"&&u instanceof ReadableStream||u&&typeof u=="object"&&"pipe"in u&&typeof u.pipe=="function")&&!h.duplex&&(h.duplex="half")),n!=null&&n.headers&&(g=fe(fe({},g),n.headers));const y=l._removeEmptyFolders(t),p=l._getFinalPath(y),b=yield(s=="PUT"?td:va)(l.fetch,`${l.url}/object/${p}`,u,fe({headers:g},h!=null&&h.duplex?{duplex:h.duplex}:{}));return{data:{path:y,id:b.Id,fullPath:b.Key},error:null}}catch(u){if(l.shouldThrowOnError)throw u;if(Ze(u))return{data:null,error:u};throw u}})}upload(s,t,r){return _(this,null,function*(){return this.uploadOrUpdate("POST",s,t,r)})}uploadToSignedUrl(s,t,r,n){return _(this,null,function*(){var l=this;const u=l._removeEmptyFolders(s),h=l._getFinalPath(u),g=new URL(l.url+`/object/upload/sign/${h}`);g.searchParams.set("token",t);try{let m;const y=fe({upsert:Dg.upsert},n),p=fe(fe({},l.headers),{"x-upsert":String(y.upsert)});return typeof Blob!="undefined"&&r instanceof Blob?(m=new FormData,m.append("cacheControl",y.cacheControl),m.append("",r)):typeof FormData!="undefined"&&r instanceof FormData?(m=r,m.append("cacheControl",y.cacheControl)):(m=r,p["cache-control"]=`max-age=${y.cacheControl}`,p["content-type"]=y.contentType),{data:{path:u,fullPath:(yield td(l.fetch,g.toString(),m,{headers:p})).Key},error:null}}catch(m){if(l.shouldThrowOnError)throw m;if(Ze(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(s,t){return _(this,null,function*(){var r=this;try{let n=r._getFinalPath(s);const l=fe({},r.headers);t!=null&&t.upsert&&(l["x-upsert"]="true");const u=yield va(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:l}),h=new URL(r.url+u.url),g=h.searchParams.get("token");if(!g)throw new mo("No token returned by API");return{data:{signedUrl:h.toString(),path:s,token:g},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Ze(n))return{data:null,error:n};throw n}})}update(s,t,r){return _(this,null,function*(){return this.uploadOrUpdate("PUT",s,t,r)})}move(s,t,r){return _(this,null,function*(){var n=this;try{return{data:yield va(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:s,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}),error:null}}catch(l){if(n.shouldThrowOnError)throw l;if(Ze(l))return{data:null,error:l};throw l}})}copy(s,t,r){return _(this,null,function*(){var n=this;try{return{data:{path:(yield va(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:s,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key},error:null}}catch(l){if(n.shouldThrowOnError)throw l;if(Ze(l))return{data:null,error:l};throw l}})}createSignedUrl(s,t,r){return _(this,null,function*(){var n=this;try{let l=n._getFinalPath(s),u=yield va(n.fetch,`${n.url}/object/sign/${l}`,fe({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const h=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return u={signedUrl:encodeURI(`${n.url}${u.signedURL}${h}`)},{data:u,error:null}}catch(l){if(n.shouldThrowOnError)throw l;if(Ze(l))return{data:null,error:l};throw l}})}createSignedUrls(s,t,r){return _(this,null,function*(){var n=this;try{const l=yield va(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:s},{headers:n.headers}),u=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:l.map(h=>fe(fe({},h),{},{signedUrl:h.signedURL?encodeURI(`${n.url}${h.signedURL}${u}`):null})),error:null}}catch(l){if(n.shouldThrowOnError)throw l;if(Ze(l))return{data:null,error:l};throw l}})}download(s,t){const r=typeof(t==null?void 0:t.transform)!="undefined"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),l=n?`?${n}`:"",u=this._getFinalPath(s),h=()=>Ni(this.fetch,`${this.url}/${r}/${u}${l}`,{headers:this.headers,noResolveJson:!0});return new ex(h,this.shouldThrowOnError)}info(s){return _(this,null,function*(){var t=this;const r=t._getFinalPath(s);try{return{data:ed(yield Ni(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ze(n))return{data:null,error:n};throw n}})}exists(s){return _(this,null,function*(){var t=this;const r=t._getFinalPath(s);try{return yield Jb(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ze(n)&&n instanceof Zu){const l=n.originalError;if([400,404].includes(l==null?void 0:l.status))return{data:!1,error:n}}throw n}})}getPublicUrl(s,t){const r=this._getFinalPath(s),n=[],l=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";l!==""&&n.push(l);const u=typeof(t==null?void 0:t.transform)!="undefined"?"render/image":"object",h=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});h!==""&&n.push(h);let g=n.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${r}${g}`)}}}remove(s){return _(this,null,function*(){var t=this;try{return{data:yield md(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:s},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}list(s,t,r){return _(this,null,function*(){var n=this;try{const l=fe(fe(fe({},tx),t),{},{prefix:s||""});return{data:yield va(n.fetch,`${n.url}/object/list/${n.bucketId}`,l,{headers:n.headers},r),error:null}}catch(l){if(n.shouldThrowOnError)throw l;if(Ze(l))return{data:null,error:l};throw l}})}listV2(s,t){return _(this,null,function*(){var r=this;try{const n=fe({},s);return{data:yield va(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Ze(n))return{data:null,error:n};throw n}})}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer!="undefined"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const t=[];return s.width&&t.push(`width=${s.width}`),s.height&&t.push(`height=${s.height}`),s.resize&&t.push(`resize=${s.resize}`),s.format&&t.push(`format=${s.format}`),s.quality&&t.push(`quality=${s.quality}`),t.join("&")}};const x0="2.89.0",w0={"X-Client-Info":`storage-js/${x0}`};var rx=class{constructor(s,t={},r,n){this.shouldThrowOnError=!1;const l=new URL(s);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=fe(fe({},w0),t),this.fetch=fd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(s){return _(this,null,function*(){var t=this;try{const r=t.listBucketOptionsToQueryString(s);return{data:yield Ni(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}getBucket(s){return _(this,null,function*(){var t=this;try{return{data:yield Ni(t.fetch,`${t.url}/bucket/${s}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}createBucket(r){return _(this,arguments,function*(s,t={public:!1}){var n=this;try{return{data:yield va(n.fetch,`${n.url}/bucket`,{id:s,name:s,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(l){if(n.shouldThrowOnError)throw l;if(Ze(l))return{data:null,error:l};throw l}})}updateBucket(s,t){return _(this,null,function*(){var r=this;try{return{data:yield td(r.fetch,`${r.url}/bucket/${s}`,{id:s,name:s,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Ze(n))return{data:null,error:n};throw n}})}emptyBucket(s){return _(this,null,function*(){var t=this;try{return{data:yield va(t.fetch,`${t.url}/bucket/${s}/empty`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}deleteBucket(s){return _(this,null,function*(){var t=this;try{return{data:yield md(t.fetch,`${t.url}/bucket/${s}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(s){const t={};return s&&("limit"in s&&(t.limit=String(s.limit)),"offset"in s&&(t.offset=String(s.offset)),s.search&&(t.search=s.search),s.sortColumn&&(t.sortColumn=s.sortColumn),s.sortOrder&&(t.sortOrder=s.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},sx=class{constructor(s,t={},r){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=fe(fe({},w0),t),this.fetch=fd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(s){return _(this,null,function*(){var t=this;try{return{data:yield va(t.fetch,`${t.url}/bucket`,{name:s},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}listBuckets(s){return _(this,null,function*(){var t=this;try{const r=new URLSearchParams;(s==null?void 0:s.limit)!==void 0&&r.set("limit",s.limit.toString()),(s==null?void 0:s.offset)!==void 0&&r.set("offset",s.offset.toString()),s!=null&&s.sortColumn&&r.set("sortColumn",s.sortColumn),s!=null&&s.sortOrder&&r.set("sortOrder",s.sortOrder),s!=null&&s.search&&r.set("search",s.search);const n=r.toString(),l=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return{data:yield Ni(t.fetch,l,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}deleteBucket(s){return _(this,null,function*(){var t=this;try{return{data:yield md(t.fetch,`${t.url}/bucket/${s}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ze(r))return{data:null,error:r};throw r}})}from(s){var t=this;if(!Qb(s))throw new mo("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new Hb({baseUrl:this.url,catalogName:s,auth:{type:"custom",getHeaders:()=>_(this,null,function*(){return t.headers})},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(l,u){const h=l[u];return typeof h!="function"?h:(...g)=>_(null,null,function*(){try{return{data:yield h.apply(l,g),error:null}}catch(m){if(n)throw m;return{data:null,error:m}}})}})}};const gd={"X-Client-Info":`storage-js/${x0}`,"Content-Type":"application/json"};var j0=class extends Error{constructor(s){super(s),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Jt(s){return typeof s=="object"&&s!==null&&"__isStorageVectorsError"in s}var Lu=class extends j0{constructor(s,t,r){super(s),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},nx=class extends j0{constructor(s,t){super(s),this.name="StorageVectorsUnknownError",this.originalError=t}};const yd=s=>s?(...t)=>s(...t):(...t)=>fetch(...t),ix=s=>{if(typeof s!="object"||s===null)return!1;const t=Object.getPrototypeOf(s);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},Ag=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),lx=(s,t,r)=>_(null,null,function*(){if(s&&typeof s=="object"&&"status"in s&&"ok"in s&&typeof s.status=="number"&&!(r!=null&&r.noResolveJson)){const n=s.status||500,l=s;if(typeof l.json=="function")l.json().then(u=>{const h=(u==null?void 0:u.statusCode)||(u==null?void 0:u.code)||n+"";t(new Lu(Ag(u),n,h))}).catch(()=>{const u=n+"";t(new Lu(l.statusText||`HTTP ${n} error`,n,u))});else{const u=n+"";t(new Lu(l.statusText||`HTTP ${n} error`,n,u))}}else t(new nx(Ag(s),s))}),ox=(s,t,r,n)=>{const l={method:s,headers:(t==null?void 0:t.headers)||{}};return n?(ix(n)?(l.headers=fe({"Content-Type":"application/json"},t==null?void 0:t.headers),l.body=JSON.stringify(n)):l.body=n,fe(fe({},l),r)):l};function cx(s,t,r,n,l,u){return _(this,null,function*(){return new Promise((h,g)=>{s(r,ox(t,n,l,u)).then(m=>{if(!m.ok)throw m;if(n!=null&&n.noResolveJson)return m;const y=m.headers.get("content-type");return!y||!y.includes("application/json")?{}:m.json()}).then(m=>h(m)).catch(m=>lx(m,g,n))})})}function Zt(s,t,r,n,l){return _(this,null,function*(){return cx(s,"POST",t,n,l,r)})}var ux=class{constructor(s,t={},r){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=fe(fe({},gd),t),this.fetch=yd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(s){return _(this,null,function*(){var t=this;try{return{data:(yield Zt(t.fetch,`${t.url}/CreateIndex`,s,{headers:t.headers}))||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Jt(r))return{data:null,error:r};throw r}})}getIndex(s,t){return _(this,null,function*(){var r=this;try{return{data:yield Zt(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:s,indexName:t},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Jt(n))return{data:null,error:n};throw n}})}listIndexes(s){return _(this,null,function*(){var t=this;try{return{data:yield Zt(t.fetch,`${t.url}/ListIndexes`,s,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Jt(r))return{data:null,error:r};throw r}})}deleteIndex(s,t){return _(this,null,function*(){var r=this;try{return{data:(yield Zt(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:s,indexName:t},{headers:r.headers}))||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Jt(n))return{data:null,error:n};throw n}})}},dx=class{constructor(s,t={},r){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=fe(fe({},gd),t),this.fetch=yd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(s){return _(this,null,function*(){var t=this;try{if(s.vectors.length<1||s.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Zt(t.fetch,`${t.url}/PutVectors`,s,{headers:t.headers}))||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Jt(r))return{data:null,error:r};throw r}})}getVectors(s){return _(this,null,function*(){var t=this;try{return{data:yield Zt(t.fetch,`${t.url}/GetVectors`,s,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Jt(r))return{data:null,error:r};throw r}})}listVectors(s){return _(this,null,function*(){var t=this;try{if(s.segmentCount!==void 0){if(s.segmentCount<1||s.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(s.segmentIndex!==void 0&&(s.segmentIndex<0||s.segmentIndex>=s.segmentCount))throw new Error(`segmentIndex must be between 0 and ${s.segmentCount-1}`)}return{data:yield Zt(t.fetch,`${t.url}/ListVectors`,s,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Jt(r))return{data:null,error:r};throw r}})}queryVectors(s){return _(this,null,function*(){var t=this;try{return{data:yield Zt(t.fetch,`${t.url}/QueryVectors`,s,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Jt(r))return{data:null,error:r};throw r}})}deleteVectors(s){return _(this,null,function*(){var t=this;try{if(s.keys.length<1||s.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Zt(t.fetch,`${t.url}/DeleteVectors`,s,{headers:t.headers}))||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Jt(r))return{data:null,error:r};throw r}})}},hx=class{constructor(s,t={},r){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=fe(fe({},gd),t),this.fetch=yd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(s){return _(this,null,function*(){var t=this;try{return{data:(yield Zt(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:s},{headers:t.headers}))||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Jt(r))return{data:null,error:r};throw r}})}getBucket(s){return _(this,null,function*(){var t=this;try{return{data:yield Zt(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:s},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Jt(r))return{data:null,error:r};throw r}})}listBuckets(){return _(this,arguments,function*(s={}){var t=this;try{return{data:yield Zt(t.fetch,`${t.url}/ListVectorBuckets`,s,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Jt(r))return{data:null,error:r};throw r}})}deleteBucket(s){return _(this,null,function*(){var t=this;try{return{data:(yield Zt(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:s},{headers:t.headers}))||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Jt(r))return{data:null,error:r};throw r}})}},fx=class s extends hx{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new mx(this.url,this.headers,t,this.fetch)}createBucket(t){return _(this,null,function*(){var r=()=>Bt(s.prototype,this,"createBucket"),n=this;return r().call(n,t)})}getBucket(t){return _(this,null,function*(){var r=()=>Bt(s.prototype,this,"getBucket"),n=this;return r().call(n,t)})}listBuckets(){return _(this,arguments,function*(t={}){var r=()=>Bt(s.prototype,this,"listBuckets"),n=this;return r().call(n,t)})}deleteBucket(t){return _(this,null,function*(){var r=()=>Bt(s.prototype,this,"deleteBucket"),n=this;return r().call(n,t)})}},mx=class s extends ux{constructor(t,r,n,l){super(t,r,l),this.vectorBucketName=n}createIndex(t){return _(this,null,function*(){var r=()=>Bt(s.prototype,this,"createIndex"),n=this;return r().call(n,fe(fe({},t),{},{vectorBucketName:n.vectorBucketName}))})}listIndexes(){return _(this,arguments,function*(t={}){var r=()=>Bt(s.prototype,this,"listIndexes"),n=this;return r().call(n,fe(fe({},t),{},{vectorBucketName:n.vectorBucketName}))})}getIndex(t){return _(this,null,function*(){var r=()=>Bt(s.prototype,this,"getIndex"),n=this;return r().call(n,n.vectorBucketName,t)})}deleteIndex(t){return _(this,null,function*(){var r=()=>Bt(s.prototype,this,"deleteIndex"),n=this;return r().call(n,n.vectorBucketName,t)})}index(t){return new gx(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},gx=class s extends dx{constructor(t,r,n,l,u){super(t,r,u),this.vectorBucketName=n,this.indexName=l}putVectors(t){return _(this,null,function*(){var r=()=>Bt(s.prototype,this,"putVectors"),n=this;return r().call(n,fe(fe({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))})}getVectors(t){return _(this,null,function*(){var r=()=>Bt(s.prototype,this,"getVectors"),n=this;return r().call(n,fe(fe({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))})}listVectors(){return _(this,arguments,function*(t={}){var r=()=>Bt(s.prototype,this,"listVectors"),n=this;return r().call(n,fe(fe({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))})}queryVectors(t){return _(this,null,function*(){var r=()=>Bt(s.prototype,this,"queryVectors"),n=this;return r().call(n,fe(fe({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))})}deleteVectors(t){return _(this,null,function*(){var r=()=>Bt(s.prototype,this,"deleteVectors"),n=this;return r().call(n,fe(fe({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))})}},yx=class extends rx{constructor(s,t={},r,n){super(s,t,r,n)}from(s){return new ax(this.url,this.headers,s,this.fetch)}get vectors(){return new fx(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new sx(this.url+"/iceberg",this.headers,this.fetch)}};const _0="2.89.0",Fs=30*1e3,ad=3,zu=ad*Fs,px="http://localhost:9999",vx="supabase.auth.token",bx={"X-Client-Info":`gotrue-js/${_0}`},rd="X-Supabase-Api-Version",S0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},xx=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,wx=10*60*1e3;class Ti extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function oe(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class jx extends Ti{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function _x(s){return oe(s)&&s.name==="AuthApiError"}class Jr extends Ti{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Wa extends Ti{constructor(t,r,n,l){super(t,n,l),this.name=r,this.status=n}}class Wt extends Wa{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Sx(s){return oe(s)&&s.name==="AuthSessionMissingError"}class Hs extends Wa{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Fl extends Wa{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Xl extends Wa{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Nx(s){return oe(s)&&s.name==="AuthImplicitGrantRedirectError"}class Rg extends Wa{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Tx extends Wa{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class sd extends Wa{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Pu(s){return oe(s)&&s.name==="AuthRetryableFetchError"}class kg extends Wa{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class nd extends Wa{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const so="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Mg=` 	
\r=`.split(""),Ex=(()=>{const s=new Array(128);for(let t=0;t<s.length;t+=1)s[t]=-1;for(let t=0;t<Mg.length;t+=1)s[Mg[t].charCodeAt(0)]=-2;for(let t=0;t<so.length;t+=1)s[so[t].charCodeAt(0)]=t;return s})();function Ug(s,t,r){if(s!==null)for(t.queue=t.queue<<8|s,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(so[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(so[n]),t.queuedBits-=6}}function N0(s,t,r){const n=Ex[s];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function qg(s){const t=[],r=h=>{t.push(String.fromCodePoint(h))},n={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},u=h=>{Dx(h,n,r)};for(let h=0;h<s.length;h+=1)N0(s.charCodeAt(h),l,u);return t.join("")}function Cx(s,t){if(s<=127){t(s);return}else if(s<=2047){t(192|s>>6),t(128|s&63);return}else if(s<=65535){t(224|s>>12),t(128|s>>6&63),t(128|s&63);return}else if(s<=1114111){t(240|s>>18),t(128|s>>12&63),t(128|s>>6&63),t(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function Ox(s,t){for(let r=0;r<s.length;r+=1){let n=s.charCodeAt(r);if(n>55295&&n<=56319){const l=(n-55296)*1024&65535;n=(s.charCodeAt(r+1)-56320&65535|l)+65536,r+=1}Cx(n,t)}}function Dx(s,t,r){if(t.utf8seq===0){if(s<=127){r(s);return}for(let n=1;n<6;n+=1)if((s>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=s&31;else if(t.utf8seq===3)t.codepoint=s&15;else if(t.utf8seq===4)t.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|s&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Zs(s){const t=[],r={queue:0,queuedBits:0},n=l=>{t.push(l)};for(let l=0;l<s.length;l+=1)N0(s.charCodeAt(l),r,n);return new Uint8Array(t)}function Ax(s){const t=[];return Ox(s,r=>t.push(r)),new Uint8Array(t)}function Zr(s){const t=[],r={queue:0,queuedBits:0},n=l=>{t.push(l)};return s.forEach(l=>Ug(l,r,n)),Ug(null,r,n),t.join("")}function Rx(s){return Math.round(Date.now()/1e3)+s}function kx(){return Symbol("auth-callback")}const Rt=()=>typeof window!="undefined"&&typeof document!="undefined",Gr={tested:!1,writable:!1},T0=()=>{if(!Rt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch(t){return!1}if(Gr.tested)return Gr.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),Gr.tested=!0,Gr.writable=!0}catch(t){Gr.tested=!0,Gr.writable=!1}return Gr.writable};function Mx(s){const t={},r=new URL(s);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((l,u)=>{t[u]=l})}catch(n){}return r.searchParams.forEach((n,l)=>{t[l]=n}),t}const E0=s=>s?(...t)=>s(...t):(...t)=>fetch(...t),Ux=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",Xs=(s,t,r)=>_(null,null,function*(){yield s.setItem(t,JSON.stringify(r))}),Kr=(s,t)=>_(null,null,function*(){const r=yield s.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(n){return r}}),At=(s,t)=>_(null,null,function*(){yield s.removeItem(t)});class go{constructor(){this.promise=new go.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}go.promiseConstructor=Promise;function $u(s){const t=s.split(".");if(t.length!==3)throw new nd("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!xx.test(t[n]))throw new nd("JWT not in base64url format");return{header:JSON.parse(qg(t[0])),payload:JSON.parse(qg(t[1])),signature:Zs(t[2]),raw:{header:t[0],payload:t[1]}}}function qx(s){return _(this,null,function*(){return yield new Promise(t=>{setTimeout(()=>t(null),s)})})}function Lx(s,t){return new Promise((n,l)=>{_(null,null,function*(){for(let u=0;u<1/0;u++)try{const h=yield s(u);if(!t(u,null,h)){n(h);return}}catch(h){if(!t(u,h)){l(h);return}}})})}function zx(s){return("0"+s.toString(16)).substr(-2)}function Px(){const t=new Uint32Array(56);if(typeof crypto=="undefined"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let l="";for(let u=0;u<56;u++)l+=r.charAt(Math.floor(Math.random()*n));return l}return crypto.getRandomValues(t),Array.from(t,zx).join("")}function $x(s){return _(this,null,function*(){const r=new TextEncoder().encode(s),n=yield crypto.subtle.digest("SHA-256",r),l=new Uint8Array(n);return Array.from(l).map(u=>String.fromCharCode(u)).join("")})}function Bx(s){return _(this,null,function*(){if(!(typeof crypto!="undefined"&&typeof crypto.subtle!="undefined"&&typeof TextEncoder!="undefined"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const r=yield $x(s);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})}function Is(s,t,r=!1){return _(this,null,function*(){const n=Px();let l=n;r&&(l+="/PASSWORD_RECOVERY"),yield Xs(s,`${t}-code-verifier`,l);const u=yield Bx(n);return[u,n===u?"plain":"s256"]})}const Hx=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Ix(s){const t=s.headers.get(rd);if(!t||!t.match(Hx))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(r){return null}}function Yx(s){if(!s)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(s<=t)throw new Error("JWT has expired")}function Vx(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Qx=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ys(s){if(!Qx.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Bu(){const s={};return new Proxy(s,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Gx(s,t){return new Proxy(s,{get:(r,n,l)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const u=n.toString();if(u==="Symbol(Symbol.toPrimitive)"||u==="Symbol(Symbol.toStringTag)"||u==="Symbol(util.inspect.custom)"||u==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,l)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,l)}})}function Lg(s){return JSON.parse(JSON.stringify(s))}const Fr=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Kx=[502,503,504];function zg(s){return _(this,null,function*(){var t;if(!Ux(s))throw new sd(Fr(s),0);if(Kx.includes(s.status))throw new sd(Fr(s),s.status);let r;try{r=yield s.json()}catch(u){throw new Jr(Fr(u),u)}let n;const l=Ix(s);if(l&&l.getTime()>=S0["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new kg(Fr(r),s.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Wt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((u,h)=>u&&typeof h=="string",!0))throw new kg(Fr(r),s.status,r.weak_password.reasons);throw new jx(Fr(r),s.status||500,n)})}const Fx=(s,t,r,n)=>{const l={method:s,headers:(t==null?void 0:t.headers)||{}};return s==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),l.body=JSON.stringify(n),Object.assign(Object.assign({},l),r))};function he(s,t,r,n){return _(this,null,function*(){var l;const u=Object.assign({},n==null?void 0:n.headers);u[rd]||(u[rd]=S0["2024-01-01"].name),n!=null&&n.jwt&&(u.Authorization=`Bearer ${n.jwt}`);const h=(l=n==null?void 0:n.query)!==null&&l!==void 0?l:{};n!=null&&n.redirectTo&&(h.redirect_to=n.redirectTo);const g=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",m=yield Xx(s,t,r+g,{headers:u,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(m):{data:Object.assign({},m),error:null}})}function Xx(s,t,r,n,l,u){return _(this,null,function*(){const h=Fx(t,n,l,u);let g;try{g=yield s(r,Object.assign({},h))}catch(m){throw console.error(m),new sd(Fr(m),0)}if(g.ok||(yield zg(g)),n!=null&&n.noResolveJson)return g;try{return yield g.json()}catch(m){yield zg(m)}})}function pa(s){var t;let r=null;Zx(s)&&(r=Object.assign({},s),s.expires_at||(r.expires_at=Rx(s.expires_in)));const n=(t=s.user)!==null&&t!==void 0?t:s;return{data:{session:r,user:n},error:null}}function Pg(s){const t=pa(s);return!t.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=s.weak_password),t}function Nr(s){var t;return{data:{user:(t=s.user)!==null&&t!==void 0?t:s},error:null}}function Wx(s){return{data:s,error:null}}function Jx(s){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:l,verification_type:u}=s,h=fo(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),g={action_link:t,email_otp:r,hashed_token:n,redirect_to:l,verification_type:u},m=Object.assign({},h);return{data:{properties:g,user:m},error:null}}function $g(s){return s}function Zx(s){return s.access_token&&s.refresh_token&&s.expires_in}const Hu=["global","local","others"];class ew{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=E0(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}signOut(n){return _(this,arguments,function*(t,r=Hu[0]){if(Hu.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Hu.join(", ")}`);try{return yield he(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(l){if(oe(l))return{data:null,error:l};throw l}})}inviteUserByEmail(n){return _(this,arguments,function*(t,r={}){try{return yield he(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Nr})}catch(l){if(oe(l))return{data:{user:null},error:l};throw l}})}generateLink(t){return _(this,null,function*(){try{const{options:r}=t,n=fo(t,["options"]),l=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(l.new_email=n==null?void 0:n.newEmail,delete l.newEmail),yield he(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:Jx,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(oe(r))return{data:{properties:null,user:null},error:r};throw r}})}createUser(t){return _(this,null,function*(){try{return yield he(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Nr})}catch(r){if(oe(r))return{data:{user:null},error:r};throw r}})}listUsers(t){return _(this,null,function*(){var r,n,l,u,h,g,m;try{const y={nextPage:null,lastPage:0,total:0},p=yield he(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(u=(l=t==null?void 0:t.perPage)===null||l===void 0?void 0:l.toString())!==null&&u!==void 0?u:""},xform:$g});if(p.error)throw p.error;const b=yield p.json(),x=(h=p.headers.get("x-total-count"))!==null&&h!==void 0?h:0,j=(m=(g=p.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&m!==void 0?m:[];return j.length>0&&(j.forEach(S=>{const C=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(S.split(";")[1].split("=")[1]);y[`${A}Page`]=C}),y.total=parseInt(x)),{data:Object.assign(Object.assign({},b),y),error:null}}catch(y){if(oe(y))return{data:{users:[]},error:y};throw y}})}getUserById(t){return _(this,null,function*(){Ys(t);try{return yield he(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Nr})}catch(r){if(oe(r))return{data:{user:null},error:r};throw r}})}updateUserById(t,r){return _(this,null,function*(){Ys(t);try{return yield he(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Nr})}catch(n){if(oe(n))return{data:{user:null},error:n};throw n}})}deleteUser(t,r=!1){return _(this,null,function*(){Ys(t);try{return yield he(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Nr})}catch(n){if(oe(n))return{data:{user:null},error:n};throw n}})}_listFactors(t){return _(this,null,function*(){Ys(t.userId);try{const{data:r,error:n}=yield he(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:r,error:n}}catch(r){if(oe(r))return{data:null,error:r};throw r}})}_deleteFactor(t){return _(this,null,function*(){Ys(t.userId),Ys(t.id);try{return{data:yield he(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(oe(r))return{data:null,error:r};throw r}})}_listOAuthClients(t){return _(this,null,function*(){var r,n,l,u,h,g,m;try{const y={nextPage:null,lastPage:0,total:0},p=yield he(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(u=(l=t==null?void 0:t.perPage)===null||l===void 0?void 0:l.toString())!==null&&u!==void 0?u:""},xform:$g});if(p.error)throw p.error;const b=yield p.json(),x=(h=p.headers.get("x-total-count"))!==null&&h!==void 0?h:0,j=(m=(g=p.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&m!==void 0?m:[];return j.length>0&&(j.forEach(S=>{const C=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(S.split(";")[1].split("=")[1]);y[`${A}Page`]=C}),y.total=parseInt(x)),{data:Object.assign(Object.assign({},b),y),error:null}}catch(y){if(oe(y))return{data:{clients:[]},error:y};throw y}})}_createOAuthClient(t){return _(this,null,function*(){try{return yield he(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(oe(r))return{data:null,error:r};throw r}})}_getOAuthClient(t){return _(this,null,function*(){try{return yield he(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(oe(r))return{data:null,error:r};throw r}})}_updateOAuthClient(t,r){return _(this,null,function*(){try{return yield he(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(oe(n))return{data:null,error:n};throw n}})}_deleteOAuthClient(t){return _(this,null,function*(){try{return yield he(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(oe(r))return{data:null,error:r};throw r}})}_regenerateOAuthClientSecret(t){return _(this,null,function*(){try{return yield he(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(oe(r))return{data:null,error:r};throw r}})}}function Bg(s={}){return{getItem:t=>s[t]||null,setItem:(t,r)=>{s[t]=r},removeItem:t=>{delete s[t]}}}const Vs={debug:!!(globalThis&&T0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class C0 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class tw extends C0{}function aw(s,t,r){return _(this,null,function*(){Vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Vs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},t),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(s,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},l=>_(null,null,function*(){if(l){Vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,l.name);try{return yield r()}finally{Vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,l.name)}}else{if(t===0)throw Vs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new tw(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(Vs.debug)try{const u=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield r()}})))})}function rw(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(s){typeof self!="undefined"&&(self.globalThis=self)}}function O0(s){if(!/^0x[a-fA-F0-9]{40}$/.test(s))throw new Error(`@supabase/auth-js: Address "${s}" is invalid.`);return s.toLowerCase()}function sw(s){return parseInt(s,16)}function nw(s){const t=new TextEncoder().encode(s);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function iw(s){var t;const{chainId:r,domain:n,expirationTime:l,issuedAt:u=new Date,nonce:h,notBefore:g,requestId:m,resources:y,scheme:p,uri:b,version:x}=s;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!b)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((t=s.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${s.statement}`)}const j=O0(s.address),S=p?`${p}://${n}`:n,C=s.statement?`${s.statement}
`:"",A=`${S} wants you to sign in with your Ethereum account:
${j}

${C}`;let q=`URI: ${b}
Version: ${x}
Chain ID: ${r}${h?`
Nonce: ${h}`:""}
Issued At: ${u.toISOString()}`;if(l&&(q+=`
Expiration Time: ${l.toISOString()}`),g&&(q+=`
Not Before: ${g.toISOString()}`),m&&(q+=`
Request ID: ${m}`),y){let P=`
Resources:`;for(const M of y){if(!M||typeof M!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${M}`);P+=`
- ${M}`}q+=P}return`${A}
${q}`}class gt extends Error{constructor({message:t,code:r,cause:n,name:l}){var u;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(u=l!=null?l:n instanceof Error?n.name:void 0)!==null&&u!==void 0?u:"Unknown Error",this.code=r}}class no extends gt{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function lw({error:s,options:t}){var r,n,l;const{publicKey:u}=t;if(!u)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(t.signal instanceof AbortSignal)return new gt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else if(s.name==="ConstraintError"){if(((r=u.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new gt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:s});if(t.mediation==="conditional"&&((n=u.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new gt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:s});if(((l=u.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new gt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:s})}else{if(s.name==="InvalidStateError")return new gt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:s});if(s.name==="NotAllowedError")return new gt({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="NotSupportedError")return u.pubKeyCredParams.filter(g=>g.type==="public-key").length===0?new gt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:s}):new gt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:s});if(s.name==="SecurityError"){const h=window.location.hostname;if(D0(h)){if(u.rp.id!==h)return new gt({message:`The RP ID "${u.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new gt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="TypeError"){if(u.user.id.byteLength<1||u.user.id.byteLength>64)return new gt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:s})}else if(s.name==="UnknownError")return new gt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new gt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}function ow({error:s,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(t.signal instanceof AbortSignal)return new gt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else{if(s.name==="NotAllowedError")return new gt({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="SecurityError"){const n=window.location.hostname;if(D0(n)){if(r.rpId!==n)return new gt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new gt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="UnknownError")return new gt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new gt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}class cw{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const uw=new cw;function dw(s){if(!s)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential!="undefined"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(s);const{challenge:t,user:r,excludeCredentials:n}=s,l=fo(s,["challenge","user","excludeCredentials"]),u=Zs(t).buffer,h=Object.assign(Object.assign({},r),{id:Zs(r.id).buffer}),g=Object.assign(Object.assign({},l),{challenge:u,user:h});if(n&&n.length>0){g.excludeCredentials=new Array(n.length);for(let m=0;m<n.length;m++){const y=n[m];g.excludeCredentials[m]=Object.assign(Object.assign({},y),{id:Zs(y.id).buffer,type:y.type||"public-key",transports:y.transports})}}return g}function hw(s){if(!s)throw new Error("Credential request options are required");if(typeof PublicKeyCredential!="undefined"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(s);const{challenge:t,allowCredentials:r}=s,n=fo(s,["challenge","allowCredentials"]),l=Zs(t).buffer,u=Object.assign(Object.assign({},n),{challenge:l});if(r&&r.length>0){u.allowCredentials=new Array(r.length);for(let h=0;h<r.length;h++){const g=r[h];u.allowCredentials[h]=Object.assign(Object.assign({},g),{id:Zs(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return u}function fw(s){var t;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const r=s;return{id:s.id,rawId:s.id,response:{attestationObject:Zr(new Uint8Array(s.response.attestationObject)),clientDataJSON:Zr(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function mw(s){var t;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const r=s,n=s.getClientExtensionResults(),l=s.response;return{id:s.id,rawId:s.id,response:{authenticatorData:Zr(new Uint8Array(l.authenticatorData)),clientDataJSON:Zr(new Uint8Array(l.clientDataJSON)),signature:Zr(new Uint8Array(l.signature)),userHandle:l.userHandle?Zr(new Uint8Array(l.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function D0(s){return s==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(s)}function Hg(){var s,t;return!!(Rt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((s=navigator==null?void 0:navigator.credentials)===null||s===void 0?void 0:s.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}function gw(s){return _(this,null,function*(){try{const t=yield navigator.credentials.create(s);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new no("Browser returned unexpected credential type",t)}:{data:null,error:new no("Empty credential response",t)}}catch(t){return{data:null,error:lw({error:t,options:s})}}})}function yw(s){return _(this,null,function*(){try{const t=yield navigator.credentials.get(s);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new no("Browser returned unexpected credential type",t)}:{data:null,error:new no("Empty credential response",t)}}catch(t){return{data:null,error:ow({error:t,options:s})}}})}const pw={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},vw={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function io(...s){const t=l=>l!==null&&typeof l=="object"&&!Array.isArray(l),r=l=>l instanceof ArrayBuffer||ArrayBuffer.isView(l),n={};for(const l of s)if(l)for(const u in l){const h=l[u];if(h!==void 0)if(Array.isArray(h))n[u]=h;else if(r(h))n[u]=h;else if(t(h)){const g=n[u];t(g)?n[u]=io(g,h):n[u]=io(h)}else n[u]=h}return n}function bw(s,t){return io(pw,s,t||{})}function xw(s,t){return io(vw,s,t||{})}class ww{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}_enroll(t){return _(this,null,function*(){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))})}_challenge(h,g){return _(this,arguments,function*({factorId:t,webauthn:r,friendlyName:n,signal:l},u){try{const{data:m,error:y}=yield this.client.mfa.challenge({factorId:t,webauthn:r});if(!m)return{data:null,error:y};const p=l!=null?l:uw.createNewAbortSignal();if(m.webauthn.type==="create"){const{user:b}=m.webauthn.credential_options.publicKey;b.name||(b.name=`${b.id}:${n}`),b.displayName||(b.displayName=b.name)}switch(m.webauthn.type){case"create":{const b=bw(m.webauthn.credential_options.publicKey,u==null?void 0:u.create),{data:x,error:j}=yield gw({publicKey:b,signal:p});return x?{data:{factorId:t,challengeId:m.id,webauthn:{type:m.webauthn.type,credential_response:x}},error:null}:{data:null,error:j}}case"request":{const b=xw(m.webauthn.credential_options.publicKey,u==null?void 0:u.request),{data:x,error:j}=yield yw(Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:b,signal:p}));return x?{data:{factorId:t,challengeId:m.id,webauthn:{type:m.webauthn.type,credential_response:x}},error:null}:{data:null,error:j}}}}catch(m){return oe(m)?{data:null,error:m}:{data:null,error:new Jr("Unexpected error in challenge",m)}}})}_verify(l){return _(this,arguments,function*({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})})}_authenticate(h,g){return _(this,arguments,function*({factorId:t,webauthn:{rpId:r=typeof window!="undefined"?window.location.hostname:void 0,rpOrigins:n=typeof window!="undefined"?[window.location.origin]:void 0,signal:l}={}},u){if(!r)return{data:null,error:new Ti("rpId is required for WebAuthn authentication")};try{if(!Hg())return{data:null,error:new Jr("Browser does not support WebAuthn",null)};const{data:m,error:y}=yield this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:l},{request:u});if(!m)return{data:null,error:y};const{webauthn:p}=m;return this._verify({factorId:t,challengeId:m.challengeId,webauthn:{type:p.type,rpId:r,rpOrigins:n,credential_response:p.credential_response}})}catch(m){return oe(m)?{data:null,error:m}:{data:null,error:new Jr("Unexpected error in authenticate",m)}}})}_register(h,g){return _(this,arguments,function*({friendlyName:t,webauthn:{rpId:r=typeof window!="undefined"?window.location.hostname:void 0,rpOrigins:n=typeof window!="undefined"?[window.location.origin]:void 0,signal:l}={}},u){if(!r)return{data:null,error:new Ti("rpId is required for WebAuthn registration")};try{if(!Hg())return{data:null,error:new Jr("Browser does not support WebAuthn",null)};const{data:m,error:y}=yield this._enroll({friendlyName:t});if(!m)return yield this.client.mfa.listFactors().then(x=>{var j;return(j=x.data)===null||j===void 0?void 0:j.all.find(S=>S.factor_type==="webauthn"&&S.friendly_name===t&&S.status!=="unverified")}).then(x=>x?this.client.mfa.unenroll({factorId:x==null?void 0:x.id}):void 0),{data:null,error:y};const{data:p,error:b}=yield this._challenge({factorId:m.id,friendlyName:m.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:l},{create:u});return p?this._verify({factorId:m.id,challengeId:p.challengeId,webauthn:{rpId:r,rpOrigins:n,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:b}}catch(m){return oe(m)?{data:null,error:m}:{data:null,error:new Jr("Unexpected error in register",m)}}})}}rw();const jw={url:px,storageKey:vx,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:bx,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};function Ig(s,t,r){return _(this,null,function*(){return yield r()})}const Qs={};class Ei{get jwks(){var t,r;return(r=(t=Qs[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Qs[this.storageKey]=Object.assign(Object.assign({},Qs[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Qs[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Qs[this.storageKey]=Object.assign(Object.assign({},Qs[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,l;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const u=Object.assign(Object.assign({},jw),t);if(this.storageKey=u.storageKey,this.instanceID=(r=Ei.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Ei.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.instanceID>0&&Rt()){const h=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(h),this.logDebugMessages&&console.trace(h)}if(this.persistSession=u.persistSession,this.autoRefreshToken=u.autoRefreshToken,this.admin=new ew({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=E0(u.fetch),this.lock=u.lock||Ig,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,this.throwOnError=u.throwOnError,u.lock?this.lock=u.lock:this.persistSession&&Rt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=aw:this.lock=Ig,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new ww(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(u.storage?this.storage=u.storage:T0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Bg(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=Bg(this.memoryStorage)),Rt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(h){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",h)}(l=this.broadcastChannel)===null||l===void 0||l.addEventListener("message",h=>_(this,null,function*(){this._debug("received broadcast notification from other tab or client",h),yield this._notifyAllSubscribers(h.data.event,h.data.session,!1)}))}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${_0}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}initialize(){return _(this,null,function*(){return this.initializePromise?yield this.initializePromise:(this.initializePromise=_(this,null,function*(){return yield this._acquireLock(-1,()=>_(this,null,function*(){return yield this._initialize()}))}),yield this.initializePromise)})}_initialize(){return _(this,null,function*(){var t;try{let r={},n="none";if(Rt()&&(r=Mx(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":(yield this._isPKCECallback(r))&&(n="pkce")),Rt()&&this.detectSessionInUrl&&n!=="none"){const{data:l,error:u}=yield this._getSessionFromURL(r,n);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),Nx(u)){const m=(t=u.details)===null||t===void 0?void 0:t.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:u}}return yield this._removeSession(),{error:u}}const{session:h,redirectType:g}=l;return this._debug("#_initialize()","detected session in URL",h,"redirect type",g),yield this._saveSession(h),setTimeout(()=>_(this,null,function*(){g==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",h):yield this._notifyAllSubscribers("SIGNED_IN",h)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(r){return oe(r)?this._returnResult({error:r}):this._returnResult({error:new Jr("Unexpected error during initialization",r)})}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signInAnonymously(t){return _(this,null,function*(){var r,n,l;try{const u=yield he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(l=t==null?void 0:t.options)===null||l===void 0?void 0:l.captchaToken}},xform:pa}),{data:h,error:g}=u;if(g||!h)return this._returnResult({data:{user:null,session:null},error:g});const m=h.session,y=h.user;return h.session&&(yield this._saveSession(h.session),yield this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:y,session:m},error:null})}catch(u){if(oe(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}})}signUp(t){return _(this,null,function*(){var r,n,l;try{let u;if("email"in t){const{email:p,password:b,options:x}=t;let j=null,S=null;this.flowType==="pkce"&&([j,S]=yield Is(this.storage,this.storageKey)),u=yield he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:p,password:b,data:(r=x==null?void 0:x.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:j,code_challenge_method:S},xform:pa})}else if("phone"in t){const{phone:p,password:b,options:x}=t;u=yield he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:b,data:(n=x==null?void 0:x.data)!==null&&n!==void 0?n:{},channel:(l=x==null?void 0:x.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:pa})}else throw new Fl("You must provide either an email or phone number and a password");const{data:h,error:g}=u;if(g||!h)return yield At(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:g});const m=h.session,y=h.user;return h.session&&(yield this._saveSession(h.session),yield this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:y,session:m},error:null})}catch(u){if(yield At(this.storage,`${this.storageKey}-code-verifier`),oe(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}})}signInWithPassword(t){return _(this,null,function*(){try{let r;if("email"in t){const{email:u,password:h,options:g}=t;r=yield he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:h,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Pg})}else if("phone"in t){const{phone:u,password:h,options:g}=t;r=yield he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:h,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Pg})}else throw new Fl("You must provide either an email or phone number and a password");const{data:n,error:l}=r;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!n||!n.session||!n.user){const u=new Hs;return this._returnResult({data:{user:null,session:null},error:u})}return n.session&&(yield this._saveSession(n.session),yield this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:l})}catch(r){if(oe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}signInWithOAuth(t){return _(this,null,function*(){var r,n,l,u;return yield this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(u=t.options)===null||u===void 0?void 0:u.skipBrowserRedirect})})}exchangeCodeForSession(t){return _(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>_(this,null,function*(){return this._exchangeCodeForSession(t)}))})}signInWithWeb3(t){return _(this,null,function*(){const{chain:r}=t;switch(r){case"ethereum":return yield this.signInWithEthereum(t);case"solana":return yield this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}})}signInWithEthereum(t){return _(this,null,function*(){var r,n,l,u,h,g,m,y,p,b,x;let j,S;if("message"in t)j=t.message,S=t.signature;else{const{chain:C,wallet:A,statement:q,options:P}=t;let M;if(Rt())if(typeof A=="object")M=A;else{const T=window;if("ethereum"in T&&typeof T.ethereum=="object"&&"request"in T.ethereum&&typeof T.ethereum.request=="function")M=T.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!(P!=null&&P.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=A}const Q=new URL((r=P==null?void 0:P.url)!==null&&r!==void 0?r:window.location.href),I=yield M.request({method:"eth_requestAccounts"}).then(T=>T).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!I||I.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const D=O0(I[0]);let Y=(n=P==null?void 0:P.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!Y){const T=yield M.request({method:"eth_chainId"});Y=sw(T)}const N={domain:Q.host,address:D,statement:q,uri:Q.href,version:"1",chainId:Y,nonce:(l=P==null?void 0:P.signInWithEthereum)===null||l===void 0?void 0:l.nonce,issuedAt:(h=(u=P==null?void 0:P.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(g=P==null?void 0:P.signInWithEthereum)===null||g===void 0?void 0:g.expirationTime,notBefore:(m=P==null?void 0:P.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(y=P==null?void 0:P.signInWithEthereum)===null||y===void 0?void 0:y.requestId,resources:(p=P==null?void 0:P.signInWithEthereum)===null||p===void 0?void 0:p.resources};j=iw(N),S=yield M.request({method:"personal_sign",params:[nw(j),D]})}try{const{data:C,error:A}=yield he(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:j,signature:S},!((b=t.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:pa});if(A)throw A;if(!C||!C.session||!C.user){const q=new Hs;return this._returnResult({data:{user:null,session:null},error:q})}return C.session&&(yield this._saveSession(C.session),yield this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:A})}catch(C){if(oe(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}})}signInWithSolana(t){return _(this,null,function*(){var r,n,l,u,h,g,m,y,p,b,x,j;let S,C;if("message"in t)S=t.message,C=t.signature;else{const{chain:A,wallet:q,statement:P,options:M}=t;let Q;if(Rt())if(typeof q=="object")Q=q;else{const D=window;if("solana"in D&&typeof D.solana=="object"&&("signIn"in D.solana&&typeof D.solana.signIn=="function"||"signMessage"in D.solana&&typeof D.solana.signMessage=="function"))Q=D.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof q!="object"||!(M!=null&&M.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Q=q}const I=new URL((r=M==null?void 0:M.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in Q&&Q.signIn){const D=yield Q.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},M==null?void 0:M.signInWithSolana),{version:"1",domain:I.host,uri:I.href}),P?{statement:P}:null));let Y;if(Array.isArray(D)&&D[0]&&typeof D[0]=="object")Y=D[0];else if(D&&typeof D=="object"&&"signedMessage"in D&&"signature"in D)Y=D;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in Y&&"signature"in Y&&(typeof Y.signedMessage=="string"||Y.signedMessage instanceof Uint8Array)&&Y.signature instanceof Uint8Array)S=typeof Y.signedMessage=="string"?Y.signedMessage:new TextDecoder().decode(Y.signedMessage),C=Y.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in Q)||typeof Q.signMessage!="function"||!("publicKey"in Q)||typeof Q!="object"||!Q.publicKey||!("toBase58"in Q.publicKey)||typeof Q.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${I.host} wants you to sign in with your Solana account:`,Q.publicKey.toBase58(),...P?["",P,""]:[""],"Version: 1",`URI: ${I.href}`,`Issued At: ${(l=(n=M==null?void 0:M.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((u=M==null?void 0:M.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${M.signInWithSolana.notBefore}`]:[],...!((h=M==null?void 0:M.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${M.signInWithSolana.expirationTime}`]:[],...!((g=M==null?void 0:M.signInWithSolana)===null||g===void 0)&&g.chainId?[`Chain ID: ${M.signInWithSolana.chainId}`]:[],...!((m=M==null?void 0:M.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${M.signInWithSolana.nonce}`]:[],...!((y=M==null?void 0:M.signInWithSolana)===null||y===void 0)&&y.requestId?[`Request ID: ${M.signInWithSolana.requestId}`]:[],...!((b=(p=M==null?void 0:M.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||b===void 0)&&b.length?["Resources",...M.signInWithSolana.resources.map(Y=>`- ${Y}`)]:[]].join(`
`);const D=yield Q.signMessage(new TextEncoder().encode(S),"utf8");if(!D||!(D instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=D}}try{const{data:A,error:q}=yield he(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:Zr(C)},!((x=t.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(j=t.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:pa});if(q)throw q;if(!A||!A.session||!A.user){const P=new Hs;return this._returnResult({data:{user:null,session:null},error:P})}return A.session&&(yield this._saveSession(A.session),yield this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:q})}catch(A){if(oe(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}})}_exchangeCodeForSession(t){return _(this,null,function*(){const r=yield Kr(this.storage,`${this.storageKey}-code-verifier`),[n,l]=(r!=null?r:"").split("/");try{if(!n&&this.flowType==="pkce")throw new Tx;const{data:u,error:h}=yield he(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:pa});if(yield At(this.storage,`${this.storageKey}-code-verifier`),h)throw h;if(!u||!u.session||!u.user){const g=new Hs;return this._returnResult({data:{user:null,session:null,redirectType:null},error:g})}return u.session&&(yield this._saveSession(u.session),yield this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:Object.assign(Object.assign({},u),{redirectType:l!=null?l:null}),error:h})}catch(u){if(yield At(this.storage,`${this.storageKey}-code-verifier`),oe(u))return this._returnResult({data:{user:null,session:null,redirectType:null},error:u});throw u}})}signInWithIdToken(t){return _(this,null,function*(){try{const{options:r,provider:n,token:l,access_token:u,nonce:h}=t,g=yield he(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:l,access_token:u,nonce:h,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:pa}),{data:m,error:y}=g;if(y)return this._returnResult({data:{user:null,session:null},error:y});if(!m||!m.session||!m.user){const p=new Hs;return this._returnResult({data:{user:null,session:null},error:p})}return m.session&&(yield this._saveSession(m.session),yield this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:y})}catch(r){if(oe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}signInWithOtp(t){return _(this,null,function*(){var r,n,l,u,h;try{if("email"in t){const{email:g,options:m}=t;let y=null,p=null;this.flowType==="pkce"&&([y,p]=yield Is(this.storage,this.storageKey));const{error:b}=yield he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:g,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},create_user:(n=m==null?void 0:m.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:y,code_challenge_method:p},redirectTo:m==null?void 0:m.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:b})}if("phone"in t){const{phone:g,options:m}=t,{data:y,error:p}=yield he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:g,data:(l=m==null?void 0:m.data)!==null&&l!==void 0?l:{},create_user:(u=m==null?void 0:m.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},channel:(h=m==null?void 0:m.channel)!==null&&h!==void 0?h:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:y==null?void 0:y.message_id},error:p})}throw new Fl("You must provide either an email or phone number.")}catch(g){if(yield At(this.storage,`${this.storageKey}-code-verifier`),oe(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}})}verifyOtp(t){return _(this,null,function*(){var r,n;try{let l,u;"options"in t&&(l=(r=t.options)===null||r===void 0?void 0:r.redirectTo,u=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:h,error:g}=yield he(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:u}}),redirectTo:l,xform:pa});if(g)throw g;if(!h)throw new Error("An error occurred on token verification.");const m=h.session,y=h.user;return m!=null&&m.access_token&&(yield this._saveSession(m),yield this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:y,session:m},error:null})}catch(l){if(oe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}})}signInWithSSO(t){return _(this,null,function*(){var r,n,l,u,h;try{let g=null,m=null;this.flowType==="pkce"&&([g,m]=yield Is(this.storage,this.storageKey));const y=yield he(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((l=t==null?void 0:t.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:g,code_challenge_method:m}),headers:this.headers,xform:Wx});return!((u=y.data)===null||u===void 0)&&u.url&&Rt()&&!(!((h=t.options)===null||h===void 0)&&h.skipBrowserRedirect)&&window.location.assign(y.data.url),this._returnResult(y)}catch(g){if(yield At(this.storage,`${this.storageKey}-code-verifier`),oe(g))return this._returnResult({data:null,error:g});throw g}})}reauthenticate(){return _(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>_(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return _(this,null,function*(){try{return yield this._useSession(t=>_(this,null,function*(){const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Wt;const{error:l}=yield he(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:l})}))}catch(t){if(oe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}})}resend(t){return _(this,null,function*(){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:l,options:u}=t,{error:h}=yield he(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},redirectTo:u==null?void 0:u.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}else if("phone"in t){const{phone:n,type:l,options:u}=t,{data:h,error:g}=yield he(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:g})}throw new Fl("You must provide either an email or phone number and a type")}catch(r){if(oe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}getSession(){return _(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>_(this,null,function*(){return this._useSession(r=>_(this,null,function*(){return r}))}))})}_acquireLock(t,r){return _(this,null,function*(){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=_(this,null,function*(){return yield n,yield r()});return this.pendingInLock.push(_(this,null,function*(){try{yield l}catch(u){}})),l}return yield this.lock(`lock:${this.storageKey}`,t,()=>_(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push(_(this,null,function*(){try{yield n}catch(l){}})),yield n;this.pendingInLock.length;){const l=[...this.pendingInLock];yield Promise.all(l),this.pendingInLock.splice(0,l.length)}return yield n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(t){return _(this,null,function*(){this._debug("#_useSession","begin");try{const r=yield this.__loadSession();return yield t(r)}finally{this._debug("#_useSession","end")}})}__loadSession(){return _(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=yield Kr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<zu:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const h=yield Kr(this.userStorage,this.storageKey+"-user");h!=null&&h.user?t.user=h.user:t.user=Bu()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const h={value:this.suppressGetSessionWarning};t.user=Gx(t.user,h),h.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:l,error:u}=yield this._callRefreshToken(t.refresh_token);return u?this._returnResult({data:{session:null},error:u}):this._returnResult({data:{session:l},error:null})}finally{this._debug("#__loadSession()","end")}})}getUser(t){return _(this,null,function*(){if(t)return yield this._getUser(t);yield this.initializePromise;const r=yield this._acquireLock(-1,()=>_(this,null,function*(){return yield this._getUser()}));return r.data.user&&(this.suppressGetSessionWarning=!0),r})}_getUser(t){return _(this,null,function*(){try{return t?yield he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Nr}):yield this._useSession(r=>_(this,null,function*(){var n,l,u;const{data:h,error:g}=r;if(g)throw g;return!(!((n=h.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Wt}:yield he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(l=h.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0,xform:Nr})}))}catch(r){if(oe(r))return Sx(r)&&(yield this._removeSession(),yield At(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}})}updateUser(n){return _(this,arguments,function*(t,r={}){return yield this.initializePromise,yield this._acquireLock(-1,()=>_(this,null,function*(){return yield this._updateUser(t,r)}))})}_updateUser(n){return _(this,arguments,function*(t,r={}){try{return yield this._useSession(l=>_(this,null,function*(){const{data:u,error:h}=l;if(h)throw h;if(!u.session)throw new Wt;const g=u.session;let m=null,y=null;this.flowType==="pkce"&&t.email!=null&&([m,y]=yield Is(this.storage,this.storageKey));const{data:p,error:b}=yield he(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:m,code_challenge_method:y}),jwt:g.access_token,xform:Nr});if(b)throw b;return g.user=p.user,yield this._saveSession(g),yield this._notifyAllSubscribers("USER_UPDATED",g),this._returnResult({data:{user:g.user},error:null})}))}catch(l){if(yield At(this.storage,`${this.storageKey}-code-verifier`),oe(l))return this._returnResult({data:{user:null},error:l});throw l}})}setSession(t){return _(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>_(this,null,function*(){return yield this._setSession(t)}))})}_setSession(t){return _(this,null,function*(){try{if(!t.access_token||!t.refresh_token)throw new Wt;const r=Date.now()/1e3;let n=r,l=!0,u=null;const{payload:h}=$u(t.access_token);if(h.exp&&(n=h.exp,l=n<=r),l){const{data:g,error:m}=yield this._callRefreshToken(t.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!g)return{data:{user:null,session:null},error:null};u=g}else{const{data:g,error:m}=yield this._getUser(t.access_token);if(m)throw m;u={access_token:t.access_token,refresh_token:t.refresh_token,user:g.user,token_type:"bearer",expires_in:n-r,expires_at:n},yield this._saveSession(u),yield this._notifyAllSubscribers("SIGNED_IN",u)}return this._returnResult({data:{user:u.user,session:u},error:null})}catch(r){if(oe(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}})}refreshSession(t){return _(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>_(this,null,function*(){return yield this._refreshSession(t)}))})}_refreshSession(t){return _(this,null,function*(){try{return yield this._useSession(r=>_(this,null,function*(){var n;if(!t){const{data:h,error:g}=r;if(g)throw g;t=(n=h.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Wt;const{data:l,error:u}=yield this._callRefreshToken(t.refresh_token);return u?this._returnResult({data:{user:null,session:null},error:u}):l?this._returnResult({data:{user:l.user,session:l},error:null}):this._returnResult({data:{user:null,session:null},error:null})}))}catch(r){if(oe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}_getSessionFromURL(t,r){return _(this,null,function*(){try{if(!Rt())throw new Xl("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Xl(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Rg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Xl("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Rg("No code detected.");const{data:P,error:M}=yield this._exchangeCodeForSession(t.code);if(M)throw M;const Q=new URL(window.location.href);return Q.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Q.toString()),{data:{session:P.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:l,access_token:u,refresh_token:h,expires_in:g,expires_at:m,token_type:y}=t;if(!u||!g||!h||!y)throw new Xl("No session defined in URL");const p=Math.round(Date.now()/1e3),b=parseInt(g);let x=p+b;m&&(x=parseInt(m));const j=x-p;j*1e3<=Fs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${j}s, should have been closer to ${b}s`);const S=x-b;p-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,x,p):p-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,x,p);const{data:C,error:A}=yield this._getUser(u);if(A)throw A;const q={provider_token:n,provider_refresh_token:l,access_token:u,expires_in:b,expires_at:x,refresh_token:h,token_type:y,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:q,redirectType:t.type},error:null})}catch(n){if(oe(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}})}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}_isPKCECallback(t){return _(this,null,function*(){const r=yield Kr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)})}signOut(){return _(this,arguments,function*(t={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(-1,()=>_(this,null,function*(){return yield this._signOut(t)}))})}_signOut(){return _(this,arguments,function*({scope:t}={scope:"global"}){return yield this._useSession(r=>_(this,null,function*(){var n;const{data:l,error:u}=r;if(u)return this._returnResult({error:u});const h=(n=l.session)===null||n===void 0?void 0:n.access_token;if(h){const{error:g}=yield this.admin.signOut(h,t);if(g&&!(_x(g)&&(g.status===404||g.status===401||g.status===403)))return this._returnResult({error:g})}return t!=="others"&&(yield this._removeSession(),yield At(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})}))})}onAuthStateChange(t){const r=kx(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),_(this,null,function*(){yield this.initializePromise,yield this._acquireLock(-1,()=>_(this,null,function*(){this._emitInitialSession(r)}))}),{data:{subscription:n}}}_emitInitialSession(t){return _(this,null,function*(){return yield this._useSession(r=>_(this,null,function*(){var n,l;try{const{data:{session:u},error:h}=r;if(h)throw h;yield(n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",u),this._debug("INITIAL_SESSION","callback id",t,"session",u)}catch(u){yield(l=this.stateChangeEmitters.get(t))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",t,"error",u),console.error(u)}}))})}resetPasswordForEmail(n){return _(this,arguments,function*(t,r={}){let l=null,u=null;this.flowType==="pkce"&&([l,u]=yield Is(this.storage,this.storageKey,!0));try{return yield he(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:l,code_challenge_method:u,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(h){if(yield At(this.storage,`${this.storageKey}-code-verifier`),oe(h))return this._returnResult({data:null,error:h});throw h}})}getUserIdentities(){return _(this,null,function*(){var t;try{const{data:r,error:n}=yield this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}})}linkIdentity(t){return _(this,null,function*(){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)})}linkIdentityOAuth(t){return _(this,null,function*(){var r;try{const{data:n,error:l}=yield this._useSession(u=>_(this,null,function*(){var h,g,m,y,p;const{data:b,error:x}=u;if(x)throw x;const j=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(h=t.options)===null||h===void 0?void 0:h.redirectTo,scopes:(g=t.options)===null||g===void 0?void 0:g.scopes,queryParams:(m=t.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return yield he(this.fetch,"GET",j,{headers:this.headers,jwt:(p=(y=b.session)===null||y===void 0?void 0:y.access_token)!==null&&p!==void 0?p:void 0})}));if(l)throw l;return Rt()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(oe(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}})}linkIdentityIdToken(t){return _(this,null,function*(){return yield this._useSession(r=>_(this,null,function*(){var n;try{const{error:l,data:{session:u}}=r;if(l)throw l;const{options:h,provider:g,token:m,access_token:y,nonce:p}=t,b=yield he(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=u==null?void 0:u.access_token)!==null&&n!==void 0?n:void 0,body:{provider:g,id_token:m,access_token:y,nonce:p,link_identity:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:pa}),{data:x,error:j}=b;return j?this._returnResult({data:{user:null,session:null},error:j}):!x||!x.session||!x.user?this._returnResult({data:{user:null,session:null},error:new Hs}):(x.session&&(yield this._saveSession(x.session),yield this._notifyAllSubscribers("USER_UPDATED",x.session)),this._returnResult({data:x,error:j}))}catch(l){if(yield At(this.storage,`${this.storageKey}-code-verifier`),oe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}))})}unlinkIdentity(t){return _(this,null,function*(){try{return yield this._useSession(r=>_(this,null,function*(){var n,l;const{data:u,error:h}=r;if(h)throw h;return yield he(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(l=(n=u.session)===null||n===void 0?void 0:n.access_token)!==null&&l!==void 0?l:void 0})}))}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}})}_refreshAccessToken(t){return _(this,null,function*(){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return yield Lx(l=>_(this,null,function*(){return l>0&&(yield qx(200*Math.pow(2,l-1))),this._debug(r,"refreshing attempt",l),yield he(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:pa})}),(l,u)=>{const h=200*Math.pow(2,l);return u&&Pu(u)&&Date.now()+h-n<Fs})}catch(n){if(this._debug(r,"error",n),oe(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}})}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}_handleProviderSignIn(t,r){return _(this,null,function*(){const n=yield this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Rt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}})}_recoverAndRefresh(){return _(this,null,function*(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const l=yield Kr(this.storage,this.storageKey);if(l&&this.userStorage){let h=yield Kr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:l.user},yield Xs(this.userStorage,this.storageKey+"-user",h)),l.user=(t=h==null?void 0:h.user)!==null&&t!==void 0?t:Bu()}else if(l&&!l.user&&!l.user){const h=yield Kr(this.storage,this.storageKey+"-user");h&&(h!=null&&h.user)?(l.user=h.user,yield At(this.storage,this.storageKey+"-user"),yield Xs(this.storage,this.storageKey,l)):l.user=Bu()}if(this._debug(n,"session from storage",l),!this._isValidSession(l)){this._debug(n,"session is not valid"),l!==null&&(yield this._removeSession());return}const u=((r=l.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<zu;if(this._debug(n,`session has${u?"":" not"} expired with margin of ${zu}s`),u){if(this.autoRefreshToken&&l.refresh_token){const{error:h}=yield this._callRefreshToken(l.refresh_token);h&&(console.error(h),Pu(h)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",h),yield this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:g}=yield this._getUser(l.access_token);!g&&(h!=null&&h.user)?(l.user=h.user,yield this._saveSession(l),yield this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(n,"error getting user data, skipping SIGNED_IN notification",h)}else yield this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(n,"error",l),console.error(l);return}finally{this._debug(n,"end")}})}_callRefreshToken(t){return _(this,null,function*(){var r,n;if(!t)throw new Wt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new go;const{data:u,error:h}=yield this._refreshAccessToken(t);if(h)throw h;if(!u.session)throw new Wt;yield this._saveSession(u.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const g={data:u.session,error:null};return this.refreshingDeferred.resolve(g),g}catch(u){if(this._debug(l,"error",u),oe(u)){const h={data:null,error:u};return Pu(u)||(yield this._removeSession()),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(h),h}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(u),u}finally{this.refreshingDeferred=null,this._debug(l,"end")}})}_notifyAllSubscribers(t,r,n=!0){return _(this,null,function*(){const l=`#_notifyAllSubscribers(${t})`;this._debug(l,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const u=[],h=Array.from(this.stateChangeEmitters.values()).map(g=>_(this,null,function*(){try{yield g.callback(t,r)}catch(m){u.push(m)}}));if(yield Promise.all(h),u.length>0){for(let g=0;g<u.length;g+=1)console.error(u[g]);throw u[0]}}finally{this._debug(l,"end")}})}_saveSession(t){return _(this,null,function*(){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,yield At(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&(yield Xs(this.userStorage,this.storageKey+"-user",{user:r.user}));const l=Object.assign({},r);delete l.user;const u=Lg(l);yield Xs(this.storage,this.storageKey,u)}else{const l=Lg(r);yield Xs(this.storage,this.storageKey,l)}})}_removeSession(){return _(this,null,function*(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,yield At(this.storage,this.storageKey),yield At(this.storage,this.storageKey+"-code-verifier"),yield At(this.storage,this.storageKey+"-user"),this.userStorage&&(yield At(this.userStorage,this.storageKey+"-user")),yield this._notifyAllSubscribers("SIGNED_OUT",null)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Rt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}_startAutoRefresh(){return _(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Fs);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno!="undefined"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(()=>_(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0)})}_stopAutoRefresh(){return _(this,null,function*(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)})}startAutoRefresh(){return _(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return _(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return _(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>_(this,null,function*(){try{const t=Date.now();try{return yield this._useSession(r=>_(this,null,function*(){const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((n.expires_at*1e3-t)/Fs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${Fs}ms, refresh threshold is ${ad} ticks`),l<=ad&&(yield this._callRefreshToken(n.refresh_token))}))}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(t){if(t.isAcquireTimeout||t instanceof C0)this._debug("auto refresh token tick lock not available");else throw t}})}_handleVisibilityChange(){return _(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!Rt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>_(this,null,function*(){return yield this._onVisibilityChanged(!1)}),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}})}_onVisibilityChanged(t){return _(this,null,function*(){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(yield this.initializePromise,yield this._acquireLock(-1,()=>_(this,null,function*(){if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}yield this._recoverAndRefresh()})))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(t,r,n){return _(this,null,function*(){const l=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&l.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&l.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[u,h]=yield Is(this.storage,this.storageKey),g=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(h)}`});l.push(g.toString())}if(n!=null&&n.queryParams){const u=new URLSearchParams(n.queryParams);l.push(u.toString())}return n!=null&&n.skipBrowserRedirect&&l.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${l.join("&")}`})}_unenroll(t){return _(this,null,function*(){try{return yield this._useSession(r=>_(this,null,function*(){var n;const{data:l,error:u}=r;return u?this._returnResult({data:null,error:u}):yield he(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=l==null?void 0:l.session)===null||n===void 0?void 0:n.access_token})}))}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}})}_enroll(t){return _(this,null,function*(){try{return yield this._useSession(r=>_(this,null,function*(){var n,l;const{data:u,error:h}=r;if(h)return this._returnResult({data:null,error:h});const g=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:m,error:y}=yield he(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:(n=u==null?void 0:u.session)===null||n===void 0?void 0:n.access_token});return y?this._returnResult({data:null,error:y}):(t.factorType==="totp"&&m.type==="totp"&&(!((l=m==null?void 0:m.totp)===null||l===void 0)&&l.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))}))}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}})}_verify(t){return _(this,null,function*(){return this._acquireLock(-1,()=>_(this,null,function*(){try{return yield this._useSession(r=>_(this,null,function*(){var n;const{data:l,error:u}=r;if(u)return this._returnResult({data:null,error:u});const h=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?fw(t.webauthn.credential_response):mw(t.webauthn.credential_response)})}:{code:t.code}),{data:g,error:m}=yield he(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:h,headers:this.headers,jwt:(n=l==null?void 0:l.session)===null||n===void 0?void 0:n.access_token});return m?this._returnResult({data:null,error:m}):(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+g.expires_in},g)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",g),this._returnResult({data:g,error:m}))}))}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}))})}_challenge(t){return _(this,null,function*(){return this._acquireLock(-1,()=>_(this,null,function*(){try{return yield this._useSession(r=>_(this,null,function*(){var n;const{data:l,error:u}=r;if(u)return this._returnResult({data:null,error:u});const h=yield he(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=l==null?void 0:l.session)===null||n===void 0?void 0:n.access_token});if(h.error)return h;const{data:g}=h;if(g.type!=="webauthn")return{data:g,error:null};switch(g.webauthn.type){case"create":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:dw(g.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:hw(g.webauthn.credential_options.publicKey)})})}),error:null}}}))}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}))})}_challengeAndVerify(t){return _(this,null,function*(){const{data:r,error:n}=yield this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):yield this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})})}_listFactors(){return _(this,null,function*(){var t;const{data:{user:r},error:n}=yield this.getUser();if(n)return{data:null,error:n};const l={all:[],phone:[],totp:[],webauthn:[]};for(const u of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])l.all.push(u),u.status==="verified"&&l[u.factor_type].push(u);return{data:l,error:null}})}_getAuthenticatorAssuranceLevel(){return _(this,null,function*(){var t,r;const{data:{session:n},error:l}=yield this.getSession();if(l)return this._returnResult({data:null,error:l});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=$u(n.access_token);let h=null;u.aal&&(h=u.aal);let g=h;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(p=>p.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(g="aal2");const y=u.amr||[];return{data:{currentLevel:h,nextLevel:g,currentAuthenticationMethods:y},error:null}})}_getAuthorizationDetails(t){return _(this,null,function*(){try{return yield this._useSession(r=>_(this,null,function*(){const{data:{session:n},error:l}=r;return l?this._returnResult({data:null,error:l}):n?yield he(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new Wt})}))}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}})}_approveAuthorization(t,r){return _(this,null,function*(){try{return yield this._useSession(n=>_(this,null,function*(){const{data:{session:l},error:u}=n;if(u)return this._returnResult({data:null,error:u});if(!l)return this._returnResult({data:null,error:new Wt});const h=yield he(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"approve"},xform:g=>({data:g,error:null})});return h.data&&h.data.redirect_url&&Rt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(h.data.redirect_url),h}))}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}})}_denyAuthorization(t,r){return _(this,null,function*(){try{return yield this._useSession(n=>_(this,null,function*(){const{data:{session:l},error:u}=n;if(u)return this._returnResult({data:null,error:u});if(!l)return this._returnResult({data:null,error:new Wt});const h=yield he(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"deny"},xform:g=>({data:g,error:null})});return h.data&&h.data.redirect_url&&Rt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(h.data.redirect_url),h}))}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}})}_listOAuthGrants(){return _(this,null,function*(){try{return yield this._useSession(t=>_(this,null,function*(){const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?yield he(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Wt})}))}catch(t){if(oe(t))return this._returnResult({data:null,error:t});throw t}})}_revokeOAuthGrant(t){return _(this,null,function*(){try{return yield this._useSession(r=>_(this,null,function*(){const{data:{session:n},error:l}=r;return l?this._returnResult({data:null,error:l}):n?(yield he(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Wt})}))}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}})}fetchJwk(n){return _(this,arguments,function*(t,r={keys:[]}){let l=r.keys.find(m=>m.kid===t);if(l)return l;const u=Date.now();if(l=this.jwks.keys.find(m=>m.kid===t),l&&this.jwks_cached_at+wx>u)return l;const{data:h,error:g}=yield he(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(g)throw g;return!h.keys||h.keys.length===0||(this.jwks=h,this.jwks_cached_at=u,l=h.keys.find(m=>m.kid===t),!l)?null:l})}getClaims(n){return _(this,arguments,function*(t,r={}){try{let l=t;if(!l){const{data:S,error:C}=yield this.getSession();if(C||!S.session)return this._returnResult({data:null,error:C});l=S.session.access_token}const{header:u,payload:h,signature:g,raw:{header:m,payload:y}}=$u(l);r!=null&&r.allowExpired||Yx(h.exp);const p=!u.alg||u.alg.startsWith("HS")||!u.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:yield this.fetchJwk(u.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!p){const{error:S}=yield this.getUser(l);if(S)throw S;return{data:{claims:h,header:u,signature:g},error:null}}const b=Vx(u.alg),x=yield crypto.subtle.importKey("jwk",p,b,!0,["verify"]);if(!(yield crypto.subtle.verify(b,x,g,Ax(`${m}.${y}`))))throw new nd("Invalid JWT signature");return{data:{claims:h,header:u,signature:g},error:null}}catch(l){if(oe(l))return this._returnResult({data:null,error:l});throw l}})}}Ei.nextInstanceID={};const _w=Ei,Sw="2.89.0";let mi="";typeof Deno!="undefined"?mi="deno":typeof document!="undefined"?mi="web":typeof navigator!="undefined"&&navigator.product==="ReactNative"?mi="react-native":mi="node";const Nw={"X-Client-Info":`supabase-js-${mi}/${Sw}`},Tw={headers:Nw},Ew={schema:"public"},Cw={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ow={};function Ci(s){"@babel/helpers - typeof";return Ci=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ci(s)}function Dw(s,t){if(Ci(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var n=r.call(s,t);if(Ci(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}function Aw(s){var t=Dw(s,"string");return Ci(t)=="symbol"?t:t+""}function Rw(s,t,r){return(t=Aw(t))in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function Yg(s,t){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);t&&(n=n.filter(function(l){return Object.getOwnPropertyDescriptor(s,l).enumerable})),r.push.apply(r,n)}return r}function nt(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Yg(Object(r),!0).forEach(function(n){Rw(s,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):Yg(Object(r)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(r,n))})}return s}const kw=s=>s?(...t)=>s(...t):(...t)=>fetch(...t),Mw=()=>Headers,Uw=(s,t,r)=>{const n=kw(r),l=Mw();return(u,h)=>_(null,null,function*(){var g;const m=(g=yield t())!==null&&g!==void 0?g:s;let y=new l(h==null?void 0:h.headers);return y.has("apikey")||y.set("apikey",s),y.has("Authorization")||y.set("Authorization",`Bearer ${m}`),n(u,nt(nt({},h),{},{headers:y}))})};function qw(s){return s.endsWith("/")?s:s+"/"}function Lw(s,t){var r,n;const{db:l,auth:u,realtime:h,global:g}=s,{db:m,auth:y,realtime:p,global:b}=t,x={db:nt(nt({},m),l),auth:nt(nt({},y),u),realtime:nt(nt({},p),h),storage:{},global:nt(nt(nt({},b),g),{},{headers:nt(nt({},(r=b==null?void 0:b.headers)!==null&&r!==void 0?r:{}),(n=g==null?void 0:g.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>_(null,null,function*(){return""})};return s.accessToken?x.accessToken=s.accessToken:delete x.accessToken,x}function zw(s){const t=s==null?void 0:s.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(qw(t))}catch(r){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Pw=class extends _w{constructor(s){super(s)}},$w=class{constructor(s,t,r){var n,l;this.supabaseUrl=s,this.supabaseKey=t;const u=zw(s);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const h=`sb-${u.hostname.split(".")[0]}-auth-token`,g={db:Ew,realtime:Ow,auth:nt(nt({},Cw),{},{storageKey:h}),global:Tw},m=Lw(r!=null?r:{},g);if(this.storageKey=(n=m.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(l=m.global.headers)!==null&&l!==void 0?l:{},m.accessToken)this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(p,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}});else{var y;this.auth=this._initSupabaseAuthClient((y=m.auth)!==null&&y!==void 0?y:{},this.headers,m.global.fetch)}this.fetch=Uw(t,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(nt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.accessToken&&this.accessToken().then(p=>this.realtime.setAuth(p)).catch(p=>console.warn("Failed to set initial Realtime auth token:",p)),this.rest=new bb(new URL("rest/v1",u).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new yx(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new mb(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(s,t,r)}channel(s,t={config:{}}){return this.realtime.channel(s,t)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return _(this,null,function*(){var s=this,t,r;if(s.accessToken)return yield s.accessToken();const{data:n}=yield s.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:s.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:l,storageKey:u,flowType:h,lock:g,debug:m,throwOnError:y},p,b){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Pw({url:this.authUrl.href,headers:nt(nt({},x),p),storageKey:u,autoRefreshToken:s,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:l,flowType:h,lock:g,debug:m,throwOnError:y,fetch:b,hasCustomAuthorizationHeader:Object.keys(this.headers).some(j=>j.toLowerCase()==="authorization")})}_initRealtimeClient(s){return new qb(this.realtimeUrl.href,nt(nt({},s),{},{params:nt(nt({},{apikey:this.supabaseKey}),s==null?void 0:s.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,t)=>{this._handleTokenChanged(s,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(s,t,r){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):s==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Bw=(s,t,r)=>new $w(s,t,r);function Hw(){if(typeof window!="undefined"||typeof process=="undefined")return!1;const s=process.version;if(s==null)return!1;const t=s.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Hw()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Iw="https://tirzmotuypesxopnnitt.supabase.co",Yw="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRpcnptb3R1eXBlc3hvcG5uaXR0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYzOTAyMjEsImV4cCI6MjA3MTk2NjIyMX0.YQaXWOWEFoiAJU412gA4MOXfm10E6XPJJb75FMh_H0k",Tr=Bw(Iw,Yw,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storage:window.localStorage,storageKey:"cc-flow-auth"}});class Vw{constructor(){ae(this,"config");ae(this,"cache",new Map);ae(this,"CACHE_DURATION",5*60*1e3);this.config={url:"https://tirzmotuypesxopnnitt.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRpcnptb3R1eXBlc3hvcG5uaXR0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYzOTAyMjEsImV4cCI6MjA3MTk2NjIyMX0.YQaXWOWEFoiAJU412gA4MOXfm10E6XPJJb75FMh_H0k"}}getCacheKey(t,r={}){return`${t}_${JSON.stringify(r)}`}getCachedData(t){const r=this.cache.get(t);return r&&Date.now()-r.timestamp<this.CACHE_DURATION?r.data:null}setCachedData(t,r){this.cache.set(t,{data:r,timestamp:Date.now()})}getCutProductivityByResponsible(t,r){return _(this,null,function*(){const n=this.getCacheKey("cut_productivity_responsible",{startDate:t,endDate:r}),l=this.getCachedData(n);if(l)return l;const u=yield fetch(`${this.config.url}/rest/v1/rpc/get_cut_productivity_by_responsible`,{method:"POST",headers:{apikey:this.config.anonKey,Authorization:`Bearer ${this.config.anonKey}`,"Content-Type":"application/json"},body:JSON.stringify({start_date:t,end_date:r})});if(!u.ok)throw new Error(`Supabase RPC error: ${u.status} ${u.statusText}`);const h=yield u.json();return this.setCachedData(n,h),h})}getCutProductivityByCNC(t,r){return _(this,null,function*(){const n=this.getCacheKey("cut_productivity_cnc",{startDate:t,endDate:r}),l=this.getCachedData(n);if(l)return l;const u=yield fetch(`${this.config.url}/rest/v1/rpc/get_cut_productivity_by_cnc`,{method:"POST",headers:{apikey:this.config.anonKey,Authorization:`Bearer ${this.config.anonKey}`,"Content-Type":"application/json"},body:JSON.stringify({start_date:t,end_date:r})});if(!u.ok)throw new Error(`Supabase RPC error: ${u.status} ${u.statusText}`);const h=yield u.json();return this.setCachedData(n,h),h})}getManufacturingProductivityByResponsible(t,r){return _(this,null,function*(){const n=this.getCacheKey("manufacturing_productivity_responsible",{startDate:t,endDate:r}),l=this.getCachedData(n);if(l)return l;const u=yield fetch(`${this.config.url}/rest/v1/rpc/get_manufacturing_productivity_by_responsible`,{method:"POST",headers:{apikey:this.config.anonKey,Authorization:`Bearer ${this.config.anonKey}`,"Content-Type":"application/json"},body:JSON.stringify({start_date:t,end_date:r})});if(!u.ok)throw new Error(`Supabase RPC error: ${u.status} ${u.statusText}`);const h=yield u.json();return this.setCachedData(n,h),h})}getMainMetrics(t,r){return _(this,null,function*(){const n=this.getCacheKey("main_metrics",{startDate:t,endDate:r}),l=this.getCachedData(n);if(l)return l;const u=yield fetch(`${this.config.url}/rest/v1/rpc/get_main_metrics_factory_analytics`,{method:"POST",headers:{apikey:this.config.anonKey,Authorization:`Bearer ${this.config.anonKey}`,"Content-Type":"application/json"},body:JSON.stringify({start_date:t,end_date:r})});if(!u.ok)throw new Error(`Supabase RPC error: ${u.status} ${u.statusText}`);const h=yield u.json(),g=Array.isArray(h)&&h.length>0?h[0]:h;return this.setCachedData(n,g),g})}getProjectsWithMetrics(l,u){return _(this,arguments,function*(t,r,n={}){const h=this.getCacheKey("projects_with_metrics",Xe({startDate:t,endDate:r},n)),g=this.getCachedData(h);if(g)return g;const m=yield fetch(`${this.config.url}/rest/v1/rpc/get_projects_with_metrics`,{method:"POST",headers:{apikey:this.config.anonKey,Authorization:`Bearer ${this.config.anonKey}`,"Content-Type":"application/json"},body:JSON.stringify({start_date:t,end_date:r,pm_filter:n.pm||null,status_filter:n.status||null})});if(!m.ok)throw new Error(`Supabase RPC error: ${m.status} ${m.statusText}`);const y=yield m.json();return this.setCachedData(h,y),y})}getOrdersByProject(t,r,n){return _(this,null,function*(){const l=this.getCacheKey("orders_by_project",{projectName:t,startDate:r,endDate:n}),u=this.getCachedData(l);if(u)return u;const h=yield fetch(`${this.config.url}/rest/v1/rpc/get_orders_by_project`,{method:"POST",headers:{apikey:this.config.anonKey,Authorization:`Bearer ${this.config.anonKey}`,"Content-Type":"application/json"},body:JSON.stringify({project_name:t,start_date:r,end_date:n})});if(!h.ok)throw new Error(`Supabase RPC error: ${h.status} ${h.statusText}`);const g=yield h.json();return this.setCachedData(l,g),g})}getAllProjects(){return _(this,null,function*(){const t="all-projects-supabase",r="all-projects",n=this.getCachedData(t);if(n)return console.log(" Using cached projects data from Supabase"),n;try{console.log(" Fetching projects from Supabase...");const{data:l,error:u}=yield Tr.from("Projects").select("*").order("Name").not("Number","is",null);if(u)throw u;const h=(l||[]).map(m=>{var y;return{_RowNumber:void 0,Name:m.Name||"",Number:((y=m.Number)==null?void 0:y.toString())||"",Status:m.Status||"","Project ID":m["Project ID"]||"","Start Date":m["Start Date"]||"","Expected Completion Date":m["Expected Completion Date"]||"","Finalization Date":m["Finalization Date"]||"",PM:m.PM||"","CC/Subcontractor":m["CC/Subcontractor"]||"","Site Supervisor":m["Site Supervisor"]||"","EBA/Non-EBA":m["EBA/Non-EBA"]||"",Contact:m.Contact||"","Expected Square Meters":m["Expected Square Meters"]?Number(m["Expected Square Meters"]):void 0,"Deliveries Allowed":m["Deliveries Allowed"]?Number(m["Deliveries Allowed"]):void 0,"Allowed SQM to buy":m["Allowed SQM to buy"]?Number(m["Allowed SQM to buy"]):void 0,"Real Cut Square Meters":void 0,"Real Cut Linear Meters":void 0,"Total Orders":void 0,"Total Materials":void 0,"Total Sheets":void 0,"Total Allowances":void 0,"Total Deliveries":void 0,"Total Inventory":void 0,"Related Items Requests":void 0,"Related Delivery_Dockets":void 0,"Related People Allowances":void 0}});this.setCachedData(t,h);const g=this.getCachedData(r);return(!g||g.length===0)&&this.setCachedData(r,h),console.log(` Cached ${h.length} projects from Supabase`),h}catch(l){return console.error("Error fetching projects from Supabase:",l),[]}})}getOrdersCutByProject(t){return _(this,null,function*(){const r=`orders-cut-${t}`,n=this.getCachedData(r);if(n)return console.log(` Using cached orders for project: ${t}`),n;try{console.log(` Fetching orders from Supabase for project: ${t}...`);const{data:l,error:u}=yield Tr.from("Orders cut").select('"Order ID", "Creation Date"').eq("Project",t).order('"Creation Date"',{ascending:!1});if(u)throw u;const h=(l||[]).map(g=>({"Order ID":g["Order ID"]||""}));return this.setCachedData(r,h),console.log(` Cached ${h.length} orders for project: ${t} (sorted by Creation Date)`),h}catch(l){return console.error(`Error fetching orders from Supabase for project ${t}:`,l),[]}})}checkOrderIdExists(t){return _(this,null,function*(){if(!t||!t.trim())return!1;try{const{data:r,error:n}=yield Tr.from("Orders cut").select('"Order ID"').eq("Order ID",t.trim()).limit(1).maybeSingle();if(n)throw n;return r!==null}catch(r){return console.error(`Error checking Order ID existence: ${t}`,r),!1}})}clearCache(){this.cache.clear()}}const xa=new Vw;class cn{constructor(){ae(this,"config");ae(this,"cache",new Map);ae(this,"CACHE_DURATION",5*60*1e3);ae(this,"PROJECTS_CACHE_DURATION",15*60*1e3);this.config={appId:"efcdb2a0-181f-4e43-bc65-6887dc279032",apiKey:"V2-cTfzb-hYt3f-e0d9Z-5PD1w-jyqcd-y21HR-ioeLZ-nV3h4",baseUrl:"https://www.appsheet.com/api/v2"},(!this.config.appId||!this.config.apiKey)&&console.warn("AppSheet credentials not configured. Please check your environment variables.")}makeRequest(t,r,n,l){return _(this,null,function*(){const u=`${this.config.baseUrl}/apps/${this.config.appId}/tables/${encodeURIComponent(t)}/Action`;let h=l||{},g=n||[];if(n&&n.length>0&&r==="Find"){const y=[];if(n.forEach(p=>{Object.entries(p).forEach(([b,x])=>{if(x!=null){const j=typeof x=="string"?JSON.stringify(x):x;y.push(`[${b}]=${j}`)}})}),y.length>0){const p=`Filter(${t}, AND(${y.join(", ")}))`;h=Xt(Xe({},h),{Selector:p}),g=[]}}let m;r!=="Find"&&r!=="Update"&&r!=="Add"&&r!=="Delete"?m={Action:r,Properties:Xe({Locale:"en-US",Location:"-28.0167, 153.4000",Timezone:"E. Australia Standard Time"},h),Rows:g}:m={Action:r,Properties:Xe({Locale:"en-AU",Location:"-28.0167, 153.4000",Timezone:"E. Australia Standard Time"},h),Rows:g};try{const y=yield fetch(u,{method:"POST",headers:{"Content-Type":"application/json",ApplicationAccessKey:this.config.apiKey},body:JSON.stringify(m)});if(!y.ok){const b=yield y.text();throw console.error(`HTTP error! status: ${y.status}, response: ${b}`),new Error(`HTTP error! status: ${y.status}`)}const p=yield y.text();if(!p||p.trim()==="")return console.warn(` Empty response from ${t}`),[];try{const b=JSON.parse(p);return b.Rows&&Array.isArray(b.Rows)?b.Rows:Array.isArray(b)?b:[b]}catch(b){throw console.error(` JSON parse error for ${t}:`,b),console.error(" Response text:",p),new Error(`Invalid JSON response from ${t}`)}}catch(y){throw console.error(`Error making request to ${t}:`,y),new Error(`Failed to fetch data from ${t}: ${y instanceof Error?y.message:"Unknown error"}`)}})}getCachedData(t){const r=this.cache.get(t);if(r){const n=t==="all-projects"?this.PROJECTS_CACHE_DURATION:this.CACHE_DURATION;if(Date.now()-r.timestamp<n)return r.data}return null}setCachedData(t,r){this.cache.set(t,{data:r,timestamp:Date.now()})}getAllProjects(t){return _(this,null,function*(){const r="all-projects",n="all-projects-appsheet",l="all-projects-supabase";if(t!=null&&t.forceAppSheet){const m=this.getCachedData(n);if(m&&m.length>0)return console.log(" Using cached AppSheet data (instant, no request)"),this.setCachedData(r,m),m;console.log(" Force fetching from AppSheet (no cache available)...");try{const p=yield this.makeRequest("projects_dashboard_summary_slice","Find",[],{});return this.setCachedData(n,p),this.setCachedData(r,p),console.log(` Synced ${p.length} projects from AppSheet`),p}catch(y){console.error("Error fetching from AppSheet:",y);const p=this.getCachedData(r);return p||[]}}const u=this.getCachedData(r);if(u)return console.log(" Using cached projects data"),u;const h=xa.getAllProjects().catch(m=>(console.log(" Supabase getAllProjects failed:",m),[])),g=_(this,null,function*(){try{console.log(" Fetching projects from AppSheet API...");const y=yield this.makeRequest("projects_dashboard_summary_slice","Find",[],{});return this.setCachedData(n,y),this.setCachedData(r,y),console.log(` Cached ${y.length} projects from AppSheet (complete data)`),y}catch(m){return console.error("Error fetching projects from AppSheet:",m),[]}});try{const m=yield h;if(m&&m.length>0){console.log(` Using ${m.length} projects from Supabase (fast response)`),this.setCachedData(l,m);const y=this.getCachedData(r);return(!y||y.length===0)&&this.setCachedData(r,m),g.catch(()=>{console.log(" Background AppSheet update failed")}),m}}catch(m){console.log(" Supabase failed, waiting for AppSheet...",m)}try{const m=yield g;if(m&&m.length>0)return console.log(` Using ${m.length} projects from AppSheet (fallback)`),m}catch(m){console.error("Error fetching projects from both sources:",m)}return[]})}getProjectDataFromCache(t){return _(this,null,function*(){try{const n=(yield this.getAllProjects()).find(l=>l.Name===t);return n?(console.log(` Project data found in cache for: ${t}`),n):(console.warn(` Project not found in cache: ${t}`),null)}catch(r){return console.error("Error getting project data from cache:",r),null}})}getAllItems(){return _(this,null,function*(){const t="all-items",r=this.getCachedData(t);if(r)return r;try{const n=yield this.makeRequest("items_dashboard_summary_slice","Find",[],{});return this.setCachedData(t,n),n}catch(n){return console.error("Error fetching all items:",n),[]}})}getProjectData(t){return _(this,null,function*(){const r=`project-${t}`,n=this.getCachedData(r);if(n)return n;try{const l=`Filter(Projects, [Name]=${JSON.stringify(t)})`,u=yield this.makeRequest("Projects","Find",[],{Selector:l});if(u.length>0){const h=u[0];return this.setCachedData(r,h),h}return null}catch(l){return console.error("Error fetching project data:",l),null}})}getOrdersByProject(t){return _(this,null,function*(){const r=`orders-${t}`,n=this.getCachedData(r);if(n)return n;try{const l=`Filter(Orders, [Project ID]=${JSON.stringify(t)})`,u=yield this.makeRequest("Orders","Find",[],{Selector:l});return this.setCachedData(r,u),u}catch(l){return console.error("Error fetching orders:",l),[]}})}getMaterials(t){return _(this,null,function*(){const r=`materials-${t}`,n=this.getCachedData(r);if(n)return n;try{const l=yield this.getItemsRequestsByProject(t),u=yield this.getOrdersByProject(t),h=yield this.getAllItems(),g=l.map(b=>{const x=h.find(S=>S["Item ID"]===b["Item ID"]),j=u.find(S=>S["Order ID"]===b["Order ID"]);return Xt(Xe({},b),{Name:x?x.Name:"Unknown Item","Order Number":j?j.Number:"0","Order Date":j?j["Due Date"]:"","Order Status":j?j.Status:"","Request by":j?j["Created By"]:""})}),m=this.groupMaterialsForSummary(g),y=this.groupMaterialsForDetails(g),p={summary:m,details:y};return this.setCachedData(r,p),p}catch(l){return console.error("Error fetching materials:",l),{summary:[],details:[]}}})}groupMaterialsForSummary(t){const r={"Top hat":{},Angles:{},Screws:{},"Caulking Glue":{},Packers:{},Tapes:{},Others:{}};t.forEach(l=>{const u=Object.prototype.hasOwnProperty.call(r,l.Category)?l.Category:"Others",h=l["Item ID"];r[u][h]||(r[u][h]={Name:l.Name||"Unknown Item",SubCategory:l["Sub Category"]||"",Description:l["Description Material"]||"",Total:0}),r[u][h].Total+=Number(l.Quantity)||0});const n=[];return Object.entries(r).forEach(([l,u])=>{const h=Object.entries(u).map(([g,m])=>({ItemID:g,Name:m.Name,SubCategory:m.SubCategory,Description:m.Description,Total:m.Total}));n.push({category:l,items:h})}),n}groupMaterialsForDetails(t){const r={"Top hat":[],Angles:[],Screws:[],"Caulking Glue":[],Packers:[],Tapes:[],Others:[]};t.forEach(l=>{const u=Object.prototype.hasOwnProperty.call(r,l.Category)?l.Category:"Others";r[u].push(l)});const n=[];return Object.entries(r).forEach(([l,u])=>{n.push({category:l,items:u})}),n}getItemsRequestsByProject(t){return _(this,null,function*(){const r=`items-requests-${t}`,n=this.getCachedData(r);if(n)return n;try{const l=`Filter(Items Request, [Project]=${JSON.stringify(t)})`,u=yield this.makeRequest("Items Request","Find",[],{Selector:l});return this.setCachedData(r,u),u}catch(l){return console.error("Error fetching items requests by Project Name:",l),[]}})}getSheetsData(t){return _(this,null,function*(){const r=`sheets-${t}`,n=this.getCachedData(r);if(n)return n;try{const l=`Filter(Sheets, AND([Project]=${JSON.stringify(t)}, [Off Cut]=false))`,u=yield this.makeRequest("Sheets","Find",[],{Selector:l});if(u.length===0)return this.setCachedData(r,[]),[];const h=[];u.forEach(y=>{if(y["Related Sheets Inventorys"]){const p=y["Related Sheets Inventorys"].split(",").map(b=>b.trim()).filter(b=>b.length>0);h.push(...p)}});let g=[];if(h.length>0){const p=`Filter(Sheets Inventory, OR(${h.map(b=>`[sheet_inventory_id]=${JSON.stringify(b)}`).join(", ")}))`;g=yield this.makeRequest("Sheets Inventory","Find",[],{Selector:p})}const m=u.map(y=>{const p=g.filter(j=>j.sheet===y["Sheet ID"]);let b=0,x=0;if(p.length>0)b=p.filter(j=>Number(j.qty)>0).reduce((j,S)=>j+Number(S.qty),0),x=p.filter(j=>Number(j.qty)<0).reduce((j,S)=>j+Math.abs(Number(S.qty)),0);else{const j=Number(y["Quantity in Factory"])||0,S=Number(y["Quantity in Store"])||0;j>0&&(b=j),S<0&&(x=Math.abs(S))}return Xt(Xe({},y),{TotalReceived:b,TotalUsed:x})});return this.setCachedData(r,m),m}catch(l){return console.error("Error fetching sheets:",l),[]}})}getSheetsByProject(t){return _(this,null,function*(){try{console.log(` Fetching sheets from AppSheet for project: ${t}...`);const r=`Filter(Sheets, [Project]=${JSON.stringify(t)})`,n=yield this.makeRequest("Sheets","Find",[],{Selector:r});return n.length===0?(console.log(` No sheets found for project: ${t}`),[]):n.map(u=>({"Sheet ID":u["Sheet ID"]||"",Dimension:u.Dimension||"",Colour:u.Colour||"","Quantity in Factory":Number(u["Quantity in Factory"])||0,"Quantity in Store":Number(u["Quantity in Store"])||0,"Off Cut":u["Off Cut"]=="Y",Comment:u.Comment||""}))}catch(r){return console.error(`Error fetching sheets for project ${t}:`,r),[]}})}getDeliveryDockets(t){return _(this,null,function*(){var l;const r=`deliveries-${t}`,n=this.getCachedData(r);if(n)return n;try{const u=yield this.getProjectData(t);if(!u||!u["Related Delivery_Dockets"])return[];const h=((l=u["Related Delivery_Dockets"])==null?void 0:l.split(",").map(p=>p.trim()).filter(p=>p.length>0))||[];if(h.length===0)return[];const m=`Filter(Delivery_Dockets, OR(${h.map(p=>`[delivery_id]=${JSON.stringify(p)}`).join(", ")}))`,y=yield this.makeRequest("Delivery_Dockets","Find",[],{Selector:m});return this.setCachedData(r,y),y}catch(u){return console.error("Error fetching delivery dockets:",u),[]}})}clearCache(){this.cache.clear()}clearCacheFor(t){this.cache.delete(t)}getPeopleAllowances(t){return _(this,null,function*(){const r=`allowances-${t}`,n=this.getCachedData(r);if(n)return n;try{const l=yield this.makeRequest("People Allowance","Find",[],{Selector:`Filter(People Allowance, [Project]=${JSON.stringify(t)})`});return console.log(" People Allowances API Response:",l),this.setCachedData(r,l),l}catch(l){return console.error("Error fetching people allowances:",l),[]}})}markOrderAsDelivered(t){return _(this,null,function*(){try{console.log(` Marking order ${t} as delivered...`);const r=yield this.makeRequest("Orders cut","Delivered",[{"Order ID":t}]);return r&&r.length>0?(console.log(` Order ${t} marked as delivered successfully`),console.log(" Updated order details:",r[0]),r):(console.error(` Failed to mark order ${t} as delivered - empty response`),[])}catch(r){return console.error(`Error marking order ${t} as delivered:`,r),[]}})}}const un=new cn,A0=()=>wa({queryKey:["projects-list"],queryFn:()=>un.getAllProjects(),staleTime:10*60*1e3,gcTime:20*60*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1,retry:2,retryDelay:1e3}),pd=()=>wa({queryKey:["items"],queryFn:()=>un.getAllItems(),staleTime:60*60*1e3,gcTime:24*60*60*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1,retry:1,retryDelay:2e3}),R0=s=>wa({queryKey:["project",s],queryFn:()=>un.getProjectDataFromCache(s),enabled:!!s,staleTime:15*60*1e3,gcTime:30*60*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1,retry:!1}),Qw=s=>wa({queryKey:["project-materials",s],queryFn:()=>un.getMaterials(s),enabled:!!s,staleTime:5*60*1e3,gcTime:15*60*1e3}),Gw=s=>wa({queryKey:["project-sheets",s],queryFn:()=>un.getSheetsData(s),enabled:!!s,staleTime:5*60*1e3,gcTime:15*60*1e3}),Kw=s=>wa({queryKey:["project-allowances",s],queryFn:()=>un.getPeopleAllowances(s),enabled:!!s,staleTime:5*60*1e3,gcTime:15*60*1e3}),Fw=({children:s})=>{const{isLoading:t,isError:r}=pd();return c.jsxs(c.Fragment,{children:[s,t&&c.jsx("div",{className:"progressive-loader",children:c.jsx("div",{className:"loader-indicator",children:c.jsx("div",{className:"loader-spinner"})})}),r&&c.jsx("div",{className:"progressive-loader error",children:c.jsx("div",{className:"loader-indicator",children:c.jsx("span",{className:"error-icon",children:""})})})]})},k0=()=>{const[s,t]=k.useState(()=>new URLSearchParams(window.location.search).get("project")),r=k.useCallback(u=>{if(s===u)return;t(u);const h=new URL(window.location.href);u?h.searchParams.set("project",u):h.searchParams.delete("project"),window.history.replaceState({},"",h.toString())},[s]),n=k.useCallback(u=>{r(u)},[r]),l=k.useCallback(()=>{r(null)},[r]);return k.useEffect(()=>{const u=()=>{const g=new URLSearchParams(window.location.search).get("project");t(g)};return window.addEventListener("popstate",u),()=>window.removeEventListener("popstate",u)},[]),{projectParam:s,setProjectParam:r,updateUrlWithProject:n,clearProjectParam:l}},Di=s=>{k.useEffect(()=>{const t=document.title;return document.title=s,()=>{document.title=t}},[s])},dn=()=>c.jsx("div",{className:"loading-spinner",role:"status","aria-label":"Loading"}),Iu=({isLoading:s,children:t,sectionName:r})=>s?c.jsx("div",{className:"section-loader",children:c.jsxs("div",{className:"section-loading-content",children:[c.jsx(dn,{}),c.jsxs("p",{className:"section-loading-text",children:["Loading ",r,"..."]})]})}):c.jsx(c.Fragment,{children:t}),Xw=({onProjectSelect:s})=>{var Q,I;const[t,r]=k.useState(""),[n,l]=k.useState(""),[u,h]=k.useState("In Progress"),[g,m]=k.useState(!1),y=k.useRef(null),{projectParam:p,updateUrlWithProject:b}=k0(),{data:x=[],isLoading:j,error:S,refetch:C}=A0(),A=k.useMemo(()=>[...x].sort((Y,N)=>Y.Name.localeCompare(N.Name)).filter(Y=>{const N=Y.Name.toLowerCase().includes(n.toLowerCase()),T=u==="all"||Y.Status===u;return N&&T}),[x,n,u]);k.useEffect(()=>{if(p&&x.length>0){const D=x.find(Y=>Y.Name===p);D&&t!==p&&(r(p),s(D))}},[p,x,s,t]),k.useEffect(()=>{const D=Y=>{y.current&&!y.current.contains(Y.target)&&m(!1)};return document.addEventListener("mousedown",D),()=>document.removeEventListener("mousedown",D)},[]);const q=D=>_(null,null,function*(){r(D),m(!1);const Y=x.find(N=>N.Name===D);Y&&(b(D),s(Y))}),P=D=>{switch(D){case"To Do":return"#87CEEB";case"In Progress":return"#FFA500";case"Defects":return"#FF6347";case"Done":return"#32CD32";default:return"#95a5a6"}},M=D=>{switch(D){case"To Do":return"";case"In Progress":return"";case"Defects":return"";case"Done":return"";default:return""}};return j?c.jsx("div",{className:"project-selector",children:c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{className:"loading-text",children:"Loading projects..."}),c.jsxs("div",{className:"loading-dots",children:[c.jsx("span",{}),c.jsx("span",{}),c.jsx("span",{})]})]})}):S?c.jsx("div",{className:"project-selector",children:c.jsxs("div",{className:"error-container",children:[c.jsx("div",{className:"error-icon",children:""}),c.jsx("h3",{className:"error-title",children:"Connection Error"}),c.jsx("p",{className:"error-message",children:S.message||"Error loading projects"}),c.jsxs("button",{onClick:()=>C(),className:"retry-button",children:[c.jsx("span",{className:"retry-icon",children:""}),c.jsx("span",{className:"retry-text",children:"Retry Connection"})]})]})}):x.length===0?c.jsx("div",{className:"project-selector",children:c.jsxs("div",{className:"empty-container",children:[c.jsx("div",{className:"empty-icon",children:""}),c.jsx("h3",{className:"empty-title",children:"No Projects Available"}),c.jsx("p",{className:"empty-message",children:"There are no projects to display at the moment."})]})}):c.jsx("div",{className:"project-selector",children:c.jsx("div",{className:"combobox-section",children:c.jsxs("div",{className:"combobox-container",ref:y,children:[c.jsxs("div",{className:"combobox-wrapper",children:[c.jsxs("div",{className:`combobox ${g?"open":""}`,onClick:()=>m(!0),children:[c.jsxs("div",{className:"combobox-input",children:[c.jsx("span",{className:"combobox-icon",children:""}),c.jsx("input",{type:"text",placeholder:"Search and select project...",value:n,onChange:D=>{l(D.target.value),m(!0)},onClick:D=>D.stopPropagation(),className:"combobox-search"}),n&&c.jsx("button",{className:"clear-search",onClick:D=>{D.stopPropagation(),l("")},children:""})]}),c.jsx("div",{className:"combobox-arrow",children:""})]}),g&&c.jsxs("div",{className:"combobox-dropdown",children:[c.jsxs("div",{className:"dropdown-header",children:[c.jsx("div",{className:"filter-tabs",children:["all","To Do","In Progress","Defects","Done"].map(D=>c.jsxs("button",{className:`filter-tab ${u===D?"active":""}`,onClick:Y=>{Y.stopPropagation(),h(D)},style:{"--status-color":D==="all"?"#95a5a6":P(D)},title:D==="all"?"All Projects":D,children:[c.jsx("span",{className:"tab-icon",children:D==="all"?"":M(D)}),c.jsx("span",{className:"tab-text",children:D==="all"?"All":D}),c.jsx("span",{className:"tab-count",children:D==="all"?x.length:x.filter(Y=>Y.Status===D).length})]},D))}),c.jsx("div",{className:"mobile-results-indicator",children:c.jsxs("span",{className:"results-count",children:[A.length," of ",x.length," projects"]})})]}),c.jsx("div",{className:"dropdown-list",children:A.length>0?A.map(D=>c.jsx("div",{className:`dropdown-item ${t===D.Name?"selected":""}`,onClick:Y=>{Y.stopPropagation(),q(D.Name)},children:c.jsxs("div",{className:"item-content",children:[c.jsxs("div",{className:"item-main",children:[c.jsx("div",{className:"item-name",children:D.Name}),c.jsx("div",{className:"item-status",children:c.jsxs("span",{className:"status-badge",style:{backgroundColor:P(D.Status||"")},children:[M(D.Status||"")," ",D.Status||"Unknown"]})})]}),c.jsx("div",{className:"item-check",children:t===D.Name?"":""})]})},D.Name)):c.jsxs("div",{className:"no-results",children:[c.jsx("div",{className:"no-results-icon",children:""}),c.jsxs("div",{className:"no-results-text",children:[c.jsx("div",{className:"no-results-title",children:"No projects found"}),c.jsx("div",{className:"no-results-subtitle",children:"Try adjusting your search or filters"})]})]})})]})]}),t&&c.jsxs("div",{className:"selected-project",children:[c.jsxs("div",{className:"selected-project-info",children:[c.jsx("div",{className:"project-name",children:t}),c.jsx("div",{className:"project-status",children:c.jsx("span",{className:"status-indicator",style:{backgroundColor:P(((Q=x.find(D=>D.Name===t))==null?void 0:Q.Status)||"")},children:((I=x.find(D=>D.Name===t))==null?void 0:I.Status)||"Unknown"})})]}),j&&c.jsxs("div",{className:"loading-indicator",children:[c.jsx("div",{className:"loading-dot"}),c.jsx("div",{className:"loading-dot"}),c.jsx("div",{className:"loading-dot"})]})]})]})})})},Yu=s=>{if(!s)return"N/A";try{const t=new Date(s);if(isNaN(t.getTime()))return s;const r=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),l=t.getFullYear();return`${r}/${n}/${l}`}catch(t){return console.warn("Error formateando fecha:",s,t),s}},Ww=s=>{if(!s)return"N/A";try{const t=new Date(s);if(isNaN(t.getTime()))return s;const r=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),l=t.getFullYear(),u=t.getHours().toString().padStart(2,"0"),h=t.getMinutes().toString().padStart(2,"0");return`${r}/${n}/${l} ${u}:${h}`}catch(t){return console.warn("Error formateando fecha y hora:",s,t),s}},Wl={"Top hat":"",Angles:"",Screws:"","Caulking Glue":"",Packers:"",Tapes:"",Others:""},Jw=({materials:s,isLoading:t=!1})=>{const[r,n]=k.useState(null),l=k.useMemo(()=>s.summary.map(h=>Xt(Xe({},h),{category:`${Wl[h.category]||""} ${h.category} ${Wl[h.category]||""}`})),[s.summary]),u=k.useMemo(()=>s.details.map(h=>Xt(Xe({},h),{category:`${Wl[h.category]||""} ${h.category} ${Wl[h.category]||""}`})),[s.details]);return t?c.jsxs("div",{className:"materials-table-container",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Loading materials..."})]}):s.summary.length===0&&s.details.length===0?c.jsxs("div",{className:"materials-table-container",children:[c.jsx("h2",{children:" Material Tables"}),c.jsx("p",{children:"No materials available for this project."})]}):c.jsxs("div",{className:"materials-table-container",children:[c.jsx("h2",{id:"material-tables",children:"Material Tables"}),c.jsxs("div",{id:"materialsTablesContainer",children:[c.jsx("button",{id:"btnSummary",className:r==="summary"?"active":"",onClick:()=>n(r==="summary"?null:"summary"),children:" Summary Table"}),c.jsx("button",{id:"btnDetails",className:r==="details"?"active":"",onClick:()=>n(r==="details"?null:"details"),children:" Detailed Table"})]}),c.jsx("div",{className:"table-scroll-container",children:c.jsxs("table",{id:"materialsTable",className:r==="summary"?"":"hidden",children:[c.jsxs("thead",{children:[c.jsx("tr",{children:c.jsx("th",{colSpan:4,children:"Summary materials"})}),c.jsxs("tr",{children:[c.jsx("th",{children:" Name"}),c.jsx("th",{children:" Sub Category"}),c.jsx("th",{children:" Description"}),c.jsx("th",{children:" Total"})]})]}),c.jsx("tbody",{children:l.map(h=>h.items.length===0?null:c.jsxs(wi.Fragment,{children:[c.jsx("tr",{children:c.jsx("td",{colSpan:4,className:"category",children:h.category})}),h.items.map(g=>c.jsxs("tr",{className:"item",children:[c.jsx("td",{children:g.Name}),c.jsx("td",{children:g.SubCategory}),c.jsx("td",{children:g.Description}),c.jsx("td",{children:g.Total})]},g.ItemID))]},h.category))})]})}),c.jsx("div",{className:"table-scroll-container",children:c.jsxs("table",{id:"materialsTable_details",className:r==="details"?"":"hidden",children:[c.jsxs("thead",{children:[c.jsx("tr",{children:c.jsx("th",{colSpan:8,children:"Summary detailed materials"})}),c.jsxs("tr",{children:[c.jsx("th",{children:" Order"}),c.jsx("th",{children:" Status"}),c.jsx("th",{children:" Date"}),c.jsx("th",{children:" Name"}),c.jsx("th",{children:" Description"}),c.jsx("th",{children:" User Spec"}),c.jsx("th",{children:" Request by"}),c.jsx("th",{children:" Quantity"})]})]}),c.jsx("tbody",{children:u.map(h=>h.items.length===0?null:c.jsxs(wi.Fragment,{children:[c.jsx("tr",{children:c.jsx("td",{colSpan:8,className:"category",children:h.category})}),h.items.map((g,m)=>c.jsxs("tr",{className:"item",children:[c.jsx("td",{children:g["Order Number"]}),c.jsx("td",{children:g["Order Status"]==="Delivered"?"":""}),c.jsx("td",{style:{whiteSpace:"nowrap"},children:Ww(g["Order Date"])}),c.jsx("td",{children:g.Name}),c.jsx("td",{children:g["Description Material"]}),c.jsx("td",{children:g.Description}),c.jsx("td",{children:g["Request by"]}),c.jsx("td",{children:g.Quantity})]},`${g["Item ID"]}-${m}`))]},h.category))})]})})]})};/*!
 * chartjs-plugin-datalabels v2.2.0
 * https://chartjs-plugin-datalabels.netlify.app
 * (c) 2017-2022 chartjs-plugin-datalabels contributors
 * Released under the MIT license
 */var Vg=function(){if(typeof window!="undefined"){if(window.devicePixelRatio)return window.devicePixelRatio;var s=window.screen;if(s)return(s.deviceXDPI||1)/(s.logicalXDPI||1)}return 1}(),vi={toTextLines:function(s){var t=[],r;for(s=[].concat(s);s.length;)r=s.pop(),typeof r=="string"?t.unshift.apply(t,r.split(`
`)):Array.isArray(r)?s.push.apply(s,r):gi(s)||t.unshift(""+r);return t},textSize:function(s,t,r){var n=[].concat(t),l=n.length,u=s.font,h=0,g;for(s.font=r.string,g=0;g<l;++g)h=Math.max(s.measureText(n[g]).width,h);return s.font=u,{height:l*r.lineHeight,width:h}},bound:function(s,t,r){return Math.max(s,Math.min(t,r))},arrayDiff:function(s,t){var r=s.slice(),n=[],l,u,h,g;for(l=0,h=t.length;l<h;++l)g=t[l],u=r.indexOf(g),u===-1?n.push([g,1]):r.splice(u,1);for(l=0,h=r.length;l<h;++l)n.push([r[l],-1]);return n},rasterize:function(s){return Math.round(s*Vg)/Vg}};function Vu(s,t){var r=t.x,n=t.y;if(r===null)return{x:0,y:-1};if(n===null)return{x:1,y:0};var l=s.x-r,u=s.y-n,h=Math.sqrt(l*l+u*u);return{x:h?l/h:0,y:h?u/h:-1}}function Zw(s,t,r,n,l){switch(l){case"center":r=n=0;break;case"bottom":r=0,n=1;break;case"right":r=1,n=0;break;case"left":r=-1,n=0;break;case"top":r=0,n=-1;break;case"start":r=-r,n=-n;break;case"end":break;default:l*=Math.PI/180,r=Math.cos(l),n=Math.sin(l);break}return{x:s,y:t,vx:r,vy:n}}var ej=0,M0=1,U0=2,q0=4,L0=8;function Jl(s,t,r){var n=ej;return s<r.left?n|=M0:s>r.right&&(n|=U0),t<r.top?n|=L0:t>r.bottom&&(n|=q0),n}function tj(s,t){for(var r=s.x0,n=s.y0,l=s.x1,u=s.y1,h=Jl(r,n,t),g=Jl(l,u,t),m,y,p;!(!(h|g)||h&g);)m=h||g,m&L0?(y=r+(l-r)*(t.top-n)/(u-n),p=t.top):m&q0?(y=r+(l-r)*(t.bottom-n)/(u-n),p=t.bottom):m&U0?(p=n+(u-n)*(t.right-r)/(l-r),y=t.right):m&M0&&(p=n+(u-n)*(t.left-r)/(l-r),y=t.left),m===h?(r=y,n=p,h=Jl(r,n,t)):(l=y,u=p,g=Jl(l,u,t));return{x0:r,x1:l,y0:n,y1:u}}function Zl(s,t){var r=t.anchor,n=s,l,u;return t.clamp&&(n=tj(n,t.area)),r==="start"?(l=n.x0,u=n.y0):r==="end"?(l=n.x1,u=n.y1):(l=(n.x0+n.x1)/2,u=(n.y0+n.y1)/2),Zw(l,u,s.vx,s.vy,t.align)}var eo={arc:function(s,t){var r=(s.startAngle+s.endAngle)/2,n=Math.cos(r),l=Math.sin(r),u=s.innerRadius,h=s.outerRadius;return Zl({x0:s.x+n*u,y0:s.y+l*u,x1:s.x+n*h,y1:s.y+l*h,vx:n,vy:l},t)},point:function(s,t){var r=Vu(s,t.origin),n=r.x*s.options.radius,l=r.y*s.options.radius;return Zl({x0:s.x-n,y0:s.y-l,x1:s.x+n,y1:s.y+l,vx:r.x,vy:r.y},t)},bar:function(s,t){var r=Vu(s,t.origin),n=s.x,l=s.y,u=0,h=0;return s.horizontal?(n=Math.min(s.x,s.base),u=Math.abs(s.base-s.x)):(l=Math.min(s.y,s.base),h=Math.abs(s.base-s.y)),Zl({x0:n,y0:l+h,x1:n+u,y1:l,vx:r.x,vy:r.y},t)},fallback:function(s,t){var r=Vu(s,t.origin);return Zl({x0:s.x,y0:s.y,x1:s.x+(s.width||0),y1:s.y+(s.height||0),vx:r.x,vy:r.y},t)}},Xa=vi.rasterize;function aj(s){var t=s.borderWidth||0,r=s.padding,n=s.size.height,l=s.size.width,u=-l/2,h=-n/2;return{frame:{x:u-r.left-t,y:h-r.top-t,w:l+r.width+t*2,h:n+r.height+t*2},text:{x:u,y:h,w:l,h:n}}}function rj(s,t){var r=t.chart.getDatasetMeta(t.datasetIndex).vScale;if(!r)return null;if(r.xCenter!==void 0&&r.yCenter!==void 0)return{x:r.xCenter,y:r.yCenter};var n=r.getBasePixel();return s.horizontal?{x:n,y:null}:{x:null,y:n}}function sj(s){return s instanceof Qv?eo.arc:s instanceof ud?eo.point:s instanceof an?eo.bar:eo.fallback}function nj(s,t,r,n,l,u){var h=Math.PI/2;if(u){var g=Math.min(u,l/2,n/2),m=t+g,y=r+g,p=t+n-g,b=r+l-g;s.moveTo(t,y),m<p&&y<b?(s.arc(m,y,g,-Math.PI,-h),s.arc(p,y,g,-h,0),s.arc(p,b,g,0,h),s.arc(m,b,g,h,Math.PI)):m<p?(s.moveTo(m,r),s.arc(p,y,g,-h,h),s.arc(m,y,g,h,Math.PI+h)):y<b?(s.arc(m,y,g,-Math.PI,0),s.arc(m,b,g,0,Math.PI)):s.arc(m,y,g,-Math.PI,Math.PI),s.closePath(),s.moveTo(t,r)}else s.rect(t,r,n,l)}function ij(s,t,r){var n=r.backgroundColor,l=r.borderColor,u=r.borderWidth;!n&&(!l||!u)||(s.beginPath(),nj(s,Xa(t.x)+u/2,Xa(t.y)+u/2,Xa(t.w)-u,Xa(t.h)-u,r.borderRadius),s.closePath(),n&&(s.fillStyle=n,s.fill()),l&&u&&(s.strokeStyle=l,s.lineWidth=u,s.lineJoin="miter",s.stroke()))}function lj(s,t,r){var n=r.lineHeight,l=s.w,u=s.x,h=s.y+n/2;return t==="center"?u+=l/2:(t==="end"||t==="right")&&(u+=l),{h:n,w:l,x:u,y:h}}function oj(s,t,r){var n=s.shadowBlur,l=r.stroked,u=Xa(r.x),h=Xa(r.y),g=Xa(r.w);l&&s.strokeText(t,u,h,g),r.filled&&(n&&l&&(s.shadowBlur=0),s.fillText(t,u,h,g),n&&l&&(s.shadowBlur=n))}function cj(s,t,r,n){var l=n.textAlign,u=n.color,h=!!u,g=n.font,m=t.length,y=n.textStrokeColor,p=n.textStrokeWidth,b=y&&p,x;if(!(!m||!h&&!b))for(r=lj(r,l,g),s.font=g.string,s.textAlign=l,s.textBaseline="middle",s.shadowBlur=n.textShadowBlur,s.shadowColor=n.textShadowColor,h&&(s.fillStyle=u),b&&(s.lineJoin="round",s.lineWidth=p,s.strokeStyle=y),x=0,m=t.length;x<m;++x)oj(s,t[x],{stroked:b,filled:h,w:r.w,x:r.x,y:r.y+r.h*x})}var z0=function(s,t,r,n){var l=this;l._config=s,l._index=n,l._model=null,l._rects=null,l._ctx=t,l._el=r};ji(z0.prototype,{_modelize:function(s,t,r,n){var l=this,u=l._index,h=Iv(mt([r.font,{}],n,u)),g=mt([r.color,Yv.color],n,u);return{align:mt([r.align,"center"],n,u),anchor:mt([r.anchor,"center"],n,u),area:n.chart.chartArea,backgroundColor:mt([r.backgroundColor,null],n,u),borderColor:mt([r.borderColor,null],n,u),borderRadius:mt([r.borderRadius,0],n,u),borderWidth:mt([r.borderWidth,0],n,u),clamp:mt([r.clamp,!1],n,u),clip:mt([r.clip,!1],n,u),color:g,display:s,font:h,lines:t,offset:mt([r.offset,4],n,u),opacity:mt([r.opacity,1],n,u),origin:rj(l._el,n),padding:Vv(mt([r.padding,4],n,u)),positioner:sj(l._el),rotation:mt([r.rotation,0],n,u)*(Math.PI/180),size:vi.textSize(l._ctx,t,h),textAlign:mt([r.textAlign,"start"],n,u),textShadowBlur:mt([r.textShadowBlur,0],n,u),textShadowColor:mt([r.textShadowColor,g],n,u),textStrokeColor:mt([r.textStrokeColor,g],n,u),textStrokeWidth:mt([r.textStrokeWidth,0],n,u)}},update:function(s){var t=this,r=null,n=null,l=t._index,u=t._config,h,g,m,y=mt([u.display,!0],s,l);y&&(h=s.dataset.data[l],g=Hv(c0(u.formatter,[h,s]),h),m=gi(g)?[]:vi.toTextLines(g),m.length&&(r=t._modelize(y,m,u,s),n=aj(r))),t._model=r,t._rects=n},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(s,t){var r=this,n=s.ctx,l=r._model,u=r._rects,h;this.visible()&&(n.save(),l.clip&&(h=l.area,n.beginPath(),n.rect(h.left,h.top,h.right-h.left,h.bottom-h.top),n.clip()),n.globalAlpha=vi.bound(0,l.opacity,1),n.translate(Xa(t.x),Xa(t.y)),n.rotate(l.rotation),ij(n,u.frame,l),cj(n,l.lines,u.text,l),n.restore())}});var uj=Number.MIN_SAFE_INTEGER||-9007199254740991,dj=Number.MAX_SAFE_INTEGER||9007199254740991;function ui(s,t,r){var n=Math.cos(r),l=Math.sin(r),u=t.x,h=t.y;return{x:u+n*(s.x-u)-l*(s.y-h),y:h+l*(s.x-u)+n*(s.y-h)}}function Qg(s,t){var r=dj,n=uj,l=t.origin,u,h,g,m,y;for(u=0;u<s.length;++u)h=s[u],g=h.x-l.x,m=h.y-l.y,y=t.vx*g+t.vy*m,r=Math.min(r,y),n=Math.max(n,y);return{min:r,max:n}}function to(s,t){var r=t.x-s.x,n=t.y-s.y,l=Math.sqrt(r*r+n*n);return{vx:(t.x-s.x)/l,vy:(t.y-s.y)/l,origin:s,ln:l}}var P0=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};ji(P0.prototype,{center:function(){var s=this._rect;return{x:s.x+s.w/2,y:s.y+s.h/2}},update:function(s,t,r){this._rotation=r,this._rect={x:t.x+s.x,y:t.y+s.y,w:t.w,h:t.h}},contains:function(s){var t=this,r=1,n=t._rect;return s=ui(s,t.center(),-t._rotation),!(s.x<n.x-r||s.y<n.y-r||s.x>n.x+n.w+r*2||s.y>n.y+n.h+r*2)},intersects:function(s){var t=this._points(),r=s._points(),n=[to(t[0],t[1]),to(t[0],t[3])],l,u,h;for(this._rotation!==s._rotation&&n.push(to(r[0],r[1]),to(r[0],r[3])),l=0;l<n.length;++l)if(u=Qg(t,n[l]),h=Qg(r,n[l]),u.max<h.min||h.max<u.min)return!1;return!0},_points:function(){var s=this,t=s._rect,r=s._rotation,n=s.center();return[ui({x:t.x,y:t.y},n,r),ui({x:t.x+t.w,y:t.y},n,r),ui({x:t.x+t.w,y:t.y+t.h},n,r),ui({x:t.x,y:t.y+t.h},n,r)]}});function $0(s,t,r){var n=t.positioner(s,t),l=n.vx,u=n.vy;if(!l&&!u)return{x:n.x,y:n.y};var h=r.w,g=r.h,m=t.rotation,y=Math.abs(h/2*Math.cos(m))+Math.abs(g/2*Math.sin(m)),p=Math.abs(h/2*Math.sin(m))+Math.abs(g/2*Math.cos(m)),b=1/Math.max(Math.abs(l),Math.abs(u));return y*=l*b,p*=u*b,y+=t.offset*l,p+=t.offset*u,{x:n.x+y,y:n.y+p}}function hj(s,t){var r,n,l,u;for(r=s.length-1;r>=0;--r)for(l=s[r].$layout,n=r-1;n>=0&&l._visible;--n)u=s[n].$layout,u._visible&&l._box.intersects(u._box)&&t(l,u);return s}function fj(s){var t,r,n,l,u,h,g;for(t=0,r=s.length;t<r;++t)n=s[t],l=n.$layout,l._visible&&(g=new Proxy(n._el,{get:(m,y)=>m.getProps([y],!0)[y]}),u=n.geometry(),h=$0(g,n.model(),u),l._box.update(h,u,n.rotation()));return hj(s,function(m,y){var p=m._hidable,b=y._hidable;p&&b||b?y._visible=!1:p&&(m._visible=!1)})}var bi={prepare:function(s){var t=[],r,n,l,u,h;for(r=0,l=s.length;r<l;++r)for(n=0,u=s[r].length;n<u;++n)h=s[r][n],t.push(h),h.$layout={_box:new P0,_hidable:!1,_visible:!0,_set:r,_idx:h._index};return t.sort(function(g,m){var y=g.$layout,p=m.$layout;return y._idx===p._idx?p._set-y._set:p._idx-y._idx}),this.update(t),t},update:function(s){var t=!1,r,n,l,u,h;for(r=0,n=s.length;r<n;++r)l=s[r],u=l.model(),h=l.$layout,h._hidable=u&&u.display==="auto",h._visible=l.visible(),t|=h._hidable;t&&fj(s)},lookup:function(s,t){var r,n;for(r=s.length-1;r>=0;--r)if(n=s[r].$layout,n&&n._visible&&n._box.contains(t))return s[r];return null},draw:function(s,t){var r,n,l,u,h,g;for(r=0,n=t.length;r<n;++r)l=t[r],u=l.$layout,u._visible&&(h=l.geometry(),g=$0(l._el,l.model(),h),u._box.update(g,h,l.rotation()),l.draw(s,g))}},mj=function(s){if(gi(s))return null;var t=s,r,n,l;if($v(s))if(!gi(s.label))t=s.label;else if(!gi(s.r))t=s.r;else for(t="",r=Object.keys(s),l=0,n=r.length;l<n;++l)t+=(l!==0?", ":"")+r[l]+": "+s[r[l]];return""+t},gj={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:mj,labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},Ht="$datalabels",B0="$default";function yj(s,t){var r=s.datalabels,n={},l=[],u,h;return r===!1?null:(r===!0&&(r={}),t=ji({},[t,r]),u=t.labels||{},h=Object.keys(u),delete t.labels,h.length?h.forEach(function(g){u[g]&&l.push(ji({},[t,u[g],{_key:g}]))}):l.push(t),n=l.reduce(function(g,m){return Bv(m.listeners||{},function(y,p){g[p]=g[p]||{},g[p][m._key||B0]=y}),delete m.listeners,g},{}),{labels:l,listeners:n})}function id(s,t,r,n){if(t){var l=r.$context,u=r.$groups,h;t[u._set]&&(h=t[u._set][u._key],h&&c0(h,[l,n])===!0&&(s[Ht]._dirty=!0,r.update(l)))}}function pj(s,t,r,n,l){var u,h;!r&&!n||(r?n?r!==n&&(h=u=!0):h=!0:u=!0,h&&id(s,t.leave,r,l),u&&id(s,t.enter,n,l))}function vj(s,t){var r=s[Ht],n=r._listeners,l,u;if(!(!n.enter&&!n.leave)){if(t.type==="mousemove")u=bi.lookup(r._labels,t);else if(t.type!=="mouseout")return;l=r._hovered,r._hovered=u,pj(s,n,l,u,t)}}function bj(s,t){var r=s[Ht],n=r._listeners.click,l=n&&bi.lookup(r._labels,t);l&&id(s,n,l,t)}var xj={id:"datalabels",defaults:gj,beforeInit:function(s){s[Ht]={_actives:[]}},beforeUpdate:function(s){var t=s[Ht];t._listened=!1,t._listeners={},t._datasets=[],t._labels=[]},afterDatasetUpdate:function(s,t,r){var n=t.index,l=s[Ht],u=l._datasets[n]=[],h=s.isDatasetVisible(n),g=s.data.datasets[n],m=yj(g,r),y=t.meta.data||[],p=s.ctx,b,x,j,S,C,A,q,P;for(p.save(),b=0,j=y.length;b<j;++b)if(q=y[b],q[Ht]=[],h&&q&&s.getDataVisibility(b)&&!q.skip)for(x=0,S=m.labels.length;x<S;++x)C=m.labels[x],A=C._key,P=new z0(C,p,q,b),P.$groups={_set:n,_key:A||B0},P.$context={active:!1,chart:s,dataIndex:b,dataset:g,datasetIndex:n},P.update(P.$context),q[Ht].push(P),u.push(P);p.restore(),ji(l._listeners,m.listeners,{merger:function(M,Q,I){Q[M]=Q[M]||{},Q[M][t.index]=I[M],l._listened=!0}})},afterUpdate:function(s){s[Ht]._labels=bi.prepare(s[Ht]._datasets)},afterDatasetsDraw:function(s){bi.draw(s,s[Ht]._labels)},beforeEvent:function(s,t){if(s[Ht]._listened){var r=t.event;switch(r.type){case"mousemove":case"mouseout":vj(s,r);break;case"click":bj(s,r);break}}},afterEvent:function(s){var t=s[Ht],r=t._actives,n=t._actives=s.getActiveElements(),l=vi.arrayDiff(r,n),u,h,g,m,y,p,b;for(u=0,h=l.length;u<h;++u)if(y=l[u],y[1])for(b=y[0].element[Ht]||[],g=0,m=b.length;g<m;++g)p=b[g],p.$context.active=y[1]===1,p.update(p.$context);(t._dirty||l.length)&&(bi.update(t._labels),s.render()),delete t._dirty}};ka.register(rn,sn,an,nn,ln,on,xj,dd);const wj=({sheets:s,isLoading:t=!1})=>{if(t)return c.jsxs("div",{className:"chart-container",children:[c.jsx("h3",{children:"Comparison of Purchased vs Used Sheets"}),c.jsx("div",{className:"loading-spinner",id:"sheetsLoadingSpinner"}),c.jsx("p",{children:"Loading sheets data..."})]});if(!s||s.length===0)return c.jsxs("div",{className:"chart-container",children:[c.jsx("h3",{children:"Comparison of Purchased vs Used Sheets"}),c.jsx("p",{children:"No sheets data available for this project."})]});const r=s.length,n=s.reduce((g,m)=>g+(m.TotalReceived||0),0),l=s.reduce((g,m)=>g+(m.TotalUsed||0),0),u={labels:s.map(g=>g.Sheet),datasets:[{label:"Total Received",data:s.map(g=>g.TotalReceived||0),backgroundColor:"rgba(75, 192, 192, 0.6)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1},{label:"Total Used",data:s.map(g=>g.TotalUsed||0),backgroundColor:"rgba(255, 99, 132, 0.6)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1}]},h={responsive:!0,maintainAspectRatio:!1,layout:{padding:{bottom:25}},plugins:{datalabels:{color:"#000",align:"top",anchor:"end",font:{size:12,weight:"bold"},formatter:function(g){return g>0?g.toString():"0"}},legend:{position:"top",font:{size:16,weight:"bold"}},title:{display:!0,text:"Sheets Overview by Details",font:{size:20,weight:"bold"}}},scales:{x:{title:{display:!0,text:"Sheets",font:{size:16,weight:"bold"}},ticks:{autoSkip:!0,maxRotation:45,minRotation:0,font:{size:12,weight:"bold"}}},y:{beginAtZero:!0,title:{display:!0,text:"Quantity",font:{size:16,weight:"bold"}},ticks:{font:{size:14,weight:"bold"}}}}};return c.jsxs("div",{className:"chart-container",children:[c.jsx("h3",{children:"Comparison of Purchased vs Used Sheets"}),c.jsx("div",{className:"chart-wrapper",children:c.jsx(Gv,{data:u,options:h})}),c.jsxs("div",{className:"chart-info",style:{display:"flex",justifyContent:"space-around",marginTop:"20px",flexWrap:"wrap",gap:"20px"},children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Total Sheets:"})," ",r]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Total Received:"})," ",n]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Total Used:"})," ",l]})]})]})},H0=6048e5,jj=864e5,Ai=6e4,Ri=36e5,_j=1e3,Gg=Symbol.for("constructDateFrom");function it(s,t){return typeof s=="function"?s(t):s&&typeof s=="object"&&Gg in s?s[Gg](t):s instanceof Date?new s.constructor(t):new Date(t)}function ye(s,t){return it(t||s,s)}function yo(s,t,r){const n=ye(s,r==null?void 0:r.in);return isNaN(t)?it((r==null?void 0:r.in)||s,NaN):(t&&n.setDate(n.getDate()+t),n)}function vd(s,t,r){const n=ye(s,r==null?void 0:r.in);if(isNaN(t))return it(s,NaN);if(!t)return n;const l=n.getDate(),u=it(s,n.getTime());u.setMonth(n.getMonth()+t+1,0);const h=u.getDate();return l>=h?u:(n.setFullYear(u.getFullYear(),u.getMonth(),l),n)}function bd(s,t,r){return it(s,+ye(s)+t)}function Sj(s,t,r){return bd(s,t*Ri)}let Nj={};function es(){return Nj}function Da(s,t){var g,m,y,p,b,x,j,S;const r=es(),n=(S=(j=(p=(y=t==null?void 0:t.weekStartsOn)!=null?y:(m=(g=t==null?void 0:t.locale)==null?void 0:g.options)==null?void 0:m.weekStartsOn)!=null?p:r.weekStartsOn)!=null?j:(x=(b=r.locale)==null?void 0:b.options)==null?void 0:x.weekStartsOn)!=null?S:0,l=ye(s,t==null?void 0:t.in),u=l.getDay(),h=(u<n?7:0)+u-n;return l.setDate(l.getDate()-h),l.setHours(0,0,0,0),l}function tn(s,t){return Da(s,Xt(Xe({},t),{weekStartsOn:1}))}function I0(s,t){const r=ye(s,t==null?void 0:t.in),n=r.getFullYear(),l=it(r,0);l.setFullYear(n+1,0,4),l.setHours(0,0,0,0);const u=tn(l),h=it(r,0);h.setFullYear(n,0,4),h.setHours(0,0,0,0);const g=tn(h);return r.getTime()>=u.getTime()?n+1:r.getTime()>=g.getTime()?n:n-1}function lo(s){const t=ye(s),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+s-+r}function ts(s,...t){const r=it.bind(null,t.find(n=>typeof n=="object"));return t.map(r)}function ld(s,t){const r=ye(s,t==null?void 0:t.in);return r.setHours(0,0,0,0),r}function Y0(s,t,r){const[n,l]=ts(r==null?void 0:r.in,s,t),u=ld(n),h=ld(l),g=+u-lo(u),m=+h-lo(h);return Math.round((g-m)/jj)}function Tj(s,t){const r=I0(s,t),n=it(s,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),tn(n)}function Ej(s,t,r){const n=ye(s,r==null?void 0:r.in);return n.setTime(n.getTime()+t*Ai),n}function Cj(s,t,r){return vd(s,t*3,r)}function Oj(s,t,r){return bd(s,t*1e3)}function Dj(s,t,r){return yo(s,t*7,r)}function Aj(s,t,r){return vd(s,t*12,r)}function xi(s,t){const r=+ye(s)-+ye(t);return r<0?-1:r>0?1:r}function Rj(s){return s instanceof Date||typeof s=="object"&&Object.prototype.toString.call(s)==="[object Date]"}function V0(s){return!(!Rj(s)&&typeof s!="number"||isNaN(+ye(s)))}function kj(s,t,r){const[n,l]=ts(r==null?void 0:r.in,s,t),u=n.getFullYear()-l.getFullYear(),h=n.getMonth()-l.getMonth();return u*12+h}function Mj(s,t,r){const[n,l]=ts(r==null?void 0:r.in,s,t);return n.getFullYear()-l.getFullYear()}function Q0(s,t,r){const[n,l]=ts(r==null?void 0:r.in,s,t),u=Kg(n,l),h=Math.abs(Y0(n,l));n.setDate(n.getDate()-u*h);const g=+(Kg(n,l)===-u),m=u*(h-g);return m===0?0:m}function Kg(s,t){const r=s.getFullYear()-t.getFullYear()||s.getMonth()-t.getMonth()||s.getDate()-t.getDate()||s.getHours()-t.getHours()||s.getMinutes()-t.getMinutes()||s.getSeconds()-t.getSeconds()||s.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function ki(s){return t=>{const n=(s?Math[s]:Math.trunc)(t);return n===0?0:n}}function Uj(s,t,r){const[n,l]=ts(r==null?void 0:r.in,s,t),u=(+n-+l)/Ri;return ki(r==null?void 0:r.roundingMethod)(u)}function xd(s,t){return+ye(s)-+ye(t)}function qj(s,t,r){const n=xd(s,t)/Ai;return ki(r==null?void 0:r.roundingMethod)(n)}function G0(s,t){const r=ye(s,t==null?void 0:t.in);return r.setHours(23,59,59,999),r}function K0(s,t){const r=ye(s,t==null?void 0:t.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function Lj(s,t){const r=ye(s,t==null?void 0:t.in);return+G0(r,t)==+K0(r,t)}function F0(s,t,r){const[n,l,u]=ts(r==null?void 0:r.in,s,s,t),h=xi(l,u),g=Math.abs(kj(l,u));if(g<1)return 0;l.getMonth()===1&&l.getDate()>27&&l.setDate(30),l.setMonth(l.getMonth()-h*g);let m=xi(l,u)===-h;Lj(n)&&g===1&&xi(n,u)===1&&(m=!1);const y=h*(g-+m);return y===0?0:y}function zj(s,t,r){const n=F0(s,t,r)/3;return ki(r==null?void 0:r.roundingMethod)(n)}function Pj(s,t,r){const n=xd(s,t)/1e3;return ki(r==null?void 0:r.roundingMethod)(n)}function $j(s,t,r){const n=Q0(s,t,r)/7;return ki(r==null?void 0:r.roundingMethod)(n)}function Bj(s,t,r){const[n,l]=ts(r==null?void 0:r.in,s,t),u=xi(n,l),h=Math.abs(Mj(n,l));n.setFullYear(1584),l.setFullYear(1584);const g=xi(n,l)===-u,m=u*(h-+g);return m===0?0:m}function Hj(s,t){const r=ye(s,t==null?void 0:t.in),n=r.getMonth(),l=n-n%3;return r.setMonth(l,1),r.setHours(0,0,0,0),r}function Ij(s,t){const r=ye(s,t==null?void 0:t.in);return r.setDate(1),r.setHours(0,0,0,0),r}function Yj(s,t){const r=ye(s,t==null?void 0:t.in),n=r.getFullYear();return r.setFullYear(n+1,0,0),r.setHours(23,59,59,999),r}function X0(s,t){const r=ye(s,t==null?void 0:t.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}function Vj(s,t){const r=ye(s,t==null?void 0:t.in);return r.setMinutes(59,59,999),r}function Qj(s,t){var g,m,y,p;const r=es(),n=(p=(y=r.weekStartsOn)!=null?y:(m=(g=r.locale)==null?void 0:g.options)==null?void 0:m.weekStartsOn)!=null?p:0,l=ye(s,t==null?void 0:t.in),u=l.getDay(),h=(u<n?-7:0)+6-(u-n);return l.setDate(l.getDate()+h),l.setHours(23,59,59,999),l}function Gj(s,t){const r=ye(s,t==null?void 0:t.in);return r.setSeconds(59,999),r}function Kj(s,t){const r=ye(s,t==null?void 0:t.in),n=r.getMonth(),l=n-n%3+3;return r.setMonth(l,0),r.setHours(23,59,59,999),r}function Fj(s,t){const r=ye(s,t==null?void 0:t.in);return r.setMilliseconds(999),r}const Xj={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Wj=(s,t,r)=>{let n;const l=Xj[s];return typeof l=="string"?n=l:t===1?n=l.one:n=l.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Qu(s){return(t={})=>{const r=t.width?String(t.width):s.defaultWidth;return s.formats[r]||s.formats[s.defaultWidth]}}const Jj={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Zj={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},e_={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},t_={date:Qu({formats:Jj,defaultWidth:"full"}),time:Qu({formats:Zj,defaultWidth:"full"}),dateTime:Qu({formats:e_,defaultWidth:"full"})},a_={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},r_=(s,t,r,n)=>a_[s];function di(s){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let l;if(n==="formatting"&&s.formattingValues){const h=s.defaultFormattingWidth||s.defaultWidth,g=r!=null&&r.width?String(r.width):h;l=s.formattingValues[g]||s.formattingValues[h]}else{const h=s.defaultWidth,g=r!=null&&r.width?String(r.width):s.defaultWidth;l=s.values[g]||s.values[h]}const u=s.argumentCallback?s.argumentCallback(t):t;return l[u]}}const s_={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},n_={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},i_={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},l_={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},o_={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},c_={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},u_=(s,t)=>{const r=Number(s),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},d_={ordinalNumber:u_,era:di({values:s_,defaultWidth:"wide"}),quarter:di({values:n_,defaultWidth:"wide",argumentCallback:s=>s-1}),month:di({values:i_,defaultWidth:"wide"}),day:di({values:l_,defaultWidth:"wide"}),dayPeriod:di({values:o_,defaultWidth:"wide",formattingValues:c_,defaultFormattingWidth:"wide"})};function hi(s){return(t,r={})=>{const n=r.width,l=n&&s.matchPatterns[n]||s.matchPatterns[s.defaultMatchWidth],u=t.match(l);if(!u)return null;const h=u[0],g=n&&s.parsePatterns[n]||s.parsePatterns[s.defaultParseWidth],m=Array.isArray(g)?f_(g,b=>b.test(h)):h_(g,b=>b.test(h));let y;y=s.valueCallback?s.valueCallback(m):m,y=r.valueCallback?r.valueCallback(y):y;const p=t.slice(h.length);return{value:y,rest:p}}}function h_(s,t){for(const r in s)if(Object.prototype.hasOwnProperty.call(s,r)&&t(s[r]))return r}function f_(s,t){for(let r=0;r<s.length;r++)if(t(s[r]))return r}function m_(s){return(t,r={})=>{const n=t.match(s.matchPattern);if(!n)return null;const l=n[0],u=t.match(s.parsePattern);if(!u)return null;let h=s.valueCallback?s.valueCallback(u[0]):u[0];h=r.valueCallback?r.valueCallback(h):h;const g=t.slice(l.length);return{value:h,rest:g}}}const g_=/^(\d+)(th|st|nd|rd)?/i,y_=/\d+/i,p_={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},v_={any:[/^b/i,/^(a|c)/i]},b_={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},x_={any:[/1/i,/2/i,/3/i,/4/i]},w_={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},j_={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},__={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},S_={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},N_={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},T_={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},E_={ordinalNumber:m_({matchPattern:g_,parsePattern:y_,valueCallback:s=>parseInt(s,10)}),era:hi({matchPatterns:p_,defaultMatchWidth:"wide",parsePatterns:v_,defaultParseWidth:"any"}),quarter:hi({matchPatterns:b_,defaultMatchWidth:"wide",parsePatterns:x_,defaultParseWidth:"any",valueCallback:s=>s+1}),month:hi({matchPatterns:w_,defaultMatchWidth:"wide",parsePatterns:j_,defaultParseWidth:"any"}),day:hi({matchPatterns:__,defaultMatchWidth:"wide",parsePatterns:S_,defaultParseWidth:"any"}),dayPeriod:hi({matchPatterns:N_,defaultMatchWidth:"any",parsePatterns:T_,defaultParseWidth:"any"})},W0={code:"en-US",formatDistance:Wj,formatLong:t_,formatRelative:r_,localize:d_,match:E_,options:{weekStartsOn:0,firstWeekContainsDate:1}};function C_(s,t){const r=ye(s,t==null?void 0:t.in);return Y0(r,X0(r))+1}function J0(s,t){const r=ye(s,t==null?void 0:t.in),n=+tn(r)-+Tj(r);return Math.round(n/H0)+1}function wd(s,t){var p,b,x,j,S,C,A,q;const r=ye(s,t==null?void 0:t.in),n=r.getFullYear(),l=es(),u=(q=(A=(j=(x=t==null?void 0:t.firstWeekContainsDate)!=null?x:(b=(p=t==null?void 0:t.locale)==null?void 0:p.options)==null?void 0:b.firstWeekContainsDate)!=null?j:l.firstWeekContainsDate)!=null?A:(C=(S=l.locale)==null?void 0:S.options)==null?void 0:C.firstWeekContainsDate)!=null?q:1,h=it((t==null?void 0:t.in)||s,0);h.setFullYear(n+1,0,u),h.setHours(0,0,0,0);const g=Da(h,t),m=it((t==null?void 0:t.in)||s,0);m.setFullYear(n,0,u),m.setHours(0,0,0,0);const y=Da(m,t);return+r>=+g?n+1:+r>=+y?n:n-1}function O_(s,t){var g,m,y,p,b,x,j,S;const r=es(),n=(S=(j=(p=(y=t==null?void 0:t.firstWeekContainsDate)!=null?y:(m=(g=t==null?void 0:t.locale)==null?void 0:g.options)==null?void 0:m.firstWeekContainsDate)!=null?p:r.firstWeekContainsDate)!=null?j:(x=(b=r.locale)==null?void 0:b.options)==null?void 0:x.firstWeekContainsDate)!=null?S:1,l=wd(s,t),u=it((t==null?void 0:t.in)||s,0);return u.setFullYear(l,0,n),u.setHours(0,0,0,0),Da(u,t)}function Z0(s,t){const r=ye(s,t==null?void 0:t.in),n=+Da(r,t)-+O_(r,t);return Math.round(n/H0)+1}function Ue(s,t){const r=s<0?"-":"",n=Math.abs(s).toString().padStart(t,"0");return r+n}const _r={y(s,t){const r=s.getFullYear(),n=r>0?r:1-r;return Ue(t==="yy"?n%100:n,t.length)},M(s,t){const r=s.getMonth();return t==="M"?String(r+1):Ue(r+1,2)},d(s,t){return Ue(s.getDate(),t.length)},a(s,t){const r=s.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(s,t){return Ue(s.getHours()%12||12,t.length)},H(s,t){return Ue(s.getHours(),t.length)},m(s,t){return Ue(s.getMinutes(),t.length)},s(s,t){return Ue(s.getSeconds(),t.length)},S(s,t){const r=t.length,n=s.getMilliseconds(),l=Math.trunc(n*Math.pow(10,r-3));return Ue(l,t.length)}},Gs={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Fg={G:function(s,t,r){const n=s.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(s,t,r){if(t==="yo"){const n=s.getFullYear(),l=n>0?n:1-n;return r.ordinalNumber(l,{unit:"year"})}return _r.y(s,t)},Y:function(s,t,r,n){const l=wd(s,n),u=l>0?l:1-l;if(t==="YY"){const h=u%100;return Ue(h,2)}return t==="Yo"?r.ordinalNumber(u,{unit:"year"}):Ue(u,t.length)},R:function(s,t){const r=I0(s);return Ue(r,t.length)},u:function(s,t){const r=s.getFullYear();return Ue(r,t.length)},Q:function(s,t,r){const n=Math.ceil((s.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return Ue(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(s,t,r){const n=Math.ceil((s.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return Ue(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(s,t,r){const n=s.getMonth();switch(t){case"M":case"MM":return _r.M(s,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(s,t,r){const n=s.getMonth();switch(t){case"L":return String(n+1);case"LL":return Ue(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(s,t,r,n){const l=Z0(s,n);return t==="wo"?r.ordinalNumber(l,{unit:"week"}):Ue(l,t.length)},I:function(s,t,r){const n=J0(s);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):Ue(n,t.length)},d:function(s,t,r){return t==="do"?r.ordinalNumber(s.getDate(),{unit:"date"}):_r.d(s,t)},D:function(s,t,r){const n=C_(s);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Ue(n,t.length)},E:function(s,t,r){const n=s.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(s,t,r,n){const l=s.getDay(),u=(l-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(u);case"ee":return Ue(u,2);case"eo":return r.ordinalNumber(u,{unit:"day"});case"eee":return r.day(l,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(l,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(l,{width:"short",context:"formatting"});case"eeee":default:return r.day(l,{width:"wide",context:"formatting"})}},c:function(s,t,r,n){const l=s.getDay(),u=(l-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(u);case"cc":return Ue(u,t.length);case"co":return r.ordinalNumber(u,{unit:"day"});case"ccc":return r.day(l,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(l,{width:"narrow",context:"standalone"});case"cccccc":return r.day(l,{width:"short",context:"standalone"});case"cccc":default:return r.day(l,{width:"wide",context:"standalone"})}},i:function(s,t,r){const n=s.getDay(),l=n===0?7:n;switch(t){case"i":return String(l);case"ii":return Ue(l,t.length);case"io":return r.ordinalNumber(l,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(s,t,r){const l=s.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(l,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(l,{width:"wide",context:"formatting"})}},b:function(s,t,r){const n=s.getHours();let l;switch(n===12?l=Gs.noon:n===0?l=Gs.midnight:l=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(l,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(l,{width:"wide",context:"formatting"})}},B:function(s,t,r){const n=s.getHours();let l;switch(n>=17?l=Gs.evening:n>=12?l=Gs.afternoon:n>=4?l=Gs.morning:l=Gs.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(l,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(l,{width:"wide",context:"formatting"})}},h:function(s,t,r){if(t==="ho"){let n=s.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return _r.h(s,t)},H:function(s,t,r){return t==="Ho"?r.ordinalNumber(s.getHours(),{unit:"hour"}):_r.H(s,t)},K:function(s,t,r){const n=s.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Ue(n,t.length)},k:function(s,t,r){let n=s.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):Ue(n,t.length)},m:function(s,t,r){return t==="mo"?r.ordinalNumber(s.getMinutes(),{unit:"minute"}):_r.m(s,t)},s:function(s,t,r){return t==="so"?r.ordinalNumber(s.getSeconds(),{unit:"second"}):_r.s(s,t)},S:function(s,t){return _r.S(s,t)},X:function(s,t,r){const n=s.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return Wg(n);case"XXXX":case"XX":return Xr(n);case"XXXXX":case"XXX":default:return Xr(n,":")}},x:function(s,t,r){const n=s.getTimezoneOffset();switch(t){case"x":return Wg(n);case"xxxx":case"xx":return Xr(n);case"xxxxx":case"xxx":default:return Xr(n,":")}},O:function(s,t,r){const n=s.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Xg(n,":");case"OOOO":default:return"GMT"+Xr(n,":")}},z:function(s,t,r){const n=s.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Xg(n,":");case"zzzz":default:return"GMT"+Xr(n,":")}},t:function(s,t,r){const n=Math.trunc(+s/1e3);return Ue(n,t.length)},T:function(s,t,r){return Ue(+s,t.length)}};function Xg(s,t=""){const r=s>0?"-":"+",n=Math.abs(s),l=Math.trunc(n/60),u=n%60;return u===0?r+String(l):r+String(l)+t+Ue(u,2)}function Wg(s,t){return s%60===0?(s>0?"-":"+")+Ue(Math.abs(s)/60,2):Xr(s,t)}function Xr(s,t=""){const r=s>0?"-":"+",n=Math.abs(s),l=Ue(Math.trunc(n/60),2),u=Ue(n%60,2);return r+l+t+u}const Jg=(s,t)=>{switch(s){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},ey=(s,t)=>{switch(s){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},D_=(s,t)=>{const r=s.match(/(P+)(p+)?/)||[],n=r[1],l=r[2];if(!l)return Jg(s,t);let u;switch(n){case"P":u=t.dateTime({width:"short"});break;case"PP":u=t.dateTime({width:"medium"});break;case"PPP":u=t.dateTime({width:"long"});break;case"PPPP":default:u=t.dateTime({width:"full"});break}return u.replace("{{date}}",Jg(n,t)).replace("{{time}}",ey(l,t))},od={p:ey,P:D_},A_=/^D+$/,R_=/^Y+$/,k_=["D","DD","YY","YYYY"];function ty(s){return A_.test(s)}function ay(s){return R_.test(s)}function cd(s,t,r){const n=M_(s,t,r);if(console.warn(n),k_.includes(s))throw new RangeError(n)}function M_(s,t,r){const n=s[0]==="Y"?"years":"days of the month";return`Use \`${s.toLowerCase()}\` instead of \`${s}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const U_=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,q_=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,L_=/^'([^]*?)'?$/,z_=/''/g,P_=/[a-zA-Z]/;function $_(s,t,r){var p,b,x,j,S,C,A,q,P,M,Q,I,D,Y,N,T,$,Z;const n=es(),l=(b=(p=r==null?void 0:r.locale)!=null?p:n.locale)!=null?b:W0,u=(M=(P=(C=(S=r==null?void 0:r.firstWeekContainsDate)!=null?S:(j=(x=r==null?void 0:r.locale)==null?void 0:x.options)==null?void 0:j.firstWeekContainsDate)!=null?C:n.firstWeekContainsDate)!=null?P:(q=(A=n.locale)==null?void 0:A.options)==null?void 0:q.firstWeekContainsDate)!=null?M:1,h=(Z=($=(Y=(D=r==null?void 0:r.weekStartsOn)!=null?D:(I=(Q=r==null?void 0:r.locale)==null?void 0:Q.options)==null?void 0:I.weekStartsOn)!=null?Y:n.weekStartsOn)!=null?$:(T=(N=n.locale)==null?void 0:N.options)==null?void 0:T.weekStartsOn)!=null?Z:0,g=ye(s,r==null?void 0:r.in);if(!V0(g))throw new RangeError("Invalid time value");let m=t.match(q_).map(W=>{const re=W[0];if(re==="p"||re==="P"){const Te=od[re];return Te(W,l.formatLong)}return W}).join("").match(U_).map(W=>{if(W==="''")return{isToken:!1,value:"'"};const re=W[0];if(re==="'")return{isToken:!1,value:B_(W)};if(Fg[re])return{isToken:!0,value:W};if(re.match(P_))throw new RangeError("Format string contains an unescaped latin alphabet character `"+re+"`");return{isToken:!1,value:W}});l.localize.preprocessor&&(m=l.localize.preprocessor(g,m));const y={firstWeekContainsDate:u,weekStartsOn:h,locale:l};return m.map(W=>{if(!W.isToken)return W.value;const re=W.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&ay(re)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&ty(re))&&cd(re,t,String(s));const Te=Fg[re[0]];return Te(g,re,l.localize,y)}).join("")}function B_(s){const t=s.match(L_);return t?t[1].replace(z_,"'"):s}function H_(){return Object.assign({},es())}function I_(s,t){const r=ye(s,t==null?void 0:t.in).getDay();return r===0?7:r}function Y_(s,t){const r=V_(t)?new t(0):it(t,0);return r.setFullYear(s.getFullYear(),s.getMonth(),s.getDate()),r.setHours(s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()),r}function V_(s){var t;return typeof s=="function"&&((t=s.prototype)==null?void 0:t.constructor)===s}const Q_=10;class ry{constructor(){ae(this,"subPriority",0)}validate(t,r){return!0}}class G_ extends ry{constructor(t,r,n,l,u){super(),this.value=t,this.validateValue=r,this.setValue=n,this.priority=l,u&&(this.subPriority=u)}validate(t,r){return this.validateValue(t,this.value,r)}set(t,r,n){return this.setValue(t,r,this.value,n)}}class K_ extends ry{constructor(r,n){super();ae(this,"priority",Q_);ae(this,"subPriority",-1);this.context=r||(l=>it(n,l))}set(r,n){return n.timestampIsSet?r:it(r,Y_(r,this.context))}}class Re{run(t,r,n,l){const u=this.parse(t,r,n,l);return u?{setter:new G_(u.value,this.validate,this.set,this.priority,this.subPriority),rest:u.rest}:null}validate(t,r,n){return!0}}class F_ extends Re{constructor(){super(...arguments);ae(this,"priority",140);ae(this,"incompatibleTokens",["R","u","t","T"])}parse(r,n,l){switch(n){case"G":case"GG":case"GGG":return l.era(r,{width:"abbreviated"})||l.era(r,{width:"narrow"});case"GGGGG":return l.era(r,{width:"narrow"});case"GGGG":default:return l.era(r,{width:"wide"})||l.era(r,{width:"abbreviated"})||l.era(r,{width:"narrow"})}}set(r,n,l){return n.era=l,r.setFullYear(l,0,1),r.setHours(0,0,0,0),r}}const ut={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Ca={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function dt(s,t){return s&&{value:t(s.value),rest:s.rest}}function et(s,t){const r=t.match(s);return r?{value:parseInt(r[0],10),rest:t.slice(r[0].length)}:null}function Oa(s,t){const r=t.match(s);if(!r)return null;if(r[0]==="Z")return{value:0,rest:t.slice(1)};const n=r[1]==="+"?1:-1,l=r[2]?parseInt(r[2],10):0,u=r[3]?parseInt(r[3],10):0,h=r[5]?parseInt(r[5],10):0;return{value:n*(l*Ri+u*Ai+h*_j),rest:t.slice(r[0].length)}}function sy(s){return et(ut.anyDigitsSigned,s)}function lt(s,t){switch(s){case 1:return et(ut.singleDigit,t);case 2:return et(ut.twoDigits,t);case 3:return et(ut.threeDigits,t);case 4:return et(ut.fourDigits,t);default:return et(new RegExp("^\\d{1,"+s+"}"),t)}}function oo(s,t){switch(s){case 1:return et(ut.singleDigitSigned,t);case 2:return et(ut.twoDigitsSigned,t);case 3:return et(ut.threeDigitsSigned,t);case 4:return et(ut.fourDigitsSigned,t);default:return et(new RegExp("^-?\\d{1,"+s+"}"),t)}}function jd(s){switch(s){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function ny(s,t){const r=t>0,n=r?t:1-t;let l;if(n<=50)l=s||100;else{const u=n+50,h=Math.trunc(u/100)*100,g=s>=u%100;l=s+h-(g?100:0)}return r?l:1-l}function iy(s){return s%400===0||s%4===0&&s%100!==0}class X_ extends Re{constructor(){super(...arguments);ae(this,"priority",130);ae(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(r,n,l){const u=h=>({year:h,isTwoDigitYear:n==="yy"});switch(n){case"y":return dt(lt(4,r),u);case"yo":return dt(l.ordinalNumber(r,{unit:"year"}),u);default:return dt(lt(n.length,r),u)}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,l){const u=r.getFullYear();if(l.isTwoDigitYear){const g=ny(l.year,u);return r.setFullYear(g,0,1),r.setHours(0,0,0,0),r}const h=!("era"in n)||n.era===1?l.year:1-l.year;return r.setFullYear(h,0,1),r.setHours(0,0,0,0),r}}class W_ extends Re{constructor(){super(...arguments);ae(this,"priority",130);ae(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(r,n,l){const u=h=>({year:h,isTwoDigitYear:n==="YY"});switch(n){case"Y":return dt(lt(4,r),u);case"Yo":return dt(l.ordinalNumber(r,{unit:"year"}),u);default:return dt(lt(n.length,r),u)}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,l,u){const h=wd(r,u);if(l.isTwoDigitYear){const m=ny(l.year,h);return r.setFullYear(m,0,u.firstWeekContainsDate),r.setHours(0,0,0,0),Da(r,u)}const g=!("era"in n)||n.era===1?l.year:1-l.year;return r.setFullYear(g,0,u.firstWeekContainsDate),r.setHours(0,0,0,0),Da(r,u)}}class J_ extends Re{constructor(){super(...arguments);ae(this,"priority",130);ae(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(r,n){return oo(n==="R"?4:n.length,r)}set(r,n,l){const u=it(r,0);return u.setFullYear(l,0,4),u.setHours(0,0,0,0),tn(u)}}class Z_ extends Re{constructor(){super(...arguments);ae(this,"priority",130);ae(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(r,n){return oo(n==="u"?4:n.length,r)}set(r,n,l){return r.setFullYear(l,0,1),r.setHours(0,0,0,0),r}}class eS extends Re{constructor(){super(...arguments);ae(this,"priority",120);ae(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,n,l){switch(n){case"Q":case"QQ":return lt(n.length,r);case"Qo":return l.ordinalNumber(r,{unit:"quarter"});case"QQQ":return l.quarter(r,{width:"abbreviated",context:"formatting"})||l.quarter(r,{width:"narrow",context:"formatting"});case"QQQQQ":return l.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return l.quarter(r,{width:"wide",context:"formatting"})||l.quarter(r,{width:"abbreviated",context:"formatting"})||l.quarter(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=1&&n<=4}set(r,n,l){return r.setMonth((l-1)*3,1),r.setHours(0,0,0,0),r}}class tS extends Re{constructor(){super(...arguments);ae(this,"priority",120);ae(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,n,l){switch(n){case"q":case"qq":return lt(n.length,r);case"qo":return l.ordinalNumber(r,{unit:"quarter"});case"qqq":return l.quarter(r,{width:"abbreviated",context:"standalone"})||l.quarter(r,{width:"narrow",context:"standalone"});case"qqqqq":return l.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return l.quarter(r,{width:"wide",context:"standalone"})||l.quarter(r,{width:"abbreviated",context:"standalone"})||l.quarter(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=1&&n<=4}set(r,n,l){return r.setMonth((l-1)*3,1),r.setHours(0,0,0,0),r}}class aS extends Re{constructor(){super(...arguments);ae(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);ae(this,"priority",110)}parse(r,n,l){const u=h=>h-1;switch(n){case"M":return dt(et(ut.month,r),u);case"MM":return dt(lt(2,r),u);case"Mo":return dt(l.ordinalNumber(r,{unit:"month"}),u);case"MMM":return l.month(r,{width:"abbreviated",context:"formatting"})||l.month(r,{width:"narrow",context:"formatting"});case"MMMMM":return l.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return l.month(r,{width:"wide",context:"formatting"})||l.month(r,{width:"abbreviated",context:"formatting"})||l.month(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=11}set(r,n,l){return r.setMonth(l,1),r.setHours(0,0,0,0),r}}class rS extends Re{constructor(){super(...arguments);ae(this,"priority",110);ae(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(r,n,l){const u=h=>h-1;switch(n){case"L":return dt(et(ut.month,r),u);case"LL":return dt(lt(2,r),u);case"Lo":return dt(l.ordinalNumber(r,{unit:"month"}),u);case"LLL":return l.month(r,{width:"abbreviated",context:"standalone"})||l.month(r,{width:"narrow",context:"standalone"});case"LLLLL":return l.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return l.month(r,{width:"wide",context:"standalone"})||l.month(r,{width:"abbreviated",context:"standalone"})||l.month(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=0&&n<=11}set(r,n,l){return r.setMonth(l,1),r.setHours(0,0,0,0),r}}function sS(s,t,r){const n=ye(s,r==null?void 0:r.in),l=Z0(n,r)-t;return n.setDate(n.getDate()-l*7),ye(n,r==null?void 0:r.in)}class nS extends Re{constructor(){super(...arguments);ae(this,"priority",100);ae(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(r,n,l){switch(n){case"w":return et(ut.week,r);case"wo":return l.ordinalNumber(r,{unit:"week"});default:return lt(n.length,r)}}validate(r,n){return n>=1&&n<=53}set(r,n,l,u){return Da(sS(r,l,u),u)}}function iS(s,t,r){const n=ye(s,r==null?void 0:r.in),l=J0(n,r)-t;return n.setDate(n.getDate()-l*7),n}class lS extends Re{constructor(){super(...arguments);ae(this,"priority",100);ae(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(r,n,l){switch(n){case"I":return et(ut.week,r);case"Io":return l.ordinalNumber(r,{unit:"week"});default:return lt(n.length,r)}}validate(r,n){return n>=1&&n<=53}set(r,n,l){return tn(iS(r,l))}}const oS=[31,28,31,30,31,30,31,31,30,31,30,31],cS=[31,29,31,30,31,30,31,31,30,31,30,31];class uS extends Re{constructor(){super(...arguments);ae(this,"priority",90);ae(this,"subPriority",1);ae(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(r,n,l){switch(n){case"d":return et(ut.date,r);case"do":return l.ordinalNumber(r,{unit:"date"});default:return lt(n.length,r)}}validate(r,n){const l=r.getFullYear(),u=iy(l),h=r.getMonth();return u?n>=1&&n<=cS[h]:n>=1&&n<=oS[h]}set(r,n,l){return r.setDate(l),r.setHours(0,0,0,0),r}}class dS extends Re{constructor(){super(...arguments);ae(this,"priority",90);ae(this,"subpriority",1);ae(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(r,n,l){switch(n){case"D":case"DD":return et(ut.dayOfYear,r);case"Do":return l.ordinalNumber(r,{unit:"date"});default:return lt(n.length,r)}}validate(r,n){const l=r.getFullYear();return iy(l)?n>=1&&n<=366:n>=1&&n<=365}set(r,n,l){return r.setMonth(0,l),r.setHours(0,0,0,0),r}}function _d(s,t,r){var b,x,j,S,C,A,q,P;const n=es(),l=(P=(q=(S=(j=r==null?void 0:r.weekStartsOn)!=null?j:(x=(b=r==null?void 0:r.locale)==null?void 0:b.options)==null?void 0:x.weekStartsOn)!=null?S:n.weekStartsOn)!=null?q:(A=(C=n.locale)==null?void 0:C.options)==null?void 0:A.weekStartsOn)!=null?P:0,u=ye(s,r==null?void 0:r.in),h=u.getDay(),m=(t%7+7)%7,y=7-l,p=t<0||t>6?t-(h+y)%7:(m+y)%7-(h+y)%7;return yo(u,p,r)}class hS extends Re{constructor(){super(...arguments);ae(this,"priority",90);ae(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(r,n,l){switch(n){case"E":case"EE":case"EEE":return l.day(r,{width:"abbreviated",context:"formatting"})||l.day(r,{width:"short",context:"formatting"})||l.day(r,{width:"narrow",context:"formatting"});case"EEEEE":return l.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return l.day(r,{width:"short",context:"formatting"})||l.day(r,{width:"narrow",context:"formatting"});case"EEEE":default:return l.day(r,{width:"wide",context:"formatting"})||l.day(r,{width:"abbreviated",context:"formatting"})||l.day(r,{width:"short",context:"formatting"})||l.day(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=6}set(r,n,l,u){return r=_d(r,l,u),r.setHours(0,0,0,0),r}}class fS extends Re{constructor(){super(...arguments);ae(this,"priority",90);ae(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(r,n,l,u){const h=g=>{const m=Math.floor((g-1)/7)*7;return(g+u.weekStartsOn+6)%7+m};switch(n){case"e":case"ee":return dt(lt(n.length,r),h);case"eo":return dt(l.ordinalNumber(r,{unit:"day"}),h);case"eee":return l.day(r,{width:"abbreviated",context:"formatting"})||l.day(r,{width:"short",context:"formatting"})||l.day(r,{width:"narrow",context:"formatting"});case"eeeee":return l.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return l.day(r,{width:"short",context:"formatting"})||l.day(r,{width:"narrow",context:"formatting"});case"eeee":default:return l.day(r,{width:"wide",context:"formatting"})||l.day(r,{width:"abbreviated",context:"formatting"})||l.day(r,{width:"short",context:"formatting"})||l.day(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=6}set(r,n,l,u){return r=_d(r,l,u),r.setHours(0,0,0,0),r}}class mS extends Re{constructor(){super(...arguments);ae(this,"priority",90);ae(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(r,n,l,u){const h=g=>{const m=Math.floor((g-1)/7)*7;return(g+u.weekStartsOn+6)%7+m};switch(n){case"c":case"cc":return dt(lt(n.length,r),h);case"co":return dt(l.ordinalNumber(r,{unit:"day"}),h);case"ccc":return l.day(r,{width:"abbreviated",context:"standalone"})||l.day(r,{width:"short",context:"standalone"})||l.day(r,{width:"narrow",context:"standalone"});case"ccccc":return l.day(r,{width:"narrow",context:"standalone"});case"cccccc":return l.day(r,{width:"short",context:"standalone"})||l.day(r,{width:"narrow",context:"standalone"});case"cccc":default:return l.day(r,{width:"wide",context:"standalone"})||l.day(r,{width:"abbreviated",context:"standalone"})||l.day(r,{width:"short",context:"standalone"})||l.day(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=0&&n<=6}set(r,n,l,u){return r=_d(r,l,u),r.setHours(0,0,0,0),r}}function gS(s,t,r){const n=ye(s,r==null?void 0:r.in),l=I_(n,r),u=t-l;return yo(n,u,r)}class yS extends Re{constructor(){super(...arguments);ae(this,"priority",90);ae(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(r,n,l){const u=h=>h===0?7:h;switch(n){case"i":case"ii":return lt(n.length,r);case"io":return l.ordinalNumber(r,{unit:"day"});case"iii":return dt(l.day(r,{width:"abbreviated",context:"formatting"})||l.day(r,{width:"short",context:"formatting"})||l.day(r,{width:"narrow",context:"formatting"}),u);case"iiiii":return dt(l.day(r,{width:"narrow",context:"formatting"}),u);case"iiiiii":return dt(l.day(r,{width:"short",context:"formatting"})||l.day(r,{width:"narrow",context:"formatting"}),u);case"iiii":default:return dt(l.day(r,{width:"wide",context:"formatting"})||l.day(r,{width:"abbreviated",context:"formatting"})||l.day(r,{width:"short",context:"formatting"})||l.day(r,{width:"narrow",context:"formatting"}),u)}}validate(r,n){return n>=1&&n<=7}set(r,n,l){return r=gS(r,l),r.setHours(0,0,0,0),r}}class pS extends Re{constructor(){super(...arguments);ae(this,"priority",80);ae(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(r,n,l){switch(n){case"a":case"aa":case"aaa":return l.dayPeriod(r,{width:"abbreviated",context:"formatting"})||l.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaaa":return l.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return l.dayPeriod(r,{width:"wide",context:"formatting"})||l.dayPeriod(r,{width:"abbreviated",context:"formatting"})||l.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,l){return r.setHours(jd(l),0,0,0),r}}class vS extends Re{constructor(){super(...arguments);ae(this,"priority",80);ae(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(r,n,l){switch(n){case"b":case"bb":case"bbb":return l.dayPeriod(r,{width:"abbreviated",context:"formatting"})||l.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbbb":return l.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return l.dayPeriod(r,{width:"wide",context:"formatting"})||l.dayPeriod(r,{width:"abbreviated",context:"formatting"})||l.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,l){return r.setHours(jd(l),0,0,0),r}}class bS extends Re{constructor(){super(...arguments);ae(this,"priority",80);ae(this,"incompatibleTokens",["a","b","t","T"])}parse(r,n,l){switch(n){case"B":case"BB":case"BBB":return l.dayPeriod(r,{width:"abbreviated",context:"formatting"})||l.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBBB":return l.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return l.dayPeriod(r,{width:"wide",context:"formatting"})||l.dayPeriod(r,{width:"abbreviated",context:"formatting"})||l.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,l){return r.setHours(jd(l),0,0,0),r}}class xS extends Re{constructor(){super(...arguments);ae(this,"priority",70);ae(this,"incompatibleTokens",["H","K","k","t","T"])}parse(r,n,l){switch(n){case"h":return et(ut.hour12h,r);case"ho":return l.ordinalNumber(r,{unit:"hour"});default:return lt(n.length,r)}}validate(r,n){return n>=1&&n<=12}set(r,n,l){const u=r.getHours()>=12;return u&&l<12?r.setHours(l+12,0,0,0):!u&&l===12?r.setHours(0,0,0,0):r.setHours(l,0,0,0),r}}class wS extends Re{constructor(){super(...arguments);ae(this,"priority",70);ae(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(r,n,l){switch(n){case"H":return et(ut.hour23h,r);case"Ho":return l.ordinalNumber(r,{unit:"hour"});default:return lt(n.length,r)}}validate(r,n){return n>=0&&n<=23}set(r,n,l){return r.setHours(l,0,0,0),r}}class jS extends Re{constructor(){super(...arguments);ae(this,"priority",70);ae(this,"incompatibleTokens",["h","H","k","t","T"])}parse(r,n,l){switch(n){case"K":return et(ut.hour11h,r);case"Ko":return l.ordinalNumber(r,{unit:"hour"});default:return lt(n.length,r)}}validate(r,n){return n>=0&&n<=11}set(r,n,l){return r.getHours()>=12&&l<12?r.setHours(l+12,0,0,0):r.setHours(l,0,0,0),r}}class _S extends Re{constructor(){super(...arguments);ae(this,"priority",70);ae(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(r,n,l){switch(n){case"k":return et(ut.hour24h,r);case"ko":return l.ordinalNumber(r,{unit:"hour"});default:return lt(n.length,r)}}validate(r,n){return n>=1&&n<=24}set(r,n,l){const u=l<=24?l%24:l;return r.setHours(u,0,0,0),r}}class SS extends Re{constructor(){super(...arguments);ae(this,"priority",60);ae(this,"incompatibleTokens",["t","T"])}parse(r,n,l){switch(n){case"m":return et(ut.minute,r);case"mo":return l.ordinalNumber(r,{unit:"minute"});default:return lt(n.length,r)}}validate(r,n){return n>=0&&n<=59}set(r,n,l){return r.setMinutes(l,0,0),r}}class NS extends Re{constructor(){super(...arguments);ae(this,"priority",50);ae(this,"incompatibleTokens",["t","T"])}parse(r,n,l){switch(n){case"s":return et(ut.second,r);case"so":return l.ordinalNumber(r,{unit:"second"});default:return lt(n.length,r)}}validate(r,n){return n>=0&&n<=59}set(r,n,l){return r.setSeconds(l,0),r}}class TS extends Re{constructor(){super(...arguments);ae(this,"priority",30);ae(this,"incompatibleTokens",["t","T"])}parse(r,n){const l=u=>Math.trunc(u*Math.pow(10,-n.length+3));return dt(lt(n.length,r),l)}set(r,n,l){return r.setMilliseconds(l),r}}class ES extends Re{constructor(){super(...arguments);ae(this,"priority",10);ae(this,"incompatibleTokens",["t","T","x"])}parse(r,n){switch(n){case"X":return Oa(Ca.basicOptionalMinutes,r);case"XX":return Oa(Ca.basic,r);case"XXXX":return Oa(Ca.basicOptionalSeconds,r);case"XXXXX":return Oa(Ca.extendedOptionalSeconds,r);case"XXX":default:return Oa(Ca.extended,r)}}set(r,n,l){return n.timestampIsSet?r:it(r,r.getTime()-lo(r)-l)}}class CS extends Re{constructor(){super(...arguments);ae(this,"priority",10);ae(this,"incompatibleTokens",["t","T","X"])}parse(r,n){switch(n){case"x":return Oa(Ca.basicOptionalMinutes,r);case"xx":return Oa(Ca.basic,r);case"xxxx":return Oa(Ca.basicOptionalSeconds,r);case"xxxxx":return Oa(Ca.extendedOptionalSeconds,r);case"xxx":default:return Oa(Ca.extended,r)}}set(r,n,l){return n.timestampIsSet?r:it(r,r.getTime()-lo(r)-l)}}class OS extends Re{constructor(){super(...arguments);ae(this,"priority",40);ae(this,"incompatibleTokens","*")}parse(r){return sy(r)}set(r,n,l){return[it(r,l*1e3),{timestampIsSet:!0}]}}class DS extends Re{constructor(){super(...arguments);ae(this,"priority",20);ae(this,"incompatibleTokens","*")}parse(r){return sy(r)}set(r,n,l){return[it(r,l),{timestampIsSet:!0}]}}const AS={G:new F_,y:new X_,Y:new W_,R:new J_,u:new Z_,Q:new eS,q:new tS,M:new aS,L:new rS,w:new nS,I:new lS,d:new uS,D:new dS,E:new hS,e:new fS,c:new mS,i:new yS,a:new pS,b:new vS,B:new bS,h:new xS,H:new wS,K:new jS,k:new _S,m:new SS,s:new NS,S:new TS,X:new ES,x:new CS,t:new OS,T:new DS},RS=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,kS=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,MS=/^'([^]*?)'?$/,US=/''/g,qS=/\S/,LS=/[a-zA-Z]/;function zS(s,t,r,n){var A,q,P,M,Q,I,D,Y,N,T,$,Z,W,re,Te,ee,H,G;const l=()=>it((n==null?void 0:n.in)||r,NaN),u=H_(),h=(q=(A=n==null?void 0:n.locale)!=null?A:u.locale)!=null?q:W0,g=(T=(N=(I=(Q=n==null?void 0:n.firstWeekContainsDate)!=null?Q:(M=(P=n==null?void 0:n.locale)==null?void 0:P.options)==null?void 0:M.firstWeekContainsDate)!=null?I:u.firstWeekContainsDate)!=null?N:(Y=(D=u.locale)==null?void 0:D.options)==null?void 0:Y.firstWeekContainsDate)!=null?T:1,m=(G=(H=(re=(W=n==null?void 0:n.weekStartsOn)!=null?W:(Z=($=n==null?void 0:n.locale)==null?void 0:$.options)==null?void 0:Z.weekStartsOn)!=null?re:u.weekStartsOn)!=null?H:(ee=(Te=u.locale)==null?void 0:Te.options)==null?void 0:ee.weekStartsOn)!=null?G:0;if(!t)return s?l():ye(r,n==null?void 0:n.in);const y={firstWeekContainsDate:g,weekStartsOn:m,locale:h},p=[new K_(n==null?void 0:n.in,r)],b=t.match(kS).map(X=>{const J=X[0];if(J in od){const le=od[J];return le(X,h.formatLong)}return X}).join("").match(RS),x=[];for(let X of b){!(n!=null&&n.useAdditionalWeekYearTokens)&&ay(X)&&cd(X,t,s),!(n!=null&&n.useAdditionalDayOfYearTokens)&&ty(X)&&cd(X,t,s);const J=X[0],le=AS[J];if(le){const{incompatibleTokens:ie}=le;if(Array.isArray(ie)){const te=x.find(ve=>ie.includes(ve.token)||ve.token===J);if(te)throw new RangeError(`The format string mustn't contain \`${te.fullToken}\` and \`${X}\` at the same time`)}else if(le.incompatibleTokens==="*"&&x.length>0)throw new RangeError(`The format string mustn't contain \`${X}\` and any other token at the same time`);x.push({token:J,fullToken:X});const se=le.run(s,X,h.match,y);if(!se)return l();p.push(se.setter),s=se.rest}else{if(J.match(LS))throw new RangeError("Format string contains an unescaped latin alphabet character `"+J+"`");if(X==="''"?X="'":J==="'"&&(X=PS(X)),s.indexOf(X)===0)s=s.slice(X.length);else return l()}}if(s.length>0&&qS.test(s))return l();const j=p.map(X=>X.priority).sort((X,J)=>J-X).filter((X,J,le)=>le.indexOf(X)===J).map(X=>p.filter(J=>J.priority===X).sort((J,le)=>le.subPriority-J.subPriority)).map(X=>X[0]);let S=ye(r,n==null?void 0:n.in);if(isNaN(+S))return l();const C={};for(const X of j){if(!X.validate(S,y))return l();const J=X.set(S,C,y);Array.isArray(J)?(S=J[0],Object.assign(C,J[1])):S=J}return S}function PS(s){return s.match(MS)[1].replace(US,"'")}function $S(s,t){const r=ye(s,t==null?void 0:t.in);return r.setMinutes(0,0,0),r}function BS(s,t){const r=ye(s,t==null?void 0:t.in);return r.setSeconds(0,0),r}function HS(s,t){const r=ye(s,t==null?void 0:t.in);return r.setMilliseconds(0),r}function IS(s,t){var y;const r=()=>it(t==null?void 0:t.in,NaN),n=(y=t==null?void 0:t.additionalDigits)!=null?y:2,l=GS(s);let u;if(l.date){const p=KS(l.date,n);u=FS(p.restDateString,p.year)}if(!u||isNaN(+u))return r();const h=+u;let g=0,m;if(l.time&&(g=XS(l.time),isNaN(g)))return r();if(l.timezone){if(m=WS(l.timezone),isNaN(m))return r()}else{const p=new Date(h+g),b=ye(0,t==null?void 0:t.in);return b.setFullYear(p.getUTCFullYear(),p.getUTCMonth(),p.getUTCDate()),b.setHours(p.getUTCHours(),p.getUTCMinutes(),p.getUTCSeconds(),p.getUTCMilliseconds()),b}return ye(h+g+m,t==null?void 0:t.in)}const ao={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},YS=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,VS=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,QS=/^([+-])(\d{2})(?::?(\d{2}))?$/;function GS(s){const t={},r=s.split(ao.dateTimeDelimiter);let n;if(r.length>2)return t;if(/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],ao.timeZoneDelimiter.test(t.date)&&(t.date=s.split(ao.timeZoneDelimiter)[0],n=s.substr(t.date.length,s.length))),n){const l=ao.timezone.exec(n);l?(t.time=n.replace(l[1],""),t.timezone=l[1]):t.time=n}return t}function KS(s,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=s.match(r);if(!n)return{year:NaN,restDateString:""};const l=n[1]?parseInt(n[1]):null,u=n[2]?parseInt(n[2]):null;return{year:u===null?l:u*100,restDateString:s.slice((n[1]||n[2]).length)}}function FS(s,t){if(t===null)return new Date(NaN);const r=s.match(YS);if(!r)return new Date(NaN);const n=!!r[4],l=fi(r[1]),u=fi(r[2])-1,h=fi(r[3]),g=fi(r[4]),m=fi(r[5])-1;if(n)return a1(t,g,m)?JS(t,g,m):new Date(NaN);{const y=new Date(0);return!e1(t,u,h)||!t1(t,l)?new Date(NaN):(y.setUTCFullYear(t,u,Math.max(l,h)),y)}}function fi(s){return s?parseInt(s):1}function XS(s){const t=s.match(VS);if(!t)return NaN;const r=Gu(t[1]),n=Gu(t[2]),l=Gu(t[3]);return r1(r,n,l)?r*Ri+n*Ai+l*1e3:NaN}function Gu(s){return s&&parseFloat(s.replace(",","."))||0}function WS(s){if(s==="Z")return 0;const t=s.match(QS);if(!t)return 0;const r=t[1]==="+"?-1:1,n=parseInt(t[2]),l=t[3]&&parseInt(t[3])||0;return s1(n,l)?r*(n*Ri+l*Ai):NaN}function JS(s,t,r){const n=new Date(0);n.setUTCFullYear(s,0,4);const l=n.getUTCDay()||7,u=(t-1)*7+r+1-l;return n.setUTCDate(n.getUTCDate()+u),n}const ZS=[31,null,31,30,31,30,31,31,30,31,30,31];function ly(s){return s%400===0||s%4===0&&s%100!==0}function e1(s,t,r){return t>=0&&t<=11&&r>=1&&r<=(ZS[t]||(ly(s)?29:28))}function t1(s,t){return t>=1&&t<=(ly(s)?366:365)}function a1(s,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function r1(s,t,r){return s===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&s>=0&&s<25}function s1(s,t){return t>=0&&t<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const n1={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};Kv._date.override({_id:"date-fns",formats:function(){return n1},parse:function(s,t){if(s===null||typeof s=="undefined")return null;const r=typeof s;return r==="number"||s instanceof Date?s=ye(s):r==="string"&&(typeof t=="string"?s=zS(s,t,new Date,this.options):s=IS(s,this.options)),V0(s)?s.getTime():null},format:function(s,t){return $_(s,t,this.options)},add:function(s,t,r){switch(r){case"millisecond":return bd(s,t);case"second":return Oj(s,t);case"minute":return Ej(s,t);case"hour":return Sj(s,t);case"day":return yo(s,t);case"week":return Dj(s,t);case"month":return vd(s,t);case"quarter":return Cj(s,t);case"year":return Aj(s,t);default:return s}},diff:function(s,t,r){switch(r){case"millisecond":return xd(s,t);case"second":return Pj(s,t);case"minute":return qj(s,t);case"hour":return Uj(s,t);case"day":return Q0(s,t);case"week":return $j(s,t);case"month":return F0(s,t);case"quarter":return zj(s,t);case"year":return Bj(s,t);default:return 0}},startOf:function(s,t,r){switch(t){case"second":return HS(s);case"minute":return BS(s);case"hour":return $S(s);case"day":return ld(s);case"week":return Da(s);case"isoWeek":return Da(s,{weekStartsOn:+r});case"month":return Ij(s);case"quarter":return Hj(s);case"year":return X0(s);default:return s}},endOf:function(s,t){switch(t){case"second":return Fj(s);case"minute":return Gj(s);case"hour":return Vj(s);case"day":return G0(s);case"week":return Qj(s);case"month":return K0(s);case"quarter":return Kj(s);case"year":return Yj(s);default:return s}}});new cn;const i1=s=>wa({queryKey:["project-deliveries",s],queryFn:()=>_(null,null,function*(){const r=yield new cn().getDeliveryDockets(s);console.log(" Raw deliveries data:",r);const n=r.map(m=>{const y=m["Ready at"];if(!y)return console.warn(" No Ready at date found for delivery:",m),null;try{const[p,b]=y.split(" "),x=p.split("/");let j,S,C;parseInt(x[0])>12?[j,S,C]=x:[S,j,C]=x;const A=`${C}-${S.padStart(2,"0")}-${j.padStart(2,"0")}T${b||"00:00:00"}`,q=new Date(A);return isNaN(q.getTime())?(console.warn(" Invalid date format:",y),null):Xt(Xe({},m),{parsedDate:q,dayKey:q.toISOString().split("T")[0]})}catch(p){return console.warn(" Error parsing date:",y,p),null}}).filter(Boolean);console.log(" Processed deliveries:",n);const l={};n.forEach(m=>{l[m.dayKey]=(l[m.dayKey]||0)+1});const u=Object.keys(l).sort();let h=0;const g=u.map(m=>(h+=l[m],h));return console.log(" Date counts:",l),console.log(" Sorted dates:",u),console.log(" Cumulative data:",g),{deliveries:n,dateCounts:l,sortedDates:u,dailyData:u.map(m=>l[m]),cumulativeData:g,totalDeliveries:n.length}}),enabled:!!s,staleTime:5*60*1e3});ka.register(rn,sn,ud,u0,nn,ln,on,Fv,dd);const l1=({projectName:s})=>{const{data:t,isLoading:r,error:n}=i1(s),{data:l,isLoading:u}=R0(s);if(r||u)return c.jsx(dn,{});if(n)return c.jsx("div",{className:"error-message",children:"Error loading delivery data"});if(!t||!l)return c.jsx("div",{className:"no-data",children:"No delivery data available"});const{sortedDates:h,dailyData:g,cumulativeData:m,totalDeliveries:y}=t,p=l["Deliveries Allowed"]?parseInt(l["Deliveries Allowed"].toString()):0,x=y>=Math.floor(p*.9)&&y<p,j=y>=p&&p>0,S={labels:h,datasets:[{label:"Trips per Day",data:g,borderColor:"#4caf50",backgroundColor:"rgba(76,175,80,0.2)",pointBackgroundColor:"#0af013",pointRadius:6,fill:!0,tension:.3},{label:"Cumulative Trips",data:m,borderColor:"#c1c536",backgroundColor:"rgba(193,197,54,0.2)",pointBackgroundColor:"#ffc107",pointRadius:6,fill:!0,tension:.3},{label:"Delivery Allowances",data:h.map(()=>p),borderColor:"#cb4335",borderWidth:4,borderDash:[5,5],pointRadius:0,fill:!1}]},C={responsive:!0,maintainAspectRatio:!1,animation:{duration:2e3,easing:"easeInOutQuad"},plugins:{title:{display:!0,text:"Daily and Cumulative Trips",font:{size:18,weight:"bold"}},tooltip:{mode:"index",intersect:!1},legend:{labels:{usePointStyle:!0,font:{size:14}}},datalabels:{display:!1}},interaction:{mode:"index",intersect:!1},scales:{x:{type:"time",time:{unit:"day"},title:{display:!0,text:"Date",font:{size:16,weight:"bold"}}},y:{beginAtZero:!0,title:{display:!0,text:"Number of Trips",font:{size:16,weight:"bold"}}}}};return c.jsxs("div",{className:"chart-container",children:[c.jsx("div",{className:"chart-info",children:c.jsxs("div",{className:"chart-stats trips-stats-row",children:[c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"emoji",children:""}),c.jsx("span",{className:"stat-label",children:"Delivery Allowances:"}),c.jsx("span",{className:"stat-value",children:p})]}),c.jsxs("div",{className:`stat-item trips-made-stat${j?" danger":x?" warning":""}`,children:[c.jsx("span",{className:"emoji",children:""}),c.jsx("span",{className:"stat-label",children:"Trips Made:"}),c.jsx("span",{className:"stat-value",children:y}),j&&c.jsx("span",{className:"stat-alert",title:"Exceeded delivery allowance",children:""}),x&&!j&&c.jsx("span",{className:"stat-alert",title:"Close to delivery allowance",children:""})]})]})}),c.jsx("div",{className:"chart-wrapper",children:c.jsx(Xv,{data:S,options:C})})]})},o1=({onMetricsUpdate:s,showDetails:t=!1})=>{const[r,n]=k.useState({loadTime:0,renderTime:0,memoryUsage:0,domSize:0,jsHeapSize:0,timestamp:Date.now()}),[l,u]=k.useState(!1),[h,g]=k.useState(t),m=k.useCallback(()=>{if(performance&&performance.getEntriesByType){const A=performance.getEntriesByType("navigation")[0];if(A)return A.loadEventEnd-A.fetchStart}return performance.now()},[]),y=k.useCallback(()=>{if("memory"in performance){const A=performance.memory;return{used:Math.round(A.usedJSHeapSize/1024/1024),total:Math.round(A.totalJSHeapSize/1024/1024),limit:Math.round(A.jsHeapSizeLimit/1024/1024)}}return{used:0,total:0,limit:0}},[]),p=k.useCallback(()=>document.querySelectorAll("*").length,[]),b=k.useCallback(()=>new Promise(A=>{const q=performance.now();requestAnimationFrame(()=>{requestAnimationFrame(()=>{const P=performance.now();A(P-q)})})}),[]),x=k.useCallback(()=>_(null,null,function*(){u(!0);try{const A=m(),q=yield b(),P=y(),M=p(),Q={loadTime:Math.round(A),renderTime:Math.round(q),memoryUsage:P.used,domSize:M,jsHeapSize:P.total,timestamp:Date.now()};n(Q),s&&s(Q)}catch(A){console.error("Error measuring performance:",A)}finally{u(!1)}}),[m,b,y,p,s]);k.useEffect(()=>{const A=setInterval(()=>{l||x()},3e4);return()=>clearInterval(A)},[x,l]),k.useEffect(()=>{const A=setTimeout(()=>{x()},1e3);return()=>clearTimeout(A)},[x]);const j=(A,q)=>A<=q.good?"good":A<=q.warning?"warning":"poor",S=A=>{switch(A){case"good":return"";case"warning":return"";case"poor":return"";default:return""}},C=A=>{switch(A){case"good":return"performance-good";case"warning":return"performance-warning";case"poor":return"performance-poor";default:return"performance-unknown"}};return c.jsxs("div",{className:"performance-monitor",children:[c.jsxs("div",{className:"monitor-header",children:[c.jsx("h3",{children:" Performance Monitor"}),c.jsxs("div",{className:"monitor-controls",children:[c.jsx("button",{onClick:x,disabled:l,className:"monitor-btn",children:l?" Monitoring...":" Measure Performance"}),c.jsx("button",{onClick:()=>g(!h),className:"toggle-details-btn",children:h?" Hide Details":" Show Details"})]})]}),c.jsxs("div",{className:"performance-metrics",children:[c.jsxs("div",{className:"metric-grid",children:[c.jsxs("div",{className:`metric-item ${C(j(r.loadTime,{good:2e3,warning:5e3}))}`,children:[c.jsx("div",{className:"metric-icon",children:S(j(r.loadTime,{good:2e3,warning:5e3}))}),c.jsxs("div",{className:"metric-content",children:[c.jsx("div",{className:"metric-label",children:"Load Time"}),c.jsxs("div",{className:"metric-value",children:[r.loadTime,"ms"]})]})]}),c.jsxs("div",{className:`metric-item ${C(j(r.renderTime,{good:16,warning:33}))}`,children:[c.jsx("div",{className:"metric-icon",children:S(j(r.renderTime,{good:16,warning:33}))}),c.jsxs("div",{className:"metric-content",children:[c.jsx("div",{className:"metric-label",children:"Render Time"}),c.jsxs("div",{className:"metric-value",children:[r.renderTime,"ms"]})]})]}),c.jsxs("div",{className:`metric-item ${C(j(r.memoryUsage,{good:50,warning:100}))}`,children:[c.jsx("div",{className:"metric-icon",children:S(j(r.memoryUsage,{good:50,warning:100}))}),c.jsxs("div",{className:"metric-content",children:[c.jsx("div",{className:"metric-label",children:"Memory Usage"}),c.jsxs("div",{className:"metric-value",children:[r.memoryUsage,"MB"]})]})]}),c.jsxs("div",{className:`metric-item ${C(j(r.domSize,{good:1e3,warning:3e3}))}`,children:[c.jsx("div",{className:"metric-icon",children:S(j(r.domSize,{good:1e3,warning:3e3}))}),c.jsxs("div",{className:"metric-content",children:[c.jsx("div",{className:"metric-label",children:"DOM Elements"}),c.jsx("div",{className:"metric-value",children:r.domSize})]})]}),c.jsxs("div",{className:`metric-item ${C(j(r.jsHeapSize,{good:100,warning:200}))}`,children:[c.jsx("div",{className:"metric-icon",children:S(j(r.jsHeapSize,{good:100,warning:200}))}),c.jsxs("div",{className:"metric-content",children:[c.jsx("div",{className:"metric-label",children:"JS Heap Size"}),c.jsxs("div",{className:"metric-value",children:[r.jsHeapSize,"MB"]})]})]})]}),h&&c.jsxs("div",{className:"performance-details",children:[c.jsx("h4",{children:"Performance Recommendations"}),c.jsxs("div",{className:"recommendations",children:[r.loadTime>5e3&&c.jsxs("div",{className:"recommendation warning",children:[c.jsx("span",{children:""}),c.jsx("span",{children:"High load time. Consider optimizing bundle size or implementing lazy loading."})]}),r.renderTime>33&&c.jsxs("div",{className:"recommendation warning",children:[c.jsx("span",{children:""}),c.jsx("span",{children:"High render time. Review heavy components or implement React.memo."})]}),r.memoryUsage>100&&c.jsxs("div",{className:"recommendation warning",children:[c.jsx("span",{children:""}),c.jsx("span",{children:"High memory usage. Check for memory leaks or optimize state management."})]}),r.domSize>3e3&&c.jsxs("div",{className:"recommendation warning",children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Large DOM tree. Consider virtualizing lists or reducing component complexity."})]}),r.jsHeapSize>200&&c.jsxs("div",{className:"recommendation warning",children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Large JS heap. Review object allocations and garbage collection."})]}),r.loadTime<=2e3&&r.renderTime<=16&&r.memoryUsage<=50&&c.jsxs("div",{className:"recommendation good",children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Excellent performance! The application is running optimally."})]})]}),c.jsxs("div",{className:"performance-info",children:[c.jsx("h5",{children:"Measurement Details"}),c.jsxs("ul",{children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Load Time:"})," Time from fetch start to load event end"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Render Time:"})," Time for two animation frames (real render measurement)"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Memory Usage:"})," Current JavaScript heap usage"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"DOM Elements:"})," Total number of DOM nodes"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"JS Heap Size:"})," Total allocated JavaScript heap"]})]}),c.jsx("p",{children:c.jsxs("em",{children:["Last updated: ",new Date(r.timestamp).toLocaleTimeString()]})})]})]})]})]})},c1=({allowances:s,isLoading:t=!1})=>{if(t)return c.jsxs("div",{className:"allowances-container",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Loading allowances..."})]});if(!s||s.length===0)return c.jsxs("div",{className:"allowances-container",children:[c.jsx("h2",{id:"project-allowances-section",children:"Project Allowances"}),c.jsx("div",{className:"no-allowances",children:c.jsx("p",{children:"No personnel allowances registered for this project."})})]});const r=s.reduce((m,y)=>{const p=y.Type||"Other",b=y.Category||"General";return m[p]||(m[p]={}),m[p][b]||(m[p][b]=[]),m[p][b].push(y),m},{}),n=(m,y)=>{if(y)switch(y.toLowerCase()){case"drafting":return"";case"tradesman":return"";case"labourers":return"";case"pms":return"";case"vertical access":return""}switch(m.toLowerCase()){case"drafting":return"";case"factory":return"";case"site":return"";case"tradesman":return"";case"labourer":return"";case"pm":return"";case"vertical access":return"";default:return""}},l=(m,y)=>{switch(m.toLowerCase()){case"site":switch(y.toLowerCase()){case"tradesman":return"Tradesman Allowances (days)";case"labourers":return"Labourers Allowances (days)";case"pms":return"PMs Allowances (days)";default:return`${y} Allowances (days)`}case"factory":switch(y.toLowerCase()){case"drafting":return"Drafting Allowances (days)";case"labourers":return"Labourers Allowances (days)";default:return`${y} Allowances (days)`}default:return`${y} Allowances (days)`}},u=m=>m<50?"#4caf50":m<99?"#c1c536":"#cb4335",h=(m,y)=>{if(!y||y===0)return"";const p=m/y*100;return p>=100?"danger":p>=90?"warning":""},g=(m,y)=>!y||y===0?0:m/y*100;return c.jsxs("div",{className:"allowances-container",children:[c.jsx("h2",{id:"project-allowances-section",children:"Project Allowances"}),Object.entries(r).map(([m,y])=>c.jsxs("div",{children:[c.jsxs("h3",{children:[m," Allowances"]}),Object.entries(y).map(([p,b])=>c.jsxs("div",{children:[c.jsx("h4",{children:p}),b.map((x,j)=>{const S=g(Number(x["Days Used"]),Number(x["Days Allowed"])),C=h(Number(x["Days Used"]),Number(x["Days Allowed"]));return c.jsxs("div",{className:`allowance-card ${C}`,children:[c.jsxs("p",{children:[c.jsx("span",{className:"emoji",children:n(m,p)}),c.jsxs("strong",{children:[l(m,p),":     "]}),c.jsx("i",{children:x["Days Allowed"]||"0"})]}),c.jsxs("p",{children:[c.jsx("span",{className:"emoji",children:""}),c.jsx("strong",{children:"Current days used:     "}),c.jsx("i",{children:x["Days Used"]||"0.00"})]}),c.jsx("div",{className:"progress-container",children:c.jsxs("div",{className:"progress-bar",style:{"--progress-width":`${S}%`,"--progress-color":u(S),"--progress-color-light":u(S)==="#4caf50"?"#66bb6a":u(S)==="#c1c536"?"#d4e157":"#ef5350"},children:[S.toFixed(2),"%"]})})]},j)})]},p))]},m))]})};function u1(s,t){const r=`https://www.appsheet.com/start/${s}`,n={EvalType:"BOOLEAN",OperatorName:"Equals",IsAtomic:!0,IsSargable:!0,SourceExpr:`[${t.filterField}] :: ${t.filterValue}`,Children:[{EvalType:"COLUMN",ColIndex:2,ColName:t.filterField,ContextLevel:0,SourceExpr:`[${t.filterField}]`,Children:[],ColumnsReferenced:[2],AncColumnsReferenced:[],TablesReferenced:[],ResultType:"Ref",ResultTypeQualifier:{ReferencedTableName:t.tableName,ReferencedRootTableName:t.tableName,ReferencedType:"Name",ReferencedKeyColumn:"Name",IsAPartOf:!1,RelationshipName:null,InputMode:"Auto"},IsPure:!0,MayBeExpensive:!1,EagerEvalChildren:!0},{EvalType:"CONSTANT",ConstantValue:t.filterValue,SourceExpr:t.filterValue,Children:[],ColumnsReferenced:[],AncColumnsReferenced:[],TablesReferenced:[],ResultType:"Ref",ResultTypeQualifier:{ReferencedTableName:t.tableName,ReferencedRootTableName:t.tableName,ReferencedType:"Name",ReferencedKeyColumn:"Name",IsAPartOf:!1,RelationshipName:null,InputMode:"Auto"},IsPure:!0,MayBeExpensive:!1,EagerEvalChildren:!0}],ColumnsReferenced:[2],AncColumnsReferenced:[],TablesReferenced:[],ResultType:"Yes/No",ResultTypeQualifier:{YesLabel:"",NoLabel:""},IsPure:!0,MayBeExpensive:!1,EagerEvalChildren:!0},l=encodeURIComponent(JSON.stringify(n));return`${r}#control=${encodeURIComponent(t.tableName)}&filter=${l}`}function d1(s){return u1("efcdb2a0-181f-4e43-bc65-6887dc279032",{tableName:"Delivery Dockets",filterField:"Project",filterValue:s})}const h1=()=>{var Y;const[s,t]=k.useState(""),[r,n]=k.useState({sheets:!0,trips:!1}),[l,u]=k.useState(!1),[h,g]=k.useState(!1),{projectParam:m}=k0(),y=k.useRef(!1);Di("CC Project Dashboard"),pd();const{data:p,error:b}=R0(s),{data:x,isLoading:j}=Kw(s),{data:S,isLoading:C}=Qw(s),{data:A,isLoading:q}=Gw(s),P=b;k.useEffect(()=>{m&&!y.current&&(t(m),y.current=!0)},[m]);const M=N=>{t(N.Name)},Q=N=>{n(T=>Xt(Xe({},T),{[N]:!T[N]}))},I=N=>N<50?"#4caf50":N<99?"#c1c536":"#cb4335",D=(N,T)=>{if(!N||!T)return"";const $=Number(N),Z=Number(T),W=$/Z*100;return W>=100?"danger":W>=90?"warning":""};return P?c.jsxs("div",{className:"container",children:[c.jsx("h1",{children:"Error"}),c.jsxs("p",{children:["Error loading project data: ",b==null?void 0:b.message]}),c.jsx("button",{onClick:()=>window.location.reload(),children:"Retry"})]}):c.jsxs("div",{className:"container accordion",id:"accordion",children:[c.jsx("h1",{children:"PROJECTS SUMMARY"}),c.jsx(Xw,{onProjectSelect:M}),p?c.jsxs("div",{className:"project-info",children:[c.jsxs("div",{className:"project-header",children:[c.jsx("h2",{className:"project-title",children:p.Name||"N/A"}),c.jsx("span",{className:`status-badge ${((Y=p.Status)==null?void 0:Y.toLowerCase())||"unknown"}`,children:p.Status||"N/A"})]}),c.jsxs("div",{className:"project-details-grid",children:[c.jsxs("div",{className:"detail-section",children:[c.jsx("h3",{children:" Project Details"}),c.jsxs("div",{className:"detail-item",children:[c.jsx("span",{className:"detail-label",children:"Project Number:"}),c.jsx("span",{className:"detail-value",children:p.Number||""})]}),c.jsxs("div",{className:"detail-item",children:[c.jsx("span",{className:"detail-label",children:"CC/Subcontractor:"}),c.jsx("span",{className:"detail-value",children:p["CC/Subcontractor"]||""})]})]}),c.jsxs("div",{className:"detail-section",children:[c.jsx("h3",{children:" Timeline"}),c.jsxs("div",{className:"detail-item",children:[c.jsx("span",{className:"detail-label",children:"Start Date:"}),c.jsx("span",{className:"detail-value",children:Yu(p["Start Date"])})]}),c.jsxs("div",{className:"detail-item",children:[c.jsx("span",{className:"detail-label",children:"Expected Completion:"}),c.jsx("span",{className:"detail-value",children:Yu(p["Expected Completion Date"])})]}),p["Finalization Date"]&&c.jsxs("div",{className:"detail-item",children:[c.jsx("span",{className:"detail-label",children:"Finalization Date:"}),c.jsx("span",{className:"detail-value",children:Yu(p["Finalization Date"])})]})]}),c.jsxs("div",{className:"detail-section",children:[c.jsx("h3",{children:" Team"}),c.jsxs("div",{className:"detail-item",children:[c.jsx("span",{className:"detail-label",children:"Project Manager:"}),c.jsx("span",{className:"detail-value",children:p.PM||"N/A"})]}),c.jsxs("div",{className:"detail-item",children:[c.jsx("span",{className:"detail-label",children:"Site Supervisor:"}),c.jsx("span",{className:"detail-value",children:p["Site Supervisor"]||"N/A"})]}),c.jsxs("div",{className:"detail-item",children:[c.jsx("span",{className:"detail-label",children:"EBA/Non-EBA:"}),c.jsx("span",{className:"detail-value",children:p["EBA/Non-EBA"]||"N/A"})]})]}),p.Contact&&c.jsxs("div",{className:"detail-section contact-section",children:[c.jsx("h3",{children:" Contact Information"}),c.jsx("div",{className:"contact-toggle",children:c.jsx("button",{className:"contact-toggle-btn",onClick:()=>g(!h),children:h?" Hide Contact":" Show Contact"})}),h&&c.jsx("div",{className:"contact-content",children:c.jsx("pre",{className:"contact-text",children:p.Contact})})]})]}),c.jsx("div",{className:"project-footer",children:c.jsxs("span",{className:"last-updated",children:["Last updated: ",new Date().toLocaleString()]})})]}):s?c.jsx("div",{className:"project-info loading",children:c.jsxs("div",{className:"loading-placeholder",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:"Loading project data..."})]})}):c.jsx("div",{className:"project-info empty",children:c.jsxs("div",{className:"empty-state",children:[c.jsx("span",{className:"empty-icon",children:""}),c.jsx("h3",{children:"Select a Project"}),c.jsx("p",{children:"Choose a project from the dropdown above to view its details and statistics."})]})}),c.jsx("h2",{id:"cutting-information",children:"Cutting Information"}),p?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"cutting-info-grid",children:[c.jsxs("div",{className:"cutting-item",children:[c.jsx("span",{className:"cutting-icon",children:""}),c.jsx("span",{className:"cutting-label",children:"Expected Square Meters:"}),c.jsx("span",{className:"cutting-value",children:p["Expected Square Meters"]||"0"})]}),c.jsxs("div",{className:`cutting-item ${D(String(p["Real Cut Square Meters"]||""),String(p["Expected Square Meters"]||""))}`,children:[c.jsx("span",{className:"cutting-icon",children:""}),c.jsx("span",{className:"cutting-label",children:"Real Cut Square Meters:"}),c.jsx("span",{className:"cutting-value",children:p["Real Cut Square Meters"]||"0.00"})]}),p["Allowed SQM to buy"]&&c.jsxs("div",{className:"cutting-item",children:[c.jsx("span",{className:"cutting-icon",children:""}),c.jsx("span",{className:"cutting-label",children:"Allowed SQM to Buy:"}),c.jsx("span",{className:"cutting-value",children:p["Allowed SQM to buy"]})]})]}),c.jsx("p",{className:"cutting-note",children:c.jsx("em",{children:'Note: The value of "Real Cut Square Meters" includes all square meters in the system, including panels that have not yet been cut or orders that are in "Ready to Cut" status.'})}),c.jsx("div",{className:"progress-container",children:c.jsx("div",{className:"progress-bar",style:{"--progress-width":`${p["Real Cut Square Meters"]&&p["Expected Square Meters"]?Number(p["Real Cut Square Meters"])/Number(p["Expected Square Meters"])*100:0}%`,backgroundColor:I(p["Real Cut Square Meters"]&&p["Expected Square Meters"]?Number(p["Real Cut Square Meters"])/Number(p["Expected Square Meters"])*100:0)},children:p["Real Cut Square Meters"]&&p["Expected Square Meters"]?`${(Number(p["Real Cut Square Meters"])/Number(p["Expected Square Meters"])*100).toFixed(2)}%`:"0%"})})]}):c.jsx("div",{className:"cutting-info-placeholder",children:c.jsxs("div",{className:"placeholder-content",children:[c.jsx("span",{className:"placeholder-icon",children:""}),c.jsx("p",{children:"Cutting information will appear here when a project is selected."})]})}),c.jsx(Iu,{isLoading:q,sectionName:"Sheets Overview",children:c.jsxs("div",{className:`accordion-item ${r.sheets?"active":""}`,children:[c.jsx("div",{className:"accordion-header",id:"sheets",onClick:()=>Q("sheets"),children:c.jsxs("h2",{children:[c.jsx("span",{className:"accordion-indicator",children:""}),"Sheets Overview",c.jsx("span",{className:"accordion-indicator",children:" "})]})}),c.jsx("div",{className:"accordion-body",children:c.jsx(wj,{sheets:A||[],isLoading:q})})]})}),c.jsx(Iu,{isLoading:j,sectionName:"Project Allowances",children:c.jsx(c1,{allowances:x||[],isLoading:j})}),c.jsx(Iu,{isLoading:C,sectionName:"Material Tables",children:c.jsx(Jw,{materials:S||{summary:[],details:[]},isLoading:C})}),c.jsx("h2",{id:"trips-over-time",children:"Trips Over Time"}),c.jsxs("p",{children:[c.jsx("em",{children:'These data are collected from the "Delivery Dockets" performed by the manufacturing team. You can view the detailed records by '}),c.jsx("a",{href:s?d1(s):"#",target:"_blank",children:"clicking here"}),"."]}),c.jsxs("div",{className:"chart-container",children:[c.jsx("h3",{children:"Daily and Cumulative Trips"}),c.jsx("p",{id:"deliveryDates",style:{display:"none"}}),c.jsx(l1,{projectName:s})]}),l&&c.jsxs(c.Fragment,{children:[c.jsx(o1,{onMetricsUpdate:N=>{console.log("Performance metrics:",N)},showDetails:!0}),c.jsx("div",{className:"debug-info",children:c.jsxs("span",{className:"last-update",children:["Last updated: ",new Date().toLocaleString()]})})]}),c.jsx("div",{style:{marginTop:"20px",textAlign:"center"},children:c.jsx("button",{onClick:()=>u(!l),style:{background:"transparent",border:"1px solid #ccc",padding:"5px 10px",fontSize:"12px",color:"#666"},children:l?" Hide Debug Tools":" Show Debug Tools"})})]})},oy=s=>window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?`/${s}`:`/CC_Flow_summary_report/${s}`,Sd=()=>oy("CC-logo-NEW_1.webp"),co=()=>oy("favicon.png"),f1=()=>{const[s]=Zv(),[t,r]=k.useState(""),[n,l]=k.useState(!1),[u,h]=k.useState(""),[g,m]=k.useState(""),[y,p]=k.useState(null),[b,x]=k.useState(null),[j,S]=k.useState(!1),[C,A]=k.useState(12),q=new cn;Di("CC Delivery"),k.useEffect(()=>{const I=()=>{window.innerWidth<=480||window.innerWidth<=768,A(12)};return I(),window.addEventListener("resize",I),()=>window.removeEventListener("resize",I)},[]);const P=I=>/^[A-Z]{2,3}-\d+$/.test(I);k.useEffect(()=>{const I=s.get("Order_ID")||s.get("order_ID");I&&(r(I),x(P(I)),h(""),m(""),p(null))},[s]),k.useEffect(()=>{x(t?P(t):null)},[t]);const M=I=>_(null,null,function*(){if(I.preventDefault(),!t.trim()){h("Please enter a valid Order ID"),m("error");return}if(!b){h("Order ID format must be XX-00 (e.g., FL-1, AB-123)"),m("error");return}l(!0),h(""),m(""),p(null);try{const D=yield q.markOrderAsDelivered(t.trim());D&&D.length>0?(p(D[0]),h(""),m("success"),r("")):(h("Error marking order as delivered"),m("error"))}catch(D){console.error("Error marking order as delivered:",D),h("Error processing request. Please try again."),m("error")}finally{l(!1)}}),Q=I=>{const D=I.target.value.toUpperCase();r(D),u&&(h(""),m("")),y&&p(null)};return c.jsx("div",{className:"order-delivery-container",children:c.jsxs("div",{className:"order-delivery-card",children:[c.jsx("div",{className:"watermark-pattern",children:c.jsx("div",{className:"watermark-grid",children:Array.from({length:C},(I,D)=>c.jsx("img",{src:Sd(),alt:"CC Logo Watermark",className:"watermark",style:{"--i":D}},D))})}),c.jsxs("div",{className:"order-delivery-header",children:[c.jsx("h1",{children:"Mark Order as Delivered"}),c.jsx("p",{children:"Enter the Order ID to mark it as delivered"})]}),c.jsxs("form",{onSubmit:M,className:"order-delivery-form",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"orderId",children:"Order ID:"}),c.jsxs("div",{className:"input-container",children:[c.jsx("input",{type:"text",id:"orderId",value:t,onChange:Q,placeholder:"Enter Order ID (e.g., FL-1)",className:`form-input ${b===!1?"invalid":b===!0?"valid":""}`,disabled:n,required:!0,"aria-describedby":"orderId-help",style:{textTransform:"uppercase"},onKeyDown:I=>{if(I.key==="Enter"&&!n&&b){I.preventDefault();const D=I.currentTarget.form;if(D){const Y=new Event("submit",{bubbles:!0,cancelable:!0});D.dispatchEvent(Y)}}}}),b===!0&&c.jsx("span",{className:"validation-icon valid",children:""}),b===!1&&c.jsx("span",{className:"validation-icon invalid",children:""})]}),c.jsx("div",{id:"orderId-help",className:"help-text",children:"Format: XX-00 (e.g., FL-1, AB-123)"})]}),c.jsx("button",{type:"submit",className:`submit-button ${n?"loading":""}`,disabled:n||b===!1,"aria-label":"Mark order as delivered",children:n?c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"spinner"}),"Processing..."]}):c.jsxs(c.Fragment,{children:[c.jsx("img",{src:co(),alt:"CC Favicon",className:"button-favicon"}),"Mark as Delivered",c.jsx("img",{src:co(),alt:"CC Favicon",className:"button-favicon"})]})})]}),u&&!y&&c.jsx("div",{className:`message ${g}`,role:"alert",children:u}),y&&g==="success"&&c.jsxs("div",{className:"order-details-card",children:[c.jsxs("div",{className:"order-details-header",children:[c.jsx("span",{className:"success-icon",children:""}),c.jsx("h3",{children:"Order Successfully Delivered"})]}),c.jsxs("div",{className:"order-details-content",children:[c.jsxs("div",{className:"detail-row",children:[c.jsx("span",{className:"detail-label",children:"Order ID:"}),c.jsx("span",{className:"detail-value",children:y["Order ID"]})]}),c.jsxs("div",{className:"detail-row",children:[c.jsx("span",{className:"detail-label",children:"Project:"}),c.jsx("span",{className:"detail-value",children:y.Project})]}),c.jsxs("div",{className:"detail-row",children:[c.jsx("span",{className:"detail-label",children:"Responsible:"}),c.jsx("span",{className:"detail-value",children:y.Responsable})]}),c.jsxs("div",{className:"detail-row",children:[c.jsx("span",{className:"detail-label",children:"Color:"}),c.jsx("span",{className:"detail-value",children:y.Colour})]}),c.jsxs("div",{className:"detail-row",children:[c.jsx("span",{className:"detail-label",children:"Square Meters:"}),c.jsxs("span",{className:"detail-value",children:[y["Meters Square"]," m"]})]}),c.jsxs("div",{className:"detail-row",children:[c.jsx("span",{className:"detail-label",children:"Delivery Date:"}),c.jsx("span",{className:"detail-value",children:new Date().toLocaleDateString()})]})]})]}),c.jsxs("div",{className:"order-delivery-info",children:[c.jsxs("button",{className:"info-toggle-button",onClick:()=>S(!j),"aria-expanded":j,"aria-controls":"info-content",children:[c.jsxs("div",{className:"info-toggle-left",children:[c.jsx("div",{className:"info-icon",children:""}),c.jsx("span",{className:"info-toggle-text",children:"Help & Information"})]}),c.jsx("span",{className:`info-toggle-icon ${j?"open":""}`,children:c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:c.jsx("path",{d:"M6 9L12 15L18 9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),c.jsx("div",{id:"info-content",className:`info-content ${j?"show":""}`,"aria-hidden":!j,children:c.jsxs("div",{className:"info-content-inner",children:[c.jsxs("div",{className:"info-section",children:[c.jsx("h4",{className:"info-section-title",children:"How to use"}),c.jsxs("ul",{className:"info-list",children:[c.jsx("li",{children:"Enter the Order ID in the field above"}),c.jsx("li",{children:"Format must be XX-00 (e.g., FL-1, AB-123)"}),c.jsx("li",{children:'Click "Mark as Delivered" to confirm'})]})]}),c.jsxs("div",{className:"info-section",children:[c.jsx("h4",{className:"info-section-title",children:"Important notes"}),c.jsxs("ul",{className:"info-list",children:[c.jsx("li",{children:"Once confirmed, the order cannot be undone"}),c.jsx("li",{children:"Delivery date will be automatically recorded"})]})]})]})})]})]})})},en=({children:s,className:t="",delay:r=0,duration:n=300,direction:l="fade",stagger:u=0,index:h=0})=>{const g=()=>`transition-all ease-out ${{up:"opacity-0 animate-slide-up",down:"opacity-0 animate-slide-down",left:"opacity-0 animate-slide-left",right:"opacity-0 animate-slide-right",fade:"opacity-0 animate-fade-in",scale:"opacity-0 animate-scale-in"}[l]}`,m=()=>({animationDelay:`${r+u*h}ms`,animationDuration:`${n}ms`,animationFillMode:"forwards"});return c.jsx("div",{className:`${g()} ${t}`,style:Xt(Xe({},m()),{contain:"layout style paint"}),children:s})},m1=({size:s="md",color:t="blue",text:r})=>{const n={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"},l={blue:"text-blue-600",gray:"text-gray-600",green:"text-green-600",red:"text-red-600"};return c.jsxs("div",{className:"flex flex-col items-center justify-center space-y-3",children:[c.jsx("div",{className:`${n[s]} ${l[t]} animate-spin`,children:c.jsxs("svg",{className:"w-full h-full",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),r&&c.jsx("p",{className:`text-sm ${l[t]} animate-pulse`,children:r})]})},cy=({children:s,className:t="",scale:r=!0,glow:n=!1,color:l="blue"})=>{const u=r?"hover:scale-105":"",h=n?`hover:shadow-lg hover:shadow-${l}-200`:"hover:shadow-md";return c.jsx("div",{className:`transition-all duration-200 ease-in-out ${u} ${h} ${t}`,children:s})},g1=({children:s,className:t=""})=>c.jsx("div",{className:`animate-page-enter ${t}`,children:s}),y1=[{id:"analytics",label:"Analytics",icon:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})},{id:"cut-process",label:"Cut Process",icon:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.121 14.121L19 19m-7-7l7-7m-7 7l-2.879 2.879M12 12L9.121 9.121m0 5.758a3 3 0 10-4.243-4.243 3 3 0 004.243 4.243zm5.758-9.758a3 3 0 10-4.243-4.243 3 3 0 004.243 4.243z"})})},{id:"manufacturing",label:"Manufacturing",icon:c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2zm5-18v2M7 7h2v5a1 1 0 01-1 1H7V7z"})})}],p1=({currentView:s,onViewChange:t,isOpen:r,onToggle:n,showHintAnimation:l=!1})=>c.jsxs(c.Fragment,{children:[r&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:n}),c.jsx("div",{className:`
        fixed inset-y-0 left-0 z-50 bg-white shadow-lg transform transition-all duration-300 ease-in-out
        ${r?"w-64":"w-16"}
        md:relative md:z-50
      `,children:c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-400",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:c.jsx("img",{src:co(),alt:"CC Logo",className:"w-8 h-8"})}),r&&c.jsx("span",{className:"text-xl font-bold text-gray-900 whitespace-nowrap",children:"Cladding Creations"})]}),c.jsx("button",{onClick:n,className:`p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200 ${l?"animate-sidebar-hint animate-sidebar-wiggle animate-sidebar-glow":""}`,title:r?"Collapse sidebar":"Expand sidebar",children:c.jsx("svg",{className:`w-5 h-5 text-white transition-transform duration-200 ${r?"rotate-180":"rotate-0"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),c.jsx("nav",{className:"flex-1 p-4 space-y-2",children:y1.map((u,h)=>c.jsx(en,{direction:"left",delay:h*100,className:"w-full",children:c.jsx(cy,{scale:!0,glow:!0,color:"blue",children:c.jsxs("button",{onClick:()=>t(u.id),className:`
                      w-full flex items-center rounded-sm text-left transition-all duration-200 group micro-bounce relative z-10
                      ${r?"px-4 py-3 space-x-3":"px-3 py-3 justify-center"}
                      ${s===u.id?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"}
                    `,title:r?void 0:u.label,children:[c.jsx("div",{className:"flex-shrink-0",children:u.icon}),r&&c.jsx("span",{className:"font-medium whitespace-nowrap",children:u.label})]})})},u.id))}),c.jsx("div",{className:"p-8 border-t border-gray-600",children:c.jsx("div",{className:`flex items-center text-sm text-gray-600 ${r?"space-x-3":"justify-center"}`,children:r&&c.jsx("img",{src:Sd(),alt:"CC Logo",className:"w-4/5"})})})]})})]}),v1=({dateRange:s,onDateRangeChange:t,onQuickRangeChange:r})=>{const[n,l]=k.useState("30d"),[u,h]=k.useState({start:s.startDate,end:s.endDate});k.useEffect(()=>{h({start:s.startDate,end:s.endDate})},[s]);const g=[{value:"today",label:"Today"},{value:"thisWeek",label:"This week"},{value:"7d",label:"Last 7 days"},{value:"30d",label:"Last 30 days"},{value:"90d",label:"Last 90 days"},{value:"1y",label:"Last year"},{value:"custom",label:"Custom range"}],m=x=>{l(x),x!=="custom"&&r(x)},y=(x,j)=>{const S=Xt(Xe({},u),{[x]:j});h(S),n==="custom"&&t({startDate:S.start,endDate:S.end})},b=((x,j)=>{const S=new Date(x+"T00:00:00"),C=new Date(j+"T00:00:00"),A=Math.ceil((C.getTime()-S.getTime())/(1e3*60*60*24))+1,q=S.getFullYear(),P=C.getFullYear(),M=q!==P,Q=S.toLocaleDateString("en-AU",{day:"numeric",month:"short",year:M?"numeric":void 0}),I=C.toLocaleDateString("en-AU",{day:"numeric",month:"short",year:"numeric"});return{formatted:`${Q} - ${I}`,days:A}})(s.startDate,s.endDate);return c.jsxs("div",{className:"relative",children:[c.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[c.jsxs("div",{className:"flex items-center space-x-2 bg-gradient-to-r from-purple-500 to-indigo-600 text-white px-4 py-2 rounded-lg shadow-lg",children:[c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),c.jsx("span",{className:"font-bold text-sm",children:"DATE RANGE CONTROL"})]}),c.jsx("div",{className:"h-px bg-gradient-to-r from-purple-300 to-transparent flex-1"})]}),c.jsxs("div",{className:"flex items-center space-x-6",children:[c.jsxs("div",{className:"flex items-center space-x-4 bg-gradient-to-r from-emerald-50 via-green-50 to-teal-50 border-3 border-emerald-300 rounded-2xl px-6 py-4 shadow-xl",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-emerald-500 rounded-full shadow-lg",children:c.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),c.jsx("span",{className:"text-sm font-bold text-emerald-800 uppercase tracking-wide",children:"Active Range:"})]}),c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"text-lg text-emerald-900 font-bold bg-white px-4 py-2 rounded-lg shadow-md border-2 border-emerald-200",children:b.formatted}),c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx("div",{className:"w-2 h-2 bg-emerald-400 rounded-full"}),c.jsx("div",{className:"w-4 h-0.5 bg-emerald-400"}),c.jsx("div",{className:"w-2 h-2 bg-emerald-400 rounded-full"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs("div",{className:"text-sm text-emerald-700 bg-emerald-200 px-4 py-2 rounded-full font-bold shadow-md border border-emerald-300",children:[b.days," ",b.days===1?"day":"days"]}),c.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"})]})]})]}),c.jsx("div",{className:"w-16 h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent"}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("div",{className:"flex items-center space-x-3 bg-gradient-to-r from-indigo-50 to-blue-50 border-2 border-indigo-200 rounded-xl px-4 py-3 shadow-lg",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("svg",{className:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),c.jsx("label",{className:"text-sm font-bold text-indigo-800",children:"Select Period:"})]}),c.jsx("select",{value:n,onChange:x=>m(x.target.value),className:"px-4 py-2 text-sm font-semibold border-2 border-indigo-300 rounded-lg focus:ring-4 focus:ring-indigo-200 focus:border-indigo-500 transition-all duration-300 bg-white shadow-md hover:shadow-lg hover:border-indigo-400 min-w-[140px]",children:g.map(x=>c.jsx("option",{value:x.value,children:x.label},x.value))}),c.jsx("svg",{className:"w-4 h-4 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),n==="custom"&&c.jsxs("div",{className:"flex items-center space-x-3 bg-gradient-to-r from-amber-50 to-orange-50 border-2 border-amber-200 rounded-xl px-4 py-3 shadow-lg",children:[c.jsx("svg",{className:"w-5 h-5 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsxs("div",{className:"flex flex-col",children:[c.jsx("label",{className:"text-xs font-semibold text-amber-700 mb-1",children:"From"}),c.jsx("input",{type:"date",value:u.start,onChange:x=>y("start",x.target.value),className:"px-3 py-2 text-sm font-semibold border-2 border-amber-300 rounded-lg focus:ring-4 focus:ring-amber-200 focus:border-amber-500 transition-all duration-300 bg-white shadow-md hover:shadow-lg hover:border-amber-400"})]}),c.jsx("div",{className:"flex items-center",children:c.jsx("svg",{className:"w-4 h-4 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("label",{className:"text-xs font-semibold text-amber-700 mb-1",children:"To"}),c.jsx("input",{type:"date",value:u.end,onChange:x=>y("end",x.target.value),className:"px-3 py-2 text-sm font-semibold border-2 border-amber-300 rounded-lg focus:ring-4 focus:ring-amber-200 focus:border-amber-500 transition-all duration-300 bg-white shadow-md hover:shadow-lg hover:border-amber-400"})]})]})]})]})]})]})},b1=({dateRange:s,onDateRangeChange:t,onQuickRangeChange:r,onExportCSV:n,canExport:l=!1})=>c.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 px-8 py-6 min-h-[80px] flex items-center",children:c.jsxs("div",{className:"flex items-center justify-between w-full",children:[c.jsx("div",{className:"w-15"}),c.jsx("div",{className:"flex items-center",children:c.jsxs("button",{onClick:n,disabled:!l,className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors duration-200 text-sm font-medium ${l?"bg-blue-600 hover:bg-blue-700 text-white cursor-pointer":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,title:l?"Export dashboard data":"No data available for export",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),c.jsx("span",{children:"Export Data"})]})}),c.jsx("div",{className:"flex-1 flex justify-center",children:c.jsx("h2",{className:"text-xl font-bold text-gray-900 mt-[10px]!",children:"CC Analytics"})}),c.jsxs("div",{className:"flex items-center space-x-8 min-w-0 flex-shrink-0",children:[c.jsx(v1,{dateRange:s,onDateRangeChange:t,onQuickRangeChange:r}),c.jsx("img",{src:co(),alt:"CC Logo",className:"w-10 h-10 flex-shrink-0"})]})]})}),Nt=({children:s,className:t="",padding:r="md",hover:n=!1})=>{const l={sm:"p-4",md:"p-6",lg:"p-8"};return c.jsx("div",{className:`
      bg-white rounded-xl shadow-sm border border-gray-200
      ${l[r]}
      ${n?"hover:shadow-md transition-shadow duration-200":""}
      ${t}
    `,children:s})},x1=({title:s,value:t,change:r,icon:n,trend:l="stable",className:u=""})=>{const h=m=>{switch(m){case"up":return"text-green-600";case"down":return"text-red-600";default:return"text-gray-600"}},g=m=>{switch(m){case"increase":return"text-green-600 bg-green-50";case"decrease":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}};return c.jsx(cy,{scale:!0,glow:!0,color:"blue",children:c.jsx(Nt,{className:`${u} hover-lift`,children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:s}),c.jsx("p",{className:"text-3xl font-bold text-gray-900",children:t}),r&&c.jsxs("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium mt-2 ${g(r.type)}`,children:[c.jsx("span",{className:"mr-1",children:r.type==="increase"?"":r.type==="decrease"?"":""}),Math.abs(r.value),"%"]})]}),n&&c.jsx("div",{className:`rounded-lg ${h(l)}`,children:n})]})})})},Nd=({data:s,loading:t=!1})=>{if(t){const l=(s.totalSqmCut!==void 0?1:0)+(s.totalSqmManufactured!==void 0?1:0)+(s.projects!==void 0?1:0)+(s.responsibles!==void 0?1:0)+1,u=()=>l===1?"grid grid-cols-1 gap-6 justify-center":l===2?"grid grid-cols-1 md:grid-cols-2 gap-6 justify-center":l===3?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 justify-center":"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 justify-center";return c.jsx("div",{className:u(),children:[...Array(l)].map((h,g)=>c.jsx("div",{className:"animate-pulse",children:c.jsx("div",{className:"bg-gray-200 rounded-xl h-32"})},g))})}const r=[];s.totalSqmCut!==void 0&&r.push({title:"Total SQM Cut",value:`${s.totalSqmCut.toLocaleString()} m`,change:{value:0,type:"neutral"},trend:"stable",icon:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.121 14.121L19 19m-7-7l7-7m-7 7l-2.879 2.879M12 12L9.121 9.121m0 5.758a3 3 0 10-4.243-4.243 3 3 0 004.243 4.243zm8.879-8.879a3 3 0 10-4.243-4.243 3 3 0 004.243 4.243z"})})}),s.totalSqmManufactured!==void 0&&r.push({title:"Total SQM Manufactured",value:`${s.totalSqmManufactured.toLocaleString()} m`,change:{value:0,type:"neutral"},trend:"stable",icon:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2zm5-18v2M7 7h2v5a1 1 0 01-1 1H7V7z"})})}),s.projects!==void 0&&r.push({title:"Projects",value:s.projects,change:{value:0,type:"neutral"},trend:"stable",icon:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),s.responsibles!==void 0&&r.push({title:"Responsibles",value:s.responsibles,change:{value:0,type:"neutral"},trend:"stable",icon:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),r.push({title:"Total Panels",value:s.totalPanels.toLocaleString(),change:{value:0,type:"neutral"},trend:"stable",icon:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})});const n=()=>{const l=r.length;return l===1?"grid grid-cols-1 gap-6 justify-center":l===2?"grid grid-cols-1 md:grid-cols-2 gap-6 justify-center":l===3?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 justify-center":"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 justify-center"};return c.jsx("div",{className:n(),children:r.map((l,u)=>c.jsx(en,{direction:"up",delay:u*100,className:"w-full",children:c.jsx(x1,{title:l.title,value:l.value,change:l.change,trend:l.trend,icon:l.icon})},u))})},w1="Australia/Brisbane",uy=()=>{const s=new Date;return new Date(s.toLocaleString("en-US",{timeZone:w1}))},uo=s=>{const t=[7,9,11,14],r=[9,12,14],n=[14];return s===1||s===2||s===3||s===5?t:s===4?r:s===6?n:[]},dy=s=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][s],po=()=>{const s=uy(),t=s.getDay(),r=s.getHours(),n=s.getMinutes(),l=r+n/60,h=uo(t).find(b=>b>l);if(h)return`Today at ${ho(h)} (Brisbane)`;const g=(t+1)%7,y=uo(g)[0];return`${dy(g)} at ${ho(y)} (Brisbane)`},Td=()=>{const s=uy(),t=s.getDay(),r=s.getHours(),n=s.getMinutes(),l=r+n/60,h=[...uo(t)].reverse().find(b=>b<l);if(h)return`Today at ${ho(h)} (Brisbane)`;const g=(t-1+7)%7,m=uo(g),y=m[m.length-1];return`${dy(g)} at ${ho(y)} (Brisbane)`},ho=s=>{const t=Math.floor(s),r=Math.round(s%1*60),n=t>=12?"PM":"AM";return`${t>12?t-12:t===0?12:t}:${r.toString().padStart(2,"0")} ${n}`};ka.register(rn,sn,an,u0,ud,nn,ln,on,dd);const j1=({data:s,title:t,loading:r=!1})=>{const n=k.useRef(null),l=k.useRef(null);if(k.useEffect(()=>{if(!n.current||r||!s||s.length===0)return;l.current&&l.current.destroy();const u=s.length>0?s.reduce((p,b)=>p+b.cut,0)/s.length:0,h=new Array(s.length).fill(u),g=s.map(p=>p.cut>=u?"rgb(34, 197, 94)":"rgb(239, 68, 68)"),m=s.length>0?s.reduce((p,b)=>b.cut+b.manufactured>p.cut+p.manufactured?b:p):{date:""},y=n.current.getContext("2d");if(y)return l.current=new ka(y,{type:"bar",data:{labels:s.map(p=>{const[b,x,j]=p.date.split("-").map(Number);return new Date(b,x-1,j).toLocaleDateString("en-AU",{month:"short",day:"numeric"})}),datasets:[{label:"SQM Cut",data:s.map(p=>p.cut),backgroundColor:"rgba(59, 130, 246, 0.5)",borderColor:"rgb(59, 130, 246)",borderWidth:1,order:1,datalabels:{display:!1}},{label:"SQM Manufactured",data:s.map(p=>p.manufactured),backgroundColor:"rgba(34, 197, 94, 0.5)",borderColor:"rgb(34, 197, 94)",borderWidth:1,order:1,datalabels:{display:!1}},{label:"Average Cut",data:h,type:"line",borderColor:"rgb(251, 191, 36)",backgroundColor:"rgba(251, 191, 36, 0.1)",borderWidth:2,fill:!1,tension:.1,pointRadius:4,pointHoverRadius:6,pointBackgroundColor:g,pointBorderColor:g,pointBorderWidth:2,order:0,datalabels:{display:!1}}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20}},title:{display:!0,text:t,font:{size:25,weight:"bold"}},tooltip:{mode:"index",intersect:!1,callbacks:{afterTitle:p=>{const b=p[0].dataIndex;return s[b].date===m.date?[" Peak Production Day"]:[]}}}},scales:{x:{display:!0,title:{display:!0,text:"Date"},grid:{display:!1}},y:{display:!0,title:{display:!0,text:"SQM (m)"},beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.1)"}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}}),()=>{l.current&&l.current.destroy()}},[s,t,r]),r)return c.jsx(Nt,{children:c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),c.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})});if(!s||s.length===0){const u=po();return c.jsx(Nt,{children:c.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Data Available Yet"}),c.jsx("p",{className:"text-sm text-center mb-3",children:"No productivity data available for the selected date range."}),c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-center max-w-sm",children:c.jsxs("p",{className:"text-xs text-blue-500 font-medium italic mb-1",children:["Next sync: ",u]})})]})})}return c.jsx(en,{direction:"fade",delay:200,children:c.jsxs(Nt,{className:"hover-lift",children:[c.jsx("div",{className:"relative h-120 animate-chart-fade-in",children:c.jsx("canvas",{ref:n})}),c.jsx("div",{className:"mt-4 p-3 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg border border-yellow-200 animate-fade-in",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"text-yellow-600",children:""}),c.jsxs("span",{className:"text-sm font-bold text-gray-700",children:["Peak Production Day: ",(()=>{if(s.length===0)return"No data available";const h=s.reduce((b,x)=>x.cut+x.manufactured>b.cut+b.manufactured?x:b).date,[g,m,y]=h.split("-").map(Number);return new Date(g,m-1,y).toLocaleDateString("en-AU",{weekday:"long",month:"long",day:"numeric"})})()]})]})})]})})},Zg=({children:s,onClick:t,variant:r="primary",size:n="md",disabled:l=!1,loading:u=!1,className:h=""})=>{const g="inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2",m={primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 disabled:bg-blue-300",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500 disabled:bg-gray-300",outline:"border border-gray-300 text-gray-700 bg-white hover:bg-gray-50 focus:ring-blue-500 disabled:bg-gray-50 disabled:text-gray-400",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-gray-500 disabled:text-gray-400"},y={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return c.jsxs("button",{onClick:t,disabled:l||u,className:`
        ${g}
        ${m[r]}
        ${y[n]}
        ${h}
      `,children:[u&&c.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s]})};class _1{constructor(t={}){ae(this,"memoryCache",new Map);ae(this,"defaultTTL");ae(this,"maxSize");this.defaultTTL=t.ttl||5*60*1e3,this.maxSize=t.maxSize||100}generateKey(t,r){const n=Object.keys(r).sort().map(l=>`${l}:${r[l]}`).join("|");return`${t}:${n}`}get(t,r){const n=this.generateKey(t,r),l=this.memoryCache.get(n);return l?Date.now()-l.timestamp>l.ttl?(this.memoryCache.delete(n),null):l.data:null}set(t,r,n,l){const u=this.generateKey(t,r);this.memoryCache.size>=this.maxSize&&this.cleanup(),this.memoryCache.set(u,{data:n,timestamp:Date.now(),ttl:l||this.defaultTTL})}invalidate(t){const r=[];for(const n of this.memoryCache.keys())n.startsWith(`${t}:`)&&r.push(n);r.forEach(n=>this.memoryCache.delete(n))}cleanup(){const t=Date.now(),r=[];for(const[n,l]of this.memoryCache.entries())t-l.timestamp>l.ttl&&r.push(n);r.forEach(n=>this.memoryCache.delete(n)),this.memoryCache.size>=this.maxSize&&Array.from(this.memoryCache.entries()).sort((u,h)=>u[1].timestamp-h[1].timestamp).slice(0,Math.floor(this.maxSize/2)).forEach(([u])=>this.memoryCache.delete(u))}clear(){this.memoryCache.clear()}getStats(){const t=Date.now();let r=0,n=0;for(const l of this.memoryCache.values())t-l.timestamp>l.ttl?r++:n++;return{total:this.memoryCache.size,active:n,expired:r,maxSize:this.maxSize}}}const Aa=new _1({ttl:5*60*1e3,maxSize:50}),Ra={MAIN_METRICS:"main_metrics",PROJECTS:"projects",CUT_PRODUCTIVITY:"cut_productivity",MANUFACTURING_PRODUCTIVITY:"manufacturing_productivity",CNC_PRODUCTIVITY:"cnc_productivity",MAIN_CHART:"main_chart",CUT_CHART:"cut_chart",MANUFACTURING_CHART:"manufacturing_chart",CNC_CHART:"cnc_chart",ORDERS_BY_PROJECT:"orders_by_project"},Mi={SHORT:2*60*1e3,MEDIUM:5*60*1e3,LONG:15*60*1e3,VERY_LONG:60*60*1e3},S1=(s,t,r,n={})=>{const[l,u]=k.useState([]),[h,g]=k.useState(!1),[m,y]=k.useState(null),p=k.useCallback(()=>_(null,null,function*(){if(!s||!t||!r){u([]);return}const b={projectName:s,startDate:t,endDate:r};if(!n.forceRefresh){const x=Aa.get(Ra.ORDERS_BY_PROJECT,b);if(x){u(x);return}}try{g(!0),y(null);const x=yield xa.getOrdersByProject(s,t,r);Aa.set(Ra.ORDERS_BY_PROJECT,b,x,n.ttl||Mi.MEDIUM),u(x)}catch(x){console.error("Error fetching project orders:",x),y(x instanceof Error?x.message:"Error desconocido")}finally{g(!1)}}),[s,t,r,n.forceRefresh,n.ttl]);return k.useEffect(()=>{s&&t&&r&&p()},[p,s,t,r]),{orders:l,loading:h,error:m,refetch:p}},N1=({projectName:s,startDate:t,endDate:r})=>{const{orders:n,loading:l,error:u}=S1(s,t,r),h=m=>m?new Date(m).toLocaleDateString("en-AU",{year:"numeric",month:"short",day:"numeric"}):"N/A",g=m=>{if(!m)return"bg-gray-100 text-gray-800";switch(m.toLowerCase()){case"delivered":case"entregado":return"bg-green-100 text-green-800";case"delivering":return"bg-yellow-100 text-yellow-800";case"manufacturing":case"fabricando":return"bg-gray-100 text-gray-800";case"cutting":case"cortando":return"bg-orange-100 text-orange-800";default:return"bg-blue-100 text-blue-800"}};return l?c.jsx("div",{className:"flex items-center justify-center py-8",children:c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-4 bg-gray-200 rounded w-48 mb-2"}),c.jsx("div",{className:"h-4 bg-gray-200 rounded w-32"})]})}):u?c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"text-red-600",children:c.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading orders"}),c.jsx("p",{className:"text-sm text-red-700 mt-1",children:u})]})]})}):n.length===0?c.jsx("div",{className:"text-center py-8",children:c.jsxs("div",{className:"text-gray-500",children:[c.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),c.jsx("p",{className:"text-sm",children:"No orders found for this project in the selected period"})]})}):c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"flex items-center justify-center border-b border-gray-200 pb-4 mb-8",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("h4",{className:"text-xl font-bold text-gray-900",children:"Orders"}),c.jsx("div",{className:"w-16 h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent"}),c.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:[n.length," orders"]})]})}),c.jsx("div",{className:"w-full border-t border-gray-100 my-4"}),c.jsx("div",{className:"space-y-4",children:n.map((m,y)=>c.jsxs("div",{className:"bg-gradient-to-r from-white to-gray-50 border border-gray-200 rounded-xl p-6 hover:shadow-lg hover:border-blue-300 transition-all duration-300",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-blue-100 text-blue-800 text-lg font-bold rounded-lg",children:y+1}),c.jsxs("div",{children:[c.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["Order #",m.order_id]}),c.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full ml-3 ${g(m.status)}`,children:(m.status||"Unknown").toUpperCase()})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-sm text-gray-500",children:"Created"}),c.jsx("div",{className:"font-medium text-gray-900",children:h(m.creation_date)})]})]}),c.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[c.jsxs("div",{className:"text-center p-4 bg-white rounded-lg border border-gray-100",children:[c.jsx("div",{className:"text-sm font-medium text-gray-500 mb-2",children:"Total Area"}),c.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[(m.total_area||0).toFixed(2)," m"]})]}),c.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg border border-blue-200",children:[c.jsx("div",{className:"text-sm font-medium text-blue-600 mb-2",children:"Cut SQM"}),c.jsxs("div",{className:"text-2xl font-bold text-blue-700",children:[(m.cut_sqm||0).toFixed(2)," m"]})]}),c.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg border border-green-200",children:[c.jsx("div",{className:"text-sm font-medium text-green-600 mb-2",children:"Manufactured SQM"}),c.jsxs("div",{className:"text-2xl font-bold text-green-700",children:[(m.manufactured_sqm||0).toFixed(2)," m"]})]}),c.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg border border-purple-200",children:[c.jsx("div",{className:"text-sm font-medium text-purple-600 mb-2",children:"Panels"}),c.jsx("div",{className:"text-2xl font-bold text-purple-700",children:m.panels_count||0})]})]}),c.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[c.jsxs("div",{className:"flex items-center space-x-6",children:[m.expected_date&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"w-3 h-3 bg-yellow-400 rounded-full"}),c.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Expected: ",h(m.expected_date)]})]}),m.delivered_date&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"w-3 h-3 bg-green-400 rounded-full"}),c.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Delivered: ",h(m.delivered_date)]})]})]}),c.jsxs("div",{className:"text-sm text-gray-500",children:["Order #",m.order_id]})]})]},m.order_id))})]})},T1=({projects:s,loading:t=!1,dateRange:r})=>{const[n,l]=k.useState(new Set),u=y=>{const p=new Set(n);p.has(y)?p.delete(y):p.add(y),l(p)},h=y=>{switch(y){case"In Progress":return"bg-green-100 text-green-800";case"Done":return"bg-blue-100 text-blue-800";case"To Do":return"bg-yellow-100 text-yellow-800";case"Defects":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},g=y=>window.location.hostname==="gasti10.github.io"?`https://gasti10.github.io/CC_Flow_summary_report/?project=${encodeURIComponent(y)}`:`http://localhost:3000/?project=${encodeURIComponent(y)}`,m=y=>{const p=g(y);window.open(p,"_blank")};return t?c.jsx(Nt,{children:c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),c.jsx("div",{className:"space-y-3",children:[...Array(5)].map((y,p)=>c.jsx("div",{className:"h-16 bg-gray-200 rounded"},p))})]})}):c.jsxs(Nt,{children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Projects"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Worked on projects during the selected period"})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b-2 border-gray-300 bg-gray-50",children:[c.jsx("th",{className:"text-center py-4 px-6 font-semibold text-gray-800 text-sm",children:"Name"}),c.jsx("th",{className:"text-center py-4 px-4 font-semibold text-gray-800 text-sm",children:"Number"}),c.jsx("th",{className:"text-center py-4 px-4 font-semibold text-gray-800 text-sm",children:"PM"}),c.jsx("th",{className:"text-center py-4 px-4 font-semibold text-gray-800 text-sm",children:"Supervisor"}),c.jsx("th",{className:"text-center py-4 px-4 font-semibold text-gray-800 text-sm",children:"Status"}),c.jsx("th",{className:"text-center py-4 px-4 font-semibold text-gray-800 text-sm",children:"Progress"}),c.jsx("th",{className:"text-center py-4 px-4 font-semibold text-gray-800 text-sm",children:"SQM Cut"}),c.jsx("th",{className:"text-center py-4 px-4 font-semibold text-gray-800 text-sm",children:"SQM Manufactured"}),c.jsx("th",{className:"text-center py-4 px-6 font-semibold text-gray-800 text-sm",children:"Actions"})]})}),c.jsx("tbody",{children:s.map(y=>c.jsxs(wi.Fragment,{children:[c.jsxs("tr",{className:"border-b border-gray-200 hover:bg-blue-50 transition-colors duration-200",children:[c.jsx("td",{className:"py-6 px-6",children:c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"font-semibold text-gray-900 text-base",children:y.name}),c.jsx("div",{className:"text-sm text-gray-600 space-y-1",children:c.jsxs("div",{className:"flex items-center space-x-4 justify-center",children:[c.jsxs("span",{className:"flex items-center",children:[c.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full mr-2"}),"Start: ",y.startDate?new Date(y.startDate).toLocaleDateString("en-AU"):"N/A"]}),c.jsxs("span",{className:"flex items-center",children:[c.jsx("span",{className:"w-2 h-2 bg-yellow-400 rounded-full mr-2"}),"Expected: ",y.expectedCompletionDate?new Date(y.expectedCompletionDate).toLocaleDateString("en-AU"):"N/A"]}),c.jsxs("span",{className:"flex items-center",children:[c.jsx("span",{className:"w-2 h-2 bg-red-400 rounded-full mr-2"}),"End: ",y.endDate?new Date(y.endDate).toLocaleDateString("en-AU"):"N/A"]})]})})]})}),c.jsx("td",{className:"py-6 px-4 text-center",children:c.jsxs("span",{className:"inline-flex items-center justify-center w-12 h-8 bg-blue-100 text-blue-800 text-sm font-bold rounded-lg",children:["#",y.number]})}),c.jsx("td",{className:"py-6 px-4 text-center",children:c.jsx("div",{className:"text-sm font-medium text-gray-800",children:y.pm||"N/A"})}),c.jsx("td",{className:"py-6 px-4 text-center",children:c.jsx("div",{className:"text-sm font-medium text-gray-800",children:y.supervisor||"N/A"})}),c.jsx("td",{className:"py-6 px-4",children:c.jsx("span",{className:`inline-flex px-3 py-1.5 text-xs font-semibold rounded-full ${h(y.status)}`,children:y.status.replace("-"," ").toUpperCase()})}),c.jsx("td",{className:"py-6 px-4",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-3",children:c.jsx("div",{className:`h-3 rounded-full transition-all duration-500 ${y.progress>=100?"bg-gradient-to-r from-red-500 to-red-600":y.progress>=85?"bg-gradient-to-r from-yellow-500 to-yellow-600":"bg-gradient-to-r from-blue-500 to-blue-600"}`,style:{width:`${Math.min(y.progress,100)}%`}})}),c.jsxs("span",{className:"text-sm font-semibold text-gray-700 min-w-[3rem]",children:[y.progress,"%"]})]})}),c.jsx("td",{className:"py-6 px-4 text-center",children:c.jsxs("div",{className:"text-sm font-semibold text-blue-700",children:[y.sqmCut.toLocaleString()," m"]})}),c.jsx("td",{className:"py-6 px-4 text-center",children:c.jsxs("div",{className:"text-sm font-semibold text-green-700",children:[y.sqmManufactured.toLocaleString()," m"]})}),c.jsx("td",{className:"py-6 px-6",children:c.jsxs("div",{className:"flex flex-col space-y-2",children:[c.jsx(Zg,{variant:"ghost",size:"sm",onClick:()=>m(y.name),className:"px-4 py-2 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50",children:"Project Dashboard "}),c.jsx(Zg,{variant:"outline",size:"sm",onClick:()=>u(y.id),className:"px-4 py-2 text-sm font-medium",children:n.has(y.id)?" Hide Orders":" Show Orders"})]})})]}),n.has(y.id)&&c.jsx("tr",{className:"bg-gradient-to-r from-gray-50 to-blue-50",children:c.jsx("td",{colSpan:9,className:"py-8 px-8",children:c.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:c.jsx(N1,{projectName:y.name,startDate:r.startDate,endDate:r.endDate})})})})]},y.id))})]})})]})},Js=({title:s,icon:t,variant:r="default",className:n=""})=>{const u=(()=>{switch(r){case"charts":return{lineColor:"from-blue-400 to-blue-600",iconBg:"from-blue-500 to-blue-700",iconColor:"text-white",icon:"",label:"Charts"};case"performance":return{lineColor:"from-green-400 to-green-600",iconBg:"from-green-500 to-green-700",iconColor:"text-white",icon:"",label:"Performance"};case"projects":return{lineColor:"from-purple-400 to-purple-600",iconBg:"from-purple-500 to-purple-700",iconColor:"text-white",icon:"",label:"Projects"};case"cnc":return{lineColor:"from-orange-400 to-orange-600",iconBg:"from-orange-500 to-orange-700",iconColor:"text-white",icon:"",label:"CNC"};default:return{lineColor:"from-gray-400 to-gray-600",iconBg:"from-gray-500 to-gray-700",iconColor:"text-white",icon:"",label:"Section"}}})();return c.jsx("div",{className:`flex items-center justify-center py-12 ${n}`,children:c.jsxs("div",{className:"relative group",children:[c.jsxs("div",{className:"flex items-center space-x-6",children:[c.jsx("div",{className:`w-20 h-px bg-gradient-to-r from-transparent via-${u.lineColor.split("-")[1]}-400 to-${u.lineColor.split("-")[3]}-600 transform group-hover:scale-x-150 transition-all duration-500`}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:`w-12 h-12 bg-gradient-to-br ${u.iconBg} rounded-full flex items-center justify-center shadow-lg group-hover:shadow-xl group-hover:scale-110 transition-all duration-300`,children:c.jsx("span",{className:`${u.iconColor} text-lg`,children:t||u.icon})}),c.jsx("div",{className:`absolute -inset-3 bg-${u.lineColor.split("-")[1]}-200 rounded-full opacity-0 group-hover:opacity-30 group-hover:animate-ping transition-all duration-300`})]}),c.jsx("div",{className:`w-20 h-px bg-gradient-to-l from-transparent via-${u.lineColor.split("-")[1]}-400 to-${u.lineColor.split("-")[3]}-600 transform group-hover:scale-x-150 transition-all duration-500`})]}),c.jsx("div",{className:"absolute -top-12 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-all duration-300",children:c.jsx("div",{className:`bg-${u.lineColor.split("-")[1]}-600 text-white text-xs font-medium px-3 py-1 rounded-full shadow-lg`,children:s||u.label})})]})})},E1=(s,t,r={})=>{const[n,l]=k.useState(null),[u,h]=k.useState(!0),[g,m]=k.useState(null),y=k.useCallback(()=>_(null,null,function*(){const p={startDate:s,endDate:t};if(!r.forceRefresh){const b=Aa.get(Ra.MAIN_METRICS,p);if(b){l(b),h(!1);return}}try{h(!0),m(null);const b=yield xa.getMainMetrics(s,t);Aa.set(Ra.MAIN_METRICS,p,b,r.ttl||Mi.MEDIUM),l(b)}catch(b){console.error("Error fetching main metrics:",b),m(b instanceof Error?b.message:"Error desconocido")}finally{h(!1)}}),[s,t,r.forceRefresh,r.ttl]);return k.useEffect(()=>{s&&t&&y()},[y,s,t]),{data:n,loading:u,error:g,refetch:y}},C1=(s,t,r={})=>{const[n,l]=k.useState([]),[u,h]=k.useState(!0),[g,m]=k.useState(null),y=k.useCallback(()=>_(null,null,function*(){const p={startDate:s,endDate:t};if(!r.forceRefresh){const b=Aa.get(Ra.PROJECTS,p);if(b){l(b),h(!1);return}}try{h(!0),m(null);const b=yield xa.getProjectsWithMetrics(s,t);Aa.set(Ra.PROJECTS,p,b,r.ttl||Mi.MEDIUM),l(b)}catch(b){console.error("Error fetching projects:",b),m(b instanceof Error?b.message:"Error desconocido")}finally{h(!1)}}),[s,t,r.forceRefresh,r.ttl]);return k.useEffect(()=>{s&&t&&y()},[y,s,t]),{data:n,loading:u,error:g,refetch:y}},O1=(s,t,r={})=>{const[n,l]=k.useState([]),[u,h]=k.useState(!0),[g,m]=k.useState(null),y=k.useCallback(()=>_(null,null,function*(){const p={startDate:s,endDate:t};if(!r.forceRefresh){const b=Aa.get(Ra.CUT_PRODUCTIVITY,p);if(b){l(b),h(!1);return}}try{h(!0),m(null);const b=yield xa.getCutProductivityByResponsible(s,t);Aa.set(Ra.CUT_PRODUCTIVITY,p,b,r.ttl||Mi.SHORT),l(b)}catch(b){console.error("Error fetching cut productivity:",b),m(b instanceof Error?b.message:"Error desconocido")}finally{h(!1)}}),[s,t,r.forceRefresh,r.ttl]);return k.useEffect(()=>{s&&t&&y()},[y,s,t]),{data:n,loading:u,error:g,refetch:y}},D1=(s,t,r={})=>{const[n,l]=k.useState([]),[u,h]=k.useState(!0),[g,m]=k.useState(null),y=k.useCallback(()=>_(null,null,function*(){const p={startDate:s,endDate:t};if(!r.forceRefresh){const b=Aa.get(Ra.MANUFACTURING_PRODUCTIVITY,p);if(b){l(b),h(!1);return}}try{h(!0),m(null);const b=yield xa.getManufacturingProductivityByResponsible(s,t);Aa.set(Ra.MANUFACTURING_PRODUCTIVITY,p,b,r.ttl||Mi.SHORT),l(b)}catch(b){console.error("Error fetching manufacturing productivity:",b),m(b instanceof Error?b.message:"Error desconocido")}finally{h(!1)}}),[s,t,r.forceRefresh,r.ttl]);return k.useEffect(()=>{s&&t&&y()},[y,s,t]),{data:n,loading:u,error:g,refetch:y}},hy=({startDate:s,endDate:t})=>{const{data:r,loading:n,error:l,refetch:u}=E1(s,t),{data:h,loading:g,error:m,refetch:y}=C1(s,t),{data:p,loading:b,error:x,refetch:j}=O1(s,t),{data:S,loading:C,error:A,refetch:q}=D1(s,t),P=A1(p,S),M=n||g||b||C,Q=l||m||x||A,I=k.useCallback(()=>{u(),y(),j(),q()},[u,y,j,q]);return{mainMetrics:r,projects:h,chartData:P,loading:M,error:Q,refetch:I}},A1=(s,t)=>{const r=new Map,n=new Map;s.forEach(h=>{const g=h.fecha,m=r.get(g)||0;r.set(g,m+h.total_area)}),console.log("cutData",s),console.log("cutByDate",r),t.forEach(h=>{const g=h.fecha,m=n.get(g)||0;n.set(g,m+h.total_area)}),console.log("manufacturingData",t),console.log("manufacturingByDate",n);const l=new Set([...r.keys(),...n.keys()]);return Array.from(l).sort().map(h=>({date:h,cut:r.get(h)||0,manufactured:n.get(h)||0}))},e0=({dateRange:s})=>{const{mainMetrics:t,projects:r,chartData:n,loading:l,error:u,refetch:h}=hy(s),g=Td(),m=po(),y=t?{totalSqmCut:t.total_sqm_cut,totalSqmManufactured:t.total_sqm_manufactured,projects:r.length,totalPanels:r.reduce((b,x)=>b+(x.total_panels||0),0)||0}:{totalSqmCut:0,totalSqmManufactured:0,projects:0,totalPanels:0},p=r.map((b,x)=>{var j;return{id:`project-${x}`,name:b.project_name,number:((j=b.project_number)==null?void 0:j.toString())||"N/A",pm:b.pm||"N/A",supervisor:b.site_supervisor||"N/A",status:b.status||"To Do",sqmCut:b.total_sqm_cut||0,sqmManufactured:b.total_sqm_manufactured||0,totalPanels:b.total_panels||0,progress:Math.round(b.progress_percentage||0),startDate:b.project_start_date,endDate:b.finalization_date||"",expectedCompletionDate:b.expected_completion_date,details:{panels:b.total_panels||0,materials:[],priority:"medium"}}});return c.jsxs("div",{className:"space-y-0",children:[l&&c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx(m1,{size:"lg",color:"blue",text:"Loading analytics data..."})}),c.jsxs("div",{className:"flex items-center justify-between py-8",children:[c.jsx("div",{className:"w-32"}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Factory Analytics Dashboard"}),c.jsx("p",{className:"text-gray-600 italic",children:"Comprehensive overview of factory operations and performance metrics"})]}),c.jsx("div",{className:"flex items-center space-x-3",children:c.jsxs("div",{className:"text-sm text-gray-500",children:[c.jsxs("div",{className:"text-base font-medium",children:["Last sync: ",g]}),c.jsxs("div",{className:"text-xs italic",children:["Next sync: ",m]})]})})]}),u&&c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"text-red-400 mr-3",children:""}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading data"}),c.jsx("p",{className:"text-sm text-red-600 mt-1",children:u})]})]}),c.jsx("button",{onClick:h,className:"px-3 py-1 bg-red-100 hover:bg-red-200 text-red-700 rounded-md text-sm font-medium transition-colors duration-200",children:"Retry"})]})}),c.jsx("section",{className:"py-8",children:c.jsx(en,{direction:"up",delay:200,children:c.jsx(Nd,{data:y,loading:l})})}),c.jsx(Js,{variant:"charts",title:"Charts"}),c.jsx("section",{className:"py-8",children:c.jsx(en,{direction:"up",delay:400,children:c.jsx(j1,{data:n,title:"Daily Production Overview",loading:l})})}),c.jsx(Js,{variant:"projects",title:"Projects"}),c.jsx("section",{className:"py-8",children:c.jsx(en,{direction:"up",delay:600,children:c.jsx(T1,{projects:p,loading:l,dateRange:s})})})]})};ka.register(rn,sn,an,nn,ln,on);const R1=({data:s,title:t,loading:r=!1})=>{const n=k.useRef(null),l=k.useRef(null);return k.useEffect(()=>{if(!n.current||r)return;l.current&&l.current.destroy();const u=s.reduce((x,j)=>(x[j.date]||(x[j.date]={}),x[j.date][j.responsible]||(x[j.date][j.responsible]=0),x[j.date][j.responsible]+=j.cut,x),{}),h=Object.keys(u).sort(),g=Array.from(new Set(s.map(x=>x.responsible))),y=(x=>{const j=["rgb(239, 68, 68)","rgb(251, 146, 60)","rgb(251, 191, 36)","rgb(132, 204, 22)","rgb(34, 197, 94)","rgb(16, 185, 129)","rgb(6, 182, 212)","rgb(59, 130, 246)","rgb(147, 51, 234)","rgb(168, 85, 247)"];if(x>j.length){const S=[];for(let C=j.length;C<x;C++){const q=(300+(C-j.length)*36)%360,P=75+C%2*15,M=50+C%3*8;S.push(`hsl(${q}, ${P}%, ${M}%)`)}return[...j,...S]}return j.slice(0,x)})(g.length),p=g.map((x,j)=>({label:x,data:h.map(S=>u[S][x]||0),backgroundColor:y[j%y.length],borderColor:y[j%y.length],borderWidth:1,datalabels:{display:!1}})),b=n.current.getContext("2d");if(b)return l.current=new ka(b,{type:"bar",data:{labels:h.map(x=>{const[j,S,C]=x.split("-").map(Number);return new Date(j,S-1,C).toLocaleDateString("en-AU",{month:"short",day:"numeric"})}),datasets:p},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20,font:{size:12}}},title:{display:!0,text:t,font:{size:25,weight:"bold"}},tooltip:{mode:"index",intersect:!1,callbacks:{title:x=>{const j=h[x[0].dataIndex],[S,C,A]=j.split("-").map(Number);return new Date(S,C-1,A).toLocaleDateString("en-AU",{weekday:"long",month:"long",day:"numeric"})},label:x=>{const j=x.dataset.label,S=x.parsed.y;return`${j}: ${S.toLocaleString()} m`},footer:x=>`Total: ${x.reduce((S,C)=>S+C.parsed.y,0).toLocaleString()} m`}}},scales:{x:{display:!0,title:{display:!0,text:"Date"},grid:{display:!1},stacked:!0},y:{display:!0,title:{display:!0,text:"SQM Cut (m)"},beginAtZero:!0,stacked:!0,grid:{color:"rgba(0, 0, 0, 0.1)"}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}}),()=>{l.current&&l.current.destroy()}},[s,t,r]),r?c.jsx(Nt,{children:c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),c.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):c.jsx(Nt,{children:c.jsx("div",{className:"relative h-96",children:c.jsx("canvas",{ref:n})})})};ka.register(rn,sn,an,nn,ln,on);const k1=({data:s,title:t,loading:r=!1})=>{const n=k.useRef(null),l=k.useRef(null);return k.useEffect(()=>{if(!n.current||r)return;l.current&&l.current.destroy();const u=s.reduce((b,x)=>(b[x.date]||(b[x.date]={}),b[x.date][x.cnc]||(b[x.date][x.cnc]=0),b[x.date][x.cnc]+=x.cut,b),{}),h=Object.keys(u).sort(),g=Array.from(new Set(s.map(b=>b.cnc))),m=["rgb(59, 130, 246)","rgb(34, 197, 94)","rgb(251, 191, 36)","rgb(239, 68, 68)","rgb(168, 85, 247)","rgb(236, 72, 153)"],y=g.map((b,x)=>({label:b,data:h.map(j=>u[j][b]||0),backgroundColor:m[x%m.length],borderColor:m[x%m.length],borderWidth:1,datalabels:{display:!1}})),p=n.current.getContext("2d");if(p)return l.current=new ka(p,{type:"bar",data:{labels:h.map(b=>{const[x,j,S]=b.split("-").map(Number);return new Date(x,j-1,S).toLocaleDateString("en-AU",{month:"short",day:"numeric"})}),datasets:y},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20,font:{size:12}}},title:{display:!0,text:t,font:{size:25,weight:"bold"}},tooltip:{mode:"index",intersect:!1,callbacks:{title:b=>{const x=h[b[0].dataIndex],[j,S,C]=x.split("-").map(Number);return new Date(j,S-1,C).toLocaleDateString("en-AU",{weekday:"long",month:"long",day:"numeric"})},label:b=>{const x=b.dataset.label,j=b.parsed.y;return`${x}: ${j.toLocaleString()} m`},footer:b=>`Total: ${b.reduce((j,S)=>j+S.parsed.y,0).toLocaleString()} m`}}},scales:{x:{display:!0,title:{display:!0,text:"Date"},grid:{display:!1},stacked:!0},y:{display:!0,title:{display:!0,text:"SQM Cut (m)"},beginAtZero:!0,stacked:!0,grid:{color:"rgba(0, 0, 0, 0.1)"}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}}),()=>{l.current&&l.current.destroy()}},[s,t,r]),r?c.jsx(Nt,{children:c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),c.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):c.jsx(Nt,{children:c.jsx("div",{className:"relative h-96",children:c.jsx("canvas",{ref:n})})})},fy=({data:s,loading:t=!1,title:r})=>{if(t)return c.jsx(Nt,{children:c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),c.jsx("div",{className:"space-y-3",children:[...Array(5)].map((l,u)=>c.jsx("div",{className:"h-16 bg-gray-200 rounded"},u))})]})});if(!s||s.length===0)return c.jsx(Nt,{children:c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"text-4xl mb-4",children:""}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Data Available"}),c.jsx("p",{className:"text-gray-500",children:"No data available for the selected period"})]})});const n=[...s].sort((l,u)=>u.totalSqm-l.totalSqm);return c.jsxs(Nt,{children:[c.jsx("div",{className:"mb-6",children:c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r})}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b border-gray-200",children:[c.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Responsible"}),c.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Total Panels"}),c.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Total SQM"}),c.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Avg SQM/Panel"})]})}),c.jsx("tbody",{children:n.map((l,u)=>{const h=l.totalPanels>0?l.totalSqm/l.totalPanels:0,g=u===0;return c.jsxs("tr",{className:`
                    border-b border-gray-100 hover:bg-gray-50 transition-colors duration-200
                    ${g?"bg-yellow-50":""}
                  `,children:[c.jsx("td",{className:"py-4 px-4",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:`
                        w-8 h-8 flex items-center justify-center text-white text-sm font-medium`,children:g?"":""}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium text-gray-900",children:l.responsible||"Unknown"}),g&&c.jsx("div",{className:"text-xs text-yellow-600 font-medium",children:"Top Performer"})]})]})}),c.jsx("td",{className:"py-4 px-4",children:c.jsx("div",{className:"text-sm text-gray-900 font-medium",children:l.totalPanels.toLocaleString()})}),c.jsx("td",{className:"py-4 px-4",children:c.jsxs("div",{className:"text-sm text-gray-900 font-medium",children:[l.totalSqm.toFixed(2)," m"]})}),c.jsx("td",{className:"py-4 px-4",children:c.jsxs("div",{className:"text-sm text-gray-900 font-medium",children:[h.toFixed(2)," m"]})})]},l.responsible)})})]})}),c.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s.reduce((l,u)=>l+u.totalPanels,0).toLocaleString()}),c.jsx("div",{className:"text-sm text-gray-600",children:"Total Panels"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[s.reduce((l,u)=>l+u.totalSqm,0).toFixed(2)," m"]}),c.jsx("div",{className:"text-sm text-gray-600",children:"Total SQM"})]})]})})]})},M1=({data:s,loading:t=!1,title:r})=>{if(t)return c.jsx(Nt,{children:c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),c.jsx("div",{className:"space-y-3",children:[...Array(3)].map((l,u)=>c.jsx("div",{className:"h-16 bg-gray-200 rounded"},u))})]})});if(!s||s.length===0)return c.jsx(Nt,{children:c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"text-4xl mb-4",children:""}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No CNC Data Available"}),c.jsx("p",{className:"text-gray-500",children:"No CNC data available for the selected period"})]})});const n=[...s].sort((l,u)=>u.totalSqm-l.totalSqm);return c.jsxs(Nt,{children:[c.jsx("div",{className:"mb-6",children:c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r})}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b border-gray-200",children:[c.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"CNC Machine"}),c.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Total Panels"}),c.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Total SQM"}),c.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Avg SQM/Panel"}),c.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Inactive Days"})]})}),c.jsx("tbody",{children:n.map((l,u)=>{const h=l.totalPanels>0?l.totalSqm/l.totalPanels:0,g=u===0,m=l.totalDaysInRange>0?l.inactiveDays/l.totalDaysInRange*100:0,y=m>50;return c.jsxs("tr",{className:`
                    border-b border-gray-100 hover:bg-gray-50 transition-colors duration-200
                    ${g?"bg-yellow-50":""}
                    ${y?"bg-red-50":""}
                  `,children:[c.jsx("td",{className:"py-4 px-4",children:c.jsxs("div",{className:"flex items-center space-x-3 justify-center",children:[c.jsx("div",{className:`
                        w-8 h-8 flex items-center justify-center text-white text-sm font-medium rounded-full    
                      `,children:""}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium text-gray-900",children:l.cnc||"Unknown"}),g&&c.jsx("div",{className:"text-xs text-yellow-600 font-medium",children:"Top Performer"}),y&&c.jsx("div",{className:"text-xs text-red-600 font-medium",children:"Inactive"})]})]})}),c.jsx("td",{className:"py-4 px-4",children:c.jsx("div",{className:"text-sm text-gray-900 font-medium",children:l.totalPanels.toLocaleString()})}),c.jsx("td",{className:"py-4 px-4",children:c.jsxs("div",{className:"text-sm text-gray-900 font-medium",children:[l.totalSqm.toFixed(2)," m"]})}),c.jsx("td",{className:"py-4 px-4",children:c.jsxs("div",{className:"text-sm text-gray-900 font-medium",children:[h.toFixed(2)," m"]})}),c.jsx("td",{className:"py-4 px-4",children:c.jsx("div",{className:"flex items-center justify-center",children:c.jsxs("span",{className:`
                        inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
                        ${m===0?"bg-green-100 text-green-800":m<=50?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}
                      `,children:[l.inactiveDays," days (",m.toFixed(1),"%)"]})})})]},l.cnc)})})]})}),c.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s.reduce((l,u)=>l+u.totalPanels,0).toLocaleString()}),c.jsx("div",{className:"text-sm text-gray-600",children:"Total Panels"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[s.reduce((l,u)=>l+u.totalSqm,0).toFixed(2)," m"]}),c.jsx("div",{className:"text-sm text-gray-600",children:"Total SQM"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s.reduce((l,u)=>l+u.inactiveDays,0)}),c.jsx("div",{className:"text-sm text-gray-600",children:"Total Inactive Days"})]})]})})]})},U1=({startDate:s,endDate:t})=>{const[r,n]=k.useState([]),[l,u]=k.useState([]),[h,g]=k.useState([]),[m,y]=k.useState([]),[p,b]=k.useState(!0),[x,j]=k.useState(null);return k.useEffect(()=>{s&&t&&_(null,null,function*(){try{b(!0),j(null);const[C,A]=yield Promise.all([xa.getCutProductivityByResponsible(s,t),xa.getCutProductivityByCNC(s,t)]),q=C.map(T=>({date:T.fecha,responsible:T.responsable||"Sin asignar",cut:T.total_area})),P=A.map(T=>({date:T.fecha,cnc:T.cnc||"Sin asignar",cut:T.total_area})),M=new Map,Q=new Map;C.forEach(T=>{const $=T.responsable||"Sin asignar";M.has($)||M.set($,{totalPanels:0,totalSqm:0,efficiency:0});const Z=M.get($);Z.totalPanels+=T.panel_count,Z.totalSqm+=T.total_area}),M.forEach(T=>{T.efficiency=T.totalSqm>0?Math.min(100,T.totalSqm/100*10):0}),["1","2","3"].forEach(T=>{Q.set(T,{totalPanels:0,totalSqm:0,inactiveDays:0,totalDaysInRange:0})}),A.forEach(T=>{const $=T.cnc||"Sin asignar";Q.has($)||Q.set($,{totalPanels:0,totalSqm:0,inactiveDays:0,totalDaysInRange:0});const Z=Q.get($);Z.totalPanels+=T.panel_count,Z.totalSqm+=T.total_area});const D=new Date(s),Y=new Date(t),N=Math.ceil((Y.getTime()-D.getTime())/(1e3*60*60*24))+1;Q.forEach((T,$)=>{const Z=new Set(A.filter(re=>re.cnc===$).map(re=>re.fecha)),W=N-Z.size;T.inactiveDays=Math.max(0,W),T.totalDaysInRange=N}),n(q),u(P),g(Array.from(M.entries()).map(([T,$])=>Xe({responsible:T},$))),y(Array.from(Q.entries()).map(([T,$])=>Xe({cnc:T},$)))}catch(C){console.error("Error fetching cut process data:",C),j(C instanceof Error?C.message:"Error desconocido")}finally{b(!1)}})},[s,t]),{responsibleData:r,cncData:l,responsiblesTable:h,cncTable:m,loading:p,error:x}},q1=({dateRange:s})=>{const{responsibleData:t,cncData:r,responsiblesTable:n,cncTable:l,loading:u,error:h}=U1(s),g=Td(),m=po(),y=t.reduce((j,S)=>j+S.cut,0),p=n.reduce((j,S)=>j+S.totalPanels,0),b=new Set(t.map(j=>j.responsible)).size,x={totalSqmCut:y,responsibles:b,totalPanels:p};return c.jsxs("div",{className:"space-y-10",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"w-32"}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Cut Process Analytics"}),c.jsx("p",{className:"text-gray-600 italic",children:"Detailed analysis of cutting operations and performance by responsible person and CNC machines"})]}),c.jsx("div",{className:"flex items-center space-x-3",children:c.jsxs("div",{className:"text-sm text-gray-500",children:[c.jsxs("div",{className:"text-base font-medium",children:["Last sync: ",g]}),c.jsxs("div",{className:"text-xs italic",children:["Next sync: ",m]})]})})]}),h&&c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"text-red-400 mr-3",children:""}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading data"}),c.jsx("p",{className:"text-sm text-red-600 mt-1",children:h})]})]})}),c.jsx("div",{className:"space-y-4",children:c.jsx(Nd,{data:x,loading:u})}),c.jsx(Js,{variant:"charts",title:"Charts"}),c.jsx("div",{className:"space-y-4",children:c.jsx(R1,{data:t,title:"Daily Cutting",loading:u})}),c.jsx(Js,{variant:"performance",title:"Performance"}),c.jsx("div",{className:"space-y-4",children:c.jsx(fy,{data:n,title:"Performance by Responsible Person",loading:u})}),c.jsx(Js,{variant:"cnc",title:"CNC Machines"}),c.jsx("div",{className:"space-y-4",children:c.jsx(k1,{data:r,title:"Daily CNC",loading:u})}),c.jsx(Js,{variant:"cnc",title:"CNC Performance"}),c.jsx("div",{className:"space-y-4",children:c.jsx(M1,{data:l,title:"CNC Machine Performance",loading:u})})]})};ka.register(rn,sn,an,nn,ln,on);const L1=({data:s,title:t,loading:r=!1})=>{const n=k.useRef(null),l=k.useRef(null);return k.useEffect(()=>{if(!n.current||r)return;l.current&&l.current.destroy();const u=s.reduce((x,j)=>(x[j.date]||(x[j.date]={}),x[j.date][j.responsible]||(x[j.date][j.responsible]=0),x[j.date][j.responsible]+=j.manufactured,x),{}),h=Object.keys(u).sort(),g=Array.from(new Set(s.map(x=>x.responsible))),y=(x=>{const j=["rgb(239, 68, 68)","rgb(251, 146, 60)","rgb(251, 191, 36)","rgb(132, 204, 22)","rgb(34, 197, 94)","rgb(16, 185, 129)","rgb(6, 182, 212)","rgb(59, 130, 246)","rgb(147, 51, 234)","rgb(168, 85, 247)"];if(x>j.length){const S=[];for(let C=j.length;C<x;C++){const q=(300+(C-j.length)*36)%360,P=75+C%2*15,M=50+C%3*8;S.push(`hsl(${q}, ${P}%, ${M}%)`)}return[...j,...S]}return j.slice(0,x)})(g.length),p=g.map((x,j)=>({label:x,data:h.map(S=>u[S][x]||0),backgroundColor:y[j%y.length],borderColor:y[j%y.length],borderWidth:1,datalabels:{display:!1}})),b=n.current.getContext("2d");if(b)return l.current=new ka(b,{type:"bar",data:{labels:h.map(x=>{const[j,S,C]=x.split("-").map(Number);return new Date(j,S-1,C).toLocaleDateString("en-AU",{month:"short",day:"numeric"})}),datasets:p},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20,font:{size:12}}},title:{display:!0,text:t,font:{size:25,weight:"bold"}},tooltip:{mode:"index",intersect:!1,callbacks:{title:x=>{const j=h[x[0].dataIndex],[S,C,A]=j.split("-").map(Number);return new Date(S,C-1,A).toLocaleDateString("en-AU",{weekday:"long",month:"long",day:"numeric"})},label:x=>{const j=x.dataset.label,S=x.parsed.y;return`${j}: ${S.toLocaleString()} m`},footer:x=>`Total: ${x.reduce((S,C)=>S+C.parsed.y,0).toLocaleString()} m`}}},scales:{x:{display:!0,title:{display:!0,text:"Date"},grid:{display:!1},stacked:!0},y:{display:!0,title:{display:!0,text:"SQM Manufactured (m)"},beginAtZero:!0,stacked:!0,grid:{color:"rgba(0, 0, 0, 0.1)"}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}}),()=>{l.current&&l.current.destroy()}},[s,t,r]),r?c.jsx(Nt,{children:c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),c.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):c.jsx(Nt,{children:c.jsx("div",{className:"relative h-96",children:c.jsx("canvas",{ref:n})})})},z1=({startDate:s,endDate:t})=>{const[r,n]=k.useState([]),[l,u]=k.useState([]),[h,g]=k.useState(!0),[m,y]=k.useState(null);return k.useEffect(()=>{s&&t&&_(null,null,function*(){try{g(!0),y(null);const b=yield xa.getManufacturingProductivityByResponsible(s,t),x=b.map(S=>({date:S.fecha,responsible:S.responsable||"Sin asignar",manufactured:S.total_area})),j=new Map;b.forEach(S=>{const C=S.responsable||"Sin asignar";j.has(C)||j.set(C,{totalPanels:0,totalSqm:0,efficiency:0});const A=j.get(C);A.totalPanels+=S.panel_count,A.totalSqm+=S.total_area}),j.forEach(S=>{S.efficiency=S.totalSqm>0?Math.min(100,S.totalSqm/100*10):0}),n(x),u(Array.from(j.entries()).map(([S,C])=>Xe({responsible:S},C)))}catch(b){console.error("Error fetching manufacturing data:",b),y(b instanceof Error?b.message:"Error desconocido")}finally{g(!1)}})},[s,t]),{responsibleData:r,responsiblesTable:l,loading:h,error:m}},P1=({dateRange:s})=>{const{responsibleData:t,responsiblesTable:r,loading:n,error:l}=z1(s),u=Td(),h=po(),g=t.reduce((b,x)=>b+x.manufactured,0),m=r.reduce((b,x)=>b+x.totalPanels,0),y=new Set(t.map(b=>b.responsible)).size,p={totalSqmManufactured:g,responsibles:y,totalPanels:m};return c.jsxs("div",{className:"space-y-10",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"w-32"}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Manufacturing Analytics"}),c.jsx("p",{className:"text-gray-600 italic",children:"Detailed analysis of manufacturing operations and performance by responsible person"})]}),c.jsx("div",{className:"flex items-center space-x-3",children:c.jsxs("div",{className:"text-sm text-gray-500",children:[c.jsxs("div",{className:"text-base font-medium",children:["Last sync: ",u]}),c.jsxs("div",{className:"text-xs italic",children:["Next sync: ",h]})]})})]}),l&&c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"text-red-400 mr-3",children:""}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading data"}),c.jsx("p",{className:"text-sm text-red-600 mt-1",children:l})]})]})}),c.jsx("div",{className:"space-y-4",children:c.jsx(Nd,{data:p,loading:n})}),c.jsx("div",{className:"flex items-center justify-center space-y-4",children:c.jsxs("div",{className:"relative group",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("div",{className:"w-16 h-px bg-gradient-to-r from-transparent via-green-400 to-green-600 transform group-hover:scale-x-150 transition-all duration-500"}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-green-500 to-green-700 rounded-full flex items-center justify-center shadow-lg group-hover:shadow-xl group-hover:scale-110 transition-all duration-300",children:c.jsx("span",{className:"text-white text-sm font-bold",children:""})}),c.jsx("div",{className:"absolute -inset-2 bg-green-200 rounded-full opacity-0 group-hover:opacity-30 group-hover:animate-ping transition-all duration-300"})]}),c.jsx("div",{className:"w-16 h-px bg-gradient-to-l from-transparent via-green-400 to-green-600 transform group-hover:scale-x-150 transition-all duration-500"})]}),c.jsx("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-all duration-300",children:c.jsx("span",{className:"text-xs font-medium text-green-600 bg-white px-2 py-1 rounded-full shadow-sm",children:"Charts"})})]})}),c.jsx("div",{className:"space-y-4",children:c.jsx(L1,{data:t,title:"Daily Manufacturing",loading:n})}),c.jsx("div",{className:"flex items-center justify-center my-16",children:c.jsxs("div",{className:"relative group cursor-pointer",children:[c.jsxs("div",{className:"flex items-center space-x-6",children:[c.jsxs("div",{className:"flex space-x-1",children:[c.jsx("div",{className:"w-2 h-2 bg-blue-300 rounded-full group-hover:bg-blue-500 transition-colors duration-300"}),c.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full group-hover:bg-blue-600 transition-colors duration-300 delay-75"}),c.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full group-hover:bg-blue-700 transition-colors duration-300 delay-150"}),c.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full group-hover:bg-blue-600 transition-colors duration-300 delay-75"}),c.jsx("div",{className:"w-2 h-2 bg-blue-300 rounded-full group-hover:bg-blue-500 transition-colors duration-300"})]}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-700 rounded-lg flex items-center justify-center shadow-lg group-hover:shadow-2xl group-hover:rotate-12 transition-all duration-300",children:c.jsx("span",{className:"text-white text-lg",children:""})}),c.jsx("div",{className:"absolute -inset-3 bg-blue-200 rounded-lg opacity-0 group-hover:opacity-20 group-hover:animate-pulse transition-all duration-300"})]}),c.jsxs("div",{className:"flex space-x-1",children:[c.jsx("div",{className:"w-2 h-2 bg-blue-300 rounded-full group-hover:bg-blue-500 transition-colors duration-300"}),c.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full group-hover:bg-blue-600 transition-colors duration-300 delay-75"}),c.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full group-hover:bg-blue-700 transition-colors duration-300 delay-150"}),c.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full group-hover:bg-blue-600 transition-colors duration-300 delay-75"}),c.jsx("div",{className:"w-2 h-2 bg-blue-300 rounded-full group-hover:bg-blue-500 transition-colors duration-300"})]})]}),c.jsx("div",{className:"absolute -top-10 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-all duration-300",children:c.jsx("div",{className:"bg-blue-600 text-white text-xs font-medium px-3 py-1 rounded-full shadow-lg",children:"Performance"})})]})}),c.jsx("div",{className:"space-y-4",children:c.jsx(fy,{data:r,title:"Performance by Responsible Person",loading:n})})]})},Ku=s=>{const t=s.getFullYear(),r=String(s.getMonth()+1).padStart(2,"0"),n=String(s.getDate()).padStart(2,"0");return`${t}-${r}-${n}`},$1=()=>{const s=k.useCallback(Ku,[]),[t,r]=k.useState(()=>{const u=new Date,h=new Date(u);return h.setDate(u.getDate()-29),{startDate:Ku(h),endDate:Ku(u)}}),n=k.useCallback(u=>{r(u)},[]),l=k.useCallback(u=>{const h=new Date,g=new Date(h);switch(u){case"today":r({startDate:s(h),endDate:s(h)});return;case"thisWeek":{const m=h.getDay(),y=m===0?6:m-1;g.setDate(h.getDate()-y);break}case"7d":g.setDate(h.getDate()-6);break;case"30d":g.setDate(h.getDate()-29);break;case"90d":g.setDate(h.getDate()-89);break;case"1y":g.setFullYear(h.getFullYear()-1);break}r({startDate:s(g),endDate:s(h)})},[s]);return{dateRange:t,setDateRange:n,setQuickRange:l,formatDate:s}},B1=(s,t)=>{const r=H1(s);I1(r,`${t}.csv`,"text/csv")},H1=s=>{const t=[];return t.push("=== FACTORY ANALYTICS REPORT ==="),t.push(`Generated: ${new Date(s.exportDate).toLocaleString("en-AU")}`),t.push(`Date Range: ${s.dateRange.start} to ${s.dateRange.end}`),t.push("Company: Cladding Creations"),t.push(""),t.push("=== MAIN METRICS ==="),t.push("Metric,Value,Unit"),t.push(`Total SQM Cut,${s.metrics.totalCutArea.toFixed(2)},SQM`),t.push(`Total SQM Manufactured,${s.metrics.totalManufacturedArea.toFixed(2)},SQM`),t.push(`Total Projects,${s.projects.length},units`),t.push(`Total Panels,${s.metrics.totalPanels},units`),t.push(""),s.projects&&s.projects.length>0&&(t.push("=== PROJECTS SUMMARY ==="),t.push("Project Number,Project Name,PM,Supervisor,Status,Real Total Cut SQM,Expected Total SQM,Progress %,Allowed SQM to Buy,Start Date,Expected Date,Finalization Date,SQM Cut,SQM Manufactured,Total Panels"),s.projects.forEach(r=>{t.push([`"${r.projectNumber}"`,`"${r.projectName}"`,`"${r.pm}"`,`"${r.supervisor}"`,`"${r.status}"`,r.realTotalCutSqm.toFixed(2),r.expectedTotalSqm.toFixed(2),r.progressPercentage,r.allowedSqmToBuy.toFixed(2),r.startDate,r.expectedDate,r.finalizationDate,r.cutSqm.toFixed(2),r.manufacturedSqm.toFixed(2),r.totalPanels].join(","))}),t.push("")),s.chartData&&s.chartData.length>0&&(t.push("=== DAILY PRODUCTIVITY ==="),t.push("Date,SQM Cut,SQM Manufactured"),s.chartData.forEach(r=>{t.push([r.date,r.cutArea.toFixed(2),r.manufacturedArea.toFixed(2)].join(","))})),t.join(`
`)},I1=(s,t,r)=>{const n=new Blob([s],{type:r}),l=URL.createObjectURL(n),u=document.createElement("a");u.href=l,u.download=t,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(l)},Y1=(s,t,r)=>`${s}_${t}_to_${r}`,V1=()=>({exportData:k.useCallback(t=>{if(!t.mainMetrics||!t.projects||!t.chartData){console.error("Missing data for export");return}const r={metrics:{totalCutArea:t.mainMetrics.total_sqm_cut,totalManufacturedArea:t.mainMetrics.total_sqm_manufactured,totalPanels:t.projects.reduce((l,u)=>l+(u.total_panels||0),0)},projects:t.projects.map(l=>{var u;return{projectNumber:((u=l.project_number)==null?void 0:u.toString())||"N/A",projectName:l.project_name,pm:l.pm||"N/A",supervisor:l.site_supervisor||"N/A",status:l.status||"N/A",realTotalCutSqm:l.real_cut_square_meters||0,expectedTotalSqm:l.expected_square_meters||0,progressPercentage:Math.round(l.progress_percentage||0),allowedSqmToBuy:l.allowed_sqm_to_buy||0,startDate:l.project_start_date||"",expectedDate:l.expected_completion_date||"",finalizationDate:l.finalization_date||"",cutSqm:l.total_sqm_cut||0,manufacturedSqm:l.total_sqm_manufactured||0,totalPanels:l.total_panels||0}}),chartData:t.chartData.map(l=>({date:l.date,cutArea:l.cut,manufacturedArea:l.manufactured})),exportDate:new Date().toISOString(),dateRange:{start:t.dateRange.startDate,end:t.dateRange.endDate}},n=Y1("CC_Analytics_Report",t.dateRange.startDate,t.dateRange.endDate);B1(r,n)},[])}),Q1=s=>{const{mainMetrics:t,projects:r,chartData:n}=hy(s),{exportData:l}=V1();return{handleExportCSV:k.useCallback(()=>{t&&r&&n&&l({mainMetrics:t,projects:r,chartData:n,dateRange:s})},[t,r,n,s,l]),canExport:!!(t&&r&&n)}},G1=({currentView:s,onViewChange:t,isOpen:r,onToggle:n})=>{const[l,u]=k.useState(!1);return k.useEffect(()=>{const h=setTimeout(()=>{u(!0),setTimeout(()=>{u(!1)},2e3)},1e3);return()=>clearTimeout(h)},[]),c.jsx(p1,{currentView:s,onViewChange:t,isOpen:r,onToggle:n,showHintAnimation:l})},K1=()=>{const[s,t]=k.useState("analytics"),[r,n]=k.useState(!1),{dateRange:l,setDateRange:u,setQuickRange:h}=$1(),{handleExportCSV:g,canExport:m}=Q1(l);Di("CC Analytics Dashboard"),k.useEffect(()=>{const b=setTimeout(()=>{n(!0)},1e3);return()=>clearTimeout(b)},[]);const y=k.useCallback(()=>{switch(s){case"analytics":return c.jsx(e0,{dateRange:l});case"cut-process":return c.jsx(q1,{dateRange:l});case"manufacturing":return c.jsx(P1,{dateRange:l});default:return c.jsx(e0,{dateRange:l})}},[s,l]),p=k.useCallback(()=>{n(!r)},[r]);return c.jsxs("div",{className:"flex h-screen bg-gray-50",children:[c.jsx(G1,{currentView:s,onViewChange:t,isOpen:r,onToggle:p}),c.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden transition-all duration-300",children:[c.jsx(b1,{dateRange:l,onDateRangeChange:u,onQuickRangeChange:h,onExportCSV:g,canExport:m}),c.jsx("main",{className:"flex-1 overflow-auto p-8",children:c.jsx(g1,{children:y()})}),c.jsx("footer",{className:"bg-white border-t border-gray-200 px-8 py-6 sticky bottom-0",children:c.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[c.jsx("div",{className:"w-16 h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent"}),c.jsx("div",{className:"flex items-center space-x-3",children:c.jsx("img",{src:Sd(),alt:"CC Logo",className:"h-10 w-auto"})}),c.jsx("div",{className:"w-16 h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent"}),c.jsx("div",{className:"text-center",children:c.jsxs("div",{className:"text-sm text-gray-500 mb-1",children:["Developed by"," ",c.jsx("a",{href:"https://www.gjouglard.com.ar",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 hover:underline transition-colors duration-200 font-medium",children:"GJ"})]})}),c.jsx("div",{className:"w-16 h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent"})]})})]})]})},F1=()=>{const{data:s,isLoading:t}=pd(),{data:r,isLoading:n}=A0();return k.useEffect(()=>{console.log(" Precargando datos en background...")},[]),k.useEffect(()=>{!t&&!n&&(console.log(" Datos precargados exitosamente"),console.log(` ${(r==null?void 0:r.length)||0} proyectos cargados`),console.log(` ${(s==null?void 0:s.length)||0} items cargados`))},[t,n,r==null?void 0:r.length,s==null?void 0:s.length]),null},X1=({logoPath:s,menuItems:t})=>{const[r,n]=k.useState(!1),l=k.useRef(null),u=h0();k.useEffect(()=>{const m=y=>{l.current&&!l.current.contains(y.target)&&n(!1)};return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[]);const h=()=>{n(!r)},g=m=>{u(m),n(!1)};return c.jsxs("div",{className:"logo-menu-container",ref:l,children:[c.jsxs("div",{className:"logo-button",onClick:h,children:[c.jsx("img",{src:s,alt:"CC Logo",className:"logo-image"}),c.jsx("div",{className:`menu-arrow ${r?"open":""}`,children:""})]}),r&&c.jsxs("div",{className:"menu-dropdown",children:[c.jsx("div",{className:"menu-header",children:c.jsx("span",{children:"Other Functions"})}),c.jsx("div",{className:"menu-items",children:t.map(m=>c.jsxs("button",{className:"menu-item",onClick:()=>g(m.path),children:[m.icon&&c.jsx("span",{className:"menu-item-icon",children:m.icon}),c.jsx("span",{className:"menu-item-label",children:m.label})]},m.id))})]})]})},t0={"/":{name:"main",animationDuration:4e3,showDataPreloader:!0,loadingText:"Loading projects...",showHeader:!0},"/order-delivery":{name:"order-delivery",animationDuration:1200,showDataPreloader:!1,loadingText:"Loading...",showHeader:!1},"/analytics":{name:"analytics",animationDuration:1200,showDataPreloader:!1,loadingText:"Loading CC Analytics...",showHeader:!1},"/login":{name:"login",animationDuration:0,showDataPreloader:!1,loadingText:"",showHeader:!1},"/creator-of-orders":{name:"creator-of-orders",animationDuration:1200,showDataPreloader:!1,loadingText:"Loading...",showHeader:!1}},W1=s=>t0[s]||t0["/"],my=k.createContext(void 0),J1=({children:s})=>{const[t,r]=k.useState(null),[n,l]=k.useState(null),[u,h]=k.useState(!0);k.useEffect(()=>{Tr.auth.getSession().then(({data:{session:x}})=>{var j;l(x),r((j=x==null?void 0:x.user)!=null?j:null),h(!1)});const{data:{subscription:b}}=Tr.auth.onAuthStateChange((x,j)=>{var S;l(j),r((S=j==null?void 0:j.user)!=null?S:null),h(!1)});return()=>b.unsubscribe()},[]);const p={user:t,session:n,loading:u,sendOtp:b=>_(null,null,function*(){const{error:x}=yield Tr.auth.signInWithOtp({email:b,options:{shouldCreateUser:!0}});return{error:x}}),verifyOtp:(b,x)=>_(null,null,function*(){const{data:j,error:S}=yield Tr.auth.verifyOtp({email:b,token:x,type:"email"});return{data:j,error:S}}),signOut:()=>_(null,null,function*(){yield Tr.auth.signOut(),r(null),l(null)})};return c.jsx(my.Provider,{value:p,children:s})},vo=()=>{const s=k.useContext(my);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s},Z1=()=>{const[s,t]=k.useState(""),[r,n]=k.useState(""),[l,u]=k.useState("email"),[h,g]=k.useState(!1),[m,y]=k.useState(null),{sendOtp:p,verifyOtp:b,user:x}=vo(),j=h0(),S=()=>window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?"/CC-logo-NEW_1.webp":"/CC_Flow_summary_report/CC-logo-NEW_1.webp",C=()=>window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?"/Cladding-Creations-Showcase.jpeg":"/CC_Flow_summary_report/Cladding-Creations-Showcase.jpeg";Di("CC Login"),k.useEffect(()=>{if(x){const M=new URLSearchParams(window.location.search).get("from")||"/creator-of-orders";j(M,{replace:!0})}},[x,j]);const A=M=>_(null,null,function*(){if(M.preventDefault(),g(!0),y(null),!s||!s.includes("@")){y({type:"error",text:"Please enter a valid email"}),g(!1);return}try{const{error:Q}=yield p(s);Q?y({type:"error",text:Q.message||"Error sending code"}):(y({type:"success",text:"Check your email for the 6-digit code."}),u("code"))}catch(Q){y({type:"error",text:"An unexpected error occurred. Please try again."})}finally{g(!1)}}),q=M=>_(null,null,function*(){if(M.preventDefault(),g(!0),y(null),!r||r.length!==6){y({type:"error",text:"Please enter the 6-digit code"}),g(!1);return}try{const{error:Q}=yield b(s,r);if(Q)y({type:"error",text:Q.message||"Invalid code. Please try again."}),n("");else{const I=new URLSearchParams(window.location.search).get("from")||"/creator-of-orders";j(I,{replace:!0})}}catch(Q){y({type:"error",text:"An unexpected error occurred. Please try again."}),n("")}finally{g(!1)}}),P=()=>{u("email"),n(""),y(null)};return c.jsxs("div",{className:"login-container",children:[c.jsxs("div",{className:"login-image-section",children:[c.jsx("img",{src:C(),alt:"Cladding Creations",className:"login-showcase-image"}),c.jsx("div",{className:"login-image-overlay"})]}),c.jsx("div",{className:"login-form-section",children:c.jsxs("div",{className:"login-content",children:[c.jsx("div",{className:"login-logo",children:c.jsx("img",{src:S(),alt:"CC Logo"})}),c.jsxs("div",{className:"login-header",children:[c.jsx("h1",{children:"Welcome"}),c.jsx("p",{children:l==="email"?"Enter your email to receive a login code. Can use your Cladding Creations email address.":"Enter the 6-digit code sent to your email"})]}),l==="email"?c.jsxs("form",{onSubmit:A,className:"login-form",children:[c.jsx("div",{className:"form-group",children:c.jsx("input",{id:"email",type:"email",value:s,onChange:M=>t(M.target.value),placeholder:"your-email@claddingcreations.com.au",required:!0,disabled:h,autoComplete:"email"})}),m&&c.jsx("div",{className:`message ${m.type}`,children:m.text}),c.jsx("button",{type:"submit",className:"login-button",disabled:h,children:h?"Sending...":"Send Code"})]}):c.jsxs("form",{onSubmit:q,className:"login-form",children:[c.jsx("div",{className:"form-group",children:c.jsx("input",{id:"code",type:"text",value:r,onChange:M=>{const Q=M.target.value.replace(/\D/g,"").slice(0,6);n(Q)},placeholder:"000000",required:!0,disabled:h,autoComplete:"one-time-code",maxLength:6,className:"code-input"})}),m&&c.jsx("div",{className:`message ${m.type}`,children:m.text}),c.jsx("button",{type:"submit",className:"login-button",disabled:h||r.length!==6,children:h?"Verifying...":"Verify Code"}),c.jsx("button",{type:"button",onClick:P,className:"login-button-secondary",disabled:h,children:"Change Email"})]}),c.jsx("div",{className:"login-footer",children:c.jsx("p",{className:"help-text",children:l==="email"?"You will receive a 6-digit code in your email":`Code sent to ${s}`})})]})})]})},eN=({children:s})=>{const{user:t,loading:r}=vo(),n=f0();return r?c.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:c.jsx(dn,{})}):t?c.jsx(c.Fragment,{children:s}):c.jsx(eb,{to:"/login",state:{from:n.pathname},replace:!0})},gy=k.createContext(void 0),tN=()=>new Date().toISOString().split("T")[0],a0={project:"",orderId:"",status:"Ready to cut",responsable:"",expectedTo:tN(),priority:"Normal",selectedSheets:[],sheets:"",colour:"",panels:[],csvFile:null,orderComment:""},r0={step1:{isValid:!1,errors:[]},step2:{isValid:!1,errors:[]},step3:{isValid:!1,errors:[]},step4:{isValid:!1,errors:[]}};function aN({children:s}){const[t,r]=k.useState(1),[n,l]=k.useState(a0),[u,h]=k.useState(r0),[g,m]=k.useState(!1),[y,p]=k.useState(null),[b,x]=k.useState(!1),j=k.useCallback((Q,I)=>{const D=I||n,Y=[];switch(Q){case 1:D.project||Y.push("Project is required"),D.orderId||Y.push("Order ID is required"),D.responsable||Y.push("Responsable is required"),D.expectedTo||Y.push("Expected to is required");break;case 2:D.selectedSheets.length===0?Y.push("Must select at least one sheet"):D.selectedSheets.filter($=>$.qty<=0).length>0&&Y.push("All selected sheets must have a quantity greater than 0");break;case 3:D.panels.length===0&&Y.push("Must import at least one valid panel");break;case 4:D.project||Y.push("Project is required"),D.orderId||Y.push("Order ID is required"),D.selectedSheets.length===0&&Y.push("Must select at least one sheet"),D.panels.length===0&&Y.push("Must import at least one valid panel");break}const N=Y.length===0;return h(T=>Xt(Xe({},T),{[`step${Q}`]:{isValid:N,errors:Y}})),N},[n]),S=k.useCallback(Q=>{l(I=>{const D=Xe(Xe({},I),Q);if(Q.selectedSheets!==void 0)if(Q.selectedSheets.length>0){const Y=Q.selectedSheets[0];D.colour=Y.colour;const N=Q.selectedSheets.map(T=>`${T.dimension} - ${T.colour}`);D.sheets=N.join(", ")}else D.colour="",D.sheets="";return D})},[]);k.useEffect(()=>{j(t,n)},[n,t,j]);const C=k.useCallback(()=>{j(t)&&t<4&&r(Q=>Q+1)},[t,j]),A=k.useCallback(()=>{t>1&&r(Q=>Q-1)},[t]),q=k.useCallback(Q=>{Q>=1&&Q<=4&&r(Q)},[]),P=k.useCallback(()=>{r(1),l(a0),h(r0),m(!1),p(null),x(!1)},[]),M={currentStep:t,formData:n,validation:u,isLoading:g,error:y,success:b,updateFormData:S,validateStep:j,nextStep:C,previousStep:A,goToStep:q,resetWizard:P,setLoading:m,setError:p,setSuccess:x};return c.jsx(gy.Provider,{value:M,children:s})}function Er(){const s=k.useContext(gy);if(s===void 0)throw new Error("useWizard must be used within a WizardProvider");return s}const s0=[{number:1,label:"Order Information"},{number:2,label:"Sheets Selection"},{number:3,label:"Panels Import"},{number:4,label:"Review & Create"}];function rN(){const{currentStep:s}=Er();return c.jsx("div",{className:"wizard-progress",children:s0.map((t,r)=>c.jsxs("div",{className:"wizard-progress-item",children:[r>0&&c.jsx("div",{className:"wizard-progress-line-before",children:c.jsx("div",{className:`wizard-progress-line-fill ${s>=t.number?"completed":""}`})}),c.jsxs("div",{className:`wizard-progress-step ${s===t.number?"active":s>t.number?"completed":"pending"}`,children:[c.jsx("div",{className:"wizard-progress-step-number",children:t.number}),c.jsx("div",{className:"wizard-progress-step-label",children:t.label})]}),r<s0.length-1&&c.jsx("div",{className:"wizard-progress-line-after",children:c.jsx("div",{className:`wizard-progress-line-fill ${s>t.number?"completed":""}`})})]},t.number))})}function sN(){const{currentStep:s,previousStep:t,nextStep:r,validateStep:n,isLoading:l}=Er(),u=()=>{n(s)&&r()},h=()=>{t()},g=s===1,m=s===4;return c.jsxs("div",{className:"wizard-navigation",children:[c.jsx("button",{type:"button",onClick:h,disabled:g||l,className:"wizard-nav-button wizard-nav-button-prev",children:"Previous"}),m?null:c.jsx("button",{type:"button",onClick:u,disabled:l,className:"wizard-nav-button wizard-nav-button-next",children:"Next"})]})}function nN(s){const{data:t,isLoading:r,error:n}=wa({queryKey:["lastOrder",s],queryFn:()=>_(null,null,function*(){var h;if(!s)return null;const u=yield xa.getOrdersCutByProject(s);return u.length===0?null:((h=u[0])==null?void 0:h["Order ID"])||null}),enabled:!!s,staleTime:3e5}),l=t?iN(t):"";return{lastOrderId:t||"",nextOrderId:l,isLoading:r,error:n}}function iN(s){const t=s.match(/(\d+)$/);if(t){const r=parseInt(t[1],10),n=s.substring(0,s.length-t[1].length),l=r+1,u=t[1].length;return`${n}${l.toString().padStart(u,"0")}`}return`${s}-1`}function lN(s,t=500){const[r,n]=k.useState(s);k.useEffect(()=>{const g=setTimeout(()=>{n(s)},t);return()=>clearTimeout(g)},[s,t]);const{data:l,isLoading:u}=wa({queryKey:["orderIdValidation",r],queryFn:()=>_(null,null,function*(){return!r||!r.trim()?null:yield xa.checkOrderIdExists(r)}),enabled:!!r&&r.trim().length>0,staleTime:2*60*1e3,retry:!1});return{isValid:r.trim().length===0||l===null?null:!l,isChecking:u&&r.trim().length>0}}const n0=new cn,oN=[{value:"Ready to cut",label:"Ready to cut",icon:""},{value:"cutting",label:"Cutting",icon:""},{value:"manufacturing",label:"Manufacturing",icon:""},{value:"delivering",label:"Delivering",icon:""},{value:"delivered",label:"Delivered",icon:""}],cN=[{value:"Normal",label:"Normal",color:"#48bb78",bgColor:"#c6f6d5"},{value:"High",label:"High",color:"#d69e2e",bgColor:"#fefcbf"},{value:"Urgent",label:"Urgent",color:"#e53e3e",bgColor:"#fed7d7"}],i0=s=>{if(!s)return"N/A";try{const t=new Date(s);if(isNaN(t.getTime()))return s;const r=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),l=t.getFullYear();return`${r}/${n}/${l}`}catch(t){return s}},uN=s=>s<50?"#48bb78":s<90?"#ecc94b":"#e53e3e";function l0(){var Te;const{formData:s,updateFormData:t,validation:r}=Er(),{user:n}=vo(),[l,u]=k.useState(!1),[h,g]=k.useState(!1),m=Lv(),[y,p]=k.useState(""),[b,x]=k.useState(!1),[j,S]=k.useState(!1),{data:C,isLoading:A}=wa({queryKey:["projects"],queryFn:()=>n0.getAllProjects(),staleTime:15*60*1e3}),q=k.useMemo(()=>!s.project||!C?null:C.find(ee=>ee.Name===s.project)||null,[s.project,C]),P=k.useMemo(()=>{if(!C)return[];if(!y.trim())return C;const ee=y.toLowerCase().trim();return C.filter(H=>{var le,ie,se;const G=(le=H.Name)==null?void 0:le.toLowerCase().includes(ee),X=(ie=H.Number)==null?void 0:ie.toString().includes(ee),J=(se=H.PM)==null?void 0:se.toLowerCase().includes(ee);return G||X||J})},[C,y]);k.useEffect(()=>{q!=null&&q.Name&&p(q.Name)},[q]);const M=k.useMemo(()=>{if(!q)return null;const ee=Number(q["Expected Square Meters"])||0,H=Number(q["Allowed SQM to buy"])||0,G=Number(q["Real Cut Square Meters"])||0;if(ee===0&&H===0)return null;const X=H>0?H:ee,J=X>0?G/X*100:0,le=H>0?ee/H*100:100;return{expected:ee,allowed:H,realCut:G,reference:X,percentage:Math.min(J,100),actualPercentage:J,expectedPercentageOfAllowed:le,color:uN(G>0&&ee>0?G/ee*100:0),hasAllowed:H>0,hasRealCut:G>0}},[q]),{nextOrderId:Q,isLoading:I}=nN(s.project||null),{isValid:D,isChecking:Y}=lN(s.orderId,500);k.useEffect(()=>{if(n!=null&&n.email&&!s.responsable){const ee=n.email.split("@")[0].charAt(0).toUpperCase()+n.email.split("@")[0].slice(1);t({responsable:ee})}},[n==null?void 0:n.email,s.responsable,t]),k.useEffect(()=>{s.project&&Q&&!j?t({orderId:Q}):s.project||(t({orderId:""}),S(!1))},[s.project,Q,t,j]),k.useEffect(()=>{S(!1)},[s.project]);const N=k.useCallback(()=>_(null,null,function*(){g(!0);try{const ee=yield n0.getAllProjects({forceAppSheet:!0});m.setQueryData(["projects"],ee),console.log(" Sync completed - data refreshed from AppSheet")}catch(ee){console.error("Error syncing from AppSheet:",ee)}finally{g(!1)}}),[m]),T=(ee,H)=>{t({[ee]:H}),ee==="orderId"&&S(!0)},$=ee=>{t({project:ee}),p(ee),x(!1)},Z=ee=>{p(ee),x(!0),ee.trim()||t({project:""})},W=ee=>{t({priority:ee})},re=r.step1;return A?c.jsxs("div",{className:"step-container step-loading",children:[c.jsx(dn,{}),c.jsx("p",{children:"Loading projects..."})]}):c.jsxs("div",{className:"step-container step1-order",children:[c.jsx("h2",{className:"step-title",children:"Order Information"}),c.jsx("p",{className:"step-description",children:"Complete the basic information for the cutting order"}),c.jsxs("div",{className:"step1-layout",children:[c.jsxs("div",{className:"step1-form-column",children:[c.jsxs("div",{className:"form-row-compact",children:[c.jsxs("div",{className:"form-group form-group-large",children:[c.jsx("label",{htmlFor:"project",className:"form-label required",children:"Project"}),c.jsxs("div",{className:"project-search-container",children:[c.jsx("input",{id:"project",type:"text",value:y,onChange:ee=>Z(ee.target.value),onFocus:()=>x(!0),onBlur:()=>{setTimeout(()=>x(!1),200)},className:`form-input project-search-input ${re.errors.includes("The project is required")?"error":""}`,placeholder:"Search project by name, number, or PM...",autoComplete:"off"}),b&&P.length>0&&c.jsxs("div",{className:"project-dropdown",children:[P.slice(0,10).map(ee=>c.jsxs("div",{className:`project-dropdown-item ${s.project===ee.Name?"selected":""}`,onMouseDown:H=>{H.preventDefault(),$(ee.Name)},children:[c.jsxs("div",{className:"project-dropdown-name",children:[ee.Name,ee.Number&&c.jsxs("span",{className:"project-dropdown-number",children:["#",ee.Number]})]}),ee.PM&&c.jsxs("div",{className:"project-dropdown-pm",children:["PM: ",ee.PM]})]},ee.Name)),P.length>10&&c.jsxs("div",{className:"project-dropdown-footer",children:["Showing 10 of ",P.length," projects"]})]}),b&&y.trim()&&P.length===0&&c.jsx("div",{className:"project-dropdown",children:c.jsx("div",{className:"project-dropdown-empty",children:"No projects found"})})]}),re.errors.includes("The project is required")&&c.jsx("span",{className:"form-error",children:"The project is required"})]}),c.jsxs("div",{className:"form-group form-group-small",children:[c.jsxs("label",{htmlFor:"orderId",className:"form-label required",children:[c.jsx("span",{className:"label-icon",children:""}),"Order ID"]}),c.jsxs("div",{className:"input-with-validation",children:[c.jsx("input",{id:"orderId",type:"text",value:s.orderId,onChange:ee=>T("orderId",ee.target.value),className:`form-input input-centered ${re.errors.includes("The Order ID is required")?"error":D===!0?"valid":""}`,placeholder:I?"...":"Auto",disabled:I}),I&&c.jsx("span",{className:"input-loading",children:""}),!I&&Y&&c.jsx("span",{className:"input-validation-icon checking",title:"Checking availability...",children:""}),!I&&!Y&&D===!0&&c.jsx("span",{className:"input-validation-icon valid",title:"Order ID is available",children:""}),!I&&!Y&&D===!1&&c.jsx("span",{className:"input-validation-icon invalid",title:"Order ID already exists",children:""})]}),re.errors.includes("The Order ID is required")&&c.jsx("span",{className:"form-error",children:"Required"}),D===!1&&c.jsx("span",{className:"form-error",children:"This Order ID already exists"})]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"status",className:"form-label required",children:"Status"}),c.jsx("select",{id:"status",value:s.status,onChange:ee=>T("status",ee.target.value),className:"form-select select-centered",children:oN.map(ee=>c.jsxs("option",{value:ee.value,children:[ee.icon," ",ee.label]},ee.value))})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"responsable",className:"form-label required",children:"Responsable"}),c.jsx("input",{id:"responsable",type:"text",value:s.responsable,onChange:ee=>T("responsable",ee.target.value),className:`form-input ${re.errors.includes("The responsible is required")?"error":""}`,placeholder:"Enter responsable name"}),re.errors.includes("The responsible is required")&&c.jsx("span",{className:"form-error",children:"The responsible is required"})]}),c.jsxs("div",{className:"form-group",children:[c.jsxs("label",{className:"form-label required",children:[c.jsx("span",{className:"label-icon",children:""}),"Priority"]}),c.jsx("div",{className:"priority-toggle-group",children:cN.map(ee=>c.jsxs("button",{type:"button",className:`priority-toggle-btn priority-${ee.value.toLowerCase()} ${s.priority===ee.value?"selected":""}`,onClick:()=>W(ee.value),style:{"--priority-color":ee.color,"--priority-bg":ee.bgColor},children:[ee.value==="Urgent"?"":ee.value==="High"?"":"",c.jsx("span",{children:ee.label})]},ee.value))})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"expectedTo",className:"form-label required",children:"Expected to"}),c.jsx("input",{id:"expectedTo",type:"date",value:s.expectedTo,onChange:ee=>T("expectedTo",ee.target.value),className:`form-input input-centered ${re.errors.includes("The expected date is required")?"error":""}`,min:new Date().toISOString().split("T")[0]}),re.errors.includes("The expected date is required")&&c.jsx("span",{className:"form-error",children:"The expected date is required"})]})]}),c.jsx("div",{className:"step1-info-column",children:q?c.jsxs("div",{className:"project-info-card",children:[c.jsxs("div",{className:"project-info-header",children:[c.jsxs("h3",{className:"project-info-title",children:[c.jsx("span",{className:"info-icon",children:""}),"Project Information"]}),c.jsx("span",{className:`header-status-badge status-${(Te=q.Status)==null?void 0:Te.toLowerCase().replace(" ","-")}`,children:q.Status||"N/A"})]}),M&&c.jsxs("div",{className:"project-progress-section",children:[c.jsxs("div",{className:"progress-header",children:[c.jsx("span",{className:"progress-label",children:"Cutting Progress"}),M.hasRealCut&&c.jsxs("span",{className:"progress-percentage",style:{color:M.color},children:[M.actualPercentage.toFixed(1),"%"]})]}),c.jsxs("div",{className:"progress-bar-container",children:[M.hasAllowed&&c.jsx("div",{className:"progress-expected-marker",style:{left:`${M.expectedPercentageOfAllowed}%`},title:`Expected: ${M.expected} m`}),c.jsx("div",{className:"progress-bar-fill",style:{width:`${M.percentage}%`,backgroundColor:M.color}})]}),c.jsxs("div",{className:"progress-stats",children:[c.jsxs("div",{className:"progress-stat-row",children:[c.jsx("span",{className:"stat-label",children:"Real Cut:"}),c.jsxs("span",{className:"stat-value-with-sync",children:[c.jsx("span",{className:"stat-value",style:{color:M.hasRealCut?M.color:"#a0aec0"},children:M.hasRealCut?`${M.realCut.toFixed(2)} m`:"No data"}),c.jsx("button",{type:"button",className:`sync-btn ${h?"syncing":""}`,onClick:N,disabled:h,title:"Sync data from AppSheet",children:h?"":""})]})]}),c.jsxs("div",{className:"progress-stat-row",children:[c.jsx("span",{className:"stat-label",children:"Expected:"}),c.jsxs("span",{className:"stat-value",children:[M.expected.toLocaleString()," m"]})]}),M.hasAllowed&&c.jsxs("div",{className:"progress-stat-row",children:[c.jsx("span",{className:"stat-label",children:"Allowed:"}),c.jsxs("span",{className:"stat-value allowed",children:[M.allowed.toLocaleString()," m"]})]})]})]}),c.jsxs("div",{className:"project-info-grid",children:[c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-label",children:"Project Manager"}),c.jsx("span",{className:"info-value",children:q.PM||"N/A"})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-label",children:"Site Supervisor"}),c.jsx("span",{className:"info-value",children:q["Site Supervisor"]||"N/A"})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-label",children:"CC/Subcontractor"}),c.jsx("span",{className:"info-value",children:q["CC/Subcontractor"]||"N/A"})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-label",children:"EBA/Non-EBA"}),c.jsx("span",{className:"info-value",children:q["EBA/Non-EBA"]||"N/A"})]}),q["Total Orders"]!==void 0&&Number(q["Total Orders"])>0&&c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-label",children:"Total Orders"}),c.jsx("span",{className:"info-value highlight",children:q["Total Orders"]})]}),q["Start Date"]&&c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-label",children:"Start Date"}),c.jsx("span",{className:"info-value",children:i0(q["Start Date"])})]}),q["Expected Completion Date"]&&c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-label",children:"Expected Completion"}),c.jsx("span",{className:"info-value",children:i0(q["Expected Completion Date"])})]})]}),q.Contact&&c.jsxs("div",{className:"project-contact-section",children:[c.jsxs("button",{className:"contact-toggle-btn",onClick:()=>u(!l),type:"button",children:[c.jsx("span",{children:" Contact Information"}),c.jsx("span",{className:"toggle-icon",children:l?"":""})]}),l&&c.jsx("div",{className:"contact-content",children:c.jsx("pre",{className:"contact-text",children:q.Contact})})]})]}):c.jsxs("div",{className:"project-info-placeholder",children:[c.jsx("span",{className:"placeholder-icon",children:""}),c.jsx("p",{children:"Select a project to view its information"})]})})]})]})}const dN=new cn;function hN(){const{formData:s,updateFormData:t,validation:r}=Er(),[n,l]=k.useState("all"),[u,h]=k.useState("all"),[g,m]=k.useState("all"),{data:y,isLoading:p}=wa({queryKey:["sheets-by-project",s.project],queryFn:()=>dN.getSheetsByProject(s.project||""),enabled:!!s.project,staleTime:0}),b=k.useMemo(()=>{if(!y)return[];const I=new Set(y.map(D=>D.Dimension).filter(Boolean));return Array.from(I).sort()},[y]),x=k.useMemo(()=>{if(!y)return[];const I=new Set(y.map(D=>D.Colour).filter(Boolean));return Array.from(I).sort()},[y]),j=k.useMemo(()=>y?y.filter(I=>{if(n!=="all"){const D=I["Off Cut"]===!0||I["Off Cut"]==="true"||I["Off Cut"]==="Yes";if(n==="yes"&&!D||n==="no"&&D)return!1}return!(u!=="all"&&I.Dimension!==u||g!=="all"&&I.Colour!==g)}):[],[y,n,u,g]),S=k.useMemo(()=>{if(!j.length)return[];const I=j.reduce((Y,N)=>{const $=N["Off Cut"]===!0||N["Off Cut"]==="true"||N["Off Cut"]==="Yes"?"offcut":"regular";return Y[$]||(Y[$]=[]),Y[$].push(N),Y},{}),D=[];if(I.regular){const Y=I.regular.reduce((N,T)=>{const $=T.Colour||"No Colour";return N[$]||(N[$]=[]),N[$].push(T),N},{});Object.keys(Y).sort().forEach(N=>{const T=Y[N].sort(($,Z)=>Z["Quantity in Factory"]-$["Quantity in Factory"]);D.push({groupKey:`regular-${N}`,groupLabel:`Regular - ${N}`,sheets:T})})}if(I.offcut){const Y=I.offcut.reduce((N,T)=>{const $=T.Colour||"No Colour";return N[$]||(N[$]=[]),N[$].push(T),N},{});Object.keys(Y).sort().forEach(N=>{const T=Y[N].sort(($,Z)=>Z["Quantity in Factory"]-$["Quantity in Factory"]);D.push({groupKey:`offcut-${N}`,groupLabel:`Off Cut - ${N}`,sheets:T})})}return D},[j]),C=I=>{const D=s.selectedSheets.findIndex(N=>N.sheetId===I["Sheet ID"]);let Y;D>=0?Y=s.selectedSheets.filter(N=>N.sheetId!==I["Sheet ID"]):Y=[...s.selectedSheets,{sheetId:I["Sheet ID"],dimension:I.Dimension||"",colour:I.Colour||"",qty:1,sheetData:I}],t({selectedSheets:Y})},A=(I,D)=>{const Y=s.selectedSheets.map(N=>N.sheetId===I?Xt(Xe({},N),{qty:Math.max(1,D)}):N);t({selectedSheets:Y})},q=I=>s.selectedSheets.some(D=>D.sheetId===I),P=I=>{const D=s.selectedSheets.find(Y=>Y.sheetId===I);return(D==null?void 0:D.qty)||0},M=(I,D)=>P(I)>D,Q=r.step2;return s.project?p?c.jsxs("div",{className:"step-container step-loading",children:[c.jsx(dn,{}),c.jsx("p",{children:"Loading sheets..."})]}):c.jsxs("div",{className:"step-container step2-sheets",children:[c.jsx("h2",{className:"step-title",children:"Sheet Selection"}),c.jsx("p",{className:"step-description",children:"Select the sheets that will be used for this order."}),c.jsxs("div",{className:"step2-filters",children:[c.jsxs("div",{className:"filter-group",children:[c.jsx("label",{htmlFor:"offcut-filter",className:"filter-label",children:"Off Cut"}),c.jsxs("select",{id:"offcut-filter",value:n,onChange:I=>l(I.target.value),className:"filter-select",children:[c.jsx("option",{value:"all",children:"All"}),c.jsx("option",{value:"no",children:"No"}),c.jsx("option",{value:"yes",children:"Yes"})]})]}),c.jsxs("div",{className:"filter-group",children:[c.jsx("label",{htmlFor:"dimension-filter",className:"filter-label",children:"Dimension"}),c.jsxs("select",{id:"dimension-filter",value:u,onChange:I=>h(I.target.value),className:"filter-select",children:[c.jsx("option",{value:"all",children:"All"}),b.map(I=>c.jsx("option",{value:I,children:I},I))]})]}),c.jsxs("div",{className:"filter-group",children:[c.jsx("label",{htmlFor:"colour-filter",className:"filter-label",children:"Colour"}),c.jsxs("select",{id:"colour-filter",value:g,onChange:I=>m(I.target.value),className:"filter-select",children:[c.jsx("option",{value:"all",children:"All"}),x.map(I=>c.jsx("option",{value:I,children:I},I))]})]})]}),c.jsxs("div",{className:"step2-content-layout",children:[c.jsx("div",{className:"step2-main-content",children:j.length===0?c.jsx("div",{className:"step-empty",children:c.jsx("p",{children:"No sheets found for this project."})}):c.jsx("div",{className:"step2-table-container",children:c.jsxs("table",{className:"step2-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{className:"col-checkbox",children:"Select"}),c.jsx("th",{className:"col-order-qty",children:"Order Qty"}),c.jsx("th",{className:"col-dimension",children:"Dimension"}),c.jsx("th",{className:"col-colour",children:"Colour"}),c.jsx("th",{className:"col-qty-factory",children:"Qty Factory"}),c.jsx("th",{className:"col-qty-store",children:"Qty Store"}),c.jsx("th",{className:"col-offcut",children:"Off Cut"}),c.jsx("th",{className:"col-comment",children:"Comment"})]})}),c.jsx("tbody",{children:S.map(I=>c.jsxs(wi.Fragment,{children:[c.jsx("tr",{className:"group-header",children:c.jsxs("td",{colSpan:8,className:"group-header-cell",style:{textAlign:"center"},children:[c.jsx("span",{className:"group-label",children:I.groupLabel}),c.jsxs("span",{className:"group-count",children:["(",I.sheets.length," sheets)"]})]})}),I.sheets.map(D=>{const Y=q(D["Sheet ID"]),N=P(D["Sheet ID"]),T=D["Quantity in Factory"]<=0,$=Y&&M(D["Sheet ID"],D["Quantity in Factory"]);return c.jsxs("tr",{className:`${Y?"selected":""} ${T?"low-stock":""} ${$?"exceeds-qty":""}`,children:[c.jsx("td",{className:"col-checkbox",children:c.jsx("input",{type:"checkbox",checked:Y,onChange:()=>C(D),className:"sheet-checkbox"})}),c.jsx("td",{className:"col-order-qty",children:Y?c.jsxs("div",{className:"qty-input-wrapper",children:[c.jsx("input",{type:"number",min:"1",value:N,onChange:Z=>A(D["Sheet ID"],parseInt(Z.target.value,10)||1),className:`qty-input ${$?"exceeds-qty-input":""}`}),$&&c.jsx("span",{className:"qty-warning-icon",title:`Order Qty (${N}) exceeds Factory Qty (${D["Quantity in Factory"]})`,children:""})]}):c.jsx("span",{className:"qty-placeholder",children:"-"})}),c.jsx("td",{className:"col-dimension",children:D.Dimension}),c.jsx("td",{className:"col-colour",children:D.Colour}),c.jsx("td",{className:`col-qty-factory ${T?"zero-qty":""}`,children:D["Quantity in Factory"]}),c.jsx("td",{className:"col-qty-store",children:D["Quantity in Store"]}),c.jsx("td",{className:"col-offcut",children:D["Off Cut"]?"Yes":"No"}),c.jsx("td",{className:"col-comment",children:c.jsx("span",{className:"comment-text",title:D.Comment||void 0,children:D.Comment||"-"})})]},D["Sheet ID"])})]},I.groupKey))})]})})}),s.selectedSheets.length>0&&c.jsxs("div",{className:"step2-summary-sidebar",children:[c.jsxs("div",{className:"summary-header",children:[c.jsx("h3",{children:"Selected Sheets"}),c.jsx("span",{className:"summary-badge",children:s.selectedSheets.length})]}),c.jsx("div",{className:"summary-items",children:s.selectedSheets.map(I=>{const D=y==null?void 0:y.find(T=>T["Sheet ID"]===I.sheetId),Y=(D==null?void 0:D["Quantity in Factory"])||0,N=I.qty>Y;return c.jsxs("div",{className:`summary-item ${N?"exceeds-qty":""}`,children:[c.jsxs("div",{className:"summary-item-info",children:[c.jsx("span",{className:"summary-item-dimension",children:I.dimension}),c.jsx("span",{className:"summary-item-colour",children:I.colour}),N&&c.jsxs("span",{className:"summary-item-warning",children:[" Order Qty (",I.qty,") exceeds Factory Qty (",Y,")"]})]}),c.jsxs("div",{className:"summary-item-actions",children:[c.jsxs("div",{className:"summary-qty-wrapper",children:[c.jsx("input",{type:"number",min:"1",value:I.qty,onChange:T=>A(I.sheetId,parseInt(T.target.value,10)||1),className:`summary-qty-input ${N?"exceeds-qty-input":""}`}),N&&c.jsx("span",{className:"summary-qty-warning-icon",title:`Order Qty (${I.qty}) exceeds Factory Qty (${Y})`,children:""})]}),c.jsx("button",{onClick:()=>C({"Sheet ID":I.sheetId,Dimension:I.dimension,Colour:I.colour,"Quantity in Factory":0,"Quantity in Store":0,"Off Cut":!1,Comment:""}),className:"summary-remove-btn",title:"Remove",children:""})]})]},I.sheetId)})}),c.jsx("div",{className:"summary-footer",children:c.jsxs("div",{className:"summary-colour",children:[c.jsx("span",{className:"summary-colour-label",children:"Order Colour:"}),c.jsx("span",{className:"summary-colour-value",children:s.colour||"No defined"})]})})]})]}),Q.errors.length>0&&c.jsxs("div",{className:"step-validation-errors",children:[c.jsx("p",{className:"validation-title",children:"Please correct the following errors:"}),c.jsx("ul",{children:Q.errors.map((I,D)=>c.jsx("li",{children:I},D))})]})]}):c.jsx("div",{className:"step-container step-error",children:c.jsx("p",{children:"Please select a project in Step 1"})})}var ro={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var fN=ro.exports,o0;function mN(){return o0||(o0=1,function(s,t){((r,n)=>{s.exports=n()})(fN,function r(){var n=typeof self!="undefined"?self:typeof window!="undefined"?window:n!==void 0?n:{},l,u=!n.document&&!!n.postMessage,h=n.IS_PAPA_WORKER||!1,g={},m=0,y={};function p(N){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(T){var $=I(T);$.chunkSize=parseInt($.chunkSize),T.step||T.chunk||($.chunkSize=null),this._handle=new C($),(this._handle.streamer=this)._config=$}.call(this,N),this.parseChunk=function(T,$){var Z=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<Z){let re=this._config.newline;re||(W=this._config.quoteChar||'"',re=this._handle.guessLineEndings(T,W)),T=[...T.split(re).slice(Z)].join(re)}this.isFirstChunk&&Y(this._config.beforeFirstChunk)&&(W=this._config.beforeFirstChunk(T))!==void 0&&(T=W),this.isFirstChunk=!1,this._halted=!1;var Z=this._partialLine+T,W=(this._partialLine="",this._handle.parse(Z,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(T=W.meta.cursor,Z=(this._finished||(this._partialLine=Z.substring(T-this._baseIndex),this._baseIndex=T),W&&W.data&&(this._rowCount+=W.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),h)n.postMessage({results:W,workerId:y.WORKER_ID,finished:Z});else if(Y(this._config.chunk)&&!$){if(this._config.chunk(W,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=W=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(W.data),this._completeResults.errors=this._completeResults.errors.concat(W.errors),this._completeResults.meta=W.meta),this._completed||!Z||!Y(this._config.complete)||W&&W.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),Z||W&&W.meta.paused||this._nextChunk(),W}this._halted=!0},this._sendError=function(T){Y(this._config.error)?this._config.error(T):h&&this._config.error&&n.postMessage({workerId:y.WORKER_ID,error:T,finished:!1})}}function b(N){var T;(N=N||{}).chunkSize||(N.chunkSize=y.RemoteChunkSize),p.call(this,N),this._nextChunk=u?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function($){this._input=$,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(T=new XMLHttpRequest,this._config.withCredentials&&(T.withCredentials=this._config.withCredentials),u||(T.onload=D(this._chunkLoaded,this),T.onerror=D(this._chunkError,this)),T.open(this._config.downloadRequestBody?"POST":"GET",this._input,!u),this._config.downloadRequestHeaders){var $,Z=this._config.downloadRequestHeaders;for($ in Z)T.setRequestHeader($,Z[$])}var W;this._config.chunkSize&&(W=this._start+this._config.chunkSize-1,T.setRequestHeader("Range","bytes="+this._start+"-"+W));try{T.send(this._config.downloadRequestBody)}catch(re){this._chunkError(re.message)}u&&T.status===0&&this._chunkError()}},this._chunkLoaded=function(){T.readyState===4&&(T.status<200||400<=T.status?this._chunkError():(this._start+=this._config.chunkSize||T.responseText.length,this._finished=!this._config.chunkSize||this._start>=($=>($=$.getResponseHeader("Content-Range"))!==null?parseInt($.substring($.lastIndexOf("/")+1)):-1)(T),this.parseChunk(T.responseText)))},this._chunkError=function($){$=T.statusText||$,this._sendError(new Error($))}}function x(N){(N=N||{}).chunkSize||(N.chunkSize=y.LocalChunkSize),p.call(this,N);var T,$,Z=typeof FileReader!="undefined";this.stream=function(W){this._input=W,$=W.slice||W.webkitSlice||W.mozSlice,Z?((T=new FileReader).onload=D(this._chunkLoaded,this),T.onerror=D(this._chunkError,this)):T=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var W=this._input,re=(this._config.chunkSize&&(re=Math.min(this._start+this._config.chunkSize,this._input.size),W=$.call(W,this._start,re)),T.readAsText(W,this._config.encoding));Z||this._chunkLoaded({target:{result:re}})},this._chunkLoaded=function(W){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(W.target.result)},this._chunkError=function(){this._sendError(T.error)}}function j(N){var T;p.call(this,N=N||{}),this.stream=function($){return T=$,this._nextChunk()},this._nextChunk=function(){var $,Z;if(!this._finished)return $=this._config.chunkSize,T=$?(Z=T.substring(0,$),T.substring($)):(Z=T,""),this._finished=!T,this.parseChunk(Z)}}function S(N){p.call(this,N=N||{});var T=[],$=!0,Z=!1;this.pause=function(){p.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){p.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(W){this._input=W,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){Z&&T.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),T.length?this.parseChunk(T.shift()):$=!0},this._streamData=D(function(W){try{T.push(typeof W=="string"?W:W.toString(this._config.encoding)),$&&($=!1,this._checkIsFinished(),this.parseChunk(T.shift()))}catch(re){this._streamError(re)}},this),this._streamError=D(function(W){this._streamCleanUp(),this._sendError(W)},this),this._streamEnd=D(function(){this._streamCleanUp(),Z=!0,this._streamData("")},this),this._streamCleanUp=D(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function C(N){var T,$,Z,W,re=Math.pow(2,53),Te=-re,ee=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,H=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,G=this,X=0,J=0,le=!1,ie=!1,se=[],te={data:[],errors:[],meta:{}};function ve(be){return N.skipEmptyLines==="greedy"?be.join("").trim()==="":be.length===1&&be[0].length===0}function Oe(){if(te&&Z&&(Tt("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+y.DefaultDelimiter+"'"),Z=!1),N.skipEmptyLines&&(te.data=te.data.filter(function(me){return!ve(me)})),He()){let me=function(Ye,We){Y(N.transformHeader)&&(Ye=N.transformHeader(Ye,We)),se.push(Ye)};if(te)if(Array.isArray(te.data[0])){for(var be=0;He()&&be<te.data.length;be++)te.data[be].forEach(me);te.data.splice(0,1)}else te.data.forEach(me)}function we(me,Ye){for(var We=N.header?{}:[],De=0;De<me.length;De++){var qe=De,_e=me[De],_e=((at,pe)=>(Ve=>(N.dynamicTypingFunction&&N.dynamicTyping[Ve]===void 0&&(N.dynamicTyping[Ve]=N.dynamicTypingFunction(Ve)),(N.dynamicTyping[Ve]||N.dynamicTyping)===!0))(at)?pe==="true"||pe==="TRUE"||pe!=="false"&&pe!=="FALSE"&&((Ve=>{if(ee.test(Ve)&&(Ve=parseFloat(Ve),Te<Ve&&Ve<re))return 1})(pe)?parseFloat(pe):H.test(pe)?new Date(pe):pe===""?null:pe):pe)(qe=N.header?De>=se.length?"__parsed_extra":se[De]:qe,_e=N.transform?N.transform(_e,qe):_e);qe==="__parsed_extra"?(We[qe]=We[qe]||[],We[qe].push(_e)):We[qe]=_e}return N.header&&(De>se.length?Tt("FieldMismatch","TooManyFields","Too many fields: expected "+se.length+" fields but parsed "+De,J+Ye):De<se.length&&Tt("FieldMismatch","TooFewFields","Too few fields: expected "+se.length+" fields but parsed "+De,J+Ye)),We}var Ie;te&&(N.header||N.dynamicTyping||N.transform)&&(Ie=1,!te.data.length||Array.isArray(te.data[0])?(te.data=te.data.map(we),Ie=te.data.length):te.data=we(te.data,0),N.header&&te.meta&&(te.meta.fields=se),J+=Ie)}function He(){return N.header&&se.length===0}function Tt(be,we,Ie,me){be={type:be,code:we,message:Ie},me!==void 0&&(be.row=me),te.errors.push(be)}Y(N.step)&&(W=N.step,N.step=function(be){te=be,He()?Oe():(Oe(),te.data.length!==0&&(X+=be.data.length,N.preview&&X>N.preview?$.abort():(te.data=te.data[0],W(te,G))))}),this.parse=function(be,we,Ie){var me=N.quoteChar||'"',me=(N.newline||(N.newline=this.guessLineEndings(be,me)),Z=!1,N.delimiter?Y(N.delimiter)&&(N.delimiter=N.delimiter(be),te.meta.delimiter=N.delimiter):((me=((Ye,We,De,qe,_e)=>{var at,pe,Ve,ha;_e=_e||[",","	","|",";",y.RECORD_SEP,y.UNIT_SEP];for(var fa=0;fa<_e.length;fa++){for(var ea,Ja=_e[fa],bt=0,ta=0,Ke=0,Le=(Ve=void 0,new q({comments:qe,delimiter:Ja,newline:We,preview:10}).parse(Ye)),xt=0;xt<Le.data.length;xt++)De&&ve(Le.data[xt])?Ke++:(ea=Le.data[xt].length,ta+=ea,Ve===void 0?Ve=ea:0<ea&&(bt+=Math.abs(ea-Ve),Ve=ea));0<Le.data.length&&(ta/=Le.data.length-Ke),(pe===void 0||bt<=pe)&&(ha===void 0||ha<ta)&&1.99<ta&&(pe=bt,at=Ja,ha=ta)}return{successful:!!(N.delimiter=at),bestDelimiter:at}})(be,N.newline,N.skipEmptyLines,N.comments,N.delimitersToGuess)).successful?N.delimiter=me.bestDelimiter:(Z=!0,N.delimiter=y.DefaultDelimiter),te.meta.delimiter=N.delimiter),I(N));return N.preview&&N.header&&me.preview++,T=be,$=new q(me),te=$.parse(T,we,Ie),Oe(),le?{meta:{paused:!0}}:te||{meta:{paused:!1}}},this.paused=function(){return le},this.pause=function(){le=!0,$.abort(),T=Y(N.chunk)?"":T.substring($.getCharIndex())},this.resume=function(){G.streamer._halted?(le=!1,G.streamer.parseChunk(T,!0)):setTimeout(G.resume,3)},this.aborted=function(){return ie},this.abort=function(){ie=!0,$.abort(),te.meta.aborted=!0,Y(N.complete)&&N.complete(te),T=""},this.guessLineEndings=function(Ye,me){Ye=Ye.substring(0,1048576);var me=new RegExp(A(me)+"([^]*?)"+A(me),"gm"),Ie=(Ye=Ye.replace(me,"")).split("\r"),me=Ye.split(`
`),Ye=1<me.length&&me[0].length<Ie[0].length;if(Ie.length===1||Ye)return`
`;for(var We=0,De=0;De<Ie.length;De++)Ie[De][0]===`
`&&We++;return We>=Ie.length/2?`\r
`:"\r"}}function A(N){return N.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function q(N){var T=(N=N||{}).delimiter,$=N.newline,Z=N.comments,W=N.step,re=N.preview,Te=N.fastMode,ee=null,H=!1,G=N.quoteChar==null?'"':N.quoteChar,X=G;if(N.escapeChar!==void 0&&(X=N.escapeChar),(typeof T!="string"||-1<y.BAD_DELIMITERS.indexOf(T))&&(T=","),Z===T)throw new Error("Comment character same as delimiter");Z===!0?Z="#":(typeof Z!="string"||-1<y.BAD_DELIMITERS.indexOf(Z))&&(Z=!1),$!==`
`&&$!=="\r"&&$!==`\r
`&&($=`
`);var J=0,le=!1;this.parse=function(ie,se,te){if(typeof ie!="string")throw new Error("Input must be a string");var ve=ie.length,Oe=T.length,He=$.length,Tt=Z.length,be=Y(W),we=[],Ie=[],me=[],Ye=J=0;if(!ie)return bt();if(Te||Te!==!1&&ie.indexOf(G)===-1){for(var We=ie.split($),De=0;De<We.length;De++){if(me=We[De],J+=me.length,De!==We.length-1)J+=$.length;else if(te)return bt();if(!Z||me.substring(0,Tt)!==Z){if(be){if(we=[],ha(me.split(T)),ta(),le)return bt()}else ha(me.split(T));if(re&&re<=De)return we=we.slice(0,re),bt(!0)}}return bt()}for(var qe=ie.indexOf(T,J),_e=ie.indexOf($,J),at=new RegExp(A(X)+A(G),"g"),pe=ie.indexOf(G,J);;)if(ie[J]===G)for(pe=J,J++;;){if((pe=ie.indexOf(G,pe+1))===-1)return te||Ie.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:we.length,index:J}),ea();if(pe===ve-1)return ea(ie.substring(J,pe).replace(at,G));if(G===X&&ie[pe+1]===X)pe++;else if(G===X||pe===0||ie[pe-1]!==X){qe!==-1&&qe<pe+1&&(qe=ie.indexOf(T,pe+1));var Ve=fa((_e=_e!==-1&&_e<pe+1?ie.indexOf($,pe+1):_e)===-1?qe:Math.min(qe,_e));if(ie.substr(pe+1+Ve,Oe)===T){me.push(ie.substring(J,pe).replace(at,G)),ie[J=pe+1+Ve+Oe]!==G&&(pe=ie.indexOf(G,J)),qe=ie.indexOf(T,J),_e=ie.indexOf($,J);break}if(Ve=fa(_e),ie.substring(pe+1+Ve,pe+1+Ve+He)===$){if(me.push(ie.substring(J,pe).replace(at,G)),Ja(pe+1+Ve+He),qe=ie.indexOf(T,J),pe=ie.indexOf(G,J),be&&(ta(),le))return bt();if(re&&we.length>=re)return bt(!0);break}Ie.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:we.length,index:J}),pe++}}else if(Z&&me.length===0&&ie.substring(J,J+Tt)===Z){if(_e===-1)return bt();J=_e+He,_e=ie.indexOf($,J),qe=ie.indexOf(T,J)}else if(qe!==-1&&(qe<_e||_e===-1))me.push(ie.substring(J,qe)),J=qe+Oe,qe=ie.indexOf(T,J);else{if(_e===-1)break;if(me.push(ie.substring(J,_e)),Ja(_e+He),be&&(ta(),le))return bt();if(re&&we.length>=re)return bt(!0)}return ea();function ha(Ke){we.push(Ke),Ye=J}function fa(Ke){var Le=0;return Le=Ke!==-1&&(Ke=ie.substring(pe+1,Ke))&&Ke.trim()===""?Ke.length:Le}function ea(Ke){return te||(Ke===void 0&&(Ke=ie.substring(J)),me.push(Ke),J=ve,ha(me),be&&ta()),bt()}function Ja(Ke){J=Ke,ha(me),me=[],_e=ie.indexOf($,J)}function bt(Ke){if(N.header&&!se&&we.length&&!H){var Le=we[0],xt=Object.create(null),Et=new Set(Le);let Ui=!1;for(let Za=0;Za<Le.length;Za++){let aa=Le[Za];if(xt[aa=Y(N.transformHeader)?N.transformHeader(aa,Za):aa]){let ja,Cr=xt[aa];for(;ja=aa+"_"+Cr,Cr++,Et.has(ja););Et.add(ja),Le[Za]=ja,xt[aa]++,Ui=!0,(ee=ee===null?{}:ee)[ja]=aa}else xt[aa]=1,Le[Za]=aa;Et.add(aa)}Ui&&console.warn("Duplicate headers found and renamed."),H=!0}return{data:we,errors:Ie,meta:{delimiter:T,linebreak:$,aborted:le,truncated:!!Ke,cursor:Ye+(se||0),renamedHeaders:ee}}}function ta(){W(bt()),we=[],Ie=[]}},this.abort=function(){le=!0},this.getCharIndex=function(){return J}}function P(N){var T=N.data,$=g[T.workerId],Z=!1;if(T.error)$.userError(T.error,T.file);else if(T.results&&T.results.data){var W={abort:function(){Z=!0,M(T.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:Q,resume:Q};if(Y($.userStep)){for(var re=0;re<T.results.data.length&&($.userStep({data:T.results.data[re],errors:T.results.errors,meta:T.results.meta},W),!Z);re++);delete T.results}else Y($.userChunk)&&($.userChunk(T.results,W,T.file),delete T.results)}T.finished&&!Z&&M(T.workerId,T.results)}function M(N,T){var $=g[N];Y($.userComplete)&&$.userComplete(T),$.terminate(),delete g[N]}function Q(){throw new Error("Not implemented.")}function I(N){if(typeof N!="object"||N===null)return N;var T,$=Array.isArray(N)?[]:{};for(T in N)$[T]=I(N[T]);return $}function D(N,T){return function(){N.apply(T,arguments)}}function Y(N){return typeof N=="function"}return y.parse=function(N,T){var $=(T=T||{}).dynamicTyping||!1;if(Y($)&&(T.dynamicTypingFunction=$,$={}),T.dynamicTyping=$,T.transform=!!Y(T.transform)&&T.transform,!T.worker||!y.WORKERS_SUPPORTED)return $=null,y.NODE_STREAM_INPUT,typeof N=="string"?(N=(Z=>Z.charCodeAt(0)!==65279?Z:Z.slice(1))(N),$=new(T.download?b:j)(T)):N.readable===!0&&Y(N.read)&&Y(N.on)?$=new S(T):(n.File&&N instanceof File||N instanceof Object)&&($=new x(T)),$.stream(N);($=(()=>{var Z;return!!y.WORKERS_SUPPORTED&&(Z=(()=>{var W=n.URL||n.webkitURL||null,re=r.toString();return y.BLOB_URL||(y.BLOB_URL=W.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",re,")();"],{type:"text/javascript"})))})(),(Z=new n.Worker(Z)).onmessage=P,Z.id=m++,g[Z.id]=Z)})()).userStep=T.step,$.userChunk=T.chunk,$.userComplete=T.complete,$.userError=T.error,T.step=Y(T.step),T.chunk=Y(T.chunk),T.complete=Y(T.complete),T.error=Y(T.error),delete T.worker,$.postMessage({input:N,config:T,workerId:$.id})},y.unparse=function(N,T){var $=!1,Z=!0,W=",",re=`\r
`,Te='"',ee=Te+Te,H=!1,G=null,X=!1,J=((()=>{if(typeof T=="object"){if(typeof T.delimiter!="string"||y.BAD_DELIMITERS.filter(function(se){return T.delimiter.indexOf(se)!==-1}).length||(W=T.delimiter),typeof T.quotes!="boolean"&&typeof T.quotes!="function"&&!Array.isArray(T.quotes)||($=T.quotes),typeof T.skipEmptyLines!="boolean"&&typeof T.skipEmptyLines!="string"||(H=T.skipEmptyLines),typeof T.newline=="string"&&(re=T.newline),typeof T.quoteChar=="string"&&(Te=T.quoteChar),typeof T.header=="boolean"&&(Z=T.header),Array.isArray(T.columns)){if(T.columns.length===0)throw new Error("Option columns is empty");G=T.columns}T.escapeChar!==void 0&&(ee=T.escapeChar+Te),T.escapeFormulae instanceof RegExp?X=T.escapeFormulae:typeof T.escapeFormulae=="boolean"&&T.escapeFormulae&&(X=/^[=+\-@\t\r].*$/)}})(),new RegExp(A(Te),"g"));if(typeof N=="string"&&(N=JSON.parse(N)),Array.isArray(N)){if(!N.length||Array.isArray(N[0]))return le(null,N,H);if(typeof N[0]=="object")return le(G||Object.keys(N[0]),N,H)}else if(typeof N=="object")return typeof N.data=="string"&&(N.data=JSON.parse(N.data)),Array.isArray(N.data)&&(N.fields||(N.fields=N.meta&&N.meta.fields||G),N.fields||(N.fields=Array.isArray(N.data[0])?N.fields:typeof N.data[0]=="object"?Object.keys(N.data[0]):[]),Array.isArray(N.data[0])||typeof N.data[0]=="object"||(N.data=[N.data])),le(N.fields||[],N.data||[],H);throw new Error("Unable to serialize unrecognized input");function le(se,te,ve){var Oe="",He=(typeof se=="string"&&(se=JSON.parse(se)),typeof te=="string"&&(te=JSON.parse(te)),Array.isArray(se)&&0<se.length),Tt=!Array.isArray(te[0]);if(He&&Z){for(var be=0;be<se.length;be++)0<be&&(Oe+=W),Oe+=ie(se[be],be);0<te.length&&(Oe+=re)}for(var we=0;we<te.length;we++){var Ie=(He?se:te[we]).length,me=!1,Ye=He?Object.keys(te[we]).length===0:te[we].length===0;if(ve&&!He&&(me=ve==="greedy"?te[we].join("").trim()==="":te[we].length===1&&te[we][0].length===0),ve==="greedy"&&He){for(var We=[],De=0;De<Ie;De++){var qe=Tt?se[De]:De;We.push(te[we][qe])}me=We.join("").trim()===""}if(!me){for(var _e=0;_e<Ie;_e++){0<_e&&!Ye&&(Oe+=W);var at=He&&Tt?se[_e]:_e;Oe+=ie(te[we][at],_e)}we<te.length-1&&(!ve||0<Ie&&!Ye)&&(Oe+=re)}}return Oe}function ie(se,te){var ve,Oe;return se==null?"":se.constructor===Date?JSON.stringify(se).slice(1,25):(Oe=!1,X&&typeof se=="string"&&X.test(se)&&(se="'"+se,Oe=!0),ve=se.toString().replace(J,ee),(Oe=Oe||$===!0||typeof $=="function"&&$(se,te)||Array.isArray($)&&$[te]||((He,Tt)=>{for(var be=0;be<Tt.length;be++)if(-1<He.indexOf(Tt[be]))return!0;return!1})(ve,y.BAD_DELIMITERS)||-1<ve.indexOf(W)||ve.charAt(0)===" "||ve.charAt(ve.length-1)===" ")?Te+ve+Te:ve)}},y.RECORD_SEP="",y.UNIT_SEP="",y.BYTE_ORDER_MARK="\uFEFF",y.BAD_DELIMITERS=["\r",`
`,'"',y.BYTE_ORDER_MARK],y.WORKERS_SUPPORTED=!u&&!!n.Worker,y.NODE_STREAM_INPUT=1,y.LocalChunkSize=10485760,y.RemoteChunkSize=5242880,y.DefaultDelimiter=",",y.Parser=q,y.ParserHandle=C,y.NetworkStreamer=b,y.FileStreamer=x,y.StringStreamer=j,y.ReadableStreamStreamer=S,n.jQuery&&((l=n.jQuery).fn.parse=function(N){var T=N.config||{},$=[];return this.each(function(re){if(!(l(this).prop("tagName").toUpperCase()==="INPUT"&&l(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var Te=0;Te<this.files.length;Te++)$.push({file:this.files[Te],inputElem:this,instanceConfig:l.extend({},T)})}),Z(),this;function Z(){if($.length===0)Y(N.complete)&&N.complete();else{var re,Te,ee,H,G=$[0];if(Y(N.before)){var X=N.before(G.file,G.inputElem);if(typeof X=="object"){if(X.action==="abort")return re="AbortError",Te=G.file,ee=G.inputElem,H=X.reason,void(Y(N.error)&&N.error({name:re},Te,ee,H));if(X.action==="skip")return void W();typeof X.config=="object"&&(G.instanceConfig=l.extend(G.instanceConfig,X.config))}else if(X==="skip")return void W()}var J=G.instanceConfig.complete;G.instanceConfig.complete=function(le){Y(J)&&J(le,G.file,G.inputElem),W()},y.parse(G.file,G.instanceConfig)}}function W(){$.splice(0,1),Z()}}),h&&(n.onmessage=function(N){N=N.data,y.WORKER_ID===void 0&&N&&(y.WORKER_ID=N.workerId),typeof N.input=="string"?n.postMessage({workerId:y.WORKER_ID,results:y.parse(N.input,N.config),finished:!0}):(n.File&&N.input instanceof File||N.input instanceof Object)&&(N=y.parse(N.input,N.config))&&n.postMessage({workerId:y.WORKER_ID,results:N,finished:!0})}),(b.prototype=Object.create(p.prototype)).constructor=b,(x.prototype=Object.create(p.prototype)).constructor=x,(j.prototype=Object.create(j.prototype)).constructor=j,(S.prototype=Object.create(p.prototype)).constructor=S,y})}(ro)),ro.exports}var gN=mN();const yN=d0(gN);function pN(){const{formData:s,updateFormData:t,validation:r}=Er(),[n,l]=k.useState(!1),[u,h]=k.useState(null),g=k.useRef(null),m=j=>{var C;const S=(C=j.target.files)==null?void 0:C[0];if(S){if(!S.name.endsWith(".csv")){h("Please select a CSV file");return}l(!0),h(null),yN.parse(S,{header:!0,skipEmptyLines:!0,complete:A=>{try{const q=y(A.data);t({panels:q,csvFile:S}),h(null)}catch(q){h(q instanceof Error?q.message:"Error processing the CSV file")}finally{l(!1)}},error:A=>{h(`Error reading CSV: ${A.message}`),l(!1)}})}},y=j=>{const S=[];for(const C of j){const A=C.Name||C.PartName||C.Value||C["Part Name"]||"",q=C.Area||C.PartArea||C["Part Area"]||"0",P=parseFloat(q)||0,M=C["Cut Distance"]||C["Cut Length"]||C.CutDistance||C.CutLength||"0",Q=parseFloat(M)||0,I=C.SheetName||C["Sheet Name"]||C.Sheet||"",D=C.NestNumber||C["Nest Number"]||C.Nest||"",Y=A.toUpperCase();if(Y.includes("OFFCUT")||Y.includes("REMNANT")||Y.includes("SCRAP")||!A||A.trim()==="")continue;const N=p(C,P,Q);S.push({name:A.trim(),area:P,cutDistance:Q,sheetName:I.trim(),nestNumber:D.trim(),comment:N})}if(S.length===0)throw new Error("No valid panels found in the CSV. Please check that the file contains the correct columns.");return S},p=(j,S,C)=>{const A=[];return j.Comment&&A.push(j.Comment),S>0&&A.push(`Area: ${S.toFixed(2)}`),C>0&&A.push(`Cut: ${C.toFixed(2)}`),A.join(" | ")},b=()=>{t({panels:[],csvFile:null}),h(null),g.current&&(g.current.value="")},x=r.step3;return c.jsxs("div",{className:"step-container step3-panels",children:[c.jsx("h2",{className:"step-title",children:"Import Panels from CSV"}),c.jsx("p",{className:"step-description",children:"Upload a CSV file with the panels. The file must contain the following columns: Name/PartName/Value, Area/PartArea, Cut Distance/Cut Length, SheetName, NestNumber."}),c.jsxs("div",{className:"step3-upload",children:[c.jsxs("div",{className:"upload-area",children:[c.jsx("input",{ref:g,type:"file",accept:".csv",onChange:m,className:"file-input",id:"csv-file-input",disabled:n}),c.jsx("label",{htmlFor:"csv-file-input",className:`upload-label ${n?"processing":""} ${s.csvFile?"uploaded":""}`,children:n?c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"upload-icon",children:""}),c.jsx("span",{children:"Processing CSV..."})]}):s.csvFile?c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"upload-icon",children:""}),c.jsx("span",{children:s.csvFile.name}),c.jsxs("span",{className:"upload-size",children:["(",(s.csvFile.size/1024).toFixed(2)," KB)"]})]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"upload-icon",children:""}),c.jsx("span",{children:"Click to select CSV file"})]})})]}),s.csvFile&&c.jsx("button",{type:"button",onClick:b,className:"clear-button",disabled:n,children:"Clear"})]}),u&&c.jsx("div",{className:"step-error-message",children:c.jsx("p",{children:u})}),c.jsxs("div",{className:"step3-comment-section",children:[c.jsx("label",{htmlFor:"order-comment",className:"comment-label",children:"Order Comment (Optional)"}),c.jsx("textarea",{id:"order-comment",value:s.orderComment||"",onChange:j=>t({orderComment:j.target.value}),className:"comment-textarea",placeholder:"Add any additional comments or notes for this order...",rows:3})]}),s.panels.length>0&&c.jsxs("div",{className:"step3-preview",children:[c.jsxs("div",{className:"preview-header",children:[c.jsx("h3",{children:"Preview of Processed Panels"}),c.jsxs("span",{className:"preview-count",children:[s.panels.length," panel(es)"]})]}),c.jsxs("div",{className:"preview-table-container",children:[c.jsxs("table",{className:"preview-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Name"}),c.jsx("th",{children:"Area"}),c.jsx("th",{children:"Cut Distance"}),c.jsx("th",{children:"Sheet Name"}),c.jsx("th",{children:"Nest Number"}),c.jsx("th",{children:"Comment"})]})}),c.jsx("tbody",{children:s.panels.slice(0,50).map((j,S)=>c.jsxs("tr",{children:[c.jsx("td",{className:"col-name",children:j.name}),c.jsx("td",{className:"col-number",children:j.area.toFixed(2)}),c.jsx("td",{className:"col-number",children:j.cutDistance.toFixed(2)}),c.jsx("td",{className:"col-text",children:j.sheetName}),c.jsx("td",{className:"col-text",children:j.nestNumber}),c.jsx("td",{className:"col-comment",children:j.comment})]},S))})]}),s.panels.length>50&&c.jsxs("p",{className:"preview-more",children:["... y ",s.panels.length-50," panel(es) ms"]})]}),c.jsxs("div",{className:"preview-summary",children:[c.jsxs("div",{className:"summary-item",children:[c.jsx("span",{className:"summary-label",children:"Total Panels:"}),c.jsx("span",{className:"summary-value",children:s.panels.length})]}),c.jsxs("div",{className:"summary-item",children:[c.jsx("span",{className:"summary-label",children:"Total Area:"}),c.jsxs("span",{className:"summary-value",children:[s.panels.reduce((j,S)=>j+S.area,0).toFixed(2)," ","m"]})]}),c.jsxs("div",{className:"summary-item",children:[c.jsx("span",{className:"summary-label",children:"Cut Distance Total:"}),c.jsxs("span",{className:"summary-value",children:[s.panels.reduce((j,S)=>j+S.cutDistance,0).toFixed(2)," ","m"]})]})]})]}),x.errors.length>0&&c.jsxs("div",{className:"step-validation-errors",children:[c.jsx("p",{className:"validation-title",children:"Please correct the following errors:"}),c.jsx("ul",{children:x.errors.map((j,S)=>c.jsx("li",{children:j},S))})]})]})}function vN(s){return["Reflections - Sea Tower 1","[2325] Brisbane Square Supply Only"].includes(s)}function bN(){const{formData:s,validation:t,setLoading:r,setError:n,setSuccess:l,resetWizard:u,isLoading:h}=Er(),[g,m]=k.useState(!1),[y,p]=k.useState(null),b=vN(s.project),x=()=>_(null,null,function*(){if(t.step4.isValid){r(!0),n(null),l(!1);try{yield new Promise(M=>setTimeout(M,2e3)),p({success:!0,message:"Order created successfully (simulation mode)",errors:[]}),l(!0)}catch(P){const M=P instanceof Error?P.message:"Unknown error";n(M),p({success:!1,message:M})}finally{r(!1),m(!1)}}}),j=()=>{u(),p(null),m(!1)},S=t.step4,C=s.panels.reduce((P,M)=>P+M.area,0),A=s.panels.reduce((P,M)=>P+M.cutDistance,0),q=s.selectedSheets.reduce((P,M)=>P+M.qty,0);return y!=null&&y.success?c.jsx("div",{className:"step-container step4-review step-success",children:c.jsxs("div",{className:"success-content",children:[c.jsx("div",{className:"success-icon",children:""}),c.jsx("h2",{className:"success-title",children:"Order Created Successfully!"}),c.jsx("p",{className:"success-message",children:y.message}),c.jsxs("p",{className:"success-order-id",children:[c.jsx("strong",{children:"Order ID:"})," ",s.orderId]}),y.errors&&y.errors.length>0&&c.jsxs("div",{className:"success-warnings",children:[c.jsx("p",{className:"warnings-title",children:"Warnings:"}),c.jsx("ul",{children:y.errors.map((P,M)=>c.jsx("li",{children:P},M))})]}),c.jsx("div",{className:"success-actions",children:c.jsx("button",{type:"button",onClick:j,className:"action-button action-button-primary",children:"Create New Order"})})]})}):c.jsxs("div",{className:"step-container step4-review",children:[c.jsx("h2",{className:"step-title",children:"Review and Create Order"}),c.jsx("p",{className:"step-description",children:"Review all the information before creating the order."}),h&&c.jsxs("div",{className:"step-loading-overlay",children:[c.jsx(dn,{}),c.jsx("p",{children:"Creating order..."})]}),c.jsxs("div",{className:"step4-sections",children:[c.jsxs("section",{className:"review-section",children:[c.jsx("h3",{className:"section-title",children:"Order Information"}),c.jsxs("div",{className:"review-grid",children:[c.jsxs("div",{className:"review-item",children:[c.jsx("span",{className:"review-label",children:"Order ID:"}),c.jsx("span",{className:"review-value",children:s.orderId})]}),c.jsxs("div",{className:"review-item",children:[c.jsx("span",{className:"review-label",children:"Project:"}),c.jsx("span",{className:"review-value",children:s.project})]}),c.jsxs("div",{className:"review-item",children:[c.jsx("span",{className:"review-label",children:"Status:"}),c.jsx("span",{className:"review-value",children:s.status})]}),c.jsxs("div",{className:"review-item",children:[c.jsx("span",{className:"review-label",children:"Responsible:"}),c.jsx("span",{className:"review-value",children:s.responsable})]}),c.jsxs("div",{className:"review-item",children:[c.jsx("span",{className:"review-label",children:"Expected to:"}),c.jsx("span",{className:"review-value",children:new Date(s.expectedTo).toLocaleDateString("es-ES")})]}),c.jsxs("div",{className:"review-item",children:[c.jsx("span",{className:"review-label",children:"Priority:"}),c.jsx("span",{className:"review-value",children:s.priority})]}),c.jsxs("div",{className:"review-item",children:[c.jsx("span",{className:"review-label",children:"Sheets:"}),c.jsx("span",{className:"review-value",children:s.sheets||"N/A"})]}),s.orderComment&&c.jsxs("div",{className:"review-item review-item-full",children:[c.jsx("span",{className:"review-label",children:"Order Comment:"}),c.jsx("span",{className:"review-value",children:s.orderComment})]}),c.jsxs("div",{className:"review-item",children:[c.jsx("span",{className:"review-label",children:"Colour:"}),c.jsx("span",{className:"review-value",children:s.colour||"N/A"})]}),c.jsxs("div",{className:"review-item",children:[c.jsx("span",{className:"review-label",children:"Quality Control:"}),c.jsx("span",{className:"review-value",children:b?"Yes":"No"})]})]})]}),c.jsxs("section",{className:"review-section",children:[c.jsxs("h3",{className:"section-title",children:["Selected Sheets (",s.selectedSheets.length,")"]}),c.jsx("div",{className:"review-table-container",children:c.jsxs("table",{className:"review-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Sheet ID"}),c.jsx("th",{children:"Dimension"}),c.jsx("th",{children:"Colour"}),c.jsx("th",{children:"Qty"})]})}),c.jsx("tbody",{children:s.selectedSheets.map(P=>c.jsxs("tr",{children:[c.jsx("td",{children:P.sheetId}),c.jsx("td",{children:P.dimension}),c.jsx("td",{children:P.colour}),c.jsx("td",{children:P.qty})]},P.sheetId))})]})}),c.jsxs("div",{className:"review-summary-item",children:[c.jsx("span",{className:"summary-label",children:"Total Sheets Qty:"}),c.jsx("span",{className:"summary-value",children:q})]})]}),c.jsxs("section",{className:"review-section",children:[c.jsxs("h3",{className:"section-title",children:["Summary of Panels (",s.panels.length,")"]}),c.jsxs("div",{className:"review-summary-grid",children:[c.jsxs("div",{className:"review-summary-item",children:[c.jsx("span",{className:"summary-label",children:"Total Panels:"}),c.jsx("span",{className:"summary-value",children:s.panels.length})]}),c.jsxs("div",{className:"review-summary-item",children:[c.jsx("span",{className:"summary-label",children:"Total Area:"}),c.jsxs("span",{className:"summary-value",children:[C.toFixed(2)," m"]})]}),c.jsxs("div",{className:"review-summary-item",children:[c.jsx("span",{className:"summary-label",children:"Cut Distance Total:"}),c.jsxs("span",{className:"summary-value",children:[A.toFixed(2)," m"]})]})]})]}),c.jsxs("section",{className:"review-section",children:[c.jsx("h3",{className:"section-title",children:"Actions to be performed"}),c.jsxs("ul",{className:"actions-list",children:[c.jsx("li",{children:' Create Order in Supabase (table "Orders cut")'}),c.jsx("li",{children:' Create Order in AppSheet (table "Orders cut")'}),c.jsxs("li",{children:[" Create 3 Stages in AppSheet: Cut, Manufacturing, Packaging",b&&" (con Quality Control)"]}),c.jsxs("li",{children:[" Insertar ",s.panels.length," Panel(es) en Supabase y AppSheet"]}),c.jsxs("li",{children:[" Actualizar Sheets Inventory en AppSheet (",s.selectedSheets.length," sheet(s))"]})]})]})]}),S.errors.length>0&&c.jsxs("div",{className:"step-validation-errors",children:[c.jsx("p",{className:"validation-title",children:"Please correct the following errors:"}),c.jsx("ul",{children:S.errors.map((P,M)=>c.jsx("li",{children:P},M))})]}),y&&!y.success&&c.jsxs("div",{className:"step-error-message",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Error:"})," ",y.message]}),y.errors&&y.errors.length>0&&c.jsx("ul",{children:y.errors.map((P,M)=>c.jsx("li",{children:P},M))})]}),c.jsx("div",{className:"step4-actions",children:g?c.jsxs("div",{className:"confirm-dialog",children:[c.jsx("p",{className:"confirm-message",children:"Are you sure you want to create this order?"}),c.jsxs("div",{className:"confirm-actions",children:[c.jsx("button",{type:"button",onClick:()=>m(!1),className:"confirm-button confirm-button-cancel",disabled:h,children:"Cancelar"}),c.jsx("button",{type:"button",onClick:x,disabled:h,className:"confirm-button confirm-button-confirm",children:h?"Creating...":"Confirm"})]})]}):c.jsx("button",{type:"button",onClick:()=>m(!0),disabled:!S.isValid||h,className:"create-order-button",children:"Create Order"})})]})}function xN(){const{currentStep:s}=Er();switch(s){case 1:return c.jsx(l0,{});case 2:return c.jsx(hN,{});case 3:return c.jsx(pN,{});case 4:return c.jsx(bN,{});default:return c.jsx(l0,{})}}const wN="/CC-logo-NEW_1.webp",jN=()=>{const{user:s,signOut:t}=vo(),{currentStep:r}=Er();Di("Creator of Orders - Cladding Creations");const u=r===2||r===3;return c.jsxs("div",{className:"creator-of-orders",children:[c.jsxs("div",{className:"creator-header",children:[c.jsxs("div",{className:"creator-header-left",children:[c.jsx("img",{src:wN,alt:"Cladding Creations",className:"creator-logo"}),c.jsx("h1",{children:"Creator of Orders"})]}),c.jsxs("div",{className:"user-info",children:[c.jsxs("span",{children:["Welcome, ",s==null?void 0:s.email]}),c.jsx("button",{onClick:()=>t(),className:"logout-button",children:"Logout"})]})]}),c.jsx("div",{className:`creator-content ${u?"step2-full-width":""}`,children:c.jsxs("div",{className:`wizard-container ${u?"step2-full-width":""}`,children:[c.jsx(rN,{}),c.jsx("div",{className:"wizard-steps-container",children:c.jsx(xN,{})}),c.jsx(sN,{})]})})]})},_N=()=>c.jsx(aN,{children:c.jsx(jN,{})}),SN=new zv({defaultOptions:{queries:{staleTime:10*60*1e3,gcTime:30*60*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1}}}),NN=[{id:"cutting-information",label:"Cutting Information"},{id:"sheets",label:"Sheets"},{id:"project-allowances-section",label:"Allowances"},{id:"material-tables",label:"Material"},{id:"trips-over-time",label:"Trips"}],TN=s=>{const t=document.getElementById(s),r=document.querySelector(".main-header");if(t&&r){const n=r.offsetHeight,l=t.getBoundingClientRect().top+window.scrollY-n-8;window.scrollTo({top:l,behavior:"smooth"})}};function EN(){const s=f0(),[t,r]=k.useState(!0),[n,l]=k.useState(!1),[u,h]=k.useState(0),g=W1(s.pathname),y=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?"/CC-logo-NEW_1.webp":"/CC_Flow_summary_report/CC-logo-NEW_1.webp",p=[{id:"order-delivery",label:"Order Delivery",path:"/order-delivery",icon:""},{id:"analytics",label:"CC Analytics",path:"/analytics",icon:""}];return k.useEffect(()=>{const{animationDuration:b}=g;if(b===0){r(!1),l(!0);return}const x=b*.25,j=b*.5,S=b*.75,C=b,A=setTimeout(()=>{h(1)},x),q=setTimeout(()=>{h(2)},j),P=setTimeout(()=>{h(3)},S),M=setTimeout(()=>{r(!1),setTimeout(()=>{l(!0)},200)},C);return()=>{clearTimeout(A),clearTimeout(q),clearTimeout(P),clearTimeout(M)}},[g]),c.jsx("div",{className:`App ${t?"loading":"loaded"}`,children:c.jsxs(ub,{children:[g.showDataPreloader&&c.jsx(F1,{}),t&&c.jsx("div",{className:`loading-screen phase-${u}`,children:c.jsxs("div",{className:"loading-content",children:[c.jsx("img",{src:y,alt:"CC Logo",className:"loading-logo"}),c.jsx("div",{className:"loading-subtitle",children:g.loadingText})]})}),n&&c.jsx(c.Fragment,{children:c.jsx(Fw,{children:c.jsxs(ab,{children:[c.jsx(oi,{path:"/",element:c.jsxs(c.Fragment,{children:[g.showHeader&&c.jsxs("header",{className:"main-header",children:[c.jsx("div",{className:"header-left",children:c.jsx(X1,{logoPath:y,menuItems:p})}),c.jsx("nav",{className:"header-nav",children:NN.map(b=>c.jsx("button",{className:"nav-link",onClick:()=>TN(b.id),children:b.label},b.id))})]}),c.jsx(h1,{})]})}),c.jsx(oi,{path:"/order-delivery",element:c.jsx(f1,{})}),c.jsx(oi,{path:"/analytics",element:c.jsx(K1,{})}),c.jsx(oi,{path:"/login",element:c.jsx(Z1,{})}),c.jsx(oi,{path:"/creator-of-orders",element:c.jsx(eN,{children:c.jsx(_N,{})})})]})})})]})})}function CN(){return c.jsx(Pv,{client:SN,children:c.jsxs(J1,{children:[c.jsx(tb,{children:c.jsx(EN,{})}),c.jsx(cb,{initialIsOpen:!1})]})})}ob.createRoot(document.getElementById("root")).render(c.jsx(wi.StrictMode,{children:c.jsx(CN,{})}))});export default ON();
