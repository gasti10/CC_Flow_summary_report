var Bv=Object.defineProperty,Iv=Object.defineProperties;var Pv=Object.getOwnPropertyDescriptors;var Sg=Object.getOwnPropertySymbols,Hv=Object.getPrototypeOf,Yv=Object.prototype.hasOwnProperty,Vv=Object.prototype.propertyIsEnumerable,Fv=Reflect.get;var Uu=(r,t,a)=>t in r?Bv(r,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[t]=a,He=(r,t)=>{for(var a in t||(t={}))Yv.call(t,a)&&Uu(r,a,t[a]);if(Sg)for(var a of Sg(t))Vv.call(t,a)&&Uu(r,a,t[a]);return r},lt=(r,t)=>Iv(r,Pv(t));var Qv=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports);var ge=(r,t,a)=>Uu(r,typeof t!="symbol"?t+"":t,a);var Kt=(r,t,a)=>Fv(Hv(r),a,t);var N=(r,t,a)=>new Promise((n,o)=>{var u=m=>{try{g(a.next(m))}catch(p){o(p)}},h=m=>{try{g(a.throw(m))}catch(p){o(p)}},g=m=>m.done?n(m.value):Promise.resolve(m.value).then(u,h);g((a=a.apply(r,t)).next())});import{j as l,u as oa,a as Gv,Q as Kv,b as Wv}from"./query-WMABWADb.js";import{r as U,R as lo,m as _i,i as vi,a as Xv,e as Jv,c as yp,b as _t,v as Zv,t as eb,d as tb,f as ab,A as sb,P as yd,B as on,C as za,g as cn,L as un,p as dn,h as hn,j as fn,k as vd,l as rb,n as nb,o as vp,T as ib,q as lb}from"./charts-BjiXmMKK.js";import{r as ob,a as cb,g as bp}from"./vendor-CQVgkexN.js";import{u as ub,a as xp,b as wp,N as db,H as hb,R as fb,c as di}from"./router-VCGYaERu.js";var X1=Qv((ut,$i)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function a(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function n(o){if(o.ep)return;o.ep=!0;const u=a(o);fetch(o.href,u)}})();var Lu={exports:{}},hi={},qu={exports:{}},$u={};var _g;function mb(){return _g||(_g=1,(function(r){function t(k,M){var F=k.length;k.push(M);e:for(;0<F;){var J=F-1>>>1,w=k[J];if(0<o(w,M))k[J]=M,k[F]=w,F=J;else break e}}function a(k){return k.length===0?null:k[0]}function n(k){if(k.length===0)return null;var M=k[0],F=k.pop();if(F!==M){k[0]=F;e:for(var J=0,w=k.length,_=w>>>1;J<_;){var $=2*(J+1)-1,z=k[$],ae=$+1,ie=k[ae];if(0>o(z,F))ae<w&&0>o(ie,z)?(k[J]=ie,k[ae]=F,J=ae):(k[J]=z,k[$]=F,J=$);else if(ae<w&&0>o(ie,F))k[J]=ie,k[ae]=F,J=ae;else break e}}return M}function o(k,M){var F=k.sortIndex-M.sortIndex;return F!==0?F:k.id-M.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var h=Date,g=h.now();r.unstable_now=function(){return h.now()-g}}var m=[],p=[],y=1,x=null,v=3,S=!1,C=!1,T=!1,A=!1,I=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate!="undefined"?setImmediate:null;function te(k){for(var M=a(p);M!==null;){if(M.callback===null)n(p);else if(M.startTime<=k)n(p),M.sortIndex=M.expirationTime,t(m,M);else break;M=a(p)}}function he(k){if(T=!1,te(k),!C)if(a(m)!==null)C=!0,X||(X=!0,W());else{var M=a(p);M!==null&&we(he,M.startTime-k)}}var X=!1,le=-1,O=5,D=-1;function E(){return A?!0:!(r.unstable_now()-D<O)}function Y(){if(A=!1,X){var k=r.unstable_now();D=k;var M=!0;try{e:{C=!1,T&&(T=!1,G(le),le=-1),S=!0;var F=v;try{t:{for(te(k),x=a(m);x!==null&&!(x.expirationTime>k&&E());){var J=x.callback;if(typeof J=="function"){x.callback=null,v=x.priorityLevel;var w=J(x.expirationTime<=k);if(k=r.unstable_now(),typeof w=="function"){x.callback=w,te(k),M=!0;break t}x===a(m)&&n(m),te(k)}else n(m);x=a(m)}if(x!==null)M=!0;else{var _=a(p);_!==null&&we(he,_.startTime-k),M=!1}}break e}finally{x=null,v=F,S=!1}M=void 0}}finally{M?W():X=!1}}}var W;if(typeof P=="function")W=function(){P(Y)};else if(typeof MessageChannel!="undefined"){var ue=new MessageChannel,pe=ue.port2;ue.port1.onmessage=Y,W=function(){pe.postMessage(null)}}else W=function(){I(Y,0)};function we(k,M){le=I(function(){k(r.unstable_now())},M)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(k){k.callback=null},r.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<k?Math.floor(1e3/k):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_next=function(k){switch(v){case 1:case 2:case 3:var M=3;break;default:M=v}var F=v;v=M;try{return k()}finally{v=F}},r.unstable_requestPaint=function(){A=!0},r.unstable_runWithPriority=function(k,M){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var F=v;v=k;try{return M()}finally{v=F}},r.unstable_scheduleCallback=function(k,M,F){var J=r.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?J+F:J):F=J,k){case 1:var w=-1;break;case 2:w=250;break;case 5:w=1073741823;break;case 4:w=1e4;break;default:w=5e3}return w=F+w,k={id:y++,callback:M,priorityLevel:k,startTime:F,expirationTime:w,sortIndex:-1},F>J?(k.sortIndex=F,t(p,k),a(m)===null&&k===a(p)&&(T?(G(le),le=-1):T=!0,we(he,F-J))):(k.sortIndex=w,t(m,k),C||S||(C=!0,X||(X=!0,W()))),k},r.unstable_shouldYield=E,r.unstable_wrapCallback=function(k){var M=v;return function(){var F=v;v=M;try{return k.apply(this,arguments)}finally{v=F}}}})($u)),$u}var Ng;function gb(){return Ng||(Ng=1,qu.exports=mb()),qu.exports}var Cg;function pb(){if(Cg)return hi;Cg=1;var r=gb(),t=ob(),a=cb();function n(e){var s="https://react.dev/errors/"+e;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)s+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var s=e,i=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do s=e,(s.flags&4098)!==0&&(i=s.return),e=s.return;while(e)}return s.tag===3?i:null}function h(e){if(e.tag===13){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function g(e){if(u(e)!==e)throw Error(n(188))}function m(e){var s=e.alternate;if(!s){if(s=u(e),s===null)throw Error(n(188));return s!==e?null:e}for(var i=e,c=s;;){var d=i.return;if(d===null)break;var f=d.alternate;if(f===null){if(c=d.return,c!==null){i=c;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===i)return g(d),e;if(f===c)return g(d),s;f=f.sibling}throw Error(n(188))}if(i.return!==c.return)i=d,c=f;else{for(var b=!1,j=d.child;j;){if(j===i){b=!0,i=d,c=f;break}if(j===c){b=!0,c=d,i=f;break}j=j.sibling}if(!b){for(j=f.child;j;){if(j===i){b=!0,i=f,c=d;break}if(j===c){b=!0,c=f,i=d;break}j=j.sibling}if(!b)throw Error(n(189))}}if(i.alternate!==c)throw Error(n(190))}if(i.tag!==3)throw Error(n(188));return i.stateNode.current===i?e:s}function p(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e;for(e=e.child;e!==null;){if(s=p(e),s!==null)return s;e=e.sibling}return null}var y=Object.assign,x=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),G=Symbol.for("react.consumer"),P=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),le=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),E=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function W(e){return e===null||typeof e!="object"?null:(e=Y&&e[Y]||e["@@iterator"],typeof e=="function"?e:null)}var ue=Symbol.for("react.client.reference");function pe(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ue?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case C:return"Fragment";case A:return"Profiler";case T:return"StrictMode";case he:return"Suspense";case X:return"SuspenseList";case D:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case S:return"Portal";case P:return(e.displayName||"Context")+".Provider";case G:return(e._context.displayName||"Context")+".Consumer";case te:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case le:return s=e.displayName||null,s!==null?s:pe(e.type)||"Memo";case O:s=e._payload,e=e._init;try{return pe(e(s))}catch(i){}}return null}var we=Array.isArray,k=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F={pending:!1,data:null,method:null,action:null},J=[],w=-1;function _(e){return{current:e}}function $(e){0>w||(e.current=J[w],J[w]=null,w--)}function z(e,s){w++,J[w]=e.current,e.current=s}var ae=_(null),ie=_(null),re=_(null),de=_(null);function oe(e,s){switch(z(re,s),z(ie,e),z(ae,null),s.nodeType){case 9:case 11:e=(e=s.documentElement)&&(e=e.namespaceURI)?Xm(e):0;break;default:if(e=s.tagName,s=s.namespaceURI)s=Xm(s),e=Jm(s,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}$(ae),z(ae,e)}function fe(){$(ae),$(ie),$(re)}function be(e){e.memoizedState!==null&&z(de,e);var s=ae.current,i=Jm(s,e.type);s!==i&&(z(ie,e),z(ae,i))}function me(e){ie.current===e&&($(ae),$(ie)),de.current===e&&($(de),ii._currentValue=F)}var _e=Object.prototype.hasOwnProperty,Re=r.unstable_scheduleCallback,ve=r.unstable_cancelCallback,Ae=r.unstable_shouldYield,Ne=r.unstable_requestPaint,ze=r.unstable_now,L=r.unstable_getCurrentPriorityLevel,Z=r.unstable_ImmediatePriority,ce=r.unstable_UserBlockingPriority,ye=r.unstable_NormalPriority,Ue=r.unstable_LowPriority,Ie=r.unstable_IdlePriority,Je=r.log,Dt=r.unstable_setDisableYieldValue,Ye=null,Ge=null;function xt(e){if(typeof Je=="function"&&Dt(e),Ge&&typeof Ge.setStrictMode=="function")try{Ge.setStrictMode(Ye,e)}catch(s){}}var wt=Math.clz32?Math.clz32:Ht,As=Math.log,ca=Math.LN2;function Ht(e){return e>>>=0,e===0?32:31-(As(e)/ca|0)|0}var ua=256,ks=4194304;function Rs(e){var s=e&42;if(s!==0)return s;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function zi(e,s,i){var c=e.pendingLanes;if(c===0)return 0;var d=0,f=e.suspendedLanes,b=e.pingedLanes;e=e.warmLanes;var j=c&134217727;return j!==0?(c=j&~f,c!==0?d=Rs(c):(b&=j,b!==0?d=Rs(b):i||(i=j&~e,i!==0&&(d=Rs(i))))):(j=c&~f,j!==0?d=Rs(j):b!==0?d=Rs(b):i||(i=c&~e,i!==0&&(d=Rs(i)))),d===0?0:s!==0&&s!==d&&(s&f)===0&&(f=d&-d,i=s&-s,f>=i||f===32&&(i&4194048)!==0)?s:d}function gn(e,s){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&s)===0}function E0(e,s){switch(e){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rd(){var e=ua;return ua<<=1,(ua&4194048)===0&&(ua=256),e}function Md(){var e=ks;return ks<<=1,(ks&62914560)===0&&(ks=4194304),e}function _o(e){for(var s=[],i=0;31>i;i++)s.push(e);return s}function pn(e,s){e.pendingLanes|=s,s!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function T0(e,s,i,c,d,f){var b=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var j=e.entanglements,R=e.expirationTimes,V=e.hiddenUpdates;for(i=b&~i;0<i;){var ee=31-wt(i),ne=1<<ee;j[ee]=0,R[ee]=-1;var Q=V[ee];if(Q!==null)for(V[ee]=null,ee=0;ee<Q.length;ee++){var K=Q[ee];K!==null&&(K.lane&=-536870913)}i&=~ne}c!==0&&Ud(e,c,0),f!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=f&~(b&~s))}function Ud(e,s,i){e.pendingLanes|=s,e.suspendedLanes&=~s;var c=31-wt(s);e.entangledLanes|=s,e.entanglements[c]=e.entanglements[c]|1073741824|i&4194090}function Ld(e,s){var i=e.entangledLanes|=s;for(e=e.entanglements;i;){var c=31-wt(i),d=1<<c;d&s|e[c]&s&&(e[c]|=s),i&=~d}}function No(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Co(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function qd(){var e=M.p;return e!==0?e:(e=window.event,e===void 0?32:yg(e.type))}function D0(e,s){var i=M.p;try{return M.p=e,s()}finally{M.p=i}}var rs=Math.random().toString(36).slice(2),Bt="__reactFiber$"+rs,Yt="__reactProps$"+rs,ir="__reactContainer$"+rs,Eo="__reactEvents$"+rs,O0="__reactListeners$"+rs,A0="__reactHandles$"+rs,$d="__reactResources$"+rs,yn="__reactMarker$"+rs;function To(e){delete e[Bt],delete e[Yt],delete e[Eo],delete e[O0],delete e[A0]}function lr(e){var s=e[Bt];if(s)return s;for(var i=e.parentNode;i;){if(s=i[ir]||i[Bt]){if(i=s.alternate,s.child!==null||i!==null&&i.child!==null)for(e=ag(e);e!==null;){if(i=e[Bt])return i;e=ag(e)}return s}e=i,i=e.parentNode}return null}function or(e){if(e=e[Bt]||e[ir]){var s=e.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return e}return null}function vn(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e.stateNode;throw Error(n(33))}function cr(e){var s=e[$d];return s||(s=e[$d]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ot(e){e[yn]=!0}var zd=new Set,Bd={};function Ms(e,s){ur(e,s),ur(e+"Capture",s)}function ur(e,s){for(Bd[e]=s,e=0;e<s.length;e++)zd.add(s[e])}var k0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Id={},Pd={};function R0(e){return _e.call(Pd,e)?!0:_e.call(Id,e)?!1:k0.test(e)?Pd[e]=!0:(Id[e]=!0,!1)}function Bi(e,s,i){if(R0(s))if(i===null)e.removeAttribute(s);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){e.removeAttribute(s);return}}e.setAttribute(s,""+i)}}function Ii(e,s,i){if(i===null)e.removeAttribute(s);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttribute(s,""+i)}}function Ba(e,s,i,c){if(c===null)e.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(s,i,""+c)}}var Do,Hd;function dr(e){if(Do===void 0)try{throw Error()}catch(i){var s=i.stack.trim().match(/\n( *(at )?)/);Do=s&&s[1]||"",Hd=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Do+e+Hd}var Oo=!1;function Ao(e,s){if(!e||Oo)return"";Oo=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(K){var Q=K}Reflect.construct(e,[],ne)}else{try{ne.call()}catch(K){Q=K}e.call(ne.prototype)}}else{try{throw Error()}catch(K){Q=K}(ne=e())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(K){if(K&&Q&&typeof K.stack=="string")return[K.stack,Q.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=c.DetermineComponentFrameRoot(),b=f[0],j=f[1];if(b&&j){var R=b.split(`
`),V=j.split(`
`);for(d=c=0;c<R.length&&!R[c].includes("DetermineComponentFrameRoot");)c++;for(;d<V.length&&!V[d].includes("DetermineComponentFrameRoot");)d++;if(c===R.length||d===V.length)for(c=R.length-1,d=V.length-1;1<=c&&0<=d&&R[c]!==V[d];)d--;for(;1<=c&&0<=d;c--,d--)if(R[c]!==V[d]){if(c!==1||d!==1)do if(c--,d--,0>d||R[c]!==V[d]){var ee=`
`+R[c].replace(" at new "," at ");return e.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",e.displayName)),ee}while(1<=c&&0<=d);break}}}finally{Oo=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?dr(i):""}function M0(e){switch(e.tag){case 26:case 27:case 5:return dr(e.type);case 16:return dr("Lazy");case 13:return dr("Suspense");case 19:return dr("SuspenseList");case 0:case 15:return Ao(e.type,!1);case 11:return Ao(e.type.render,!1);case 1:return Ao(e.type,!0);case 31:return dr("Activity");default:return""}}function Yd(e){try{var s="";do s+=M0(e),e=e.return;while(e);return s}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}function da(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Vd(e){var s=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function U0(e){var s=Vd(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,s),c=""+e[s];if(!e.hasOwnProperty(s)&&typeof i!="undefined"&&typeof i.get=="function"&&typeof i.set=="function"){var d=i.get,f=i.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return d.call(this)},set:function(b){c=""+b,f.call(this,b)}}),Object.defineProperty(e,s,{enumerable:i.enumerable}),{getValue:function(){return c},setValue:function(b){c=""+b},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}function Pi(e){e._valueTracker||(e._valueTracker=U0(e))}function Fd(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var i=s.getValue(),c="";return e&&(c=Vd(e)?e.checked?"true":"false":e.value),e=c,e!==i?(s.setValue(e),!0):!1}function Hi(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(s){return e.body}}var L0=/[\n"\\]/g;function ha(e){return e.replace(L0,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function ko(e,s,i,c,d,f,b,j){e.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.type=b:e.removeAttribute("type"),s!=null?b==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+da(s)):e.value!==""+da(s)&&(e.value=""+da(s)):b!=="submit"&&b!=="reset"||e.removeAttribute("value"),s!=null?Ro(e,b,da(s)):i!=null?Ro(e,b,da(i)):c!=null&&e.removeAttribute("value"),d==null&&f!=null&&(e.defaultChecked=!!f),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?e.name=""+da(j):e.removeAttribute("name")}function Qd(e,s,i,c,d,f,b,j){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),s!=null||i!=null){if(!(f!=="submit"&&f!=="reset"||s!=null))return;i=i!=null?""+da(i):"",s=s!=null?""+da(s):i,j||s===e.value||(e.value=s),e.defaultValue=s}c=c!=null?c:d,c=typeof c!="function"&&typeof c!="symbol"&&!!c,e.checked=j?e.checked:!!c,e.defaultChecked=!!c,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(e.name=b)}function Ro(e,s,i){s==="number"&&Hi(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function hr(e,s,i,c){if(e=e.options,s){s={};for(var d=0;d<i.length;d++)s["$"+i[d]]=!0;for(i=0;i<e.length;i++)d=s.hasOwnProperty("$"+e[i].value),e[i].selected!==d&&(e[i].selected=d),d&&c&&(e[i].defaultSelected=!0)}else{for(i=""+da(i),s=null,d=0;d<e.length;d++){if(e[d].value===i){e[d].selected=!0,c&&(e[d].defaultSelected=!0);return}s!==null||e[d].disabled||(s=e[d])}s!==null&&(s.selected=!0)}}function Gd(e,s,i){if(s!=null&&(s=""+da(s),s!==e.value&&(e.value=s),i==null)){e.defaultValue!==s&&(e.defaultValue=s);return}e.defaultValue=i!=null?""+da(i):""}function Kd(e,s,i,c){if(s==null){if(c!=null){if(i!=null)throw Error(n(92));if(we(c)){if(1<c.length)throw Error(n(93));c=c[0]}i=c}i==null&&(i=""),s=i}i=da(s),e.defaultValue=i,c=e.textContent,c===i&&c!==""&&c!==null&&(e.value=c)}function fr(e,s){if(s){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=s;return}}e.textContent=s}var q0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wd(e,s,i){var c=s.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?c?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="":c?e.setProperty(s,i):typeof i!="number"||i===0||q0.has(s)?s==="float"?e.cssFloat=i:e[s]=(""+i).trim():e[s]=i+"px"}function Xd(e,s,i){if(s!=null&&typeof s!="object")throw Error(n(62));if(e=e.style,i!=null){for(var c in i)!i.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?e.setProperty(c,""):c==="float"?e.cssFloat="":e[c]="");for(var d in s)c=s[d],s.hasOwnProperty(d)&&i[d]!==c&&Wd(e,d,c)}else for(var f in s)s.hasOwnProperty(f)&&Wd(e,f,s[f])}function Mo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),z0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Yi(e){return z0.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Uo=null;function Lo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var mr=null,gr=null;function Jd(e){var s=or(e);if(s&&(e=s.stateNode)){var i=e[Yt]||null;e:switch(e=s.stateNode,s.type){case"input":if(ko(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),s=i.name,i.type==="radio"&&s!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+ha(""+s)+'"][type="radio"]'),s=0;s<i.length;s++){var c=i[s];if(c!==e&&c.form===e.form){var d=c[Yt]||null;if(!d)throw Error(n(90));ko(c,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<i.length;s++)c=i[s],c.form===e.form&&Fd(c)}break e;case"textarea":Gd(e,i.value,i.defaultValue);break e;case"select":s=i.value,s!=null&&hr(e,!!i.multiple,s,!1)}}}var qo=!1;function Zd(e,s,i){if(qo)return e(s,i);qo=!0;try{var c=e(s);return c}finally{if(qo=!1,(mr!==null||gr!==null)&&(Dl(),mr&&(s=mr,e=gr,gr=mr=null,Jd(s),e)))for(s=0;s<e.length;s++)Jd(e[s])}}function bn(e,s){var i=e.stateNode;if(i===null)return null;var c=i[Yt]||null;if(c===null)return null;i=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(n(231,s,typeof i));return i}var Ia=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),$o=!1;if(Ia)try{var xn={};Object.defineProperty(xn,"passive",{get:function(){$o=!0}}),window.addEventListener("test",xn,xn),window.removeEventListener("test",xn,xn)}catch(e){$o=!1}var ns=null,zo=null,Vi=null;function eh(){if(Vi)return Vi;var e,s=zo,i=s.length,c,d="value"in ns?ns.value:ns.textContent,f=d.length;for(e=0;e<i&&s[e]===d[e];e++);var b=i-e;for(c=1;c<=b&&s[i-c]===d[f-c];c++);return Vi=d.slice(e,1<c?1-c:void 0)}function Fi(e){var s=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&s===13&&(e=13)):e=s,e===10&&(e=13),32<=e||e===13?e:0}function Qi(){return!0}function th(){return!1}function Vt(e){function s(i,c,d,f,b){this._reactName=i,this._targetInst=d,this.type=c,this.nativeEvent=f,this.target=b,this.currentTarget=null;for(var j in e)e.hasOwnProperty(j)&&(i=e[j],this[j]=i?i(f):f[j]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Qi:th,this.isPropagationStopped=th,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Qi)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Qi)},persist:function(){},isPersistent:Qi}),s}var Us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gi=Vt(Us),wn=y({},Us,{view:0,detail:0}),B0=Vt(wn),Bo,Io,jn,Ki=y({},wn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ho,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==jn&&(jn&&e.type==="mousemove"?(Bo=e.screenX-jn.screenX,Io=e.screenY-jn.screenY):Io=Bo=0,jn=e),Bo)},movementY:function(e){return"movementY"in e?e.movementY:Io}}),ah=Vt(Ki),I0=y({},Ki,{dataTransfer:0}),P0=Vt(I0),H0=y({},wn,{relatedTarget:0}),Po=Vt(H0),Y0=y({},Us,{animationName:0,elapsedTime:0,pseudoElement:0}),V0=Vt(Y0),F0=y({},Us,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Q0=Vt(F0),G0=y({},Us,{data:0}),sh=Vt(G0),K0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},W0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},X0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function J0(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):(e=X0[e])?!!s[e]:!1}function Ho(){return J0}var Z0=y({},wn,{key:function(e){if(e.key){var s=K0[e.key]||e.key;if(s!=="Unidentified")return s}return e.type==="keypress"?(e=Fi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?W0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ho,charCode:function(e){return e.type==="keypress"?Fi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Fi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ey=Vt(Z0),ty=y({},Ki,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rh=Vt(ty),ay=y({},wn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ho}),sy=Vt(ay),ry=y({},Us,{propertyName:0,elapsedTime:0,pseudoElement:0}),ny=Vt(ry),iy=y({},Ki,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ly=Vt(iy),oy=y({},Us,{newState:0,oldState:0}),cy=Vt(oy),uy=[9,13,27,32],Yo=Ia&&"CompositionEvent"in window,Sn=null;Ia&&"documentMode"in document&&(Sn=document.documentMode);var dy=Ia&&"TextEvent"in window&&!Sn,nh=Ia&&(!Yo||Sn&&8<Sn&&11>=Sn),ih=" ",lh=!1;function oh(e,s){switch(e){case"keyup":return uy.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ch(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var pr=!1;function hy(e,s){switch(e){case"compositionend":return ch(s);case"keypress":return s.which!==32?null:(lh=!0,ih);case"textInput":return e=s.data,e===ih&&lh?null:e;default:return null}}function fy(e,s){if(pr)return e==="compositionend"||!Yo&&oh(e,s)?(e=eh(),Vi=zo=ns=null,pr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return nh&&s.locale!=="ko"?null:s.data;default:return null}}var my={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uh(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s==="input"?!!my[e.type]:s==="textarea"}function dh(e,s,i,c){mr?gr?gr.push(c):gr=[c]:mr=c,s=Ul(s,"onChange"),0<s.length&&(i=new Gi("onChange","change",null,i,c),e.push({event:i,listeners:s}))}var _n=null,Nn=null;function gy(e){Fm(e,0)}function Wi(e){var s=vn(e);if(Fd(s))return e}function hh(e,s){if(e==="change")return s}var fh=!1;if(Ia){var Vo;if(Ia){var Fo="oninput"in document;if(!Fo){var mh=document.createElement("div");mh.setAttribute("oninput","return;"),Fo=typeof mh.oninput=="function"}Vo=Fo}else Vo=!1;fh=Vo&&(!document.documentMode||9<document.documentMode)}function gh(){_n&&(_n.detachEvent("onpropertychange",ph),Nn=_n=null)}function ph(e){if(e.propertyName==="value"&&Wi(Nn)){var s=[];dh(s,Nn,e,Lo(e)),Zd(gy,s)}}function py(e,s,i){e==="focusin"?(gh(),_n=s,Nn=i,_n.attachEvent("onpropertychange",ph)):e==="focusout"&&gh()}function yy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Wi(Nn)}function vy(e,s){if(e==="click")return Wi(s)}function by(e,s){if(e==="input"||e==="change")return Wi(s)}function xy(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var Jt=typeof Object.is=="function"?Object.is:xy;function Cn(e,s){if(Jt(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;var i=Object.keys(e),c=Object.keys(s);if(i.length!==c.length)return!1;for(c=0;c<i.length;c++){var d=i[c];if(!_e.call(s,d)||!Jt(e[d],s[d]))return!1}return!0}function yh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vh(e,s){var i=yh(e);e=0;for(var c;i;){if(i.nodeType===3){if(c=e+i.textContent.length,e<=s&&c>=s)return{node:i,offset:s-e};e=c}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=yh(i)}}function bh(e,s){return e&&s?e===s?!0:e&&e.nodeType===3?!1:s&&s.nodeType===3?bh(e,s.parentNode):"contains"in e?e.contains(s):e.compareDocumentPosition?!!(e.compareDocumentPosition(s)&16):!1:!1}function xh(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var s=Hi(e.document);s instanceof e.HTMLIFrameElement;){try{var i=typeof s.contentWindow.location.href=="string"}catch(c){i=!1}if(i)e=s.contentWindow;else break;s=Hi(e.document)}return s}function Qo(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&(s==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||s==="textarea"||e.contentEditable==="true")}var wy=Ia&&"documentMode"in document&&11>=document.documentMode,yr=null,Go=null,En=null,Ko=!1;function wh(e,s,i){var c=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Ko||yr==null||yr!==Hi(c)||(c=yr,"selectionStart"in c&&Qo(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),En&&Cn(En,c)||(En=c,c=Ul(Go,"onSelect"),0<c.length&&(s=new Gi("onSelect","select",null,s,i),e.push({event:s,listeners:c}),s.target=yr)))}function Ls(e,s){var i={};return i[e.toLowerCase()]=s.toLowerCase(),i["Webkit"+e]="webkit"+s,i["Moz"+e]="moz"+s,i}var vr={animationend:Ls("Animation","AnimationEnd"),animationiteration:Ls("Animation","AnimationIteration"),animationstart:Ls("Animation","AnimationStart"),transitionrun:Ls("Transition","TransitionRun"),transitionstart:Ls("Transition","TransitionStart"),transitioncancel:Ls("Transition","TransitionCancel"),transitionend:Ls("Transition","TransitionEnd")},Wo={},jh={};Ia&&(jh=document.createElement("div").style,"AnimationEvent"in window||(delete vr.animationend.animation,delete vr.animationiteration.animation,delete vr.animationstart.animation),"TransitionEvent"in window||delete vr.transitionend.transition);function qs(e){if(Wo[e])return Wo[e];if(!vr[e])return e;var s=vr[e],i;for(i in s)if(s.hasOwnProperty(i)&&i in jh)return Wo[e]=s[i];return e}var Sh=qs("animationend"),_h=qs("animationiteration"),Nh=qs("animationstart"),jy=qs("transitionrun"),Sy=qs("transitionstart"),_y=qs("transitioncancel"),Ch=qs("transitionend"),Eh=new Map,Xo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xo.push("scrollEnd");function wa(e,s){Eh.set(e,s),Ms(s,[e])}var Th=new WeakMap;function fa(e,s){if(typeof e=="object"&&e!==null){var i=Th.get(e);return i!==void 0?i:(s={value:e,source:s,stack:Yd(s)},Th.set(e,s),s)}return{value:e,source:s,stack:Yd(s)}}var ma=[],br=0,Jo=0;function Xi(){for(var e=br,s=Jo=br=0;s<e;){var i=ma[s];ma[s++]=null;var c=ma[s];ma[s++]=null;var d=ma[s];ma[s++]=null;var f=ma[s];if(ma[s++]=null,c!==null&&d!==null){var b=c.pending;b===null?d.next=d:(d.next=b.next,b.next=d),c.pending=d}f!==0&&Dh(i,d,f)}}function Ji(e,s,i,c){ma[br++]=e,ma[br++]=s,ma[br++]=i,ma[br++]=c,Jo|=c,e.lanes|=c,e=e.alternate,e!==null&&(e.lanes|=c)}function Zo(e,s,i,c){return Ji(e,s,i,c),Zi(e)}function xr(e,s){return Ji(e,null,null,s),Zi(e)}function Dh(e,s,i){e.lanes|=i;var c=e.alternate;c!==null&&(c.lanes|=i);for(var d=!1,f=e.return;f!==null;)f.childLanes|=i,c=f.alternate,c!==null&&(c.childLanes|=i),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(d=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,d&&s!==null&&(d=31-wt(i),e=f.hiddenUpdates,c=e[d],c===null?e[d]=[s]:c.push(s),s.lane=i|536870912),f):null}function Zi(e){if(50<Jn)throw Jn=0,nu=null,Error(n(185));for(var s=e.return;s!==null;)e=s,s=e.return;return e.tag===3?e.stateNode:null}var wr={};function Ny(e,s,i,c){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zt(e,s,i,c){return new Ny(e,s,i,c)}function ec(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Pa(e,s){var i=e.alternate;return i===null?(i=Zt(e.tag,s,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=s,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,s=e.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Oh(e,s){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=s,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,s=i.dependencies,e.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),e}function el(e,s,i,c,d,f){var b=0;if(c=e,typeof e=="function")ec(e)&&(b=1);else if(typeof e=="string")b=Ev(e,i,ae.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case D:return e=Zt(31,i,s,d),e.elementType=D,e.lanes=f,e;case C:return $s(i.children,d,f,s);case T:b=8,d|=24;break;case A:return e=Zt(12,i,s,d|2),e.elementType=A,e.lanes=f,e;case he:return e=Zt(13,i,s,d),e.elementType=he,e.lanes=f,e;case X:return e=Zt(19,i,s,d),e.elementType=X,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case I:case P:b=10;break e;case G:b=9;break e;case te:b=11;break e;case le:b=14;break e;case O:b=16,c=null;break e}b=29,i=Error(n(130,e===null?"null":typeof e,"")),c=null}return s=Zt(b,i,s,d),s.elementType=e,s.type=c,s.lanes=f,s}function $s(e,s,i,c){return e=Zt(7,e,c,s),e.lanes=i,e}function tc(e,s,i){return e=Zt(6,e,null,s),e.lanes=i,e}function ac(e,s,i){return s=Zt(4,e.children!==null?e.children:[],e.key,s),s.lanes=i,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}var jr=[],Sr=0,tl=null,al=0,ga=[],pa=0,zs=null,Ha=1,Ya="";function Bs(e,s){jr[Sr++]=al,jr[Sr++]=tl,tl=e,al=s}function Ah(e,s,i){ga[pa++]=Ha,ga[pa++]=Ya,ga[pa++]=zs,zs=e;var c=Ha;e=Ya;var d=32-wt(c)-1;c&=~(1<<d),i+=1;var f=32-wt(s)+d;if(30<f){var b=d-d%5;f=(c&(1<<b)-1).toString(32),c>>=b,d-=b,Ha=1<<32-wt(s)+d|i<<d|c,Ya=f+e}else Ha=1<<f|i<<d|c,Ya=e}function sc(e){e.return!==null&&(Bs(e,1),Ah(e,1,0))}function rc(e){for(;e===tl;)tl=jr[--Sr],jr[Sr]=null,al=jr[--Sr],jr[Sr]=null;for(;e===zs;)zs=ga[--pa],ga[pa]=null,Ya=ga[--pa],ga[pa]=null,Ha=ga[--pa],ga[pa]=null}var Pt=null,dt=null,Fe=!1,Is=null,Ta=!1,nc=Error(n(519));function Ps(e){var s=Error(n(418,""));throw On(fa(s,e)),nc}function kh(e){var s=e.stateNode,i=e.type,c=e.memoizedProps;switch(s[Bt]=e,s[Yt]=c,i){case"dialog":$e("cancel",s),$e("close",s);break;case"iframe":case"object":case"embed":$e("load",s);break;case"video":case"audio":for(i=0;i<ei.length;i++)$e(ei[i],s);break;case"source":$e("error",s);break;case"img":case"image":case"link":$e("error",s),$e("load",s);break;case"details":$e("toggle",s);break;case"input":$e("invalid",s),Qd(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Pi(s);break;case"select":$e("invalid",s);break;case"textarea":$e("invalid",s),Kd(s,c.value,c.defaultValue,c.children),Pi(s)}i=c.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||s.textContent===""+i||c.suppressHydrationWarning===!0||Wm(s.textContent,i)?(c.popover!=null&&($e("beforetoggle",s),$e("toggle",s)),c.onScroll!=null&&$e("scroll",s),c.onScrollEnd!=null&&$e("scrollend",s),c.onClick!=null&&(s.onclick=Ll),s=!0):s=!1,s||Ps(e)}function Rh(e){for(Pt=e.return;Pt;)switch(Pt.tag){case 5:case 13:Ta=!1;return;case 27:case 3:Ta=!0;return;default:Pt=Pt.return}}function Tn(e){if(e!==Pt)return!1;if(!Fe)return Rh(e),Fe=!0,!1;var s=e.tag,i;if((i=s!==3&&s!==27)&&((i=s===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||wu(e.type,e.memoizedProps)),i=!i),i&&dt&&Ps(e),Rh(e),s===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(n(317));e:{for(e=e.nextSibling,s=0;e;){if(e.nodeType===8)if(i=e.data,i==="/$"){if(s===0){dt=Sa(e.nextSibling);break e}s--}else i!=="$"&&i!=="$!"&&i!=="$?"||s++;e=e.nextSibling}dt=null}}else s===27?(s=dt,ws(e.type)?(e=Nu,Nu=null,dt=e):dt=s):dt=Pt?Sa(e.stateNode.nextSibling):null;return!0}function Dn(){dt=Pt=null,Fe=!1}function Mh(){var e=Is;return e!==null&&(Gt===null?Gt=e:Gt.push.apply(Gt,e),Is=null),e}function On(e){Is===null?Is=[e]:Is.push(e)}var ic=_(null),Hs=null,Va=null;function is(e,s,i){z(ic,s._currentValue),s._currentValue=i}function Fa(e){e._currentValue=ic.current,$(ic)}function lc(e,s,i){for(;e!==null;){var c=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),e===i)break;e=e.return}}function oc(e,s,i,c){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var f=d.dependencies;if(f!==null){var b=d.child;f=f.firstContext;e:for(;f!==null;){var j=f;f=d;for(var R=0;R<s.length;R++)if(j.context===s[R]){f.lanes|=i,j=f.alternate,j!==null&&(j.lanes|=i),lc(f.return,i,e),c||(b=null);break e}f=j.next}}else if(d.tag===18){if(b=d.return,b===null)throw Error(n(341));b.lanes|=i,f=b.alternate,f!==null&&(f.lanes|=i),lc(b,i,e),b=null}else b=d.child;if(b!==null)b.return=d;else for(b=d;b!==null;){if(b===e){b=null;break}if(d=b.sibling,d!==null){d.return=b.return,b=d;break}b=b.return}d=b}}function An(e,s,i,c){e=null;for(var d=s,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var b=d.alternate;if(b===null)throw Error(n(387));if(b=b.memoizedProps,b!==null){var j=d.type;Jt(d.pendingProps.value,b.value)||(e!==null?e.push(j):e=[j])}}else if(d===de.current){if(b=d.alternate,b===null)throw Error(n(387));b.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(ii):e=[ii])}d=d.return}e!==null&&oc(s,e,i,c),s.flags|=262144}function sl(e){for(e=e.firstContext;e!==null;){if(!Jt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ys(e){Hs=e,Va=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function It(e){return Uh(Hs,e)}function rl(e,s){return Hs===null&&Ys(e),Uh(e,s)}function Uh(e,s){var i=s._currentValue;if(s={context:s,memoizedValue:i,next:null},Va===null){if(e===null)throw Error(n(308));Va=s,e.dependencies={lanes:0,firstContext:s},e.flags|=524288}else Va=Va.next=s;return i}var Cy=typeof AbortController!="undefined"?AbortController:function(){var e=[],s=this.signal={aborted:!1,addEventListener:function(i,c){e.push(c)}};this.abort=function(){s.aborted=!0,e.forEach(function(i){return i()})}},Ey=r.unstable_scheduleCallback,Ty=r.unstable_NormalPriority,Ct={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cc(){return{controller:new Cy,data:new Map,refCount:0}}function kn(e){e.refCount--,e.refCount===0&&Ey(Ty,function(){e.controller.abort()})}var Rn=null,uc=0,_r=0,Nr=null;function Dy(e,s){if(Rn===null){var i=Rn=[];uc=0,_r=hu(),Nr={status:"pending",value:void 0,then:function(c){i.push(c)}}}return uc++,s.then(Lh,Lh),s}function Lh(){if(--uc===0&&Rn!==null){Nr!==null&&(Nr.status="fulfilled");var e=Rn;Rn=null,_r=0,Nr=null;for(var s=0;s<e.length;s++)(0,e[s])()}}function Oy(e,s){var i=[],c={status:"pending",value:null,reason:null,then:function(d){i.push(d)}};return e.then(function(){c.status="fulfilled",c.value=s;for(var d=0;d<i.length;d++)(0,i[d])(s)},function(d){for(c.status="rejected",c.reason=d,d=0;d<i.length;d++)(0,i[d])(void 0)}),c}var qh=k.S;k.S=function(e,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&Dy(e,s),qh!==null&&qh(e,s)};var Vs=_(null);function dc(){var e=Vs.current;return e!==null?e:st.pooledCache}function nl(e,s){s===null?z(Vs,Vs.current):z(Vs,s.pool)}function $h(){var e=dc();return e===null?null:{parent:Ct._currentValue,pool:e}}var Mn=Error(n(460)),zh=Error(n(474)),il=Error(n(542)),hc={then:function(){}};function Bh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ll(){}function Ih(e,s,i){switch(i=e[i],i===void 0?e.push(s):i!==s&&(s.then(ll,ll),s=i),s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,Hh(e),e;default:if(typeof s.status=="string")s.then(ll,ll);else{if(e=st,e!==null&&100<e.shellSuspendCounter)throw Error(n(482));e=s,e.status="pending",e.then(function(c){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=c}},function(c){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,Hh(e),e}throw Un=s,Mn}}var Un=null;function Ph(){if(Un===null)throw Error(n(459));var e=Un;return Un=null,e}function Hh(e){if(e===Mn||e===il)throw Error(n(483))}var ls=!1;function fc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mc(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function os(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function cs(e,s,i){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,(Ke&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,s=Zi(e),Dh(e,null,i),s}return Ji(e,c,s,i),Zi(e)}function Ln(e,s,i){if(s=s.updateQueue,s!==null&&(s=s.shared,(i&4194048)!==0)){var c=s.lanes;c&=e.pendingLanes,i|=c,s.lanes=i,Ld(e,i)}}function gc(e,s){var i=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,i===c)){var d=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var b={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};f===null?d=f=b:f=f.next=b,i=i.next}while(i!==null);f===null?d=f=s:f=f.next=s}else d=f=s;i={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:c.shared,callbacks:c.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=s:e.next=s,i.lastBaseUpdate=s}var pc=!1;function qn(){if(pc){var e=Nr;if(e!==null)throw e}}function $n(e,s,i,c){pc=!1;var d=e.updateQueue;ls=!1;var f=d.firstBaseUpdate,b=d.lastBaseUpdate,j=d.shared.pending;if(j!==null){d.shared.pending=null;var R=j,V=R.next;R.next=null,b===null?f=V:b.next=V,b=R;var ee=e.alternate;ee!==null&&(ee=ee.updateQueue,j=ee.lastBaseUpdate,j!==b&&(j===null?ee.firstBaseUpdate=V:j.next=V,ee.lastBaseUpdate=R))}if(f!==null){var ne=d.baseState;b=0,ee=V=R=null,j=f;do{var Q=j.lane&-536870913,K=Q!==j.lane;if(K?(Pe&Q)===Q:(c&Q)===Q){Q!==0&&Q===_r&&(pc=!0),ee!==null&&(ee=ee.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var Oe=e,Ce=j;Q=s;var tt=i;switch(Ce.tag){case 1:if(Oe=Ce.payload,typeof Oe=="function"){ne=Oe.call(tt,ne,Q);break e}ne=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=Ce.payload,Q=typeof Oe=="function"?Oe.call(tt,ne,Q):Oe,Q==null)break e;ne=y({},ne,Q);break e;case 2:ls=!0}}Q=j.callback,Q!==null&&(e.flags|=64,K&&(e.flags|=8192),K=d.callbacks,K===null?d.callbacks=[Q]:K.push(Q))}else K={lane:Q,tag:j.tag,payload:j.payload,callback:j.callback,next:null},ee===null?(V=ee=K,R=ne):ee=ee.next=K,b|=Q;if(j=j.next,j===null){if(j=d.shared.pending,j===null)break;K=j,j=K.next,K.next=null,d.lastBaseUpdate=K,d.shared.pending=null}}while(!0);ee===null&&(R=ne),d.baseState=R,d.firstBaseUpdate=V,d.lastBaseUpdate=ee,f===null&&(d.shared.lanes=0),ys|=b,e.lanes=b,e.memoizedState=ne}}function Yh(e,s){if(typeof e!="function")throw Error(n(191,e));e.call(s)}function Vh(e,s){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)Yh(i[e],s)}var Cr=_(null),ol=_(0);function Fh(e,s){e=Za,z(ol,e),z(Cr,s),Za=e|s.baseLanes}function yc(){z(ol,Za),z(Cr,Cr.current)}function vc(){Za=ol.current,$(Cr),$(ol)}var us=0,Me=null,Ze=null,jt=null,cl=!1,Er=!1,Fs=!1,ul=0,zn=0,Tr=null,Ay=0;function pt(){throw Error(n(321))}function bc(e,s){if(s===null)return!1;for(var i=0;i<s.length&&i<e.length;i++)if(!Jt(e[i],s[i]))return!1;return!0}function xc(e,s,i,c,d,f){return us=f,Me=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,k.H=e===null||e.memoizedState===null?Of:Af,Fs=!1,f=i(c,d),Fs=!1,Er&&(f=Gh(s,i,c,d)),Qh(e),f}function Qh(e){k.H=pl;var s=Ze!==null&&Ze.next!==null;if(us=0,jt=Ze=Me=null,cl=!1,zn=0,Tr=null,s)throw Error(n(300));e===null||At||(e=e.dependencies,e!==null&&sl(e)&&(At=!0))}function Gh(e,s,i,c){Me=e;var d=0;do{if(Er&&(Tr=null),zn=0,Er=!1,25<=d)throw Error(n(301));if(d+=1,jt=Ze=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}k.H=$y,f=s(i,c)}while(Er);return f}function ky(){var e=k.H,s=e.useState()[0];return s=typeof s.then=="function"?Bn(s):s,e=e.useState()[0],(Ze!==null?Ze.memoizedState:null)!==e&&(Me.flags|=1024),s}function wc(){var e=ul!==0;return ul=0,e}function jc(e,s,i){s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~i}function Sc(e){if(cl){for(e=e.memoizedState;e!==null;){var s=e.queue;s!==null&&(s.pending=null),e=e.next}cl=!1}us=0,jt=Ze=Me=null,Er=!1,zn=ul=0,Tr=null}function Ft(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?Me.memoizedState=jt=e:jt=jt.next=e,jt}function St(){if(Ze===null){var e=Me.alternate;e=e!==null?e.memoizedState:null}else e=Ze.next;var s=jt===null?Me.memoizedState:jt.next;if(s!==null)jt=s,Ze=e;else{if(e===null)throw Me.alternate===null?Error(n(467)):Error(n(310));Ze=e,e={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},jt===null?Me.memoizedState=jt=e:jt=jt.next=e}return jt}function _c(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Bn(e){var s=zn;return zn+=1,Tr===null&&(Tr=[]),e=Ih(Tr,e,s),s=Me,(jt===null?s.memoizedState:jt.next)===null&&(s=s.alternate,k.H=s===null||s.memoizedState===null?Of:Af),e}function dl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Bn(e);if(e.$$typeof===P)return It(e)}throw Error(n(438,String(e)))}function Nc(e){var s=null,i=Me.updateQueue;if(i!==null&&(s=i.memoCache),s==null){var c=Me.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),i===null&&(i=_c(),Me.updateQueue=i),i.memoCache=s,i=s.data[s.index],i===void 0)for(i=s.data[s.index]=Array(e),c=0;c<e;c++)i[c]=E;return s.index++,i}function Qa(e,s){return typeof s=="function"?s(e):s}function hl(e){var s=St();return Cc(s,Ze,e)}function Cc(e,s,i){var c=e.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=i;var d=e.baseQueue,f=c.pending;if(f!==null){if(d!==null){var b=d.next;d.next=f.next,f.next=b}s.baseQueue=d=f,c.pending=null}if(f=e.baseState,d===null)e.memoizedState=f;else{s=d.next;var j=b=null,R=null,V=s,ee=!1;do{var ne=V.lane&-536870913;if(ne!==V.lane?(Pe&ne)===ne:(us&ne)===ne){var Q=V.revertLane;if(Q===0)R!==null&&(R=R.next={lane:0,revertLane:0,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),ne===_r&&(ee=!0);else if((us&Q)===Q){V=V.next,Q===_r&&(ee=!0);continue}else ne={lane:0,revertLane:V.revertLane,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},R===null?(j=R=ne,b=f):R=R.next=ne,Me.lanes|=Q,ys|=Q;ne=V.action,Fs&&i(f,ne),f=V.hasEagerState?V.eagerState:i(f,ne)}else Q={lane:ne,revertLane:V.revertLane,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},R===null?(j=R=Q,b=f):R=R.next=Q,Me.lanes|=ne,ys|=ne;V=V.next}while(V!==null&&V!==s);if(R===null?b=f:R.next=j,!Jt(f,e.memoizedState)&&(At=!0,ee&&(i=Nr,i!==null)))throw i;e.memoizedState=f,e.baseState=b,e.baseQueue=R,c.lastRenderedState=f}return d===null&&(c.lanes=0),[e.memoizedState,c.dispatch]}function Ec(e){var s=St(),i=s.queue;if(i===null)throw Error(n(311));i.lastRenderedReducer=e;var c=i.dispatch,d=i.pending,f=s.memoizedState;if(d!==null){i.pending=null;var b=d=d.next;do f=e(f,b.action),b=b.next;while(b!==d);Jt(f,s.memoizedState)||(At=!0),s.memoizedState=f,s.baseQueue===null&&(s.baseState=f),i.lastRenderedState=f}return[f,c]}function Kh(e,s,i){var c=Me,d=St(),f=Fe;if(f){if(i===void 0)throw Error(n(407));i=i()}else i=s();var b=!Jt((Ze||d).memoizedState,i);b&&(d.memoizedState=i,At=!0),d=d.queue;var j=Jh.bind(null,c,d,e);if(In(2048,8,j,[e]),d.getSnapshot!==s||b||jt!==null&&jt.memoizedState.tag&1){if(c.flags|=2048,Dr(9,fl(),Xh.bind(null,c,d,i,s),null),st===null)throw Error(n(349));f||(us&124)!==0||Wh(c,s,i)}return i}function Wh(e,s,i){e.flags|=16384,e={getSnapshot:s,value:i},s=Me.updateQueue,s===null?(s=_c(),Me.updateQueue=s,s.stores=[e]):(i=s.stores,i===null?s.stores=[e]:i.push(e))}function Xh(e,s,i,c){s.value=i,s.getSnapshot=c,Zh(s)&&ef(e)}function Jh(e,s,i){return i(function(){Zh(s)&&ef(e)})}function Zh(e){var s=e.getSnapshot;e=e.value;try{var i=s();return!Jt(e,i)}catch(c){return!0}}function ef(e){var s=xr(e,2);s!==null&&ra(s,e,2)}function Tc(e){var s=Ft();if(typeof e=="function"){var i=e;if(e=i(),Fs){xt(!0);try{i()}finally{xt(!1)}}}return s.memoizedState=s.baseState=e,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qa,lastRenderedState:e},s}function tf(e,s,i,c){return e.baseState=i,Cc(e,Ze,typeof c=="function"?c:Qa)}function Ry(e,s,i,c,d){if(gl(e))throw Error(n(485));if(e=s.action,e!==null){var f={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){f.listeners.push(b)}};k.T!==null?i(!0):f.isTransition=!1,c(f),i=s.pending,i===null?(f.next=s.pending=f,af(s,f)):(f.next=i.next,s.pending=i.next=f)}}function af(e,s){var i=s.action,c=s.payload,d=e.state;if(s.isTransition){var f=k.T,b={};k.T=b;try{var j=i(d,c),R=k.S;R!==null&&R(b,j),sf(e,s,j)}catch(V){Dc(e,s,V)}finally{k.T=f}}else try{f=i(d,c),sf(e,s,f)}catch(V){Dc(e,s,V)}}function sf(e,s,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(c){rf(e,s,c)},function(c){return Dc(e,s,c)}):rf(e,s,i)}function rf(e,s,i){s.status="fulfilled",s.value=i,nf(s),e.state=i,s=e.pending,s!==null&&(i=s.next,i===s?e.pending=null:(i=i.next,s.next=i,af(e,i)))}function Dc(e,s,i){var c=e.pending;if(e.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=i,nf(s),s=s.next;while(s!==c)}e.action=null}function nf(e){e=e.listeners;for(var s=0;s<e.length;s++)(0,e[s])()}function lf(e,s){return s}function of(e,s){if(Fe){var i=st.formState;if(i!==null){e:{var c=Me;if(Fe){if(dt){t:{for(var d=dt,f=Ta;d.nodeType!==8;){if(!f){d=null;break t}if(d=Sa(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){dt=Sa(d.nextSibling),c=d.data==="F!";break e}}Ps(c)}c=!1}c&&(s=i[0])}}return i=Ft(),i.memoizedState=i.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lf,lastRenderedState:s},i.queue=c,i=Ef.bind(null,Me,c),c.dispatch=i,c=Tc(!1),f=Mc.bind(null,Me,!1,c.queue),c=Ft(),d={state:s,dispatch:null,action:e,pending:null},c.queue=d,i=Ry.bind(null,Me,d,f,i),d.dispatch=i,c.memoizedState=e,[s,i,!1]}function cf(e){var s=St();return uf(s,Ze,e)}function uf(e,s,i){if(s=Cc(e,s,lf)[0],e=hl(Qa)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=Bn(s)}catch(b){throw b===Mn?il:b}else c=s;s=St();var d=s.queue,f=d.dispatch;return i!==s.memoizedState&&(Me.flags|=2048,Dr(9,fl(),My.bind(null,d,i),null)),[c,f,e]}function My(e,s){e.action=s}function df(e){var s=St(),i=Ze;if(i!==null)return uf(s,i,e);St(),s=s.memoizedState,i=St();var c=i.queue.dispatch;return i.memoizedState=e,[s,c,!1]}function Dr(e,s,i,c){return e={tag:e,create:i,deps:c,inst:s,next:null},s=Me.updateQueue,s===null&&(s=_c(),Me.updateQueue=s),i=s.lastEffect,i===null?s.lastEffect=e.next=e:(c=i.next,i.next=e,e.next=c,s.lastEffect=e),e}function fl(){return{destroy:void 0,resource:void 0}}function hf(){return St().memoizedState}function ml(e,s,i,c){var d=Ft();c=c===void 0?null:c,Me.flags|=e,d.memoizedState=Dr(1|s,fl(),i,c)}function In(e,s,i,c){var d=St();c=c===void 0?null:c;var f=d.memoizedState.inst;Ze!==null&&c!==null&&bc(c,Ze.memoizedState.deps)?d.memoizedState=Dr(s,f,i,c):(Me.flags|=e,d.memoizedState=Dr(1|s,f,i,c))}function ff(e,s){ml(8390656,8,e,s)}function mf(e,s){In(2048,8,e,s)}function gf(e,s){return In(4,2,e,s)}function pf(e,s){return In(4,4,e,s)}function yf(e,s){if(typeof s=="function"){e=e();var i=s(e);return function(){typeof i=="function"?i():s(null)}}if(s!=null)return e=e(),s.current=e,function(){s.current=null}}function vf(e,s,i){i=i!=null?i.concat([e]):null,In(4,4,yf.bind(null,s,e),i)}function Oc(){}function bf(e,s){var i=St();s=s===void 0?null:s;var c=i.memoizedState;return s!==null&&bc(s,c[1])?c[0]:(i.memoizedState=[e,s],e)}function xf(e,s){var i=St();s=s===void 0?null:s;var c=i.memoizedState;if(s!==null&&bc(s,c[1]))return c[0];if(c=e(),Fs){xt(!0);try{e()}finally{xt(!1)}}return i.memoizedState=[c,s],c}function Ac(e,s,i){return i===void 0||(us&1073741824)!==0?e.memoizedState=s:(e.memoizedState=i,e=Sm(),Me.lanes|=e,ys|=e,i)}function wf(e,s,i,c){return Jt(i,s)?i:Cr.current!==null?(e=Ac(e,i,c),Jt(e,s)||(At=!0),e):(us&42)===0?(At=!0,e.memoizedState=i):(e=Sm(),Me.lanes|=e,ys|=e,s)}function jf(e,s,i,c,d){var f=M.p;M.p=f!==0&&8>f?f:8;var b=k.T,j={};k.T=j,Mc(e,!1,s,i);try{var R=d(),V=k.S;if(V!==null&&V(j,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var ee=Oy(R,c);Pn(e,s,ee,sa(e))}else Pn(e,s,c,sa(e))}catch(ne){Pn(e,s,{then:function(){},status:"rejected",reason:ne},sa())}finally{M.p=f,k.T=b}}function Uy(){}function kc(e,s,i,c){if(e.tag!==5)throw Error(n(476));var d=Sf(e).queue;jf(e,d,s,F,i===null?Uy:function(){return _f(e),i(c)})}function Sf(e){var s=e.memoizedState;if(s!==null)return s;s={memoizedState:F,baseState:F,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qa,lastRenderedState:F},next:null};var i={};return s.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qa,lastRenderedState:i},next:null},e.memoizedState=s,e=e.alternate,e!==null&&(e.memoizedState=s),s}function _f(e){var s=Sf(e).next.queue;Pn(e,s,{},sa())}function Rc(){return It(ii)}function Nf(){return St().memoizedState}function Cf(){return St().memoizedState}function Ly(e){for(var s=e.return;s!==null;){switch(s.tag){case 24:case 3:var i=sa();e=os(i);var c=cs(s,e,i);c!==null&&(ra(c,s,i),Ln(c,s,i)),s={cache:cc()},e.payload=s;return}s=s.return}}function qy(e,s,i){var c=sa();i={lane:c,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},gl(e)?Tf(s,i):(i=Zo(e,s,i,c),i!==null&&(ra(i,e,c),Df(i,s,c)))}function Ef(e,s,i){var c=sa();Pn(e,s,i,c)}function Pn(e,s,i,c){var d={lane:c,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(gl(e))Tf(s,d);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=s.lastRenderedReducer,f!==null))try{var b=s.lastRenderedState,j=f(b,i);if(d.hasEagerState=!0,d.eagerState=j,Jt(j,b))return Ji(e,s,d,0),st===null&&Xi(),!1}catch(R){}if(i=Zo(e,s,d,c),i!==null)return ra(i,e,c),Df(i,s,c),!0}return!1}function Mc(e,s,i,c){if(c={lane:2,revertLane:hu(),action:c,hasEagerState:!1,eagerState:null,next:null},gl(e)){if(s)throw Error(n(479))}else s=Zo(e,i,c,2),s!==null&&ra(s,e,2)}function gl(e){var s=e.alternate;return e===Me||s!==null&&s===Me}function Tf(e,s){Er=cl=!0;var i=e.pending;i===null?s.next=s:(s.next=i.next,i.next=s),e.pending=s}function Df(e,s,i){if((i&4194048)!==0){var c=s.lanes;c&=e.pendingLanes,i|=c,s.lanes=i,Ld(e,i)}}var pl={readContext:It,use:dl,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useLayoutEffect:pt,useInsertionEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useSyncExternalStore:pt,useId:pt,useHostTransitionStatus:pt,useFormState:pt,useActionState:pt,useOptimistic:pt,useMemoCache:pt,useCacheRefresh:pt},Of={readContext:It,use:dl,useCallback:function(e,s){return Ft().memoizedState=[e,s===void 0?null:s],e},useContext:It,useEffect:ff,useImperativeHandle:function(e,s,i){i=i!=null?i.concat([e]):null,ml(4194308,4,yf.bind(null,s,e),i)},useLayoutEffect:function(e,s){return ml(4194308,4,e,s)},useInsertionEffect:function(e,s){ml(4,2,e,s)},useMemo:function(e,s){var i=Ft();s=s===void 0?null:s;var c=e();if(Fs){xt(!0);try{e()}finally{xt(!1)}}return i.memoizedState=[c,s],c},useReducer:function(e,s,i){var c=Ft();if(i!==void 0){var d=i(s);if(Fs){xt(!0);try{i(s)}finally{xt(!1)}}}else d=s;return c.memoizedState=c.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},c.queue=e,e=e.dispatch=qy.bind(null,Me,e),[c.memoizedState,e]},useRef:function(e){var s=Ft();return e={current:e},s.memoizedState=e},useState:function(e){e=Tc(e);var s=e.queue,i=Ef.bind(null,Me,s);return s.dispatch=i,[e.memoizedState,i]},useDebugValue:Oc,useDeferredValue:function(e,s){var i=Ft();return Ac(i,e,s)},useTransition:function(){var e=Tc(!1);return e=jf.bind(null,Me,e.queue,!0,!1),Ft().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,s,i){var c=Me,d=Ft();if(Fe){if(i===void 0)throw Error(n(407));i=i()}else{if(i=s(),st===null)throw Error(n(349));(Pe&124)!==0||Wh(c,s,i)}d.memoizedState=i;var f={value:i,getSnapshot:s};return d.queue=f,ff(Jh.bind(null,c,f,e),[e]),c.flags|=2048,Dr(9,fl(),Xh.bind(null,c,f,i,s),null),i},useId:function(){var e=Ft(),s=st.identifierPrefix;if(Fe){var i=Ya,c=Ha;i=(c&~(1<<32-wt(c)-1)).toString(32)+i,s=""+s+"R"+i,i=ul++,0<i&&(s+="H"+i.toString(32)),s+=""}else i=Ay++,s=""+s+"r"+i.toString(32)+"";return e.memoizedState=s},useHostTransitionStatus:Rc,useFormState:of,useActionState:of,useOptimistic:function(e){var s=Ft();s.memoizedState=s.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=i,s=Mc.bind(null,Me,!0,i),i.dispatch=s,[e,s]},useMemoCache:Nc,useCacheRefresh:function(){return Ft().memoizedState=Ly.bind(null,Me)}},Af={readContext:It,use:dl,useCallback:bf,useContext:It,useEffect:mf,useImperativeHandle:vf,useInsertionEffect:gf,useLayoutEffect:pf,useMemo:xf,useReducer:hl,useRef:hf,useState:function(){return hl(Qa)},useDebugValue:Oc,useDeferredValue:function(e,s){var i=St();return wf(i,Ze.memoizedState,e,s)},useTransition:function(){var e=hl(Qa)[0],s=St().memoizedState;return[typeof e=="boolean"?e:Bn(e),s]},useSyncExternalStore:Kh,useId:Nf,useHostTransitionStatus:Rc,useFormState:cf,useActionState:cf,useOptimistic:function(e,s){var i=St();return tf(i,Ze,e,s)},useMemoCache:Nc,useCacheRefresh:Cf},$y={readContext:It,use:dl,useCallback:bf,useContext:It,useEffect:mf,useImperativeHandle:vf,useInsertionEffect:gf,useLayoutEffect:pf,useMemo:xf,useReducer:Ec,useRef:hf,useState:function(){return Ec(Qa)},useDebugValue:Oc,useDeferredValue:function(e,s){var i=St();return Ze===null?Ac(i,e,s):wf(i,Ze.memoizedState,e,s)},useTransition:function(){var e=Ec(Qa)[0],s=St().memoizedState;return[typeof e=="boolean"?e:Bn(e),s]},useSyncExternalStore:Kh,useId:Nf,useHostTransitionStatus:Rc,useFormState:df,useActionState:df,useOptimistic:function(e,s){var i=St();return Ze!==null?tf(i,Ze,e,s):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:Nc,useCacheRefresh:Cf},Or=null,Hn=0;function yl(e){var s=Hn;return Hn+=1,Or===null&&(Or=[]),Ih(Or,e,s)}function Yn(e,s){s=s.props.ref,e.ref=s!==void 0?s:null}function vl(e,s){throw s.$$typeof===x?Error(n(525)):(e=Object.prototype.toString.call(s),Error(n(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e)))}function kf(e){var s=e._init;return s(e._payload)}function Rf(e){function s(B,q){if(e){var H=B.deletions;H===null?(B.deletions=[q],B.flags|=16):H.push(q)}}function i(B,q){if(!e)return null;for(;q!==null;)s(B,q),q=q.sibling;return null}function c(B){for(var q=new Map;B!==null;)B.key!==null?q.set(B.key,B):q.set(B.index,B),B=B.sibling;return q}function d(B,q){return B=Pa(B,q),B.index=0,B.sibling=null,B}function f(B,q,H){return B.index=H,e?(H=B.alternate,H!==null?(H=H.index,H<q?(B.flags|=67108866,q):H):(B.flags|=67108866,q)):(B.flags|=1048576,q)}function b(B){return e&&B.alternate===null&&(B.flags|=67108866),B}function j(B,q,H,se){return q===null||q.tag!==6?(q=tc(H,B.mode,se),q.return=B,q):(q=d(q,H),q.return=B,q)}function R(B,q,H,se){var xe=H.type;return xe===C?ee(B,q,H.props.children,se,H.key):q!==null&&(q.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===O&&kf(xe)===q.type)?(q=d(q,H.props),Yn(q,H),q.return=B,q):(q=el(H.type,H.key,H.props,null,B.mode,se),Yn(q,H),q.return=B,q)}function V(B,q,H,se){return q===null||q.tag!==4||q.stateNode.containerInfo!==H.containerInfo||q.stateNode.implementation!==H.implementation?(q=ac(H,B.mode,se),q.return=B,q):(q=d(q,H.children||[]),q.return=B,q)}function ee(B,q,H,se,xe){return q===null||q.tag!==7?(q=$s(H,B.mode,se,xe),q.return=B,q):(q=d(q,H),q.return=B,q)}function ne(B,q,H){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=tc(""+q,B.mode,H),q.return=B,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case v:return H=el(q.type,q.key,q.props,null,B.mode,H),Yn(H,q),H.return=B,H;case S:return q=ac(q,B.mode,H),q.return=B,q;case O:var se=q._init;return q=se(q._payload),ne(B,q,H)}if(we(q)||W(q))return q=$s(q,B.mode,H,null),q.return=B,q;if(typeof q.then=="function")return ne(B,yl(q),H);if(q.$$typeof===P)return ne(B,rl(B,q),H);vl(B,q)}return null}function Q(B,q,H,se){var xe=q!==null?q.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return xe!==null?null:j(B,q,""+H,se);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case v:return H.key===xe?R(B,q,H,se):null;case S:return H.key===xe?V(B,q,H,se):null;case O:return xe=H._init,H=xe(H._payload),Q(B,q,H,se)}if(we(H)||W(H))return xe!==null?null:ee(B,q,H,se,null);if(typeof H.then=="function")return Q(B,q,yl(H),se);if(H.$$typeof===P)return Q(B,q,rl(B,H),se);vl(B,H)}return null}function K(B,q,H,se,xe){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return B=B.get(H)||null,j(q,B,""+se,xe);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case v:return B=B.get(se.key===null?H:se.key)||null,R(q,B,se,xe);case S:return B=B.get(se.key===null?H:se.key)||null,V(q,B,se,xe);case O:var Le=se._init;return se=Le(se._payload),K(B,q,H,se,xe)}if(we(se)||W(se))return B=B.get(H)||null,ee(q,B,se,xe,null);if(typeof se.then=="function")return K(B,q,H,yl(se),xe);if(se.$$typeof===P)return K(B,q,H,rl(q,se),xe);vl(q,se)}return null}function Oe(B,q,H,se){for(var xe=null,Le=null,Se=q,Ee=q=0,Rt=null;Se!==null&&Ee<H.length;Ee++){Se.index>Ee?(Rt=Se,Se=null):Rt=Se.sibling;var Ve=Q(B,Se,H[Ee],se);if(Ve===null){Se===null&&(Se=Rt);break}e&&Se&&Ve.alternate===null&&s(B,Se),q=f(Ve,q,Ee),Le===null?xe=Ve:Le.sibling=Ve,Le=Ve,Se=Rt}if(Ee===H.length)return i(B,Se),Fe&&Bs(B,Ee),xe;if(Se===null){for(;Ee<H.length;Ee++)Se=ne(B,H[Ee],se),Se!==null&&(q=f(Se,q,Ee),Le===null?xe=Se:Le.sibling=Se,Le=Se);return Fe&&Bs(B,Ee),xe}for(Se=c(Se);Ee<H.length;Ee++)Rt=K(Se,B,Ee,H[Ee],se),Rt!==null&&(e&&Rt.alternate!==null&&Se.delete(Rt.key===null?Ee:Rt.key),q=f(Rt,q,Ee),Le===null?xe=Rt:Le.sibling=Rt,Le=Rt);return e&&Se.forEach(function(Cs){return s(B,Cs)}),Fe&&Bs(B,Ee),xe}function Ce(B,q,H,se){if(H==null)throw Error(n(151));for(var xe=null,Le=null,Se=q,Ee=q=0,Rt=null,Ve=H.next();Se!==null&&!Ve.done;Ee++,Ve=H.next()){Se.index>Ee?(Rt=Se,Se=null):Rt=Se.sibling;var Cs=Q(B,Se,Ve.value,se);if(Cs===null){Se===null&&(Se=Rt);break}e&&Se&&Cs.alternate===null&&s(B,Se),q=f(Cs,q,Ee),Le===null?xe=Cs:Le.sibling=Cs,Le=Cs,Se=Rt}if(Ve.done)return i(B,Se),Fe&&Bs(B,Ee),xe;if(Se===null){for(;!Ve.done;Ee++,Ve=H.next())Ve=ne(B,Ve.value,se),Ve!==null&&(q=f(Ve,q,Ee),Le===null?xe=Ve:Le.sibling=Ve,Le=Ve);return Fe&&Bs(B,Ee),xe}for(Se=c(Se);!Ve.done;Ee++,Ve=H.next())Ve=K(Se,B,Ee,Ve.value,se),Ve!==null&&(e&&Ve.alternate!==null&&Se.delete(Ve.key===null?Ee:Ve.key),q=f(Ve,q,Ee),Le===null?xe=Ve:Le.sibling=Ve,Le=Ve);return e&&Se.forEach(function(zv){return s(B,zv)}),Fe&&Bs(B,Ee),xe}function tt(B,q,H,se){if(typeof H=="object"&&H!==null&&H.type===C&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case v:e:{for(var xe=H.key;q!==null;){if(q.key===xe){if(xe=H.type,xe===C){if(q.tag===7){i(B,q.sibling),se=d(q,H.props.children),se.return=B,B=se;break e}}else if(q.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===O&&kf(xe)===q.type){i(B,q.sibling),se=d(q,H.props),Yn(se,H),se.return=B,B=se;break e}i(B,q);break}else s(B,q);q=q.sibling}H.type===C?(se=$s(H.props.children,B.mode,se,H.key),se.return=B,B=se):(se=el(H.type,H.key,H.props,null,B.mode,se),Yn(se,H),se.return=B,B=se)}return b(B);case S:e:{for(xe=H.key;q!==null;){if(q.key===xe)if(q.tag===4&&q.stateNode.containerInfo===H.containerInfo&&q.stateNode.implementation===H.implementation){i(B,q.sibling),se=d(q,H.children||[]),se.return=B,B=se;break e}else{i(B,q);break}else s(B,q);q=q.sibling}se=ac(H,B.mode,se),se.return=B,B=se}return b(B);case O:return xe=H._init,H=xe(H._payload),tt(B,q,H,se)}if(we(H))return Oe(B,q,H,se);if(W(H)){if(xe=W(H),typeof xe!="function")throw Error(n(150));return H=xe.call(H),Ce(B,q,H,se)}if(typeof H.then=="function")return tt(B,q,yl(H),se);if(H.$$typeof===P)return tt(B,q,rl(B,H),se);vl(B,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,q!==null&&q.tag===6?(i(B,q.sibling),se=d(q,H),se.return=B,B=se):(i(B,q),se=tc(H,B.mode,se),se.return=B,B=se),b(B)):i(B,q)}return function(B,q,H,se){try{Hn=0;var xe=tt(B,q,H,se);return Or=null,xe}catch(Se){if(Se===Mn||Se===il)throw Se;var Le=Zt(29,Se,null,B.mode);return Le.lanes=se,Le.return=B,Le}}}var Ar=Rf(!0),Mf=Rf(!1),ya=_(null),Da=null;function ds(e){var s=e.alternate;z(Et,Et.current&1),z(ya,e),Da===null&&(s===null||Cr.current!==null||s.memoizedState!==null)&&(Da=e)}function Uf(e){if(e.tag===22){if(z(Et,Et.current),z(ya,e),Da===null){var s=e.alternate;s!==null&&s.memoizedState!==null&&(Da=e)}}else hs()}function hs(){z(Et,Et.current),z(ya,ya.current)}function Ga(e){$(ya),Da===e&&(Da=null),$(Et)}var Et=_(0);function bl(e){for(var s=e;s!==null;){if(s.tag===13){var i=s.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||_u(i)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Uc(e,s,i,c){s=e.memoizedState,i=i(c,s),i=i==null?s:y({},s,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Lc={enqueueSetState:function(e,s,i){e=e._reactInternals;var c=sa(),d=os(c);d.payload=s,i!=null&&(d.callback=i),s=cs(e,d,c),s!==null&&(ra(s,e,c),Ln(s,e,c))},enqueueReplaceState:function(e,s,i){e=e._reactInternals;var c=sa(),d=os(c);d.tag=1,d.payload=s,i!=null&&(d.callback=i),s=cs(e,d,c),s!==null&&(ra(s,e,c),Ln(s,e,c))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var i=sa(),c=os(i);c.tag=2,s!=null&&(c.callback=s),s=cs(e,c,i),s!==null&&(ra(s,e,i),Ln(s,e,i))}};function Lf(e,s,i,c,d,f,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,f,b):s.prototype&&s.prototype.isPureReactComponent?!Cn(i,c)||!Cn(d,f):!0}function qf(e,s,i,c){e=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(i,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(i,c),s.state!==e&&Lc.enqueueReplaceState(s,s.state,null)}function Qs(e,s){var i=s;if("ref"in s){i={};for(var c in s)c!=="ref"&&(i[c]=s[c])}if(e=e.defaultProps){i===s&&(i=y({},i));for(var d in e)i[d]===void 0&&(i[d]=e[d])}return i}var xl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function $f(e){xl(e)}function zf(e){console.error(e)}function Bf(e){xl(e)}function wl(e,s){try{var i=e.onUncaughtError;i(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function If(e,s,i){try{var c=e.onCaughtError;c(i.value,{componentStack:i.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function qc(e,s,i){return i=os(i),i.tag=3,i.payload={element:null},i.callback=function(){wl(e,s)},i}function Pf(e){return e=os(e),e.tag=3,e}function Hf(e,s,i,c){var d=i.type.getDerivedStateFromError;if(typeof d=="function"){var f=c.value;e.payload=function(){return d(f)},e.callback=function(){If(s,i,c)}}var b=i.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(e.callback=function(){If(s,i,c),typeof d!="function"&&(vs===null?vs=new Set([this]):vs.add(this));var j=c.stack;this.componentDidCatch(c.value,{componentStack:j!==null?j:""})})}function zy(e,s,i,c,d){if(i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=i.alternate,s!==null&&An(s,i,d,!0),i=ya.current,i!==null){switch(i.tag){case 13:return Da===null?lu():i.alternate===null&&ht===0&&(ht=3),i.flags&=-257,i.flags|=65536,i.lanes=d,c===hc?i.flags|=16384:(s=i.updateQueue,s===null?i.updateQueue=new Set([c]):s.add(c),cu(e,c,d)),!1;case 22:return i.flags|=65536,c===hc?i.flags|=16384:(s=i.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},i.updateQueue=s):(i=s.retryQueue,i===null?s.retryQueue=new Set([c]):i.add(c)),cu(e,c,d)),!1}throw Error(n(435,i.tag))}return cu(e,c,d),lu(),!1}if(Fe)return s=ya.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,c!==nc&&(e=Error(n(422),{cause:c}),On(fa(e,i)))):(c!==nc&&(s=Error(n(423),{cause:c}),On(fa(s,i))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,c=fa(c,i),d=qc(e.stateNode,c,d),gc(e,d),ht!==4&&(ht=2)),!1;var f=Error(n(520),{cause:c});if(f=fa(f,i),Xn===null?Xn=[f]:Xn.push(f),ht!==4&&(ht=2),s===null)return!0;c=fa(c,i),i=s;do{switch(i.tag){case 3:return i.flags|=65536,e=d&-d,i.lanes|=e,e=qc(i.stateNode,c,e),gc(i,e),!1;case 1:if(s=i.type,f=i.stateNode,(i.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(vs===null||!vs.has(f))))return i.flags|=65536,d&=-d,i.lanes|=d,d=Pf(d),Hf(d,e,i,c),gc(i,d),!1}i=i.return}while(i!==null);return!1}var Yf=Error(n(461)),At=!1;function Ut(e,s,i,c){s.child=e===null?Mf(s,null,i,c):Ar(s,e.child,i,c)}function Vf(e,s,i,c,d){i=i.render;var f=s.ref;if("ref"in c){var b={};for(var j in c)j!=="ref"&&(b[j]=c[j])}else b=c;return Ys(s),c=xc(e,s,i,b,f,d),j=wc(),e!==null&&!At?(jc(e,s,d),Ka(e,s,d)):(Fe&&j&&sc(s),s.flags|=1,Ut(e,s,c,d),s.child)}function Ff(e,s,i,c,d){if(e===null){var f=i.type;return typeof f=="function"&&!ec(f)&&f.defaultProps===void 0&&i.compare===null?(s.tag=15,s.type=f,Qf(e,s,f,c,d)):(e=el(i.type,null,c,s,s.mode,d),e.ref=s.ref,e.return=s,s.child=e)}if(f=e.child,!Vc(e,d)){var b=f.memoizedProps;if(i=i.compare,i=i!==null?i:Cn,i(b,c)&&e.ref===s.ref)return Ka(e,s,d)}return s.flags|=1,e=Pa(f,c),e.ref=s.ref,e.return=s,s.child=e}function Qf(e,s,i,c,d){if(e!==null){var f=e.memoizedProps;if(Cn(f,c)&&e.ref===s.ref)if(At=!1,s.pendingProps=c=f,Vc(e,d))(e.flags&131072)!==0&&(At=!0);else return s.lanes=e.lanes,Ka(e,s,d)}return $c(e,s,i,c,d)}function Gf(e,s,i){var c=s.pendingProps,d=c.children,f=e!==null?e.memoizedState:null;if(c.mode==="hidden"){if((s.flags&128)!==0){if(c=f!==null?f.baseLanes|i:i,e!==null){for(d=s.child=e.child,f=0;d!==null;)f=f|d.lanes|d.childLanes,d=d.sibling;s.childLanes=f&~c}else s.childLanes=0,s.child=null;return Kf(e,s,c,i)}if((i&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},e!==null&&nl(s,f!==null?f.cachePool:null),f!==null?Fh(s,f):yc(),Uf(s);else return s.lanes=s.childLanes=536870912,Kf(e,s,f!==null?f.baseLanes|i:i,i)}else f!==null?(nl(s,f.cachePool),Fh(s,f),hs(),s.memoizedState=null):(e!==null&&nl(s,null),yc(),hs());return Ut(e,s,d,i),s.child}function Kf(e,s,i,c){var d=dc();return d=d===null?null:{parent:Ct._currentValue,pool:d},s.memoizedState={baseLanes:i,cachePool:d},e!==null&&nl(s,null),yc(),Uf(s),e!==null&&An(e,s,c,!0),null}function jl(e,s){var i=s.ref;if(i===null)e!==null&&e.ref!==null&&(s.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(n(284));(e===null||e.ref!==i)&&(s.flags|=4194816)}}function $c(e,s,i,c,d){return Ys(s),i=xc(e,s,i,c,void 0,d),c=wc(),e!==null&&!At?(jc(e,s,d),Ka(e,s,d)):(Fe&&c&&sc(s),s.flags|=1,Ut(e,s,i,d),s.child)}function Wf(e,s,i,c,d,f){return Ys(s),s.updateQueue=null,i=Gh(s,c,i,d),Qh(e),c=wc(),e!==null&&!At?(jc(e,s,f),Ka(e,s,f)):(Fe&&c&&sc(s),s.flags|=1,Ut(e,s,i,f),s.child)}function Xf(e,s,i,c,d){if(Ys(s),s.stateNode===null){var f=wr,b=i.contextType;typeof b=="object"&&b!==null&&(f=It(b)),f=new i(c,f),s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Lc,s.stateNode=f,f._reactInternals=s,f=s.stateNode,f.props=c,f.state=s.memoizedState,f.refs={},fc(s),b=i.contextType,f.context=typeof b=="object"&&b!==null?It(b):wr,f.state=s.memoizedState,b=i.getDerivedStateFromProps,typeof b=="function"&&(Uc(s,i,b,c),f.state=s.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(b=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),b!==f.state&&Lc.enqueueReplaceState(f,f.state,null),$n(s,c,f,d),qn(),f.state=s.memoizedState),typeof f.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(e===null){f=s.stateNode;var j=s.memoizedProps,R=Qs(i,j);f.props=R;var V=f.context,ee=i.contextType;b=wr,typeof ee=="object"&&ee!==null&&(b=It(ee));var ne=i.getDerivedStateFromProps;ee=typeof ne=="function"||typeof f.getSnapshotBeforeUpdate=="function",j=s.pendingProps!==j,ee||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(j||V!==b)&&qf(s,f,c,b),ls=!1;var Q=s.memoizedState;f.state=Q,$n(s,c,f,d),qn(),V=s.memoizedState,j||Q!==V||ls?(typeof ne=="function"&&(Uc(s,i,ne,c),V=s.memoizedState),(R=ls||Lf(s,i,R,c,Q,V,b))?(ee||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(s.flags|=4194308)):(typeof f.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=V),f.props=c,f.state=V,f.context=b,c=R):(typeof f.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{f=s.stateNode,mc(e,s),b=s.memoizedProps,ee=Qs(i,b),f.props=ee,ne=s.pendingProps,Q=f.context,V=i.contextType,R=wr,typeof V=="object"&&V!==null&&(R=It(V)),j=i.getDerivedStateFromProps,(V=typeof j=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(b!==ne||Q!==R)&&qf(s,f,c,R),ls=!1,Q=s.memoizedState,f.state=Q,$n(s,c,f,d),qn();var K=s.memoizedState;b!==ne||Q!==K||ls||e!==null&&e.dependencies!==null&&sl(e.dependencies)?(typeof j=="function"&&(Uc(s,i,j,c),K=s.memoizedState),(ee=ls||Lf(s,i,ee,c,Q,K,R)||e!==null&&e.dependencies!==null&&sl(e.dependencies))?(V||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(c,K,R),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(c,K,R)),typeof f.componentDidUpdate=="function"&&(s.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof f.componentDidUpdate!="function"||b===e.memoizedProps&&Q===e.memoizedState||(s.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&Q===e.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=K),f.props=c,f.state=K,f.context=R,c=ee):(typeof f.componentDidUpdate!="function"||b===e.memoizedProps&&Q===e.memoizedState||(s.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&Q===e.memoizedState||(s.flags|=1024),c=!1)}return f=c,jl(e,s),c=(s.flags&128)!==0,f||c?(f=s.stateNode,i=c&&typeof i.getDerivedStateFromError!="function"?null:f.render(),s.flags|=1,e!==null&&c?(s.child=Ar(s,e.child,null,d),s.child=Ar(s,null,i,d)):Ut(e,s,i,d),s.memoizedState=f.state,e=s.child):e=Ka(e,s,d),e}function Jf(e,s,i,c){return Dn(),s.flags|=256,Ut(e,s,i,c),s.child}var zc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bc(e){return{baseLanes:e,cachePool:$h()}}function Ic(e,s,i){return e=e!==null?e.childLanes&~i:0,s&&(e|=va),e}function Zf(e,s,i){var c=s.pendingProps,d=!1,f=(s.flags&128)!==0,b;if((b=f)||(b=e!==null&&e.memoizedState===null?!1:(Et.current&2)!==0),b&&(d=!0,s.flags&=-129),b=(s.flags&32)!==0,s.flags&=-33,e===null){if(Fe){if(d?ds(s):hs(),Fe){var j=dt,R;if(R=j){e:{for(R=j,j=Ta;R.nodeType!==8;){if(!j){j=null;break e}if(R=Sa(R.nextSibling),R===null){j=null;break e}}j=R}j!==null?(s.memoizedState={dehydrated:j,treeContext:zs!==null?{id:Ha,overflow:Ya}:null,retryLane:536870912,hydrationErrors:null},R=Zt(18,null,null,0),R.stateNode=j,R.return=s,s.child=R,Pt=s,dt=null,R=!0):R=!1}R||Ps(s)}if(j=s.memoizedState,j!==null&&(j=j.dehydrated,j!==null))return _u(j)?s.lanes=32:s.lanes=536870912,null;Ga(s)}return j=c.children,c=c.fallback,d?(hs(),d=s.mode,j=Sl({mode:"hidden",children:j},d),c=$s(c,d,i,null),j.return=s,c.return=s,j.sibling=c,s.child=j,d=s.child,d.memoizedState=Bc(i),d.childLanes=Ic(e,b,i),s.memoizedState=zc,c):(ds(s),Pc(s,j))}if(R=e.memoizedState,R!==null&&(j=R.dehydrated,j!==null)){if(f)s.flags&256?(ds(s),s.flags&=-257,s=Hc(e,s,i)):s.memoizedState!==null?(hs(),s.child=e.child,s.flags|=128,s=null):(hs(),d=c.fallback,j=s.mode,c=Sl({mode:"visible",children:c.children},j),d=$s(d,j,i,null),d.flags|=2,c.return=s,d.return=s,c.sibling=d,s.child=c,Ar(s,e.child,null,i),c=s.child,c.memoizedState=Bc(i),c.childLanes=Ic(e,b,i),s.memoizedState=zc,s=d);else if(ds(s),_u(j)){if(b=j.nextSibling&&j.nextSibling.dataset,b)var V=b.dgst;b=V,c=Error(n(419)),c.stack="",c.digest=b,On({value:c,source:null,stack:null}),s=Hc(e,s,i)}else if(At||An(e,s,i,!1),b=(i&e.childLanes)!==0,At||b){if(b=st,b!==null&&(c=i&-i,c=(c&42)!==0?1:No(c),c=(c&(b.suspendedLanes|i))!==0?0:c,c!==0&&c!==R.retryLane))throw R.retryLane=c,xr(e,c),ra(b,e,c),Yf;j.data==="$?"||lu(),s=Hc(e,s,i)}else j.data==="$?"?(s.flags|=192,s.child=e.child,s=null):(e=R.treeContext,dt=Sa(j.nextSibling),Pt=s,Fe=!0,Is=null,Ta=!1,e!==null&&(ga[pa++]=Ha,ga[pa++]=Ya,ga[pa++]=zs,Ha=e.id,Ya=e.overflow,zs=s),s=Pc(s,c.children),s.flags|=4096);return s}return d?(hs(),d=c.fallback,j=s.mode,R=e.child,V=R.sibling,c=Pa(R,{mode:"hidden",children:c.children}),c.subtreeFlags=R.subtreeFlags&65011712,V!==null?d=Pa(V,d):(d=$s(d,j,i,null),d.flags|=2),d.return=s,c.return=s,c.sibling=d,s.child=c,c=d,d=s.child,j=e.child.memoizedState,j===null?j=Bc(i):(R=j.cachePool,R!==null?(V=Ct._currentValue,R=R.parent!==V?{parent:V,pool:V}:R):R=$h(),j={baseLanes:j.baseLanes|i,cachePool:R}),d.memoizedState=j,d.childLanes=Ic(e,b,i),s.memoizedState=zc,c):(ds(s),i=e.child,e=i.sibling,i=Pa(i,{mode:"visible",children:c.children}),i.return=s,i.sibling=null,e!==null&&(b=s.deletions,b===null?(s.deletions=[e],s.flags|=16):b.push(e)),s.child=i,s.memoizedState=null,i)}function Pc(e,s){return s=Sl({mode:"visible",children:s},e.mode),s.return=e,e.child=s}function Sl(e,s){return e=Zt(22,e,null,s),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Hc(e,s,i){return Ar(s,e.child,null,i),e=Pc(s,s.pendingProps.children),e.flags|=2,s.memoizedState=null,e}function em(e,s,i){e.lanes|=s;var c=e.alternate;c!==null&&(c.lanes|=s),lc(e.return,s,i)}function Yc(e,s,i,c,d){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:i,tailMode:d}:(f.isBackwards=s,f.rendering=null,f.renderingStartTime=0,f.last=c,f.tail=i,f.tailMode=d)}function tm(e,s,i){var c=s.pendingProps,d=c.revealOrder,f=c.tail;if(Ut(e,s,c.children,i),c=Et.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=s.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&em(e,i,s);else if(e.tag===19)em(e,i,s);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break e;for(;e.sibling===null;){if(e.return===null||e.return===s)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}c&=1}switch(z(Et,c),d){case"forwards":for(i=s.child,d=null;i!==null;)e=i.alternate,e!==null&&bl(e)===null&&(d=i),i=i.sibling;i=d,i===null?(d=s.child,s.child=null):(d=i.sibling,i.sibling=null),Yc(s,!1,d,i,f);break;case"backwards":for(i=null,d=s.child,s.child=null;d!==null;){if(e=d.alternate,e!==null&&bl(e)===null){s.child=d;break}e=d.sibling,d.sibling=i,i=d,d=e}Yc(s,!0,i,null,f);break;case"together":Yc(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ka(e,s,i){if(e!==null&&(s.dependencies=e.dependencies),ys|=s.lanes,(i&s.childLanes)===0)if(e!==null){if(An(e,s,i,!1),(i&s.childLanes)===0)return null}else return null;if(e!==null&&s.child!==e.child)throw Error(n(153));if(s.child!==null){for(e=s.child,i=Pa(e,e.pendingProps),s.child=i,i.return=s;e.sibling!==null;)e=e.sibling,i=i.sibling=Pa(e,e.pendingProps),i.return=s;i.sibling=null}return s.child}function Vc(e,s){return(e.lanes&s)!==0?!0:(e=e.dependencies,!!(e!==null&&sl(e)))}function By(e,s,i){switch(s.tag){case 3:oe(s,s.stateNode.containerInfo),is(s,Ct,e.memoizedState.cache),Dn();break;case 27:case 5:be(s);break;case 4:oe(s,s.stateNode.containerInfo);break;case 10:is(s,s.type,s.memoizedProps.value);break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(ds(s),s.flags|=128,null):(i&s.child.childLanes)!==0?Zf(e,s,i):(ds(s),e=Ka(e,s,i),e!==null?e.sibling:null);ds(s);break;case 19:var d=(e.flags&128)!==0;if(c=(i&s.childLanes)!==0,c||(An(e,s,i,!1),c=(i&s.childLanes)!==0),d){if(c)return tm(e,s,i);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),z(Et,Et.current),c)break;return null;case 22:case 23:return s.lanes=0,Gf(e,s,i);case 24:is(s,Ct,e.memoizedState.cache)}return Ka(e,s,i)}function am(e,s,i){if(e!==null)if(e.memoizedProps!==s.pendingProps)At=!0;else{if(!Vc(e,i)&&(s.flags&128)===0)return At=!1,By(e,s,i);At=(e.flags&131072)!==0}else At=!1,Fe&&(s.flags&1048576)!==0&&Ah(s,al,s.index);switch(s.lanes=0,s.tag){case 16:e:{e=s.pendingProps;var c=s.elementType,d=c._init;if(c=d(c._payload),s.type=c,typeof c=="function")ec(c)?(e=Qs(c,e),s.tag=1,s=Xf(null,s,c,e,i)):(s.tag=0,s=$c(null,s,c,e,i));else{if(c!=null){if(d=c.$$typeof,d===te){s.tag=11,s=Vf(null,s,c,e,i);break e}else if(d===le){s.tag=14,s=Ff(null,s,c,e,i);break e}}throw s=pe(c)||c,Error(n(306,s,""))}}return s;case 0:return $c(e,s,s.type,s.pendingProps,i);case 1:return c=s.type,d=Qs(c,s.pendingProps),Xf(e,s,c,d,i);case 3:e:{if(oe(s,s.stateNode.containerInfo),e===null)throw Error(n(387));c=s.pendingProps;var f=s.memoizedState;d=f.element,mc(e,s),$n(s,c,null,i);var b=s.memoizedState;if(c=b.cache,is(s,Ct,c),c!==f.cache&&oc(s,[Ct],i,!0),qn(),c=b.element,f.isDehydrated)if(f={element:c,isDehydrated:!1,cache:b.cache},s.updateQueue.baseState=f,s.memoizedState=f,s.flags&256){s=Jf(e,s,c,i);break e}else if(c!==d){d=fa(Error(n(424)),s),On(d),s=Jf(e,s,c,i);break e}else for(e=s.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,dt=Sa(e.firstChild),Pt=s,Fe=!0,Is=null,Ta=!0,i=Mf(s,null,c,i),s.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Dn(),c===d){s=Ka(e,s,i);break e}Ut(e,s,c,i)}s=s.child}return s;case 26:return jl(e,s),e===null?(i=ig(s.type,null,s.pendingProps,null))?s.memoizedState=i:Fe||(i=s.type,e=s.pendingProps,c=ql(re.current).createElement(i),c[Bt]=s,c[Yt]=e,qt(c,i,e),Ot(c),s.stateNode=c):s.memoizedState=ig(s.type,e.memoizedProps,s.pendingProps,e.memoizedState),null;case 27:return be(s),e===null&&Fe&&(c=s.stateNode=sg(s.type,s.pendingProps,re.current),Pt=s,Ta=!0,d=dt,ws(s.type)?(Nu=d,dt=Sa(c.firstChild)):dt=d),Ut(e,s,s.pendingProps.children,i),jl(e,s),e===null&&(s.flags|=4194304),s.child;case 5:return e===null&&Fe&&((d=c=dt)&&(c=mv(c,s.type,s.pendingProps,Ta),c!==null?(s.stateNode=c,Pt=s,dt=Sa(c.firstChild),Ta=!1,d=!0):d=!1),d||Ps(s)),be(s),d=s.type,f=s.pendingProps,b=e!==null?e.memoizedProps:null,c=f.children,wu(d,f)?c=null:b!==null&&wu(d,b)&&(s.flags|=32),s.memoizedState!==null&&(d=xc(e,s,ky,null,null,i),ii._currentValue=d),jl(e,s),Ut(e,s,c,i),s.child;case 6:return e===null&&Fe&&((e=i=dt)&&(i=gv(i,s.pendingProps,Ta),i!==null?(s.stateNode=i,Pt=s,dt=null,e=!0):e=!1),e||Ps(s)),null;case 13:return Zf(e,s,i);case 4:return oe(s,s.stateNode.containerInfo),c=s.pendingProps,e===null?s.child=Ar(s,null,c,i):Ut(e,s,c,i),s.child;case 11:return Vf(e,s,s.type,s.pendingProps,i);case 7:return Ut(e,s,s.pendingProps,i),s.child;case 8:return Ut(e,s,s.pendingProps.children,i),s.child;case 12:return Ut(e,s,s.pendingProps.children,i),s.child;case 10:return c=s.pendingProps,is(s,s.type,c.value),Ut(e,s,c.children,i),s.child;case 9:return d=s.type._context,c=s.pendingProps.children,Ys(s),d=It(d),c=c(d),s.flags|=1,Ut(e,s,c,i),s.child;case 14:return Ff(e,s,s.type,s.pendingProps,i);case 15:return Qf(e,s,s.type,s.pendingProps,i);case 19:return tm(e,s,i);case 31:return c=s.pendingProps,i=s.mode,c={mode:c.mode,children:c.children},e===null?(i=Sl(c,i),i.ref=s.ref,s.child=i,i.return=s,s=i):(i=Pa(e.child,c),i.ref=s.ref,s.child=i,i.return=s,s=i),s;case 22:return Gf(e,s,i);case 24:return Ys(s),c=It(Ct),e===null?(d=dc(),d===null&&(d=st,f=cc(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=i),d=f),s.memoizedState={parent:c,cache:d},fc(s),is(s,Ct,d)):((e.lanes&i)!==0&&(mc(e,s),$n(s,null,null,i),qn()),d=e.memoizedState,f=s.memoizedState,d.parent!==c?(d={parent:c,cache:c},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),is(s,Ct,c)):(c=f.cache,is(s,Ct,c),c!==d.cache&&oc(s,[Ct],i,!0))),Ut(e,s,s.pendingProps.children,i),s.child;case 29:throw s.pendingProps}throw Error(n(156,s.tag))}function Wa(e){e.flags|=4}function sm(e,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!dg(s)){if(s=ya.current,s!==null&&((Pe&4194048)===Pe?Da!==null:(Pe&62914560)!==Pe&&(Pe&536870912)===0||s!==Da))throw Un=hc,zh;e.flags|=8192}}function _l(e,s){s!==null&&(e.flags|=4),e.flags&16384&&(s=e.tag!==22?Md():536870912,e.lanes|=s,Ur|=s)}function Vn(e,s){if(!Fe)switch(e.tailMode){case"hidden":s=e.tail;for(var i=null;s!==null;)s.alternate!==null&&(i=s),s=s.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?s||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function it(e){var s=e.alternate!==null&&e.alternate.child===e.child,i=0,c=0;if(s)for(var d=e.child;d!==null;)i|=d.lanes|d.childLanes,c|=d.subtreeFlags&65011712,c|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)i|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=c,e.childLanes=i,s}function Iy(e,s,i){var c=s.pendingProps;switch(rc(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(s),null;case 1:return it(s),null;case 3:return i=s.stateNode,c=null,e!==null&&(c=e.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),Fa(Ct),fe(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Tn(s)?Wa(s):e===null||e.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Mh())),it(s),null;case 26:return i=s.memoizedState,e===null?(Wa(s),i!==null?(it(s),sm(s,i)):(it(s),s.flags&=-16777217)):i?i!==e.memoizedState?(Wa(s),it(s),sm(s,i)):(it(s),s.flags&=-16777217):(e.memoizedProps!==c&&Wa(s),it(s),s.flags&=-16777217),null;case 27:me(s),i=re.current;var d=s.type;if(e!==null&&s.stateNode!=null)e.memoizedProps!==c&&Wa(s);else{if(!c){if(s.stateNode===null)throw Error(n(166));return it(s),null}e=ae.current,Tn(s)?kh(s):(e=sg(d,c,i),s.stateNode=e,Wa(s))}return it(s),null;case 5:if(me(s),i=s.type,e!==null&&s.stateNode!=null)e.memoizedProps!==c&&Wa(s);else{if(!c){if(s.stateNode===null)throw Error(n(166));return it(s),null}if(e=ae.current,Tn(s))kh(s);else{switch(d=ql(re.current),e){case 1:e=d.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:e=d.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":e=d.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":e=d.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof c.is=="string"?d.createElement("select",{is:c.is}):d.createElement("select"),c.multiple?e.multiple=!0:c.size&&(e.size=c.size);break;default:e=typeof c.is=="string"?d.createElement(i,{is:c.is}):d.createElement(i)}}e[Bt]=s,e[Yt]=c;e:for(d=s.child;d!==null;){if(d.tag===5||d.tag===6)e.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break e;for(;d.sibling===null;){if(d.return===null||d.return===s)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}s.stateNode=e;e:switch(qt(e,i,c),i){case"button":case"input":case"select":case"textarea":e=!!c.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Wa(s)}}return it(s),s.flags&=-16777217,null;case 6:if(e&&s.stateNode!=null)e.memoizedProps!==c&&Wa(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(n(166));if(e=re.current,Tn(s)){if(e=s.stateNode,i=s.memoizedProps,c=null,d=Pt,d!==null)switch(d.tag){case 27:case 5:c=d.memoizedProps}e[Bt]=s,e=!!(e.nodeValue===i||c!==null&&c.suppressHydrationWarning===!0||Wm(e.nodeValue,i)),e||Ps(s)}else e=ql(e).createTextNode(c),e[Bt]=s,s.stateNode=e}return it(s),null;case 13:if(c=s.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=Tn(s),c!==null&&c.dehydrated!==null){if(e===null){if(!d)throw Error(n(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(n(317));d[Bt]=s}else Dn(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;it(s),d=!1}else d=Mh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(Ga(s),s):(Ga(s),null)}if(Ga(s),(s.flags&128)!==0)return s.lanes=i,s;if(i=c!==null,e=e!==null&&e.memoizedState!==null,i){c=s.child,d=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(d=c.alternate.memoizedState.cachePool.pool);var f=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(f=c.memoizedState.cachePool.pool),f!==d&&(c.flags|=2048)}return i!==e&&i&&(s.child.flags|=8192),_l(s,s.updateQueue),it(s),null;case 4:return fe(),e===null&&pu(s.stateNode.containerInfo),it(s),null;case 10:return Fa(s.type),it(s),null;case 19:if($(Et),d=s.memoizedState,d===null)return it(s),null;if(c=(s.flags&128)!==0,f=d.rendering,f===null)if(c)Vn(d,!1);else{if(ht!==0||e!==null&&(e.flags&128)!==0)for(e=s.child;e!==null;){if(f=bl(e),f!==null){for(s.flags|=128,Vn(d,!1),e=f.updateQueue,s.updateQueue=e,_l(s,e),s.subtreeFlags=0,e=i,i=s.child;i!==null;)Oh(i,e),i=i.sibling;return z(Et,Et.current&1|2),s.child}e=e.sibling}d.tail!==null&&ze()>El&&(s.flags|=128,c=!0,Vn(d,!1),s.lanes=4194304)}else{if(!c)if(e=bl(f),e!==null){if(s.flags|=128,c=!0,e=e.updateQueue,s.updateQueue=e,_l(s,e),Vn(d,!0),d.tail===null&&d.tailMode==="hidden"&&!f.alternate&&!Fe)return it(s),null}else 2*ze()-d.renderingStartTime>El&&i!==536870912&&(s.flags|=128,c=!0,Vn(d,!1),s.lanes=4194304);d.isBackwards?(f.sibling=s.child,s.child=f):(e=d.last,e!==null?e.sibling=f:s.child=f,d.last=f)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=ze(),s.sibling=null,e=Et.current,z(Et,c?e&1|2:e&1),s):(it(s),null);case 22:case 23:return Ga(s),vc(),c=s.memoizedState!==null,e!==null?e.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(i&536870912)!==0&&(s.flags&128)===0&&(it(s),s.subtreeFlags&6&&(s.flags|=8192)):it(s),i=s.updateQueue,i!==null&&_l(s,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==i&&(s.flags|=2048),e!==null&&$(Vs),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),s.memoizedState.cache!==i&&(s.flags|=2048),Fa(Ct),it(s),null;case 25:return null;case 30:return null}throw Error(n(156,s.tag))}function Py(e,s){switch(rc(s),s.tag){case 1:return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 3:return Fa(Ct),fe(),e=s.flags,(e&65536)!==0&&(e&128)===0?(s.flags=e&-65537|128,s):null;case 26:case 27:case 5:return me(s),null;case 13:if(Ga(s),e=s.memoizedState,e!==null&&e.dehydrated!==null){if(s.alternate===null)throw Error(n(340));Dn()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 19:return $(Et),null;case 4:return fe(),null;case 10:return Fa(s.type),null;case 22:case 23:return Ga(s),vc(),e!==null&&$(Vs),e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 24:return Fa(Ct),null;case 25:return null;default:return null}}function rm(e,s){switch(rc(s),s.tag){case 3:Fa(Ct),fe();break;case 26:case 27:case 5:me(s);break;case 4:fe();break;case 13:Ga(s);break;case 19:$(Et);break;case 10:Fa(s.type);break;case 22:case 23:Ga(s),vc(),e!==null&&$(Vs);break;case 24:Fa(Ct)}}function Fn(e,s){try{var i=s.updateQueue,c=i!==null?i.lastEffect:null;if(c!==null){var d=c.next;i=d;do{if((i.tag&e)===e){c=void 0;var f=i.create,b=i.inst;c=f(),b.destroy=c}i=i.next}while(i!==d)}}catch(j){at(s,s.return,j)}}function fs(e,s,i){try{var c=s.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var f=d.next;c=f;do{if((c.tag&e)===e){var b=c.inst,j=b.destroy;if(j!==void 0){b.destroy=void 0,d=s;var R=i,V=j;try{V()}catch(ee){at(d,R,ee)}}}c=c.next}while(c!==f)}}catch(ee){at(s,s.return,ee)}}function nm(e){var s=e.updateQueue;if(s!==null){var i=e.stateNode;try{Vh(s,i)}catch(c){at(e,e.return,c)}}}function im(e,s,i){i.props=Qs(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(c){at(e,s,c)}}function Qn(e,s){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var c=e.stateNode;break;case 30:c=e.stateNode;break;default:c=e.stateNode}typeof i=="function"?e.refCleanup=i(c):i.current=c}}catch(d){at(e,s,d)}}function Oa(e,s){var i=e.ref,c=e.refCleanup;if(i!==null)if(typeof c=="function")try{c()}catch(d){at(e,s,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(d){at(e,s,d)}else i.current=null}function lm(e){var s=e.type,i=e.memoizedProps,c=e.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":i.autoFocus&&c.focus();break e;case"img":i.src?c.src=i.src:i.srcSet&&(c.srcset=i.srcSet)}}catch(d){at(e,e.return,d)}}function Fc(e,s,i){try{var c=e.stateNode;cv(c,e.type,i,s),c[Yt]=s}catch(d){at(e,e.return,d)}}function om(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ws(e.type)||e.tag===4}function Qc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||om(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ws(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Gc(e,s,i){var c=e.tag;if(c===5||c===6)e=e.stateNode,s?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,s):(s=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,s.appendChild(e),i=i._reactRootContainer,i!=null||s.onclick!==null||(s.onclick=Ll));else if(c!==4&&(c===27&&ws(e.type)&&(i=e.stateNode,s=null),e=e.child,e!==null))for(Gc(e,s,i),e=e.sibling;e!==null;)Gc(e,s,i),e=e.sibling}function Nl(e,s,i){var c=e.tag;if(c===5||c===6)e=e.stateNode,s?i.insertBefore(e,s):i.appendChild(e);else if(c!==4&&(c===27&&ws(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(Nl(e,s,i),e=e.sibling;e!==null;)Nl(e,s,i),e=e.sibling}function cm(e){var s=e.stateNode,i=e.memoizedProps;try{for(var c=e.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);qt(s,c,i),s[Bt]=e,s[Yt]=i}catch(f){at(e,e.return,f)}}var Xa=!1,yt=!1,Kc=!1,um=typeof WeakSet=="function"?WeakSet:Set,kt=null;function Hy(e,s){if(e=e.containerInfo,bu=Hl,e=xh(e),Qo(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var c=i.getSelection&&i.getSelection();if(c&&c.rangeCount!==0){i=c.anchorNode;var d=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{i.nodeType,f.nodeType}catch(Ce){i=null;break e}var b=0,j=-1,R=-1,V=0,ee=0,ne=e,Q=null;t:for(;;){for(var K;ne!==i||d!==0&&ne.nodeType!==3||(j=b+d),ne!==f||c!==0&&ne.nodeType!==3||(R=b+c),ne.nodeType===3&&(b+=ne.nodeValue.length),(K=ne.firstChild)!==null;)Q=ne,ne=K;for(;;){if(ne===e)break t;if(Q===i&&++V===d&&(j=b),Q===f&&++ee===c&&(R=b),(K=ne.nextSibling)!==null)break;ne=Q,Q=ne.parentNode}ne=K}i=j===-1||R===-1?null:{start:j,end:R}}else i=null}i=i||{start:0,end:0}}else i=null;for(xu={focusedElem:e,selectionRange:i},Hl=!1,kt=s;kt!==null;)if(s=kt,e=s.child,(s.subtreeFlags&1024)!==0&&e!==null)e.return=s,kt=e;else for(;kt!==null;){switch(s=kt,f=s.alternate,e=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,i=s,d=f.memoizedProps,f=f.memoizedState,c=i.stateNode;try{var Oe=Qs(i.type,d,i.elementType===i.type);e=c.getSnapshotBeforeUpdate(Oe,f),c.__reactInternalSnapshotBeforeUpdate=e}catch(Ce){at(i,i.return,Ce)}}break;case 3:if((e&1024)!==0){if(e=s.stateNode.containerInfo,i=e.nodeType,i===9)Su(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Su(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(n(163))}if(e=s.sibling,e!==null){e.return=s.return,kt=e;break}kt=s.return}}function dm(e,s,i){var c=i.flags;switch(i.tag){case 0:case 11:case 15:ms(e,i),c&4&&Fn(5,i);break;case 1:if(ms(e,i),c&4)if(e=i.stateNode,s===null)try{e.componentDidMount()}catch(b){at(i,i.return,b)}else{var d=Qs(i.type,s.memoizedProps);s=s.memoizedState;try{e.componentDidUpdate(d,s,e.__reactInternalSnapshotBeforeUpdate)}catch(b){at(i,i.return,b)}}c&64&&nm(i),c&512&&Qn(i,i.return);break;case 3:if(ms(e,i),c&64&&(e=i.updateQueue,e!==null)){if(s=null,i.child!==null)switch(i.child.tag){case 27:case 5:s=i.child.stateNode;break;case 1:s=i.child.stateNode}try{Vh(e,s)}catch(b){at(i,i.return,b)}}break;case 27:s===null&&c&4&&cm(i);case 26:case 5:ms(e,i),s===null&&c&4&&lm(i),c&512&&Qn(i,i.return);break;case 12:ms(e,i);break;case 13:ms(e,i),c&4&&mm(e,i),c&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=Jy.bind(null,i),pv(e,i))));break;case 22:if(c=i.memoizedState!==null||Xa,!c){s=s!==null&&s.memoizedState!==null||yt,d=Xa;var f=yt;Xa=c,(yt=s)&&!f?gs(e,i,(i.subtreeFlags&8772)!==0):ms(e,i),Xa=d,yt=f}break;case 30:break;default:ms(e,i)}}function hm(e){var s=e.alternate;s!==null&&(e.alternate=null,hm(s)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(s=e.stateNode,s!==null&&To(s)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var nt=null,Qt=!1;function Ja(e,s,i){for(i=i.child;i!==null;)fm(e,s,i),i=i.sibling}function fm(e,s,i){if(Ge&&typeof Ge.onCommitFiberUnmount=="function")try{Ge.onCommitFiberUnmount(Ye,i)}catch(f){}switch(i.tag){case 26:yt||Oa(i,s),Ja(e,s,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:yt||Oa(i,s);var c=nt,d=Qt;ws(i.type)&&(nt=i.stateNode,Qt=!1),Ja(e,s,i),ai(i.stateNode),nt=c,Qt=d;break;case 5:yt||Oa(i,s);case 6:if(c=nt,d=Qt,nt=null,Ja(e,s,i),nt=c,Qt=d,nt!==null)if(Qt)try{(nt.nodeType===9?nt.body:nt.nodeName==="HTML"?nt.ownerDocument.body:nt).removeChild(i.stateNode)}catch(f){at(i,s,f)}else try{nt.removeChild(i.stateNode)}catch(f){at(i,s,f)}break;case 18:nt!==null&&(Qt?(e=nt,tg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),ui(e)):tg(nt,i.stateNode));break;case 4:c=nt,d=Qt,nt=i.stateNode.containerInfo,Qt=!0,Ja(e,s,i),nt=c,Qt=d;break;case 0:case 11:case 14:case 15:yt||fs(2,i,s),yt||fs(4,i,s),Ja(e,s,i);break;case 1:yt||(Oa(i,s),c=i.stateNode,typeof c.componentWillUnmount=="function"&&im(i,s,c)),Ja(e,s,i);break;case 21:Ja(e,s,i);break;case 22:yt=(c=yt)||i.memoizedState!==null,Ja(e,s,i),yt=c;break;default:Ja(e,s,i)}}function mm(e,s){if(s.memoizedState===null&&(e=s.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ui(e)}catch(i){at(s,s.return,i)}}function Yy(e){switch(e.tag){case 13:case 19:var s=e.stateNode;return s===null&&(s=e.stateNode=new um),s;case 22:return e=e.stateNode,s=e._retryCache,s===null&&(s=e._retryCache=new um),s;default:throw Error(n(435,e.tag))}}function Wc(e,s){var i=Yy(e);s.forEach(function(c){var d=Zy.bind(null,e,c);i.has(c)||(i.add(c),c.then(d,d))})}function ea(e,s){var i=s.deletions;if(i!==null)for(var c=0;c<i.length;c++){var d=i[c],f=e,b=s,j=b;e:for(;j!==null;){switch(j.tag){case 27:if(ws(j.type)){nt=j.stateNode,Qt=!1;break e}break;case 5:nt=j.stateNode,Qt=!1;break e;case 3:case 4:nt=j.stateNode.containerInfo,Qt=!0;break e}j=j.return}if(nt===null)throw Error(n(160));fm(f,b,d),nt=null,Qt=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)gm(s,e),s=s.sibling}var ja=null;function gm(e,s){var i=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ea(s,e),ta(e),c&4&&(fs(3,e,e.return),Fn(3,e),fs(5,e,e.return));break;case 1:ea(s,e),ta(e),c&512&&(yt||i===null||Oa(i,i.return)),c&64&&Xa&&(e=e.updateQueue,e!==null&&(c=e.callbacks,c!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?c:i.concat(c))));break;case 26:var d=ja;if(ea(s,e),ta(e),c&512&&(yt||i===null||Oa(i,i.return)),c&4){var f=i!==null?i.memoizedState:null;if(c=e.memoizedState,i===null)if(c===null)if(e.stateNode===null){e:{c=e.type,i=e.memoizedProps,d=d.ownerDocument||d;t:switch(c){case"title":f=d.getElementsByTagName("title")[0],(!f||f[yn]||f[Bt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(c),d.head.insertBefore(f,d.querySelector("head > title"))),qt(f,c,i),f[Bt]=e,Ot(f),c=f;break e;case"link":var b=cg("link","href",d).get(c+(i.href||""));if(b){for(var j=0;j<b.length;j++)if(f=b[j],f.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&f.getAttribute("rel")===(i.rel==null?null:i.rel)&&f.getAttribute("title")===(i.title==null?null:i.title)&&f.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){b.splice(j,1);break t}}f=d.createElement(c),qt(f,c,i),d.head.appendChild(f);break;case"meta":if(b=cg("meta","content",d).get(c+(i.content||""))){for(j=0;j<b.length;j++)if(f=b[j],f.getAttribute("content")===(i.content==null?null:""+i.content)&&f.getAttribute("name")===(i.name==null?null:i.name)&&f.getAttribute("property")===(i.property==null?null:i.property)&&f.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&f.getAttribute("charset")===(i.charSet==null?null:i.charSet)){b.splice(j,1);break t}}f=d.createElement(c),qt(f,c,i),d.head.appendChild(f);break;default:throw Error(n(468,c))}f[Bt]=e,Ot(f),c=f}e.stateNode=c}else ug(d,e.type,e.stateNode);else e.stateNode=og(d,c,e.memoizedProps);else f!==c?(f===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):f.count--,c===null?ug(d,e.type,e.stateNode):og(d,c,e.memoizedProps)):c===null&&e.stateNode!==null&&Fc(e,e.memoizedProps,i.memoizedProps)}break;case 27:ea(s,e),ta(e),c&512&&(yt||i===null||Oa(i,i.return)),i!==null&&c&4&&Fc(e,e.memoizedProps,i.memoizedProps);break;case 5:if(ea(s,e),ta(e),c&512&&(yt||i===null||Oa(i,i.return)),e.flags&32){d=e.stateNode;try{fr(d,"")}catch(K){at(e,e.return,K)}}c&4&&e.stateNode!=null&&(d=e.memoizedProps,Fc(e,d,i!==null?i.memoizedProps:d)),c&1024&&(Kc=!0);break;case 6:if(ea(s,e),ta(e),c&4){if(e.stateNode===null)throw Error(n(162));c=e.memoizedProps,i=e.stateNode;try{i.nodeValue=c}catch(K){at(e,e.return,K)}}break;case 3:if(Bl=null,d=ja,ja=$l(s.containerInfo),ea(s,e),ja=d,ta(e),c&4&&i!==null&&i.memoizedState.isDehydrated)try{ui(s.containerInfo)}catch(K){at(e,e.return,K)}Kc&&(Kc=!1,pm(e));break;case 4:c=ja,ja=$l(e.stateNode.containerInfo),ea(s,e),ta(e),ja=c;break;case 12:ea(s,e),ta(e);break;case 13:ea(s,e),ta(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(au=ze()),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Wc(e,c)));break;case 22:d=e.memoizedState!==null;var R=i!==null&&i.memoizedState!==null,V=Xa,ee=yt;if(Xa=V||d,yt=ee||R,ea(s,e),yt=ee,Xa=V,ta(e),c&8192)e:for(s=e.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(i===null||R||Xa||yt||Gs(e)),i=null,s=e;;){if(s.tag===5||s.tag===26){if(i===null){R=i=s;try{if(f=R.stateNode,d)b=f.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{j=R.stateNode;var ne=R.memoizedProps.style,Q=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;j.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(K){at(R,R.return,K)}}}else if(s.tag===6){if(i===null){R=s;try{R.stateNode.nodeValue=d?"":R.memoizedProps}catch(K){at(R,R.return,K)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===e)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;i===s&&(i=null),s=s.return}i===s&&(i=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=e.updateQueue,c!==null&&(i=c.retryQueue,i!==null&&(c.retryQueue=null,Wc(e,i))));break;case 19:ea(s,e),ta(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Wc(e,c)));break;case 30:break;case 21:break;default:ea(s,e),ta(e)}}function ta(e){var s=e.flags;if(s&2){try{for(var i,c=e.return;c!==null;){if(om(c)){i=c;break}c=c.return}if(i==null)throw Error(n(160));switch(i.tag){case 27:var d=i.stateNode,f=Qc(e);Nl(e,f,d);break;case 5:var b=i.stateNode;i.flags&32&&(fr(b,""),i.flags&=-33);var j=Qc(e);Nl(e,j,b);break;case 3:case 4:var R=i.stateNode.containerInfo,V=Qc(e);Gc(e,V,R);break;default:throw Error(n(161))}}catch(ee){at(e,e.return,ee)}e.flags&=-3}s&4096&&(e.flags&=-4097)}function pm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var s=e;pm(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),e=e.sibling}}function ms(e,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)dm(e,s.alternate,s),s=s.sibling}function Gs(e){for(e=e.child;e!==null;){var s=e;switch(s.tag){case 0:case 11:case 14:case 15:fs(4,s,s.return),Gs(s);break;case 1:Oa(s,s.return);var i=s.stateNode;typeof i.componentWillUnmount=="function"&&im(s,s.return,i),Gs(s);break;case 27:ai(s.stateNode);case 26:case 5:Oa(s,s.return),Gs(s);break;case 22:s.memoizedState===null&&Gs(s);break;case 30:Gs(s);break;default:Gs(s)}e=e.sibling}}function gs(e,s,i){for(i=i&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,d=e,f=s,b=f.flags;switch(f.tag){case 0:case 11:case 15:gs(d,f,i),Fn(4,f);break;case 1:if(gs(d,f,i),c=f,d=c.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(V){at(c,c.return,V)}if(c=f,d=c.updateQueue,d!==null){var j=c.stateNode;try{var R=d.shared.hiddenCallbacks;if(R!==null)for(d.shared.hiddenCallbacks=null,d=0;d<R.length;d++)Yh(R[d],j)}catch(V){at(c,c.return,V)}}i&&b&64&&nm(f),Qn(f,f.return);break;case 27:cm(f);case 26:case 5:gs(d,f,i),i&&c===null&&b&4&&lm(f),Qn(f,f.return);break;case 12:gs(d,f,i);break;case 13:gs(d,f,i),i&&b&4&&mm(d,f);break;case 22:f.memoizedState===null&&gs(d,f,i),Qn(f,f.return);break;case 30:break;default:gs(d,f,i)}s=s.sibling}}function Xc(e,s){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(e=s.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&kn(i))}function Jc(e,s){e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&kn(e))}function Aa(e,s,i,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)ym(e,s,i,c),s=s.sibling}function ym(e,s,i,c){var d=s.flags;switch(s.tag){case 0:case 11:case 15:Aa(e,s,i,c),d&2048&&Fn(9,s);break;case 1:Aa(e,s,i,c);break;case 3:Aa(e,s,i,c),d&2048&&(e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&kn(e)));break;case 12:if(d&2048){Aa(e,s,i,c),e=s.stateNode;try{var f=s.memoizedProps,b=f.id,j=f.onPostCommit;typeof j=="function"&&j(b,s.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(R){at(s,s.return,R)}}else Aa(e,s,i,c);break;case 13:Aa(e,s,i,c);break;case 23:break;case 22:f=s.stateNode,b=s.alternate,s.memoizedState!==null?f._visibility&2?Aa(e,s,i,c):Gn(e,s):f._visibility&2?Aa(e,s,i,c):(f._visibility|=2,kr(e,s,i,c,(s.subtreeFlags&10256)!==0)),d&2048&&Xc(b,s);break;case 24:Aa(e,s,i,c),d&2048&&Jc(s.alternate,s);break;default:Aa(e,s,i,c)}}function kr(e,s,i,c,d){for(d=d&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var f=e,b=s,j=i,R=c,V=b.flags;switch(b.tag){case 0:case 11:case 15:kr(f,b,j,R,d),Fn(8,b);break;case 23:break;case 22:var ee=b.stateNode;b.memoizedState!==null?ee._visibility&2?kr(f,b,j,R,d):Gn(f,b):(ee._visibility|=2,kr(f,b,j,R,d)),d&&V&2048&&Xc(b.alternate,b);break;case 24:kr(f,b,j,R,d),d&&V&2048&&Jc(b.alternate,b);break;default:kr(f,b,j,R,d)}s=s.sibling}}function Gn(e,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var i=e,c=s,d=c.flags;switch(c.tag){case 22:Gn(i,c),d&2048&&Xc(c.alternate,c);break;case 24:Gn(i,c),d&2048&&Jc(c.alternate,c);break;default:Gn(i,c)}s=s.sibling}}var Kn=8192;function Rr(e){if(e.subtreeFlags&Kn)for(e=e.child;e!==null;)vm(e),e=e.sibling}function vm(e){switch(e.tag){case 26:Rr(e),e.flags&Kn&&e.memoizedState!==null&&Dv(ja,e.memoizedState,e.memoizedProps);break;case 5:Rr(e);break;case 3:case 4:var s=ja;ja=$l(e.stateNode.containerInfo),Rr(e),ja=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=Kn,Kn=16777216,Rr(e),Kn=s):Rr(e));break;default:Rr(e)}}function bm(e){var s=e.alternate;if(s!==null&&(e=s.child,e!==null)){s.child=null;do s=e.sibling,e.sibling=null,e=s;while(e!==null)}}function Wn(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var i=0;i<s.length;i++){var c=s[i];kt=c,wm(c,e)}bm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)xm(e),e=e.sibling}function xm(e){switch(e.tag){case 0:case 11:case 15:Wn(e),e.flags&2048&&fs(9,e,e.return);break;case 3:Wn(e);break;case 12:Wn(e);break;case 22:var s=e.stateNode;e.memoizedState!==null&&s._visibility&2&&(e.return===null||e.return.tag!==13)?(s._visibility&=-3,Cl(e)):Wn(e);break;default:Wn(e)}}function Cl(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var i=0;i<s.length;i++){var c=s[i];kt=c,wm(c,e)}bm(e)}for(e=e.child;e!==null;){switch(s=e,s.tag){case 0:case 11:case 15:fs(8,s,s.return),Cl(s);break;case 22:i=s.stateNode,i._visibility&2&&(i._visibility&=-3,Cl(s));break;default:Cl(s)}e=e.sibling}}function wm(e,s){for(;kt!==null;){var i=kt;switch(i.tag){case 0:case 11:case 15:fs(8,i,s);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var c=i.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:kn(i.memoizedState.cache)}if(c=i.child,c!==null)c.return=i,kt=c;else e:for(i=e;kt!==null;){c=kt;var d=c.sibling,f=c.return;if(hm(c),c===i){kt=null;break e}if(d!==null){d.return=f,kt=d;break e}kt=f}}}var Vy={getCacheForType:function(e){var s=It(Ct),i=s.data.get(e);return i===void 0&&(i=e(),s.data.set(e,i)),i}},Fy=typeof WeakMap=="function"?WeakMap:Map,Ke=0,st=null,qe=null,Pe=0,We=0,aa=null,ps=!1,Mr=!1,Zc=!1,Za=0,ht=0,ys=0,Ks=0,eu=0,va=0,Ur=0,Xn=null,Gt=null,tu=!1,au=0,El=1/0,Tl=null,vs=null,Lt=0,bs=null,Lr=null,qr=0,su=0,ru=null,jm=null,Jn=0,nu=null;function sa(){if((Ke&2)!==0&&Pe!==0)return Pe&-Pe;if(k.T!==null){var e=_r;return e!==0?e:hu()}return qd()}function Sm(){va===0&&(va=(Pe&536870912)===0||Fe?Rd():536870912);var e=ya.current;return e!==null&&(e.flags|=32),va}function ra(e,s,i){(e===st&&(We===2||We===9)||e.cancelPendingCommit!==null)&&($r(e,0),xs(e,Pe,va,!1)),pn(e,i),((Ke&2)===0||e!==st)&&(e===st&&((Ke&2)===0&&(Ks|=i),ht===4&&xs(e,Pe,va,!1)),ka(e))}function _m(e,s,i){if((Ke&6)!==0)throw Error(n(327));var c=!i&&(s&124)===0&&(s&e.expiredLanes)===0||gn(e,s),d=c?Ky(e,s):ou(e,s,!0),f=c;do{if(d===0){Mr&&!c&&xs(e,s,0,!1);break}else{if(i=e.current.alternate,f&&!Qy(i)){d=ou(e,s,!1),f=!1;continue}if(d===2){if(f=s,e.errorRecoveryDisabledLanes&f)var b=0;else b=e.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){s=b;e:{var j=e;d=Xn;var R=j.current.memoizedState.isDehydrated;if(R&&($r(j,b).flags|=256),b=ou(j,b,!1),b!==2){if(Zc&&!R){j.errorRecoveryDisabledLanes|=f,Ks|=f,d=4;break e}f=Gt,Gt=d,f!==null&&(Gt===null?Gt=f:Gt.push.apply(Gt,f))}d=b}if(f=!1,d!==2)continue}}if(d===1){$r(e,0),xs(e,s,0,!0);break}e:{switch(c=e,f=d,f){case 0:case 1:throw Error(n(345));case 4:if((s&4194048)!==s)break;case 6:xs(c,s,va,!ps);break e;case 2:Gt=null;break;case 3:case 5:break;default:throw Error(n(329))}if((s&62914560)===s&&(d=au+300-ze(),10<d)){if(xs(c,s,va,!ps),zi(c,0,!0)!==0)break e;c.timeoutHandle=Zm(Nm.bind(null,c,i,Gt,Tl,tu,s,va,Ks,Ur,ps,f,2,-0,0),d);break e}Nm(c,i,Gt,Tl,tu,s,va,Ks,Ur,ps,f,0,-0,0)}}break}while(!0);ka(e)}function Nm(e,s,i,c,d,f,b,j,R,V,ee,ne,Q,K){if(e.timeoutHandle=-1,ne=s.subtreeFlags,(ne&8192||(ne&16785408)===16785408)&&(ni={stylesheets:null,count:0,unsuspend:Tv},vm(s),ne=Ov(),ne!==null)){e.cancelPendingCommit=ne(km.bind(null,e,s,f,i,c,d,b,j,R,ee,1,Q,K)),xs(e,f,b,!V);return}km(e,s,f,i,c,d,b,j,R)}function Qy(e){for(var s=e;;){var i=s.tag;if((i===0||i===11||i===15)&&s.flags&16384&&(i=s.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var c=0;c<i.length;c++){var d=i[c],f=d.getSnapshot;d=d.value;try{if(!Jt(f(),d))return!1}catch(b){return!1}}if(i=s.child,s.subtreeFlags&16384&&i!==null)i.return=s,s=i;else{if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function xs(e,s,i,c){s&=~eu,s&=~Ks,e.suspendedLanes|=s,e.pingedLanes&=~s,c&&(e.warmLanes|=s),c=e.expirationTimes;for(var d=s;0<d;){var f=31-wt(d),b=1<<f;c[f]=-1,d&=~b}i!==0&&Ud(e,i,s)}function Dl(){return(Ke&6)===0?(Zn(0),!1):!0}function iu(){if(qe!==null){if(We===0)var e=qe.return;else e=qe,Va=Hs=null,Sc(e),Or=null,Hn=0,e=qe;for(;e!==null;)rm(e.alternate,e),e=e.return;qe=null}}function $r(e,s){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,dv(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),iu(),st=e,qe=i=Pa(e.current,null),Pe=s,We=0,aa=null,ps=!1,Mr=gn(e,s),Zc=!1,Ur=va=eu=Ks=ys=ht=0,Gt=Xn=null,tu=!1,(s&8)!==0&&(s|=s&32);var c=e.entangledLanes;if(c!==0)for(e=e.entanglements,c&=s;0<c;){var d=31-wt(c),f=1<<d;s|=e[d],c&=~f}return Za=s,Xi(),i}function Cm(e,s){Me=null,k.H=pl,s===Mn||s===il?(s=Ph(),We=3):s===zh?(s=Ph(),We=4):We=s===Yf?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,aa=s,qe===null&&(ht=1,wl(e,fa(s,e.current)))}function Em(){var e=k.H;return k.H=pl,e===null?pl:e}function Tm(){var e=k.A;return k.A=Vy,e}function lu(){ht=4,ps||(Pe&4194048)!==Pe&&ya.current!==null||(Mr=!0),(ys&134217727)===0&&(Ks&134217727)===0||st===null||xs(st,Pe,va,!1)}function ou(e,s,i){var c=Ke;Ke|=2;var d=Em(),f=Tm();(st!==e||Pe!==s)&&(Tl=null,$r(e,s)),s=!1;var b=ht;e:do try{if(We!==0&&qe!==null){var j=qe,R=aa;switch(We){case 8:iu(),b=6;break e;case 3:case 2:case 9:case 6:ya.current===null&&(s=!0);var V=We;if(We=0,aa=null,zr(e,j,R,V),i&&Mr){b=0;break e}break;default:V=We,We=0,aa=null,zr(e,j,R,V)}}Gy(),b=ht;break}catch(ee){Cm(e,ee)}while(!0);return s&&e.shellSuspendCounter++,Va=Hs=null,Ke=c,k.H=d,k.A=f,qe===null&&(st=null,Pe=0,Xi()),b}function Gy(){for(;qe!==null;)Dm(qe)}function Ky(e,s){var i=Ke;Ke|=2;var c=Em(),d=Tm();st!==e||Pe!==s?(Tl=null,El=ze()+500,$r(e,s)):Mr=gn(e,s);e:do try{if(We!==0&&qe!==null){s=qe;var f=aa;t:switch(We){case 1:We=0,aa=null,zr(e,s,f,1);break;case 2:case 9:if(Bh(f)){We=0,aa=null,Om(s);break}s=function(){We!==2&&We!==9||st!==e||(We=7),ka(e)},f.then(s,s);break e;case 3:We=7;break e;case 4:We=5;break e;case 7:Bh(f)?(We=0,aa=null,Om(s)):(We=0,aa=null,zr(e,s,f,7));break;case 5:var b=null;switch(qe.tag){case 26:b=qe.memoizedState;case 5:case 27:var j=qe;if(!b||dg(b)){We=0,aa=null;var R=j.sibling;if(R!==null)qe=R;else{var V=j.return;V!==null?(qe=V,Ol(V)):qe=null}break t}}We=0,aa=null,zr(e,s,f,5);break;case 6:We=0,aa=null,zr(e,s,f,6);break;case 8:iu(),ht=6;break e;default:throw Error(n(462))}}Wy();break}catch(ee){Cm(e,ee)}while(!0);return Va=Hs=null,k.H=c,k.A=d,Ke=i,qe!==null?0:(st=null,Pe=0,Xi(),ht)}function Wy(){for(;qe!==null&&!Ae();)Dm(qe)}function Dm(e){var s=am(e.alternate,e,Za);e.memoizedProps=e.pendingProps,s===null?Ol(e):qe=s}function Om(e){var s=e,i=s.alternate;switch(s.tag){case 15:case 0:s=Wf(i,s,s.pendingProps,s.type,void 0,Pe);break;case 11:s=Wf(i,s,s.pendingProps,s.type.render,s.ref,Pe);break;case 5:Sc(s);default:rm(i,s),s=qe=Oh(s,Za),s=am(i,s,Za)}e.memoizedProps=e.pendingProps,s===null?Ol(e):qe=s}function zr(e,s,i,c){Va=Hs=null,Sc(s),Or=null,Hn=0;var d=s.return;try{if(zy(e,d,s,i,Pe)){ht=1,wl(e,fa(i,e.current)),qe=null;return}}catch(f){if(d!==null)throw qe=d,f;ht=1,wl(e,fa(i,e.current)),qe=null;return}s.flags&32768?(Fe||c===1?e=!0:Mr||(Pe&536870912)!==0?e=!1:(ps=e=!0,(c===2||c===9||c===3||c===6)&&(c=ya.current,c!==null&&c.tag===13&&(c.flags|=16384))),Am(s,e)):Ol(s)}function Ol(e){var s=e;do{if((s.flags&32768)!==0){Am(s,ps);return}e=s.return;var i=Iy(s.alternate,s,Za);if(i!==null){qe=i;return}if(s=s.sibling,s!==null){qe=s;return}qe=s=e}while(s!==null);ht===0&&(ht=5)}function Am(e,s){do{var i=Py(e.alternate,e);if(i!==null){i.flags&=32767,qe=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!s&&(e=e.sibling,e!==null)){qe=e;return}qe=e=i}while(e!==null);ht=6,qe=null}function km(e,s,i,c,d,f,b,j,R){e.cancelPendingCommit=null;do Al();while(Lt!==0);if((Ke&6)!==0)throw Error(n(327));if(s!==null){if(s===e.current)throw Error(n(177));if(f=s.lanes|s.childLanes,f|=Jo,T0(e,i,f,b,j,R),e===st&&(qe=st=null,Pe=0),Lr=s,bs=e,qr=i,su=f,ru=d,jm=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,ev(ye,function(){return qm(),null})):(e.callbackNode=null,e.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=k.T,k.T=null,d=M.p,M.p=2,b=Ke,Ke|=4;try{Hy(e,s,i)}finally{Ke=b,M.p=d,k.T=c}}Lt=1,Rm(),Mm(),Um()}}function Rm(){if(Lt===1){Lt=0;var e=bs,s=Lr,i=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||i){i=k.T,k.T=null;var c=M.p;M.p=2;var d=Ke;Ke|=4;try{gm(s,e);var f=xu,b=xh(e.containerInfo),j=f.focusedElem,R=f.selectionRange;if(b!==j&&j&&j.ownerDocument&&bh(j.ownerDocument.documentElement,j)){if(R!==null&&Qo(j)){var V=R.start,ee=R.end;if(ee===void 0&&(ee=V),"selectionStart"in j)j.selectionStart=V,j.selectionEnd=Math.min(ee,j.value.length);else{var ne=j.ownerDocument||document,Q=ne&&ne.defaultView||window;if(Q.getSelection){var K=Q.getSelection(),Oe=j.textContent.length,Ce=Math.min(R.start,Oe),tt=R.end===void 0?Ce:Math.min(R.end,Oe);!K.extend&&Ce>tt&&(b=tt,tt=Ce,Ce=b);var B=vh(j,Ce),q=vh(j,tt);if(B&&q&&(K.rangeCount!==1||K.anchorNode!==B.node||K.anchorOffset!==B.offset||K.focusNode!==q.node||K.focusOffset!==q.offset)){var H=ne.createRange();H.setStart(B.node,B.offset),K.removeAllRanges(),Ce>tt?(K.addRange(H),K.extend(q.node,q.offset)):(H.setEnd(q.node,q.offset),K.addRange(H))}}}}for(ne=[],K=j;K=K.parentNode;)K.nodeType===1&&ne.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<ne.length;j++){var se=ne[j];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}Hl=!!bu,xu=bu=null}finally{Ke=d,M.p=c,k.T=i}}e.current=s,Lt=2}}function Mm(){if(Lt===2){Lt=0;var e=bs,s=Lr,i=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||i){i=k.T,k.T=null;var c=M.p;M.p=2;var d=Ke;Ke|=4;try{dm(e,s.alternate,s)}finally{Ke=d,M.p=c,k.T=i}}Lt=3}}function Um(){if(Lt===4||Lt===3){Lt=0,Ne();var e=bs,s=Lr,i=qr,c=jm;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Lt=5:(Lt=0,Lr=bs=null,Lm(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(vs=null),Co(i),s=s.stateNode,Ge&&typeof Ge.onCommitFiberRoot=="function")try{Ge.onCommitFiberRoot(Ye,s,void 0,(s.current.flags&128)===128)}catch(R){}if(c!==null){s=k.T,d=M.p,M.p=2,k.T=null;try{for(var f=e.onRecoverableError,b=0;b<c.length;b++){var j=c[b];f(j.value,{componentStack:j.stack})}}finally{k.T=s,M.p=d}}(qr&3)!==0&&Al(),ka(e),d=e.pendingLanes,(i&4194090)!==0&&(d&42)!==0?e===nu?Jn++:(Jn=0,nu=e):Jn=0,Zn(0)}}function Lm(e,s){(e.pooledCacheLanes&=s)===0&&(s=e.pooledCache,s!=null&&(e.pooledCache=null,kn(s)))}function Al(e){return Rm(),Mm(),Um(),qm()}function qm(){if(Lt!==5)return!1;var e=bs,s=su;su=0;var i=Co(qr),c=k.T,d=M.p;try{M.p=32>i?32:i,k.T=null,i=ru,ru=null;var f=bs,b=qr;if(Lt=0,Lr=bs=null,qr=0,(Ke&6)!==0)throw Error(n(331));var j=Ke;if(Ke|=4,xm(f.current),ym(f,f.current,b,i),Ke=j,Zn(0,!1),Ge&&typeof Ge.onPostCommitFiberRoot=="function")try{Ge.onPostCommitFiberRoot(Ye,f)}catch(R){}return!0}finally{M.p=d,k.T=c,Lm(e,s)}}function $m(e,s,i){s=fa(i,s),s=qc(e.stateNode,s,2),e=cs(e,s,2),e!==null&&(pn(e,2),ka(e))}function at(e,s,i){if(e.tag===3)$m(e,e,i);else for(;s!==null;){if(s.tag===3){$m(s,e,i);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(vs===null||!vs.has(c))){e=fa(i,e),i=Pf(2),c=cs(s,i,2),c!==null&&(Hf(i,c,s,e),pn(c,2),ka(c));break}}s=s.return}}function cu(e,s,i){var c=e.pingCache;if(c===null){c=e.pingCache=new Fy;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(i)||(Zc=!0,d.add(i),e=Xy.bind(null,e,s,i),s.then(e,e))}function Xy(e,s,i){var c=e.pingCache;c!==null&&c.delete(s),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,st===e&&(Pe&i)===i&&(ht===4||ht===3&&(Pe&62914560)===Pe&&300>ze()-au?(Ke&2)===0&&$r(e,0):eu|=i,Ur===Pe&&(Ur=0)),ka(e)}function zm(e,s){s===0&&(s=Md()),e=xr(e,s),e!==null&&(pn(e,s),ka(e))}function Jy(e){var s=e.memoizedState,i=0;s!==null&&(i=s.retryLane),zm(e,i)}function Zy(e,s){var i=0;switch(e.tag){case 13:var c=e.stateNode,d=e.memoizedState;d!==null&&(i=d.retryLane);break;case 19:c=e.stateNode;break;case 22:c=e.stateNode._retryCache;break;default:throw Error(n(314))}c!==null&&c.delete(s),zm(e,i)}function ev(e,s){return Re(e,s)}var kl=null,Br=null,uu=!1,Rl=!1,du=!1,Ws=0;function ka(e){e!==Br&&e.next===null&&(Br===null?kl=Br=e:Br=Br.next=e),Rl=!0,uu||(uu=!0,av())}function Zn(e,s){if(!du&&Rl){du=!0;do for(var i=!1,c=kl;c!==null;){if(e!==0){var d=c.pendingLanes;if(d===0)var f=0;else{var b=c.suspendedLanes,j=c.pingedLanes;f=(1<<31-wt(42|e)+1)-1,f&=d&~(b&~j),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(i=!0,Hm(c,f))}else f=Pe,f=zi(c,c===st?f:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(f&3)===0||gn(c,f)||(i=!0,Hm(c,f));c=c.next}while(i);du=!1}}function tv(){Bm()}function Bm(){Rl=uu=!1;var e=0;Ws!==0&&(uv()&&(e=Ws),Ws=0);for(var s=ze(),i=null,c=kl;c!==null;){var d=c.next,f=Im(c,s);f===0?(c.next=null,i===null?kl=d:i.next=d,d===null&&(Br=i)):(i=c,(e!==0||(f&3)!==0)&&(Rl=!0)),c=d}Zn(e)}function Im(e,s){for(var i=e.suspendedLanes,c=e.pingedLanes,d=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var b=31-wt(f),j=1<<b,R=d[b];R===-1?((j&i)===0||(j&c)!==0)&&(d[b]=E0(j,s)):R<=s&&(e.expiredLanes|=j),f&=~j}if(s=st,i=Pe,i=zi(e,e===s?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c=e.callbackNode,i===0||e===s&&(We===2||We===9)||e.cancelPendingCommit!==null)return c!==null&&c!==null&&ve(c),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||gn(e,i)){if(s=i&-i,s===e.callbackPriority)return s;switch(c!==null&&ve(c),Co(i)){case 2:case 8:i=ce;break;case 32:i=ye;break;case 268435456:i=Ie;break;default:i=ye}return c=Pm.bind(null,e),i=Re(i,c),e.callbackPriority=s,e.callbackNode=i,s}return c!==null&&c!==null&&ve(c),e.callbackPriority=2,e.callbackNode=null,2}function Pm(e,s){if(Lt!==0&&Lt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Al()&&e.callbackNode!==i)return null;var c=Pe;return c=zi(e,e===st?c:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c===0?null:(_m(e,c,s),Im(e,ze()),e.callbackNode!=null&&e.callbackNode===i?Pm.bind(null,e):null)}function Hm(e,s){if(Al())return null;_m(e,s,!0)}function av(){hv(function(){(Ke&6)!==0?Re(Z,tv):Bm()})}function hu(){return Ws===0&&(Ws=Rd()),Ws}function Ym(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Yi(""+e)}function Vm(e,s){var i=s.ownerDocument.createElement("input");return i.name=s.name,i.value=s.value,e.id&&i.setAttribute("form",e.id),s.parentNode.insertBefore(i,s),e=new FormData(e),i.parentNode.removeChild(i),e}function sv(e,s,i,c,d){if(s==="submit"&&i&&i.stateNode===d){var f=Ym((d[Yt]||null).action),b=c.submitter;b&&(s=(s=b[Yt]||null)?Ym(s.formAction):b.getAttribute("formAction"),s!==null&&(f=s,b=null));var j=new Gi("action","action",null,c,d);e.push({event:j,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ws!==0){var R=b?Vm(d,b):new FormData(d);kc(i,{pending:!0,data:R,method:d.method,action:f},null,R)}}else typeof f=="function"&&(j.preventDefault(),R=b?Vm(d,b):new FormData(d),kc(i,{pending:!0,data:R,method:d.method,action:f},f,R))},currentTarget:d}]})}}for(var fu=0;fu<Xo.length;fu++){var mu=Xo[fu],rv=mu.toLowerCase(),nv=mu[0].toUpperCase()+mu.slice(1);wa(rv,"on"+nv)}wa(Sh,"onAnimationEnd"),wa(_h,"onAnimationIteration"),wa(Nh,"onAnimationStart"),wa("dblclick","onDoubleClick"),wa("focusin","onFocus"),wa("focusout","onBlur"),wa(jy,"onTransitionRun"),wa(Sy,"onTransitionStart"),wa(_y,"onTransitionCancel"),wa(Ch,"onTransitionEnd"),ur("onMouseEnter",["mouseout","mouseover"]),ur("onMouseLeave",["mouseout","mouseover"]),ur("onPointerEnter",["pointerout","pointerover"]),ur("onPointerLeave",["pointerout","pointerover"]),Ms("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ms("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ms("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ms("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ms("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ms("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ei="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ei));function Fm(e,s){s=(s&4)!==0;for(var i=0;i<e.length;i++){var c=e[i],d=c.event;c=c.listeners;e:{var f=void 0;if(s)for(var b=c.length-1;0<=b;b--){var j=c[b],R=j.instance,V=j.currentTarget;if(j=j.listener,R!==f&&d.isPropagationStopped())break e;f=j,d.currentTarget=V;try{f(d)}catch(ee){xl(ee)}d.currentTarget=null,f=R}else for(b=0;b<c.length;b++){if(j=c[b],R=j.instance,V=j.currentTarget,j=j.listener,R!==f&&d.isPropagationStopped())break e;f=j,d.currentTarget=V;try{f(d)}catch(ee){xl(ee)}d.currentTarget=null,f=R}}}}function $e(e,s){var i=s[Eo];i===void 0&&(i=s[Eo]=new Set);var c=e+"__bubble";i.has(c)||(Qm(s,e,2,!1),i.add(c))}function gu(e,s,i){var c=0;s&&(c|=4),Qm(i,e,c,s)}var Ml="_reactListening"+Math.random().toString(36).slice(2);function pu(e){if(!e[Ml]){e[Ml]=!0,zd.forEach(function(i){i!=="selectionchange"&&(iv.has(i)||gu(i,!1,e),gu(i,!0,e))});var s=e.nodeType===9?e:e.ownerDocument;s===null||s[Ml]||(s[Ml]=!0,gu("selectionchange",!1,s))}}function Qm(e,s,i,c){switch(yg(s)){case 2:var d=Rv;break;case 8:d=Mv;break;default:d=Ou}i=d.bind(null,s,i,e),d=void 0,!$o||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?e.addEventListener(s,i,{capture:!0,passive:d}):e.addEventListener(s,i,!0):d!==void 0?e.addEventListener(s,i,{passive:d}):e.addEventListener(s,i,!1)}function yu(e,s,i,c,d){var f=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var b=c.tag;if(b===3||b===4){var j=c.stateNode.containerInfo;if(j===d)break;if(b===4)for(b=c.return;b!==null;){var R=b.tag;if((R===3||R===4)&&b.stateNode.containerInfo===d)return;b=b.return}for(;j!==null;){if(b=lr(j),b===null)return;if(R=b.tag,R===5||R===6||R===26||R===27){c=f=b;continue e}j=j.parentNode}}c=c.return}Zd(function(){var V=f,ee=Lo(i),ne=[];e:{var Q=Eh.get(e);if(Q!==void 0){var K=Gi,Oe=e;switch(e){case"keypress":if(Fi(i)===0)break e;case"keydown":case"keyup":K=ey;break;case"focusin":Oe="focus",K=Po;break;case"focusout":Oe="blur",K=Po;break;case"beforeblur":case"afterblur":K=Po;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=ah;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=P0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=sy;break;case Sh:case _h:case Nh:K=V0;break;case Ch:K=ny;break;case"scroll":case"scrollend":K=B0;break;case"wheel":K=ly;break;case"copy":case"cut":case"paste":K=Q0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=rh;break;case"toggle":case"beforetoggle":K=cy}var Ce=(s&4)!==0,tt=!Ce&&(e==="scroll"||e==="scrollend"),B=Ce?Q!==null?Q+"Capture":null:Q;Ce=[];for(var q=V,H;q!==null;){var se=q;if(H=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||H===null||B===null||(se=bn(q,B),se!=null&&Ce.push(ti(q,se,H))),tt)break;q=q.return}0<Ce.length&&(Q=new K(Q,Oe,null,i,ee),ne.push({event:Q,listeners:Ce}))}}if((s&7)===0){e:{if(Q=e==="mouseover"||e==="pointerover",K=e==="mouseout"||e==="pointerout",Q&&i!==Uo&&(Oe=i.relatedTarget||i.fromElement)&&(lr(Oe)||Oe[ir]))break e;if((K||Q)&&(Q=ee.window===ee?ee:(Q=ee.ownerDocument)?Q.defaultView||Q.parentWindow:window,K?(Oe=i.relatedTarget||i.toElement,K=V,Oe=Oe?lr(Oe):null,Oe!==null&&(tt=u(Oe),Ce=Oe.tag,Oe!==tt||Ce!==5&&Ce!==27&&Ce!==6)&&(Oe=null)):(K=null,Oe=V),K!==Oe)){if(Ce=ah,se="onMouseLeave",B="onMouseEnter",q="mouse",(e==="pointerout"||e==="pointerover")&&(Ce=rh,se="onPointerLeave",B="onPointerEnter",q="pointer"),tt=K==null?Q:vn(K),H=Oe==null?Q:vn(Oe),Q=new Ce(se,q+"leave",K,i,ee),Q.target=tt,Q.relatedTarget=H,se=null,lr(ee)===V&&(Ce=new Ce(B,q+"enter",Oe,i,ee),Ce.target=H,Ce.relatedTarget=tt,se=Ce),tt=se,K&&Oe)t:{for(Ce=K,B=Oe,q=0,H=Ce;H;H=Ir(H))q++;for(H=0,se=B;se;se=Ir(se))H++;for(;0<q-H;)Ce=Ir(Ce),q--;for(;0<H-q;)B=Ir(B),H--;for(;q--;){if(Ce===B||B!==null&&Ce===B.alternate)break t;Ce=Ir(Ce),B=Ir(B)}Ce=null}else Ce=null;K!==null&&Gm(ne,Q,K,Ce,!1),Oe!==null&&tt!==null&&Gm(ne,tt,Oe,Ce,!0)}}e:{if(Q=V?vn(V):window,K=Q.nodeName&&Q.nodeName.toLowerCase(),K==="select"||K==="input"&&Q.type==="file")var xe=hh;else if(uh(Q))if(fh)xe=by;else{xe=yy;var Le=py}else K=Q.nodeName,!K||K.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?V&&Mo(V.elementType)&&(xe=hh):xe=vy;if(xe&&(xe=xe(e,V))){dh(ne,xe,i,ee);break e}Le&&Le(e,Q,V),e==="focusout"&&V&&Q.type==="number"&&V.memoizedProps.value!=null&&Ro(Q,"number",Q.value)}switch(Le=V?vn(V):window,e){case"focusin":(uh(Le)||Le.contentEditable==="true")&&(yr=Le,Go=V,En=null);break;case"focusout":En=Go=yr=null;break;case"mousedown":Ko=!0;break;case"contextmenu":case"mouseup":case"dragend":Ko=!1,wh(ne,i,ee);break;case"selectionchange":if(wy)break;case"keydown":case"keyup":wh(ne,i,ee)}var Se;if(Yo)e:{switch(e){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else pr?oh(e,i)&&(Ee="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(Ee="onCompositionStart");Ee&&(nh&&i.locale!=="ko"&&(pr||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&pr&&(Se=eh()):(ns=ee,zo="value"in ns?ns.value:ns.textContent,pr=!0)),Le=Ul(V,Ee),0<Le.length&&(Ee=new sh(Ee,e,null,i,ee),ne.push({event:Ee,listeners:Le}),Se?Ee.data=Se:(Se=ch(i),Se!==null&&(Ee.data=Se)))),(Se=dy?hy(e,i):fy(e,i))&&(Ee=Ul(V,"onBeforeInput"),0<Ee.length&&(Le=new sh("onBeforeInput","beforeinput",null,i,ee),ne.push({event:Le,listeners:Ee}),Le.data=Se)),sv(ne,e,V,i,ee)}Fm(ne,s)})}function ti(e,s,i){return{instance:e,listener:s,currentTarget:i}}function Ul(e,s){for(var i=s+"Capture",c=[];e!==null;){var d=e,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=bn(e,i),d!=null&&c.unshift(ti(e,d,f)),d=bn(e,s),d!=null&&c.push(ti(e,d,f))),e.tag===3)return c;e=e.return}return[]}function Ir(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Gm(e,s,i,c,d){for(var f=s._reactName,b=[];i!==null&&i!==c;){var j=i,R=j.alternate,V=j.stateNode;if(j=j.tag,R!==null&&R===c)break;j!==5&&j!==26&&j!==27||V===null||(R=V,d?(V=bn(i,f),V!=null&&b.unshift(ti(i,V,R))):d||(V=bn(i,f),V!=null&&b.push(ti(i,V,R)))),i=i.return}b.length!==0&&e.push({event:s,listeners:b})}var lv=/\r\n?/g,ov=/\u0000|\uFFFD/g;function Km(e){return(typeof e=="string"?e:""+e).replace(lv,`
`).replace(ov,"")}function Wm(e,s){return s=Km(s),Km(e)===s}function Ll(){}function et(e,s,i,c,d,f){switch(i){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||fr(e,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&fr(e,""+c);break;case"className":Ii(e,"class",c);break;case"tabIndex":Ii(e,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Ii(e,i,c);break;case"style":Xd(e,c,f);break;case"data":if(s!=="object"){Ii(e,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||i!=="href")){e.removeAttribute(i);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(i);break}c=Yi(""+c),e.setAttribute(i,c);break;case"action":case"formAction":if(typeof c=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(i==="formAction"?(s!=="input"&&et(e,s,"name",d.name,d,null),et(e,s,"formEncType",d.formEncType,d,null),et(e,s,"formMethod",d.formMethod,d,null),et(e,s,"formTarget",d.formTarget,d,null)):(et(e,s,"encType",d.encType,d,null),et(e,s,"method",d.method,d,null),et(e,s,"target",d.target,d,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(i);break}c=Yi(""+c),e.setAttribute(i,c);break;case"onClick":c!=null&&(e.onclick=Ll);break;case"onScroll":c!=null&&$e("scroll",e);break;case"onScrollEnd":c!=null&&$e("scrollend",e);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(n(61));if(i=c.__html,i!=null){if(d.children!=null)throw Error(n(60));e.innerHTML=i}}break;case"multiple":e.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":e.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){e.removeAttribute("xlink:href");break}i=Yi(""+c),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(i,""+c):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":c===!0?e.setAttribute(i,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(i,c):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?e.setAttribute(i,c):e.removeAttribute(i);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?e.removeAttribute(i):e.setAttribute(i,c);break;case"popover":$e("beforetoggle",e),$e("toggle",e),Bi(e,"popover",c);break;case"xlinkActuate":Ba(e,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Ba(e,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Ba(e,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Ba(e,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Ba(e,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Ba(e,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Ba(e,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Ba(e,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Ba(e,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Bi(e,"is",c);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=$0.get(i)||i,Bi(e,i,c))}}function vu(e,s,i,c,d,f){switch(i){case"style":Xd(e,c,f);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(n(61));if(i=c.__html,i!=null){if(d.children!=null)throw Error(n(60));e.innerHTML=i}}break;case"children":typeof c=="string"?fr(e,c):(typeof c=="number"||typeof c=="bigint")&&fr(e,""+c);break;case"onScroll":c!=null&&$e("scroll",e);break;case"onScrollEnd":c!=null&&$e("scrollend",e);break;case"onClick":c!=null&&(e.onclick=Ll);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Bd.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(d=i.endsWith("Capture"),s=i.slice(2,d?i.length-7:void 0),f=e[Yt]||null,f=f!=null?f[i]:null,typeof f=="function"&&e.removeEventListener(s,f,d),typeof c=="function")){typeof f!="function"&&f!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(s,c,d);break e}i in e?e[i]=c:c===!0?e.setAttribute(i,""):Bi(e,i,c)}}}function qt(e,s,i){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$e("error",e),$e("load",e);var c=!1,d=!1,f;for(f in i)if(i.hasOwnProperty(f)){var b=i[f];if(b!=null)switch(f){case"src":c=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:et(e,s,f,b,i,null)}}d&&et(e,s,"srcSet",i.srcSet,i,null),c&&et(e,s,"src",i.src,i,null);return;case"input":$e("invalid",e);var j=f=b=d=null,R=null,V=null;for(c in i)if(i.hasOwnProperty(c)){var ee=i[c];if(ee!=null)switch(c){case"name":d=ee;break;case"type":b=ee;break;case"checked":R=ee;break;case"defaultChecked":V=ee;break;case"value":f=ee;break;case"defaultValue":j=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(n(137,s));break;default:et(e,s,c,ee,i,null)}}Qd(e,f,j,R,V,b,d,!1),Pi(e);return;case"select":$e("invalid",e),c=b=f=null;for(d in i)if(i.hasOwnProperty(d)&&(j=i[d],j!=null))switch(d){case"value":f=j;break;case"defaultValue":b=j;break;case"multiple":c=j;default:et(e,s,d,j,i,null)}s=f,i=b,e.multiple=!!c,s!=null?hr(e,!!c,s,!1):i!=null&&hr(e,!!c,i,!0);return;case"textarea":$e("invalid",e),f=d=c=null;for(b in i)if(i.hasOwnProperty(b)&&(j=i[b],j!=null))switch(b){case"value":c=j;break;case"defaultValue":d=j;break;case"children":f=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(n(91));break;default:et(e,s,b,j,i,null)}Kd(e,c,d,f),Pi(e);return;case"option":for(R in i)i.hasOwnProperty(R)&&(c=i[R],c!=null)&&(R==="selected"?e.selected=c&&typeof c!="function"&&typeof c!="symbol":et(e,s,R,c,i,null));return;case"dialog":$e("beforetoggle",e),$e("toggle",e),$e("cancel",e),$e("close",e);break;case"iframe":case"object":$e("load",e);break;case"video":case"audio":for(c=0;c<ei.length;c++)$e(ei[c],e);break;case"image":$e("error",e),$e("load",e);break;case"details":$e("toggle",e);break;case"embed":case"source":case"link":$e("error",e),$e("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(V in i)if(i.hasOwnProperty(V)&&(c=i[V],c!=null))switch(V){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:et(e,s,V,c,i,null)}return;default:if(Mo(s)){for(ee in i)i.hasOwnProperty(ee)&&(c=i[ee],c!==void 0&&vu(e,s,ee,c,i,void 0));return}}for(j in i)i.hasOwnProperty(j)&&(c=i[j],c!=null&&et(e,s,j,c,i,null))}function cv(e,s,i,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,b=null,j=null,R=null,V=null,ee=null;for(K in i){var ne=i[K];if(i.hasOwnProperty(K)&&ne!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":R=ne;default:c.hasOwnProperty(K)||et(e,s,K,null,c,ne)}}for(var Q in c){var K=c[Q];if(ne=i[Q],c.hasOwnProperty(Q)&&(K!=null||ne!=null))switch(Q){case"type":f=K;break;case"name":d=K;break;case"checked":V=K;break;case"defaultChecked":ee=K;break;case"value":b=K;break;case"defaultValue":j=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(n(137,s));break;default:K!==ne&&et(e,s,Q,K,c,ne)}}ko(e,b,j,R,V,ee,f,d);return;case"select":K=b=j=Q=null;for(f in i)if(R=i[f],i.hasOwnProperty(f)&&R!=null)switch(f){case"value":break;case"multiple":K=R;default:c.hasOwnProperty(f)||et(e,s,f,null,c,R)}for(d in c)if(f=c[d],R=i[d],c.hasOwnProperty(d)&&(f!=null||R!=null))switch(d){case"value":Q=f;break;case"defaultValue":j=f;break;case"multiple":b=f;default:f!==R&&et(e,s,d,f,c,R)}s=j,i=b,c=K,Q!=null?hr(e,!!i,Q,!1):!!c!=!!i&&(s!=null?hr(e,!!i,s,!0):hr(e,!!i,i?[]:"",!1));return;case"textarea":K=Q=null;for(j in i)if(d=i[j],i.hasOwnProperty(j)&&d!=null&&!c.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:et(e,s,j,null,c,d)}for(b in c)if(d=c[b],f=i[b],c.hasOwnProperty(b)&&(d!=null||f!=null))switch(b){case"value":Q=d;break;case"defaultValue":K=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(n(91));break;default:d!==f&&et(e,s,b,d,c,f)}Gd(e,Q,K);return;case"option":for(var Oe in i)Q=i[Oe],i.hasOwnProperty(Oe)&&Q!=null&&!c.hasOwnProperty(Oe)&&(Oe==="selected"?e.selected=!1:et(e,s,Oe,null,c,Q));for(R in c)Q=c[R],K=i[R],c.hasOwnProperty(R)&&Q!==K&&(Q!=null||K!=null)&&(R==="selected"?e.selected=Q&&typeof Q!="function"&&typeof Q!="symbol":et(e,s,R,Q,c,K));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in i)Q=i[Ce],i.hasOwnProperty(Ce)&&Q!=null&&!c.hasOwnProperty(Ce)&&et(e,s,Ce,null,c,Q);for(V in c)if(Q=c[V],K=i[V],c.hasOwnProperty(V)&&Q!==K&&(Q!=null||K!=null))switch(V){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(n(137,s));break;default:et(e,s,V,Q,c,K)}return;default:if(Mo(s)){for(var tt in i)Q=i[tt],i.hasOwnProperty(tt)&&Q!==void 0&&!c.hasOwnProperty(tt)&&vu(e,s,tt,void 0,c,Q);for(ee in c)Q=c[ee],K=i[ee],!c.hasOwnProperty(ee)||Q===K||Q===void 0&&K===void 0||vu(e,s,ee,Q,c,K);return}}for(var B in i)Q=i[B],i.hasOwnProperty(B)&&Q!=null&&!c.hasOwnProperty(B)&&et(e,s,B,null,c,Q);for(ne in c)Q=c[ne],K=i[ne],!c.hasOwnProperty(ne)||Q===K||Q==null&&K==null||et(e,s,ne,Q,c,K)}var bu=null,xu=null;function ql(e){return e.nodeType===9?e:e.ownerDocument}function Xm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Jm(e,s){if(e===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&s==="foreignObject"?0:e}function wu(e,s){return e==="textarea"||e==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ju=null;function uv(){var e=window.event;return e&&e.type==="popstate"?e===ju?!1:(ju=e,!0):(ju=null,!1)}var Zm=typeof setTimeout=="function"?setTimeout:void 0,dv=typeof clearTimeout=="function"?clearTimeout:void 0,eg=typeof Promise=="function"?Promise:void 0,hv=typeof queueMicrotask=="function"?queueMicrotask:typeof eg!="undefined"?function(e){return eg.resolve(null).then(e).catch(fv)}:Zm;function fv(e){setTimeout(function(){throw e})}function ws(e){return e==="head"}function tg(e,s){var i=s,c=0,d=0;do{var f=i.nextSibling;if(e.removeChild(i),f&&f.nodeType===8)if(i=f.data,i==="/$"){if(0<c&&8>c){i=c;var b=e.ownerDocument;if(i&1&&ai(b.documentElement),i&2&&ai(b.body),i&4)for(i=b.head,ai(i),b=i.firstChild;b;){var j=b.nextSibling,R=b.nodeName;b[yn]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&b.rel.toLowerCase()==="stylesheet"||i.removeChild(b),b=j}}if(d===0){e.removeChild(f),ui(s);return}d--}else i==="$"||i==="$?"||i==="$!"?d++:c=i.charCodeAt(0)-48;else c=0;i=f}while(i);ui(s)}function Su(e){var s=e.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var i=s;switch(s=s.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Su(i),To(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function mv(e,s,i,c){for(;e.nodeType===1;){var d=i;if(e.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(c){if(!e[yn])switch(s){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(s==="input"&&e.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=Sa(e.nextSibling),e===null)break}return null}function gv(e,s,i){if(s==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=Sa(e.nextSibling),e===null))return null;return e}function _u(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function pv(e,s){var i=e.ownerDocument;if(e.data!=="$?"||i.readyState==="complete")s();else{var c=function(){s(),i.removeEventListener("DOMContentLoaded",c)};i.addEventListener("DOMContentLoaded",c),e._reactRetry=c}}function Sa(e){for(;e!=null;e=e.nextSibling){var s=e.nodeType;if(s===1||s===3)break;if(s===8){if(s=e.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return e}var Nu=null;function ag(e){e=e.previousSibling;for(var s=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(s===0)return e;s--}else i==="/$"&&s++}e=e.previousSibling}return null}function sg(e,s,i){switch(s=ql(i),e){case"html":if(e=s.documentElement,!e)throw Error(n(452));return e;case"head":if(e=s.head,!e)throw Error(n(453));return e;case"body":if(e=s.body,!e)throw Error(n(454));return e;default:throw Error(n(451))}}function ai(e){for(var s=e.attributes;s.length;)e.removeAttributeNode(s[0]);To(e)}var ba=new Map,rg=new Set;function $l(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var es=M.d;M.d={f:yv,r:vv,D:bv,C:xv,L:wv,m:jv,X:_v,S:Sv,M:Nv};function yv(){var e=es.f(),s=Dl();return e||s}function vv(e){var s=or(e);s!==null&&s.tag===5&&s.type==="form"?_f(s):es.r(e)}var Pr=typeof document=="undefined"?null:document;function ng(e,s,i){var c=Pr;if(c&&typeof s=="string"&&s){var d=ha(s);d='link[rel="'+e+'"][href="'+d+'"]',typeof i=="string"&&(d+='[crossorigin="'+i+'"]'),rg.has(d)||(rg.add(d),e={rel:e,crossOrigin:i,href:s},c.querySelector(d)===null&&(s=c.createElement("link"),qt(s,"link",e),Ot(s),c.head.appendChild(s)))}}function bv(e){es.D(e),ng("dns-prefetch",e,null)}function xv(e,s){es.C(e,s),ng("preconnect",e,s)}function wv(e,s,i){es.L(e,s,i);var c=Pr;if(c&&e&&s){var d='link[rel="preload"][as="'+ha(s)+'"]';s==="image"&&i&&i.imageSrcSet?(d+='[imagesrcset="'+ha(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(d+='[imagesizes="'+ha(i.imageSizes)+'"]')):d+='[href="'+ha(e)+'"]';var f=d;switch(s){case"style":f=Hr(e);break;case"script":f=Yr(e)}ba.has(f)||(e=y({rel:"preload",href:s==="image"&&i&&i.imageSrcSet?void 0:e,as:s},i),ba.set(f,e),c.querySelector(d)!==null||s==="style"&&c.querySelector(si(f))||s==="script"&&c.querySelector(ri(f))||(s=c.createElement("link"),qt(s,"link",e),Ot(s),c.head.appendChild(s)))}}function jv(e,s){es.m(e,s);var i=Pr;if(i&&e){var c=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+ha(c)+'"][href="'+ha(e)+'"]',f=d;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Yr(e)}if(!ba.has(f)&&(e=y({rel:"modulepreload",href:e},s),ba.set(f,e),i.querySelector(d)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(ri(f)))return}c=i.createElement("link"),qt(c,"link",e),Ot(c),i.head.appendChild(c)}}}function Sv(e,s,i){es.S(e,s,i);var c=Pr;if(c&&e){var d=cr(c).hoistableStyles,f=Hr(e);s=s||"default";var b=d.get(f);if(!b){var j={loading:0,preload:null};if(b=c.querySelector(si(f)))j.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":s},i),(i=ba.get(f))&&Cu(e,i);var R=b=c.createElement("link");Ot(R),qt(R,"link",e),R._p=new Promise(function(V,ee){R.onload=V,R.onerror=ee}),R.addEventListener("load",function(){j.loading|=1}),R.addEventListener("error",function(){j.loading|=2}),j.loading|=4,zl(b,s,c)}b={type:"stylesheet",instance:b,count:1,state:j},d.set(f,b)}}}function _v(e,s){es.X(e,s);var i=Pr;if(i&&e){var c=cr(i).hoistableScripts,d=Yr(e),f=c.get(d);f||(f=i.querySelector(ri(d)),f||(e=y({src:e,async:!0},s),(s=ba.get(d))&&Eu(e,s),f=i.createElement("script"),Ot(f),qt(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},c.set(d,f))}}function Nv(e,s){es.M(e,s);var i=Pr;if(i&&e){var c=cr(i).hoistableScripts,d=Yr(e),f=c.get(d);f||(f=i.querySelector(ri(d)),f||(e=y({src:e,async:!0,type:"module"},s),(s=ba.get(d))&&Eu(e,s),f=i.createElement("script"),Ot(f),qt(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},c.set(d,f))}}function ig(e,s,i,c){var d=(d=re.current)?$l(d):null;if(!d)throw Error(n(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(s=Hr(i.href),i=cr(d).hoistableStyles,c=i.get(s),c||(c={type:"style",instance:null,count:0,state:null},i.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=Hr(i.href);var f=cr(d).hoistableStyles,b=f.get(e);if(b||(d=d.ownerDocument||d,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,b),(f=d.querySelector(si(e)))&&!f._p&&(b.instance=f,b.state.loading=5),ba.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},ba.set(e,i),f||Cv(d,e,i,b.state))),s&&c===null)throw Error(n(528,""));return b}if(s&&c!==null)throw Error(n(529,""));return null;case"script":return s=i.async,i=i.src,typeof i=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Yr(i),i=cr(d).hoistableScripts,c=i.get(s),c||(c={type:"script",instance:null,count:0,state:null},i.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,e))}}function Hr(e){return'href="'+ha(e)+'"'}function si(e){return'link[rel="stylesheet"]['+e+"]"}function lg(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function Cv(e,s,i,c){e.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=e.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),qt(s,"link",i),Ot(s),e.head.appendChild(s))}function Yr(e){return'[src="'+ha(e)+'"]'}function ri(e){return"script[async]"+e}function og(e,s,i){if(s.count++,s.instance===null)switch(s.type){case"style":var c=e.querySelector('style[data-href~="'+ha(i.href)+'"]');if(c)return s.instance=c,Ot(c),c;var d=y({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return c=(e.ownerDocument||e).createElement("style"),Ot(c),qt(c,"style",d),zl(c,i.precedence,e),s.instance=c;case"stylesheet":d=Hr(i.href);var f=e.querySelector(si(d));if(f)return s.state.loading|=4,s.instance=f,Ot(f),f;c=lg(i),(d=ba.get(d))&&Cu(c,d),f=(e.ownerDocument||e).createElement("link"),Ot(f);var b=f;return b._p=new Promise(function(j,R){b.onload=j,b.onerror=R}),qt(f,"link",c),s.state.loading|=4,zl(f,i.precedence,e),s.instance=f;case"script":return f=Yr(i.src),(d=e.querySelector(ri(f)))?(s.instance=d,Ot(d),d):(c=i,(d=ba.get(f))&&(c=y({},i),Eu(c,d)),e=e.ownerDocument||e,d=e.createElement("script"),Ot(d),qt(d,"link",c),e.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(n(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,zl(c,i.precedence,e));return s.instance}function zl(e,s,i){for(var c=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=c.length?c[c.length-1]:null,f=d,b=0;b<c.length;b++){var j=c[b];if(j.dataset.precedence===s)f=j;else if(f!==d)break}f?f.parentNode.insertBefore(e,f.nextSibling):(s=i.nodeType===9?i.head:i,s.insertBefore(e,s.firstChild))}function Cu(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.title==null&&(e.title=s.title)}function Eu(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.integrity==null&&(e.integrity=s.integrity)}var Bl=null;function cg(e,s,i){if(Bl===null){var c=new Map,d=Bl=new Map;d.set(i,c)}else d=Bl,c=d.get(i),c||(c=new Map,d.set(i,c));if(c.has(e))return c;for(c.set(e,null),i=i.getElementsByTagName(e),d=0;d<i.length;d++){var f=i[d];if(!(f[yn]||f[Bt]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var b=f.getAttribute(s)||"";b=e+b;var j=c.get(b);j?j.push(f):c.set(b,[f])}}return c}function ug(e,s,i){e=e.ownerDocument||e,e.head.insertBefore(i,s==="title"?e.querySelector("head > title"):null)}function Ev(e,s,i){if(i===1||s.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(e=s.disabled,typeof s.precedence=="string"&&e==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function dg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var ni=null;function Tv(){}function Dv(e,s,i){if(ni===null)throw Error(n(475));var c=ni;if(s.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var d=Hr(i.href),f=e.querySelector(si(d));if(f){e=f._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(c.count++,c=Il.bind(c),e.then(c,c)),s.state.loading|=4,s.instance=f,Ot(f);return}f=e.ownerDocument||e,i=lg(i),(d=ba.get(d))&&Cu(i,d),f=f.createElement("link"),Ot(f);var b=f;b._p=new Promise(function(j,R){b.onload=j,b.onerror=R}),qt(f,"link",i),s.instance=f}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(s,e),(e=s.state.preload)&&(s.state.loading&3)===0&&(c.count++,s=Il.bind(c),e.addEventListener("load",s),e.addEventListener("error",s))}}function Ov(){if(ni===null)throw Error(n(475));var e=ni;return e.stylesheets&&e.count===0&&Tu(e,e.stylesheets),0<e.count?function(s){var i=setTimeout(function(){if(e.stylesheets&&Tu(e,e.stylesheets),e.unsuspend){var c=e.unsuspend;e.unsuspend=null,c()}},6e4);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(i)}}:null}function Il(){if(this.count--,this.count===0){if(this.stylesheets)Tu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Pl=null;function Tu(e,s){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Pl=new Map,s.forEach(Av,e),Pl=null,Il.call(e))}function Av(e,s){if(!(s.state.loading&4)){var i=Pl.get(e);if(i)var c=i.get(null);else{i=new Map,Pl.set(e,i);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var b=d[f];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(i.set(b.dataset.precedence,b),c=b)}c&&i.set(null,c)}d=s.instance,b=d.getAttribute("data-precedence"),f=i.get(b)||c,f===c&&i.set(null,d),i.set(b,d),this.count++,c=Il.bind(this),d.addEventListener("load",c),d.addEventListener("error",c),f?f.parentNode.insertBefore(d,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),s.state.loading|=4}}var ii={$$typeof:P,Provider:null,Consumer:null,_currentValue:F,_currentValue2:F,_threadCount:0};function kv(e,s,i,c,d,f,b,j){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_o(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_o(0),this.hiddenUpdates=_o(null),this.identifierPrefix=c,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function hg(e,s,i,c,d,f,b,j,R,V,ee,ne){return e=new kv(e,s,i,b,j,R,V,ne),s=1,f===!0&&(s|=24),f=Zt(3,null,null,s),e.current=f,f.stateNode=e,s=cc(),s.refCount++,e.pooledCache=s,s.refCount++,f.memoizedState={element:c,isDehydrated:i,cache:s},fc(f),e}function fg(e){return e?(e=wr,e):wr}function mg(e,s,i,c,d,f){d=fg(d),c.context===null?c.context=d:c.pendingContext=d,c=os(s),c.payload={element:i},f=f===void 0?null:f,f!==null&&(c.callback=f),i=cs(e,c,s),i!==null&&(ra(i,e,s),Ln(i,e,s))}function gg(e,s){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<s?i:s}}function Du(e,s){gg(e,s),(e=e.alternate)&&gg(e,s)}function pg(e){if(e.tag===13){var s=xr(e,67108864);s!==null&&ra(s,e,67108864),Du(e,67108864)}}var Hl=!0;function Rv(e,s,i,c){var d=k.T;k.T=null;var f=M.p;try{M.p=2,Ou(e,s,i,c)}finally{M.p=f,k.T=d}}function Mv(e,s,i,c){var d=k.T;k.T=null;var f=M.p;try{M.p=8,Ou(e,s,i,c)}finally{M.p=f,k.T=d}}function Ou(e,s,i,c){if(Hl){var d=Au(c);if(d===null)yu(e,s,c,Yl,i),vg(e,c);else if(Lv(d,e,s,i,c))c.stopPropagation();else if(vg(e,c),s&4&&-1<Uv.indexOf(e)){for(;d!==null;){var f=or(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var b=Rs(f.pendingLanes);if(b!==0){var j=f;for(j.pendingLanes|=2,j.entangledLanes|=2;b;){var R=1<<31-wt(b);j.entanglements[1]|=R,b&=~R}ka(f),(Ke&6)===0&&(El=ze()+500,Zn(0))}}break;case 13:j=xr(f,2),j!==null&&ra(j,f,2),Dl(),Du(f,2)}if(f=Au(c),f===null&&yu(e,s,c,Yl,i),f===d)break;d=f}d!==null&&c.stopPropagation()}else yu(e,s,c,null,i)}}function Au(e){return e=Lo(e),ku(e)}var Yl=null;function ku(e){if(Yl=null,e=lr(e),e!==null){var s=u(e);if(s===null)e=null;else{var i=s.tag;if(i===13){if(e=h(s),e!==null)return e;e=null}else if(i===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null)}}return Yl=e,null}function yg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(L()){case Z:return 2;case ce:return 8;case ye:case Ue:return 32;case Ie:return 268435456;default:return 32}default:return 32}}var Ru=!1,js=null,Ss=null,_s=null,li=new Map,oi=new Map,Ns=[],Uv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vg(e,s){switch(e){case"focusin":case"focusout":js=null;break;case"dragenter":case"dragleave":Ss=null;break;case"mouseover":case"mouseout":_s=null;break;case"pointerover":case"pointerout":li.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":oi.delete(s.pointerId)}}function ci(e,s,i,c,d,f){return e===null||e.nativeEvent!==f?(e={blockedOn:s,domEventName:i,eventSystemFlags:c,nativeEvent:f,targetContainers:[d]},s!==null&&(s=or(s),s!==null&&pg(s)),e):(e.eventSystemFlags|=c,s=e.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),e)}function Lv(e,s,i,c,d){switch(s){case"focusin":return js=ci(js,e,s,i,c,d),!0;case"dragenter":return Ss=ci(Ss,e,s,i,c,d),!0;case"mouseover":return _s=ci(_s,e,s,i,c,d),!0;case"pointerover":var f=d.pointerId;return li.set(f,ci(li.get(f)||null,e,s,i,c,d)),!0;case"gotpointercapture":return f=d.pointerId,oi.set(f,ci(oi.get(f)||null,e,s,i,c,d)),!0}return!1}function bg(e){var s=lr(e.target);if(s!==null){var i=u(s);if(i!==null){if(s=i.tag,s===13){if(s=h(i),s!==null){e.blockedOn=s,D0(e.priority,function(){if(i.tag===13){var c=sa();c=No(c);var d=xr(i,c);d!==null&&ra(d,i,c),Du(i,c)}});return}}else if(s===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Vl(e){if(e.blockedOn!==null)return!1;for(var s=e.targetContainers;0<s.length;){var i=Au(e.nativeEvent);if(i===null){i=e.nativeEvent;var c=new i.constructor(i.type,i);Uo=c,i.target.dispatchEvent(c),Uo=null}else return s=or(i),s!==null&&pg(s),e.blockedOn=i,!1;s.shift()}return!0}function xg(e,s,i){Vl(e)&&i.delete(s)}function qv(){Ru=!1,js!==null&&Vl(js)&&(js=null),Ss!==null&&Vl(Ss)&&(Ss=null),_s!==null&&Vl(_s)&&(_s=null),li.forEach(xg),oi.forEach(xg)}function Fl(e,s){e.blockedOn===s&&(e.blockedOn=null,Ru||(Ru=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,qv)))}var Ql=null;function wg(e){Ql!==e&&(Ql=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Ql===e&&(Ql=null);for(var s=0;s<e.length;s+=3){var i=e[s],c=e[s+1],d=e[s+2];if(typeof c!="function"){if(ku(c||i)===null)continue;break}var f=or(i);f!==null&&(e.splice(s,3),s-=3,kc(f,{pending:!0,data:d,method:i.method,action:c},c,d))}}))}function ui(e){function s(R){return Fl(R,e)}js!==null&&Fl(js,e),Ss!==null&&Fl(Ss,e),_s!==null&&Fl(_s,e),li.forEach(s),oi.forEach(s);for(var i=0;i<Ns.length;i++){var c=Ns[i];c.blockedOn===e&&(c.blockedOn=null)}for(;0<Ns.length&&(i=Ns[0],i.blockedOn===null);)bg(i),i.blockedOn===null&&Ns.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(c=0;c<i.length;c+=3){var d=i[c],f=i[c+1],b=d[Yt]||null;if(typeof f=="function")b||wg(i);else if(b){var j=null;if(f&&f.hasAttribute("formAction")){if(d=f,b=f[Yt]||null)j=b.formAction;else if(ku(d)!==null)continue}else j=b.action;typeof j=="function"?i[c+1]=j:(i.splice(c,3),c-=3),wg(i)}}}function Mu(e){this._internalRoot=e}Gl.prototype.render=Mu.prototype.render=function(e){var s=this._internalRoot;if(s===null)throw Error(n(409));var i=s.current,c=sa();mg(i,c,e,s,null,null)},Gl.prototype.unmount=Mu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var s=e.containerInfo;mg(e.current,2,null,e,null,null),Dl(),s[ir]=null}};function Gl(e){this._internalRoot=e}Gl.prototype.unstable_scheduleHydration=function(e){if(e){var s=qd();e={blockedOn:null,target:e,priority:s};for(var i=0;i<Ns.length&&s!==0&&s<Ns[i].priority;i++);Ns.splice(i,0,e),i===0&&bg(e)}};var jg=t.version;if(jg!=="19.1.0")throw Error(n(527,jg,"19.1.0"));M.findDOMNode=function(e){var s=e._reactInternals;if(s===void 0)throw typeof e.render=="function"?Error(n(188)):(e=Object.keys(e).join(","),Error(n(268,e)));return e=m(s),e=e!==null?p(e):null,e=e===null?null:e.stateNode,e};var $v={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Kl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kl.isDisabled&&Kl.supportsFiber)try{Ye=Kl.inject($v),Ge=Kl}catch(e){}}return hi.createRoot=function(e,s){if(!o(e))throw Error(n(299));var i=!1,c="",d=$f,f=zf,b=Bf,j=null;return s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(f=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(j=s.unstable_transitionCallbacks)),s=hg(e,1,!1,null,null,i,c,d,f,b,j,null),e[ir]=s.current,pu(e),new Mu(s)},hi.hydrateRoot=function(e,s,i){if(!o(e))throw Error(n(299));var c=!1,d="",f=$f,b=zf,j=Bf,R=null,V=null;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(b=i.onCaughtError),i.onRecoverableError!==void 0&&(j=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(R=i.unstable_transitionCallbacks),i.formState!==void 0&&(V=i.formState)),s=hg(e,1,!0,s,i!=null?i:null,c,d,f,b,j,R,V),s.context=fg(null),i=s.current,c=sa(),c=No(c),d=os(c),d.callback=null,cs(i,d,c),i=c,s.current.lanes=i,pn(s,i),ka(s),e[ir]=s.current,pu(e),new Gl(s)},hi.version="19.1.0",hi}var Eg;function yb(){if(Eg)return Lu.exports;Eg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Lu.exports=pb(),Lu.exports}var vb=yb();const bb=bp(vb),xb="modulepreload",wb=function(r){return"/CC_Flow_summary_report/"+r},Tg={},jb=function(t,a,n){let o=Promise.resolve();if(a&&a.length>0){let m=function(p){return Promise.all(p.map(y=>Promise.resolve(y).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),g=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));o=m(a.map(p=>{if(p=wb(p),p in Tg)return;Tg[p]=!0;const y=p.endsWith(".css"),x=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${x}`))return;const v=document.createElement("link");if(v.rel=y?"stylesheet":xb,y||(v.as="script"),v.crossOrigin="",v.href=p,g&&v.setAttribute("nonce",g),document.head.appendChild(v),y)return new Promise((S,C)=>{v.addEventListener("load",S),v.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${p}`)))})}))}function u(h){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=h,window.dispatchEvent(g),!g.defaultPrevented)throw h}return o.then(h=>{for(const g of h||[])g.status==="rejected"&&u(g.reason);return t().catch(u)})};var Sb=function(){return null};class _b extends U.Component{constructor(a){super(a);ge(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});ge(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(a){return{hasError:!0,error:a,errorInfo:null}}componentDidCatch(a,n){console.error("ErrorBoundary caught an error:",a,n),this.setState({error:a,errorInfo:n}),this.props.onError&&this.props.onError(a,n)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:l.jsx("div",{className:"error-boundary",children:l.jsxs("div",{className:"error-container",children:[l.jsx("div",{className:"error-icon",children:""}),l.jsx("h2",{children:"Algo sali mal"}),l.jsx("p",{className:"error-message",children:"Ha ocurrido un error inesperado en la aplicacin."}),this.state.error&&l.jsxs("details",{className:"error-details",children:[l.jsx("summary",{children:"Detalles del error"}),l.jsxs("div",{className:"error-stack",children:[l.jsx("strong",{children:"Error:"})," ",this.state.error.message,this.state.errorInfo&&l.jsxs(l.Fragment,{children:[l.jsx("br",{}),l.jsx("strong",{children:"Stack:"}),l.jsx("pre",{children:this.state.errorInfo.componentStack})]})]})]}),l.jsxs("div",{className:"error-actions",children:[l.jsx("button",{onClick:this.handleRetry,className:"retry-btn",children:" Reintentar"}),l.jsx("button",{onClick:this.handleReload,className:"reload-btn",children:" Recargar Pgina"})]}),l.jsx("div",{className:"error-help",children:l.jsx("p",{children:"Si el problema persiste, contacta al equipo de desarrollo."})})]})}):this.props.children}}function yo(r,t){var a={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(a[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(r);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(r,n[o])&&(a[n[o]]=r[n[o]]);return a}function Nb(r,t,a,n){function o(u){return u instanceof a?u:new a(function(h){h(u)})}return new(a||(a=Promise))(function(u,h){function g(y){try{p(n.next(y))}catch(x){h(x)}}function m(y){try{p(n.throw(y))}catch(x){h(x)}}function p(y){y.done?u(y.value):o(y.value).then(g,m)}p((n=n.apply(r,t||[])).next())})}const Cb=r=>r?(...t)=>r(...t):(...t)=>fetch(...t);class bd extends Error{constructor(t,a="FunctionsError",n){super(t),this.name=a,this.context=n}}class Eb extends bd{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Dg extends bd{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Og extends bd{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var ed;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(ed||(ed={}));class Tb{constructor(t,{headers:a={},customFetch:n,region:o=ed.Any}={}){this.url=t,this.headers=a,this.region=o,this.fetch=Cb(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Nb(this,arguments,void 0,function*(a,n={}){var o;let u,h;try{const{headers:g,method:m,body:p,signal:y,timeout:x}=n;let v={},{region:S}=n;S||(S=this.region);const C=new URL(`${this.url}/${a}`);S&&S!=="any"&&(v["x-region"]=S,C.searchParams.set("forceFunctionRegion",S));let T;p&&(g&&!Object.prototype.hasOwnProperty.call(g,"Content-Type")||!g)?typeof Blob!="undefined"&&p instanceof Blob||p instanceof ArrayBuffer?(v["Content-Type"]="application/octet-stream",T=p):typeof p=="string"?(v["Content-Type"]="text/plain",T=p):typeof FormData!="undefined"&&p instanceof FormData?T=p:(v["Content-Type"]="application/json",T=JSON.stringify(p)):T=p;let A=y;x&&(h=new AbortController,u=setTimeout(()=>h.abort(),x),y?(A=h.signal,y.addEventListener("abort",()=>h.abort())):A=h.signal);const I=yield this.fetch(C.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},v),this.headers),g),body:T,signal:A}).catch(he=>{throw new Eb(he)}),G=I.headers.get("x-relay-error");if(G&&G==="true")throw new Dg(I);if(!I.ok)throw new Og(I);let P=((o=I.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),te;return P==="application/json"?te=yield I.json():P==="application/octet-stream"||P==="application/pdf"?te=yield I.blob():P==="text/event-stream"?te=I:P==="multipart/form-data"?te=yield I.formData():te=yield I.text(),{data:te,error:null,response:I}}catch(g){return{data:null,error:g,response:g instanceof Og||g instanceof Dg?g.context:void 0}}finally{u&&clearTimeout(u)}})}}var Db=class extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}},Ob=class{constructor(r){var t,a;this.shouldThrowOnError=!1,this.method=r.method,this.url=r.url,this.headers=new Headers(r.headers),this.schema=r.schema,this.body=r.body,this.shouldThrowOnError=(t=r.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=r.signal,this.isMaybeSingle=(a=r.isMaybeSingle)!==null&&a!==void 0?a:!1,r.fetch?this.fetch=r.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(r,t){return this.headers=new Headers(this.headers),this.headers.set(r,t),this}then(r,t){var a=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let o=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(u=>N(this,null,function*(){let h=null,g=null,m=null,p=u.status,y=u.statusText;if(u.ok){var x,v;if(a.method!=="HEAD"){var S;const I=yield u.text();I===""||(a.headers.get("Accept")==="text/csv"||a.headers.get("Accept")&&(!((S=a.headers.get("Accept"))===null||S===void 0)&&S.includes("application/vnd.pgrst.plan+text"))?g=I:g=JSON.parse(I))}const T=(x=a.headers.get("Prefer"))===null||x===void 0?void 0:x.match(/count=(exact|planned|estimated)/),A=(v=u.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");T&&A&&A.length>1&&(m=parseInt(A[1])),a.isMaybeSingle&&a.method==="GET"&&Array.isArray(g)&&(g.length>1?(h={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,m=null,p=406,y="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{var C;const T=yield u.text();try{h=JSON.parse(T),Array.isArray(h)&&u.status===404&&(g=[],h=null,p=200,y="OK")}catch(A){u.status===404&&T===""?(p=204,y="No Content"):h={message:T}}if(h&&a.isMaybeSingle&&(!(h==null||(C=h.details)===null||C===void 0)&&C.includes("0 rows"))&&(h=null,p=200,y="OK"),h&&a.shouldThrowOnError)throw new Db(h)}return{error:h,data:g,count:m,status:p,statusText:y}}));return this.shouldThrowOnError||(o=o.catch(u=>{var h;let g="";const m=u==null?void 0:u.cause;if(m){var p,y,x,v;const C=(p=m==null?void 0:m.message)!==null&&p!==void 0?p:"",T=(y=m==null?void 0:m.code)!==null&&y!==void 0?y:"";g=`${(x=u==null?void 0:u.name)!==null&&x!==void 0?x:"FetchError"}: ${u==null?void 0:u.message}`,g+=`

Caused by: ${(v=m==null?void 0:m.name)!==null&&v!==void 0?v:"Error"}: ${C}`,T&&(g+=` (${T})`),m!=null&&m.stack&&(g+=`
${m.stack}`)}else{var S;g=(S=u==null?void 0:u.stack)!==null&&S!==void 0?S:""}return{error:{message:`${(h=u==null?void 0:u.name)!==null&&h!==void 0?h:"FetchError"}: ${u==null?void 0:u.message}`,details:g,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(r,t)}returns(){return this}overrideTypes(){return this}},Ab=class extends Ob{select(r){let t=!1;const a=(r!=null?r:"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(r,{ascending:t=!0,nullsFirst:a,foreignTable:n,referencedTable:o=n}={}){const u=o?`${o}.order`:"order",h=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${h?`${h},`:""}${r}.${t?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:t,referencedTable:a=t}={}){const n=typeof a=="undefined"?"limit":`${a}.limit`;return this.url.searchParams.set(n,`${r}`),this}range(r,t,{foreignTable:a,referencedTable:n=a}={}){const o=typeof n=="undefined"?"offset":`${n}.offset`,u=typeof n=="undefined"?"limit":`${n}.limit`;return this.url.searchParams.set(o,`${r}`),this.url.searchParams.set(u,`${t-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:r=!1,verbose:t=!1,settings:a=!1,buffers:n=!1,wal:o=!1,format:u="text"}={}){var h;const g=[r?"analyze":null,t?"verbose":null,a?"settings":null,n?"buffers":null,o?"wal":null].filter(Boolean).join("|"),m=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${m}"; options=${g};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(r){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${r}`),this}};const Ag=new RegExp("[,()]");var Zr=class extends Ab{eq(r,t){return this.url.searchParams.append(r,`eq.${t}`),this}neq(r,t){return this.url.searchParams.append(r,`neq.${t}`),this}gt(r,t){return this.url.searchParams.append(r,`gt.${t}`),this}gte(r,t){return this.url.searchParams.append(r,`gte.${t}`),this}lt(r,t){return this.url.searchParams.append(r,`lt.${t}`),this}lte(r,t){return this.url.searchParams.append(r,`lte.${t}`),this}like(r,t){return this.url.searchParams.append(r,`like.${t}`),this}likeAllOf(r,t){return this.url.searchParams.append(r,`like(all).{${t.join(",")}}`),this}likeAnyOf(r,t){return this.url.searchParams.append(r,`like(any).{${t.join(",")}}`),this}ilike(r,t){return this.url.searchParams.append(r,`ilike.${t}`),this}ilikeAllOf(r,t){return this.url.searchParams.append(r,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(r,t){return this.url.searchParams.append(r,`ilike(any).{${t.join(",")}}`),this}regexMatch(r,t){return this.url.searchParams.append(r,`match.${t}`),this}regexIMatch(r,t){return this.url.searchParams.append(r,`imatch.${t}`),this}is(r,t){return this.url.searchParams.append(r,`is.${t}`),this}isDistinct(r,t){return this.url.searchParams.append(r,`isdistinct.${t}`),this}in(r,t){const a=Array.from(new Set(t)).map(n=>typeof n=="string"&&Ag.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(r,`in.(${a})`),this}notIn(r,t){const a=Array.from(new Set(t)).map(n=>typeof n=="string"&&Ag.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(r,`not.in.(${a})`),this}contains(r,t){return typeof t=="string"?this.url.searchParams.append(r,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(r,`cs.{${t.join(",")}}`):this.url.searchParams.append(r,`cs.${JSON.stringify(t)}`),this}containedBy(r,t){return typeof t=="string"?this.url.searchParams.append(r,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(r,`cd.{${t.join(",")}}`):this.url.searchParams.append(r,`cd.${JSON.stringify(t)}`),this}rangeGt(r,t){return this.url.searchParams.append(r,`sr.${t}`),this}rangeGte(r,t){return this.url.searchParams.append(r,`nxl.${t}`),this}rangeLt(r,t){return this.url.searchParams.append(r,`sl.${t}`),this}rangeLte(r,t){return this.url.searchParams.append(r,`nxr.${t}`),this}rangeAdjacent(r,t){return this.url.searchParams.append(r,`adj.${t}`),this}overlaps(r,t){return typeof t=="string"?this.url.searchParams.append(r,`ov.${t}`):this.url.searchParams.append(r,`ov.{${t.join(",")}}`),this}textSearch(r,t,{config:a,type:n}={}){let o="";n==="plain"?o="pl":n==="phrase"?o="ph":n==="websearch"&&(o="w");const u=a===void 0?"":`(${a})`;return this.url.searchParams.append(r,`${o}fts${u}.${t}`),this}match(r){return Object.entries(r).forEach(([t,a])=>{this.url.searchParams.append(t,`eq.${a}`)}),this}not(r,t,a){return this.url.searchParams.append(r,`not.${t}.${a}`),this}or(r,{foreignTable:t,referencedTable:a=t}={}){const n=a?`${a}.or`:"or";return this.url.searchParams.append(n,`(${r})`),this}filter(r,t,a){return this.url.searchParams.append(r,`${t}.${a}`),this}},kb=class{constructor(r,{headers:t={},schema:a,fetch:n}){this.url=r,this.headers=new Headers(t),this.schema=a,this.fetch=n}select(r,t){const{head:a=!1,count:n}=t!=null?t:{},o=a?"HEAD":"GET";let u=!1;const h=(r!=null?r:"*").split("").map(g=>/\s/.test(g)&&!u?"":(g==='"'&&(u=!u),g)).join("");return this.url.searchParams.set("select",h),n&&this.headers.append("Prefer",`count=${n}`),new Zr({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(r,{count:t,defaultToNull:a=!0}={}){var n;const o="POST";if(t&&this.headers.append("Prefer",`count=${t}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const u=r.reduce((h,g)=>h.concat(Object.keys(g)),[]);if(u.length>0){const h=[...new Set(u)].map(g=>`"${g}"`);this.url.searchParams.set("columns",h.join(","))}}return new Zr({method:o,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(r,{onConflict:t,ignoreDuplicates:a=!1,count:n,defaultToNull:o=!0}={}){var u;const h="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),n&&this.headers.append("Prefer",`count=${n}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const g=r.reduce((m,p)=>m.concat(Object.keys(p)),[]);if(g.length>0){const m=[...new Set(g)].map(p=>`"${p}"`);this.url.searchParams.set("columns",m.join(","))}}return new Zr({method:h,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(r,{count:t}={}){var a;const n="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new Zr({method:n,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:r}={}){var t;const a="DELETE";return r&&this.headers.append("Prefer",`count=${r}`),new Zr({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},Rb=class jp{constructor(t,{headers:a={},schema:n,fetch:o}={}){this.url=t,this.headers=new Headers(a),this.schemaName=n,this.fetch=o}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new kb(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new jp(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,a={},{head:n=!1,get:o=!1,count:u}={}){var h;let g;const m=new URL(`${this.url}/rpc/${t}`);let p;n||o?(g=n?"HEAD":"GET",Object.entries(a).filter(([x,v])=>v!==void 0).map(([x,v])=>[x,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([x,v])=>{m.searchParams.append(x,v)})):(g="POST",p=a);const y=new Headers(this.headers);return u&&y.set("Prefer",`count=${u}`),new Zr({method:g,url:m,headers:y,schema:this.schemaName,body:p,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}};class Mb{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket!="undefined")return{type:"native",constructor:WebSocket};if(typeof globalThis!="undefined"&&typeof globalThis.WebSocket!="undefined")return{type:"native",constructor:globalThis.WebSocket};if(typeof global!="undefined"&&typeof global.WebSocket!="undefined")return{type:"native",constructor:global.WebSocket};if(typeof globalThis!="undefined"&&typeof globalThis.WebSocketPair!="undefined"&&typeof globalThis.WebSocket=="undefined")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis!="undefined"&&globalThis.EdgeRuntime||typeof navigator!="undefined"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process!="undefined"){const a=process.versions;if(a&&a.node){const n=a.node,o=parseInt(n.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket!="undefined"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let a=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(a+=`

Suggested solution: ${t.workaround}`),new Error(a)}static createWebSocket(t,a){const n=this.getWebSocketConstructor();return new n(t,a)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch(t){return!1}}}const Ub="2.89.0",Lb=`realtime-js/${Ub}`,Sp="1.0.0",qb="2.0.0",kg=Sp,td=1e4,$b=1e3,zb=100;var Ts;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Ts||(Ts={}));var Tt;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(Tt||(Tt={}));var Ca;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(Ca||(Ca={}));var ad;(function(r){r.websocket="websocket"})(ad||(ad={}));var tr;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(tr||(tr={}));class Bb{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t!=null?t:[]}encode(t,a){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return a(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return a(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var a;return this._isArrayBuffer((a=t.payload)===null||a===void 0?void 0:a.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var a,n;const o=(n=(a=t.payload)===null||a===void 0?void 0:a.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(t){var a,n;const o=(n=(a=t.payload)===null||a===void 0?void 0:a.payload)!==null&&n!==void 0?n:{},h=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,h)}_encodeUserBroadcastPush(t,a,n){var o,u;const h=t.topic,g=(o=t.ref)!==null&&o!==void 0?o:"",m=(u=t.join_ref)!==null&&u!==void 0?u:"",p=t.payload.event,y=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},x=Object.keys(y).length===0?"":JSON.stringify(y);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`ref length ${g.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`topic length ${h.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(x.length>255)throw new Error(`metadata length ${x.length} exceeds maximum of 255`);const v=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+g.length+h.length+p.length+x.length,S=new ArrayBuffer(this.HEADER_LENGTH+v);let C=new DataView(S),T=0;C.setUint8(T++,this.KINDS.userBroadcastPush),C.setUint8(T++,m.length),C.setUint8(T++,g.length),C.setUint8(T++,h.length),C.setUint8(T++,p.length),C.setUint8(T++,x.length),C.setUint8(T++,a),Array.from(m,I=>C.setUint8(T++,I.charCodeAt(0))),Array.from(g,I=>C.setUint8(T++,I.charCodeAt(0))),Array.from(h,I=>C.setUint8(T++,I.charCodeAt(0))),Array.from(p,I=>C.setUint8(T++,I.charCodeAt(0))),Array.from(x,I=>C.setUint8(T++,I.charCodeAt(0)));var A=new Uint8Array(S.byteLength+n.byteLength);return A.set(new Uint8Array(S),0),A.set(new Uint8Array(n),S.byteLength),A.buffer}decode(t,a){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return a(n)}if(typeof t=="string"){const n=JSON.parse(t),[o,u,h,g,m]=n;return a({join_ref:o,ref:u,topic:h,event:g,payload:m})}return a({})}_binaryDecode(t){const a=new DataView(t),n=a.getUint8(0),o=new TextDecoder;if(n===this.KINDS.userBroadcast)return this._decodeUserBroadcast(t,a,o)}_decodeUserBroadcast(t,a,n){const o=a.getUint8(1),u=a.getUint8(2),h=a.getUint8(3),g=a.getUint8(4);let m=this.HEADER_LENGTH+4;const p=n.decode(t.slice(m,m+o));m=m+o;const y=n.decode(t.slice(m,m+u));m=m+u;const x=n.decode(t.slice(m,m+h));m=m+h;const v=t.slice(m,t.byteLength),S=g===this.JSON_ENCODING?JSON.parse(n.decode(v)):v,C={type:this.BROADCAST_EVENT,event:y,payload:S};return h>0&&(C.meta=JSON.parse(x)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:C}}_isArrayBuffer(t){var a;return t instanceof ArrayBuffer||((a=t==null?void 0:t.constructor)===null||a===void 0?void 0:a.name)==="ArrayBuffer"}_pick(t,a){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>a.includes(n)))}}class _p{constructor(t,a){this.callback=t,this.timerCalc=a,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=a}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var rt;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(rt||(rt={}));const Rg=(r,t,a={})=>{var n;const o=(n=a.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((u,h)=>(u[h]=Ib(h,r,t,o),u),{}):{}},Ib=(r,t,a,n)=>{const o=t.find(g=>g.name===r),u=o==null?void 0:o.type,h=a[r];return u&&!n.includes(u)?Np(u,h):sd(h)},Np=(r,t)=>{if(r.charAt(0)==="_"){const a=r.slice(1,r.length);return Vb(t,a)}switch(r){case rt.bool:return Pb(t);case rt.float4:case rt.float8:case rt.int2:case rt.int4:case rt.int8:case rt.numeric:case rt.oid:return Hb(t);case rt.json:case rt.jsonb:return Yb(t);case rt.timestamp:return Fb(t);case rt.abstime:case rt.date:case rt.daterange:case rt.int4range:case rt.int8range:case rt.money:case rt.reltime:case rt.text:case rt.time:case rt.timestamptz:case rt.timetz:case rt.tsrange:case rt.tstzrange:return sd(t);default:return sd(t)}},sd=r=>r,Pb=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},Hb=r=>{if(typeof r=="string"){const t=parseFloat(r);if(!Number.isNaN(t))return t}return r},Yb=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(t){return r}return r},Vb=(r,t)=>{if(typeof r!="string")return r;const a=r.length-1,n=r[a];if(r[0]==="{"&&n==="}"){let u;const h=r.slice(1,a);try{u=JSON.parse("["+h+"]")}catch(g){u=h?h.split(","):[]}return u.map(g=>Np(t,g))}return r},Fb=r=>typeof r=="string"?r.replace(" ","T"):r,Cp=r=>{const t=new URL(r);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class zu{constructor(t,a,n={},o=td){this.channel=t,this.event=a,this.payload=n,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,a){var n;return this._hasReceived(t)&&a((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:a}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,a){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:a})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:a}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(a))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Mg;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(Mg||(Mg={}));class bi{constructor(t,a){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(a==null?void 0:a.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},o=>{const{onJoin:u,onLeave:h,onSync:g}=this.caller;this.joinRef=this.channel._joinRef(),this.state=bi.syncState(this.state,o,u,h),this.pendingDiffs.forEach(m=>{this.state=bi.syncDiff(this.state,m,u,h)}),this.pendingDiffs=[],g()}),this.channel._on(n.diff,{},o=>{const{onJoin:u,onLeave:h,onSync:g}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=bi.syncDiff(this.state,o,u,h),g())}),this.onJoin((o,u,h)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:u,newPresences:h})}),this.onLeave((o,u,h)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:u,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,a,n,o){const u=this.cloneDeep(t),h=this.transformState(a),g={},m={};return this.map(u,(p,y)=>{h[p]||(m[p]=y)}),this.map(h,(p,y)=>{const x=u[p];if(x){const v=y.map(A=>A.presence_ref),S=x.map(A=>A.presence_ref),C=y.filter(A=>S.indexOf(A.presence_ref)<0),T=x.filter(A=>v.indexOf(A.presence_ref)<0);C.length>0&&(g[p]=C),T.length>0&&(m[p]=T)}else g[p]=y}),this.syncDiff(u,{joins:g,leaves:m},n,o)}static syncDiff(t,a,n,o){const{joins:u,leaves:h}={joins:this.transformState(a.joins),leaves:this.transformState(a.leaves)};return n||(n=()=>{}),o||(o=()=>{}),this.map(u,(g,m)=>{var p;const y=(p=t[g])!==null&&p!==void 0?p:[];if(t[g]=this.cloneDeep(m),y.length>0){const x=t[g].map(S=>S.presence_ref),v=y.filter(S=>x.indexOf(S.presence_ref)<0);t[g].unshift(...v)}n(g,y,m)}),this.map(h,(g,m)=>{let p=t[g];if(!p)return;const y=m.map(x=>x.presence_ref);p=p.filter(x=>y.indexOf(x.presence_ref)<0),t[g]=p,o(g,p,m),p.length===0&&delete t[g]}),t}static map(t,a){return Object.getOwnPropertyNames(t).map(n=>a(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((a,n)=>{const o=t[n];return"metas"in o?a[n]=o.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):a[n]=o,a},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ug;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(Ug||(Ug={}));var xi;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(xi||(xi={}));var ts;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(ts||(ts={}));class an{constructor(t,a={config:{}},n){var o,u;if(this.topic=t,this.params=a,this.socket=n,this.bindings={},this.state=Tt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},a.config),this.timeout=this.socket.timeout,this.joinPush=new zu(this,Ca.join,this.params,this.timeout),this.rejoinTimer=new _p(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Tt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Tt.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Tt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Tt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Tt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ca.reply,{},(h,g)=>{this._trigger(this._replyEventName(g),h)}),this.presence=new bi(this),this.broadcastEndpointURL=Cp(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((u=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||u===void 0)&&u.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,a=this.timeout){var n,o,u;if(this.socket.isConnected()||this.socket.connect(),this.state==Tt.closed){const{config:{broadcast:h,presence:g,private:m}}=this.params,p=(o=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(S=>S.filter))!==null&&o!==void 0?o:[],y=!!this.bindings[xi.PRESENCE]&&this.bindings[xi.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,x={},v={broadcast:h,presence:Object.assign(Object.assign({},g),{enabled:y}),postgres_changes:p,private:m};this.socket.accessTokenValue&&(x.access_token=this.socket.accessTokenValue),this._onError(S=>t==null?void 0:t(ts.CHANNEL_ERROR,S)),this._onClose(()=>t==null?void 0:t(ts.CLOSED)),this.updateJoinPayload(Object.assign({config:v},x)),this.joinedOnce=!0,this._rejoin(a),this.joinPush.receive("ok",C=>N(this,[C],function*({postgres_changes:S}){var T;if(this.socket._isManualToken()||this.socket.setAuth(),S===void 0){t==null||t(ts.SUBSCRIBED);return}else{const A=this.bindings.postgres_changes,I=(T=A==null?void 0:A.length)!==null&&T!==void 0?T:0,G=[];for(let P=0;P<I;P++){const te=A[P],{filter:{event:he,schema:X,table:le,filter:O}}=te,D=S&&S[P];if(D&&D.event===he&&an.isFilterValueEqual(D.schema,X)&&an.isFilterValueEqual(D.table,le)&&an.isFilterValueEqual(D.filter,O))G.push(Object.assign(Object.assign({},te),{id:D.id}));else{this.unsubscribe(),this.state=Tt.errored,t==null||t(ts.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=G,t&&t(ts.SUBSCRIBED);return}})).receive("error",S=>{this.state=Tt.errored,t==null||t(ts.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(S).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ts.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(n){return N(this,arguments,function*(t,a={}){return yield this.send({type:"presence",event:"track",payload:t},a.timeout||this.timeout)})}untrack(){return N(this,arguments,function*(t={}){return yield this.send({type:"presence",event:"untrack"},t)})}on(t,a,n){return this.state===Tt.joined&&t===xi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>N(this,null,function*(){return yield this.subscribe()}))),this._on(t,a,n)}httpSend(o,u){return N(this,arguments,function*(t,a,n={}){var h;if(a==null)return Promise.reject("Payload is required for httpSend()");const g={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(g.Authorization=`Bearer ${this.socket.accessTokenValue}`);const m={method:"POST",headers:g,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:a,private:this.private}]})},p=yield this._fetchWithTimeout(this.broadcastEndpointURL,m,(h=n.timeout)!==null&&h!==void 0?h:this.timeout);if(p.status===202)return{success:!0};let y=p.statusText;try{const x=yield p.json();y=x.error||x.message||y}catch(x){}return Promise.reject(new Error(y))})}send(n){return N(this,arguments,function*(t,a={}){var o,u;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:h,payload:g}=t,m={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(m.Authorization=`Bearer ${this.socket.accessTokenValue}`);const p={method:"POST",headers:m,body:JSON.stringify({messages:[{topic:this.subTopic,event:h,payload:g,private:this.private}]})};try{const y=yield this._fetchWithTimeout(this.broadcastEndpointURL,p,(o=a.timeout)!==null&&o!==void 0?o:this.timeout);return yield(u=y.body)===null||u===void 0?void 0:u.cancel(),y.ok?"ok":"error"}catch(y){return y.name==="AbortError"?"timed out":"error"}}else return new Promise(h=>{var g,m,p;const y=this._push(t.type,t,a.timeout||this.timeout);t.type==="broadcast"&&!(!((p=(m=(g=this.params)===null||g===void 0?void 0:g.config)===null||m===void 0?void 0:m.broadcast)===null||p===void 0)&&p.ack)&&h("ok"),y.receive("ok",()=>h("ok")),y.receive("error",()=>h("error")),y.receive("timeout",()=>h("timed out"))})})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Tt.leaving;const a=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ca.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(o=>{n=new zu(this,Ca.leave,{},t),n.receive("ok",()=>{a(),o("ok")}).receive("timeout",()=>{a(),o("timed out")}).receive("error",()=>{o("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Tt.closed,this.bindings={}}_fetchWithTimeout(t,a,n){return N(this,null,function*(){const o=new AbortController,u=setTimeout(()=>o.abort(),n),h=yield this.socket.fetch(t,Object.assign(Object.assign({},a),{signal:o.signal}));return clearTimeout(u),h})}_push(t,a,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new zu(this,t,a,n);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>zb){const a=this.pushBuffer.shift();a&&(a.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${a.event}`,a.payload))}}_onMessage(t,a,n){return a}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,a,n){var o,u;const h=t.toLocaleLowerCase(),{close:g,error:m,leave:p,join:y}=Ca;if(n&&[g,m,p,y].indexOf(h)>=0&&n!==this._joinRef())return;let v=this._onMessage(h,a,n);if(a&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(S=>{var C,T,A;return((C=S.filter)===null||C===void 0?void 0:C.event)==="*"||((A=(T=S.filter)===null||T===void 0?void 0:T.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===h}).map(S=>S.callback(v,n)):(u=this.bindings[h])===null||u===void 0||u.filter(S=>{var C,T,A,I,G,P;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in S){const te=S.id,he=(C=S.filter)===null||C===void 0?void 0:C.event;return te&&((T=a.ids)===null||T===void 0?void 0:T.includes(te))&&(he==="*"||(he==null?void 0:he.toLocaleLowerCase())===((A=a.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const te=(G=(I=S==null?void 0:S.filter)===null||I===void 0?void 0:I.event)===null||G===void 0?void 0:G.toLocaleLowerCase();return te==="*"||te===((P=a==null?void 0:a.event)===null||P===void 0?void 0:P.toLocaleLowerCase())}else return S.type.toLocaleLowerCase()===h}).map(S=>{if(typeof v=="object"&&"ids"in v){const C=v.data,{schema:T,table:A,commit_timestamp:I,type:G,errors:P}=C;v=Object.assign(Object.assign({},{schema:T,table:A,commit_timestamp:I,eventType:G,new:{},old:{},errors:P}),this._getPayloadRecords(C))}S.callback(v,n)})}_isClosed(){return this.state===Tt.closed}_isJoined(){return this.state===Tt.joined}_isJoining(){return this.state===Tt.joining}_isLeaving(){return this.state===Tt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,a,n){const o=t.toLocaleLowerCase(),u={type:o,filter:a,callback:n};return this.bindings[o]?this.bindings[o].push(u):this.bindings[o]=[u],this}_off(t,a){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(o=>{var u;return!(((u=o.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===n&&an.isEqual(o.filter,a))})),this}static isEqual(t,a){if(Object.keys(t).length!==Object.keys(a).length)return!1;for(const n in t)if(t[n]!==a[n])return!1;return!0}static isFilterValueEqual(t,a){const n=t!=null?t:void 0,o=a!=null?a:void 0;return n===o}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ca.close,{},t)}_onError(t){this._on(Ca.error,{},a=>t(a))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Tt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const a={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(a.new=Rg(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(a.old=Rg(t.columns,t.old_record)),a}}const Bu=()=>{},Wl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Qb=[1e3,2e3,5e3,1e4],Gb=1e4,Kb=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Wb{constructor(t,a){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=td,this.transport=null,this.heartbeatIntervalMs=Wl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Bu,this.ref=0,this.reconnectTimer=null,this.vsn=kg,this.logger=Bu,this.conn=null,this.sendBuffer=[],this.serializer=new Bb,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>o?(...u)=>o(...u):(...u)=>fetch(...u),!(!((n=a==null?void 0:a.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=a.params.apikey,this.endPoint=`${t}/${ad.websocket}`,this.httpEndpoint=Cp(t),this._initializeOptions(a),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(a==null?void 0:a.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Mb.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const a=t.message;throw a.includes("Node.js")?new Error(`${a}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${a}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,a){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,a!=null?a:""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}removeChannel(t){return N(this,null,function*(){const a=yield t.unsubscribe();return this.channels.length===0&&this.disconnect(),a})}removeAllChannels(){return N(this,null,function*(){const t=yield Promise.all(this.channels.map(a=>a.unsubscribe()));return this.channels=[],this.disconnect(),t})}log(t,a,n){this.logger(t,a,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ts.connecting:return tr.Connecting;case Ts.open:return tr.Open;case Ts.closing:return tr.Closing;default:return tr.Closed}}isConnected(){return this.connectionState()===tr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,a={config:{}}){const n=`realtime:${t}`,o=this.getChannels().find(u=>u.topic===n);if(o)return o;{const u=new an(`realtime:${t}`,a,this);return this.channels.push(u),u}}push(t){const{topic:a,event:n,payload:o,ref:u}=t,h=()=>{this.encode(t,g=>{var m;(m=this.conn)===null||m===void 0||m.send(g)})};this.log("push",`${a} ${n} (${u})`,o),this.isConnected()?h():this.sendBuffer.push(h)}setAuth(t=null){return N(this,null,function*(){this._authPromise=this._performAuth(t);try{yield this._authPromise}finally{this._authPromise=null}})}_isManualToken(){return this._manuallySetToken}sendHeartbeat(){return N(this,null,function*(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(a){this.log("error","error in heartbeat callback",a)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(a){this.log("error","error in heartbeat callback",a)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close($b,"heartbeat timeout"),setTimeout(()=>{var a;this.isConnected()||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout()},Wl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(a){this.log("error","error in heartbeat callback",a)}this._setAuthSafely("heartbeat")})}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let a=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));a&&(this.log("transport",`leaving duplicate topic "${t}"`),a.unsubscribe())}_remove(t){this.channels=this.channels.filter(a=>a.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,a=>{if(a.topic==="phoenix"&&a.event==="phx_reply")try{this.heartbeatCallback(a.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}a.ref&&a.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:o,payload:u,ref:h}=a,g=h?`(${h})`:"",m=u.status||"";this.log("receive",`${m} ${n} ${o} ${g}`.trim(),u),this.channels.filter(p=>p._isMember(n)).forEach(p=>p._trigger(o,u,h)),this._triggerStateCallbacks("message",a)})}_clearTimer(t){var a;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((a=this.reconnectTimer)===null||a===void 0||a.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Ts.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ts.open||this.conn.readyState===Ts.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(a=>{this.log("error","error waiting for auth on connect",a),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this._terminateWorker()},this.workerRef.onmessage=a=>{a.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var a;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ca.error))}_appendParams(t,a){if(Object.keys(a).length===0)return t;const n=t.match(/\?/)?"&":"?",o=new URLSearchParams(a);return`${t}${n}${o}`}_workerObjectUrl(t){let a;if(t)a=t;else{const n=new Blob([Kb],{type:"application/javascript"});a=URL.createObjectURL(n)}return a}_setConnectionState(t,a=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=a)}_performAuth(t=null){return N(this,null,function*(){let a,n=!1;if(t)a=t,n=!0;else if(this.accessToken)try{a=yield this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),a=this.accessTokenValue}else a=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=a&&(this.accessTokenValue=a,this.channels.forEach(o=>{const u={access_token:a,version:Lb};a&&o.updateJoinPayload(u),o.joinedOnce&&o._isJoined()&&o._push(Ca.access_token,{access_token:a})}))})}_waitForAuthIfNeeded(){return N(this,null,function*(){this._authPromise&&(yield this._authPromise)})}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(a=>{this.log("error",`Error setting auth in ${t}`,a)})}_triggerStateCallbacks(t,a){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(a)}catch(o){this.log("error",`error in ${t} callback`,o)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new _p(()=>N(this,null,function*(){setTimeout(()=>N(this,null,function*(){yield this._waitForAuthIfNeeded(),this.isConnected()||this.connect()}),Wl.RECONNECT_DELAY)}),this.reconnectAfterMs)}_initializeOptions(t){var a,n,o,u,h,g,m,p,y,x,v,S;switch(this.transport=(a=t==null?void 0:t.transport)!==null&&a!==void 0?a:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:td,this.heartbeatIntervalMs=(o=t==null?void 0:t.heartbeatIntervalMs)!==null&&o!==void 0?o:Wl.HEARTBEAT_INTERVAL,this.worker=(u=t==null?void 0:t.worker)!==null&&u!==void 0?u:!1,this.accessToken=(h=t==null?void 0:t.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(g=t==null?void 0:t.heartbeatCallback)!==null&&g!==void 0?g:Bu,this.vsn=(m=t==null?void 0:t.vsn)!==null&&m!==void 0?m:kg,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=t==null?void 0:t.reconnectAfterMs)!==null&&p!==void 0?p:(C=>Qb[C-1]||Gb),this.vsn){case Sp:this.encode=(y=t==null?void 0:t.encode)!==null&&y!==void 0?y:((C,T)=>T(JSON.stringify(C))),this.decode=(x=t==null?void 0:t.decode)!==null&&x!==void 0?x:((C,T)=>T(JSON.parse(C)));break;case qb:this.encode=(v=t==null?void 0:t.encode)!==null&&v!==void 0?v:this.serializer.encode.bind(this.serializer),this.decode=(S=t==null?void 0:t.decode)!==null&&S!==void 0?S:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window!="undefined"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Ni=class extends Error{constructor(r,t){var a;super(r),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((a=t.icebergType)==null?void 0:a.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Xb(r,t,a){const n=new URL(t,r);if(a)for(const[o,u]of Object.entries(a))u!==void 0&&n.searchParams.set(o,u);return n.toString()}function Jb(r){return N(this,null,function*(){return!r||r.type==="none"?{}:r.type==="bearer"?{Authorization:`Bearer ${r.token}`}:r.type==="header"?{[r.name]:r.value}:r.type==="custom"?yield r.getHeaders():{}})}function Zb(r){var a;const t=(a=r.fetchImpl)!=null?a:globalThis.fetch;return{request(p){return N(this,arguments,function*({method:o,path:u,query:h,body:g,headers:m}){var A;const y=Xb(r.baseUrl,u,h),x=yield Jb(r.auth),v=yield t(y,{method:o,headers:He(He(He({},g?{"Content-Type":"application/json"}:{}),x),m),body:g?JSON.stringify(g):void 0}),S=yield v.text(),C=(v.headers.get("content-type")||"").includes("application/json"),T=C&&S?JSON.parse(S):S;if(!v.ok){const I=C?T:void 0,G=I==null?void 0:I.error;throw new Ni((A=G==null?void 0:G.message)!=null?A:`Request failed with status ${v.status}`,{status:v.status,icebergType:G==null?void 0:G.type,icebergCode:G==null?void 0:G.code,details:I})}return{status:v.status,headers:v.headers,data:T}})}}}function Xl(r){return r.join("")}var ex=class{constructor(r,t=""){this.client=r,this.prefix=t}listNamespaces(r){return N(this,null,function*(){const t=r?{parent:Xl(r.namespace)}:void 0;return(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))})}createNamespace(r,t){return N(this,null,function*(){const a={namespace:r.namespace,properties:t==null?void 0:t.properties};return(yield this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:a})).data})}dropNamespace(r){return N(this,null,function*(){yield this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Xl(r.namespace)}`})})}loadNamespaceMetadata(r){return N(this,null,function*(){return{properties:(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Xl(r.namespace)}`})).data.properties}})}namespaceExists(r){return N(this,null,function*(){try{return yield this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Xl(r.namespace)}`}),!0}catch(t){if(t instanceof Ni&&t.status===404)return!1;throw t}})}createNamespaceIfNotExists(r,t){return N(this,null,function*(){try{return yield this.createNamespace(r,t)}catch(a){if(a instanceof Ni&&a.status===409)return;throw a}})}};function Vr(r){return r.join("")}var tx=class{constructor(r,t="",a){this.client=r,this.prefix=t,this.accessDelegation=a}listTables(r){return N(this,null,function*(){return(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Vr(r.namespace)}/tables`})).data.identifiers})}createTable(r,t){return N(this,null,function*(){const a={};return this.accessDelegation&&(a["X-Iceberg-Access-Delegation"]=this.accessDelegation),(yield this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Vr(r.namespace)}/tables`,body:t,headers:a})).data.metadata})}updateTable(r,t){return N(this,null,function*(){const a=yield this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Vr(r.namespace)}/tables/${r.name}`,body:t});return{"metadata-location":a.data["metadata-location"],metadata:a.data.metadata}})}dropTable(r,t){return N(this,null,function*(){var a;yield this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Vr(r.namespace)}/tables/${r.name}`,query:{purgeRequested:String((a=t==null?void 0:t.purge)!=null?a:!1)}})})}loadTable(r){return N(this,null,function*(){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Vr(r.namespace)}/tables/${r.name}`,headers:t})).data.metadata})}tableExists(r){return N(this,null,function*(){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return yield this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Vr(r.namespace)}/tables/${r.name}`,headers:t}),!0}catch(a){if(a instanceof Ni&&a.status===404)return!1;throw a}})}createTableIfNotExists(r,t){return N(this,null,function*(){try{return yield this.createTable(r,t)}catch(a){if(a instanceof Ni&&a.status===409)return yield this.loadTable({namespace:r.namespace,name:t.name});throw a}})}},ax=class{constructor(r){var n;let t="v1";r.catalogName&&(t+=`/${r.catalogName}`);const a=r.baseUrl.endsWith("/")?r.baseUrl:`${r.baseUrl}/`;this.client=Zb({baseUrl:a,auth:r.auth,fetchImpl:r.fetch}),this.accessDelegation=(n=r.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new ex(this.client,t),this.tableOps=new tx(this.client,t,this.accessDelegation)}listNamespaces(r){return N(this,null,function*(){return this.namespaceOps.listNamespaces(r)})}createNamespace(r,t){return N(this,null,function*(){return this.namespaceOps.createNamespace(r,t)})}dropNamespace(r){return N(this,null,function*(){yield this.namespaceOps.dropNamespace(r)})}loadNamespaceMetadata(r){return N(this,null,function*(){return this.namespaceOps.loadNamespaceMetadata(r)})}listTables(r){return N(this,null,function*(){return this.tableOps.listTables(r)})}createTable(r,t){return N(this,null,function*(){return this.tableOps.createTable(r,t)})}updateTable(r,t){return N(this,null,function*(){return this.tableOps.updateTable(r,t)})}dropTable(r,t){return N(this,null,function*(){yield this.tableOps.dropTable(r,t)})}loadTable(r){return N(this,null,function*(){return this.tableOps.loadTable(r)})}namespaceExists(r){return N(this,null,function*(){return this.namespaceOps.namespaceExists(r)})}tableExists(r){return N(this,null,function*(){return this.tableOps.tableExists(r)})}createNamespaceIfNotExists(r,t){return N(this,null,function*(){return this.namespaceOps.createNamespaceIfNotExists(r,t)})}createTableIfNotExists(r,t){return N(this,null,function*(){return this.tableOps.createTableIfNotExists(r,t)})}},vo=class extends Error{constructor(r){super(r),this.__isStorageError=!0,this.name="StorageError"}};function ot(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}var sx=class extends vo{constructor(r,t,a){super(r),this.name="StorageApiError",this.status=t,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},rd=class extends vo{constructor(r,t){super(r),this.name="StorageUnknownError",this.originalError=t}};const xd=r=>r?(...t)=>r(...t):(...t)=>fetch(...t),rx=()=>Response,nd=r=>{if(Array.isArray(r))return r.map(a=>nd(a));if(typeof r=="function"||r!==Object(r))return r;const t={};return Object.entries(r).forEach(([a,n])=>{const o=a.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));t[o]=nd(n)}),t},nx=r=>{if(typeof r!="object"||r===null)return!1;const t=Object.getPrototypeOf(r);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},ix=r=>!r||typeof r!="string"||r.length===0||r.length>100||r.trim()!==r||r.includes("/")||r.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(r);function Ci(r){"@babel/helpers - typeof";return Ci=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ci(r)}function lx(r,t){if(Ci(r)!="object"||!r)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var n=a.call(r,t);if(Ci(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function ox(r){var t=lx(r,"string");return Ci(t)=="symbol"?t:t+""}function cx(r,t,a){return(t=ox(t))in r?Object.defineProperty(r,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[t]=a,r}function Lg(r,t){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),a.push.apply(a,n)}return a}function De(r){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Lg(Object(a),!0).forEach(function(n){cx(r,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):Lg(Object(a)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(a,n))})}return r}const Iu=r=>{var t;return r.msg||r.message||r.error_description||(typeof r.error=="string"?r.error:(t=r.error)===null||t===void 0?void 0:t.message)||JSON.stringify(r)},ux=(r,t,a)=>N(null,null,function*(){r instanceof(yield rx())&&!(a!=null&&a.noResolveJson)?r.json().then(n=>{const o=r.status||500,u=(n==null?void 0:n.statusCode)||o+"";t(new sx(Iu(n),o,u))}).catch(n=>{t(new rd(Iu(n),n))}):t(new rd(Iu(r),r))}),dx=(r,t,a,n)=>{const o={method:r,headers:(t==null?void 0:t.headers)||{}};return r==="GET"||!n?o:(nx(n)?(o.headers=De({"Content-Type":"application/json"},t==null?void 0:t.headers),o.body=JSON.stringify(n)):o.body=n,t!=null&&t.duplex&&(o.duplex=t.duplex),De(De({},o),a))};function ki(r,t,a,n,o,u){return N(this,null,function*(){return new Promise((h,g)=>{r(a,dx(t,n,o,u)).then(m=>{if(!m.ok)throw m;return n!=null&&n.noResolveJson?m:m.json()}).then(m=>h(m)).catch(m=>ux(m,g,n))})})}function Ei(r,t,a,n){return N(this,null,function*(){return ki(r,"GET",t,a,n)})}function Na(r,t,a,n,o){return N(this,null,function*(){return ki(r,"POST",t,n,o,a)})}function id(r,t,a,n,o){return N(this,null,function*(){return ki(r,"PUT",t,n,o,a)})}function hx(r,t,a,n){return N(this,null,function*(){return ki(r,"HEAD",t,De(De({},a),{},{noResolveJson:!0}),n)})}function wd(r,t,a,n,o){return N(this,null,function*(){return ki(r,"DELETE",t,n,o,a)})}var fx=class{constructor(r,t){this.downloadFn=r,this.shouldThrowOnError=t}then(r,t){return this.execute().then(r,t)}execute(){return N(this,null,function*(){var r=this;try{return{data:(yield r.downloadFn()).body,error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(ot(t))return{data:null,error:t};throw t}})}};let Ep;Ep=Symbol.toStringTag;var mx=class{constructor(r,t){this.downloadFn=r,this.shouldThrowOnError=t,this[Ep]="BlobDownloadBuilder",this.promise=null}asStream(){return new fx(this.downloadFn,this.shouldThrowOnError)}then(r,t){return this.getPromise().then(r,t)}catch(r){return this.getPromise().catch(r)}finally(r){return this.getPromise().finally(r)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return N(this,null,function*(){var r=this;try{return{data:yield(yield r.downloadFn()).blob(),error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(ot(t))return{data:null,error:t};throw t}})}};const gx={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},qg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var px=class{constructor(r,t={},a,n){this.shouldThrowOnError=!1,this.url=r,this.headers=t,this.bucketId=a,this.fetch=xd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(r,t,a,n){return N(this,null,function*(){var o=this;try{let u;const h=De(De({},qg),n);let g=De(De({},o.headers),r==="POST"&&{"x-upsert":String(h.upsert)});const m=h.metadata;typeof Blob!="undefined"&&a instanceof Blob?(u=new FormData,u.append("cacheControl",h.cacheControl),m&&u.append("metadata",o.encodeMetadata(m)),u.append("",a)):typeof FormData!="undefined"&&a instanceof FormData?(u=a,u.has("cacheControl")||u.append("cacheControl",h.cacheControl),m&&!u.has("metadata")&&u.append("metadata",o.encodeMetadata(m))):(u=a,g["cache-control"]=`max-age=${h.cacheControl}`,g["content-type"]=h.contentType,m&&(g["x-metadata"]=o.toBase64(o.encodeMetadata(m))),(typeof ReadableStream!="undefined"&&u instanceof ReadableStream||u&&typeof u=="object"&&"pipe"in u&&typeof u.pipe=="function")&&!h.duplex&&(h.duplex="half")),n!=null&&n.headers&&(g=De(De({},g),n.headers));const p=o._removeEmptyFolders(t),y=o._getFinalPath(p),x=yield(r=="PUT"?id:Na)(o.fetch,`${o.url}/object/${y}`,u,De({headers:g},h!=null&&h.duplex?{duplex:h.duplex}:{}));return{data:{path:p,id:x.Id,fullPath:x.Key},error:null}}catch(u){if(o.shouldThrowOnError)throw u;if(ot(u))return{data:null,error:u};throw u}})}upload(r,t,a){return N(this,null,function*(){return this.uploadOrUpdate("POST",r,t,a)})}uploadToSignedUrl(r,t,a,n){return N(this,null,function*(){var o=this;const u=o._removeEmptyFolders(r),h=o._getFinalPath(u),g=new URL(o.url+`/object/upload/sign/${h}`);g.searchParams.set("token",t);try{let m;const p=De({upsert:qg.upsert},n),y=De(De({},o.headers),{"x-upsert":String(p.upsert)});return typeof Blob!="undefined"&&a instanceof Blob?(m=new FormData,m.append("cacheControl",p.cacheControl),m.append("",a)):typeof FormData!="undefined"&&a instanceof FormData?(m=a,m.append("cacheControl",p.cacheControl)):(m=a,y["cache-control"]=`max-age=${p.cacheControl}`,y["content-type"]=p.contentType),{data:{path:u,fullPath:(yield id(o.fetch,g.toString(),m,{headers:y})).Key},error:null}}catch(m){if(o.shouldThrowOnError)throw m;if(ot(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(r,t){return N(this,null,function*(){var a=this;try{let n=a._getFinalPath(r);const o=De({},a.headers);t!=null&&t.upsert&&(o["x-upsert"]="true");const u=yield Na(a.fetch,`${a.url}/object/upload/sign/${n}`,{},{headers:o}),h=new URL(a.url+u.url),g=h.searchParams.get("token");if(!g)throw new vo("No token returned by API");return{data:{signedUrl:h.toString(),path:r,token:g},error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}})}update(r,t,a){return N(this,null,function*(){return this.uploadOrUpdate("PUT",r,t,a)})}move(r,t,a){return N(this,null,function*(){var n=this;try{return{data:yield Na(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:r,destinationKey:t,destinationBucket:a==null?void 0:a.destinationBucket},{headers:n.headers}),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(ot(o))return{data:null,error:o};throw o}})}copy(r,t,a){return N(this,null,function*(){var n=this;try{return{data:{path:(yield Na(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:r,destinationKey:t,destinationBucket:a==null?void 0:a.destinationBucket},{headers:n.headers})).Key},error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(ot(o))return{data:null,error:o};throw o}})}createSignedUrl(r,t,a){return N(this,null,function*(){var n=this;try{let o=n._getFinalPath(r),u=yield Na(n.fetch,`${n.url}/object/sign/${o}`,De({expiresIn:t},a!=null&&a.transform?{transform:a.transform}:{}),{headers:n.headers});const h=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return u={signedUrl:encodeURI(`${n.url}${u.signedURL}${h}`)},{data:u,error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(ot(o))return{data:null,error:o};throw o}})}createSignedUrls(r,t,a){return N(this,null,function*(){var n=this;try{const o=yield Na(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:r},{headers:n.headers}),u=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return{data:o.map(h=>De(De({},h),{},{signedUrl:h.signedURL?encodeURI(`${n.url}${h.signedURL}${u}`):null})),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(ot(o))return{data:null,error:o};throw o}})}download(r,t){const a=typeof(t==null?void 0:t.transform)!="undefined"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=n?`?${n}`:"",u=this._getFinalPath(r),h=()=>Ei(this.fetch,`${this.url}/${a}/${u}${o}`,{headers:this.headers,noResolveJson:!0});return new mx(h,this.shouldThrowOnError)}info(r){return N(this,null,function*(){var t=this;const a=t._getFinalPath(r);try{return{data:nd(yield Ei(t.fetch,`${t.url}/object/info/${a}`,{headers:t.headers})),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}})}exists(r){return N(this,null,function*(){var t=this;const a=t._getFinalPath(r);try{return yield hx(t.fetch,`${t.url}/object/${a}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ot(n)&&n instanceof rd){const o=n.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:n}}throw n}})}getPublicUrl(r,t){const a=this._getFinalPath(r),n=[],o=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&n.push(o);const u=typeof(t==null?void 0:t.transform)!="undefined"?"render/image":"object",h=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});h!==""&&n.push(h);let g=n.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${a}${g}`)}}}remove(r){return N(this,null,function*(){var t=this;try{return{data:yield wd(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:r},{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(ot(a))return{data:null,error:a};throw a}})}list(r,t,a){return N(this,null,function*(){var n=this;try{const o=De(De(De({},gx),t),{},{prefix:r||""});return{data:yield Na(n.fetch,`${n.url}/object/list/${n.bucketId}`,o,{headers:n.headers},a),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(ot(o))return{data:null,error:o};throw o}})}listV2(r,t){return N(this,null,function*(){var a=this;try{const n=De({},r);return{data:yield Na(a.fetch,`${a.url}/object/list-v2/${a.bucketId}`,n,{headers:a.headers},t),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}})}encodeMetadata(r){return JSON.stringify(r)}toBase64(r){return typeof Buffer!="undefined"?Buffer.from(r).toString("base64"):btoa(r)}_getFinalPath(r){return`${this.bucketId}/${r.replace(/^\/+/,"")}`}_removeEmptyFolders(r){return r.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(r){const t=[];return r.width&&t.push(`width=${r.width}`),r.height&&t.push(`height=${r.height}`),r.resize&&t.push(`resize=${r.resize}`),r.format&&t.push(`format=${r.format}`),r.quality&&t.push(`quality=${r.quality}`),t.join("&")}};const Tp="2.89.0",Dp={"X-Client-Info":`storage-js/${Tp}`};var yx=class{constructor(r,t={},a,n){this.shouldThrowOnError=!1;const o=new URL(r);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=De(De({},Dp),t),this.fetch=xd(a)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(r){return N(this,null,function*(){var t=this;try{const a=t.listBucketOptionsToQueryString(r);return{data:yield Ei(t.fetch,`${t.url}/bucket${a}`,{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(ot(a))return{data:null,error:a};throw a}})}getBucket(r){return N(this,null,function*(){var t=this;try{return{data:yield Ei(t.fetch,`${t.url}/bucket/${r}`,{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(ot(a))return{data:null,error:a};throw a}})}createBucket(a){return N(this,arguments,function*(r,t={public:!1}){var n=this;try{return{data:yield Na(n.fetch,`${n.url}/bucket`,{id:r,name:r,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(ot(o))return{data:null,error:o};throw o}})}updateBucket(r,t){return N(this,null,function*(){var a=this;try{return{data:yield id(a.fetch,`${a.url}/bucket/${r}`,{id:r,name:r,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}})}emptyBucket(r){return N(this,null,function*(){var t=this;try{return{data:yield Na(t.fetch,`${t.url}/bucket/${r}/empty`,{},{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(ot(a))return{data:null,error:a};throw a}})}deleteBucket(r){return N(this,null,function*(){var t=this;try{return{data:yield wd(t.fetch,`${t.url}/bucket/${r}`,{},{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(ot(a))return{data:null,error:a};throw a}})}listBucketOptionsToQueryString(r){const t={};return r&&("limit"in r&&(t.limit=String(r.limit)),"offset"in r&&(t.offset=String(r.offset)),r.search&&(t.search=r.search),r.sortColumn&&(t.sortColumn=r.sortColumn),r.sortOrder&&(t.sortOrder=r.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},vx=class{constructor(r,t={},a){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=De(De({},Dp),t),this.fetch=xd(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(r){return N(this,null,function*(){var t=this;try{return{data:yield Na(t.fetch,`${t.url}/bucket`,{name:r},{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(ot(a))return{data:null,error:a};throw a}})}listBuckets(r){return N(this,null,function*(){var t=this;try{const a=new URLSearchParams;(r==null?void 0:r.limit)!==void 0&&a.set("limit",r.limit.toString()),(r==null?void 0:r.offset)!==void 0&&a.set("offset",r.offset.toString()),r!=null&&r.sortColumn&&a.set("sortColumn",r.sortColumn),r!=null&&r.sortOrder&&a.set("sortOrder",r.sortOrder),r!=null&&r.search&&a.set("search",r.search);const n=a.toString(),o=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return{data:yield Ei(t.fetch,o,{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(ot(a))return{data:null,error:a};throw a}})}deleteBucket(r){return N(this,null,function*(){var t=this;try{return{data:yield wd(t.fetch,`${t.url}/bucket/${r}`,{},{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(ot(a))return{data:null,error:a};throw a}})}from(r){var t=this;if(!ix(r))throw new vo("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const a=new ax({baseUrl:this.url,catalogName:r,auth:{type:"custom",getHeaders:()=>N(this,null,function*(){return t.headers})},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(a,{get(o,u){const h=o[u];return typeof h!="function"?h:(...g)=>N(null,null,function*(){try{return{data:yield h.apply(o,g),error:null}}catch(m){if(n)throw m;return{data:null,error:m}}})}})}};const jd={"X-Client-Info":`storage-js/${Tp}`,"Content-Type":"application/json"};var Op=class extends Error{constructor(r){super(r),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function ia(r){return typeof r=="object"&&r!==null&&"__isStorageVectorsError"in r}var Pu=class extends Op{constructor(r,t,a){super(r),this.name="StorageVectorsApiError",this.status=t,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},bx=class extends Op{constructor(r,t){super(r),this.name="StorageVectorsUnknownError",this.originalError=t}};const Sd=r=>r?(...t)=>r(...t):(...t)=>fetch(...t),xx=r=>{if(typeof r!="object"||r===null)return!1;const t=Object.getPrototypeOf(r);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},$g=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),wx=(r,t,a)=>N(null,null,function*(){if(r&&typeof r=="object"&&"status"in r&&"ok"in r&&typeof r.status=="number"&&!(a!=null&&a.noResolveJson)){const n=r.status||500,o=r;if(typeof o.json=="function")o.json().then(u=>{const h=(u==null?void 0:u.statusCode)||(u==null?void 0:u.code)||n+"";t(new Pu($g(u),n,h))}).catch(()=>{const u=n+"";t(new Pu(o.statusText||`HTTP ${n} error`,n,u))});else{const u=n+"";t(new Pu(o.statusText||`HTTP ${n} error`,n,u))}}else t(new bx($g(r),r))}),jx=(r,t,a,n)=>{const o={method:r,headers:(t==null?void 0:t.headers)||{}};return n?(xx(n)?(o.headers=De({"Content-Type":"application/json"},t==null?void 0:t.headers),o.body=JSON.stringify(n)):o.body=n,De(De({},o),a)):o};function Sx(r,t,a,n,o,u){return N(this,null,function*(){return new Promise((h,g)=>{r(a,jx(t,n,o,u)).then(m=>{if(!m.ok)throw m;if(n!=null&&n.noResolveJson)return m;const p=m.headers.get("content-type");return!p||!p.includes("application/json")?{}:m.json()}).then(m=>h(m)).catch(m=>wx(m,g,n))})})}function la(r,t,a,n,o){return N(this,null,function*(){return Sx(r,"POST",t,n,o,a)})}var _x=class{constructor(r,t={},a){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=De(De({},jd),t),this.fetch=Sd(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(r){return N(this,null,function*(){var t=this;try{return{data:(yield la(t.fetch,`${t.url}/CreateIndex`,r,{headers:t.headers}))||{},error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(ia(a))return{data:null,error:a};throw a}})}getIndex(r,t){return N(this,null,function*(){var a=this;try{return{data:yield la(a.fetch,`${a.url}/GetIndex`,{vectorBucketName:r,indexName:t},{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(ia(n))return{data:null,error:n};throw n}})}listIndexes(r){return N(this,null,function*(){var t=this;try{return{data:yield la(t.fetch,`${t.url}/ListIndexes`,r,{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(ia(a))return{data:null,error:a};throw a}})}deleteIndex(r,t){return N(this,null,function*(){var a=this;try{return{data:(yield la(a.fetch,`${a.url}/DeleteIndex`,{vectorBucketName:r,indexName:t},{headers:a.headers}))||{},error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(ia(n))return{data:null,error:n};throw n}})}},Nx=class{constructor(r,t={},a){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=De(De({},jd),t),this.fetch=Sd(a)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(r){return N(this,null,function*(){var t=this;try{if(r.vectors.length<1||r.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield la(t.fetch,`${t.url}/PutVectors`,r,{headers:t.headers}))||{},error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(ia(a))return{data:null,error:a};throw a}})}getVectors(r){return N(this,null,function*(){var t=this;try{return{data:yield la(t.fetch,`${t.url}/GetVectors`,r,{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(ia(a))return{data:null,error:a};throw a}})}listVectors(r){return N(this,null,function*(){var t=this;try{if(r.segmentCount!==void 0){if(r.segmentCount<1||r.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(r.segmentIndex!==void 0&&(r.segmentIndex<0||r.segmentIndex>=r.segmentCount))throw new Error(`segmentIndex must be between 0 and ${r.segmentCount-1}`)}return{data:yield la(t.fetch,`${t.url}/ListVectors`,r,{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(ia(a))return{data:null,error:a};throw a}})}queryVectors(r){return N(this,null,function*(){var t=this;try{return{data:yield la(t.fetch,`${t.url}/QueryVectors`,r,{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(ia(a))return{data:null,error:a};throw a}})}deleteVectors(r){return N(this,null,function*(){var t=this;try{if(r.keys.length<1||r.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield la(t.fetch,`${t.url}/DeleteVectors`,r,{headers:t.headers}))||{},error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(ia(a))return{data:null,error:a};throw a}})}},Cx=class{constructor(r,t={},a){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=De(De({},jd),t),this.fetch=Sd(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(r){return N(this,null,function*(){var t=this;try{return{data:(yield la(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:r},{headers:t.headers}))||{},error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(ia(a))return{data:null,error:a};throw a}})}getBucket(r){return N(this,null,function*(){var t=this;try{return{data:yield la(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:r},{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(ia(a))return{data:null,error:a};throw a}})}listBuckets(){return N(this,arguments,function*(r={}){var t=this;try{return{data:yield la(t.fetch,`${t.url}/ListVectorBuckets`,r,{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(ia(a))return{data:null,error:a};throw a}})}deleteBucket(r){return N(this,null,function*(){var t=this;try{return{data:(yield la(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:r},{headers:t.headers}))||{},error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(ia(a))return{data:null,error:a};throw a}})}},Ex=class r extends Cx{constructor(t,a={}){super(t,a.headers||{},a.fetch)}from(t){return new Tx(this.url,this.headers,t,this.fetch)}createBucket(t){return N(this,null,function*(){var a=()=>Kt(r.prototype,this,"createBucket"),n=this;return a().call(n,t)})}getBucket(t){return N(this,null,function*(){var a=()=>Kt(r.prototype,this,"getBucket"),n=this;return a().call(n,t)})}listBuckets(){return N(this,arguments,function*(t={}){var a=()=>Kt(r.prototype,this,"listBuckets"),n=this;return a().call(n,t)})}deleteBucket(t){return N(this,null,function*(){var a=()=>Kt(r.prototype,this,"deleteBucket"),n=this;return a().call(n,t)})}},Tx=class r extends _x{constructor(t,a,n,o){super(t,a,o),this.vectorBucketName=n}createIndex(t){return N(this,null,function*(){var a=()=>Kt(r.prototype,this,"createIndex"),n=this;return a().call(n,De(De({},t),{},{vectorBucketName:n.vectorBucketName}))})}listIndexes(){return N(this,arguments,function*(t={}){var a=()=>Kt(r.prototype,this,"listIndexes"),n=this;return a().call(n,De(De({},t),{},{vectorBucketName:n.vectorBucketName}))})}getIndex(t){return N(this,null,function*(){var a=()=>Kt(r.prototype,this,"getIndex"),n=this;return a().call(n,n.vectorBucketName,t)})}deleteIndex(t){return N(this,null,function*(){var a=()=>Kt(r.prototype,this,"deleteIndex"),n=this;return a().call(n,n.vectorBucketName,t)})}index(t){return new Dx(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},Dx=class r extends Nx{constructor(t,a,n,o,u){super(t,a,u),this.vectorBucketName=n,this.indexName=o}putVectors(t){return N(this,null,function*(){var a=()=>Kt(r.prototype,this,"putVectors"),n=this;return a().call(n,De(De({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))})}getVectors(t){return N(this,null,function*(){var a=()=>Kt(r.prototype,this,"getVectors"),n=this;return a().call(n,De(De({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))})}listVectors(){return N(this,arguments,function*(t={}){var a=()=>Kt(r.prototype,this,"listVectors"),n=this;return a().call(n,De(De({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))})}queryVectors(t){return N(this,null,function*(){var a=()=>Kt(r.prototype,this,"queryVectors"),n=this;return a().call(n,De(De({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))})}deleteVectors(t){return N(this,null,function*(){var a=()=>Kt(r.prototype,this,"deleteVectors"),n=this;return a().call(n,De(De({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))})}},Ox=class extends yx{constructor(r,t={},a,n){super(r,t,a,n)}from(r){return new px(this.url,this.headers,r,this.fetch)}get vectors(){return new Ex(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new vx(this.url+"/iceberg",this.headers,this.fetch)}};const Ap="2.89.0",en=30*1e3,ld=3,Hu=ld*en,Ax="http://localhost:9999",kx="supabase.auth.token",Rx={"X-Client-Info":`gotrue-js/${Ap}`},od="X-Supabase-Api-Version",kp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Mx=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Ux=600*1e3;class Ti extends Error{constructor(t,a,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=a,this.code=n}}function je(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class Lx extends Ti{constructor(t,a,n){super(t,a,n),this.name="AuthApiError",this.status=a,this.code=n}}function qx(r){return je(r)&&r.name==="AuthApiError"}class ar extends Ti{constructor(t,a){super(t),this.name="AuthUnknownError",this.originalError=a}}class ss extends Ti{constructor(t,a,n,o){super(t,n,o),this.name=a,this.status=n}}class na extends ss{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function $x(r){return je(r)&&r.name==="AuthSessionMissingError"}class Fr extends ss{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Jl extends ss{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Zl extends ss{constructor(t,a=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function zx(r){return je(r)&&r.name==="AuthImplicitGrantRedirectError"}class zg extends ss{constructor(t,a=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Bx extends ss{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class cd extends ss{constructor(t,a){super(t,"AuthRetryableFetchError",a,void 0)}}function Yu(r){return je(r)&&r.name==="AuthRetryableFetchError"}class Bg extends ss{constructor(t,a,n){super(t,"AuthWeakPasswordError",a,"weak_password"),this.reasons=n}}class ud extends ss{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const oo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ig=` 	
\r=`.split(""),Ix=(()=>{const r=new Array(128);for(let t=0;t<r.length;t+=1)r[t]=-1;for(let t=0;t<Ig.length;t+=1)r[Ig[t].charCodeAt(0)]=-2;for(let t=0;t<oo.length;t+=1)r[oo[t].charCodeAt(0)]=t;return r})();function Pg(r,t,a){if(r!==null)for(t.queue=t.queue<<8|r,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;a(oo[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;a(oo[n]),t.queuedBits-=6}}function Rp(r,t,a){const n=Ix[r];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)a(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function Hg(r){const t=[],a=h=>{t.push(String.fromCodePoint(h))},n={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},u=h=>{Yx(h,n,a)};for(let h=0;h<r.length;h+=1)Rp(r.charCodeAt(h),o,u);return t.join("")}function Px(r,t){if(r<=127){t(r);return}else if(r<=2047){t(192|r>>6),t(128|r&63);return}else if(r<=65535){t(224|r>>12),t(128|r>>6&63),t(128|r&63);return}else if(r<=1114111){t(240|r>>18),t(128|r>>12&63),t(128|r>>6&63),t(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function Hx(r,t){for(let a=0;a<r.length;a+=1){let n=r.charCodeAt(a);if(n>55295&&n<=56319){const o=(n-55296)*1024&65535;n=(r.charCodeAt(a+1)-56320&65535|o)+65536,a+=1}Px(n,t)}}function Yx(r,t,a){if(t.utf8seq===0){if(r<=127){a(r);return}for(let n=1;n<6;n+=1)if((r>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=r&31;else if(t.utf8seq===3)t.codepoint=r&15;else if(t.utf8seq===4)t.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|r&63,t.utf8seq-=1,t.utf8seq===0&&a(t.codepoint)}}function rn(r){const t=[],a={queue:0,queuedBits:0},n=o=>{t.push(o)};for(let o=0;o<r.length;o+=1)Rp(r.charCodeAt(o),a,n);return new Uint8Array(t)}function Vx(r){const t=[];return Hx(r,a=>t.push(a)),new Uint8Array(t)}function sr(r){const t=[],a={queue:0,queuedBits:0},n=o=>{t.push(o)};return r.forEach(o=>Pg(o,a,n)),Pg(null,a,n),t.join("")}function Fx(r){return Math.round(Date.now()/1e3)+r}function Qx(){return Symbol("auth-callback")}const zt=()=>typeof window!="undefined"&&typeof document!="undefined",Xs={tested:!1,writable:!1},Mp=()=>{if(!zt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch(t){return!1}if(Xs.tested)return Xs.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),Xs.tested=!0,Xs.writable=!0}catch(t){Xs.tested=!0,Xs.writable=!1}return Xs.writable};function Gx(r){const t={},a=new URL(r);if(a.hash&&a.hash[0]==="#")try{new URLSearchParams(a.hash.substring(1)).forEach((o,u)=>{t[u]=o})}catch(n){}return a.searchParams.forEach((n,o)=>{t[o]=n}),t}const Up=r=>r?(...t)=>r(...t):(...t)=>fetch(...t),Kx=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",tn=(r,t,a)=>N(null,null,function*(){yield r.setItem(t,JSON.stringify(a))}),Js=(r,t)=>N(null,null,function*(){const a=yield r.getItem(t);if(!a)return null;try{return JSON.parse(a)}catch(n){return a}}),$t=(r,t)=>N(null,null,function*(){yield r.removeItem(t)});class bo{constructor(){this.promise=new bo.promiseConstructor((t,a)=>{this.resolve=t,this.reject=a})}}bo.promiseConstructor=Promise;function Vu(r){const t=r.split(".");if(t.length!==3)throw new ud("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Mx.test(t[n]))throw new ud("JWT not in base64url format");return{header:JSON.parse(Hg(t[0])),payload:JSON.parse(Hg(t[1])),signature:rn(t[2]),raw:{header:t[0],payload:t[1]}}}function Wx(r){return N(this,null,function*(){return yield new Promise(t=>{setTimeout(()=>t(null),r)})})}function Xx(r,t){return new Promise((n,o)=>{N(null,null,function*(){for(let u=0;u<1/0;u++)try{const h=yield r(u);if(!t(u,null,h)){n(h);return}}catch(h){if(!t(u,h)){o(h);return}}})})}function Jx(r){return("0"+r.toString(16)).substr(-2)}function Zx(){const t=new Uint32Array(56);if(typeof crypto=="undefined"){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=a.length;let o="";for(let u=0;u<56;u++)o+=a.charAt(Math.floor(Math.random()*n));return o}return crypto.getRandomValues(t),Array.from(t,Jx).join("")}function ew(r){return N(this,null,function*(){const a=new TextEncoder().encode(r),n=yield crypto.subtle.digest("SHA-256",a),o=new Uint8Array(n);return Array.from(o).map(u=>String.fromCharCode(u)).join("")})}function tw(r){return N(this,null,function*(){if(!(typeof crypto!="undefined"&&typeof crypto.subtle!="undefined"&&typeof TextEncoder!="undefined"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const a=yield ew(r);return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})}function Qr(r,t,a=!1){return N(this,null,function*(){const n=Zx();let o=n;a&&(o+="/PASSWORD_RECOVERY"),yield tn(r,`${t}-code-verifier`,o);const u=yield tw(n);return[u,n===u?"plain":"s256"]})}const aw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function sw(r){const t=r.headers.get(od);if(!t||!t.match(aw))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(a){return null}}function rw(r){if(!r)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(r<=t)throw new Error("JWT has expired")}function nw(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const iw=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Gr(r){if(!iw.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Fu(){const r={};return new Proxy(r,{get:(t,a)=>{if(a==="__isUserNotAvailableProxy")return!0;if(typeof a=="symbol"){const n=a.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${a}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function lw(r,t){return new Proxy(r,{get:(a,n,o)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const u=n.toString();if(u==="Symbol(Symbol.toPrimitive)"||u==="Symbol(Symbol.toStringTag)"||u==="Symbol(util.inspect.custom)"||u==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(a,n,o)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(a,n,o)}})}function Yg(r){return JSON.parse(JSON.stringify(r))}const Zs=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),ow=[502,503,504];function Vg(r){return N(this,null,function*(){var t;if(!Kx(r))throw new cd(Zs(r),0);if(ow.includes(r.status))throw new cd(Zs(r),r.status);let a;try{a=yield r.json()}catch(u){throw new ar(Zs(u),u)}let n;const o=sw(r);if(o&&o.getTime()>=kp["2024-01-01"].timestamp&&typeof a=="object"&&a&&typeof a.code=="string"?n=a.code:typeof a=="object"&&a&&typeof a.error_code=="string"&&(n=a.error_code),n){if(n==="weak_password")throw new Bg(Zs(a),r.status,((t=a.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new na}else if(typeof a=="object"&&a&&typeof a.weak_password=="object"&&a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.reasons.reduce((u,h)=>u&&typeof h=="string",!0))throw new Bg(Zs(a),r.status,a.weak_password.reasons);throw new Lx(Zs(a),r.status||500,n)})}const cw=(r,t,a,n)=>{const o={method:r,headers:(t==null?void 0:t.headers)||{}};return r==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),o.body=JSON.stringify(n),Object.assign(Object.assign({},o),a))};function Te(r,t,a,n){return N(this,null,function*(){var o;const u=Object.assign({},n==null?void 0:n.headers);u[od]||(u[od]=kp["2024-01-01"].name),n!=null&&n.jwt&&(u.Authorization=`Bearer ${n.jwt}`);const h=(o=n==null?void 0:n.query)!==null&&o!==void 0?o:{};n!=null&&n.redirectTo&&(h.redirect_to=n.redirectTo);const g=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",m=yield uw(r,t,a+g,{headers:u,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(m):{data:Object.assign({},m),error:null}})}function uw(r,t,a,n,o,u){return N(this,null,function*(){const h=cw(t,n,o,u);let g;try{g=yield r(a,Object.assign({},h))}catch(m){throw console.error(m),new cd(Zs(m),0)}if(g.ok||(yield Vg(g)),n!=null&&n.noResolveJson)return g;try{return yield g.json()}catch(m){yield Vg(m)}})}function _a(r){var t;let a=null;fw(r)&&(a=Object.assign({},r),r.expires_at||(a.expires_at=Fx(r.expires_in)));const n=(t=r.user)!==null&&t!==void 0?t:r;return{data:{session:a,user:n},error:null}}function Fg(r){const t=_a(r);return!t.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((a,n)=>a&&typeof n=="string",!0)&&(t.data.weak_password=r.weak_password),t}function Ds(r){var t;return{data:{user:(t=r.user)!==null&&t!==void 0?t:r},error:null}}function dw(r){return{data:r,error:null}}function hw(r){const{action_link:t,email_otp:a,hashed_token:n,redirect_to:o,verification_type:u}=r,h=yo(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),g={action_link:t,email_otp:a,hashed_token:n,redirect_to:o,verification_type:u},m=Object.assign({},h);return{data:{properties:g,user:m},error:null}}function Qg(r){return r}function fw(r){return r.access_token&&r.refresh_token&&r.expires_in}const Qu=["global","local","others"];class mw{constructor({url:t="",headers:a={},fetch:n}){this.url=t,this.headers=a,this.fetch=Up(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}signOut(n){return N(this,arguments,function*(t,a=Qu[0]){if(Qu.indexOf(a)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Qu.join(", ")}`);try{return yield Te(this.fetch,"POST",`${this.url}/logout?scope=${a}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(o){if(je(o))return{data:null,error:o};throw o}})}inviteUserByEmail(n){return N(this,arguments,function*(t,a={}){try{return yield Te(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:a.data},headers:this.headers,redirectTo:a.redirectTo,xform:Ds})}catch(o){if(je(o))return{data:{user:null},error:o};throw o}})}generateLink(t){return N(this,null,function*(){try{const{options:a}=t,n=yo(t,["options"]),o=Object.assign(Object.assign({},n),a);return"newEmail"in n&&(o.new_email=n==null?void 0:n.newEmail,delete o.newEmail),yield Te(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:hw,redirectTo:a==null?void 0:a.redirectTo})}catch(a){if(je(a))return{data:{properties:null,user:null},error:a};throw a}})}createUser(t){return N(this,null,function*(){try{return yield Te(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ds})}catch(a){if(je(a))return{data:{user:null},error:a};throw a}})}listUsers(t){return N(this,null,function*(){var a,n,o,u,h,g,m;try{const p={nextPage:null,lastPage:0,total:0},y=yield Te(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(a=t==null?void 0:t.page)===null||a===void 0?void 0:a.toString())!==null&&n!==void 0?n:"",per_page:(u=(o=t==null?void 0:t.perPage)===null||o===void 0?void 0:o.toString())!==null&&u!==void 0?u:""},xform:Qg});if(y.error)throw y.error;const x=yield y.json(),v=(h=y.headers.get("x-total-count"))!==null&&h!==void 0?h:0,S=(m=(g=y.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&m!==void 0?m:[];return S.length>0&&(S.forEach(C=>{const T=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(C.split(";")[1].split("=")[1]);p[`${A}Page`]=T}),p.total=parseInt(v)),{data:Object.assign(Object.assign({},x),p),error:null}}catch(p){if(je(p))return{data:{users:[]},error:p};throw p}})}getUserById(t){return N(this,null,function*(){Gr(t);try{return yield Te(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ds})}catch(a){if(je(a))return{data:{user:null},error:a};throw a}})}updateUserById(t,a){return N(this,null,function*(){Gr(t);try{return yield Te(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:a,headers:this.headers,xform:Ds})}catch(n){if(je(n))return{data:{user:null},error:n};throw n}})}deleteUser(t,a=!1){return N(this,null,function*(){Gr(t);try{return yield Te(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:a},xform:Ds})}catch(n){if(je(n))return{data:{user:null},error:n};throw n}})}_listFactors(t){return N(this,null,function*(){Gr(t.userId);try{const{data:a,error:n}=yield Te(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:a,error:n}}catch(a){if(je(a))return{data:null,error:a};throw a}})}_deleteFactor(t){return N(this,null,function*(){Gr(t.userId),Gr(t.id);try{return{data:yield Te(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(a){if(je(a))return{data:null,error:a};throw a}})}_listOAuthClients(t){return N(this,null,function*(){var a,n,o,u,h,g,m;try{const p={nextPage:null,lastPage:0,total:0},y=yield Te(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(a=t==null?void 0:t.page)===null||a===void 0?void 0:a.toString())!==null&&n!==void 0?n:"",per_page:(u=(o=t==null?void 0:t.perPage)===null||o===void 0?void 0:o.toString())!==null&&u!==void 0?u:""},xform:Qg});if(y.error)throw y.error;const x=yield y.json(),v=(h=y.headers.get("x-total-count"))!==null&&h!==void 0?h:0,S=(m=(g=y.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&m!==void 0?m:[];return S.length>0&&(S.forEach(C=>{const T=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(C.split(";")[1].split("=")[1]);p[`${A}Page`]=T}),p.total=parseInt(v)),{data:Object.assign(Object.assign({},x),p),error:null}}catch(p){if(je(p))return{data:{clients:[]},error:p};throw p}})}_createOAuthClient(t){return N(this,null,function*(){try{return yield Te(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(je(a))return{data:null,error:a};throw a}})}_getOAuthClient(t){return N(this,null,function*(){try{return yield Te(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(je(a))return{data:null,error:a};throw a}})}_updateOAuthClient(t,a){return N(this,null,function*(){try{return yield Te(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:a,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(je(n))return{data:null,error:n};throw n}})}_deleteOAuthClient(t){return N(this,null,function*(){try{return yield Te(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(a){if(je(a))return{data:null,error:a};throw a}})}_regenerateOAuthClientSecret(t){return N(this,null,function*(){try{return yield Te(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(je(a))return{data:null,error:a};throw a}})}}function Gg(r={}){return{getItem:t=>r[t]||null,setItem:(t,a)=>{r[t]=a},removeItem:t=>{delete r[t]}}}const Kr={debug:!!(globalThis&&Mp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Lp extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class gw extends Lp{}function pw(r,t,a){return N(this,null,function*(){Kr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Kr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},t),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(r,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},o=>N(null,null,function*(){if(o){Kr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,o.name);try{return yield a()}finally{Kr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,o.name)}}else{if(t===0)throw Kr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new gw(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(Kr.debug)try{const u=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield a()}})))})}function yw(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(r){typeof self!="undefined"&&(self.globalThis=self)}}function qp(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function vw(r){return parseInt(r,16)}function bw(r){const t=new TextEncoder().encode(r);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function xw(r){var t;const{chainId:a,domain:n,expirationTime:o,issuedAt:u=new Date,nonce:h,notBefore:g,requestId:m,resources:p,scheme:y,uri:x,version:v}=r;{if(!Number.isInteger(a))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${a}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!x)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((t=r.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const S=qp(r.address),C=y?`${y}://${n}`:n,T=r.statement?`${r.statement}
`:"",A=`${C} wants you to sign in with your Ethereum account:
${S}

${T}`;let I=`URI: ${x}
Version: ${v}
Chain ID: ${a}${h?`
Nonce: ${h}`:""}
Issued At: ${u.toISOString()}`;if(o&&(I+=`
Expiration Time: ${o.toISOString()}`),g&&(I+=`
Not Before: ${g.toISOString()}`),m&&(I+=`
Request ID: ${m}`),p){let G=`
Resources:`;for(const P of p){if(!P||typeof P!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${P}`);G+=`
- ${P}`}I+=G}return`${A}
${I}`}class Nt extends Error{constructor({message:t,code:a,cause:n,name:o}){var u;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(u=o!=null?o:n instanceof Error?n.name:void 0)!==null&&u!==void 0?u:"Unknown Error",this.code=a}}class co extends Nt{constructor(t,a){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a,message:t}),this.name="WebAuthnUnknownError",this.originalError=a}}function ww({error:r,options:t}){var a,n,o;const{publicKey:u}=t;if(!u)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Nt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((a=u.authenticatorSelection)===null||a===void 0?void 0:a.requireResidentKey)===!0)return new Nt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(t.mediation==="conditional"&&((n=u.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Nt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((o=u.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new Nt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new Nt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new Nt({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return u.pubKeyCredParams.filter(g=>g.type==="public-key").length===0?new Nt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new Nt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const h=window.location.hostname;if($p(h)){if(u.rp.id!==h)return new Nt({message:`The RP ID "${u.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new Nt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(u.user.id.byteLength<1||u.user.id.byteLength>64)return new Nt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new Nt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new Nt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function jw({error:r,options:t}){const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Nt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new Nt({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const n=window.location.hostname;if($p(n)){if(a.rpId!==n)return new Nt({message:`The RP ID "${a.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new Nt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new Nt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new Nt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}class Sw{createNewAbortSignal(){if(this.controller){const a=new Error("Cancelling existing WebAuthn API call for new one");a.name="AbortError",this.controller.abort(a)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const _w=new Sw;function Nw(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential!="undefined"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:t,user:a,excludeCredentials:n}=r,o=yo(r,["challenge","user","excludeCredentials"]),u=rn(t).buffer,h=Object.assign(Object.assign({},a),{id:rn(a.id).buffer}),g=Object.assign(Object.assign({},o),{challenge:u,user:h});if(n&&n.length>0){g.excludeCredentials=new Array(n.length);for(let m=0;m<n.length;m++){const p=n[m];g.excludeCredentials[m]=Object.assign(Object.assign({},p),{id:rn(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return g}function Cw(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential!="undefined"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:t,allowCredentials:a}=r,n=yo(r,["challenge","allowCredentials"]),o=rn(t).buffer,u=Object.assign(Object.assign({},n),{challenge:o});if(a&&a.length>0){u.allowCredentials=new Array(a.length);for(let h=0;h<a.length;h++){const g=a[h];u.allowCredentials[h]=Object.assign(Object.assign({},g),{id:rn(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return u}function Ew(r){var t;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const a=r;return{id:r.id,rawId:r.id,response:{attestationObject:sr(new Uint8Array(r.response.attestationObject)),clientDataJSON:sr(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(t=a.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Tw(r){var t;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const a=r,n=r.getClientExtensionResults(),o=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:sr(new Uint8Array(o.authenticatorData)),clientDataJSON:sr(new Uint8Array(o.clientDataJSON)),signature:sr(new Uint8Array(o.signature)),userHandle:o.userHandle?sr(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=a.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function $p(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function Kg(){var r,t;return!!(zt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator==null?void 0:navigator.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}function Dw(r){return N(this,null,function*(){try{const t=yield navigator.credentials.create(r);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new co("Browser returned unexpected credential type",t)}:{data:null,error:new co("Empty credential response",t)}}catch(t){return{data:null,error:ww({error:t,options:r})}}})}function Ow(r){return N(this,null,function*(){try{const t=yield navigator.credentials.get(r);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new co("Browser returned unexpected credential type",t)}:{data:null,error:new co("Empty credential response",t)}}catch(t){return{data:null,error:jw({error:t,options:r})}}})}const Aw={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},kw={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function uo(...r){const t=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),a=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),n={};for(const o of r)if(o)for(const u in o){const h=o[u];if(h!==void 0)if(Array.isArray(h))n[u]=h;else if(a(h))n[u]=h;else if(t(h)){const g=n[u];t(g)?n[u]=uo(g,h):n[u]=uo(h)}else n[u]=h}return n}function Rw(r,t){return uo(Aw,r,t||{})}function Mw(r,t){return uo(kw,r,t||{})}class Uw{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}_enroll(t){return N(this,null,function*(){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))})}_challenge(h,g){return N(this,arguments,function*({factorId:t,webauthn:a,friendlyName:n,signal:o},u){try{const{data:m,error:p}=yield this.client.mfa.challenge({factorId:t,webauthn:a});if(!m)return{data:null,error:p};const y=o!=null?o:_w.createNewAbortSignal();if(m.webauthn.type==="create"){const{user:x}=m.webauthn.credential_options.publicKey;x.name||(x.name=`${x.id}:${n}`),x.displayName||(x.displayName=x.name)}switch(m.webauthn.type){case"create":{const x=Rw(m.webauthn.credential_options.publicKey,u==null?void 0:u.create),{data:v,error:S}=yield Dw({publicKey:x,signal:y});return v?{data:{factorId:t,challengeId:m.id,webauthn:{type:m.webauthn.type,credential_response:v}},error:null}:{data:null,error:S}}case"request":{const x=Mw(m.webauthn.credential_options.publicKey,u==null?void 0:u.request),{data:v,error:S}=yield Ow(Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:x,signal:y}));return v?{data:{factorId:t,challengeId:m.id,webauthn:{type:m.webauthn.type,credential_response:v}},error:null}:{data:null,error:S}}}}catch(m){return je(m)?{data:null,error:m}:{data:null,error:new ar("Unexpected error in challenge",m)}}})}_verify(o){return N(this,arguments,function*({challengeId:t,factorId:a,webauthn:n}){return this.client.mfa.verify({factorId:a,challengeId:t,webauthn:n})})}_authenticate(h,g){return N(this,arguments,function*({factorId:t,webauthn:{rpId:a=typeof window!="undefined"?window.location.hostname:void 0,rpOrigins:n=typeof window!="undefined"?[window.location.origin]:void 0,signal:o}={}},u){if(!a)return{data:null,error:new Ti("rpId is required for WebAuthn authentication")};try{if(!Kg())return{data:null,error:new ar("Browser does not support WebAuthn",null)};const{data:m,error:p}=yield this.challenge({factorId:t,webauthn:{rpId:a,rpOrigins:n},signal:o},{request:u});if(!m)return{data:null,error:p};const{webauthn:y}=m;return this._verify({factorId:t,challengeId:m.challengeId,webauthn:{type:y.type,rpId:a,rpOrigins:n,credential_response:y.credential_response}})}catch(m){return je(m)?{data:null,error:m}:{data:null,error:new ar("Unexpected error in authenticate",m)}}})}_register(h,g){return N(this,arguments,function*({friendlyName:t,webauthn:{rpId:a=typeof window!="undefined"?window.location.hostname:void 0,rpOrigins:n=typeof window!="undefined"?[window.location.origin]:void 0,signal:o}={}},u){if(!a)return{data:null,error:new Ti("rpId is required for WebAuthn registration")};try{if(!Kg())return{data:null,error:new ar("Browser does not support WebAuthn",null)};const{data:m,error:p}=yield this._enroll({friendlyName:t});if(!m)return yield this.client.mfa.listFactors().then(v=>{var S;return(S=v.data)===null||S===void 0?void 0:S.all.find(C=>C.factor_type==="webauthn"&&C.friendly_name===t&&C.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v==null?void 0:v.id}):void 0),{data:null,error:p};const{data:y,error:x}=yield this._challenge({factorId:m.id,friendlyName:m.friendly_name,webauthn:{rpId:a,rpOrigins:n},signal:o},{create:u});return y?this._verify({factorId:m.id,challengeId:y.challengeId,webauthn:{rpId:a,rpOrigins:n,type:y.webauthn.type,credential_response:y.webauthn.credential_response}}):{data:null,error:x}}catch(m){return je(m)?{data:null,error:m}:{data:null,error:new ar("Unexpected error in register",m)}}})}}yw();const Lw={url:Ax,storageKey:kx,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Rx,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};function Wg(r,t,a){return N(this,null,function*(){return yield a()})}const Wr={};class Di{get jwks(){var t,a;return(a=(t=Wr[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&a!==void 0?a:{keys:[]}}set jwks(t){Wr[this.storageKey]=Object.assign(Object.assign({},Wr[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,a;return(a=(t=Wr[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Wr[this.storageKey]=Object.assign(Object.assign({},Wr[this.storageKey]),{cachedAt:t})}constructor(t){var a,n,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const u=Object.assign(Object.assign({},Lw),t);if(this.storageKey=u.storageKey,this.instanceID=(a=Di.nextInstanceID[this.storageKey])!==null&&a!==void 0?a:0,Di.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.instanceID>0&&zt()){const h=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(h),this.logDebugMessages&&console.trace(h)}if(this.persistSession=u.persistSession,this.autoRefreshToken=u.autoRefreshToken,this.admin=new mw({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=Up(u.fetch),this.lock=u.lock||Wg,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,this.throwOnError=u.throwOnError,u.lock?this.lock=u.lock:this.persistSession&&zt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=pw:this.lock=Wg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Uw(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(u.storage?this.storage=u.storage:Mp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Gg(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=Gg(this.memoryStorage)),zt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(h){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",h)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",h=>N(this,null,function*(){this._debug("received broadcast notification from other tab or client",h),yield this._notifyAllSubscribers(h.data.event,h.data.session,!1)}))}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Ap}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}initialize(){return N(this,null,function*(){return this.initializePromise?yield this.initializePromise:(this.initializePromise=N(this,null,function*(){return yield this._acquireLock(-1,()=>N(this,null,function*(){return yield this._initialize()}))}),yield this.initializePromise)})}_initialize(){return N(this,null,function*(){var t;try{let a={},n="none";if(zt()&&(a=Gx(window.location.href),this._isImplicitGrantCallback(a)?n="implicit":(yield this._isPKCECallback(a))&&(n="pkce")),zt()&&this.detectSessionInUrl&&n!=="none"){const{data:o,error:u}=yield this._getSessionFromURL(a,n);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),zx(u)){const m=(t=u.details)===null||t===void 0?void 0:t.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:u}}return yield this._removeSession(),{error:u}}const{session:h,redirectType:g}=o;return this._debug("#_initialize()","detected session in URL",h,"redirect type",g),yield this._saveSession(h),setTimeout(()=>N(this,null,function*(){g==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",h):yield this._notifyAllSubscribers("SIGNED_IN",h)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(a){return je(a)?this._returnResult({error:a}):this._returnResult({error:new ar("Unexpected error during initialization",a)})}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signInAnonymously(t){return N(this,null,function*(){var a,n,o;try{const u=yield Te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(o=t==null?void 0:t.options)===null||o===void 0?void 0:o.captchaToken}},xform:_a}),{data:h,error:g}=u;if(g||!h)return this._returnResult({data:{user:null,session:null},error:g});const m=h.session,p=h.user;return h.session&&(yield this._saveSession(h.session),yield this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(u){if(je(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}})}signUp(t){return N(this,null,function*(){var a,n,o;try{let u;if("email"in t){const{email:y,password:x,options:v}=t;let S=null,C=null;this.flowType==="pkce"&&([S,C]=yield Qr(this.storage,this.storageKey)),u=yield Te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:y,password:x,data:(a=v==null?void 0:v.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:S,code_challenge_method:C},xform:_a})}else if("phone"in t){const{phone:y,password:x,options:v}=t;u=yield Te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:x,data:(n=v==null?void 0:v.data)!==null&&n!==void 0?n:{},channel:(o=v==null?void 0:v.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:_a})}else throw new Jl("You must provide either an email or phone number and a password");const{data:h,error:g}=u;if(g||!h)return yield $t(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:g});const m=h.session,p=h.user;return h.session&&(yield this._saveSession(h.session),yield this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(u){if(yield $t(this.storage,`${this.storageKey}-code-verifier`),je(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}})}signInWithPassword(t){return N(this,null,function*(){try{let a;if("email"in t){const{email:u,password:h,options:g}=t;a=yield Te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:h,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Fg})}else if("phone"in t){const{phone:u,password:h,options:g}=t;a=yield Te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:h,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Fg})}else throw new Jl("You must provide either an email or phone number and a password");const{data:n,error:o}=a;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!n||!n.session||!n.user){const u=new Fr;return this._returnResult({data:{user:null,session:null},error:u})}return n.session&&(yield this._saveSession(n.session),yield this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:o})}catch(a){if(je(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}signInWithOAuth(t){return N(this,null,function*(){var a,n,o,u;return yield this._handleProviderSignIn(t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(u=t.options)===null||u===void 0?void 0:u.skipBrowserRedirect})})}exchangeCodeForSession(t){return N(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>N(this,null,function*(){return this._exchangeCodeForSession(t)}))})}signInWithWeb3(t){return N(this,null,function*(){const{chain:a}=t;switch(a){case"ethereum":return yield this.signInWithEthereum(t);case"solana":return yield this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${a}"`)}})}signInWithEthereum(t){return N(this,null,function*(){var a,n,o,u,h,g,m,p,y,x,v;let S,C;if("message"in t)S=t.message,C=t.signature;else{const{chain:T,wallet:A,statement:I,options:G}=t;let P;if(zt())if(typeof A=="object")P=A;else{const D=window;if("ethereum"in D&&typeof D.ethereum=="object"&&"request"in D.ethereum&&typeof D.ethereum.request=="function")P=D.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!(G!=null&&G.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=A}const te=new URL((a=G==null?void 0:G.url)!==null&&a!==void 0?a:window.location.href),he=yield P.request({method:"eth_requestAccounts"}).then(D=>D).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!he||he.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const X=qp(he[0]);let le=(n=G==null?void 0:G.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!le){const D=yield P.request({method:"eth_chainId"});le=vw(D)}const O={domain:te.host,address:X,statement:I,uri:te.href,version:"1",chainId:le,nonce:(o=G==null?void 0:G.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(h=(u=G==null?void 0:G.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(g=G==null?void 0:G.signInWithEthereum)===null||g===void 0?void 0:g.expirationTime,notBefore:(m=G==null?void 0:G.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(p=G==null?void 0:G.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(y=G==null?void 0:G.signInWithEthereum)===null||y===void 0?void 0:y.resources};S=xw(O),C=yield P.request({method:"personal_sign",params:[bw(S),X]})}try{const{data:T,error:A}=yield Te(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:S,signature:C},!((x=t.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:_a});if(A)throw A;if(!T||!T.session||!T.user){const I=new Fr;return this._returnResult({data:{user:null,session:null},error:I})}return T.session&&(yield this._saveSession(T.session),yield this._notifyAllSubscribers("SIGNED_IN",T.session)),this._returnResult({data:Object.assign({},T),error:A})}catch(T){if(je(T))return this._returnResult({data:{user:null,session:null},error:T});throw T}})}signInWithSolana(t){return N(this,null,function*(){var a,n,o,u,h,g,m,p,y,x,v,S;let C,T;if("message"in t)C=t.message,T=t.signature;else{const{chain:A,wallet:I,statement:G,options:P}=t;let te;if(zt())if(typeof I=="object")te=I;else{const X=window;if("solana"in X&&typeof X.solana=="object"&&("signIn"in X.solana&&typeof X.solana.signIn=="function"||"signMessage"in X.solana&&typeof X.solana.signMessage=="function"))te=X.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof I!="object"||!(P!=null&&P.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");te=I}const he=new URL((a=P==null?void 0:P.url)!==null&&a!==void 0?a:window.location.href);if("signIn"in te&&te.signIn){const X=yield te.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},P==null?void 0:P.signInWithSolana),{version:"1",domain:he.host,uri:he.href}),G?{statement:G}:null));let le;if(Array.isArray(X)&&X[0]&&typeof X[0]=="object")le=X[0];else if(X&&typeof X=="object"&&"signedMessage"in X&&"signature"in X)le=X;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in le&&"signature"in le&&(typeof le.signedMessage=="string"||le.signedMessage instanceof Uint8Array)&&le.signature instanceof Uint8Array)C=typeof le.signedMessage=="string"?le.signedMessage:new TextDecoder().decode(le.signedMessage),T=le.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in te)||typeof te.signMessage!="function"||!("publicKey"in te)||typeof te!="object"||!te.publicKey||!("toBase58"in te.publicKey)||typeof te.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");C=[`${he.host} wants you to sign in with your Solana account:`,te.publicKey.toBase58(),...G?["",G,""]:[""],"Version: 1",`URI: ${he.href}`,`Issued At: ${(o=(n=P==null?void 0:P.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((u=P==null?void 0:P.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${P.signInWithSolana.notBefore}`]:[],...!((h=P==null?void 0:P.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${P.signInWithSolana.expirationTime}`]:[],...!((g=P==null?void 0:P.signInWithSolana)===null||g===void 0)&&g.chainId?[`Chain ID: ${P.signInWithSolana.chainId}`]:[],...!((m=P==null?void 0:P.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${P.signInWithSolana.nonce}`]:[],...!((p=P==null?void 0:P.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${P.signInWithSolana.requestId}`]:[],...!((x=(y=P==null?void 0:P.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||x===void 0)&&x.length?["Resources",...P.signInWithSolana.resources.map(le=>`- ${le}`)]:[]].join(`
`);const X=yield te.signMessage(new TextEncoder().encode(C),"utf8");if(!X||!(X instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");T=X}}try{const{data:A,error:I}=yield Te(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:C,signature:sr(T)},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(S=t.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:_a});if(I)throw I;if(!A||!A.session||!A.user){const G=new Fr;return this._returnResult({data:{user:null,session:null},error:G})}return A.session&&(yield this._saveSession(A.session),yield this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:I})}catch(A){if(je(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}})}_exchangeCodeForSession(t){return N(this,null,function*(){const a=yield Js(this.storage,`${this.storageKey}-code-verifier`),[n,o]=(a!=null?a:"").split("/");try{if(!n&&this.flowType==="pkce")throw new Bx;const{data:u,error:h}=yield Te(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:_a});if(yield $t(this.storage,`${this.storageKey}-code-verifier`),h)throw h;if(!u||!u.session||!u.user){const g=new Fr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:g})}return u.session&&(yield this._saveSession(u.session),yield this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:Object.assign(Object.assign({},u),{redirectType:o!=null?o:null}),error:h})}catch(u){if(yield $t(this.storage,`${this.storageKey}-code-verifier`),je(u))return this._returnResult({data:{user:null,session:null,redirectType:null},error:u});throw u}})}signInWithIdToken(t){return N(this,null,function*(){try{const{options:a,provider:n,token:o,access_token:u,nonce:h}=t,g=yield Te(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:o,access_token:u,nonce:h,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:_a}),{data:m,error:p}=g;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!m||!m.session||!m.user){const y=new Fr;return this._returnResult({data:{user:null,session:null},error:y})}return m.session&&(yield this._saveSession(m.session),yield this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:p})}catch(a){if(je(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}signInWithOtp(t){return N(this,null,function*(){var a,n,o,u,h;try{if("email"in t){const{email:g,options:m}=t;let p=null,y=null;this.flowType==="pkce"&&([p,y]=yield Qr(this.storage,this.storageKey));const{error:x}=yield Te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:g,data:(a=m==null?void 0:m.data)!==null&&a!==void 0?a:{},create_user:(n=m==null?void 0:m.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:y},redirectTo:m==null?void 0:m.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:x})}if("phone"in t){const{phone:g,options:m}=t,{data:p,error:y}=yield Te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:g,data:(o=m==null?void 0:m.data)!==null&&o!==void 0?o:{},create_user:(u=m==null?void 0:m.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},channel:(h=m==null?void 0:m.channel)!==null&&h!==void 0?h:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:y})}throw new Jl("You must provide either an email or phone number.")}catch(g){if(yield $t(this.storage,`${this.storageKey}-code-verifier`),je(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}})}verifyOtp(t){return N(this,null,function*(){var a,n;try{let o,u;"options"in t&&(o=(a=t.options)===null||a===void 0?void 0:a.redirectTo,u=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:h,error:g}=yield Te(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:u}}),redirectTo:o,xform:_a});if(g)throw g;if(!h)throw new Error("An error occurred on token verification.");const m=h.session,p=h.user;return m!=null&&m.access_token&&(yield this._saveSession(m),yield this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(o){if(je(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}signInWithSSO(t){return N(this,null,function*(){var a,n,o,u,h;try{let g=null,m=null;this.flowType==="pkce"&&([g,m]=yield Qr(this.storage,this.storageKey));const p=yield Te(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(a=t.options)===null||a===void 0?void 0:a.redirectTo)!==null&&n!==void 0?n:void 0}),!((o=t==null?void 0:t.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:g,code_challenge_method:m}),headers:this.headers,xform:dw});return!((u=p.data)===null||u===void 0)&&u.url&&zt()&&!(!((h=t.options)===null||h===void 0)&&h.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(g){if(yield $t(this.storage,`${this.storageKey}-code-verifier`),je(g))return this._returnResult({data:null,error:g});throw g}})}reauthenticate(){return N(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>N(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return N(this,null,function*(){try{return yield this._useSession(t=>N(this,null,function*(){const{data:{session:a},error:n}=t;if(n)throw n;if(!a)throw new na;const{error:o}=yield Te(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:a.access_token});return this._returnResult({data:{user:null,session:null},error:o})}))}catch(t){if(je(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}})}resend(t){return N(this,null,function*(){try{const a=`${this.url}/resend`;if("email"in t){const{email:n,type:o,options:u}=t,{error:h}=yield Te(this.fetch,"POST",a,{headers:this.headers,body:{email:n,type:o,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},redirectTo:u==null?void 0:u.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}else if("phone"in t){const{phone:n,type:o,options:u}=t,{data:h,error:g}=yield Te(this.fetch,"POST",a,{headers:this.headers,body:{phone:n,type:o,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:g})}throw new Jl("You must provide either an email or phone number and a type")}catch(a){if(je(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}getSession(){return N(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>N(this,null,function*(){return this._useSession(a=>N(this,null,function*(){return a}))}))})}_acquireLock(t,a){return N(this,null,function*(){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=N(this,null,function*(){return yield n,yield a()});return this.pendingInLock.push(N(this,null,function*(){try{yield o}catch(u){}})),o}return yield this.lock(`lock:${this.storageKey}`,t,()=>N(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=a();for(this.pendingInLock.push(N(this,null,function*(){try{yield n}catch(o){}})),yield n;this.pendingInLock.length;){const o=[...this.pendingInLock];yield Promise.all(o),this.pendingInLock.splice(0,o.length)}return yield n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(t){return N(this,null,function*(){this._debug("#_useSession","begin");try{const a=yield this.__loadSession();return yield t(a)}finally{this._debug("#_useSession","end")}})}__loadSession(){return N(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const a=yield Js(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",a),a!==null&&(this._isValidSession(a)?t=a:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Hu:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const h=yield Js(this.userStorage,this.storageKey+"-user");h!=null&&h.user?t.user=h.user:t.user=Fu()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const h={value:this.suppressGetSessionWarning};t.user=lw(t.user,h),h.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:o,error:u}=yield this._callRefreshToken(t.refresh_token);return u?this._returnResult({data:{session:null},error:u}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}})}getUser(t){return N(this,null,function*(){if(t)return yield this._getUser(t);yield this.initializePromise;const a=yield this._acquireLock(-1,()=>N(this,null,function*(){return yield this._getUser()}));return a.data.user&&(this.suppressGetSessionWarning=!0),a})}_getUser(t){return N(this,null,function*(){try{return t?yield Te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ds}):yield this._useSession(a=>N(this,null,function*(){var n,o,u;const{data:h,error:g}=a;if(g)throw g;return!(!((n=h.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new na}:yield Te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(o=h.session)===null||o===void 0?void 0:o.access_token)!==null&&u!==void 0?u:void 0,xform:Ds})}))}catch(a){if(je(a))return $x(a)&&(yield this._removeSession(),yield $t(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:a});throw a}})}updateUser(n){return N(this,arguments,function*(t,a={}){return yield this.initializePromise,yield this._acquireLock(-1,()=>N(this,null,function*(){return yield this._updateUser(t,a)}))})}_updateUser(n){return N(this,arguments,function*(t,a={}){try{return yield this._useSession(o=>N(this,null,function*(){const{data:u,error:h}=o;if(h)throw h;if(!u.session)throw new na;const g=u.session;let m=null,p=null;this.flowType==="pkce"&&t.email!=null&&([m,p]=yield Qr(this.storage,this.storageKey));const{data:y,error:x}=yield Te(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:a==null?void 0:a.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:m,code_challenge_method:p}),jwt:g.access_token,xform:Ds});if(x)throw x;return g.user=y.user,yield this._saveSession(g),yield this._notifyAllSubscribers("USER_UPDATED",g),this._returnResult({data:{user:g.user},error:null})}))}catch(o){if(yield $t(this.storage,`${this.storageKey}-code-verifier`),je(o))return this._returnResult({data:{user:null},error:o});throw o}})}setSession(t){return N(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>N(this,null,function*(){return yield this._setSession(t)}))})}_setSession(t){return N(this,null,function*(){try{if(!t.access_token||!t.refresh_token)throw new na;const a=Date.now()/1e3;let n=a,o=!0,u=null;const{payload:h}=Vu(t.access_token);if(h.exp&&(n=h.exp,o=n<=a),o){const{data:g,error:m}=yield this._callRefreshToken(t.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!g)return{data:{user:null,session:null},error:null};u=g}else{const{data:g,error:m}=yield this._getUser(t.access_token);if(m)throw m;u={access_token:t.access_token,refresh_token:t.refresh_token,user:g.user,token_type:"bearer",expires_in:n-a,expires_at:n},yield this._saveSession(u),yield this._notifyAllSubscribers("SIGNED_IN",u)}return this._returnResult({data:{user:u.user,session:u},error:null})}catch(a){if(je(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}})}refreshSession(t){return N(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>N(this,null,function*(){return yield this._refreshSession(t)}))})}_refreshSession(t){return N(this,null,function*(){try{return yield this._useSession(a=>N(this,null,function*(){var n;if(!t){const{data:h,error:g}=a;if(g)throw g;t=(n=h.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new na;const{data:o,error:u}=yield this._callRefreshToken(t.refresh_token);return u?this._returnResult({data:{user:null,session:null},error:u}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})}))}catch(a){if(je(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}_getSessionFromURL(t,a){return N(this,null,function*(){try{if(!zt())throw new Zl("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Zl(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(a){case"implicit":if(this.flowType==="pkce")throw new zg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Zl("Not a valid implicit grant flow url.");break;default:}if(a==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new zg("No code detected.");const{data:G,error:P}=yield this._exchangeCodeForSession(t.code);if(P)throw P;const te=new URL(window.location.href);return te.searchParams.delete("code"),window.history.replaceState(window.history.state,"",te.toString()),{data:{session:G.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:o,access_token:u,refresh_token:h,expires_in:g,expires_at:m,token_type:p}=t;if(!u||!g||!h||!p)throw new Zl("No session defined in URL");const y=Math.round(Date.now()/1e3),x=parseInt(g);let v=y+x;m&&(v=parseInt(m));const S=v-y;S*1e3<=en&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${S}s, should have been closer to ${x}s`);const C=v-x;y-C>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",C,v,y):y-C<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",C,v,y);const{data:T,error:A}=yield this._getUser(u);if(A)throw A;const I={provider_token:n,provider_refresh_token:o,access_token:u,expires_in:x,expires_at:v,refresh_token:h,token_type:p,user:T.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:I,redirectType:t.type},error:null})}catch(n){if(je(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}})}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}_isPKCECallback(t){return N(this,null,function*(){const a=yield Js(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&a)})}signOut(){return N(this,arguments,function*(t={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(-1,()=>N(this,null,function*(){return yield this._signOut(t)}))})}_signOut(){return N(this,arguments,function*({scope:t}={scope:"global"}){return yield this._useSession(a=>N(this,null,function*(){var n;const{data:o,error:u}=a;if(u)return this._returnResult({error:u});const h=(n=o.session)===null||n===void 0?void 0:n.access_token;if(h){const{error:g}=yield this.admin.signOut(h,t);if(g&&!(qx(g)&&(g.status===404||g.status===401||g.status===403)))return this._returnResult({error:g})}return t!=="others"&&(yield this._removeSession(),yield $t(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})}))})}onAuthStateChange(t){const a=Qx(),n={id:a,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",a),this.stateChangeEmitters.delete(a)}};return this._debug("#onAuthStateChange()","registered callback with id",a),this.stateChangeEmitters.set(a,n),N(this,null,function*(){yield this.initializePromise,yield this._acquireLock(-1,()=>N(this,null,function*(){this._emitInitialSession(a)}))}),{data:{subscription:n}}}_emitInitialSession(t){return N(this,null,function*(){return yield this._useSession(a=>N(this,null,function*(){var n,o;try{const{data:{session:u},error:h}=a;if(h)throw h;yield(n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",u),this._debug("INITIAL_SESSION","callback id",t,"session",u)}catch(u){yield(o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",t,"error",u),console.error(u)}}))})}resetPasswordForEmail(n){return N(this,arguments,function*(t,a={}){let o=null,u=null;this.flowType==="pkce"&&([o,u]=yield Qr(this.storage,this.storageKey,!0));try{return yield Te(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:o,code_challenge_method:u,gotrue_meta_security:{captcha_token:a.captchaToken}},headers:this.headers,redirectTo:a.redirectTo})}catch(h){if(yield $t(this.storage,`${this.storageKey}-code-verifier`),je(h))return this._returnResult({data:null,error:h});throw h}})}getUserIdentities(){return N(this,null,function*(){var t;try{const{data:a,error:n}=yield this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=a.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(a){if(je(a))return this._returnResult({data:null,error:a});throw a}})}linkIdentity(t){return N(this,null,function*(){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)})}linkIdentityOAuth(t){return N(this,null,function*(){var a;try{const{data:n,error:o}=yield this._useSession(u=>N(this,null,function*(){var h,g,m,p,y;const{data:x,error:v}=u;if(v)throw v;const S=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(h=t.options)===null||h===void 0?void 0:h.redirectTo,scopes:(g=t.options)===null||g===void 0?void 0:g.scopes,queryParams:(m=t.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return yield Te(this.fetch,"GET",S,{headers:this.headers,jwt:(y=(p=x.session)===null||p===void 0?void 0:p.access_token)!==null&&y!==void 0?y:void 0})}));if(o)throw o;return zt()&&!(!((a=t.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(je(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}})}linkIdentityIdToken(t){return N(this,null,function*(){return yield this._useSession(a=>N(this,null,function*(){var n;try{const{error:o,data:{session:u}}=a;if(o)throw o;const{options:h,provider:g,token:m,access_token:p,nonce:y}=t,x=yield Te(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=u==null?void 0:u.access_token)!==null&&n!==void 0?n:void 0,body:{provider:g,id_token:m,access_token:p,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:_a}),{data:v,error:S}=x;return S?this._returnResult({data:{user:null,session:null},error:S}):!v||!v.session||!v.user?this._returnResult({data:{user:null,session:null},error:new Fr}):(v.session&&(yield this._saveSession(v.session),yield this._notifyAllSubscribers("USER_UPDATED",v.session)),this._returnResult({data:v,error:S}))}catch(o){if(yield $t(this.storage,`${this.storageKey}-code-verifier`),je(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}))})}unlinkIdentity(t){return N(this,null,function*(){try{return yield this._useSession(a=>N(this,null,function*(){var n,o;const{data:u,error:h}=a;if(h)throw h;return yield Te(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(o=(n=u.session)===null||n===void 0?void 0:n.access_token)!==null&&o!==void 0?o:void 0})}))}catch(a){if(je(a))return this._returnResult({data:null,error:a});throw a}})}_refreshAccessToken(t){return N(this,null,function*(){const a=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{const n=Date.now();return yield Xx(o=>N(this,null,function*(){return o>0&&(yield Wx(200*Math.pow(2,o-1))),this._debug(a,"refreshing attempt",o),yield Te(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:_a})}),(o,u)=>{const h=200*Math.pow(2,o);return u&&Yu(u)&&Date.now()+h-n<en})}catch(n){if(this._debug(a,"error",n),je(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(a,"end")}})}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}_handleProviderSignIn(t,a){return N(this,null,function*(){const n=yield this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",a,"url",n),zt()&&!a.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}})}_recoverAndRefresh(){return N(this,null,function*(){var t,a;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const o=yield Js(this.storage,this.storageKey);if(o&&this.userStorage){let h=yield Js(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:o.user},yield tn(this.userStorage,this.storageKey+"-user",h)),o.user=(t=h==null?void 0:h.user)!==null&&t!==void 0?t:Fu()}else if(o&&!o.user&&!o.user){const h=yield Js(this.storage,this.storageKey+"-user");h&&(h!=null&&h.user)?(o.user=h.user,yield $t(this.storage,this.storageKey+"-user"),yield tn(this.storage,this.storageKey,o)):o.user=Fu()}if(this._debug(n,"session from storage",o),!this._isValidSession(o)){this._debug(n,"session is not valid"),o!==null&&(yield this._removeSession());return}const u=((a=o.expires_at)!==null&&a!==void 0?a:1/0)*1e3-Date.now()<Hu;if(this._debug(n,`session has${u?"":" not"} expired with margin of ${Hu}s`),u){if(this.autoRefreshToken&&o.refresh_token){const{error:h}=yield this._callRefreshToken(o.refresh_token);h&&(console.error(h),Yu(h)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",h),yield this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:g}=yield this._getUser(o.access_token);!g&&(h!=null&&h.user)?(o.user=h.user,yield this._saveSession(o),yield this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(n,"error getting user data, skipping SIGNED_IN notification",h)}else yield this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(n,"error",o),console.error(o);return}finally{this._debug(n,"end")}})}_callRefreshToken(t){return N(this,null,function*(){var a,n;if(!t)throw new na;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new bo;const{data:u,error:h}=yield this._refreshAccessToken(t);if(h)throw h;if(!u.session)throw new na;yield this._saveSession(u.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const g={data:u.session,error:null};return this.refreshingDeferred.resolve(g),g}catch(u){if(this._debug(o,"error",u),je(u)){const h={data:null,error:u};return Yu(u)||(yield this._removeSession()),(a=this.refreshingDeferred)===null||a===void 0||a.resolve(h),h}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(u),u}finally{this.refreshingDeferred=null,this._debug(o,"end")}})}_notifyAllSubscribers(t,a,n=!0){return N(this,null,function*(){const o=`#_notifyAllSubscribers(${t})`;this._debug(o,"begin",a,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:a});const u=[],h=Array.from(this.stateChangeEmitters.values()).map(g=>N(this,null,function*(){try{yield g.callback(t,a)}catch(m){u.push(m)}}));if(yield Promise.all(h),u.length>0){for(let g=0;g<u.length;g+=1)console.error(u[g]);throw u[0]}}finally{this._debug(o,"end")}})}_saveSession(t){return N(this,null,function*(){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,yield $t(this.storage,`${this.storageKey}-code-verifier`);const a=Object.assign({},t),n=a.user&&a.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&a.user&&(yield tn(this.userStorage,this.storageKey+"-user",{user:a.user}));const o=Object.assign({},a);delete o.user;const u=Yg(o);yield tn(this.storage,this.storageKey,u)}else{const o=Yg(a);yield tn(this.storage,this.storageKey,o)}})}_removeSession(){return N(this,null,function*(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,yield $t(this.storage,this.storageKey),yield $t(this.storage,this.storageKey+"-code-verifier"),yield $t(this.storage,this.storageKey+"-user"),this.userStorage&&(yield $t(this.userStorage,this.storageKey+"-user")),yield this._notifyAllSubscribers("SIGNED_OUT",null)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&zt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(a){console.error("removing visibilitychange callback failed",a)}}_startAutoRefresh(){return N(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),en);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno!="undefined"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(()=>N(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0)})}_stopAutoRefresh(){return N(this,null,function*(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)})}startAutoRefresh(){return N(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return N(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return N(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>N(this,null,function*(){try{const t=Date.now();try{return yield this._useSession(a=>N(this,null,function*(){const{data:{session:n}}=a;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((n.expires_at*1e3-t)/en);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${en}ms, refresh threshold is ${ld} ticks`),o<=ld&&(yield this._callRefreshToken(n.refresh_token))}))}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(t){if(t.isAcquireTimeout||t instanceof Lp)this._debug("auto refresh token tick lock not available");else throw t}})}_handleVisibilityChange(){return N(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!zt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>N(this,null,function*(){return yield this._onVisibilityChanged(!1)}),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}})}_onVisibilityChanged(t){return N(this,null,function*(){const a=`#_onVisibilityChanged(${t})`;this._debug(a,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(yield this.initializePromise,yield this._acquireLock(-1,()=>N(this,null,function*(){if(document.visibilityState!=="visible"){this._debug(a,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}yield this._recoverAndRefresh()})))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(t,a,n){return N(this,null,function*(){const o=[`provider=${encodeURIComponent(a)}`];if(n!=null&&n.redirectTo&&o.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&o.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[u,h]=yield Qr(this.storage,this.storageKey),g=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(h)}`});o.push(g.toString())}if(n!=null&&n.queryParams){const u=new URLSearchParams(n.queryParams);o.push(u.toString())}return n!=null&&n.skipBrowserRedirect&&o.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${o.join("&")}`})}_unenroll(t){return N(this,null,function*(){try{return yield this._useSession(a=>N(this,null,function*(){var n;const{data:o,error:u}=a;return u?this._returnResult({data:null,error:u}):yield Te(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token})}))}catch(a){if(je(a))return this._returnResult({data:null,error:a});throw a}})}_enroll(t){return N(this,null,function*(){try{return yield this._useSession(a=>N(this,null,function*(){var n,o;const{data:u,error:h}=a;if(h)return this._returnResult({data:null,error:h});const g=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:m,error:p}=yield Te(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:(n=u==null?void 0:u.session)===null||n===void 0?void 0:n.access_token});return p?this._returnResult({data:null,error:p}):(t.factorType==="totp"&&m.type==="totp"&&(!((o=m==null?void 0:m.totp)===null||o===void 0)&&o.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))}))}catch(a){if(je(a))return this._returnResult({data:null,error:a});throw a}})}_verify(t){return N(this,null,function*(){return this._acquireLock(-1,()=>N(this,null,function*(){try{return yield this._useSession(a=>N(this,null,function*(){var n;const{data:o,error:u}=a;if(u)return this._returnResult({data:null,error:u});const h=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Ew(t.webauthn.credential_response):Tw(t.webauthn.credential_response)})}:{code:t.code}),{data:g,error:m}=yield Te(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:h,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return m?this._returnResult({data:null,error:m}):(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+g.expires_in},g)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",g),this._returnResult({data:g,error:m}))}))}catch(a){if(je(a))return this._returnResult({data:null,error:a});throw a}}))})}_challenge(t){return N(this,null,function*(){return this._acquireLock(-1,()=>N(this,null,function*(){try{return yield this._useSession(a=>N(this,null,function*(){var n;const{data:o,error:u}=a;if(u)return this._returnResult({data:null,error:u});const h=yield Te(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});if(h.error)return h;const{data:g}=h;if(g.type!=="webauthn")return{data:g,error:null};switch(g.webauthn.type){case"create":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:Nw(g.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:Cw(g.webauthn.credential_options.publicKey)})})}),error:null}}}))}catch(a){if(je(a))return this._returnResult({data:null,error:a});throw a}}))})}_challengeAndVerify(t){return N(this,null,function*(){const{data:a,error:n}=yield this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):yield this._verify({factorId:t.factorId,challengeId:a.id,code:t.code})})}_listFactors(){return N(this,null,function*(){var t;const{data:{user:a},error:n}=yield this.getUser();if(n)return{data:null,error:n};const o={all:[],phone:[],totp:[],webauthn:[]};for(const u of(t=a==null?void 0:a.factors)!==null&&t!==void 0?t:[])o.all.push(u),u.status==="verified"&&o[u.factor_type].push(u);return{data:o,error:null}})}_getAuthenticatorAssuranceLevel(){return N(this,null,function*(){var t,a;const{data:{session:n},error:o}=yield this.getSession();if(o)return this._returnResult({data:null,error:o});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=Vu(n.access_token);let h=null;u.aal&&(h=u.aal);let g=h;((a=(t=n.user.factors)===null||t===void 0?void 0:t.filter(y=>y.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(g="aal2");const p=u.amr||[];return{data:{currentLevel:h,nextLevel:g,currentAuthenticationMethods:p},error:null}})}_getAuthorizationDetails(t){return N(this,null,function*(){try{return yield this._useSession(a=>N(this,null,function*(){const{data:{session:n},error:o}=a;return o?this._returnResult({data:null,error:o}):n?yield Te(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new na})}))}catch(a){if(je(a))return this._returnResult({data:null,error:a});throw a}})}_approveAuthorization(t,a){return N(this,null,function*(){try{return yield this._useSession(n=>N(this,null,function*(){const{data:{session:o},error:u}=n;if(u)return this._returnResult({data:null,error:u});if(!o)return this._returnResult({data:null,error:new na});const h=yield Te(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:g=>({data:g,error:null})});return h.data&&h.data.redirect_url&&zt()&&!(a!=null&&a.skipBrowserRedirect)&&window.location.assign(h.data.redirect_url),h}))}catch(n){if(je(n))return this._returnResult({data:null,error:n});throw n}})}_denyAuthorization(t,a){return N(this,null,function*(){try{return yield this._useSession(n=>N(this,null,function*(){const{data:{session:o},error:u}=n;if(u)return this._returnResult({data:null,error:u});if(!o)return this._returnResult({data:null,error:new na});const h=yield Te(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:g=>({data:g,error:null})});return h.data&&h.data.redirect_url&&zt()&&!(a!=null&&a.skipBrowserRedirect)&&window.location.assign(h.data.redirect_url),h}))}catch(n){if(je(n))return this._returnResult({data:null,error:n});throw n}})}_listOAuthGrants(){return N(this,null,function*(){try{return yield this._useSession(t=>N(this,null,function*(){const{data:{session:a},error:n}=t;return n?this._returnResult({data:null,error:n}):a?yield Te(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:a.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new na})}))}catch(t){if(je(t))return this._returnResult({data:null,error:t});throw t}})}_revokeOAuthGrant(t){return N(this,null,function*(){try{return yield this._useSession(a=>N(this,null,function*(){const{data:{session:n},error:o}=a;return o?this._returnResult({data:null,error:o}):n?(yield Te(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new na})}))}catch(a){if(je(a))return this._returnResult({data:null,error:a});throw a}})}fetchJwk(n){return N(this,arguments,function*(t,a={keys:[]}){let o=a.keys.find(m=>m.kid===t);if(o)return o;const u=Date.now();if(o=this.jwks.keys.find(m=>m.kid===t),o&&this.jwks_cached_at+Ux>u)return o;const{data:h,error:g}=yield Te(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(g)throw g;return!h.keys||h.keys.length===0||(this.jwks=h,this.jwks_cached_at=u,o=h.keys.find(m=>m.kid===t),!o)?null:o})}getClaims(n){return N(this,arguments,function*(t,a={}){try{let o=t;if(!o){const{data:C,error:T}=yield this.getSession();if(T||!C.session)return this._returnResult({data:null,error:T});o=C.session.access_token}const{header:u,payload:h,signature:g,raw:{header:m,payload:p}}=Vu(o);a!=null&&a.allowExpired||rw(h.exp);const y=!u.alg||u.alg.startsWith("HS")||!u.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:yield this.fetchJwk(u.kid,a!=null&&a.keys?{keys:a.keys}:a==null?void 0:a.jwks);if(!y){const{error:C}=yield this.getUser(o);if(C)throw C;return{data:{claims:h,header:u,signature:g},error:null}}const x=nw(u.alg),v=yield crypto.subtle.importKey("jwk",y,x,!0,["verify"]);if(!(yield crypto.subtle.verify(x,v,g,Vx(`${m}.${p}`))))throw new ud("Invalid JWT signature");return{data:{claims:h,header:u,signature:g},error:null}}catch(o){if(je(o))return this._returnResult({data:null,error:o});throw o}})}}Di.nextInstanceID={};const qw=Di,$w="2.89.0";let yi="";typeof Deno!="undefined"?yi="deno":typeof document!="undefined"?yi="web":typeof navigator!="undefined"&&navigator.product==="ReactNative"?yi="react-native":yi="node";const zw={"X-Client-Info":`supabase-js-${yi}/${$w}`},Bw={headers:zw},Iw={schema:"public"},Pw={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Hw={};function Oi(r){"@babel/helpers - typeof";return Oi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oi(r)}function Yw(r,t){if(Oi(r)!="object"||!r)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var n=a.call(r,t);if(Oi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function Vw(r){var t=Yw(r,"string");return Oi(t)=="symbol"?t:t+""}function Fw(r,t,a){return(t=Vw(t))in r?Object.defineProperty(r,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[t]=a,r}function Xg(r,t){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),a.push.apply(a,n)}return a}function ft(r){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Xg(Object(a),!0).forEach(function(n){Fw(r,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):Xg(Object(a)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(a,n))})}return r}const Qw=r=>r?(...t)=>r(...t):(...t)=>fetch(...t),Gw=()=>Headers,Kw=(r,t,a)=>{const n=Qw(a),o=Gw();return(u,h)=>N(null,null,function*(){var g;const m=(g=yield t())!==null&&g!==void 0?g:r;let p=new o(h==null?void 0:h.headers);return p.has("apikey")||p.set("apikey",r),p.has("Authorization")||p.set("Authorization",`Bearer ${m}`),n(u,ft(ft({},h),{},{headers:p}))})};function Ww(r){return r.endsWith("/")?r:r+"/"}function Xw(r,t){var a,n;const{db:o,auth:u,realtime:h,global:g}=r,{db:m,auth:p,realtime:y,global:x}=t,v={db:ft(ft({},m),o),auth:ft(ft({},p),u),realtime:ft(ft({},y),h),storage:{},global:ft(ft(ft({},x),g),{},{headers:ft(ft({},(a=x==null?void 0:x.headers)!==null&&a!==void 0?a:{}),(n=g==null?void 0:g.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>N(null,null,function*(){return""})};return r.accessToken?v.accessToken=r.accessToken:delete v.accessToken,v}function Jw(r){const t=r==null?void 0:r.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Ww(t))}catch(a){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Zw=class extends qw{constructor(r){super(r)}},ej=class{constructor(r,t,a){var n,o;this.supabaseUrl=r,this.supabaseKey=t;const u=Jw(r);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const h=`sb-${u.hostname.split(".")[0]}-auth-token`,g={db:Iw,realtime:Hw,auth:ft(ft({},Pw),{},{storageKey:h}),global:Bw},m=Xw(a!=null?a:{},g);if(this.storageKey=(n=m.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(o=m.global.headers)!==null&&o!==void 0?o:{},m.accessToken)this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(y,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}});else{var p;this.auth=this._initSupabaseAuthClient((p=m.auth)!==null&&p!==void 0?p:{},this.headers,m.global.fetch)}this.fetch=Kw(t,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(ft({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.accessToken&&this.accessToken().then(y=>this.realtime.setAuth(y)).catch(y=>console.warn("Failed to set initial Realtime auth token:",y)),this.rest=new Rb(new URL("rest/v1",u).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new Ox(this.storageUrl.href,this.headers,this.fetch,a==null?void 0:a.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new Tb(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(r){return this.rest.from(r)}schema(r){return this.rest.schema(r)}rpc(r,t={},a={head:!1,get:!1,count:void 0}){return this.rest.rpc(r,t,a)}channel(r,t={config:{}}){return this.realtime.channel(r,t)}getChannels(){return this.realtime.getChannels()}removeChannel(r){return this.realtime.removeChannel(r)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return N(this,null,function*(){var r=this,t,a;if(r.accessToken)return yield r.accessToken();const{data:n}=yield r.auth.getSession();return(t=(a=n.session)===null||a===void 0?void 0:a.access_token)!==null&&t!==void 0?t:r.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:r,persistSession:t,detectSessionInUrl:a,storage:n,userStorage:o,storageKey:u,flowType:h,lock:g,debug:m,throwOnError:p},y,x){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Zw({url:this.authUrl.href,headers:ft(ft({},v),y),storageKey:u,autoRefreshToken:r,persistSession:t,detectSessionInUrl:a,storage:n,userStorage:o,flowType:h,lock:g,debug:m,throwOnError:p,fetch:x,hasCustomAuthorizationHeader:Object.keys(this.headers).some(S=>S.toLowerCase()==="authorization")})}_initRealtimeClient(r){return new Wb(this.realtimeUrl.href,ft(ft({},r),{},{params:ft(ft({},{apikey:this.supabaseKey}),r==null?void 0:r.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,t)=>{this._handleTokenChanged(r,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(r,t,a){(r==="TOKEN_REFRESHED"||r==="SIGNED_IN")&&this.changedAccessToken!==a?(this.changedAccessToken=a,this.realtime.setAuth(a)):r==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const tj=(r,t,a)=>new ej(r,t,a);function aj(){if(typeof window!="undefined"||typeof process=="undefined")return!1;const r=process.version;if(r==null)return!1;const t=r.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}aj()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const sj="https://tirzmotuypesxopnnitt.supabase.co",rj="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRpcnptb3R1eXBlc3hvcG5uaXR0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYzOTAyMjEsImV4cCI6MjA3MTk2NjIyMX0.YQaXWOWEFoiAJU412gA4MOXfm10E6XPJJb75FMh_H0k",xa=tj(sj,rj,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storage:window.localStorage,storageKey:"cc-flow-auth"}});class nj{constructor(){ge(this,"config");ge(this,"cache",new Map);ge(this,"CACHE_DURATION",300*1e3);this.config={url:"https://tirzmotuypesxopnnitt.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRpcnptb3R1eXBlc3hvcG5uaXR0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYzOTAyMjEsImV4cCI6MjA3MTk2NjIyMX0.YQaXWOWEFoiAJU412gA4MOXfm10E6XPJJb75FMh_H0k"}}getCacheKey(t,a={}){return`${t}_${JSON.stringify(a)}`}getCachedData(t){const a=this.cache.get(t);return a&&Date.now()-a.timestamp<this.CACHE_DURATION?a.data:null}setCachedData(t,a){this.cache.set(t,{data:a,timestamp:Date.now()})}getCutProductivityByResponsible(t,a){return N(this,null,function*(){const n=this.getCacheKey("cut_productivity_responsible",{startDate:t,endDate:a}),o=this.getCachedData(n);if(o)return o;const u=yield fetch(`${this.config.url}/rest/v1/rpc/get_cut_productivity_by_responsible`,{method:"POST",headers:{apikey:this.config.anonKey,Authorization:`Bearer ${this.config.anonKey}`,"Content-Type":"application/json"},body:JSON.stringify({start_date:t,end_date:a})});if(!u.ok)throw new Error(`Supabase RPC error: ${u.status} ${u.statusText}`);const h=yield u.json();return this.setCachedData(n,h),h})}getCutProductivityByCNC(t,a){return N(this,null,function*(){const n=this.getCacheKey("cut_productivity_cnc",{startDate:t,endDate:a}),o=this.getCachedData(n);if(o)return o;const u=yield fetch(`${this.config.url}/rest/v1/rpc/get_cut_productivity_by_cnc`,{method:"POST",headers:{apikey:this.config.anonKey,Authorization:`Bearer ${this.config.anonKey}`,"Content-Type":"application/json"},body:JSON.stringify({start_date:t,end_date:a})});if(!u.ok)throw new Error(`Supabase RPC error: ${u.status} ${u.statusText}`);const h=yield u.json();return this.setCachedData(n,h),h})}getManufacturingProductivityByResponsible(t,a){return N(this,null,function*(){const n=this.getCacheKey("manufacturing_productivity_responsible",{startDate:t,endDate:a}),o=this.getCachedData(n);if(o)return o;const u=yield fetch(`${this.config.url}/rest/v1/rpc/get_manufacturing_productivity_by_responsible`,{method:"POST",headers:{apikey:this.config.anonKey,Authorization:`Bearer ${this.config.anonKey}`,"Content-Type":"application/json"},body:JSON.stringify({start_date:t,end_date:a})});if(!u.ok)throw new Error(`Supabase RPC error: ${u.status} ${u.statusText}`);const h=yield u.json();return this.setCachedData(n,h),h})}getMainMetrics(t,a){return N(this,null,function*(){const n=this.getCacheKey("main_metrics",{startDate:t,endDate:a}),o=this.getCachedData(n);if(o)return o;const u=yield fetch(`${this.config.url}/rest/v1/rpc/get_main_metrics_factory_analytics`,{method:"POST",headers:{apikey:this.config.anonKey,Authorization:`Bearer ${this.config.anonKey}`,"Content-Type":"application/json"},body:JSON.stringify({start_date:t,end_date:a})});if(!u.ok)throw new Error(`Supabase RPC error: ${u.status} ${u.statusText}`);const h=yield u.json(),g=Array.isArray(h)&&h.length>0?h[0]:h;return this.setCachedData(n,g),g})}getProjectsWithMetrics(o,u){return N(this,arguments,function*(t,a,n={}){const h=this.getCacheKey("projects_with_metrics",He({startDate:t,endDate:a},n)),g=this.getCachedData(h);if(g)return g;const m=yield fetch(`${this.config.url}/rest/v1/rpc/get_projects_with_metrics`,{method:"POST",headers:{apikey:this.config.anonKey,Authorization:`Bearer ${this.config.anonKey}`,"Content-Type":"application/json"},body:JSON.stringify({start_date:t,end_date:a,pm_filter:n.pm||null,status_filter:n.status||null})});if(!m.ok)throw new Error(`Supabase RPC error: ${m.status} ${m.statusText}`);const p=yield m.json();return this.setCachedData(h,p),p})}getOrdersByProject(t,a,n){return N(this,null,function*(){const o=this.getCacheKey("orders_by_project",{projectName:t,startDate:a,endDate:n}),u=this.getCachedData(o);if(u)return u;const h=yield fetch(`${this.config.url}/rest/v1/rpc/get_orders_by_project`,{method:"POST",headers:{apikey:this.config.anonKey,Authorization:`Bearer ${this.config.anonKey}`,"Content-Type":"application/json"},body:JSON.stringify({project_name:t,start_date:a,end_date:n})});if(!h.ok)throw new Error(`Supabase RPC error: ${h.status} ${h.statusText}`);const g=yield h.json();return this.setCachedData(o,g),g})}getAllProjects(){return N(this,null,function*(){const t="all-projects-supabase",a="all-projects",n=this.getCachedData(t);if(n)return console.log(" Using cached projects data from Supabase"),n;try{console.log(" Fetching projects from Supabase...");const{data:o,error:u}=yield xa.from("Projects").select("*").order("Name").not("Number","is",null);if(u)throw u;const h=(o||[]).map(m=>{var p;return{_RowNumber:void 0,Name:m.Name||"",Number:((p=m.Number)==null?void 0:p.toString())||"",Status:m.Status||"","Project ID":m["Project ID"]||"","Start Date":m["Start Date"]||"","Expected Completion Date":m["Expected Completion Date"]||"","Finalization Date":m["Finalization Date"]||"",PM:m.PM||"","CC/Subcontractor":m["CC/Subcontractor"]||"","Site Supervisor":m["Site Supervisor"]||"","EBA/Non-EBA":m["EBA/Non-EBA"]||"",Contact:m.Contact||"","Expected Square Meters":m["Expected Square Meters"]?Number(m["Expected Square Meters"]):void 0,"Deliveries Allowed":m["Deliveries Allowed"]?Number(m["Deliveries Allowed"]):void 0,"Allowed SQM to buy":m["Allowed SQM to buy"]?Number(m["Allowed SQM to buy"]):void 0,"Real Cut Square Meters":void 0,"Real Cut Linear Meters":void 0,"Total Orders":void 0,"Total Materials":void 0,"Total Sheets":void 0,"Total Allowances":void 0,"Total Deliveries":void 0,"Total Inventory":void 0,"Related Items Requests":void 0,"Related Delivery_Dockets":void 0,"Related People Allowances":void 0}});this.setCachedData(t,h);const g=this.getCachedData(a);return(!g||g.length===0)&&this.setCachedData(a,h),console.log(` Cached ${h.length} projects from Supabase`),h}catch(o){return console.error("Error fetching projects from Supabase:",o),[]}})}getOrdersCutByProject(t){return N(this,null,function*(){const a=`orders-cut-${t}`,n=this.getCachedData(a);if(n)return console.log(` Using cached orders for project: ${t}`),n;try{console.log(` Fetching orders from Supabase for project: ${t}...`);const{data:o,error:u}=yield xa.from("Orders cut").select('"Order ID", "Creation Date", "Status", "Priority", "Responsable", "Colour"').eq("Project",t).order('"Creation Date"',{ascending:!1});if(u)throw u;const h=(o||[]).map(g=>({"Order ID":g["Order ID"]||"",Status:g.Status||"",Priority:g.Priority||"",Colour:g.Colour||"","Creation Date":g["Creation Date"]||"",Responsable:g.Responsable||""}));return this.setCachedData(a,h),console.log(` Cached ${h.length} orders for project: ${t} (sorted by Creation Date)`),h}catch(o){return console.error(`Error fetching orders from Supabase for project ${t}:`,o),[]}})}checkOrderIdExists(t){return N(this,null,function*(){if(!t||!t.trim())return!1;try{const{data:a,error:n}=yield xa.from("Orders cut").select('"Order ID"').eq("Order ID",t.trim()).limit(1).maybeSingle();if(n)throw n;return a!==null}catch(a){return console.error(`Error checking Order ID existence: ${t}`,a),!1}})}checkExistingPanels(t){return N(this,null,function*(){if(t.length===0)return[];const a=this.getCacheKey("existing-panels",{names:t.sort().join(",")}),n=this.getCachedData(a);if(n)return n;try{const o=yield xa.from("Panels").select("Name, Order, Status").in("Name",t);if(o.error)throw new Error(`Supabase error: ${o.error.message}`);const u=o.data||[];return this.setCachedData(a,u),u}catch(o){throw console.error("Error checking existing panels:",o),o}})}createOrderCut(t,a){return N(this,null,function*(){try{console.log(` Creating order cut in Supabase: ${t["Order ID"]}`);const{error:n}=yield xa.from("Orders cut").insert([t]);if(n)throw new Error(`Supabase error creating order: ${n.message}`);console.log(" Order cut created in Supabase"),a.length>0?yield this.createPanels(a):console.warn(" No panels to create for this order")}catch(n){throw console.error("Error creating order cut in Supabase:",n),n}})}createPanels(t){return N(this,null,function*(){if(t.length===0){console.warn(" No panels to create");return}try{for(let n=0;n<t.length;n+=1e3){const o=t.slice(n,n+1e3),{error:u}=yield xa.from("Panels").insert(o);if(u)throw new Error(`Supabase error inserting panels batch ${Math.floor(n/1e3)+1}: ${u.message}`)}console.log(` ${t.length} panels created in Supabase`)}catch(a){throw console.error("Error creating panels in Supabase:",a),a}})}clearCache(){this.cache.clear()}}const Xt=new nj;class Os{constructor(){ge(this,"config");ge(this,"cache",new Map);ge(this,"CACHE_DURATION",300*1e3);ge(this,"PROJECTS_CACHE_DURATION",900*1e3);this.config={appId:"efcdb2a0-181f-4e43-bc65-6887dc279032",apiKey:"V2-cTfzb-hYt3f-e0d9Z-5PD1w-jyqcd-y21HR-ioeLZ-nV3h4",baseUrl:"https://www.appsheet.com/api/v2"},(!this.config.appId||!this.config.apiKey)&&console.warn("AppSheet credentials not configured. Please check your environment variables.")}makeRequest(t,a,n,o){return N(this,null,function*(){const u=`${this.config.baseUrl}/apps/${this.config.appId}/tables/${encodeURIComponent(t)}/Action`;let h=o||{},g=n||[];if(n&&n.length>0&&a==="Find"){const p=[];if(n.forEach(y=>{Object.entries(y).forEach(([x,v])=>{if(v!=null){const S=typeof v=="string"?JSON.stringify(v):v;p.push(`[${x}]=${S}`)}})}),p.length>0){const y=p.length===1?`Filter(${t}, ${p[0]})`:`Filter(${t}, AND(${p.join(", ")}))`;h=lt(He({},h),{Selector:y}),g=[]}}let m;a!=="Find"&&a!=="Edit"&&a!=="Add"&&a!=="Delete"?m={Action:a,Properties:He({Locale:"en-US",Location:"-28.0167, 153.4000",Timezone:"E. Australia Standard Time"},h),Rows:g}:m={Action:a,Properties:He({Locale:"en-AU",Location:"-28.0167, 153.4000",Timezone:"E. Australia Standard Time"},h),Rows:g};try{const p=yield fetch(u,{method:"POST",headers:{"Content-Type":"application/json",ApplicationAccessKey:this.config.apiKey},body:JSON.stringify(m)});if(!p.ok){const x=yield p.text();throw console.error(`HTTP error! status: ${p.status}, response: ${x}`),new Error(`HTTP error! status: ${p.status}`)}const y=yield p.text();if(!y||y.trim()==="")return console.warn(` Empty response from ${t}`),[];try{const x=JSON.parse(y);return x.Rows&&Array.isArray(x.Rows)?x.Rows:Array.isArray(x)?x:[x]}catch(x){throw console.error(` JSON parse error for ${t}:`,x),console.error(" Response text:",y),new Error(`Invalid JSON response from ${t}`)}}catch(p){throw console.error(`Error making request to ${t}:`,p),new Error(`Failed to fetch data from ${t}: ${p instanceof Error?p.message:"Unknown error"}`)}})}getCachedData(t){const a=this.cache.get(t);if(a){const n=t==="all-projects"?this.PROJECTS_CACHE_DURATION:this.CACHE_DURATION;if(Date.now()-a.timestamp<n)return a.data}return null}setCachedData(t,a){this.cache.set(t,{data:a,timestamp:Date.now()})}getAllProjects(t){return N(this,null,function*(){const a="all-projects",n="all-projects-appsheet",o="all-projects-supabase";if(t!=null&&t.forceAppSheet){const m=this.getCachedData(n);if(m&&m.length>0)return console.log(" Using cached AppSheet data (instant, no request)"),this.setCachedData(a,m),m;console.log(" Force fetching from AppSheet (no cache available)...");try{const y=yield this.makeRequest("projects_dashboard_summary_slice","Find",[],{});return this.setCachedData(n,y),this.setCachedData(a,y),console.log(` Synced ${y.length} projects from AppSheet`),y}catch(p){console.error("Error fetching from AppSheet:",p);const y=this.getCachedData(a);return y||[]}}const u=this.getCachedData(a);if(u)return console.log(" Using cached projects data"),u;const h=Xt.getAllProjects().catch(m=>(console.log(" Supabase getAllProjects failed:",m),[])),g=N(this,null,function*(){try{console.log(" Fetching projects from AppSheet API...");const p=yield this.makeRequest("projects_dashboard_summary_slice","Find",[],{});return this.setCachedData(n,p),this.setCachedData(a,p),console.log(` Cached ${p.length} projects from AppSheet (complete data)`),p}catch(m){return console.error("Error fetching projects from AppSheet:",m),[]}});try{const m=yield h;if(m&&m.length>0){console.log(` Using ${m.length} projects from Supabase (fast response)`),this.setCachedData(o,m);const p=this.getCachedData(a);return(!p||p.length===0)&&this.setCachedData(a,m),g.catch(()=>{console.log(" Background AppSheet update failed")}),m}}catch(m){console.log(" Supabase failed, waiting for AppSheet...",m)}try{const m=yield g;if(m&&m.length>0)return console.log(` Using ${m.length} projects from AppSheet (fallback)`),m}catch(m){console.error("Error fetching projects from both sources:",m)}return[]})}getProjectDataFromCache(t){return N(this,null,function*(){try{const n=(yield this.getAllProjects()).find(o=>o.Name===t);return n?(console.log(` Project data found in cache for: ${t}`),n):(console.warn(` Project not found in cache: ${t}`),null)}catch(a){return console.error("Error getting project data from cache:",a),null}})}getAllItems(){return N(this,null,function*(){const t="all-items",a=this.getCachedData(t);if(a)return a;try{const n=yield this.makeRequest("items_dashboard_summary_slice","Find",[],{});return this.setCachedData(t,n),n}catch(n){return console.error("Error fetching all items:",n),[]}})}getProjectData(t){return N(this,null,function*(){const a=`project-${t}`,n=this.getCachedData(a);if(n)return n;try{const o=`Filter(Projects, [Name]=${JSON.stringify(t)})`,u=yield this.makeRequest("Projects","Find",[],{Selector:o});if(u.length>0){const h=u[0];return this.setCachedData(a,h),h}return null}catch(o){return console.error("Error fetching project data:",o),null}})}getOrdersByProject(t){return N(this,null,function*(){const a=`orders-${t}`,n=this.getCachedData(a);if(n)return n;try{const o=`Filter(Orders, [Project ID]=${JSON.stringify(t)})`,u=yield this.makeRequest("Orders","Find",[],{Selector:o});return this.setCachedData(a,u),u}catch(o){return console.error("Error fetching orders:",o),[]}})}getMaterials(t){return N(this,null,function*(){const a=`materials-${t}`,n=this.getCachedData(a);if(n)return n;try{const o=yield this.getItemsRequestsByProject(t),u=yield this.getOrdersByProject(t),h=yield this.getAllItems(),g=o.map(x=>{const v=h.find(C=>C["Item ID"]===x["Item ID"]),S=u.find(C=>C["Order ID"]===x["Order ID"]);return lt(He({},x),{Name:v?v.Name:"Unknown Item","Order Number":S?S.Number:"0","Order Date":S?S["Due Date"]:"","Order Status":S?S.Status:"","Request by":S?S["Created By"]:""})}),m=this.groupMaterialsForSummary(g),p=this.groupMaterialsForDetails(g),y={summary:m,details:p};return this.setCachedData(a,y),y}catch(o){return console.error("Error fetching materials:",o),{summary:[],details:[]}}})}groupMaterialsForSummary(t){const a={"Top hat":{},Angles:{},Screws:{},"Caulking Glue":{},Packers:{},Tapes:{},Others:{}};t.forEach(o=>{const u=Object.prototype.hasOwnProperty.call(a,o.Category)?o.Category:"Others",h=o["Item ID"];a[u][h]||(a[u][h]={Name:o.Name||"Unknown Item",SubCategory:o["Sub Category"]||"",Description:o["Description Material"]||"",Total:0}),a[u][h].Total+=Number(o.Quantity)||0});const n=[];return Object.entries(a).forEach(([o,u])=>{const h=Object.entries(u).map(([g,m])=>({ItemID:g,Name:m.Name,SubCategory:m.SubCategory,Description:m.Description,Total:m.Total}));n.push({category:o,items:h})}),n}groupMaterialsForDetails(t){const a={"Top hat":[],Angles:[],Screws:[],"Caulking Glue":[],Packers:[],Tapes:[],Others:[]};t.forEach(o=>{const u=Object.prototype.hasOwnProperty.call(a,o.Category)?o.Category:"Others";a[u].push(o)});const n=[];return Object.entries(a).forEach(([o,u])=>{n.push({category:o,items:u})}),n}getItemsRequestsByProject(t){return N(this,null,function*(){const a=`items-requests-${t}`,n=this.getCachedData(a);if(n)return n;try{const o=`Filter(Items Request, [Project]=${JSON.stringify(t)})`,u=yield this.makeRequest("Items Request","Find",[],{Selector:o});return this.setCachedData(a,u),u}catch(o){return console.error("Error fetching items requests by Project Name:",o),[]}})}getSheetsData(t){return N(this,null,function*(){const a=`sheets-${t}`,n=this.getCachedData(a);if(n)return n;try{const o=`Filter(Sheets, AND([Project]=${JSON.stringify(t)}, [Off Cut]=false))`,u=yield this.makeRequest("Sheets","Find",[],{Selector:o});if(u.length===0)return this.setCachedData(a,[]),[];const h=[];u.forEach(p=>{if(p["Related Sheets Inventorys"]){const y=p["Related Sheets Inventorys"].split(",").map(x=>x.trim()).filter(x=>x.length>0);h.push(...y)}});let g=[];if(h.length>0){const y=`Filter(Sheets Inventory, OR(${h.map(x=>`[sheet_inventory_id]=${JSON.stringify(x)}`).join(", ")}))`;g=yield this.makeRequest("Sheets Inventory","Find",[],{Selector:y})}const m=u.map(p=>{const y=g.filter(S=>S.sheet===p["Sheet ID"]);let x=0,v=0;if(y.length>0)x=y.filter(S=>Number(S.qty)>0).reduce((S,C)=>S+Number(C.qty),0),v=y.filter(S=>Number(S.qty)<0).reduce((S,C)=>S+Math.abs(Number(C.qty)),0);else{const S=Number(p["Quantity in Factory"])||0,C=Number(p["Quantity in Store"])||0;S>0&&(x=S),C<0&&(v=Math.abs(C))}return lt(He({},p),{TotalReceived:x,TotalUsed:v})});return this.setCachedData(a,m),m}catch(o){return console.error("Error fetching sheets:",o),[]}})}getSheetsByProject(t){return N(this,null,function*(){try{console.log(` Fetching sheets from AppSheet for project: ${t}...`);const a=`Filter(Sheets, [Project]=${JSON.stringify(t)})`,n=yield this.makeRequest("Sheets","Find",[],{Selector:a});return n.length===0?(console.log(` No sheets found for project: ${t}`),[]):n.map(u=>({"Sheet ID":u["Sheet ID"]||"",Dimension:u.Dimension||"",Colour:u.Colour||"","Quantity in Factory":Number(u["Quantity in Factory"])||0,"Quantity in Store":Number(u["Quantity in Store"])||0,"Off Cut":u["Off Cut"]=="Y",Comment:u.Comment||""}))}catch(a){return console.error(`Error fetching sheets for project ${t}:`,a),[]}})}getDeliveryDockets(t){return N(this,null,function*(){var o;const a=`deliveries-${t}`,n=this.getCachedData(a);if(n)return n;try{const u=yield this.getProjectData(t);if(!u||!u["Related Delivery_Dockets"])return[];const h=((o=u["Related Delivery_Dockets"])==null?void 0:o.split(",").map(y=>y.trim()).filter(y=>y.length>0))||[];if(h.length===0)return[];const m=`Filter(Delivery_Dockets, OR(${h.map(y=>`[delivery_id]=${JSON.stringify(y)}`).join(", ")}))`,p=yield this.makeRequest("Delivery_Dockets","Find",[],{Selector:m});return this.setCachedData(a,p),p}catch(u){return console.error("Error fetching delivery dockets:",u),[]}})}clearCache(){this.cache.clear()}clearCacheFor(t){this.cache.delete(t)}getPeopleAllowances(t){return N(this,null,function*(){const a=`allowances-${t}`,n=this.getCachedData(a);if(n)return n;try{const o=yield this.makeRequest("People Allowance","Find",[],{Selector:`Filter(People Allowance, [Project]=${JSON.stringify(t)})`});return console.log(" People Allowances API Response:",o),this.setCachedData(a,o),o}catch(o){return console.error("Error fetching people allowances:",o),[]}})}markOrderAsDelivered(t){return N(this,null,function*(){try{console.log(` Marking order ${t} as delivered...`);const a=yield this.makeRequest("Orders cut","Delivered",[{"Order ID":t}]);return a&&a.length>0?(console.log(` Order ${t} marked as delivered successfully`),console.log(" Updated order details:",a[0]),a):(console.error(` Failed to mark order ${t} as delivered - empty response`),[])}catch(a){return console.error(`Error marking order ${t} as delivered:`,a),[]}})}getDocumentsByProject(t){return N(this,null,function*(){try{console.log(` Fetching documents for project: ${t}...`);const a=`Filter(Documents, [Project]=${JSON.stringify(t)})`,n=yield this.makeRequest("Documents","Find",[],{Selector:a});return n&&n.length>0?(console.log(` Found ${n.length} documents for project ${t}`),n):(console.log(` No documents found for project ${t}`),[])}catch(a){return console.error(`Error fetching documents for project ${t}:`,a),[]}})}addDocument(t){return N(this,null,function*(){try{console.log(" Adding document to AppSheet...");const{uploadDocumentToDrive:a}=yield jb(()=>N(null,null,function*(){const{uploadDocumentToDrive:u}=yield import("./uploadService-CpoydQ-Y.js");return{uploadDocumentToDrive:u}}),[]);console.log(" Uploading file to Google Drive...");const n=yield a(t.file,t.Project,t.Orders,t.Name);console.log(` File uploaded to Drive: ${n}`),console.log(" Saving document record in AppSheet...");const o=yield this.makeRequest("Documents","Add",[{Project:t.Project,Name:t.Name,File:n,Orders:t.Orders,Comments:t.Comments||"",Category:t.Category||""}]);return o&&o.length>0?(console.log(" Document added successfully"),o):(console.error(" Failed to add document - empty response"),[])}catch(a){throw console.error("Error adding document:",a),a}})}linkDocumentToOrder(t,a){return N(this,null,function*(){try{console.log(` Linking document ${t} to order ${a}...`);const n=yield this.makeRequest("Documents","Find",[{"Document ID":t}]);if(!n||n.length===0)throw new Error(`Document with ID ${t} not found`);const o=n[0],u=o.Orders||"";let h=[];u&&(typeof u=="string"?h=u.split(",").map(x=>x.trim()).filter(x=>x.length>0):Array.isArray(u)&&(h=u.map(x=>String(x).trim()).filter(x=>x.length>0)));const g=a.trim();g&&!h.includes(g)&&h.push(g);const m=h.join(","),p={"Document ID":t,Orders:m,Comments:o.Comments||"",Category:o.Category||""},y=yield this.makeRequest("Documents","Edit",[p]);return y&&y.length>0?(console.log(` Document ${t} linked to order ${a} successfully`),y):(console.error(" Failed to link document - empty response"),[])}catch(n){throw console.error("Error linking document to order:",n),n}})}createStages(t){return N(this,null,function*(){if(t.length===0)return console.warn(" No stages to create"),[];try{console.log(` Creating ${t.length} stages in AppSheet...`);const a=yield this.makeRequest("Stages Order","Add",t);return a&&a.length>0?(console.log(` ${a.length} stages created successfully in AppSheet`),a):(console.error(" Failed to create stages - empty response"),[])}catch(a){throw console.error("Error creating stages in AppSheet:",a),a}})}createPanels(t){return N(this,null,function*(){if(t.length===0)return console.warn(" No panels to create"),[];try{console.log(` Creating ${t.length} panels in AppSheet...`);const a=yield this.makeRequest("Panels","Add",t);return a&&a.length>0?(console.log(` ${a.length} panels created successfully in AppSheet`),a):(console.error(" Failed to create panels - empty response"),[])}catch(a){throw console.error("Error creating panels in AppSheet:",a),a}})}addOrderCut(t){return N(this,null,function*(){try{console.log(` Creating order cut in AppSheet: ${t["Order ID"]}`);const a=yield this.makeRequest("Orders cut","Add",[t]);if(!a||a.length===0)throw new Error("Failed to create order cut in AppSheet - empty response");return console.log(" Order cut created successfully in AppSheet"),a}catch(a){throw console.error("Error creating order cut in AppSheet:",a),a}})}createSheetsInventory(t){return N(this,null,function*(){if(t.length===0)return console.warn(" No sheets inventory records to create"),[];try{console.log(` Creating ${t.length} sheets inventory records in AppSheet...`);const a=t.map(o=>({sheet:o["Sheet ID"],order:o.order,qty:o.qty,change_time:o.change_time})),n=yield this.makeRequest("Sheets Inventory","Add",a);return n&&n.length>0?(console.log(` ${n.length} sheets inventory records created successfully in AppSheet`),n):(console.error(" Failed to create sheets inventory - empty response"),[])}catch(a){throw console.error("Error creating sheets inventory in AppSheet:",a),a}})}createOrderCut(t,a,n){return N(this,null,function*(){try{console.log(` Creating order cut in AppSheet: ${t["Order ID"]}`),console.log(" Creating order...");const o=yield this.makeRequest("Orders cut","Add",[t]);if(!o||o.length===0)throw new Error("Failed to create order in AppSheet - empty response");console.log(" Order created successfully in AppSheet"),console.log(" Creating stages...");let u=[];try{u=yield this.createStages(a)}catch(g){console.error(" Error creating stages, but continuing:",g)}console.log(" Creating panels...");let h=[];try{h=yield this.createPanels(n)}catch(g){console.error(" Error creating panels, but continuing:",g)}return console.log(" Order cut creation completed in AppSheet"),{order:o,stages:u,panels:h}}catch(o){throw console.error("Error creating order cut in AppSheet:",o),o}})}}const mn=new Os,zp=()=>oa({queryKey:["projects-list"],queryFn:()=>mn.getAllProjects(),staleTime:600*1e3,gcTime:1200*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1,retry:2,retryDelay:1e3}),_d=()=>oa({queryKey:["items"],queryFn:()=>mn.getAllItems(),staleTime:3600*1e3,gcTime:1440*60*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1,retry:1,retryDelay:2e3}),Bp=r=>oa({queryKey:["project",r],queryFn:()=>mn.getProjectDataFromCache(r),enabled:!!r,staleTime:900*1e3,gcTime:1800*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1,retry:!1}),ij=r=>oa({queryKey:["project-materials",r],queryFn:()=>mn.getMaterials(r),enabled:!!r,staleTime:300*1e3,gcTime:900*1e3}),lj=r=>oa({queryKey:["project-sheets",r],queryFn:()=>mn.getSheetsData(r),enabled:!!r,staleTime:300*1e3,gcTime:900*1e3}),oj=r=>oa({queryKey:["project-allowances",r],queryFn:()=>mn.getPeopleAllowances(r),enabled:!!r,staleTime:300*1e3,gcTime:900*1e3}),cj=({children:r})=>{const{isLoading:t,isError:a}=_d();return l.jsxs(l.Fragment,{children:[r,t&&l.jsx("div",{className:"progressive-loader",children:l.jsx("div",{className:"loader-indicator",children:l.jsx("div",{className:"loader-spinner"})})}),a&&l.jsx("div",{className:"progressive-loader error",children:l.jsx("div",{className:"loader-indicator",children:l.jsx("span",{className:"error-icon",children:""})})})]})},Ip=()=>{const[r,t]=U.useState(()=>new URLSearchParams(window.location.search).get("project")),a=U.useCallback(u=>{if(r===u)return;t(u);const h=new URL(window.location.href);u?h.searchParams.set("project",u):h.searchParams.delete("project"),window.history.replaceState({},"",h.toString())},[r]),n=U.useCallback(u=>{a(u)},[a]),o=U.useCallback(()=>{a(null)},[a]);return U.useEffect(()=>{const u=()=>{const g=new URLSearchParams(window.location.search).get("project");t(g)};return window.addEventListener("popstate",u),()=>window.removeEventListener("popstate",u)},[]),{projectParam:r,setProjectParam:a,updateUrlWithProject:n,clearProjectParam:o}},Ri=r=>{U.useEffect(()=>{const t=document.title;return document.title=r,()=>{document.title=t}},[r])},Ea=()=>l.jsx("div",{className:"loading-spinner",role:"status","aria-label":"Loading"}),Gu=({isLoading:r,children:t,sectionName:a})=>r?l.jsx("div",{className:"section-loader",children:l.jsxs("div",{className:"section-loading-content",children:[l.jsx(Ea,{}),l.jsxs("p",{className:"section-loading-text",children:["Loading ",a,"..."]})]})}):l.jsx(l.Fragment,{children:t}),uj=({onProjectSelect:r})=>{var te,he;const[t,a]=U.useState(""),[n,o]=U.useState(""),[u,h]=U.useState("In Progress"),[g,m]=U.useState(!1),p=U.useRef(null),{projectParam:y,updateUrlWithProject:x}=Ip(),{data:v=[],isLoading:S,error:C,refetch:T}=zp(),A=U.useMemo(()=>[...v].sort((le,O)=>le.Name.localeCompare(O.Name)).filter(le=>{const O=le.Name.toLowerCase().includes(n.toLowerCase()),D=u==="all"||le.Status===u;return O&&D}),[v,n,u]);U.useEffect(()=>{if(y&&v.length>0){const X=v.find(le=>le.Name===y);X&&t!==y&&(a(y),r(X))}},[y,v,r,t]),U.useEffect(()=>{const X=le=>{p.current&&!p.current.contains(le.target)&&m(!1)};return document.addEventListener("mousedown",X),()=>document.removeEventListener("mousedown",X)},[]);const I=X=>N(null,null,function*(){a(X),m(!1);const le=v.find(O=>O.Name===X);le&&(x(X),r(le))}),G=X=>{switch(X){case"To Do":return"#87CEEB";case"In Progress":return"#FFA500";case"Defects":return"#FF6347";case"Done":return"#32CD32";default:return"#95a5a6"}},P=X=>{switch(X){case"To Do":return"";case"In Progress":return"";case"Defects":return"";case"Done":return"";default:return""}};return S?l.jsx("div",{className:"project-selector",children:l.jsxs("div",{className:"loading-container",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{className:"loading-text",children:"Loading projects..."}),l.jsxs("div",{className:"loading-dots",children:[l.jsx("span",{}),l.jsx("span",{}),l.jsx("span",{})]})]})}):C?l.jsx("div",{className:"project-selector",children:l.jsxs("div",{className:"error-container",children:[l.jsx("div",{className:"error-icon",children:""}),l.jsx("h3",{className:"error-title",children:"Connection Error"}),l.jsx("p",{className:"error-message",children:C.message||"Error loading projects"}),l.jsxs("button",{onClick:()=>T(),className:"retry-button",children:[l.jsx("span",{className:"retry-icon",children:""}),l.jsx("span",{className:"retry-text",children:"Retry Connection"})]})]})}):v.length===0?l.jsx("div",{className:"project-selector",children:l.jsxs("div",{className:"empty-container",children:[l.jsx("div",{className:"empty-icon",children:""}),l.jsx("h3",{className:"empty-title",children:"No Projects Available"}),l.jsx("p",{className:"empty-message",children:"There are no projects to display at the moment."})]})}):l.jsx("div",{className:"project-selector",children:l.jsx("div",{className:"combobox-section",children:l.jsxs("div",{className:"combobox-container",ref:p,children:[l.jsxs("div",{className:"combobox-wrapper",children:[l.jsxs("div",{className:`combobox ${g?"open":""}`,onClick:()=>m(!0),children:[l.jsxs("div",{className:"combobox-input",children:[l.jsx("span",{className:"combobox-icon",children:""}),l.jsx("input",{type:"text",placeholder:"Search and select project...",value:n,onChange:X=>{o(X.target.value),m(!0)},onClick:X=>X.stopPropagation(),className:"combobox-search"}),n&&l.jsx("button",{className:"clear-search",onClick:X=>{X.stopPropagation(),o("")},children:""})]}),l.jsx("div",{className:"combobox-arrow",children:""})]}),g&&l.jsxs("div",{className:"combobox-dropdown",children:[l.jsxs("div",{className:"dropdown-header",children:[l.jsx("div",{className:"filter-tabs",children:["all","To Do","In Progress","Defects","Done"].map(X=>l.jsxs("button",{className:`filter-tab ${u===X?"active":""}`,onClick:le=>{le.stopPropagation(),h(X)},style:{"--status-color":X==="all"?"#95a5a6":G(X)},title:X==="all"?"All Projects":X,children:[l.jsx("span",{className:"tab-icon",children:X==="all"?"":P(X)}),l.jsx("span",{className:"tab-text",children:X==="all"?"All":X}),l.jsx("span",{className:"tab-count",children:X==="all"?v.length:v.filter(le=>le.Status===X).length})]},X))}),l.jsx("div",{className:"mobile-results-indicator",children:l.jsxs("span",{className:"results-count",children:[A.length," of ",v.length," projects"]})})]}),l.jsx("div",{className:"dropdown-list",children:A.length>0?A.map(X=>l.jsx("div",{className:`dropdown-item ${t===X.Name?"selected":""}`,onClick:le=>{le.stopPropagation(),I(X.Name)},children:l.jsxs("div",{className:"item-content",children:[l.jsxs("div",{className:"item-main",children:[l.jsx("div",{className:"item-name",children:X.Name}),l.jsx("div",{className:"item-status",children:l.jsxs("span",{className:"status-badge",style:{backgroundColor:G(X.Status||"")},children:[P(X.Status||"")," ",X.Status||"Unknown"]})})]}),l.jsx("div",{className:"item-check",children:t===X.Name?"":""})]})},X.Name)):l.jsxs("div",{className:"no-results",children:[l.jsx("div",{className:"no-results-icon",children:""}),l.jsxs("div",{className:"no-results-text",children:[l.jsx("div",{className:"no-results-title",children:"No projects found"}),l.jsx("div",{className:"no-results-subtitle",children:"Try adjusting your search or filters"})]})]})})]})]}),t&&l.jsxs("div",{className:"selected-project",children:[l.jsxs("div",{className:"selected-project-info",children:[l.jsx("div",{className:"project-name",children:t}),l.jsx("div",{className:"project-status",children:l.jsx("span",{className:"status-indicator",style:{backgroundColor:G(((te=v.find(X=>X.Name===t))==null?void 0:te.Status)||"")},children:((he=v.find(X=>X.Name===t))==null?void 0:he.Status)||"Unknown"})})]}),S&&l.jsxs("div",{className:"loading-indicator",children:[l.jsx("div",{className:"loading-dot"}),l.jsx("div",{className:"loading-dot"}),l.jsx("div",{className:"loading-dot"})]})]})]})})})},Ku=r=>{if(!r)return"N/A";try{const t=new Date(r);if(isNaN(t.getTime()))return r;const a=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),o=t.getFullYear();return`${a}/${n}/${o}`}catch(t){return console.warn("Error formateando fecha:",r,t),r}},dj=r=>{if(!r)return"N/A";try{const t=new Date(r);if(isNaN(t.getTime()))return r;const a=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),o=t.getFullYear(),u=t.getHours().toString().padStart(2,"0"),h=t.getMinutes().toString().padStart(2,"0");return`${a}/${n}/${o} ${u}:${h}`}catch(t){return console.warn("Error formateando fecha y hora:",r,t),r}},Pp=()=>{const r=new Date,t=r.getFullYear(),a=String(r.getMonth()+1).padStart(2,"0"),n=String(r.getDate()).padStart(2,"0");return`${t}-${a}-${n}`};function hj(){var p,y,x,v,S,C;const r=new Date,a=new Intl.DateTimeFormat("en-AU",{timeZone:"Australia/Brisbane",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).formatToParts(r),n=(p=a.find(T=>T.type==="year"))==null?void 0:p.value,o=(y=a.find(T=>T.type==="month"))==null?void 0:y.value,u=(x=a.find(T=>T.type==="day"))==null?void 0:x.value,h=(v=a.find(T=>T.type==="hour"))==null?void 0:v.value,g=(S=a.find(T=>T.type==="minute"))==null?void 0:S.value,m=(C=a.find(T=>T.type==="second"))==null?void 0:C.value;return`${n}-${o}-${u} ${h}:${g}:${m}`}const eo={"Top hat":"",Angles:"",Screws:"","Caulking Glue":"",Packers:"",Tapes:"",Others:""},fj=({materials:r,isLoading:t=!1})=>{const[a,n]=U.useState(null),o=U.useMemo(()=>r.summary.map(h=>lt(He({},h),{category:`${eo[h.category]||""} ${h.category} ${eo[h.category]||""}`})),[r.summary]),u=U.useMemo(()=>r.details.map(h=>lt(He({},h),{category:`${eo[h.category]||""} ${h.category} ${eo[h.category]||""}`})),[r.details]);return t?l.jsxs("div",{className:"materials-table-container",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Loading materials..."})]}):r.summary.length===0&&r.details.length===0?l.jsxs("div",{className:"materials-table-container",children:[l.jsx("h2",{children:" Material Tables"}),l.jsx("p",{children:"No materials available for this project."})]}):l.jsxs("div",{className:"materials-table-container",children:[l.jsx("h2",{id:"material-tables",children:"Material Tables"}),l.jsxs("div",{id:"materialsTablesContainer",children:[l.jsx("button",{id:"btnSummary",className:a==="summary"?"active":"",onClick:()=>n(a==="summary"?null:"summary"),children:" Summary Table"}),l.jsx("button",{id:"btnDetails",className:a==="details"?"active":"",onClick:()=>n(a==="details"?null:"details"),children:" Detailed Table"})]}),l.jsx("div",{className:"table-scroll-container",children:l.jsxs("table",{id:"materialsTable",className:a==="summary"?"":"hidden",children:[l.jsxs("thead",{children:[l.jsx("tr",{children:l.jsx("th",{colSpan:4,children:"Summary materials"})}),l.jsxs("tr",{children:[l.jsx("th",{children:" Name"}),l.jsx("th",{children:" Sub Category"}),l.jsx("th",{children:" Description"}),l.jsx("th",{children:" Total"})]})]}),l.jsx("tbody",{children:o.map(h=>h.items.length===0?null:l.jsxs(lo.Fragment,{children:[l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"category",children:h.category})}),h.items.map(g=>l.jsxs("tr",{className:"item",children:[l.jsx("td",{children:g.Name}),l.jsx("td",{children:g.SubCategory}),l.jsx("td",{children:g.Description}),l.jsx("td",{children:g.Total})]},g.ItemID))]},h.category))})]})}),l.jsx("div",{className:"table-scroll-container",children:l.jsxs("table",{id:"materialsTable_details",className:a==="details"?"":"hidden",children:[l.jsxs("thead",{children:[l.jsx("tr",{children:l.jsx("th",{colSpan:8,children:"Summary detailed materials"})}),l.jsxs("tr",{children:[l.jsx("th",{children:" Order"}),l.jsx("th",{children:" Status"}),l.jsx("th",{children:" Date"}),l.jsx("th",{children:" Name"}),l.jsx("th",{children:" Description"}),l.jsx("th",{children:" User Spec"}),l.jsx("th",{children:" Request by"}),l.jsx("th",{children:" Quantity"})]})]}),l.jsx("tbody",{children:u.map(h=>h.items.length===0?null:l.jsxs(lo.Fragment,{children:[l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"category",children:h.category})}),h.items.map((g,m)=>l.jsxs("tr",{className:"item",children:[l.jsx("td",{children:g["Order Number"]}),l.jsx("td",{children:g["Order Status"]==="Delivered"?"":""}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:dj(g["Order Date"])}),l.jsx("td",{children:g.Name}),l.jsx("td",{children:g["Description Material"]}),l.jsx("td",{children:g.Description}),l.jsx("td",{children:g["Request by"]}),l.jsx("td",{children:g.Quantity})]},`${g["Item ID"]}-${m}`))]},h.category))})]})})]})};var Jg=(function(){if(typeof window!="undefined"){if(window.devicePixelRatio)return window.devicePixelRatio;var r=window.screen;if(r)return(r.deviceXDPI||1)/(r.logicalXDPI||1)}return 1})(),wi={toTextLines:function(r){var t=[],a;for(r=[].concat(r);r.length;)a=r.pop(),typeof a=="string"?t.unshift.apply(t,a.split(`
`)):Array.isArray(a)?r.push.apply(r,a):vi(r)||t.unshift(""+a);return t},textSize:function(r,t,a){var n=[].concat(t),o=n.length,u=r.font,h=0,g;for(r.font=a.string,g=0;g<o;++g)h=Math.max(r.measureText(n[g]).width,h);return r.font=u,{height:o*a.lineHeight,width:h}},bound:function(r,t,a){return Math.max(r,Math.min(t,a))},arrayDiff:function(r,t){var a=r.slice(),n=[],o,u,h,g;for(o=0,h=t.length;o<h;++o)g=t[o],u=a.indexOf(g),u===-1?n.push([g,1]):a.splice(u,1);for(o=0,h=a.length;o<h;++o)n.push([a[o],-1]);return n},rasterize:function(r){return Math.round(r*Jg)/Jg}};function Wu(r,t){var a=t.x,n=t.y;if(a===null)return{x:0,y:-1};if(n===null)return{x:1,y:0};var o=r.x-a,u=r.y-n,h=Math.sqrt(o*o+u*u);return{x:h?o/h:0,y:h?u/h:-1}}function mj(r,t,a,n,o){switch(o){case"center":a=n=0;break;case"bottom":a=0,n=1;break;case"right":a=1,n=0;break;case"left":a=-1,n=0;break;case"top":a=0,n=-1;break;case"start":a=-a,n=-n;break;case"end":break;default:o*=Math.PI/180,a=Math.cos(o),n=Math.sin(o);break}return{x:r,y:t,vx:a,vy:n}}var gj=0,Hp=1,Yp=2,Vp=4,Fp=8;function to(r,t,a){var n=gj;return r<a.left?n|=Hp:r>a.right&&(n|=Yp),t<a.top?n|=Fp:t>a.bottom&&(n|=Vp),n}function pj(r,t){for(var a=r.x0,n=r.y0,o=r.x1,u=r.y1,h=to(a,n,t),g=to(o,u,t),m,p,y;!(!(h|g)||h&g);)m=h||g,m&Fp?(p=a+(o-a)*(t.top-n)/(u-n),y=t.top):m&Vp?(p=a+(o-a)*(t.bottom-n)/(u-n),y=t.bottom):m&Yp?(y=n+(u-n)*(t.right-a)/(o-a),p=t.right):m&Hp&&(y=n+(u-n)*(t.left-a)/(o-a),p=t.left),m===h?(a=p,n=y,h=to(a,n,t)):(o=p,u=y,g=to(o,u,t));return{x0:a,x1:o,y0:n,y1:u}}function ao(r,t){var a=t.anchor,n=r,o,u;return t.clamp&&(n=pj(n,t.area)),a==="start"?(o=n.x0,u=n.y0):a==="end"?(o=n.x1,u=n.y1):(o=(n.x0+n.x1)/2,u=(n.y0+n.y1)/2),mj(o,u,r.vx,r.vy,t.align)}var so={arc:function(r,t){var a=(r.startAngle+r.endAngle)/2,n=Math.cos(a),o=Math.sin(a),u=r.innerRadius,h=r.outerRadius;return ao({x0:r.x+n*u,y0:r.y+o*u,x1:r.x+n*h,y1:r.y+o*h,vx:n,vy:o},t)},point:function(r,t){var a=Wu(r,t.origin),n=a.x*r.options.radius,o=a.y*r.options.radius;return ao({x0:r.x-n,y0:r.y-o,x1:r.x+n,y1:r.y+o,vx:a.x,vy:a.y},t)},bar:function(r,t){var a=Wu(r,t.origin),n=r.x,o=r.y,u=0,h=0;return r.horizontal?(n=Math.min(r.x,r.base),u=Math.abs(r.base-r.x)):(o=Math.min(r.y,r.base),h=Math.abs(r.base-r.y)),ao({x0:n,y0:o+h,x1:n+u,y1:o,vx:a.x,vy:a.y},t)},fallback:function(r,t){var a=Wu(r,t.origin);return ao({x0:r.x,y0:r.y,x1:r.x+(r.width||0),y1:r.y+(r.height||0),vx:a.x,vy:a.y},t)}},as=wi.rasterize;function yj(r){var t=r.borderWidth||0,a=r.padding,n=r.size.height,o=r.size.width,u=-o/2,h=-n/2;return{frame:{x:u-a.left-t,y:h-a.top-t,w:o+a.width+t*2,h:n+a.height+t*2},text:{x:u,y:h,w:o,h:n}}}function vj(r,t){var a=t.chart.getDatasetMeta(t.datasetIndex).vScale;if(!a)return null;if(a.xCenter!==void 0&&a.yCenter!==void 0)return{x:a.xCenter,y:a.yCenter};var n=a.getBasePixel();return r.horizontal?{x:n,y:null}:{x:null,y:n}}function bj(r){return r instanceof sb?so.arc:r instanceof yd?so.point:r instanceof on?so.bar:so.fallback}function xj(r,t,a,n,o,u){var h=Math.PI/2;if(u){var g=Math.min(u,o/2,n/2),m=t+g,p=a+g,y=t+n-g,x=a+o-g;r.moveTo(t,p),m<y&&p<x?(r.arc(m,p,g,-Math.PI,-h),r.arc(y,p,g,-h,0),r.arc(y,x,g,0,h),r.arc(m,x,g,h,Math.PI)):m<y?(r.moveTo(m,a),r.arc(y,p,g,-h,h),r.arc(m,p,g,h,Math.PI+h)):p<x?(r.arc(m,p,g,-Math.PI,0),r.arc(m,x,g,0,Math.PI)):r.arc(m,p,g,-Math.PI,Math.PI),r.closePath(),r.moveTo(t,a)}else r.rect(t,a,n,o)}function wj(r,t,a){var n=a.backgroundColor,o=a.borderColor,u=a.borderWidth;!n&&(!o||!u)||(r.beginPath(),xj(r,as(t.x)+u/2,as(t.y)+u/2,as(t.w)-u,as(t.h)-u,a.borderRadius),r.closePath(),n&&(r.fillStyle=n,r.fill()),o&&u&&(r.strokeStyle=o,r.lineWidth=u,r.lineJoin="miter",r.stroke()))}function jj(r,t,a){var n=a.lineHeight,o=r.w,u=r.x,h=r.y+n/2;return t==="center"?u+=o/2:(t==="end"||t==="right")&&(u+=o),{h:n,w:o,x:u,y:h}}function Sj(r,t,a){var n=r.shadowBlur,o=a.stroked,u=as(a.x),h=as(a.y),g=as(a.w);o&&r.strokeText(t,u,h,g),a.filled&&(n&&o&&(r.shadowBlur=0),r.fillText(t,u,h,g),n&&o&&(r.shadowBlur=n))}function _j(r,t,a,n){var o=n.textAlign,u=n.color,h=!!u,g=n.font,m=t.length,p=n.textStrokeColor,y=n.textStrokeWidth,x=p&&y,v;if(!(!m||!h&&!x))for(a=jj(a,o,g),r.font=g.string,r.textAlign=o,r.textBaseline="middle",r.shadowBlur=n.textShadowBlur,r.shadowColor=n.textShadowColor,h&&(r.fillStyle=u),x&&(r.lineJoin="round",r.lineWidth=y,r.strokeStyle=p),v=0,m=t.length;v<m;++v)Sj(r,t[v],{stroked:x,filled:h,w:a.w,x:a.x,y:a.y+a.h*v})}var Qp=function(r,t,a,n){var o=this;o._config=r,o._index=n,o._model=null,o._rects=null,o._ctx=t,o._el=a};_i(Qp.prototype,{_modelize:function(r,t,a,n){var o=this,u=o._index,h=eb(_t([a.font,{}],n,u)),g=_t([a.color,tb.color],n,u);return{align:_t([a.align,"center"],n,u),anchor:_t([a.anchor,"center"],n,u),area:n.chart.chartArea,backgroundColor:_t([a.backgroundColor,null],n,u),borderColor:_t([a.borderColor,null],n,u),borderRadius:_t([a.borderRadius,0],n,u),borderWidth:_t([a.borderWidth,0],n,u),clamp:_t([a.clamp,!1],n,u),clip:_t([a.clip,!1],n,u),color:g,display:r,font:h,lines:t,offset:_t([a.offset,4],n,u),opacity:_t([a.opacity,1],n,u),origin:vj(o._el,n),padding:ab(_t([a.padding,4],n,u)),positioner:bj(o._el),rotation:_t([a.rotation,0],n,u)*(Math.PI/180),size:wi.textSize(o._ctx,t,h),textAlign:_t([a.textAlign,"start"],n,u),textShadowBlur:_t([a.textShadowBlur,0],n,u),textShadowColor:_t([a.textShadowColor,g],n,u),textStrokeColor:_t([a.textStrokeColor,g],n,u),textStrokeWidth:_t([a.textStrokeWidth,0],n,u)}},update:function(r){var t=this,a=null,n=null,o=t._index,u=t._config,h,g,m,p=_t([u.display,!0],r,o);p&&(h=r.dataset.data[o],g=Zv(yp(u.formatter,[h,r]),h),m=vi(g)?[]:wi.toTextLines(g),m.length&&(a=t._modelize(p,m,u,r),n=yj(a))),t._model=a,t._rects=n},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(r,t){var a=this,n=r.ctx,o=a._model,u=a._rects,h;this.visible()&&(n.save(),o.clip&&(h=o.area,n.beginPath(),n.rect(h.left,h.top,h.right-h.left,h.bottom-h.top),n.clip()),n.globalAlpha=wi.bound(0,o.opacity,1),n.translate(as(t.x),as(t.y)),n.rotate(o.rotation),wj(n,u.frame,o),_j(n,o.lines,u.text,o),n.restore())}});var Nj=Number.MIN_SAFE_INTEGER||-9007199254740991,Cj=Number.MAX_SAFE_INTEGER||9007199254740991;function fi(r,t,a){var n=Math.cos(a),o=Math.sin(a),u=t.x,h=t.y;return{x:u+n*(r.x-u)-o*(r.y-h),y:h+o*(r.x-u)+n*(r.y-h)}}function Zg(r,t){var a=Cj,n=Nj,o=t.origin,u,h,g,m,p;for(u=0;u<r.length;++u)h=r[u],g=h.x-o.x,m=h.y-o.y,p=t.vx*g+t.vy*m,a=Math.min(a,p),n=Math.max(n,p);return{min:a,max:n}}function ro(r,t){var a=t.x-r.x,n=t.y-r.y,o=Math.sqrt(a*a+n*n);return{vx:(t.x-r.x)/o,vy:(t.y-r.y)/o,origin:r,ln:o}}var Gp=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};_i(Gp.prototype,{center:function(){var r=this._rect;return{x:r.x+r.w/2,y:r.y+r.h/2}},update:function(r,t,a){this._rotation=a,this._rect={x:t.x+r.x,y:t.y+r.y,w:t.w,h:t.h}},contains:function(r){var t=this,a=1,n=t._rect;return r=fi(r,t.center(),-t._rotation),!(r.x<n.x-a||r.y<n.y-a||r.x>n.x+n.w+a*2||r.y>n.y+n.h+a*2)},intersects:function(r){var t=this._points(),a=r._points(),n=[ro(t[0],t[1]),ro(t[0],t[3])],o,u,h;for(this._rotation!==r._rotation&&n.push(ro(a[0],a[1]),ro(a[0],a[3])),o=0;o<n.length;++o)if(u=Zg(t,n[o]),h=Zg(a,n[o]),u.max<h.min||h.max<u.min)return!1;return!0},_points:function(){var r=this,t=r._rect,a=r._rotation,n=r.center();return[fi({x:t.x,y:t.y},n,a),fi({x:t.x+t.w,y:t.y},n,a),fi({x:t.x+t.w,y:t.y+t.h},n,a),fi({x:t.x,y:t.y+t.h},n,a)]}});function Kp(r,t,a){var n=t.positioner(r,t),o=n.vx,u=n.vy;if(!o&&!u)return{x:n.x,y:n.y};var h=a.w,g=a.h,m=t.rotation,p=Math.abs(h/2*Math.cos(m))+Math.abs(g/2*Math.sin(m)),y=Math.abs(h/2*Math.sin(m))+Math.abs(g/2*Math.cos(m)),x=1/Math.max(Math.abs(o),Math.abs(u));return p*=o*x,y*=u*x,p+=t.offset*o,y+=t.offset*u,{x:n.x+p,y:n.y+y}}function Ej(r,t){var a,n,o,u;for(a=r.length-1;a>=0;--a)for(o=r[a].$layout,n=a-1;n>=0&&o._visible;--n)u=r[n].$layout,u._visible&&o._box.intersects(u._box)&&t(o,u);return r}function Tj(r){var t,a,n,o,u,h,g;for(t=0,a=r.length;t<a;++t)n=r[t],o=n.$layout,o._visible&&(g=new Proxy(n._el,{get:(m,p)=>m.getProps([p],!0)[p]}),u=n.geometry(),h=Kp(g,n.model(),u),o._box.update(h,u,n.rotation()));return Ej(r,function(m,p){var y=m._hidable,x=p._hidable;y&&x||x?p._visible=!1:y&&(m._visible=!1)})}var ji={prepare:function(r){var t=[],a,n,o,u,h;for(a=0,o=r.length;a<o;++a)for(n=0,u=r[a].length;n<u;++n)h=r[a][n],t.push(h),h.$layout={_box:new Gp,_hidable:!1,_visible:!0,_set:a,_idx:h._index};return t.sort(function(g,m){var p=g.$layout,y=m.$layout;return p._idx===y._idx?y._set-p._set:y._idx-p._idx}),this.update(t),t},update:function(r){var t=!1,a,n,o,u,h;for(a=0,n=r.length;a<n;++a)o=r[a],u=o.model(),h=o.$layout,h._hidable=u&&u.display==="auto",h._visible=o.visible(),t|=h._hidable;t&&Tj(r)},lookup:function(r,t){var a,n;for(a=r.length-1;a>=0;--a)if(n=r[a].$layout,n&&n._visible&&n._box.contains(t))return r[a];return null},draw:function(r,t){var a,n,o,u,h,g;for(a=0,n=t.length;a<n;++a)o=t[a],u=o.$layout,u._visible&&(h=o.geometry(),g=Kp(o._el,o.model(),h),u._box.update(g,h,o.rotation()),o.draw(r,g))}},Dj=function(r){if(vi(r))return null;var t=r,a,n,o;if(Xv(r))if(!vi(r.label))t=r.label;else if(!vi(r.r))t=r.r;else for(t="",a=Object.keys(r),o=0,n=a.length;o<n;++o)t+=(o!==0?", ":"")+a[o]+": "+r[a[o]];return""+t},Oj={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:Dj,labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},Wt="$datalabels",Wp="$default";function Aj(r,t){var a=r.datalabels,n={},o=[],u,h;return a===!1?null:(a===!0&&(a={}),t=_i({},[t,a]),u=t.labels||{},h=Object.keys(u),delete t.labels,h.length?h.forEach(function(g){u[g]&&o.push(_i({},[t,u[g],{_key:g}]))}):o.push(t),n=o.reduce(function(g,m){return Jv(m.listeners||{},function(p,y){g[y]=g[y]||{},g[y][m._key||Wp]=p}),delete m.listeners,g},{}),{labels:o,listeners:n})}function dd(r,t,a,n){if(t){var o=a.$context,u=a.$groups,h;t[u._set]&&(h=t[u._set][u._key],h&&yp(h,[o,n])===!0&&(r[Wt]._dirty=!0,a.update(o)))}}function kj(r,t,a,n,o){var u,h;!a&&!n||(a?n?a!==n&&(h=u=!0):h=!0:u=!0,h&&dd(r,t.leave,a,o),u&&dd(r,t.enter,n,o))}function Rj(r,t){var a=r[Wt],n=a._listeners,o,u;if(!(!n.enter&&!n.leave)){if(t.type==="mousemove")u=ji.lookup(a._labels,t);else if(t.type!=="mouseout")return;o=a._hovered,a._hovered=u,kj(r,n,o,u,t)}}function Mj(r,t){var a=r[Wt],n=a._listeners.click,o=n&&ji.lookup(a._labels,t);o&&dd(r,n,o,t)}var Uj={id:"datalabels",defaults:Oj,beforeInit:function(r){r[Wt]={_actives:[]}},beforeUpdate:function(r){var t=r[Wt];t._listened=!1,t._listeners={},t._datasets=[],t._labels=[]},afterDatasetUpdate:function(r,t,a){var n=t.index,o=r[Wt],u=o._datasets[n]=[],h=r.isDatasetVisible(n),g=r.data.datasets[n],m=Aj(g,a),p=t.meta.data||[],y=r.ctx,x,v,S,C,T,A,I,G;for(y.save(),x=0,S=p.length;x<S;++x)if(I=p[x],I[Wt]=[],h&&I&&r.getDataVisibility(x)&&!I.skip)for(v=0,C=m.labels.length;v<C;++v)T=m.labels[v],A=T._key,G=new Qp(T,y,I,x),G.$groups={_set:n,_key:A||Wp},G.$context={active:!1,chart:r,dataIndex:x,dataset:g,datasetIndex:n},G.update(G.$context),I[Wt].push(G),u.push(G);y.restore(),_i(o._listeners,m.listeners,{merger:function(P,te,he){te[P]=te[P]||{},te[P][t.index]=he[P],o._listened=!0}})},afterUpdate:function(r){r[Wt]._labels=ji.prepare(r[Wt]._datasets)},afterDatasetsDraw:function(r){ji.draw(r,r[Wt]._labels)},beforeEvent:function(r,t){if(r[Wt]._listened){var a=t.event;switch(a.type){case"mousemove":case"mouseout":Rj(r,a);break;case"click":Mj(r,a);break}}},afterEvent:function(r){var t=r[Wt],a=t._actives,n=t._actives=r.getActiveElements(),o=wi.arrayDiff(a,n),u,h,g,m,p,y,x;for(u=0,h=o.length;u<h;++u)if(p=o[u],p[1])for(x=p[0].element[Wt]||[],g=0,m=x.length;g<m;++g)y=x[g],y.$context.active=p[1]===1,y.update(y.$context);(t._dirty||o.length)&&(ji.update(t._labels),r.render()),delete t._dirty}};za.register(cn,un,on,dn,hn,fn,Uj,vd);const Lj=({sheets:r,isLoading:t=!1})=>{if(t)return l.jsxs("div",{className:"chart-container",children:[l.jsx("h3",{children:"Comparison of Purchased vs Used Sheets"}),l.jsx("div",{className:"loading-spinner",id:"sheetsLoadingSpinner"}),l.jsx("p",{children:"Loading sheets data..."})]});if(!r||r.length===0)return l.jsxs("div",{className:"chart-container",children:[l.jsx("h3",{children:"Comparison of Purchased vs Used Sheets"}),l.jsx("p",{children:"No sheets data available for this project."})]});const a=r.length,n=r.reduce((g,m)=>g+(m.TotalReceived||0),0),o=r.reduce((g,m)=>g+(m.TotalUsed||0),0),u={labels:r.map(g=>g.Sheet),datasets:[{label:"Total Received",data:r.map(g=>g.TotalReceived||0),backgroundColor:"rgba(75, 192, 192, 0.6)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1},{label:"Total Used",data:r.map(g=>g.TotalUsed||0),backgroundColor:"rgba(255, 99, 132, 0.6)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1}]},h={responsive:!0,maintainAspectRatio:!1,layout:{padding:{bottom:25}},plugins:{datalabels:{color:"#000",align:"top",anchor:"end",font:{size:12,weight:"bold"},formatter:function(g){return g>0?g.toString():"0"}},legend:{position:"top",font:{size:16,weight:"bold"}},title:{display:!0,text:"Sheets Overview by Details",font:{size:20,weight:"bold"}}},scales:{x:{title:{display:!0,text:"Sheets",font:{size:16,weight:"bold"}},ticks:{autoSkip:!0,maxRotation:45,minRotation:0,font:{size:12,weight:"bold"}}},y:{beginAtZero:!0,title:{display:!0,text:"Quantity",font:{size:16,weight:"bold"}},ticks:{font:{size:14,weight:"bold"}}}}};return l.jsxs("div",{className:"chart-container",children:[l.jsx("h3",{children:"Comparison of Purchased vs Used Sheets"}),l.jsx("div",{className:"chart-wrapper",children:l.jsx(rb,{data:u,options:h})}),l.jsxs("div",{className:"chart-info",style:{display:"flex",justifyContent:"space-around",marginTop:"20px",flexWrap:"wrap",gap:"20px"},children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Total Sheets:"})," ",a]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Total Received:"})," ",n]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Total Used:"})," ",o]})]})]})},Xp=6048e5,qj=864e5,Mi=6e4,Ui=36e5,$j=1e3,ep=Symbol.for("constructDateFrom");function mt(r,t){return typeof r=="function"?r(t):r&&typeof r=="object"&&ep in r?r[ep](t):r instanceof Date?new r.constructor(t):new Date(t)}function ke(r,t){return mt(t||r,r)}function xo(r,t,a){const n=ke(r,a==null?void 0:a.in);return isNaN(t)?mt((a==null?void 0:a.in)||r,NaN):(t&&n.setDate(n.getDate()+t),n)}function Nd(r,t,a){const n=ke(r,a==null?void 0:a.in);if(isNaN(t))return mt(r,NaN);if(!t)return n;const o=n.getDate(),u=mt(r,n.getTime());u.setMonth(n.getMonth()+t+1,0);const h=u.getDate();return o>=h?u:(n.setFullYear(u.getFullYear(),u.getMonth(),o),n)}function Cd(r,t,a){return mt(r,+ke(r)+t)}function zj(r,t,a){return Cd(r,t*Ui)}let Bj={};function rr(){return Bj}function Ua(r,t){var g,m,p,y,x,v,S,C;const a=rr(),n=(C=(S=(y=(p=t==null?void 0:t.weekStartsOn)!=null?p:(m=(g=t==null?void 0:t.locale)==null?void 0:g.options)==null?void 0:m.weekStartsOn)!=null?y:a.weekStartsOn)!=null?S:(v=(x=a.locale)==null?void 0:x.options)==null?void 0:v.weekStartsOn)!=null?C:0,o=ke(r,t==null?void 0:t.in),u=o.getDay(),h=(u<n?7:0)+u-n;return o.setDate(o.getDate()-h),o.setHours(0,0,0,0),o}function ln(r,t){return Ua(r,lt(He({},t),{weekStartsOn:1}))}function Jp(r,t){const a=ke(r,t==null?void 0:t.in),n=a.getFullYear(),o=mt(a,0);o.setFullYear(n+1,0,4),o.setHours(0,0,0,0);const u=ln(o),h=mt(a,0);h.setFullYear(n,0,4),h.setHours(0,0,0,0);const g=ln(h);return a.getTime()>=u.getTime()?n+1:a.getTime()>=g.getTime()?n:n-1}function ho(r){const t=ke(r),a=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return a.setUTCFullYear(t.getFullYear()),+r-+a}function nr(r,...t){const a=mt.bind(null,t.find(n=>typeof n=="object"));return t.map(a)}function hd(r,t){const a=ke(r,t==null?void 0:t.in);return a.setHours(0,0,0,0),a}function Zp(r,t,a){const[n,o]=nr(a==null?void 0:a.in,r,t),u=hd(n),h=hd(o),g=+u-ho(u),m=+h-ho(h);return Math.round((g-m)/qj)}function Ij(r,t){const a=Jp(r,t),n=mt(r,0);return n.setFullYear(a,0,4),n.setHours(0,0,0,0),ln(n)}function Pj(r,t,a){const n=ke(r,a==null?void 0:a.in);return n.setTime(n.getTime()+t*Mi),n}function Hj(r,t,a){return Nd(r,t*3,a)}function Yj(r,t,a){return Cd(r,t*1e3)}function Vj(r,t,a){return xo(r,t*7,a)}function Fj(r,t,a){return Nd(r,t*12,a)}function Si(r,t){const a=+ke(r)-+ke(t);return a<0?-1:a>0?1:a}function Qj(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function e0(r){return!(!Qj(r)&&typeof r!="number"||isNaN(+ke(r)))}function Gj(r,t,a){const[n,o]=nr(a==null?void 0:a.in,r,t),u=n.getFullYear()-o.getFullYear(),h=n.getMonth()-o.getMonth();return u*12+h}function Kj(r,t,a){const[n,o]=nr(a==null?void 0:a.in,r,t);return n.getFullYear()-o.getFullYear()}function t0(r,t,a){const[n,o]=nr(a==null?void 0:a.in,r,t),u=tp(n,o),h=Math.abs(Zp(n,o));n.setDate(n.getDate()-u*h);const g=+(tp(n,o)===-u),m=u*(h-g);return m===0?0:m}function tp(r,t){const a=r.getFullYear()-t.getFullYear()||r.getMonth()-t.getMonth()||r.getDate()-t.getDate()||r.getHours()-t.getHours()||r.getMinutes()-t.getMinutes()||r.getSeconds()-t.getSeconds()||r.getMilliseconds()-t.getMilliseconds();return a<0?-1:a>0?1:a}function Li(r){return t=>{const n=(r?Math[r]:Math.trunc)(t);return n===0?0:n}}function Wj(r,t,a){const[n,o]=nr(a==null?void 0:a.in,r,t),u=(+n-+o)/Ui;return Li(a==null?void 0:a.roundingMethod)(u)}function Ed(r,t){return+ke(r)-+ke(t)}function Xj(r,t,a){const n=Ed(r,t)/Mi;return Li(a==null?void 0:a.roundingMethod)(n)}function a0(r,t){const a=ke(r,t==null?void 0:t.in);return a.setHours(23,59,59,999),a}function s0(r,t){const a=ke(r,t==null?void 0:t.in),n=a.getMonth();return a.setFullYear(a.getFullYear(),n+1,0),a.setHours(23,59,59,999),a}function Jj(r,t){const a=ke(r,t==null?void 0:t.in);return+a0(a,t)==+s0(a,t)}function r0(r,t,a){const[n,o,u]=nr(a==null?void 0:a.in,r,r,t),h=Si(o,u),g=Math.abs(Gj(o,u));if(g<1)return 0;o.getMonth()===1&&o.getDate()>27&&o.setDate(30),o.setMonth(o.getMonth()-h*g);let m=Si(o,u)===-h;Jj(n)&&g===1&&Si(n,u)===1&&(m=!1);const p=h*(g-+m);return p===0?0:p}function Zj(r,t,a){const n=r0(r,t,a)/3;return Li(a==null?void 0:a.roundingMethod)(n)}function eS(r,t,a){const n=Ed(r,t)/1e3;return Li(a==null?void 0:a.roundingMethod)(n)}function tS(r,t,a){const n=t0(r,t,a)/7;return Li(a==null?void 0:a.roundingMethod)(n)}function aS(r,t,a){const[n,o]=nr(a==null?void 0:a.in,r,t),u=Si(n,o),h=Math.abs(Kj(n,o));n.setFullYear(1584),o.setFullYear(1584);const g=Si(n,o)===-u,m=u*(h-+g);return m===0?0:m}function sS(r,t){const a=ke(r,t==null?void 0:t.in),n=a.getMonth(),o=n-n%3;return a.setMonth(o,1),a.setHours(0,0,0,0),a}function rS(r,t){const a=ke(r,t==null?void 0:t.in);return a.setDate(1),a.setHours(0,0,0,0),a}function nS(r,t){const a=ke(r,t==null?void 0:t.in),n=a.getFullYear();return a.setFullYear(n+1,0,0),a.setHours(23,59,59,999),a}function n0(r,t){const a=ke(r,t==null?void 0:t.in);return a.setFullYear(a.getFullYear(),0,1),a.setHours(0,0,0,0),a}function iS(r,t){const a=ke(r,t==null?void 0:t.in);return a.setMinutes(59,59,999),a}function lS(r,t){var g,m,p,y;const a=rr(),n=(y=(p=a.weekStartsOn)!=null?p:(m=(g=a.locale)==null?void 0:g.options)==null?void 0:m.weekStartsOn)!=null?y:0,o=ke(r,t==null?void 0:t.in),u=o.getDay(),h=(u<n?-7:0)+6-(u-n);return o.setDate(o.getDate()+h),o.setHours(23,59,59,999),o}function oS(r,t){const a=ke(r,t==null?void 0:t.in);return a.setSeconds(59,999),a}function cS(r,t){const a=ke(r,t==null?void 0:t.in),n=a.getMonth(),o=n-n%3+3;return a.setMonth(o,0),a.setHours(23,59,59,999),a}function uS(r,t){const a=ke(r,t==null?void 0:t.in);return a.setMilliseconds(999),a}const dS={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},hS=(r,t,a)=>{let n;const o=dS[r];return typeof o=="string"?n=o:t===1?n=o.one:n=o.other.replace("{{count}}",t.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+n:n+" ago":n};function Xu(r){return(t={})=>{const a=t.width?String(t.width):r.defaultWidth;return r.formats[a]||r.formats[r.defaultWidth]}}const fS={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},mS={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},gS={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},pS={date:Xu({formats:fS,defaultWidth:"full"}),time:Xu({formats:mS,defaultWidth:"full"}),dateTime:Xu({formats:gS,defaultWidth:"full"})},yS={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},vS=(r,t,a,n)=>yS[r];function mi(r){return(t,a)=>{const n=a!=null&&a.context?String(a.context):"standalone";let o;if(n==="formatting"&&r.formattingValues){const h=r.defaultFormattingWidth||r.defaultWidth,g=a!=null&&a.width?String(a.width):h;o=r.formattingValues[g]||r.formattingValues[h]}else{const h=r.defaultWidth,g=a!=null&&a.width?String(a.width):r.defaultWidth;o=r.values[g]||r.values[h]}const u=r.argumentCallback?r.argumentCallback(t):t;return o[u]}}const bS={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},xS={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},wS={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},jS={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},SS={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},_S={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},NS=(r,t)=>{const a=Number(r),n=a%100;if(n>20||n<10)switch(n%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},CS={ordinalNumber:NS,era:mi({values:bS,defaultWidth:"wide"}),quarter:mi({values:xS,defaultWidth:"wide",argumentCallback:r=>r-1}),month:mi({values:wS,defaultWidth:"wide"}),day:mi({values:jS,defaultWidth:"wide"}),dayPeriod:mi({values:SS,defaultWidth:"wide",formattingValues:_S,defaultFormattingWidth:"wide"})};function gi(r){return(t,a={})=>{const n=a.width,o=n&&r.matchPatterns[n]||r.matchPatterns[r.defaultMatchWidth],u=t.match(o);if(!u)return null;const h=u[0],g=n&&r.parsePatterns[n]||r.parsePatterns[r.defaultParseWidth],m=Array.isArray(g)?TS(g,x=>x.test(h)):ES(g,x=>x.test(h));let p;p=r.valueCallback?r.valueCallback(m):m,p=a.valueCallback?a.valueCallback(p):p;const y=t.slice(h.length);return{value:p,rest:y}}}function ES(r,t){for(const a in r)if(Object.prototype.hasOwnProperty.call(r,a)&&t(r[a]))return a}function TS(r,t){for(let a=0;a<r.length;a++)if(t(r[a]))return a}function DS(r){return(t,a={})=>{const n=t.match(r.matchPattern);if(!n)return null;const o=n[0],u=t.match(r.parsePattern);if(!u)return null;let h=r.valueCallback?r.valueCallback(u[0]):u[0];h=a.valueCallback?a.valueCallback(h):h;const g=t.slice(o.length);return{value:h,rest:g}}}const OS=/^(\d+)(th|st|nd|rd)?/i,AS=/\d+/i,kS={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},RS={any:[/^b/i,/^(a|c)/i]},MS={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},US={any:[/1/i,/2/i,/3/i,/4/i]},LS={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},qS={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},$S={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},zS={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},BS={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},IS={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},PS={ordinalNumber:DS({matchPattern:OS,parsePattern:AS,valueCallback:r=>parseInt(r,10)}),era:gi({matchPatterns:kS,defaultMatchWidth:"wide",parsePatterns:RS,defaultParseWidth:"any"}),quarter:gi({matchPatterns:MS,defaultMatchWidth:"wide",parsePatterns:US,defaultParseWidth:"any",valueCallback:r=>r+1}),month:gi({matchPatterns:LS,defaultMatchWidth:"wide",parsePatterns:qS,defaultParseWidth:"any"}),day:gi({matchPatterns:$S,defaultMatchWidth:"wide",parsePatterns:zS,defaultParseWidth:"any"}),dayPeriod:gi({matchPatterns:BS,defaultMatchWidth:"any",parsePatterns:IS,defaultParseWidth:"any"})},i0={code:"en-US",formatDistance:hS,formatLong:pS,formatRelative:vS,localize:CS,match:PS,options:{weekStartsOn:0,firstWeekContainsDate:1}};function HS(r,t){const a=ke(r,t==null?void 0:t.in);return Zp(a,n0(a))+1}function l0(r,t){const a=ke(r,t==null?void 0:t.in),n=+ln(a)-+Ij(a);return Math.round(n/Xp)+1}function Td(r,t){var y,x,v,S,C,T,A,I;const a=ke(r,t==null?void 0:t.in),n=a.getFullYear(),o=rr(),u=(I=(A=(S=(v=t==null?void 0:t.firstWeekContainsDate)!=null?v:(x=(y=t==null?void 0:t.locale)==null?void 0:y.options)==null?void 0:x.firstWeekContainsDate)!=null?S:o.firstWeekContainsDate)!=null?A:(T=(C=o.locale)==null?void 0:C.options)==null?void 0:T.firstWeekContainsDate)!=null?I:1,h=mt((t==null?void 0:t.in)||r,0);h.setFullYear(n+1,0,u),h.setHours(0,0,0,0);const g=Ua(h,t),m=mt((t==null?void 0:t.in)||r,0);m.setFullYear(n,0,u),m.setHours(0,0,0,0);const p=Ua(m,t);return+a>=+g?n+1:+a>=+p?n:n-1}function YS(r,t){var g,m,p,y,x,v,S,C;const a=rr(),n=(C=(S=(y=(p=t==null?void 0:t.firstWeekContainsDate)!=null?p:(m=(g=t==null?void 0:t.locale)==null?void 0:g.options)==null?void 0:m.firstWeekContainsDate)!=null?y:a.firstWeekContainsDate)!=null?S:(v=(x=a.locale)==null?void 0:x.options)==null?void 0:v.firstWeekContainsDate)!=null?C:1,o=Td(r,t),u=mt((t==null?void 0:t.in)||r,0);return u.setFullYear(o,0,n),u.setHours(0,0,0,0),Ua(u,t)}function o0(r,t){const a=ke(r,t==null?void 0:t.in),n=+Ua(a,t)-+YS(a,t);return Math.round(n/Xp)+1}function Xe(r,t){const a=r<0?"-":"",n=Math.abs(r).toString().padStart(t,"0");return a+n}const Es={y(r,t){const a=r.getFullYear(),n=a>0?a:1-a;return Xe(t==="yy"?n%100:n,t.length)},M(r,t){const a=r.getMonth();return t==="M"?String(a+1):Xe(a+1,2)},d(r,t){return Xe(r.getDate(),t.length)},a(r,t){const a=r.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];default:return a==="am"?"a.m.":"p.m."}},h(r,t){return Xe(r.getHours()%12||12,t.length)},H(r,t){return Xe(r.getHours(),t.length)},m(r,t){return Xe(r.getMinutes(),t.length)},s(r,t){return Xe(r.getSeconds(),t.length)},S(r,t){const a=t.length,n=r.getMilliseconds(),o=Math.trunc(n*Math.pow(10,a-3));return Xe(o,t.length)}},Xr={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ap={G:function(r,t,a){const n=r.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return a.era(n,{width:"abbreviated"});case"GGGGG":return a.era(n,{width:"narrow"});default:return a.era(n,{width:"wide"})}},y:function(r,t,a){if(t==="yo"){const n=r.getFullYear(),o=n>0?n:1-n;return a.ordinalNumber(o,{unit:"year"})}return Es.y(r,t)},Y:function(r,t,a,n){const o=Td(r,n),u=o>0?o:1-o;if(t==="YY"){const h=u%100;return Xe(h,2)}return t==="Yo"?a.ordinalNumber(u,{unit:"year"}):Xe(u,t.length)},R:function(r,t){const a=Jp(r);return Xe(a,t.length)},u:function(r,t){const a=r.getFullYear();return Xe(a,t.length)},Q:function(r,t,a){const n=Math.ceil((r.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return Xe(n,2);case"Qo":return a.ordinalNumber(n,{unit:"quarter"});case"QQQ":return a.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(n,{width:"narrow",context:"formatting"});default:return a.quarter(n,{width:"wide",context:"formatting"})}},q:function(r,t,a){const n=Math.ceil((r.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return Xe(n,2);case"qo":return a.ordinalNumber(n,{unit:"quarter"});case"qqq":return a.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(n,{width:"narrow",context:"standalone"});default:return a.quarter(n,{width:"wide",context:"standalone"})}},M:function(r,t,a){const n=r.getMonth();switch(t){case"M":case"MM":return Es.M(r,t);case"Mo":return a.ordinalNumber(n+1,{unit:"month"});case"MMM":return a.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(n,{width:"narrow",context:"formatting"});default:return a.month(n,{width:"wide",context:"formatting"})}},L:function(r,t,a){const n=r.getMonth();switch(t){case"L":return String(n+1);case"LL":return Xe(n+1,2);case"Lo":return a.ordinalNumber(n+1,{unit:"month"});case"LLL":return a.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(n,{width:"narrow",context:"standalone"});default:return a.month(n,{width:"wide",context:"standalone"})}},w:function(r,t,a,n){const o=o0(r,n);return t==="wo"?a.ordinalNumber(o,{unit:"week"}):Xe(o,t.length)},I:function(r,t,a){const n=l0(r);return t==="Io"?a.ordinalNumber(n,{unit:"week"}):Xe(n,t.length)},d:function(r,t,a){return t==="do"?a.ordinalNumber(r.getDate(),{unit:"date"}):Es.d(r,t)},D:function(r,t,a){const n=HS(r);return t==="Do"?a.ordinalNumber(n,{unit:"dayOfYear"}):Xe(n,t.length)},E:function(r,t,a){const n=r.getDay();switch(t){case"E":case"EE":case"EEE":return a.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(n,{width:"short",context:"formatting"});default:return a.day(n,{width:"wide",context:"formatting"})}},e:function(r,t,a,n){const o=r.getDay(),u=(o-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(u);case"ee":return Xe(u,2);case"eo":return a.ordinalNumber(u,{unit:"day"});case"eee":return a.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(o,{width:"short",context:"formatting"});default:return a.day(o,{width:"wide",context:"formatting"})}},c:function(r,t,a,n){const o=r.getDay(),u=(o-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(u);case"cc":return Xe(u,t.length);case"co":return a.ordinalNumber(u,{unit:"day"});case"ccc":return a.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(o,{width:"narrow",context:"standalone"});case"cccccc":return a.day(o,{width:"short",context:"standalone"});default:return a.day(o,{width:"wide",context:"standalone"})}},i:function(r,t,a){const n=r.getDay(),o=n===0?7:n;switch(t){case"i":return String(o);case"ii":return Xe(o,t.length);case"io":return a.ordinalNumber(o,{unit:"day"});case"iii":return a.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(n,{width:"short",context:"formatting"});default:return a.day(n,{width:"wide",context:"formatting"})}},a:function(r,t,a){const o=r.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(o,{width:"narrow",context:"formatting"});default:return a.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(r,t,a){const n=r.getHours();let o;switch(n===12?o=Xr.noon:n===0?o=Xr.midnight:o=n/12>=1?"pm":"am",t){case"b":case"bb":return a.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(o,{width:"narrow",context:"formatting"});default:return a.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(r,t,a){const n=r.getHours();let o;switch(n>=17?o=Xr.evening:n>=12?o=Xr.afternoon:n>=4?o=Xr.morning:o=Xr.night,t){case"B":case"BB":case"BBB":return a.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(o,{width:"narrow",context:"formatting"});default:return a.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(r,t,a){if(t==="ho"){let n=r.getHours()%12;return n===0&&(n=12),a.ordinalNumber(n,{unit:"hour"})}return Es.h(r,t)},H:function(r,t,a){return t==="Ho"?a.ordinalNumber(r.getHours(),{unit:"hour"}):Es.H(r,t)},K:function(r,t,a){const n=r.getHours()%12;return t==="Ko"?a.ordinalNumber(n,{unit:"hour"}):Xe(n,t.length)},k:function(r,t,a){let n=r.getHours();return n===0&&(n=24),t==="ko"?a.ordinalNumber(n,{unit:"hour"}):Xe(n,t.length)},m:function(r,t,a){return t==="mo"?a.ordinalNumber(r.getMinutes(),{unit:"minute"}):Es.m(r,t)},s:function(r,t,a){return t==="so"?a.ordinalNumber(r.getSeconds(),{unit:"second"}):Es.s(r,t)},S:function(r,t){return Es.S(r,t)},X:function(r,t,a){const n=r.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return rp(n);case"XXXX":case"XX":return er(n);default:return er(n,":")}},x:function(r,t,a){const n=r.getTimezoneOffset();switch(t){case"x":return rp(n);case"xxxx":case"xx":return er(n);default:return er(n,":")}},O:function(r,t,a){const n=r.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+sp(n,":");default:return"GMT"+er(n,":")}},z:function(r,t,a){const n=r.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+sp(n,":");default:return"GMT"+er(n,":")}},t:function(r,t,a){const n=Math.trunc(+r/1e3);return Xe(n,t.length)},T:function(r,t,a){return Xe(+r,t.length)}};function sp(r,t=""){const a=r>0?"-":"+",n=Math.abs(r),o=Math.trunc(n/60),u=n%60;return u===0?a+String(o):a+String(o)+t+Xe(u,2)}function rp(r,t){return r%60===0?(r>0?"-":"+")+Xe(Math.abs(r)/60,2):er(r,t)}function er(r,t=""){const a=r>0?"-":"+",n=Math.abs(r),o=Xe(Math.trunc(n/60),2),u=Xe(n%60,2);return a+o+t+u}const np=(r,t)=>{switch(r){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},c0=(r,t)=>{switch(r){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},VS=(r,t)=>{const a=r.match(/(P+)(p+)?/)||[],n=a[1],o=a[2];if(!o)return np(r,t);let u;switch(n){case"P":u=t.dateTime({width:"short"});break;case"PP":u=t.dateTime({width:"medium"});break;case"PPP":u=t.dateTime({width:"long"});break;default:u=t.dateTime({width:"full"});break}return u.replace("{{date}}",np(n,t)).replace("{{time}}",c0(o,t))},fd={p:c0,P:VS},FS=/^D+$/,QS=/^Y+$/,GS=["D","DD","YY","YYYY"];function u0(r){return FS.test(r)}function d0(r){return QS.test(r)}function md(r,t,a){const n=KS(r,t,a);if(console.warn(n),GS.includes(r))throw new RangeError(n)}function KS(r,t,a){const n=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${t}\`) for formatting ${n} to the input \`${a}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const WS=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,XS=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,JS=/^'([^]*?)'?$/,ZS=/''/g,e_=/[a-zA-Z]/;function t_(r,t,a){var y,x,v,S,C,T,A,I,G,P,te,he,X,le,O,D,E,Y;const n=rr(),o=(x=(y=a==null?void 0:a.locale)!=null?y:n.locale)!=null?x:i0,u=(P=(G=(T=(C=a==null?void 0:a.firstWeekContainsDate)!=null?C:(S=(v=a==null?void 0:a.locale)==null?void 0:v.options)==null?void 0:S.firstWeekContainsDate)!=null?T:n.firstWeekContainsDate)!=null?G:(I=(A=n.locale)==null?void 0:A.options)==null?void 0:I.firstWeekContainsDate)!=null?P:1,h=(Y=(E=(le=(X=a==null?void 0:a.weekStartsOn)!=null?X:(he=(te=a==null?void 0:a.locale)==null?void 0:te.options)==null?void 0:he.weekStartsOn)!=null?le:n.weekStartsOn)!=null?E:(D=(O=n.locale)==null?void 0:O.options)==null?void 0:D.weekStartsOn)!=null?Y:0,g=ke(r,a==null?void 0:a.in);if(!e0(g))throw new RangeError("Invalid time value");let m=t.match(XS).map(W=>{const ue=W[0];if(ue==="p"||ue==="P"){const pe=fd[ue];return pe(W,o.formatLong)}return W}).join("").match(WS).map(W=>{if(W==="''")return{isToken:!1,value:"'"};const ue=W[0];if(ue==="'")return{isToken:!1,value:a_(W)};if(ap[ue])return{isToken:!0,value:W};if(ue.match(e_))throw new RangeError("Format string contains an unescaped latin alphabet character `"+ue+"`");return{isToken:!1,value:W}});o.localize.preprocessor&&(m=o.localize.preprocessor(g,m));const p={firstWeekContainsDate:u,weekStartsOn:h,locale:o};return m.map(W=>{if(!W.isToken)return W.value;const ue=W.value;(!(a!=null&&a.useAdditionalWeekYearTokens)&&d0(ue)||!(a!=null&&a.useAdditionalDayOfYearTokens)&&u0(ue))&&md(ue,t,String(r));const pe=ap[ue[0]];return pe(g,ue,o.localize,p)}).join("")}function a_(r){const t=r.match(JS);return t?t[1].replace(ZS,"'"):r}function s_(){return Object.assign({},rr())}function r_(r,t){const a=ke(r,t==null?void 0:t.in).getDay();return a===0?7:a}function n_(r,t){const a=i_(t)?new t(0):mt(t,0);return a.setFullYear(r.getFullYear(),r.getMonth(),r.getDate()),a.setHours(r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()),a}function i_(r){var t;return typeof r=="function"&&((t=r.prototype)==null?void 0:t.constructor)===r}const l_=10;class h0{constructor(){ge(this,"subPriority",0)}validate(t,a){return!0}}class o_ extends h0{constructor(t,a,n,o,u){super(),this.value=t,this.validateValue=a,this.setValue=n,this.priority=o,u&&(this.subPriority=u)}validate(t,a){return this.validateValue(t,this.value,a)}set(t,a,n){return this.setValue(t,a,this.value,n)}}class c_ extends h0{constructor(a,n){super();ge(this,"priority",l_);ge(this,"subPriority",-1);this.context=a||(o=>mt(n,o))}set(a,n){return n.timestampIsSet?a:mt(a,n_(a,this.context))}}class Qe{run(t,a,n,o){const u=this.parse(t,a,n,o);return u?{setter:new o_(u.value,this.validate,this.set,this.priority,this.subPriority),rest:u.rest}:null}validate(t,a,n){return!0}}class u_ extends Qe{constructor(){super(...arguments);ge(this,"priority",140);ge(this,"incompatibleTokens",["R","u","t","T"])}parse(a,n,o){switch(n){case"G":case"GG":case"GGG":return o.era(a,{width:"abbreviated"})||o.era(a,{width:"narrow"});case"GGGGG":return o.era(a,{width:"narrow"});default:return o.era(a,{width:"wide"})||o.era(a,{width:"abbreviated"})||o.era(a,{width:"narrow"})}}set(a,n,o){return n.era=o,a.setFullYear(o,0,1),a.setHours(0,0,0,0),a}}const vt={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Ra={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function bt(r,t){return r&&{value:t(r.value),rest:r.rest}}function ct(r,t){const a=t.match(r);return a?{value:parseInt(a[0],10),rest:t.slice(a[0].length)}:null}function Ma(r,t){const a=t.match(r);if(!a)return null;if(a[0]==="Z")return{value:0,rest:t.slice(1)};const n=a[1]==="+"?1:-1,o=a[2]?parseInt(a[2],10):0,u=a[3]?parseInt(a[3],10):0,h=a[5]?parseInt(a[5],10):0;return{value:n*(o*Ui+u*Mi+h*$j),rest:t.slice(a[0].length)}}function f0(r){return ct(vt.anyDigitsSigned,r)}function gt(r,t){switch(r){case 1:return ct(vt.singleDigit,t);case 2:return ct(vt.twoDigits,t);case 3:return ct(vt.threeDigits,t);case 4:return ct(vt.fourDigits,t);default:return ct(new RegExp("^\\d{1,"+r+"}"),t)}}function fo(r,t){switch(r){case 1:return ct(vt.singleDigitSigned,t);case 2:return ct(vt.twoDigitsSigned,t);case 3:return ct(vt.threeDigitsSigned,t);case 4:return ct(vt.fourDigitsSigned,t);default:return ct(new RegExp("^-?\\d{1,"+r+"}"),t)}}function Dd(r){switch(r){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function m0(r,t){const a=t>0,n=a?t:1-t;let o;if(n<=50)o=r||100;else{const u=n+50,h=Math.trunc(u/100)*100,g=r>=u%100;o=r+h-(g?100:0)}return a?o:1-o}function g0(r){return r%400===0||r%4===0&&r%100!==0}class d_ extends Qe{constructor(){super(...arguments);ge(this,"priority",130);ge(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(a,n,o){const u=h=>({year:h,isTwoDigitYear:n==="yy"});switch(n){case"y":return bt(gt(4,a),u);case"yo":return bt(o.ordinalNumber(a,{unit:"year"}),u);default:return bt(gt(n.length,a),u)}}validate(a,n){return n.isTwoDigitYear||n.year>0}set(a,n,o){const u=a.getFullYear();if(o.isTwoDigitYear){const g=m0(o.year,u);return a.setFullYear(g,0,1),a.setHours(0,0,0,0),a}const h=!("era"in n)||n.era===1?o.year:1-o.year;return a.setFullYear(h,0,1),a.setHours(0,0,0,0),a}}class h_ extends Qe{constructor(){super(...arguments);ge(this,"priority",130);ge(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(a,n,o){const u=h=>({year:h,isTwoDigitYear:n==="YY"});switch(n){case"Y":return bt(gt(4,a),u);case"Yo":return bt(o.ordinalNumber(a,{unit:"year"}),u);default:return bt(gt(n.length,a),u)}}validate(a,n){return n.isTwoDigitYear||n.year>0}set(a,n,o,u){const h=Td(a,u);if(o.isTwoDigitYear){const m=m0(o.year,h);return a.setFullYear(m,0,u.firstWeekContainsDate),a.setHours(0,0,0,0),Ua(a,u)}const g=!("era"in n)||n.era===1?o.year:1-o.year;return a.setFullYear(g,0,u.firstWeekContainsDate),a.setHours(0,0,0,0),Ua(a,u)}}class f_ extends Qe{constructor(){super(...arguments);ge(this,"priority",130);ge(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(a,n){return fo(n==="R"?4:n.length,a)}set(a,n,o){const u=mt(a,0);return u.setFullYear(o,0,4),u.setHours(0,0,0,0),ln(u)}}class m_ extends Qe{constructor(){super(...arguments);ge(this,"priority",130);ge(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(a,n){return fo(n==="u"?4:n.length,a)}set(a,n,o){return a.setFullYear(o,0,1),a.setHours(0,0,0,0),a}}class g_ extends Qe{constructor(){super(...arguments);ge(this,"priority",120);ge(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(a,n,o){switch(n){case"Q":case"QQ":return gt(n.length,a);case"Qo":return o.ordinalNumber(a,{unit:"quarter"});case"QQQ":return o.quarter(a,{width:"abbreviated",context:"formatting"})||o.quarter(a,{width:"narrow",context:"formatting"});case"QQQQQ":return o.quarter(a,{width:"narrow",context:"formatting"});default:return o.quarter(a,{width:"wide",context:"formatting"})||o.quarter(a,{width:"abbreviated",context:"formatting"})||o.quarter(a,{width:"narrow",context:"formatting"})}}validate(a,n){return n>=1&&n<=4}set(a,n,o){return a.setMonth((o-1)*3,1),a.setHours(0,0,0,0),a}}class p_ extends Qe{constructor(){super(...arguments);ge(this,"priority",120);ge(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(a,n,o){switch(n){case"q":case"qq":return gt(n.length,a);case"qo":return o.ordinalNumber(a,{unit:"quarter"});case"qqq":return o.quarter(a,{width:"abbreviated",context:"standalone"})||o.quarter(a,{width:"narrow",context:"standalone"});case"qqqqq":return o.quarter(a,{width:"narrow",context:"standalone"});default:return o.quarter(a,{width:"wide",context:"standalone"})||o.quarter(a,{width:"abbreviated",context:"standalone"})||o.quarter(a,{width:"narrow",context:"standalone"})}}validate(a,n){return n>=1&&n<=4}set(a,n,o){return a.setMonth((o-1)*3,1),a.setHours(0,0,0,0),a}}class y_ extends Qe{constructor(){super(...arguments);ge(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);ge(this,"priority",110)}parse(a,n,o){const u=h=>h-1;switch(n){case"M":return bt(ct(vt.month,a),u);case"MM":return bt(gt(2,a),u);case"Mo":return bt(o.ordinalNumber(a,{unit:"month"}),u);case"MMM":return o.month(a,{width:"abbreviated",context:"formatting"})||o.month(a,{width:"narrow",context:"formatting"});case"MMMMM":return o.month(a,{width:"narrow",context:"formatting"});default:return o.month(a,{width:"wide",context:"formatting"})||o.month(a,{width:"abbreviated",context:"formatting"})||o.month(a,{width:"narrow",context:"formatting"})}}validate(a,n){return n>=0&&n<=11}set(a,n,o){return a.setMonth(o,1),a.setHours(0,0,0,0),a}}class v_ extends Qe{constructor(){super(...arguments);ge(this,"priority",110);ge(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(a,n,o){const u=h=>h-1;switch(n){case"L":return bt(ct(vt.month,a),u);case"LL":return bt(gt(2,a),u);case"Lo":return bt(o.ordinalNumber(a,{unit:"month"}),u);case"LLL":return o.month(a,{width:"abbreviated",context:"standalone"})||o.month(a,{width:"narrow",context:"standalone"});case"LLLLL":return o.month(a,{width:"narrow",context:"standalone"});default:return o.month(a,{width:"wide",context:"standalone"})||o.month(a,{width:"abbreviated",context:"standalone"})||o.month(a,{width:"narrow",context:"standalone"})}}validate(a,n){return n>=0&&n<=11}set(a,n,o){return a.setMonth(o,1),a.setHours(0,0,0,0),a}}function b_(r,t,a){const n=ke(r,a==null?void 0:a.in),o=o0(n,a)-t;return n.setDate(n.getDate()-o*7),ke(n,a==null?void 0:a.in)}class x_ extends Qe{constructor(){super(...arguments);ge(this,"priority",100);ge(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(a,n,o){switch(n){case"w":return ct(vt.week,a);case"wo":return o.ordinalNumber(a,{unit:"week"});default:return gt(n.length,a)}}validate(a,n){return n>=1&&n<=53}set(a,n,o,u){return Ua(b_(a,o,u),u)}}function w_(r,t,a){const n=ke(r,a==null?void 0:a.in),o=l0(n,a)-t;return n.setDate(n.getDate()-o*7),n}class j_ extends Qe{constructor(){super(...arguments);ge(this,"priority",100);ge(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(a,n,o){switch(n){case"I":return ct(vt.week,a);case"Io":return o.ordinalNumber(a,{unit:"week"});default:return gt(n.length,a)}}validate(a,n){return n>=1&&n<=53}set(a,n,o){return ln(w_(a,o))}}const S_=[31,28,31,30,31,30,31,31,30,31,30,31],__=[31,29,31,30,31,30,31,31,30,31,30,31];class N_ extends Qe{constructor(){super(...arguments);ge(this,"priority",90);ge(this,"subPriority",1);ge(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(a,n,o){switch(n){case"d":return ct(vt.date,a);case"do":return o.ordinalNumber(a,{unit:"date"});default:return gt(n.length,a)}}validate(a,n){const o=a.getFullYear(),u=g0(o),h=a.getMonth();return u?n>=1&&n<=__[h]:n>=1&&n<=S_[h]}set(a,n,o){return a.setDate(o),a.setHours(0,0,0,0),a}}class C_ extends Qe{constructor(){super(...arguments);ge(this,"priority",90);ge(this,"subpriority",1);ge(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(a,n,o){switch(n){case"D":case"DD":return ct(vt.dayOfYear,a);case"Do":return o.ordinalNumber(a,{unit:"date"});default:return gt(n.length,a)}}validate(a,n){const o=a.getFullYear();return g0(o)?n>=1&&n<=366:n>=1&&n<=365}set(a,n,o){return a.setMonth(0,o),a.setHours(0,0,0,0),a}}function Od(r,t,a){var x,v,S,C,T,A,I,G;const n=rr(),o=(G=(I=(C=(S=a==null?void 0:a.weekStartsOn)!=null?S:(v=(x=a==null?void 0:a.locale)==null?void 0:x.options)==null?void 0:v.weekStartsOn)!=null?C:n.weekStartsOn)!=null?I:(A=(T=n.locale)==null?void 0:T.options)==null?void 0:A.weekStartsOn)!=null?G:0,u=ke(r,a==null?void 0:a.in),h=u.getDay(),m=(t%7+7)%7,p=7-o,y=t<0||t>6?t-(h+p)%7:(m+p)%7-(h+p)%7;return xo(u,y,a)}class E_ extends Qe{constructor(){super(...arguments);ge(this,"priority",90);ge(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(a,n,o){switch(n){case"E":case"EE":case"EEE":return o.day(a,{width:"abbreviated",context:"formatting"})||o.day(a,{width:"short",context:"formatting"})||o.day(a,{width:"narrow",context:"formatting"});case"EEEEE":return o.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(a,{width:"short",context:"formatting"})||o.day(a,{width:"narrow",context:"formatting"});default:return o.day(a,{width:"wide",context:"formatting"})||o.day(a,{width:"abbreviated",context:"formatting"})||o.day(a,{width:"short",context:"formatting"})||o.day(a,{width:"narrow",context:"formatting"})}}validate(a,n){return n>=0&&n<=6}set(a,n,o,u){return a=Od(a,o,u),a.setHours(0,0,0,0),a}}class T_ extends Qe{constructor(){super(...arguments);ge(this,"priority",90);ge(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(a,n,o,u){const h=g=>{const m=Math.floor((g-1)/7)*7;return(g+u.weekStartsOn+6)%7+m};switch(n){case"e":case"ee":return bt(gt(n.length,a),h);case"eo":return bt(o.ordinalNumber(a,{unit:"day"}),h);case"eee":return o.day(a,{width:"abbreviated",context:"formatting"})||o.day(a,{width:"short",context:"formatting"})||o.day(a,{width:"narrow",context:"formatting"});case"eeeee":return o.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return o.day(a,{width:"short",context:"formatting"})||o.day(a,{width:"narrow",context:"formatting"});default:return o.day(a,{width:"wide",context:"formatting"})||o.day(a,{width:"abbreviated",context:"formatting"})||o.day(a,{width:"short",context:"formatting"})||o.day(a,{width:"narrow",context:"formatting"})}}validate(a,n){return n>=0&&n<=6}set(a,n,o,u){return a=Od(a,o,u),a.setHours(0,0,0,0),a}}class D_ extends Qe{constructor(){super(...arguments);ge(this,"priority",90);ge(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(a,n,o,u){const h=g=>{const m=Math.floor((g-1)/7)*7;return(g+u.weekStartsOn+6)%7+m};switch(n){case"c":case"cc":return bt(gt(n.length,a),h);case"co":return bt(o.ordinalNumber(a,{unit:"day"}),h);case"ccc":return o.day(a,{width:"abbreviated",context:"standalone"})||o.day(a,{width:"short",context:"standalone"})||o.day(a,{width:"narrow",context:"standalone"});case"ccccc":return o.day(a,{width:"narrow",context:"standalone"});case"cccccc":return o.day(a,{width:"short",context:"standalone"})||o.day(a,{width:"narrow",context:"standalone"});default:return o.day(a,{width:"wide",context:"standalone"})||o.day(a,{width:"abbreviated",context:"standalone"})||o.day(a,{width:"short",context:"standalone"})||o.day(a,{width:"narrow",context:"standalone"})}}validate(a,n){return n>=0&&n<=6}set(a,n,o,u){return a=Od(a,o,u),a.setHours(0,0,0,0),a}}function O_(r,t,a){const n=ke(r,a==null?void 0:a.in),o=r_(n,a),u=t-o;return xo(n,u,a)}class A_ extends Qe{constructor(){super(...arguments);ge(this,"priority",90);ge(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(a,n,o){const u=h=>h===0?7:h;switch(n){case"i":case"ii":return gt(n.length,a);case"io":return o.ordinalNumber(a,{unit:"day"});case"iii":return bt(o.day(a,{width:"abbreviated",context:"formatting"})||o.day(a,{width:"short",context:"formatting"})||o.day(a,{width:"narrow",context:"formatting"}),u);case"iiiii":return bt(o.day(a,{width:"narrow",context:"formatting"}),u);case"iiiiii":return bt(o.day(a,{width:"short",context:"formatting"})||o.day(a,{width:"narrow",context:"formatting"}),u);default:return bt(o.day(a,{width:"wide",context:"formatting"})||o.day(a,{width:"abbreviated",context:"formatting"})||o.day(a,{width:"short",context:"formatting"})||o.day(a,{width:"narrow",context:"formatting"}),u)}}validate(a,n){return n>=1&&n<=7}set(a,n,o){return a=O_(a,o),a.setHours(0,0,0,0),a}}class k_ extends Qe{constructor(){super(...arguments);ge(this,"priority",80);ge(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(a,n,o){switch(n){case"a":case"aa":case"aaa":return o.dayPeriod(a,{width:"abbreviated",context:"formatting"})||o.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaaa":return o.dayPeriod(a,{width:"narrow",context:"formatting"});default:return o.dayPeriod(a,{width:"wide",context:"formatting"})||o.dayPeriod(a,{width:"abbreviated",context:"formatting"})||o.dayPeriod(a,{width:"narrow",context:"formatting"})}}set(a,n,o){return a.setHours(Dd(o),0,0,0),a}}class R_ extends Qe{constructor(){super(...arguments);ge(this,"priority",80);ge(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(a,n,o){switch(n){case"b":case"bb":case"bbb":return o.dayPeriod(a,{width:"abbreviated",context:"formatting"})||o.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbbb":return o.dayPeriod(a,{width:"narrow",context:"formatting"});default:return o.dayPeriod(a,{width:"wide",context:"formatting"})||o.dayPeriod(a,{width:"abbreviated",context:"formatting"})||o.dayPeriod(a,{width:"narrow",context:"formatting"})}}set(a,n,o){return a.setHours(Dd(o),0,0,0),a}}class M_ extends Qe{constructor(){super(...arguments);ge(this,"priority",80);ge(this,"incompatibleTokens",["a","b","t","T"])}parse(a,n,o){switch(n){case"B":case"BB":case"BBB":return o.dayPeriod(a,{width:"abbreviated",context:"formatting"})||o.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBBB":return o.dayPeriod(a,{width:"narrow",context:"formatting"});default:return o.dayPeriod(a,{width:"wide",context:"formatting"})||o.dayPeriod(a,{width:"abbreviated",context:"formatting"})||o.dayPeriod(a,{width:"narrow",context:"formatting"})}}set(a,n,o){return a.setHours(Dd(o),0,0,0),a}}class U_ extends Qe{constructor(){super(...arguments);ge(this,"priority",70);ge(this,"incompatibleTokens",["H","K","k","t","T"])}parse(a,n,o){switch(n){case"h":return ct(vt.hour12h,a);case"ho":return o.ordinalNumber(a,{unit:"hour"});default:return gt(n.length,a)}}validate(a,n){return n>=1&&n<=12}set(a,n,o){const u=a.getHours()>=12;return u&&o<12?a.setHours(o+12,0,0,0):!u&&o===12?a.setHours(0,0,0,0):a.setHours(o,0,0,0),a}}class L_ extends Qe{constructor(){super(...arguments);ge(this,"priority",70);ge(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(a,n,o){switch(n){case"H":return ct(vt.hour23h,a);case"Ho":return o.ordinalNumber(a,{unit:"hour"});default:return gt(n.length,a)}}validate(a,n){return n>=0&&n<=23}set(a,n,o){return a.setHours(o,0,0,0),a}}class q_ extends Qe{constructor(){super(...arguments);ge(this,"priority",70);ge(this,"incompatibleTokens",["h","H","k","t","T"])}parse(a,n,o){switch(n){case"K":return ct(vt.hour11h,a);case"Ko":return o.ordinalNumber(a,{unit:"hour"});default:return gt(n.length,a)}}validate(a,n){return n>=0&&n<=11}set(a,n,o){return a.getHours()>=12&&o<12?a.setHours(o+12,0,0,0):a.setHours(o,0,0,0),a}}class $_ extends Qe{constructor(){super(...arguments);ge(this,"priority",70);ge(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(a,n,o){switch(n){case"k":return ct(vt.hour24h,a);case"ko":return o.ordinalNumber(a,{unit:"hour"});default:return gt(n.length,a)}}validate(a,n){return n>=1&&n<=24}set(a,n,o){const u=o<=24?o%24:o;return a.setHours(u,0,0,0),a}}class z_ extends Qe{constructor(){super(...arguments);ge(this,"priority",60);ge(this,"incompatibleTokens",["t","T"])}parse(a,n,o){switch(n){case"m":return ct(vt.minute,a);case"mo":return o.ordinalNumber(a,{unit:"minute"});default:return gt(n.length,a)}}validate(a,n){return n>=0&&n<=59}set(a,n,o){return a.setMinutes(o,0,0),a}}class B_ extends Qe{constructor(){super(...arguments);ge(this,"priority",50);ge(this,"incompatibleTokens",["t","T"])}parse(a,n,o){switch(n){case"s":return ct(vt.second,a);case"so":return o.ordinalNumber(a,{unit:"second"});default:return gt(n.length,a)}}validate(a,n){return n>=0&&n<=59}set(a,n,o){return a.setSeconds(o,0),a}}class I_ extends Qe{constructor(){super(...arguments);ge(this,"priority",30);ge(this,"incompatibleTokens",["t","T"])}parse(a,n){const o=u=>Math.trunc(u*Math.pow(10,-n.length+3));return bt(gt(n.length,a),o)}set(a,n,o){return a.setMilliseconds(o),a}}class P_ extends Qe{constructor(){super(...arguments);ge(this,"priority",10);ge(this,"incompatibleTokens",["t","T","x"])}parse(a,n){switch(n){case"X":return Ma(Ra.basicOptionalMinutes,a);case"XX":return Ma(Ra.basic,a);case"XXXX":return Ma(Ra.basicOptionalSeconds,a);case"XXXXX":return Ma(Ra.extendedOptionalSeconds,a);default:return Ma(Ra.extended,a)}}set(a,n,o){return n.timestampIsSet?a:mt(a,a.getTime()-ho(a)-o)}}class H_ extends Qe{constructor(){super(...arguments);ge(this,"priority",10);ge(this,"incompatibleTokens",["t","T","X"])}parse(a,n){switch(n){case"x":return Ma(Ra.basicOptionalMinutes,a);case"xx":return Ma(Ra.basic,a);case"xxxx":return Ma(Ra.basicOptionalSeconds,a);case"xxxxx":return Ma(Ra.extendedOptionalSeconds,a);default:return Ma(Ra.extended,a)}}set(a,n,o){return n.timestampIsSet?a:mt(a,a.getTime()-ho(a)-o)}}class Y_ extends Qe{constructor(){super(...arguments);ge(this,"priority",40);ge(this,"incompatibleTokens","*")}parse(a){return f0(a)}set(a,n,o){return[mt(a,o*1e3),{timestampIsSet:!0}]}}class V_ extends Qe{constructor(){super(...arguments);ge(this,"priority",20);ge(this,"incompatibleTokens","*")}parse(a){return f0(a)}set(a,n,o){return[mt(a,o),{timestampIsSet:!0}]}}const F_={G:new u_,y:new d_,Y:new h_,R:new f_,u:new m_,Q:new g_,q:new p_,M:new y_,L:new v_,w:new x_,I:new j_,d:new N_,D:new C_,E:new E_,e:new T_,c:new D_,i:new A_,a:new k_,b:new R_,B:new M_,h:new U_,H:new L_,K:new q_,k:new $_,m:new z_,s:new B_,S:new I_,X:new P_,x:new H_,t:new Y_,T:new V_},Q_=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,G_=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,K_=/^'([^]*?)'?$/,W_=/''/g,X_=/\S/,J_=/[a-zA-Z]/;function Z_(r,t,a,n){var A,I,G,P,te,he,X,le,O,D,E,Y,W,ue,pe,we,k,M;const o=()=>mt((n==null?void 0:n.in)||a,NaN),u=s_(),h=(I=(A=n==null?void 0:n.locale)!=null?A:u.locale)!=null?I:i0,g=(D=(O=(he=(te=n==null?void 0:n.firstWeekContainsDate)!=null?te:(P=(G=n==null?void 0:n.locale)==null?void 0:G.options)==null?void 0:P.firstWeekContainsDate)!=null?he:u.firstWeekContainsDate)!=null?O:(le=(X=u.locale)==null?void 0:X.options)==null?void 0:le.firstWeekContainsDate)!=null?D:1,m=(M=(k=(ue=(W=n==null?void 0:n.weekStartsOn)!=null?W:(Y=(E=n==null?void 0:n.locale)==null?void 0:E.options)==null?void 0:Y.weekStartsOn)!=null?ue:u.weekStartsOn)!=null?k:(we=(pe=u.locale)==null?void 0:pe.options)==null?void 0:we.weekStartsOn)!=null?M:0;if(!t)return r?o():ke(a,n==null?void 0:n.in);const p={firstWeekContainsDate:g,weekStartsOn:m,locale:h},y=[new c_(n==null?void 0:n.in,a)],x=t.match(G_).map(F=>{const J=F[0];if(J in fd){const w=fd[J];return w(F,h.formatLong)}return F}).join("").match(Q_),v=[];for(let F of x){!(n!=null&&n.useAdditionalWeekYearTokens)&&d0(F)&&md(F,t,r),!(n!=null&&n.useAdditionalDayOfYearTokens)&&u0(F)&&md(F,t,r);const J=F[0],w=F_[J];if(w){const{incompatibleTokens:_}=w;if(Array.isArray(_)){const z=v.find(ae=>_.includes(ae.token)||ae.token===J);if(z)throw new RangeError(`The format string mustn't contain \`${z.fullToken}\` and \`${F}\` at the same time`)}else if(w.incompatibleTokens==="*"&&v.length>0)throw new RangeError(`The format string mustn't contain \`${F}\` and any other token at the same time`);v.push({token:J,fullToken:F});const $=w.run(r,F,h.match,p);if(!$)return o();y.push($.setter),r=$.rest}else{if(J.match(J_))throw new RangeError("Format string contains an unescaped latin alphabet character `"+J+"`");if(F==="''"?F="'":J==="'"&&(F=eN(F)),r.indexOf(F)===0)r=r.slice(F.length);else return o()}}if(r.length>0&&X_.test(r))return o();const S=y.map(F=>F.priority).sort((F,J)=>J-F).filter((F,J,w)=>w.indexOf(F)===J).map(F=>y.filter(J=>J.priority===F).sort((J,w)=>w.subPriority-J.subPriority)).map(F=>F[0]);let C=ke(a,n==null?void 0:n.in);if(isNaN(+C))return o();const T={};for(const F of S){if(!F.validate(C,p))return o();const J=F.set(C,T,p);Array.isArray(J)?(C=J[0],Object.assign(T,J[1])):C=J}return C}function eN(r){return r.match(K_)[1].replace(W_,"'")}function tN(r,t){const a=ke(r,t==null?void 0:t.in);return a.setMinutes(0,0,0),a}function aN(r,t){const a=ke(r,t==null?void 0:t.in);return a.setSeconds(0,0),a}function sN(r,t){const a=ke(r,t==null?void 0:t.in);return a.setMilliseconds(0),a}function rN(r,t){var p;const a=()=>mt(t==null?void 0:t.in,NaN),n=(p=t==null?void 0:t.additionalDigits)!=null?p:2,o=oN(r);let u;if(o.date){const y=cN(o.date,n);u=uN(y.restDateString,y.year)}if(!u||isNaN(+u))return a();const h=+u;let g=0,m;if(o.time&&(g=dN(o.time),isNaN(g)))return a();if(o.timezone){if(m=hN(o.timezone),isNaN(m))return a()}else{const y=new Date(h+g),x=ke(0,t==null?void 0:t.in);return x.setFullYear(y.getUTCFullYear(),y.getUTCMonth(),y.getUTCDate()),x.setHours(y.getUTCHours(),y.getUTCMinutes(),y.getUTCSeconds(),y.getUTCMilliseconds()),x}return ke(h+g+m,t==null?void 0:t.in)}const no={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},nN=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,iN=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,lN=/^([+-])(\d{2})(?::?(\d{2}))?$/;function oN(r){const t={},a=r.split(no.dateTimeDelimiter);let n;if(a.length>2)return t;if(/:/.test(a[0])?n=a[0]:(t.date=a[0],n=a[1],no.timeZoneDelimiter.test(t.date)&&(t.date=r.split(no.timeZoneDelimiter)[0],n=r.substr(t.date.length,r.length))),n){const o=no.timezone.exec(n);o?(t.time=n.replace(o[1],""),t.timezone=o[1]):t.time=n}return t}function cN(r,t){const a=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=r.match(a);if(!n)return{year:NaN,restDateString:""};const o=n[1]?parseInt(n[1]):null,u=n[2]?parseInt(n[2]):null;return{year:u===null?o:u*100,restDateString:r.slice((n[1]||n[2]).length)}}function uN(r,t){if(t===null)return new Date(NaN);const a=r.match(nN);if(!a)return new Date(NaN);const n=!!a[4],o=pi(a[1]),u=pi(a[2])-1,h=pi(a[3]),g=pi(a[4]),m=pi(a[5])-1;if(n)return yN(t,g,m)?fN(t,g,m):new Date(NaN);{const p=new Date(0);return!gN(t,u,h)||!pN(t,o)?new Date(NaN):(p.setUTCFullYear(t,u,Math.max(o,h)),p)}}function pi(r){return r?parseInt(r):1}function dN(r){const t=r.match(iN);if(!t)return NaN;const a=Ju(t[1]),n=Ju(t[2]),o=Ju(t[3]);return vN(a,n,o)?a*Ui+n*Mi+o*1e3:NaN}function Ju(r){return r&&parseFloat(r.replace(",","."))||0}function hN(r){if(r==="Z")return 0;const t=r.match(lN);if(!t)return 0;const a=t[1]==="+"?-1:1,n=parseInt(t[2]),o=t[3]&&parseInt(t[3])||0;return bN(n,o)?a*(n*Ui+o*Mi):NaN}function fN(r,t,a){const n=new Date(0);n.setUTCFullYear(r,0,4);const o=n.getUTCDay()||7,u=(t-1)*7+a+1-o;return n.setUTCDate(n.getUTCDate()+u),n}const mN=[31,null,31,30,31,30,31,31,30,31,30,31];function p0(r){return r%400===0||r%4===0&&r%100!==0}function gN(r,t,a){return t>=0&&t<=11&&a>=1&&a<=(mN[t]||(p0(r)?29:28))}function pN(r,t){return t>=1&&t<=(p0(r)?366:365)}function yN(r,t,a){return t>=1&&t<=53&&a>=0&&a<=6}function vN(r,t,a){return r===24?t===0&&a===0:a>=0&&a<60&&t>=0&&t<60&&r>=0&&r<25}function bN(r,t){return t>=0&&t<=59}const xN={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};nb._date.override({_id:"date-fns",formats:function(){return xN},parse:function(r,t){if(r===null||typeof r=="undefined")return null;const a=typeof r;return a==="number"||r instanceof Date?r=ke(r):a==="string"&&(typeof t=="string"?r=Z_(r,t,new Date,this.options):r=rN(r,this.options)),e0(r)?r.getTime():null},format:function(r,t){return t_(r,t,this.options)},add:function(r,t,a){switch(a){case"millisecond":return Cd(r,t);case"second":return Yj(r,t);case"minute":return Pj(r,t);case"hour":return zj(r,t);case"day":return xo(r,t);case"week":return Vj(r,t);case"month":return Nd(r,t);case"quarter":return Hj(r,t);case"year":return Fj(r,t);default:return r}},diff:function(r,t,a){switch(a){case"millisecond":return Ed(r,t);case"second":return eS(r,t);case"minute":return Xj(r,t);case"hour":return Wj(r,t);case"day":return t0(r,t);case"week":return tS(r,t);case"month":return r0(r,t);case"quarter":return Zj(r,t);case"year":return aS(r,t);default:return 0}},startOf:function(r,t,a){switch(t){case"second":return sN(r);case"minute":return aN(r);case"hour":return tN(r);case"day":return hd(r);case"week":return Ua(r);case"isoWeek":return Ua(r,{weekStartsOn:+a});case"month":return rS(r);case"quarter":return sS(r);case"year":return n0(r);default:return r}},endOf:function(r,t){switch(t){case"second":return uS(r);case"minute":return oS(r);case"hour":return iS(r);case"day":return a0(r);case"week":return lS(r);case"month":return s0(r);case"quarter":return cS(r);case"year":return nS(r);default:return r}}});new Os;const wN=r=>oa({queryKey:["project-deliveries",r],queryFn:()=>N(null,null,function*(){const a=yield new Os().getDeliveryDockets(r);console.log(" Raw deliveries data:",a);const n=a.map(m=>{const p=m["Ready at"];if(!p)return console.warn(" No Ready at date found for delivery:",m),null;try{const[y,x]=p.split(" "),v=y.split("/");let S,C,T;parseInt(v[0])>12?[S,C,T]=v:[C,S,T]=v;const A=`${T}-${C.padStart(2,"0")}-${S.padStart(2,"0")}T${x||"00:00:00"}`,I=new Date(A);return isNaN(I.getTime())?(console.warn(" Invalid date format:",p),null):lt(He({},m),{parsedDate:I,dayKey:I.toISOString().split("T")[0]})}catch(y){return console.warn(" Error parsing date:",p,y),null}}).filter(Boolean);console.log(" Processed deliveries:",n);const o={};n.forEach(m=>{o[m.dayKey]=(o[m.dayKey]||0)+1});const u=Object.keys(o).sort();let h=0;const g=u.map(m=>(h+=o[m],h));return console.log(" Date counts:",o),console.log(" Sorted dates:",u),console.log(" Cumulative data:",g),{deliveries:n,dateCounts:o,sortedDates:u,dailyData:u.map(m=>o[m]),cumulativeData:g,totalDeliveries:n.length}}),enabled:!!r,staleTime:300*1e3});za.register(cn,un,yd,vp,dn,hn,fn,ib,vd);const jN=({projectName:r})=>{const{data:t,isLoading:a,error:n}=wN(r),{data:o,isLoading:u}=Bp(r);if(a||u)return l.jsx(Ea,{});if(n)return l.jsx("div",{className:"error-message",children:"Error loading delivery data"});if(!t||!o)return l.jsx("div",{className:"no-data",children:"No delivery data available"});const{sortedDates:h,dailyData:g,cumulativeData:m,totalDeliveries:p}=t,y=o["Deliveries Allowed"]?parseInt(o["Deliveries Allowed"].toString()):0,v=p>=Math.floor(y*.9)&&p<y,S=p>=y&&y>0,C={labels:h,datasets:[{label:"Trips per Day",data:g,borderColor:"#4caf50",backgroundColor:"rgba(76,175,80,0.2)",pointBackgroundColor:"#0af013",pointRadius:6,fill:!0,tension:.3},{label:"Cumulative Trips",data:m,borderColor:"#c1c536",backgroundColor:"rgba(193,197,54,0.2)",pointBackgroundColor:"#ffc107",pointRadius:6,fill:!0,tension:.3},{label:"Delivery Allowances",data:h.map(()=>y),borderColor:"#cb4335",borderWidth:4,borderDash:[5,5],pointRadius:0,fill:!1}]},T={responsive:!0,maintainAspectRatio:!1,animation:{duration:2e3,easing:"easeInOutQuad"},plugins:{title:{display:!0,text:"Daily and Cumulative Trips",font:{size:18,weight:"bold"}},tooltip:{mode:"index",intersect:!1},legend:{labels:{usePointStyle:!0,font:{size:14}}},datalabels:{display:!1}},interaction:{mode:"index",intersect:!1},scales:{x:{type:"time",time:{unit:"day"},title:{display:!0,text:"Date",font:{size:16,weight:"bold"}}},y:{beginAtZero:!0,title:{display:!0,text:"Number of Trips",font:{size:16,weight:"bold"}}}}};return l.jsxs("div",{className:"chart-container",children:[l.jsx("div",{className:"chart-info",children:l.jsxs("div",{className:"chart-stats trips-stats-row",children:[l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"emoji",children:""}),l.jsx("span",{className:"stat-label",children:"Delivery Allowances:"}),l.jsx("span",{className:"stat-value",children:y})]}),l.jsxs("div",{className:`stat-item trips-made-stat${S?" danger":v?" warning":""}`,children:[l.jsx("span",{className:"emoji",children:""}),l.jsx("span",{className:"stat-label",children:"Trips Made:"}),l.jsx("span",{className:"stat-value",children:p}),S&&l.jsx("span",{className:"stat-alert",title:"Exceeded delivery allowance",children:""}),v&&!S&&l.jsx("span",{className:"stat-alert",title:"Close to delivery allowance",children:""})]})]})}),l.jsx("div",{className:"chart-wrapper",children:l.jsx(lb,{data:C,options:T})})]})},SN=({onMetricsUpdate:r,showDetails:t=!1})=>{const[a,n]=U.useState({loadTime:0,renderTime:0,memoryUsage:0,domSize:0,jsHeapSize:0,timestamp:Date.now()}),[o,u]=U.useState(!1),[h,g]=U.useState(t),m=U.useCallback(()=>{if(performance&&performance.getEntriesByType){const A=performance.getEntriesByType("navigation")[0];if(A)return A.loadEventEnd-A.fetchStart}return performance.now()},[]),p=U.useCallback(()=>{if("memory"in performance){const A=performance.memory;return{used:Math.round(A.usedJSHeapSize/1024/1024),total:Math.round(A.totalJSHeapSize/1024/1024),limit:Math.round(A.jsHeapSizeLimit/1024/1024)}}return{used:0,total:0,limit:0}},[]),y=U.useCallback(()=>document.querySelectorAll("*").length,[]),x=U.useCallback(()=>new Promise(A=>{const I=performance.now();requestAnimationFrame(()=>{requestAnimationFrame(()=>{const G=performance.now();A(G-I)})})}),[]),v=U.useCallback(()=>N(null,null,function*(){u(!0);try{const A=m(),I=yield x(),G=p(),P=y(),te={loadTime:Math.round(A),renderTime:Math.round(I),memoryUsage:G.used,domSize:P,jsHeapSize:G.total,timestamp:Date.now()};n(te),r&&r(te)}catch(A){console.error("Error measuring performance:",A)}finally{u(!1)}}),[m,x,p,y,r]);U.useEffect(()=>{const A=setInterval(()=>{o||v()},3e4);return()=>clearInterval(A)},[v,o]),U.useEffect(()=>{const A=setTimeout(()=>{v()},1e3);return()=>clearTimeout(A)},[v]);const S=(A,I)=>A<=I.good?"good":A<=I.warning?"warning":"poor",C=A=>{switch(A){case"good":return"";case"warning":return"";case"poor":return"";default:return""}},T=A=>{switch(A){case"good":return"performance-good";case"warning":return"performance-warning";case"poor":return"performance-poor";default:return"performance-unknown"}};return l.jsxs("div",{className:"performance-monitor",children:[l.jsxs("div",{className:"monitor-header",children:[l.jsx("h3",{children:" Performance Monitor"}),l.jsxs("div",{className:"monitor-controls",children:[l.jsx("button",{onClick:v,disabled:o,className:"monitor-btn",children:o?" Monitoring...":" Measure Performance"}),l.jsx("button",{onClick:()=>g(!h),className:"toggle-details-btn",children:h?" Hide Details":" Show Details"})]})]}),l.jsxs("div",{className:"performance-metrics",children:[l.jsxs("div",{className:"metric-grid",children:[l.jsxs("div",{className:`metric-item ${T(S(a.loadTime,{good:2e3,warning:5e3}))}`,children:[l.jsx("div",{className:"metric-icon",children:C(S(a.loadTime,{good:2e3,warning:5e3}))}),l.jsxs("div",{className:"metric-content",children:[l.jsx("div",{className:"metric-label",children:"Load Time"}),l.jsxs("div",{className:"metric-value",children:[a.loadTime,"ms"]})]})]}),l.jsxs("div",{className:`metric-item ${T(S(a.renderTime,{good:16,warning:33}))}`,children:[l.jsx("div",{className:"metric-icon",children:C(S(a.renderTime,{good:16,warning:33}))}),l.jsxs("div",{className:"metric-content",children:[l.jsx("div",{className:"metric-label",children:"Render Time"}),l.jsxs("div",{className:"metric-value",children:[a.renderTime,"ms"]})]})]}),l.jsxs("div",{className:`metric-item ${T(S(a.memoryUsage,{good:50,warning:100}))}`,children:[l.jsx("div",{className:"metric-icon",children:C(S(a.memoryUsage,{good:50,warning:100}))}),l.jsxs("div",{className:"metric-content",children:[l.jsx("div",{className:"metric-label",children:"Memory Usage"}),l.jsxs("div",{className:"metric-value",children:[a.memoryUsage,"MB"]})]})]}),l.jsxs("div",{className:`metric-item ${T(S(a.domSize,{good:1e3,warning:3e3}))}`,children:[l.jsx("div",{className:"metric-icon",children:C(S(a.domSize,{good:1e3,warning:3e3}))}),l.jsxs("div",{className:"metric-content",children:[l.jsx("div",{className:"metric-label",children:"DOM Elements"}),l.jsx("div",{className:"metric-value",children:a.domSize})]})]}),l.jsxs("div",{className:`metric-item ${T(S(a.jsHeapSize,{good:100,warning:200}))}`,children:[l.jsx("div",{className:"metric-icon",children:C(S(a.jsHeapSize,{good:100,warning:200}))}),l.jsxs("div",{className:"metric-content",children:[l.jsx("div",{className:"metric-label",children:"JS Heap Size"}),l.jsxs("div",{className:"metric-value",children:[a.jsHeapSize,"MB"]})]})]})]}),h&&l.jsxs("div",{className:"performance-details",children:[l.jsx("h4",{children:"Performance Recommendations"}),l.jsxs("div",{className:"recommendations",children:[a.loadTime>5e3&&l.jsxs("div",{className:"recommendation warning",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"High load time. Consider optimizing bundle size or implementing lazy loading."})]}),a.renderTime>33&&l.jsxs("div",{className:"recommendation warning",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"High render time. Review heavy components or implement React.memo."})]}),a.memoryUsage>100&&l.jsxs("div",{className:"recommendation warning",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"High memory usage. Check for memory leaks or optimize state management."})]}),a.domSize>3e3&&l.jsxs("div",{className:"recommendation warning",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Large DOM tree. Consider virtualizing lists or reducing component complexity."})]}),a.jsHeapSize>200&&l.jsxs("div",{className:"recommendation warning",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Large JS heap. Review object allocations and garbage collection."})]}),a.loadTime<=2e3&&a.renderTime<=16&&a.memoryUsage<=50&&l.jsxs("div",{className:"recommendation good",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Excellent performance! The application is running optimally."})]})]}),l.jsxs("div",{className:"performance-info",children:[l.jsx("h5",{children:"Measurement Details"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Load Time:"})," Time from fetch start to load event end"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Render Time:"})," Time for two animation frames (real render measurement)"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Memory Usage:"})," Current JavaScript heap usage"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"DOM Elements:"})," Total number of DOM nodes"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"JS Heap Size:"})," Total allocated JavaScript heap"]})]}),l.jsx("p",{children:l.jsxs("em",{children:["Last updated: ",new Date(a.timestamp).toLocaleTimeString()]})})]})]})]})]})},_N=({allowances:r,isLoading:t=!1})=>{if(t)return l.jsxs("div",{className:"allowances-container",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Loading allowances..."})]});if(!r||r.length===0)return l.jsxs("div",{className:"allowances-container",children:[l.jsx("h2",{id:"project-allowances-section",children:"Project Allowances"}),l.jsx("div",{className:"no-allowances",children:l.jsx("p",{children:"No personnel allowances registered for this project."})})]});const a=r.reduce((m,p)=>{const y=p.Type||"Other",x=p.Category||"General";return m[y]||(m[y]={}),m[y][x]||(m[y][x]=[]),m[y][x].push(p),m},{}),n=(m,p)=>{if(p)switch(p.toLowerCase()){case"drafting":return"";case"tradesman":return"";case"labourers":return"";case"pms":return"";case"vertical access":return""}switch(m.toLowerCase()){case"drafting":return"";case"factory":return"";case"site":return"";case"tradesman":return"";case"labourer":return"";case"pm":return"";case"vertical access":return"";default:return""}},o=(m,p)=>{switch(m.toLowerCase()){case"site":switch(p.toLowerCase()){case"tradesman":return"Tradesman Allowances (days)";case"labourers":return"Labourers Allowances (days)";case"pms":return"PMs Allowances (days)";default:return`${p} Allowances (days)`}case"factory":switch(p.toLowerCase()){case"drafting":return"Drafting Allowances (days)";case"labourers":return"Labourers Allowances (days)";default:return`${p} Allowances (days)`}default:return`${p} Allowances (days)`}},u=m=>m<50?"#4caf50":m<99?"#c1c536":"#cb4335",h=(m,p)=>{if(!p||p===0)return"";const y=m/p*100;return y>=100?"danger":y>=90?"warning":""},g=(m,p)=>!p||p===0?0:m/p*100;return l.jsxs("div",{className:"allowances-container",children:[l.jsx("h2",{id:"project-allowances-section",children:"Project Allowances"}),Object.entries(a).map(([m,p])=>l.jsxs("div",{children:[l.jsxs("h3",{children:[m," Allowances"]}),Object.entries(p).map(([y,x])=>l.jsxs("div",{children:[l.jsx("h4",{children:y}),x.map((v,S)=>{const C=g(Number(v["Days Used"]),Number(v["Days Allowed"])),T=h(Number(v["Days Used"]),Number(v["Days Allowed"]));return l.jsxs("div",{className:`allowance-card ${T}`,children:[l.jsxs("p",{children:[l.jsx("span",{className:"emoji",children:n(m,y)}),l.jsxs("strong",{children:[o(m,y),":     "]}),l.jsx("i",{children:v["Days Allowed"]||"0"})]}),l.jsxs("p",{children:[l.jsx("span",{className:"emoji",children:""}),l.jsx("strong",{children:"Current days used:     "}),l.jsx("i",{children:v["Days Used"]||"0.00"})]}),l.jsx("div",{className:"progress-container",children:l.jsxs("div",{className:"progress-bar",style:{"--progress-width":`${C}%`,"--progress-color":u(C),"--progress-color-light":u(C)==="#4caf50"?"#66bb6a":u(C)==="#c1c536"?"#d4e157":"#ef5350"},children:[C.toFixed(2),"%"]})})]},S)})]},y))]},m))]})};function NN(r,t){const a=`https://www.appsheet.com/start/${r}`,n={EvalType:"BOOLEAN",OperatorName:"Equals",IsAtomic:!0,IsSargable:!0,SourceExpr:`[${t.filterField}] :: ${t.filterValue}`,Children:[{EvalType:"COLUMN",ColIndex:2,ColName:t.filterField,ContextLevel:0,SourceExpr:`[${t.filterField}]`,Children:[],ColumnsReferenced:[2],AncColumnsReferenced:[],TablesReferenced:[],ResultType:"Ref",ResultTypeQualifier:{ReferencedTableName:t.tableName,ReferencedRootTableName:t.tableName,ReferencedType:"Name",ReferencedKeyColumn:"Name",IsAPartOf:!1,RelationshipName:null,InputMode:"Auto"},IsPure:!0,MayBeExpensive:!1,EagerEvalChildren:!0},{EvalType:"CONSTANT",ConstantValue:t.filterValue,SourceExpr:t.filterValue,Children:[],ColumnsReferenced:[],AncColumnsReferenced:[],TablesReferenced:[],ResultType:"Ref",ResultTypeQualifier:{ReferencedTableName:t.tableName,ReferencedRootTableName:t.tableName,ReferencedType:"Name",ReferencedKeyColumn:"Name",IsAPartOf:!1,RelationshipName:null,InputMode:"Auto"},IsPure:!0,MayBeExpensive:!1,EagerEvalChildren:!0}],ColumnsReferenced:[2],AncColumnsReferenced:[],TablesReferenced:[],ResultType:"Yes/No",ResultTypeQualifier:{YesLabel:"",NoLabel:""},IsPure:!0,MayBeExpensive:!1,EagerEvalChildren:!0},o=encodeURIComponent(JSON.stringify(n));return`${a}#control=${encodeURIComponent(t.tableName)}&filter=${o}`}function CN(r){return NN("efcdb2a0-181f-4e43-bc65-6887dc279032",{tableName:"Delivery Dockets",filterField:"Project",filterValue:r})}const EN=()=>{var le;const[r,t]=U.useState(""),[a,n]=U.useState({sheets:!0,trips:!1}),[o,u]=U.useState(!1),[h,g]=U.useState(!1),{projectParam:m}=Ip(),p=U.useRef(!1);Ri("CC Project Dashboard"),_d();const{data:y,error:x}=Bp(r),{data:v,isLoading:S}=oj(r),{data:C,isLoading:T}=ij(r),{data:A,isLoading:I}=lj(r),G=x;U.useEffect(()=>{m&&!p.current&&(t(m),p.current=!0)},[m]);const P=O=>{t(O.Name)},te=O=>{n(D=>lt(He({},D),{[O]:!D[O]}))},he=O=>O<50?"#4caf50":O<99?"#c1c536":"#cb4335",X=(O,D)=>{if(!O||!D)return"";const E=Number(O),Y=Number(D),W=E/Y*100;return W>=100?"danger":W>=90?"warning":""};return G?l.jsxs("div",{className:"container",children:[l.jsx("h1",{children:"Error"}),l.jsxs("p",{children:["Error loading project data: ",x==null?void 0:x.message]}),l.jsx("button",{onClick:()=>window.location.reload(),children:"Retry"})]}):l.jsxs("div",{className:"container accordion",id:"accordion",children:[l.jsx("h1",{children:"PROJECTS SUMMARY"}),l.jsx(uj,{onProjectSelect:P}),y?l.jsxs("div",{className:"project-info",children:[l.jsxs("div",{className:"project-header",children:[l.jsx("h2",{className:"project-title",children:y.Name||"N/A"}),l.jsx("span",{className:`status-badge ${((le=y.Status)==null?void 0:le.toLowerCase())||"unknown"}`,children:y.Status||"N/A"})]}),l.jsxs("div",{className:"project-details-grid",children:[l.jsxs("div",{className:"detail-section",children:[l.jsx("h3",{children:" Project Details"}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Project Number:"}),l.jsx("span",{className:"detail-value",children:y.Number||""})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"CC/Subcontractor:"}),l.jsx("span",{className:"detail-value",children:y["CC/Subcontractor"]||""})]})]}),l.jsxs("div",{className:"detail-section",children:[l.jsx("h3",{children:" Timeline"}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Start Date:"}),l.jsx("span",{className:"detail-value",children:Ku(y["Start Date"])})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Expected Completion:"}),l.jsx("span",{className:"detail-value",children:Ku(y["Expected Completion Date"])})]}),y["Finalization Date"]&&l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Finalization Date:"}),l.jsx("span",{className:"detail-value",children:Ku(y["Finalization Date"])})]})]}),l.jsxs("div",{className:"detail-section",children:[l.jsx("h3",{children:" Team"}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Project Manager:"}),l.jsx("span",{className:"detail-value",children:y.PM||"N/A"})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Site Supervisor:"}),l.jsx("span",{className:"detail-value",children:y["Site Supervisor"]||"N/A"})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"EBA/Non-EBA:"}),l.jsx("span",{className:"detail-value",children:y["EBA/Non-EBA"]||"N/A"})]})]}),y.Contact&&l.jsxs("div",{className:"detail-section contact-section",children:[l.jsx("h3",{children:" Contact Information"}),l.jsx("div",{className:"contact-toggle",children:l.jsx("button",{className:"contact-toggle-btn",onClick:()=>g(!h),children:h?" Hide Contact":" Show Contact"})}),h&&l.jsx("div",{className:"contact-content",children:l.jsx("pre",{className:"contact-text",children:y.Contact})})]})]}),l.jsx("div",{className:"project-footer",children:l.jsxs("span",{className:"last-updated",children:["Last updated: ",new Date().toLocaleString()]})})]}):r?l.jsx("div",{className:"project-info loading",children:l.jsxs("div",{className:"loading-placeholder",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Loading project data..."})]})}):l.jsx("div",{className:"project-info empty",children:l.jsxs("div",{className:"empty-state",children:[l.jsx("span",{className:"empty-icon",children:""}),l.jsx("h3",{children:"Select a Project"}),l.jsx("p",{children:"Choose a project from the dropdown above to view its details and statistics."})]})}),l.jsx("h2",{id:"cutting-information",children:"Cutting Information"}),y?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"cutting-info-grid",children:[l.jsxs("div",{className:"cutting-item",children:[l.jsx("span",{className:"cutting-icon",children:""}),l.jsx("span",{className:"cutting-label",children:"Expected Square Meters:"}),l.jsx("span",{className:"cutting-value",children:y["Expected Square Meters"]||"0"})]}),l.jsxs("div",{className:`cutting-item ${X(String(y["Real Cut Square Meters"]||""),String(y["Expected Square Meters"]||""))}`,children:[l.jsx("span",{className:"cutting-icon",children:""}),l.jsx("span",{className:"cutting-label",children:"Real Cut Square Meters:"}),l.jsx("span",{className:"cutting-value",children:y["Real Cut Square Meters"]||"0.00"})]}),y["Allowed SQM to buy"]&&l.jsxs("div",{className:"cutting-item",children:[l.jsx("span",{className:"cutting-icon",children:""}),l.jsx("span",{className:"cutting-label",children:"Allowed SQM to Buy:"}),l.jsx("span",{className:"cutting-value",children:y["Allowed SQM to buy"]})]})]}),l.jsx("p",{className:"cutting-note",children:l.jsx("em",{children:'Note: The value of "Real Cut Square Meters" includes all square meters in the system, including panels that have not yet been cut or orders that are in "Ready to Cut" status.'})}),l.jsx("div",{className:"progress-container",children:l.jsx("div",{className:"progress-bar",style:{"--progress-width":`${y["Real Cut Square Meters"]&&y["Expected Square Meters"]?Number(y["Real Cut Square Meters"])/Number(y["Expected Square Meters"])*100:0}%`,backgroundColor:he(y["Real Cut Square Meters"]&&y["Expected Square Meters"]?Number(y["Real Cut Square Meters"])/Number(y["Expected Square Meters"])*100:0)},children:y["Real Cut Square Meters"]&&y["Expected Square Meters"]?`${(Number(y["Real Cut Square Meters"])/Number(y["Expected Square Meters"])*100).toFixed(2)}%`:"0%"})})]}):l.jsx("div",{className:"cutting-info-placeholder",children:l.jsxs("div",{className:"placeholder-content",children:[l.jsx("span",{className:"placeholder-icon",children:""}),l.jsx("p",{children:"Cutting information will appear here when a project is selected."})]})}),l.jsx(Gu,{isLoading:I,sectionName:"Sheets Overview",children:l.jsxs("div",{className:`accordion-item ${a.sheets?"active":""}`,children:[l.jsx("div",{className:"accordion-header",id:"sheets",onClick:()=>te("sheets"),children:l.jsxs("h2",{children:[l.jsx("span",{className:"accordion-indicator",children:""}),"Sheets Overview",l.jsx("span",{className:"accordion-indicator",children:" "})]})}),l.jsx("div",{className:"accordion-body",children:l.jsx(Lj,{sheets:A||[],isLoading:I})})]})}),l.jsx(Gu,{isLoading:S,sectionName:"Project Allowances",children:l.jsx(_N,{allowances:v||[],isLoading:S})}),l.jsx(Gu,{isLoading:T,sectionName:"Material Tables",children:l.jsx(fj,{materials:C||{summary:[],details:[]},isLoading:T})}),l.jsx("h2",{id:"trips-over-time",children:"Trips Over Time"}),l.jsxs("p",{children:[l.jsx("em",{children:'These data are collected from the "Delivery Dockets" performed by the manufacturing team. You can view the detailed records by '}),l.jsx("a",{href:r?CN(r):"#",target:"_blank",children:"clicking here"}),"."]}),l.jsxs("div",{className:"chart-container",children:[l.jsx("h3",{children:"Daily and Cumulative Trips"}),l.jsx("p",{id:"deliveryDates",style:{display:"none"}}),l.jsx(jN,{projectName:r})]}),o&&l.jsxs(l.Fragment,{children:[l.jsx(SN,{onMetricsUpdate:O=>{console.log("Performance metrics:",O)},showDetails:!0}),l.jsx("div",{className:"debug-info",children:l.jsxs("span",{className:"last-update",children:["Last updated: ",new Date().toLocaleString()]})})]}),l.jsx("div",{style:{marginTop:"20px",textAlign:"center"},children:l.jsx("button",{onClick:()=>u(!o),style:{background:"transparent",border:"1px solid #ccc",padding:"5px 10px",fontSize:"12px",color:"#666"},children:o?" Hide Debug Tools":" Show Debug Tools"})})]})},y0=r=>window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?`/${r}`:`/CC_Flow_summary_report/${r}`,wo=()=>y0("CC-logo-NEW_1.webp"),mo=()=>y0("favicon.png"),TN=()=>{const[r]=ub(),[t,a]=U.useState(""),[n,o]=U.useState(!1),[u,h]=U.useState(""),[g,m]=U.useState(""),[p,y]=U.useState(null),[x,v]=U.useState(null),[S,C]=U.useState(!1),[T,A]=U.useState(12),I=new Os;Ri("CC Delivery"),U.useEffect(()=>{const he=()=>{window.innerWidth<=480||window.innerWidth<=768,A(12)};return he(),window.addEventListener("resize",he),()=>window.removeEventListener("resize",he)},[]);const G=he=>/^[A-Z]{2,3}-\d+$/.test(he);U.useEffect(()=>{const he=r.get("Order_ID")||r.get("order_ID");he&&(a(he),v(G(he)),h(""),m(""),y(null))},[r]),U.useEffect(()=>{v(t?G(t):null)},[t]);const P=he=>N(null,null,function*(){if(he.preventDefault(),!t.trim()){h("Please enter a valid Order ID"),m("error");return}if(!x){h("Order ID format must be XX-00 (e.g., FL-1, AB-123)"),m("error");return}o(!0),h(""),m(""),y(null);try{const X=yield I.markOrderAsDelivered(t.trim());X&&X.length>0?(y(X[0]),h(""),m("success"),a("")):(h("Error marking order as delivered"),m("error"))}catch(X){console.error("Error marking order as delivered:",X),h("Error processing request. Please try again."),m("error")}finally{o(!1)}}),te=he=>{const X=he.target.value.toUpperCase();a(X),u&&(h(""),m("")),p&&y(null)};return l.jsx("div",{className:"order-delivery-container",children:l.jsxs("div",{className:"order-delivery-card",children:[l.jsx("div",{className:"watermark-pattern",children:l.jsx("div",{className:"watermark-grid",children:Array.from({length:T},(he,X)=>l.jsx("img",{src:wo(),alt:"CC Logo Watermark",className:"watermark",style:{"--i":X}},X))})}),l.jsxs("div",{className:"order-delivery-header",children:[l.jsx("h1",{children:"Mark Order as Delivered"}),l.jsx("p",{children:"Enter the Order ID to mark it as delivered"})]}),l.jsxs("form",{onSubmit:P,className:"order-delivery-form",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"orderId",children:"Order ID:"}),l.jsxs("div",{className:"input-container",children:[l.jsx("input",{type:"text",id:"orderId",value:t,onChange:te,placeholder:"Enter Order ID (e.g., FL-1)",className:`form-input ${x===!1?"invalid":x===!0?"valid":""}`,disabled:n,required:!0,"aria-describedby":"orderId-help",style:{textTransform:"uppercase"},onKeyDown:he=>{if(he.key==="Enter"&&!n&&x){he.preventDefault();const X=he.currentTarget.form;if(X){const le=new Event("submit",{bubbles:!0,cancelable:!0});X.dispatchEvent(le)}}}}),x===!0&&l.jsx("span",{className:"validation-icon valid",children:""}),x===!1&&l.jsx("span",{className:"validation-icon invalid",children:""})]}),l.jsx("div",{id:"orderId-help",className:"help-text",children:"Format: XX-00 (e.g., FL-1, AB-123)"})]}),l.jsx("button",{type:"submit",className:`submit-button ${n?"loading":""}`,disabled:n||x===!1,"aria-label":"Mark order as delivered",children:n?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"spinner"}),"Processing..."]}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:mo(),alt:"CC Favicon",className:"button-favicon"}),"Mark as Delivered",l.jsx("img",{src:mo(),alt:"CC Favicon",className:"button-favicon"})]})})]}),u&&!p&&l.jsx("div",{className:`message ${g}`,role:"alert",children:u}),p&&g==="success"&&l.jsxs("div",{className:"order-details-card",children:[l.jsxs("div",{className:"order-details-header",children:[l.jsx("span",{className:"success-icon",children:""}),l.jsx("h3",{children:"Order Successfully Delivered"})]}),l.jsxs("div",{className:"order-details-content",children:[l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:"Order ID:"}),l.jsx("span",{className:"detail-value",children:p["Order ID"]})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:"Project:"}),l.jsx("span",{className:"detail-value",children:p.Project})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:"Responsible:"}),l.jsx("span",{className:"detail-value",children:p.Responsable})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:"Color:"}),l.jsx("span",{className:"detail-value",children:p.Colour})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:"Square Meters:"}),l.jsxs("span",{className:"detail-value",children:[p["Meters Square"]," m"]})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:"Delivery Date:"}),l.jsx("span",{className:"detail-value",children:new Date().toLocaleDateString()})]})]})]}),l.jsxs("div",{className:"order-delivery-info",children:[l.jsxs("button",{className:"info-toggle-button",onClick:()=>C(!S),"aria-expanded":S,"aria-controls":"info-content",children:[l.jsxs("div",{className:"info-toggle-left",children:[l.jsx("div",{className:"info-icon",children:""}),l.jsx("span",{className:"info-toggle-text",children:"Help & Information"})]}),l.jsx("span",{className:`info-toggle-icon ${S?"open":""}`,children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:l.jsx("path",{d:"M6 9L12 15L18 9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),l.jsx("div",{id:"info-content",className:`info-content ${S?"show":""}`,"aria-hidden":!S,children:l.jsxs("div",{className:"info-content-inner",children:[l.jsxs("div",{className:"info-section",children:[l.jsx("h4",{className:"info-section-title",children:"How to use"}),l.jsxs("ul",{className:"info-list",children:[l.jsx("li",{children:"Enter the Order ID in the field above"}),l.jsx("li",{children:"Format must be XX-00 (e.g., FL-1, AB-123)"}),l.jsx("li",{children:'Click "Mark as Delivered" to confirm'})]})]}),l.jsxs("div",{className:"info-section",children:[l.jsx("h4",{className:"info-section-title",children:"Important notes"}),l.jsxs("ul",{className:"info-list",children:[l.jsx("li",{children:"Once confirmed, the order cannot be undone"}),l.jsx("li",{children:"Delivery date will be automatically recorded"})]})]})]})})]})]})})},nn=({children:r,className:t="",delay:a=0,duration:n=300,direction:o="fade",stagger:u=0,index:h=0})=>{const g=()=>`transition-all ease-out ${{up:"opacity-0 animate-slide-up",down:"opacity-0 animate-slide-down",left:"opacity-0 animate-slide-left",right:"opacity-0 animate-slide-right",fade:"opacity-0 animate-fade-in",scale:"opacity-0 animate-scale-in"}[o]}`,m=()=>({animationDelay:`${a+u*h}ms`,animationDuration:`${n}ms`,animationFillMode:"forwards"});return l.jsx("div",{className:`${g()} ${t}`,style:lt(He({},m()),{contain:"layout style paint"}),children:r})},DN=({size:r="md",color:t="blue",text:a})=>{const n={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"},o={blue:"text-blue-600",gray:"text-gray-600",green:"text-green-600",red:"text-red-600"};return l.jsxs("div",{className:"flex flex-col items-center justify-center space-y-3",children:[l.jsx("div",{className:`${n[r]} ${o[t]} animate-spin`,children:l.jsxs("svg",{className:"w-full h-full",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),a&&l.jsx("p",{className:`text-sm ${o[t]} animate-pulse`,children:a})]})},v0=({children:r,className:t="",scale:a=!0,glow:n=!1,color:o="blue"})=>{const u=a?"hover:scale-105":"",h=n?`hover:shadow-lg hover:shadow-${o}-200`:"hover:shadow-md";return l.jsx("div",{className:`transition-all duration-200 ease-in-out ${u} ${h} ${t}`,children:r})},ON=({children:r,className:t=""})=>l.jsx("div",{className:`animate-page-enter ${t}`,children:r}),AN=[{id:"analytics",label:"Analytics",icon:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})},{id:"cut-process",label:"Cut Process",icon:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.121 14.121L19 19m-7-7l7-7m-7 7l-2.879 2.879M12 12L9.121 9.121m0 5.758a3 3 0 10-4.243-4.243 3 3 0 004.243 4.243zm5.758-9.758a3 3 0 10-4.243-4.243 3 3 0 004.243 4.243z"})})},{id:"manufacturing",label:"Manufacturing",icon:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2zm5-18v2M7 7h2v5a1 1 0 01-1 1H7V7z"})})}],kN=({currentView:r,onViewChange:t,isOpen:a,onToggle:n,showHintAnimation:o=!1})=>l.jsxs(l.Fragment,{children:[a&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:n}),l.jsx("div",{className:`
        fixed inset-y-0 left-0 z-50 bg-white shadow-lg transform transition-all duration-300 ease-in-out
        ${a?"w-64":"w-16"}
        md:relative md:z-50
      `,children:l.jsxs("div",{className:"flex flex-col h-full",children:[l.jsxs("div",{className:`flex h-16 border-b border-gray-200 shrink-0 ${a?"items-center justify-between px-4":"flex-col items-center justify-center gap-1 py-2"}`,children:[l.jsxs("div",{className:`flex items-center min-w-0 ${a?"gap-3":"justify-center"}`,children:[l.jsx("div",{className:"w-8 h-8 flex items-center justify-center shrink-0",children:l.jsx("img",{src:mo(),alt:"CC Logo",className:"w-8 h-8"})}),a&&l.jsx("span",{className:"text-sm font-semibold text-slate-800 tracking-tight truncate",children:"Cladding Creations"})]}),l.jsx("button",{onClick:n,className:`rounded-lg hover:bg-gray-100 transition-colors duration-200 shrink-0 text-gray-600 ${a?"p-2":"p-1.5"} ${o?"animate-sidebar-hint animate-sidebar-wiggle animate-sidebar-glow":""}`,title:a?"Collapse sidebar":"Expand sidebar",children:l.jsx("svg",{className:`text-gray-700 transition-transform duration-200 ${a?"w-5 h-5 rotate-180":"w-4 h-4 rotate-0"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),l.jsx("nav",{className:"flex-1 p-4 space-y-2",children:AN.map((u,h)=>l.jsx(nn,{direction:"left",delay:h*100,className:"w-full",children:l.jsx(v0,{scale:!0,glow:!0,color:"blue",children:l.jsxs("button",{onClick:()=>t(u.id),className:`
                      w-full flex items-center rounded-sm text-left transition-all duration-200 group micro-bounce relative z-10
                      ${a?"px-4 py-3 space-x-3":"px-3 py-3 justify-center"}
                      ${r===u.id?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"}
                    `,title:a?void 0:u.label,children:[l.jsx("div",{className:"flex-shrink-0",children:u.icon}),a&&l.jsx("span",{className:"font-medium whitespace-nowrap",children:u.label})]})})},u.id))}),l.jsx("div",{className:"p-8 border-t border-gray-600",children:l.jsx("div",{className:`flex items-center text-sm text-gray-600 ${a?"space-x-3":"justify-center"}`,children:a&&l.jsx("img",{src:wo(),alt:"CC Logo",className:"w-4/5"})})})]})})]});function b0(r,t){if(!r||!t)return{formatted:"Select dates",days:0};const a=new Date(r),n=new Date(t);if(Number.isNaN(a.getTime())||Number.isNaN(n.getTime()))return{formatted:`${r}  ${t}`,days:0};const o=Math.max(0,Math.ceil((n.getTime()-a.getTime())/(1e3*60*60*24)))+1,u={day:"numeric",month:"short",year:a.getFullYear()!==n.getFullYear()?"numeric":void 0},h=a.toLocaleDateString("en-AU",u),g=n.toLocaleDateString("en-AU",u);return{formatted:h===g?h:`${h}  ${g}`,days:o}}const Ai=r=>{const t=r.getFullYear(),a=String(r.getMonth()+1).padStart(2,"0"),n=String(r.getDate()).padStart(2,"0");return`${t}-${a}-${n}`},x0=r=>{const t=new Date(r),a=t.getDay(),n=a===0?6:a-1;return t.setDate(t.getDate()-n),t},gd=r=>{const t=x0(r);return{startDate:Ai(t),endDate:Ai(r)}},pd=r=>{const t=x0(r),a=new Date(t);a.setDate(t.getDate()-7);const n=new Date(a);return n.setDate(a.getDate()+6),{startDate:Ai(a),endDate:Ai(n)}},RN=r=>{const t=new Date,a=gd(t),n=pd(t);return r.startDate===a.startDate&&r.endDate===a.endDate?"thisWeek":r.startDate===n.startDate&&r.endDate===n.endDate?"lastWeek":null},MN=()=>{const r=U.useCallback(Ai,[]),[t,a]=U.useState(()=>{const u=new Date;return u.getDay()===1?pd(u):gd(u)}),n=U.useCallback(u=>{a(u)},[]),o=U.useCallback(u=>{const h=new Date,g=new Date(h);switch(u){case"today":a({startDate:r(h),endDate:r(h)});return;case"thisWeek":a(gd(h));return;case"lastWeek":a(pd(h));return;case"7d":g.setDate(h.getDate()-6);break;case"30d":g.setDate(h.getDate()-29);break;case"90d":g.setDate(h.getDate()-89);break;case"1y":g.setFullYear(h.getFullYear()-1);break}a({startDate:r(g),endDate:r(h)})},[r]);return{dateRange:t,setDateRange:n,setQuickRange:o,formatDate:r}},UN=({dateRange:r,onDateRangeChange:t,onQuickRangeChange:a,compact:n=!1})=>{const[o,u]=U.useState("7d"),[h,g]=U.useState({start:r.startDate,end:r.endDate});U.useEffect(()=>{g({start:r.startDate,end:r.endDate})},[r]),U.useEffect(()=>{const v=RN(r);v&&u(v)},[r]);const m=[{value:"today",label:"Today"},{value:"thisWeek",label:"This week"},{value:"lastWeek",label:"Last week"},{value:"7d",label:"Last 7 days"},{value:"30d",label:"Last 30 days"},{value:"90d",label:"Last 90 days"},{value:"1y",label:"Last year"},{value:"custom",label:"Custom range"}],p=v=>{u(v),v!=="custom"&&a(v)},y=(v,S)=>{const C=lt(He({},h),{[v]:S});g(C),o==="custom"&&t({startDate:C.start,endDate:C.end})},x=b0(r.startDate,r.endDate);return n?l.jsxs("div",{className:"p-3 space-y-4 min-w-[280px]",children:[l.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:[l.jsx("svg",{className:"w-4 h-4 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Select period"]}),l.jsx("select",{value:o,onChange:v=>p(v.target.value),className:"w-full px-3 py-2 text-sm font-medium border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-200 focus:border-indigo-400 bg-white",children:m.map(v=>l.jsx("option",{value:v.value,children:v.label},v.value))}),o==="custom"&&l.jsxs("div",{className:"space-y-2 pt-2 border-t border-gray-100",children:[l.jsx("label",{className:"text-xs font-semibold text-gray-600",children:"Custom range"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"From"}),l.jsx("input",{type:"date",value:h.start,onChange:v=>y("start",v.target.value),className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-amber-200 focus:border-amber-400"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"To"}),l.jsx("input",{type:"date",value:h.end,onChange:v=>y("end",v.target.value),className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-amber-200 focus:border-amber-400"})]})]})]})]}):l.jsxs("div",{className:"relative min-w-0",children:[l.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 mb-3 sm:mb-4",children:[l.jsxs("div",{className:"flex items-center space-x-2 bg-gradient-to-r from-purple-500 to-indigo-600 text-white px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg shadow-lg shrink-0",children:[l.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),l.jsx("span",{className:"font-bold text-xs sm:text-sm",children:"DATE RANGE CONTROL"})]}),l.jsx("div",{className:"h-px bg-gradient-to-r from-purple-300 to-transparent flex-1 min-w-[60px]"})]}),l.jsxs("div",{className:"flex flex-wrap items-stretch gap-3 sm:gap-4 lg:gap-6",children:[l.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 bg-gradient-to-r from-emerald-50 via-green-50 to-teal-50 border-2 border-emerald-300 rounded-xl sm:rounded-2xl px-4 py-3 sm:px-6 sm:py-4 shadow-xl min-w-0",children:[l.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 shrink-0",children:[l.jsx("div",{className:"flex items-center justify-center w-6 h-6 sm:w-8 sm:h-8 bg-emerald-500 rounded-full shadow-lg",children:l.jsx("svg",{className:"w-3.5 h-3.5 sm:w-5 sm:h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),l.jsx("span",{className:"text-xs sm:text-sm font-bold text-emerald-800 uppercase tracking-wide",children:"Active Range:"})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 min-w-0",children:[l.jsx("div",{className:"text-sm sm:text-lg text-emerald-900 font-bold bg-white px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg shadow-md border-2 border-emerald-200 whitespace-nowrap",children:x.formatted}),l.jsxs("div",{className:"hidden sm:flex items-center space-x-1",children:[l.jsx("div",{className:"w-2 h-2 bg-emerald-400 rounded-full"}),l.jsx("div",{className:"w-4 h-0.5 bg-emerald-400"}),l.jsx("div",{className:"w-2 h-2 bg-emerald-400 rounded-full"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("div",{className:"text-xs sm:text-sm text-emerald-700 bg-emerald-200 px-3 py-1.5 sm:px-4 sm:py-2 rounded-full font-bold shadow-md border border-emerald-300",children:[x.days," ",x.days===1?"day":"days"]}),l.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse shrink-0"})]})]})]}),l.jsx("div",{className:"hidden sm:block w-16 h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent shrink-0"}),l.jsxs("div",{className:"flex flex-wrap items-center gap-3 sm:gap-4 min-w-0",children:[l.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 bg-gradient-to-r from-indigo-50 to-blue-50 border-2 border-indigo-200 rounded-xl px-3 py-2 sm:px-4 sm:py-3 shadow-lg shrink-0",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("svg",{className:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),l.jsx("label",{className:"text-sm font-bold text-indigo-800",children:"Select Period:"})]}),l.jsx("select",{value:o,onChange:v=>p(v.target.value),className:"px-3 py-1.5 sm:px-4 sm:py-2 text-sm font-semibold border-2 border-indigo-300 rounded-lg focus:ring-4 focus:ring-indigo-200 focus:border-indigo-500 transition-all duration-300 bg-white shadow-md hover:shadow-lg hover:border-indigo-400 min-w-[120px] sm:min-w-[140px]",children:m.map(v=>l.jsx("option",{value:v.value,children:v.label},v.value))}),l.jsx("svg",{className:"w-4 h-4 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),o==="custom"&&l.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 bg-gradient-to-r from-amber-50 to-orange-50 border-2 border-amber-200 rounded-xl px-3 py-2 sm:px-4 sm:py-3 shadow-lg shrink-0",children:[l.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-amber-600 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"text-xs font-semibold text-amber-700 mb-1",children:"From"}),l.jsx("input",{type:"date",value:h.start,onChange:v=>y("start",v.target.value),className:"px-3 py-2 text-sm font-semibold border-2 border-amber-300 rounded-lg focus:ring-4 focus:ring-amber-200 focus:border-amber-500 transition-all duration-300 bg-white shadow-md hover:shadow-lg hover:border-amber-400"})]}),l.jsx("div",{className:"flex items-center",children:l.jsx("svg",{className:"w-4 h-4 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"text-xs font-semibold text-amber-700 mb-1",children:"To"}),l.jsx("input",{type:"date",value:h.end,onChange:v=>y("end",v.target.value),className:"px-3 py-2 text-sm font-semibold border-2 border-amber-300 rounded-lg focus:ring-4 focus:ring-amber-200 focus:border-amber-500 transition-all duration-300 bg-white shadow-md hover:shadow-lg hover:border-amber-400"})]})]})]})]})]})]})},LN=({dateRange:r,onDateRangeChange:t,onQuickRangeChange:a,onExportCSV:n,canExport:o=!1})=>{const[u,h]=U.useState(!1),g=U.useRef(null),m=U.useRef(null),{formatted:p,days:y}=b0(r.startDate,r.endDate);return U.useEffect(()=>{function x(v){const S=v.target;u&&g.current&&!g.current.contains(S)&&m.current&&!m.current.contains(S)&&h(!1)}return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[u]),l.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 h-16 flex items-center shrink-0 pl-4 pr-4 sm:pl-6 sm:pr-6 lg:px-8",children:l.jsxs("div",{className:"flex items-center justify-between gap-4 w-full min-w-0 h-full",children:[l.jsx("h1",{className:"m-0 text-sm sm:text-base font-semibold tracking-tight text-slate-700 truncate shrink-0 pl-2.5 sm:pl-3 leading-tight self-center border-b-0 border-transparent",style:{borderBottom:"none",borderImage:"none",paddingBottom:0,marginTop:"25px"},children:"CC Analytics"}),l.jsx("div",{className:"flex items-center justify-center min-w-0 flex-1 px-2",children:l.jsxs("div",{className:"relative",ref:g,children:[l.jsxs("button",{ref:m,type:"button",onClick:()=>h(x=>!x),className:"flex items-center gap-2 sm:gap-3 px-3 py-2 sm:px-4 sm:py-2.5 rounded-xl border-2 border-indigo-200 bg-gradient-to-r from-indigo-50 to-white hover:border-indigo-300 hover:from-indigo-100/80 transition-all duration-200 shadow-sm hover:shadow-md focus:outline-none focus:ring-2 focus:ring-indigo-300 focus:ring-offset-2","aria-expanded":u,"aria-haspopup":"dialog",title:"Change date range",children:[l.jsx("span",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-indigo-100 text-indigo-600 shrink-0",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),l.jsxs("span",{className:"text-left min-w-0",children:[l.jsx("span",{className:"block text-sm font-bold text-gray-900 truncate",children:p}),l.jsxs("span",{className:"block text-xs font-medium text-gray-500",children:[y," ",y===1?"day":"days"]})]}),l.jsx("svg",{className:`w-4 h-4 text-indigo-500 shrink-0 transition-transform duration-200 ${u?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),u&&l.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 z-50 bg-white rounded-xl border-2 border-gray-200 shadow-xl",role:"dialog","aria-label":"Select date range",children:l.jsx(UN,{dateRange:r,onDateRangeChange:t,onQuickRangeChange:a,compact:!0})})]})}),l.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 shrink-0",children:[l.jsxs("button",{onClick:n,disabled:!o,className:`flex items-center gap-2 px-3 py-2 sm:px-4 sm:py-2 rounded-lg transition-colors duration-200 text-sm font-medium ${o?"bg-indigo-600 hover:bg-indigo-700 text-white cursor-pointer shadow-sm hover:shadow":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,title:o?"Export dashboard data":"No data available for export",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),l.jsx("span",{className:"hidden sm:inline",children:"Export Data"})]}),l.jsx("img",{src:mo(),alt:"CC Logo",className:"w-9 h-9 sm:w-10 sm:h-10"})]})]})})},Mt=({children:r,className:t="",padding:a="md",hover:n=!1})=>{const o={sm:"p-4",md:"p-6",lg:"p-8"};return l.jsx("div",{className:`
      bg-white rounded-xl shadow-sm border border-gray-200
      ${o[a]}
      ${n?"hover:shadow-md transition-shadow duration-200":""}
      ${t}
    `,children:r})},qN=({title:r,value:t,change:a,icon:n,trend:o="stable",className:u=""})=>{const h=m=>{switch(m){case"up":return"text-green-600";case"down":return"text-red-600";default:return"text-gray-600"}},g=m=>{switch(m){case"increase":return"text-green-600 bg-green-50";case"decrease":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}};return l.jsx(v0,{scale:!0,glow:!0,color:"blue",children:l.jsx(Mt,{className:`${u} hover-lift`,children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:r}),l.jsx("p",{className:"text-3xl font-bold text-gray-900",children:t}),a&&l.jsxs("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium mt-2 ${g(a.type)}`,children:[l.jsx("span",{className:"mr-1",children:a.type==="increase"?"":a.type==="decrease"?"":""}),Math.abs(a.value),"%"]})]}),n&&l.jsx("div",{className:`rounded-lg ${h(o)}`,children:n})]})})})},Ad=({data:r,loading:t=!1})=>{if(t){const o=(r.totalSqmCut!==void 0?1:0)+(r.totalSqmManufactured!==void 0?1:0)+(r.projects!==void 0?1:0)+(r.responsibles!==void 0?1:0)+1,u=()=>o===1?"grid grid-cols-1 gap-6 justify-center":o===2?"grid grid-cols-1 md:grid-cols-2 gap-6 justify-center":o===3?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 justify-center":"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 justify-center";return l.jsx("div",{className:u(),children:[...Array(o)].map((h,g)=>l.jsx("div",{className:"animate-pulse",children:l.jsx("div",{className:"bg-gray-200 rounded-xl h-32"})},g))})}const a=[];r.totalSqmCut!==void 0&&a.push({title:"Total SQM Cut",value:`${r.totalSqmCut.toLocaleString()} m`,change:{value:0,type:"neutral"},trend:"stable",icon:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.121 14.121L19 19m-7-7l7-7m-7 7l-2.879 2.879M12 12L9.121 9.121m0 5.758a3 3 0 10-4.243-4.243 3 3 0 004.243 4.243zm8.879-8.879a3 3 0 10-4.243-4.243 3 3 0 004.243 4.243z"})})}),r.totalSqmManufactured!==void 0&&a.push({title:"Total SQM Manufactured",value:`${r.totalSqmManufactured.toLocaleString()} m`,change:{value:0,type:"neutral"},trend:"stable",icon:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2zm5-18v2M7 7h2v5a1 1 0 01-1 1H7V7z"})})}),r.projects!==void 0&&a.push({title:"Projects",value:r.projects,change:{value:0,type:"neutral"},trend:"stable",icon:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),r.responsibles!==void 0&&a.push({title:"Responsibles",value:r.responsibles,change:{value:0,type:"neutral"},trend:"stable",icon:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),a.push({title:"Total Panels",value:r.totalPanels.toLocaleString(),change:{value:0,type:"neutral"},trend:"stable",icon:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})});const n=()=>{const o=a.length;return o===1?"grid grid-cols-1 gap-6 justify-center":o===2?"grid grid-cols-1 md:grid-cols-2 gap-6 justify-center":o===3?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 justify-center":"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 justify-center"};return l.jsx("div",{className:n(),children:a.map((o,u)=>l.jsx(nn,{direction:"up",delay:u*100,className:"w-full",children:l.jsx(qN,{title:o.title,value:o.value,change:o.change,trend:o.trend,icon:o.icon})},u))})},$N="Australia/Brisbane",w0=()=>{const r=new Date;return new Date(r.toLocaleString("en-US",{timeZone:$N}))},go=r=>{const t=[7,9,11,14],a=[9,12,14],n=[14];return r===1||r===2||r===3||r===5?t:r===4?a:r===6?n:[]},j0=r=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][r],jo=()=>{const r=w0(),t=r.getDay(),a=r.getHours(),n=r.getMinutes(),o=a+n/60,h=go(t).find(g=>g>o);if(h!==void 0)return`Today at ${po(h)} (Brisbane)`;for(let g=1;g<=7;g++){const m=(t+g)%7,y=go(m)[0];if(y!==void 0)return`${j0(m)} at ${po(y)} (Brisbane)`}return" (Brisbane)"},kd=()=>{const r=w0(),t=r.getDay(),a=r.getHours(),n=r.getMinutes(),o=a+n/60,h=[...go(t)].reverse().find(g=>g<o);if(h!==void 0)return`Today at ${po(h)} (Brisbane)`;for(let g=1;g<=7;g++){const m=(t-g+7)%7,p=go(m),y=p[p.length-1];if(y!==void 0)return`${j0(m)} at ${po(y)} (Brisbane)`}return" (Brisbane)"},po=r=>{if(r==null||!Number.isFinite(r))return"";const t=Math.floor(r),a=Math.round(r%1*60),n=t>=12?"PM":"AM";return`${t>12?t-12:t===0?12:t}:${a.toString().padStart(2,"0")} ${n}`};za.register(cn,un,on,vp,yd,dn,hn,fn,vd);const zN=({data:r,title:t,loading:a=!1})=>{const n=U.useRef(null),o=U.useRef(null);if(U.useEffect(()=>{if(!n.current||a||!r||r.length===0)return;o.current&&o.current.destroy();const u=r.length>0?r.reduce((y,x)=>y+x.cut,0)/r.length:0,h=new Array(r.length).fill(u),g=r.map(y=>y.cut>=u?"rgb(34, 197, 94)":"rgb(239, 68, 68)"),m=r.length>0?r.reduce((y,x)=>x.cut+x.manufactured>y.cut+y.manufactured?x:y):{date:""},p=n.current.getContext("2d");if(p)return o.current=new za(p,{type:"bar",data:{labels:r.map(y=>{const[x,v,S]=y.date.split("-").map(Number);return new Date(x,v-1,S).toLocaleDateString("en-AU",{month:"short",day:"numeric"})}),datasets:[{label:"SQM Cut",data:r.map(y=>y.cut),backgroundColor:"rgba(59, 130, 246, 0.5)",borderColor:"rgb(59, 130, 246)",borderWidth:1,order:1,datalabels:{display:!1}},{label:"SQM Manufactured",data:r.map(y=>y.manufactured),backgroundColor:"rgba(34, 197, 94, 0.5)",borderColor:"rgb(34, 197, 94)",borderWidth:1,order:1,datalabels:{display:!1}},{label:"Average Cut",data:h,type:"line",borderColor:"rgb(251, 191, 36)",backgroundColor:"rgba(251, 191, 36, 0.1)",borderWidth:2,fill:!1,tension:.1,pointRadius:4,pointHoverRadius:6,pointBackgroundColor:g,pointBorderColor:g,pointBorderWidth:2,order:0,datalabels:{display:!1}}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20}},title:{display:!0,text:t,font:{size:25,weight:"bold"}},tooltip:{mode:"index",intersect:!1,callbacks:{afterTitle:y=>{const x=y[0].dataIndex;return r[x].date===m.date?[" Peak Production Day"]:[]}}}},scales:{x:{display:!0,title:{display:!0,text:"Date"},grid:{display:!1}},y:{display:!0,title:{display:!0,text:"SQM (m)"},beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.1)"}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}}),()=>{o.current&&o.current.destroy()}},[r,t,a]),a)return l.jsx(Mt,{children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),l.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})});if(!r||r.length===0){const u=jo();return l.jsx(Mt,{children:l.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Data Available Yet"}),l.jsx("p",{className:"text-sm text-center mb-3",children:"No productivity data available for the selected date range."}),l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-center max-w-sm",children:l.jsxs("p",{className:"text-xs text-blue-500 font-medium italic mb-1",children:["Next sync: ",u]})})]})})}return l.jsx(nn,{direction:"fade",delay:200,children:l.jsxs(Mt,{className:"hover-lift",children:[l.jsx("div",{className:"relative h-120 animate-chart-fade-in",children:l.jsx("canvas",{ref:n})}),l.jsx("div",{className:"mt-4 p-3 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg border border-yellow-200 animate-fade-in",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"text-yellow-600",children:""}),l.jsxs("span",{className:"text-sm font-bold text-gray-700",children:["Peak Production Day: ",(()=>{if(r.length===0)return"No data available";const h=r.reduce((x,v)=>v.cut+v.manufactured>x.cut+x.manufactured?v:x).date,[g,m,p]=h.split("-").map(Number);return new Date(g,m-1,p).toLocaleDateString("en-AU",{weekday:"long",month:"long",day:"numeric"})})()]})]})})]})})},ip=({children:r,onClick:t,variant:a="primary",size:n="md",disabled:o=!1,loading:u=!1,className:h=""})=>{const g="inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2",m={primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 disabled:bg-blue-300",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500 disabled:bg-gray-300",outline:"border border-gray-300 text-gray-700 bg-white hover:bg-gray-50 focus:ring-blue-500 disabled:bg-gray-50 disabled:text-gray-400",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-gray-500 disabled:text-gray-400"},p={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return l.jsxs("button",{onClick:t,disabled:o||u,className:`
        ${g}
        ${m[a]}
        ${p[n]}
        ${h}
      `,children:[u&&l.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r]})};class BN{constructor(t={}){ge(this,"memoryCache",new Map);ge(this,"defaultTTL");ge(this,"maxSize");this.defaultTTL=t.ttl||300*1e3,this.maxSize=t.maxSize||100}generateKey(t,a){const n=Object.keys(a).sort().map(o=>`${o}:${a[o]}`).join("|");return`${t}:${n}`}get(t,a){const n=this.generateKey(t,a),o=this.memoryCache.get(n);return o?Date.now()-o.timestamp>o.ttl?(this.memoryCache.delete(n),null):o.data:null}set(t,a,n,o){const u=this.generateKey(t,a);this.memoryCache.size>=this.maxSize&&this.cleanup(),this.memoryCache.set(u,{data:n,timestamp:Date.now(),ttl:o||this.defaultTTL})}invalidate(t){const a=[];for(const n of this.memoryCache.keys())n.startsWith(`${t}:`)&&a.push(n);a.forEach(n=>this.memoryCache.delete(n))}cleanup(){const t=Date.now(),a=[];for(const[n,o]of this.memoryCache.entries())t-o.timestamp>o.ttl&&a.push(n);a.forEach(n=>this.memoryCache.delete(n)),this.memoryCache.size>=this.maxSize&&Array.from(this.memoryCache.entries()).sort((u,h)=>u[1].timestamp-h[1].timestamp).slice(0,Math.floor(this.maxSize/2)).forEach(([u])=>this.memoryCache.delete(u))}clear(){this.memoryCache.clear()}getStats(){const t=Date.now();let a=0,n=0;for(const o of this.memoryCache.values())t-o.timestamp>o.ttl?a++:n++;return{total:this.memoryCache.size,active:n,expired:a,maxSize:this.maxSize}}}const La=new BN({ttl:300*1e3,maxSize:50}),qa={MAIN_METRICS:"main_metrics",PROJECTS:"projects",CUT_PRODUCTIVITY:"cut_productivity",MANUFACTURING_PRODUCTIVITY:"manufacturing_productivity",CNC_PRODUCTIVITY:"cnc_productivity",MAIN_CHART:"main_chart",CUT_CHART:"cut_chart",MANUFACTURING_CHART:"manufacturing_chart",CNC_CHART:"cnc_chart",ORDERS_BY_PROJECT:"orders_by_project"},qi={SHORT:120*1e3,MEDIUM:300*1e3,LONG:900*1e3,VERY_LONG:3600*1e3},IN=(r,t,a,n={})=>{const[o,u]=U.useState([]),[h,g]=U.useState(!1),[m,p]=U.useState(null),y=U.useCallback(()=>N(null,null,function*(){if(!r||!t||!a){u([]);return}const x={projectName:r,startDate:t,endDate:a};if(!n.forceRefresh){const v=La.get(qa.ORDERS_BY_PROJECT,x);if(v){u(v);return}}try{g(!0),p(null);const v=yield Xt.getOrdersByProject(r,t,a);La.set(qa.ORDERS_BY_PROJECT,x,v,n.ttl||qi.MEDIUM),u(v)}catch(v){console.error("Error fetching project orders:",v),p(v instanceof Error?v.message:"Error desconocido")}finally{g(!1)}}),[r,t,a,n.forceRefresh,n.ttl]);return U.useEffect(()=>{r&&t&&a&&y()},[y,r,t,a]),{orders:o,loading:h,error:m,refetch:y}},PN=({projectName:r,startDate:t,endDate:a})=>{const{orders:n,loading:o,error:u}=IN(r,t,a),h=m=>m?new Date(m).toLocaleDateString("en-AU",{year:"numeric",month:"short",day:"numeric"}):"N/A",g=m=>{if(!m)return"bg-gray-100 text-gray-800";switch(m.toLowerCase()){case"delivered":case"entregado":return"bg-green-100 text-green-800";case"delivering":return"bg-yellow-100 text-yellow-800";case"manufacturing":case"fabricando":return"bg-gray-100 text-gray-800";case"cutting":case"cortando":return"bg-orange-100 text-orange-800";default:return"bg-blue-100 text-blue-800"}};return o?l.jsx("div",{className:"flex items-center justify-center py-8",children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-4 bg-gray-200 rounded w-48 mb-2"}),l.jsx("div",{className:"h-4 bg-gray-200 rounded w-32"})]})}):u?l.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"text-red-600",children:l.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),l.jsxs("div",{className:"ml-3",children:[l.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading orders"}),l.jsx("p",{className:"text-sm text-red-700 mt-1",children:u})]})]})}):n.length===0?l.jsx("div",{className:"text-center py-8",children:l.jsxs("div",{className:"text-gray-500",children:[l.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),l.jsx("p",{className:"text-sm",children:"No orders found for this project in the selected period"})]})}):l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex items-center justify-center border-b border-gray-200 pb-4 mb-8",children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("h4",{className:"text-xl font-bold text-gray-900",children:"Orders"}),l.jsx("div",{className:"w-16 h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent"}),l.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:[n.length," orders"]})]})}),l.jsx("div",{className:"w-full border-t border-gray-100 my-4"}),l.jsx("div",{className:"space-y-4",children:n.map((m,p)=>l.jsxs("div",{className:"bg-gradient-to-r from-white to-gray-50 border border-gray-200 rounded-xl p-6 hover:shadow-lg hover:border-blue-300 transition-all duration-300",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-blue-100 text-blue-800 text-lg font-bold rounded-lg",children:p+1}),l.jsxs("div",{children:[l.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["Order #",m.order_id]}),l.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full ml-3 ${g(m.status)}`,children:(m.status||"Unknown").toUpperCase()})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-sm text-gray-500",children:"Created"}),l.jsx("div",{className:"font-medium text-gray-900",children:h(m.creation_date)})]})]}),l.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[l.jsxs("div",{className:"text-center p-4 bg-white rounded-lg border border-gray-100",children:[l.jsx("div",{className:"text-sm font-medium text-gray-500 mb-2",children:"Total Area"}),l.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[(m.total_area||0).toFixed(2)," m"]})]}),l.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg border border-blue-200",children:[l.jsx("div",{className:"text-sm font-medium text-blue-600 mb-2",children:"Cut SQM"}),l.jsxs("div",{className:"text-2xl font-bold text-blue-700",children:[(m.cut_sqm||0).toFixed(2)," m"]})]}),l.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg border border-green-200",children:[l.jsx("div",{className:"text-sm font-medium text-green-600 mb-2",children:"Manufactured SQM"}),l.jsxs("div",{className:"text-2xl font-bold text-green-700",children:[(m.manufactured_sqm||0).toFixed(2)," m"]})]}),l.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg border border-purple-200",children:[l.jsx("div",{className:"text-sm font-medium text-purple-600 mb-2",children:"Panels"}),l.jsx("div",{className:"text-2xl font-bold text-purple-700",children:m.panels_count||0})]})]}),l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[l.jsxs("div",{className:"flex items-center space-x-6",children:[m.expected_date&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"w-3 h-3 bg-yellow-400 rounded-full"}),l.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Expected: ",h(m.expected_date)]})]}),m.delivered_date&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"w-3 h-3 bg-green-400 rounded-full"}),l.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Delivered: ",h(m.delivered_date)]})]})]}),l.jsxs("div",{className:"text-sm text-gray-500",children:["Order #",m.order_id]})]})]},m.order_id))})]})},HN=({projects:r,loading:t=!1,dateRange:a})=>{const[n,o]=U.useState(new Set),u=p=>{const y=new Set(n);y.has(p)?y.delete(p):y.add(p),o(y)},h=p=>{switch(p){case"In Progress":return"bg-green-100 text-green-800";case"Done":return"bg-blue-100 text-blue-800";case"To Do":return"bg-yellow-100 text-yellow-800";case"Defects":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},g=p=>window.location.hostname==="gasti10.github.io"?`https://gasti10.github.io/CC_Flow_summary_report/?project=${encodeURIComponent(p)}`:`http://localhost:3000/?project=${encodeURIComponent(p)}`,m=p=>{const y=g(p);window.open(y,"_blank")};return t?l.jsx(Mt,{children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),l.jsx("div",{className:"space-y-3",children:[...Array(5)].map((p,y)=>l.jsx("div",{className:"h-16 bg-gray-200 rounded"},y))})]})}):l.jsxs(Mt,{children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Projects"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Worked on projects during the selected period"})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b-2 border-gray-300 bg-gray-50",children:[l.jsx("th",{className:"text-center py-4 px-6 font-semibold text-gray-800 text-sm",children:"Name"}),l.jsx("th",{className:"text-center py-4 px-4 font-semibold text-gray-800 text-sm",children:"Number"}),l.jsx("th",{className:"text-center py-4 px-4 font-semibold text-gray-800 text-sm",children:"PM"}),l.jsx("th",{className:"text-center py-4 px-4 font-semibold text-gray-800 text-sm",children:"Supervisor"}),l.jsx("th",{className:"text-center py-4 px-4 font-semibold text-gray-800 text-sm",children:"Status"}),l.jsx("th",{className:"text-center py-4 px-4 font-semibold text-gray-800 text-sm",children:"Progress"}),l.jsx("th",{className:"text-center py-4 px-4 font-semibold text-gray-800 text-sm",children:"SQM Cut"}),l.jsx("th",{className:"text-center py-4 px-4 font-semibold text-gray-800 text-sm",children:"SQM Manufactured"}),l.jsx("th",{className:"text-center py-4 px-6 font-semibold text-gray-800 text-sm",children:"Actions"})]})}),l.jsx("tbody",{children:r.map(p=>l.jsxs(lo.Fragment,{children:[l.jsxs("tr",{className:"border-b border-gray-200 hover:bg-blue-50 transition-colors duration-200",children:[l.jsx("td",{className:"py-6 px-6",children:l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"font-semibold text-gray-900 text-base",children:p.name}),l.jsx("div",{className:"text-sm text-gray-600 space-y-1",children:l.jsxs("div",{className:"flex items-center space-x-4 justify-center",children:[l.jsxs("span",{className:"flex items-center",children:[l.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full mr-2"}),"Start: ",p.startDate?new Date(p.startDate).toLocaleDateString("en-AU"):"N/A"]}),l.jsxs("span",{className:"flex items-center",children:[l.jsx("span",{className:"w-2 h-2 bg-yellow-400 rounded-full mr-2"}),"Expected: ",p.expectedCompletionDate?new Date(p.expectedCompletionDate).toLocaleDateString("en-AU"):"N/A"]}),l.jsxs("span",{className:"flex items-center",children:[l.jsx("span",{className:"w-2 h-2 bg-red-400 rounded-full mr-2"}),"End: ",p.endDate?new Date(p.endDate).toLocaleDateString("en-AU"):"N/A"]})]})})]})}),l.jsx("td",{className:"py-6 px-4 text-center",children:l.jsxs("span",{className:"inline-flex items-center justify-center w-12 h-8 bg-blue-100 text-blue-800 text-sm font-bold rounded-lg",children:["#",p.number]})}),l.jsx("td",{className:"py-6 px-4 text-center",children:l.jsx("div",{className:"text-sm font-medium text-gray-800",children:p.pm||"N/A"})}),l.jsx("td",{className:"py-6 px-4 text-center",children:l.jsx("div",{className:"text-sm font-medium text-gray-800",children:p.supervisor||"N/A"})}),l.jsx("td",{className:"py-6 px-4",children:l.jsx("span",{className:`inline-flex px-3 py-1.5 text-xs font-semibold rounded-full ${h(p.status)}`,children:p.status.replace("-"," ").toUpperCase()})}),l.jsx("td",{className:"py-6 px-4",children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-3",children:l.jsx("div",{className:`h-3 rounded-full transition-all duration-500 ${p.progress>=100?"bg-gradient-to-r from-red-500 to-red-600":p.progress>=85?"bg-gradient-to-r from-yellow-500 to-yellow-600":"bg-gradient-to-r from-blue-500 to-blue-600"}`,style:{width:`${Math.min(p.progress,100)}%`}})}),l.jsxs("span",{className:"text-sm font-semibold text-gray-700 min-w-[3rem]",children:[p.progress,"%"]})]})}),l.jsx("td",{className:"py-6 px-4 text-center",children:l.jsxs("div",{className:"text-sm font-semibold text-blue-700",children:[p.sqmCut.toLocaleString()," m"]})}),l.jsx("td",{className:"py-6 px-4 text-center",children:l.jsxs("div",{className:"text-sm font-semibold text-green-700",children:[p.sqmManufactured.toLocaleString()," m"]})}),l.jsx("td",{className:"py-6 px-6",children:l.jsxs("div",{className:"flex flex-col space-y-2",children:[l.jsx(ip,{variant:"ghost",size:"sm",onClick:()=>m(p.name),className:"px-4 py-2 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50",children:"Project Dashboard "}),l.jsx(ip,{variant:"outline",size:"sm",onClick:()=>u(p.id),className:"px-4 py-2 text-sm font-medium",children:n.has(p.id)?" Hide Orders":" Show Orders"})]})})]}),n.has(p.id)&&l.jsx("tr",{className:"bg-gradient-to-r from-gray-50 to-blue-50",children:l.jsx("td",{colSpan:9,className:"py-8 px-8",children:l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:l.jsx(PN,{projectName:p.name,startDate:a.startDate,endDate:a.endDate})})})})]},p.id))})]})})]})},sn=({title:r,icon:t,variant:a="default",className:n=""})=>{const u=(()=>{switch(a){case"charts":return{lineColor:"from-blue-400 to-blue-600",iconBg:"from-blue-500 to-blue-700",iconColor:"text-white",icon:"",label:"Charts"};case"performance":return{lineColor:"from-green-400 to-green-600",iconBg:"from-green-500 to-green-700",iconColor:"text-white",icon:"",label:"Performance"};case"projects":return{lineColor:"from-purple-400 to-purple-600",iconBg:"from-purple-500 to-purple-700",iconColor:"text-white",icon:"",label:"Projects"};case"cnc":return{lineColor:"from-orange-400 to-orange-600",iconBg:"from-orange-500 to-orange-700",iconColor:"text-white",icon:"",label:"CNC"};default:return{lineColor:"from-gray-400 to-gray-600",iconBg:"from-gray-500 to-gray-700",iconColor:"text-white",icon:"",label:"Section"}}})();return l.jsx("div",{className:`flex items-center justify-center py-12 ${n}`,children:l.jsxs("div",{className:"relative group",children:[l.jsxs("div",{className:"flex items-center space-x-6",children:[l.jsx("div",{className:`w-20 h-px bg-gradient-to-r from-transparent via-${u.lineColor.split("-")[1]}-400 to-${u.lineColor.split("-")[3]}-600 transform group-hover:scale-x-150 transition-all duration-500`}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:`w-12 h-12 bg-gradient-to-br ${u.iconBg} rounded-full flex items-center justify-center shadow-lg group-hover:shadow-xl group-hover:scale-110 transition-all duration-300`,children:l.jsx("span",{className:`${u.iconColor} text-lg`,children:t||u.icon})}),l.jsx("div",{className:`absolute -inset-3 bg-${u.lineColor.split("-")[1]}-200 rounded-full opacity-0 group-hover:opacity-30 group-hover:animate-ping transition-all duration-300`})]}),l.jsx("div",{className:`w-20 h-px bg-gradient-to-l from-transparent via-${u.lineColor.split("-")[1]}-400 to-${u.lineColor.split("-")[3]}-600 transform group-hover:scale-x-150 transition-all duration-500`})]}),l.jsx("div",{className:"absolute -top-12 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-all duration-300",children:l.jsx("div",{className:`bg-${u.lineColor.split("-")[1]}-600 text-white text-xs font-medium px-3 py-1 rounded-full shadow-lg`,children:r||u.label})})]})})},YN=(r,t,a={})=>{const[n,o]=U.useState(null),[u,h]=U.useState(!0),[g,m]=U.useState(null),p=U.useCallback(()=>N(null,null,function*(){const y={startDate:r,endDate:t};if(!a.forceRefresh){const x=La.get(qa.MAIN_METRICS,y);if(x){o(x),h(!1);return}}try{h(!0),m(null);const x=yield Xt.getMainMetrics(r,t);La.set(qa.MAIN_METRICS,y,x,a.ttl||qi.MEDIUM),o(x)}catch(x){console.error("Error fetching main metrics:",x),m(x instanceof Error?x.message:"Error desconocido")}finally{h(!1)}}),[r,t,a.forceRefresh,a.ttl]);return U.useEffect(()=>{r&&t&&p()},[p,r,t]),{data:n,loading:u,error:g,refetch:p}},VN=(r,t,a={})=>{const[n,o]=U.useState([]),[u,h]=U.useState(!0),[g,m]=U.useState(null),p=U.useCallback(()=>N(null,null,function*(){const y={startDate:r,endDate:t};if(!a.forceRefresh){const x=La.get(qa.PROJECTS,y);if(x){o(x),h(!1);return}}try{h(!0),m(null);const x=yield Xt.getProjectsWithMetrics(r,t);La.set(qa.PROJECTS,y,x,a.ttl||qi.MEDIUM),o(x)}catch(x){console.error("Error fetching projects:",x),m(x instanceof Error?x.message:"Error desconocido")}finally{h(!1)}}),[r,t,a.forceRefresh,a.ttl]);return U.useEffect(()=>{r&&t&&p()},[p,r,t]),{data:n,loading:u,error:g,refetch:p}},FN=(r,t,a={})=>{const[n,o]=U.useState([]),[u,h]=U.useState(!0),[g,m]=U.useState(null),p=U.useCallback(()=>N(null,null,function*(){const y={startDate:r,endDate:t};if(!a.forceRefresh){const x=La.get(qa.CUT_PRODUCTIVITY,y);if(x){o(x),h(!1);return}}try{h(!0),m(null);const x=yield Xt.getCutProductivityByResponsible(r,t);La.set(qa.CUT_PRODUCTIVITY,y,x,a.ttl||qi.SHORT),o(x)}catch(x){console.error("Error fetching cut productivity:",x),m(x instanceof Error?x.message:"Error desconocido")}finally{h(!1)}}),[r,t,a.forceRefresh,a.ttl]);return U.useEffect(()=>{r&&t&&p()},[p,r,t]),{data:n,loading:u,error:g,refetch:p}},QN=(r,t,a={})=>{const[n,o]=U.useState([]),[u,h]=U.useState(!0),[g,m]=U.useState(null),p=U.useCallback(()=>N(null,null,function*(){const y={startDate:r,endDate:t};if(!a.forceRefresh){const x=La.get(qa.MANUFACTURING_PRODUCTIVITY,y);if(x){o(x),h(!1);return}}try{h(!0),m(null);const x=yield Xt.getManufacturingProductivityByResponsible(r,t);La.set(qa.MANUFACTURING_PRODUCTIVITY,y,x,a.ttl||qi.SHORT),o(x)}catch(x){console.error("Error fetching manufacturing productivity:",x),m(x instanceof Error?x.message:"Error desconocido")}finally{h(!1)}}),[r,t,a.forceRefresh,a.ttl]);return U.useEffect(()=>{r&&t&&p()},[p,r,t]),{data:n,loading:u,error:g,refetch:p}},S0=({startDate:r,endDate:t})=>{const{data:a,loading:n,error:o,refetch:u}=YN(r,t),{data:h,loading:g,error:m,refetch:p}=VN(r,t),{data:y,loading:x,error:v,refetch:S}=FN(r,t),{data:C,loading:T,error:A,refetch:I}=QN(r,t),G=GN(y,C),P=n||g||x||T,te=o||m||v||A,he=U.useCallback(()=>{u(),p(),S(),I()},[u,p,S,I]);return{mainMetrics:a,projects:h,chartData:G,loading:P,error:te,refetch:he}},GN=(r,t)=>{const a=new Map,n=new Map;r.forEach(h=>{const g=h.fecha,m=a.get(g)||0;a.set(g,m+h.total_area)}),console.log("cutData",r),console.log("cutByDate",a),t.forEach(h=>{const g=h.fecha,m=n.get(g)||0;n.set(g,m+h.total_area)}),console.log("manufacturingData",t),console.log("manufacturingByDate",n);const o=new Set([...a.keys(),...n.keys()]);return Array.from(o).sort().map(h=>({date:h,cut:a.get(h)||0,manufactured:n.get(h)||0}))},lp=({dateRange:r})=>{const{mainMetrics:t,projects:a,chartData:n,loading:o,error:u,refetch:h}=S0(r),g=kd(),m=jo(),p=t?{totalSqmCut:t.total_sqm_cut,totalSqmManufactured:t.total_sqm_manufactured,projects:a.length,totalPanels:a.reduce((x,v)=>x+(v.total_panels||0),0)||0}:{totalSqmCut:0,totalSqmManufactured:0,projects:0,totalPanels:0},y=a.map((x,v)=>{var S;return{id:`project-${v}`,name:x.project_name,number:((S=x.project_number)==null?void 0:S.toString())||"N/A",pm:x.pm||"N/A",supervisor:x.site_supervisor||"N/A",status:x.status||"To Do",sqmCut:x.total_sqm_cut||0,sqmManufactured:x.total_sqm_manufactured||0,totalPanels:x.total_panels||0,progress:Math.round(x.progress_percentage||0),startDate:x.project_start_date,endDate:x.finalization_date||"",expectedCompletionDate:x.expected_completion_date,details:{panels:x.total_panels||0,materials:[],priority:"medium"}}});return l.jsxs("div",{className:"space-y-0",children:[o&&l.jsx("div",{className:"flex items-center justify-center py-12",children:l.jsx(DN,{size:"lg",color:"blue",text:"Loading analytics data..."})}),l.jsxs("div",{className:"flex items-center justify-between py-8",children:[l.jsx("div",{className:"w-32"}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Factory Analytics Dashboard"}),l.jsx("p",{className:"text-gray-600 italic",children:"Comprehensive overview of factory operations and performance metrics"})]}),l.jsx("div",{className:"flex items-center space-x-3",children:l.jsxs("div",{className:"text-sm text-gray-500",children:[l.jsxs("div",{className:"text-base font-medium",children:["Last sync: ",g]}),l.jsxs("div",{className:"text-xs italic",children:["Next sync: ",m]})]})})]}),u&&l.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"text-red-400 mr-3",children:""}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading data"}),l.jsx("p",{className:"text-sm text-red-600 mt-1",children:u})]})]}),l.jsx("button",{onClick:h,className:"px-3 py-1 bg-red-100 hover:bg-red-200 text-red-700 rounded-md text-sm font-medium transition-colors duration-200",children:"Retry"})]})}),l.jsx("section",{className:"py-8",children:l.jsx(nn,{direction:"up",delay:200,children:l.jsx(Ad,{data:p,loading:o})})}),l.jsx(sn,{variant:"charts",title:"Charts"}),l.jsx("section",{className:"py-8",children:l.jsx(nn,{direction:"up",delay:400,children:l.jsx(zN,{data:n,title:"Daily Production Overview",loading:o})})}),l.jsx(sn,{variant:"projects",title:"Projects"}),l.jsx("section",{className:"py-8",children:l.jsx(nn,{direction:"up",delay:600,children:l.jsx(HN,{projects:y,loading:o,dateRange:r})})})]})};za.register(cn,un,on,dn,hn,fn);const KN=({data:r,title:t,loading:a=!1})=>{const n=U.useRef(null),o=U.useRef(null);return U.useEffect(()=>{if(!n.current||a)return;o.current&&o.current.destroy();const u=r.reduce((v,S)=>(v[S.date]||(v[S.date]={}),v[S.date][S.responsible]||(v[S.date][S.responsible]=0),v[S.date][S.responsible]+=S.cut,v),{}),h=Object.keys(u).sort(),g=Array.from(new Set(r.map(v=>v.responsible))),p=(v=>{const S=["rgb(239, 68, 68)","rgb(251, 146, 60)","rgb(251, 191, 36)","rgb(132, 204, 22)","rgb(34, 197, 94)","rgb(16, 185, 129)","rgb(6, 182, 212)","rgb(59, 130, 246)","rgb(147, 51, 234)","rgb(168, 85, 247)"];if(v>S.length){const C=[];for(let T=S.length;T<v;T++){const I=(300+(T-S.length)*36)%360,G=75+T%2*15,P=50+T%3*8;C.push(`hsl(${I}, ${G}%, ${P}%)`)}return[...S,...C]}return S.slice(0,v)})(g.length),y=g.map((v,S)=>({label:v,data:h.map(C=>u[C][v]||0),backgroundColor:p[S%p.length],borderColor:p[S%p.length],borderWidth:1,datalabels:{display:!1}})),x=n.current.getContext("2d");if(x)return o.current=new za(x,{type:"bar",data:{labels:h.map(v=>{const[S,C,T]=v.split("-").map(Number);return new Date(S,C-1,T).toLocaleDateString("en-AU",{month:"short",day:"numeric"})}),datasets:y},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20,font:{size:12}}},title:{display:!0,text:t,font:{size:25,weight:"bold"}},tooltip:{mode:"index",intersect:!1,callbacks:{title:v=>{const S=h[v[0].dataIndex],[C,T,A]=S.split("-").map(Number);return new Date(C,T-1,A).toLocaleDateString("en-AU",{weekday:"long",month:"long",day:"numeric"})},label:v=>{const S=v.dataset.label,C=v.parsed.y;return`${S}: ${C.toLocaleString()} m`},footer:v=>`Total: ${v.reduce((C,T)=>C+T.parsed.y,0).toLocaleString()} m`}}},scales:{x:{display:!0,title:{display:!0,text:"Date"},grid:{display:!1},stacked:!0},y:{display:!0,title:{display:!0,text:"SQM Cut (m)"},beginAtZero:!0,stacked:!0,grid:{color:"rgba(0, 0, 0, 0.1)"}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}}),()=>{o.current&&o.current.destroy()}},[r,t,a]),a?l.jsx(Mt,{children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),l.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):l.jsx(Mt,{children:l.jsx("div",{className:"relative h-96",children:l.jsx("canvas",{ref:n})})})};za.register(cn,un,on,dn,hn,fn);const WN=({data:r,title:t,loading:a=!1})=>{const n=U.useRef(null),o=U.useRef(null);return U.useEffect(()=>{if(!n.current||a)return;o.current&&o.current.destroy();const u=r.reduce((x,v)=>(x[v.date]||(x[v.date]={}),x[v.date][v.cnc]||(x[v.date][v.cnc]=0),x[v.date][v.cnc]+=v.cut,x),{}),h=Object.keys(u).sort(),g=Array.from(new Set(r.map(x=>x.cnc))),m=["rgb(59, 130, 246)","rgb(34, 197, 94)","rgb(251, 191, 36)","rgb(239, 68, 68)","rgb(168, 85, 247)","rgb(236, 72, 153)"],p=g.map((x,v)=>({label:x,data:h.map(S=>u[S][x]||0),backgroundColor:m[v%m.length],borderColor:m[v%m.length],borderWidth:1,datalabels:{display:!1}})),y=n.current.getContext("2d");if(y)return o.current=new za(y,{type:"bar",data:{labels:h.map(x=>{const[v,S,C]=x.split("-").map(Number);return new Date(v,S-1,C).toLocaleDateString("en-AU",{month:"short",day:"numeric"})}),datasets:p},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20,font:{size:12}}},title:{display:!0,text:t,font:{size:25,weight:"bold"}},tooltip:{mode:"index",intersect:!1,callbacks:{title:x=>{const v=h[x[0].dataIndex],[S,C,T]=v.split("-").map(Number);return new Date(S,C-1,T).toLocaleDateString("en-AU",{weekday:"long",month:"long",day:"numeric"})},label:x=>{const v=x.dataset.label,S=x.parsed.y;return`${v}: ${S.toLocaleString()} m`},footer:x=>`Total: ${x.reduce((S,C)=>S+C.parsed.y,0).toLocaleString()} m`}}},scales:{x:{display:!0,title:{display:!0,text:"Date"},grid:{display:!1},stacked:!0},y:{display:!0,title:{display:!0,text:"SQM Cut (m)"},beginAtZero:!0,stacked:!0,grid:{color:"rgba(0, 0, 0, 0.1)"}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}}),()=>{o.current&&o.current.destroy()}},[r,t,a]),a?l.jsx(Mt,{children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),l.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):l.jsx(Mt,{children:l.jsx("div",{className:"relative h-96",children:l.jsx("canvas",{ref:n})})})},_0=({data:r,loading:t=!1,title:a})=>{if(t)return l.jsx(Mt,{children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),l.jsx("div",{className:"space-y-3",children:[...Array(5)].map((o,u)=>l.jsx("div",{className:"h-16 bg-gray-200 rounded"},u))})]})});if(!r||r.length===0)return l.jsx(Mt,{children:l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"text-4xl mb-4",children:""}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Data Available"}),l.jsx("p",{className:"text-gray-500",children:"No data available for the selected period"})]})});const n=[...r].sort((o,u)=>u.totalSqm-o.totalSqm);return l.jsxs(Mt,{children:[l.jsx("div",{className:"mb-6",children:l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:a})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-gray-200",children:[l.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Responsible"}),l.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Total Panels"}),l.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Total SQM"}),l.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Avg SQM/Panel"})]})}),l.jsx("tbody",{children:n.map((o,u)=>{const h=o.totalPanels>0?o.totalSqm/o.totalPanels:0,g=u===0;return l.jsxs("tr",{className:`
                    border-b border-gray-100 hover:bg-gray-50 transition-colors duration-200
                    ${g?"bg-yellow-50":""}
                  `,children:[l.jsx("td",{className:"py-4 px-4",children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:`
                        w-8 h-8 flex items-center justify-center text-white text-sm font-medium`,children:g?"":""}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-gray-900",children:o.responsible||"Unknown"}),g&&l.jsx("div",{className:"text-xs text-yellow-600 font-medium",children:"Top Performer"})]})]})}),l.jsx("td",{className:"py-4 px-4",children:l.jsx("div",{className:"text-sm text-gray-900 font-medium",children:o.totalPanels.toLocaleString()})}),l.jsx("td",{className:"py-4 px-4",children:l.jsxs("div",{className:"text-sm text-gray-900 font-medium",children:[o.totalSqm.toFixed(2)," m"]})}),l.jsx("td",{className:"py-4 px-4",children:l.jsxs("div",{className:"text-sm text-gray-900 font-medium",children:[h.toFixed(2)," m"]})})]},o.responsible)})})]})}),l.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-900",children:r.reduce((o,u)=>o+u.totalPanels,0).toLocaleString()}),l.jsx("div",{className:"text-sm text-gray-600",children:"Total Panels"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[r.reduce((o,u)=>o+u.totalSqm,0).toFixed(2)," m"]}),l.jsx("div",{className:"text-sm text-gray-600",children:"Total SQM"})]})]})})]})},XN=({data:r,loading:t=!1,title:a})=>{if(t)return l.jsx(Mt,{children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),l.jsx("div",{className:"space-y-3",children:[...Array(3)].map((o,u)=>l.jsx("div",{className:"h-16 bg-gray-200 rounded"},u))})]})});if(!r||r.length===0)return l.jsx(Mt,{children:l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"text-4xl mb-4",children:""}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No CNC Data Available"}),l.jsx("p",{className:"text-gray-500",children:"No CNC data available for the selected period"})]})});const n=[...r].sort((o,u)=>u.totalSqm-o.totalSqm);return l.jsxs(Mt,{children:[l.jsx("div",{className:"mb-6",children:l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:a})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-gray-200",children:[l.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"CNC Machine"}),l.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Total Panels"}),l.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Total SQM"}),l.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Avg SQM/Panel"}),l.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Inactive Days"})]})}),l.jsx("tbody",{children:n.map((o,u)=>{const h=o.totalPanels>0?o.totalSqm/o.totalPanels:0,g=u===0,m=o.totalDaysInRange>0?o.inactiveDays/o.totalDaysInRange*100:0,p=m>50;return l.jsxs("tr",{className:`
                    border-b border-gray-100 hover:bg-gray-50 transition-colors duration-200
                    ${g?"bg-yellow-50":""}
                    ${p?"bg-red-50":""}
                  `,children:[l.jsx("td",{className:"py-4 px-4",children:l.jsxs("div",{className:"flex items-center space-x-3 justify-center",children:[l.jsx("div",{className:`
                        w-8 h-8 flex items-center justify-center text-white text-sm font-medium rounded-full    
                      `,children:""}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-gray-900",children:o.cnc||"Unknown"}),g&&l.jsx("div",{className:"text-xs text-yellow-600 font-medium",children:"Top Performer"}),p&&l.jsx("div",{className:"text-xs text-red-600 font-medium",children:"Inactive"})]})]})}),l.jsx("td",{className:"py-4 px-4",children:l.jsx("div",{className:"text-sm text-gray-900 font-medium",children:o.totalPanels.toLocaleString()})}),l.jsx("td",{className:"py-4 px-4",children:l.jsxs("div",{className:"text-sm text-gray-900 font-medium",children:[o.totalSqm.toFixed(2)," m"]})}),l.jsx("td",{className:"py-4 px-4",children:l.jsxs("div",{className:"text-sm text-gray-900 font-medium",children:[h.toFixed(2)," m"]})}),l.jsx("td",{className:"py-4 px-4",children:l.jsx("div",{className:"flex items-center justify-center",children:l.jsxs("span",{className:`
                        inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
                        ${m===0?"bg-green-100 text-green-800":m<=50?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}
                      `,children:[o.inactiveDays," days (",m.toFixed(1),"%)"]})})})]},o.cnc)})})]})}),l.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-900",children:r.reduce((o,u)=>o+u.totalPanels,0).toLocaleString()}),l.jsx("div",{className:"text-sm text-gray-600",children:"Total Panels"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[r.reduce((o,u)=>o+u.totalSqm,0).toFixed(2)," m"]}),l.jsx("div",{className:"text-sm text-gray-600",children:"Total SQM"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-900",children:r.reduce((o,u)=>o+u.inactiveDays,0)}),l.jsx("div",{className:"text-sm text-gray-600",children:"Total Inactive Days"})]})]})})]})},JN=({startDate:r,endDate:t})=>{const[a,n]=U.useState([]),[o,u]=U.useState([]),[h,g]=U.useState([]),[m,p]=U.useState([]),[y,x]=U.useState(!0),[v,S]=U.useState(null);return U.useEffect(()=>{r&&t&&N(null,null,function*(){try{x(!0),S(null);const[T,A]=yield Promise.all([Xt.getCutProductivityByResponsible(r,t),Xt.getCutProductivityByCNC(r,t)]),I=T.map(D=>({date:D.fecha,responsible:D.responsable||"Sin asignar",cut:D.total_area})),G=A.map(D=>({date:D.fecha,cnc:D.cnc||"Sin asignar",cut:D.total_area})),P=new Map,te=new Map;T.forEach(D=>{const E=D.responsable||"Sin asignar";P.has(E)||P.set(E,{totalPanels:0,totalSqm:0,efficiency:0});const Y=P.get(E);Y.totalPanels+=D.panel_count,Y.totalSqm+=D.total_area}),P.forEach(D=>{D.efficiency=D.totalSqm>0?Math.min(100,D.totalSqm/100*10):0}),["1","2","3"].forEach(D=>{te.set(D,{totalPanels:0,totalSqm:0,inactiveDays:0,totalDaysInRange:0})}),A.forEach(D=>{const E=D.cnc||"Sin asignar";te.has(E)||te.set(E,{totalPanels:0,totalSqm:0,inactiveDays:0,totalDaysInRange:0});const Y=te.get(E);Y.totalPanels+=D.panel_count,Y.totalSqm+=D.total_area});const X=new Date(r),le=new Date(t),O=Math.ceil((le.getTime()-X.getTime())/(1e3*60*60*24))+1;te.forEach((D,E)=>{const Y=new Set(A.filter(ue=>ue.cnc===E).map(ue=>ue.fecha)),W=O-Y.size;D.inactiveDays=Math.max(0,W),D.totalDaysInRange=O}),n(I),u(G),g(Array.from(P.entries()).map(([D,E])=>He({responsible:D},E))),p(Array.from(te.entries()).map(([D,E])=>He({cnc:D},E)))}catch(T){console.error("Error fetching cut process data:",T),S(T instanceof Error?T.message:"Error desconocido")}finally{x(!1)}})},[r,t]),{responsibleData:a,cncData:o,responsiblesTable:h,cncTable:m,loading:y,error:v}},ZN=({dateRange:r})=>{const{responsibleData:t,cncData:a,responsiblesTable:n,cncTable:o,loading:u,error:h}=JN(r),g=kd(),m=jo(),p=t.reduce((S,C)=>S+C.cut,0),y=n.reduce((S,C)=>S+C.totalPanels,0),x=new Set(t.map(S=>S.responsible)).size,v={totalSqmCut:p,responsibles:x,totalPanels:y};return l.jsxs("div",{className:"space-y-10",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"w-32"}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Cut Process Analytics"}),l.jsx("p",{className:"text-gray-600 italic",children:"Detailed analysis of cutting operations and performance by responsible person and CNC machines"})]}),l.jsx("div",{className:"flex items-center space-x-3",children:l.jsxs("div",{className:"text-sm text-gray-500",children:[l.jsxs("div",{className:"text-base font-medium",children:["Last sync: ",g]}),l.jsxs("div",{className:"text-xs italic",children:["Next sync: ",m]})]})})]}),h&&l.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"text-red-400 mr-3",children:""}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading data"}),l.jsx("p",{className:"text-sm text-red-600 mt-1",children:h})]})]})}),l.jsx("div",{className:"space-y-4",children:l.jsx(Ad,{data:v,loading:u})}),l.jsx(sn,{variant:"charts",title:"Charts"}),l.jsx("div",{className:"space-y-4",children:l.jsx(KN,{data:t,title:"Daily Cutting",loading:u})}),l.jsx(sn,{variant:"performance",title:"Performance"}),l.jsx("div",{className:"space-y-4",children:l.jsx(_0,{data:n,title:"Performance by Responsible Person",loading:u})}),l.jsx(sn,{variant:"cnc",title:"CNC Machines"}),l.jsx("div",{className:"space-y-4",children:l.jsx(WN,{data:a,title:"Daily CNC",loading:u})}),l.jsx(sn,{variant:"cnc",title:"CNC Performance"}),l.jsx("div",{className:"space-y-4",children:l.jsx(XN,{data:o,title:"CNC Machine Performance",loading:u})})]})};za.register(cn,un,on,dn,hn,fn);const e1=({data:r,title:t,loading:a=!1})=>{const n=U.useRef(null),o=U.useRef(null);return U.useEffect(()=>{if(!n.current||a)return;o.current&&o.current.destroy();const u=r.reduce((v,S)=>(v[S.date]||(v[S.date]={}),v[S.date][S.responsible]||(v[S.date][S.responsible]=0),v[S.date][S.responsible]+=S.manufactured,v),{}),h=Object.keys(u).sort(),g=Array.from(new Set(r.map(v=>v.responsible))),p=(v=>{const S=["rgb(239, 68, 68)","rgb(251, 146, 60)","rgb(251, 191, 36)","rgb(132, 204, 22)","rgb(34, 197, 94)","rgb(16, 185, 129)","rgb(6, 182, 212)","rgb(59, 130, 246)","rgb(147, 51, 234)","rgb(168, 85, 247)"];if(v>S.length){const C=[];for(let T=S.length;T<v;T++){const I=(300+(T-S.length)*36)%360,G=75+T%2*15,P=50+T%3*8;C.push(`hsl(${I}, ${G}%, ${P}%)`)}return[...S,...C]}return S.slice(0,v)})(g.length),y=g.map((v,S)=>({label:v,data:h.map(C=>u[C][v]||0),backgroundColor:p[S%p.length],borderColor:p[S%p.length],borderWidth:1,datalabels:{display:!1}})),x=n.current.getContext("2d");if(x)return o.current=new za(x,{type:"bar",data:{labels:h.map(v=>{const[S,C,T]=v.split("-").map(Number);return new Date(S,C-1,T).toLocaleDateString("en-AU",{month:"short",day:"numeric"})}),datasets:y},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20,font:{size:12}}},title:{display:!0,text:t,font:{size:25,weight:"bold"}},tooltip:{mode:"index",intersect:!1,callbacks:{title:v=>{const S=h[v[0].dataIndex],[C,T,A]=S.split("-").map(Number);return new Date(C,T-1,A).toLocaleDateString("en-AU",{weekday:"long",month:"long",day:"numeric"})},label:v=>{const S=v.dataset.label,C=v.parsed.y;return`${S}: ${C.toLocaleString()} m`},footer:v=>`Total: ${v.reduce((C,T)=>C+T.parsed.y,0).toLocaleString()} m`}}},scales:{x:{display:!0,title:{display:!0,text:"Date"},grid:{display:!1},stacked:!0},y:{display:!0,title:{display:!0,text:"SQM Manufactured (m)"},beginAtZero:!0,stacked:!0,grid:{color:"rgba(0, 0, 0, 0.1)"}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}}),()=>{o.current&&o.current.destroy()}},[r,t,a]),a?l.jsx(Mt,{children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),l.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):l.jsx(Mt,{children:l.jsx("div",{className:"relative h-96",children:l.jsx("canvas",{ref:n})})})},t1=({startDate:r,endDate:t})=>{const[a,n]=U.useState([]),[o,u]=U.useState([]),[h,g]=U.useState(!0),[m,p]=U.useState(null);return U.useEffect(()=>{r&&t&&N(null,null,function*(){try{g(!0),p(null);const x=yield Xt.getManufacturingProductivityByResponsible(r,t),v=x.map(C=>({date:C.fecha,responsible:C.responsable||"Sin asignar",manufactured:C.total_area})),S=new Map;x.forEach(C=>{const T=C.responsable||"Sin asignar";S.has(T)||S.set(T,{totalPanels:0,totalSqm:0,efficiency:0});const A=S.get(T);A.totalPanels+=C.panel_count,A.totalSqm+=C.total_area}),S.forEach(C=>{C.efficiency=C.totalSqm>0?Math.min(100,C.totalSqm/100*10):0}),n(v),u(Array.from(S.entries()).map(([C,T])=>He({responsible:C},T)))}catch(x){console.error("Error fetching manufacturing data:",x),p(x instanceof Error?x.message:"Error desconocido")}finally{g(!1)}})},[r,t]),{responsibleData:a,responsiblesTable:o,loading:h,error:m}},a1=({dateRange:r})=>{const{responsibleData:t,responsiblesTable:a,loading:n,error:o}=t1(r),u=kd(),h=jo(),g=t.reduce((x,v)=>x+v.manufactured,0),m=a.reduce((x,v)=>x+v.totalPanels,0),p=new Set(t.map(x=>x.responsible)).size,y={totalSqmManufactured:g,responsibles:p,totalPanels:m};return l.jsxs("div",{className:"space-y-10",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"w-32"}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Manufacturing Analytics"}),l.jsx("p",{className:"text-gray-600 italic",children:"Detailed analysis of manufacturing operations and performance by responsible person"})]}),l.jsx("div",{className:"flex items-center space-x-3",children:l.jsxs("div",{className:"text-sm text-gray-500",children:[l.jsxs("div",{className:"text-base font-medium",children:["Last sync: ",u]}),l.jsxs("div",{className:"text-xs italic",children:["Next sync: ",h]})]})})]}),o&&l.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"text-red-400 mr-3",children:""}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading data"}),l.jsx("p",{className:"text-sm text-red-600 mt-1",children:o})]})]})}),l.jsx("div",{className:"space-y-4",children:l.jsx(Ad,{data:y,loading:n})}),l.jsx("div",{className:"flex items-center justify-center space-y-4",children:l.jsxs("div",{className:"relative group",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:"w-16 h-px bg-gradient-to-r from-transparent via-green-400 to-green-600 transform group-hover:scale-x-150 transition-all duration-500"}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-green-500 to-green-700 rounded-full flex items-center justify-center shadow-lg group-hover:shadow-xl group-hover:scale-110 transition-all duration-300",children:l.jsx("span",{className:"text-white text-sm font-bold",children:""})}),l.jsx("div",{className:"absolute -inset-2 bg-green-200 rounded-full opacity-0 group-hover:opacity-30 group-hover:animate-ping transition-all duration-300"})]}),l.jsx("div",{className:"w-16 h-px bg-gradient-to-l from-transparent via-green-400 to-green-600 transform group-hover:scale-x-150 transition-all duration-500"})]}),l.jsx("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-all duration-300",children:l.jsx("span",{className:"text-xs font-medium text-green-600 bg-white px-2 py-1 rounded-full shadow-sm",children:"Charts"})})]})}),l.jsx("div",{className:"space-y-4",children:l.jsx(e1,{data:t,title:"Daily Manufacturing",loading:n})}),l.jsx("div",{className:"flex items-center justify-center my-16",children:l.jsxs("div",{className:"relative group cursor-pointer",children:[l.jsxs("div",{className:"flex items-center space-x-6",children:[l.jsxs("div",{className:"flex space-x-1",children:[l.jsx("div",{className:"w-2 h-2 bg-blue-300 rounded-full group-hover:bg-blue-500 transition-colors duration-300"}),l.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full group-hover:bg-blue-600 transition-colors duration-300 delay-75"}),l.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full group-hover:bg-blue-700 transition-colors duration-300 delay-150"}),l.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full group-hover:bg-blue-600 transition-colors duration-300 delay-75"}),l.jsx("div",{className:"w-2 h-2 bg-blue-300 rounded-full group-hover:bg-blue-500 transition-colors duration-300"})]}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-700 rounded-lg flex items-center justify-center shadow-lg group-hover:shadow-2xl group-hover:rotate-12 transition-all duration-300",children:l.jsx("span",{className:"text-white text-lg",children:""})}),l.jsx("div",{className:"absolute -inset-3 bg-blue-200 rounded-lg opacity-0 group-hover:opacity-20 group-hover:animate-pulse transition-all duration-300"})]}),l.jsxs("div",{className:"flex space-x-1",children:[l.jsx("div",{className:"w-2 h-2 bg-blue-300 rounded-full group-hover:bg-blue-500 transition-colors duration-300"}),l.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full group-hover:bg-blue-600 transition-colors duration-300 delay-75"}),l.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full group-hover:bg-blue-700 transition-colors duration-300 delay-150"}),l.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full group-hover:bg-blue-600 transition-colors duration-300 delay-75"}),l.jsx("div",{className:"w-2 h-2 bg-blue-300 rounded-full group-hover:bg-blue-500 transition-colors duration-300"})]})]}),l.jsx("div",{className:"absolute -top-10 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-all duration-300",children:l.jsx("div",{className:"bg-blue-600 text-white text-xs font-medium px-3 py-1 rounded-full shadow-lg",children:"Performance"})})]})}),l.jsx("div",{className:"space-y-4",children:l.jsx(_0,{data:a,title:"Performance by Responsible Person",loading:n})})]})},s1=(r,t)=>{const a=r1(r);n1(a,`${t}.csv`,"text/csv")},r1=r=>{const t=[];return t.push("=== FACTORY ANALYTICS REPORT ==="),t.push(`Generated: ${new Date(r.exportDate).toLocaleString("en-AU")}`),t.push(`Date Range: ${r.dateRange.start} to ${r.dateRange.end}`),t.push("Company: Cladding Creations"),t.push(""),t.push("=== MAIN METRICS ==="),t.push("Metric,Value,Unit"),t.push(`Total SQM Cut,${r.metrics.totalCutArea.toFixed(2)},SQM`),t.push(`Total SQM Manufactured,${r.metrics.totalManufacturedArea.toFixed(2)},SQM`),t.push(`Total Projects,${r.projects.length},units`),t.push(`Total Panels,${r.metrics.totalPanels},units`),t.push(""),r.projects&&r.projects.length>0&&(t.push("=== PROJECTS SUMMARY ==="),t.push("Project Number,Project Name,PM,Supervisor,Status,Real Total Cut SQM,Expected Total SQM,Progress %,Allowed SQM to Buy,Start Date,Expected Date,Finalization Date,SQM Cut,SQM Manufactured,Total Panels"),r.projects.forEach(a=>{t.push([`"${a.projectNumber}"`,`"${a.projectName}"`,`"${a.pm}"`,`"${a.supervisor}"`,`"${a.status}"`,a.realTotalCutSqm.toFixed(2),a.expectedTotalSqm.toFixed(2),a.progressPercentage,a.allowedSqmToBuy.toFixed(2),a.startDate,a.expectedDate,a.finalizationDate,a.cutSqm.toFixed(2),a.manufacturedSqm.toFixed(2),a.totalPanels].join(","))}),t.push("")),r.chartData&&r.chartData.length>0&&(t.push("=== DAILY PRODUCTIVITY ==="),t.push("Date,SQM Cut,SQM Manufactured"),r.chartData.forEach(a=>{t.push([a.date,a.cutArea.toFixed(2),a.manufacturedArea.toFixed(2)].join(","))})),t.join(`
`)},n1=(r,t,a)=>{const n=new Blob([r],{type:a}),o=URL.createObjectURL(n),u=document.createElement("a");u.href=o,u.download=t,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(o)},i1=(r,t,a)=>`${r}_${t}_to_${a}`,l1=()=>({exportData:U.useCallback(t=>{if(!t.mainMetrics||!t.projects||!t.chartData){console.error("Missing data for export");return}const a={metrics:{totalCutArea:t.mainMetrics.total_sqm_cut,totalManufacturedArea:t.mainMetrics.total_sqm_manufactured,totalPanels:t.projects.reduce((o,u)=>o+(u.total_panels||0),0)},projects:t.projects.map(o=>{var u;return{projectNumber:((u=o.project_number)==null?void 0:u.toString())||"N/A",projectName:o.project_name,pm:o.pm||"N/A",supervisor:o.site_supervisor||"N/A",status:o.status||"N/A",realTotalCutSqm:o.real_cut_square_meters||0,expectedTotalSqm:o.expected_square_meters||0,progressPercentage:Math.round(o.progress_percentage||0),allowedSqmToBuy:o.allowed_sqm_to_buy||0,startDate:o.project_start_date||"",expectedDate:o.expected_completion_date||"",finalizationDate:o.finalization_date||"",cutSqm:o.total_sqm_cut||0,manufacturedSqm:o.total_sqm_manufactured||0,totalPanels:o.total_panels||0}}),chartData:t.chartData.map(o=>({date:o.date,cutArea:o.cut,manufacturedArea:o.manufactured})),exportDate:new Date().toISOString(),dateRange:{start:t.dateRange.startDate,end:t.dateRange.endDate}},n=i1("CC_Analytics_Report",t.dateRange.startDate,t.dateRange.endDate);s1(a,n)},[])}),o1=r=>{const{mainMetrics:t,projects:a,chartData:n}=S0(r),{exportData:o}=l1();return{handleExportCSV:U.useCallback(()=>{t&&a&&n&&o({mainMetrics:t,projects:a,chartData:n,dateRange:r})},[t,a,n,r,o]),canExport:!!(t&&a&&n)}},c1=({currentView:r,onViewChange:t,isOpen:a,onToggle:n})=>{const[o,u]=U.useState(!1);return U.useEffect(()=>{const h=setTimeout(()=>{u(!0),setTimeout(()=>{u(!1)},2e3)},1e3);return()=>clearTimeout(h)},[]),l.jsx(kN,{currentView:r,onViewChange:t,isOpen:a,onToggle:n,showHintAnimation:o})},u1=()=>{const[r,t]=U.useState("analytics"),[a,n]=U.useState(!1),{dateRange:o,setDateRange:u,setQuickRange:h}=MN(),{handleExportCSV:g,canExport:m}=o1(o);Ri("CC Analytics Dashboard");const p=U.useCallback(()=>{switch(r){case"analytics":return l.jsx(lp,{dateRange:o});case"cut-process":return l.jsx(ZN,{dateRange:o});case"manufacturing":return l.jsx(a1,{dateRange:o});default:return l.jsx(lp,{dateRange:o})}},[r,o]),y=U.useCallback(()=>{n(!a)},[a]);return l.jsxs("div",{className:"flex h-screen bg-gray-50",children:[l.jsx(c1,{currentView:r,onViewChange:t,isOpen:a,onToggle:y}),l.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden transition-all duration-300 pl-16 md:pl-0",children:[l.jsx(LN,{dateRange:o,onDateRangeChange:u,onQuickRangeChange:h,onExportCSV:g,canExport:m}),l.jsx("main",{className:"flex-1 overflow-auto p-8",children:l.jsx(ON,{children:p()})}),l.jsx("footer",{className:"bg-white border-t border-gray-200 px-8 py-6 sticky bottom-0",children:l.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[l.jsx("div",{className:"w-16 h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent"}),l.jsx("div",{className:"flex items-center space-x-3",children:l.jsx("img",{src:wo(),alt:"CC Logo",className:"h-10 w-auto"})}),l.jsx("div",{className:"w-16 h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent"}),l.jsx("div",{className:"text-center",children:l.jsxs("div",{className:"text-sm text-gray-500 mb-1",children:["Developed by"," ",l.jsx("a",{href:"https://www.gjouglard.com.ar",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 hover:underline transition-colors duration-200 font-medium",children:"GJ"})]})}),l.jsx("div",{className:"w-16 h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent"})]})})]})]})},d1=()=>{const{data:r,isLoading:t}=_d(),{data:a,isLoading:n}=zp();return U.useEffect(()=>{console.log(" Precargando datos en background...")},[]),U.useEffect(()=>{!t&&!n&&(console.log(" Datos precargados exitosamente"),console.log(` ${(a==null?void 0:a.length)||0} proyectos cargados`),console.log(` ${(r==null?void 0:r.length)||0} items cargados`))},[t,n,a==null?void 0:a.length,r==null?void 0:r.length]),null},h1=({logoPath:r,menuItems:t})=>{const[a,n]=U.useState(!1),o=U.useRef(null),u=xp();U.useEffect(()=>{const m=p=>{o.current&&!o.current.contains(p.target)&&n(!1)};return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[]);const h=()=>{n(!a)},g=m=>{u(m),n(!1)};return l.jsxs("div",{className:"logo-menu-container",ref:o,children:[l.jsxs("div",{className:"logo-button",onClick:h,children:[l.jsx("img",{src:r,alt:"CC Logo",className:"logo-image"}),l.jsx("div",{className:`menu-arrow ${a?"open":""}`,children:""})]}),a&&l.jsxs("div",{className:"menu-dropdown",children:[l.jsx("div",{className:"menu-header",children:l.jsx("span",{children:"Other Functions"})}),l.jsx("div",{className:"menu-items",children:t.map(m=>l.jsxs("button",{className:"menu-item",onClick:()=>g(m.path),children:[m.icon&&l.jsx("span",{className:"menu-item-icon",children:m.icon}),l.jsx("span",{className:"menu-item-label",children:m.label})]},m.id))})]})]})},op={"/":{name:"main",animationDuration:4e3,showDataPreloader:!0,loadingText:"Loading projects...",showHeader:!0},"/order-delivery":{name:"order-delivery",animationDuration:1200,showDataPreloader:!1,loadingText:"Loading...",showHeader:!1},"/analytics":{name:"analytics",animationDuration:1200,showDataPreloader:!1,loadingText:"Loading CC Analytics...",showHeader:!1},"/login":{name:"login",animationDuration:0,showDataPreloader:!1,loadingText:"",showHeader:!1},"/creator-of-orders":{name:"creator-of-orders",animationDuration:1200,showDataPreloader:!1,loadingText:"Loading...",showHeader:!1}},f1=r=>op[r]||op["/"],N0=U.createContext(void 0),m1=({children:r})=>{const[t,a]=U.useState(null),[n,o]=U.useState(null),[u,h]=U.useState(!0);U.useEffect(()=>{xa.auth.getSession().then(({data:{session:v}})=>{var S;o(v),a((S=v==null?void 0:v.user)!=null?S:null),h(!1)});const{data:{subscription:x}}=xa.auth.onAuthStateChange((v,S)=>{var C;o(S),a((C=S==null?void 0:S.user)!=null?C:null),h(!1)});return()=>x.unsubscribe()},[]);const y={user:t,session:n,loading:u,sendOtp:x=>N(null,null,function*(){const{error:v}=yield xa.auth.signInWithOtp({email:x,options:{shouldCreateUser:!0}});return{error:v}}),verifyOtp:(x,v)=>N(null,null,function*(){const{data:S,error:C}=yield xa.auth.verifyOtp({email:x,token:v,type:"email"});return{data:S,error:C}}),signOut:()=>N(null,null,function*(){yield xa.auth.signOut(),a(null),o(null)})};return l.jsx(N0.Provider,{value:y,children:r})},So=()=>{const r=U.useContext(N0);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r},g1=()=>{const[r,t]=U.useState(""),[a,n]=U.useState(""),[o,u]=U.useState("email"),[h,g]=U.useState(!1),[m,p]=U.useState(null),{sendOtp:y,verifyOtp:x,user:v}=So(),S=xp(),C=()=>window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?"/CC-logo-NEW_1.webp":"/CC_Flow_summary_report/CC-logo-NEW_1.webp",T=()=>window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?"/Cladding-Creations-Showcase.jpeg":"/CC_Flow_summary_report/Cladding-Creations-Showcase.jpeg";Ri("CC Login"),U.useEffect(()=>{if(v){const P=new URLSearchParams(window.location.search).get("from")||"/creator-of-orders";S(P,{replace:!0})}},[v,S]);const A=P=>N(null,null,function*(){if(P.preventDefault(),g(!0),p(null),!r||!r.includes("@")){p({type:"error",text:"Please enter a valid email"}),g(!1);return}try{const{error:te}=yield y(r);te?p({type:"error",text:te.message||"Error sending code"}):(p({type:"success",text:"Check your email for the 6-digit code."}),u("code"))}catch(te){p({type:"error",text:"An unexpected error occurred. Please try again."})}finally{g(!1)}}),I=P=>N(null,null,function*(){if(P.preventDefault(),g(!0),p(null),!a||a.length!==6){p({type:"error",text:"Please enter the 6-digit code"}),g(!1);return}try{const{error:te}=yield x(r,a);if(te)p({type:"error",text:te.message||"Invalid code. Please try again."}),n("");else{const he=new URLSearchParams(window.location.search).get("from")||"/creator-of-orders";S(he,{replace:!0})}}catch(te){p({type:"error",text:"An unexpected error occurred. Please try again."}),n("")}finally{g(!1)}}),G=()=>{u("email"),n(""),p(null)};return l.jsxs("div",{className:"login-container",children:[l.jsxs("div",{className:"login-image-section",children:[l.jsx("img",{src:T(),alt:"Cladding Creations",className:"login-showcase-image"}),l.jsx("div",{className:"login-image-overlay"})]}),l.jsx("div",{className:"login-form-section",children:l.jsxs("div",{className:"login-content",children:[l.jsx("div",{className:"login-logo",children:l.jsx("img",{src:C(),alt:"CC Logo"})}),l.jsxs("div",{className:"login-header",children:[l.jsx("h1",{children:"Welcome"}),l.jsx("p",{children:o==="email"?"Enter your email to receive a login code. Can use your Cladding Creations email address.":"Enter the 6-digit code sent to your email"})]}),o==="email"?l.jsxs("form",{onSubmit:A,className:"login-form",children:[l.jsx("div",{className:"form-group",children:l.jsx("input",{id:"email",type:"email",value:r,onChange:P=>t(P.target.value),placeholder:"your-email@claddingcreations.com.au",required:!0,disabled:h,autoComplete:"email"})}),m&&l.jsx("div",{className:`message ${m.type}`,children:m.text}),l.jsx("button",{type:"submit",className:"login-button",disabled:h,children:h?"Sending...":"Send Code"})]}):l.jsxs("form",{onSubmit:I,className:"login-form",children:[l.jsx("div",{className:"form-group",children:l.jsx("input",{id:"code",type:"text",value:a,onChange:P=>{const te=P.target.value.replace(/\D/g,"").slice(0,6);n(te)},placeholder:"000000",required:!0,disabled:h,autoComplete:"one-time-code",maxLength:6,className:"code-input"})}),m&&l.jsx("div",{className:`message ${m.type}`,children:m.text}),l.jsx("button",{type:"submit",className:"login-button",disabled:h||a.length!==6,children:h?"Verifying...":"Verify Code"}),l.jsx("button",{type:"button",onClick:G,className:"login-button-secondary",disabled:h,children:"Change Email"})]}),l.jsx("div",{className:"login-footer",children:l.jsx("p",{className:"help-text",children:o==="email"?"You will receive a 6-digit code in your email":`Code sent to ${r}`})})]})})]})},p1=({children:r})=>{const{user:t,loading:a}=So(),n=wp();return a?l.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:l.jsx(Ea,{})}):t?l.jsx(l.Fragment,{children:r}):l.jsx(db,{to:"/login",state:{from:n.pathname},replace:!0})},C0=U.createContext(void 0),cp={project:"",orderId:"",status:"Ready to cut",responsable:"",expectedTo:Pp(),priority:"Normal",selectedSheets:[],sheets:"",colour:"",ignoredSheetDimensions:[],panels:[],csvFile:null,orderComment:"",documents:[],selectedExistingDocuments:[]},up={step1:{isValid:!1,errors:[]},step2:{isValid:!1,errors:[]},step3:{isValid:!1,errors:[]},step4:{isValid:!0,errors:[]},step5:{isValid:!1,errors:[]}};function y1({children:r}){const[t,a]=U.useState(1),[n,o]=U.useState(cp),[u,h]=U.useState(up),[g,m]=U.useState(!1),[p,y]=U.useState(null),[x,v]=U.useState(!1),[S,C]=U.useState(null),[T,A]=U.useState(null),I=U.useCallback((O,D)=>{const E=D||n,Y=[];switch(O){case 1:E.project||Y.push("Project is required"),E.orderId?S===!1?Y.push("Order ID already exists. Please use a different Order ID."):S===null&&E.orderId.trim().length>0&&Y.push("Please wait while we verify the Order ID availability"):Y.push("Order ID is required"),E.responsable||Y.push("Responsable is required"),E.expectedTo||Y.push("Expected to is required");break;case 2:E.panels.length===0?Y.push("Must import at least one valid panel"):(E.panels.filter(we=>we.isDuplicate).length>0&&Y.push("Please fix duplicate panel names in the CSV"),E.panels.filter(we=>we.existsInDatabase).length>0&&Y.push("Some panel names already exist in the database. Please rename them."));break;case 3:if(E.selectedSheets.length===0)Y.push("Must select at least one sheet");else{E.selectedSheets.filter(M=>M.qty<=0).length>0&&Y.push("All selected sheets must have a quantity greater than 0"),E.selectedSheets.filter(M=>!M.colour||M.colour.trim()==="").length>0&&Y.push("All sheets must have a colour");const we=new Set(E.ignoredSheetDimensions||[]),k=new Set(E.panels.map(M=>{var F;return(F=M.sheetName)==null?void 0:F.trim()}).filter(Boolean).filter(M=>!we.has(M)));E.selectedSheets.length<k.size&&Y.push("Please select a colour for every detected sheet size")}break;case 4:E.documents.length>0&&(E.documents.filter(we=>!we.name||we.name.trim()==="").length>0&&Y.push("All documents must have a name"),E.documents.filter(we=>!we.category||we.category.trim()==="").length>0&&Y.push("All documents must have a category"));break;case 5:E.project||Y.push("Project is required"),E.orderId||Y.push("Order ID is required"),E.selectedSheets.length===0&&Y.push("Must select at least one sheet"),E.panels.length===0&&Y.push("Must import at least one valid panel");break}const W=Y.length===0;return h(ue=>lt(He({},ue),{[`step${O}`]:{isValid:W,errors:Y}})),W},[n,S]),G=U.useCallback(O=>{o(D=>{const E=He(He({},D),O);if(O.selectedSheets!==void 0)if(O.selectedSheets.length>0){const Y=O.selectedSheets[0];E.colour=Y.colour;const W=O.selectedSheets.map(ue=>`${ue.dimension} - ${ue.colour}`);E.sheets=W.join(", ")}else E.colour="",E.sheets="";return E})},[]);U.useEffect(()=>{I(t,n)},[n,t,S,I]);const P=U.useCallback(()=>{I(t)&&t<5&&a(O=>O+1)},[t,I]),te=U.useCallback(()=>{t>1&&a(O=>O-1)},[t]),he=U.useCallback(O=>{O>=1&&O<=5&&a(O)},[]),X=U.useCallback(()=>{a(1),o(cp),h(up),m(!1),y(null),v(!1),C(null),A(null)},[]),le={currentStep:t,formData:n,validation:u,isLoading:g,error:p,success:x,orderIdIsValid:S,creationResult:T,updateFormData:G,validateStep:I,nextStep:P,previousStep:te,goToStep:he,resetWizard:X,setLoading:m,setError:y,setSuccess:v,setOrderIdIsValid:C,setCreationResult:A};return l.jsx(C0.Provider,{value:le,children:r})}function $a(){const r=U.useContext(C0);if(r===void 0)throw new Error("useWizard must be used within a WizardProvider");return r}const dp=[{number:1,label:"Order Information"},{number:2,label:"Panels Import"},{number:3,label:"Sheets Selection"},{number:4,label:"Upload Documents"},{number:5,label:"Review & Create"}];function v1(){const{currentStep:r}=$a();return l.jsx("div",{className:"wizard-progress",children:dp.map((t,a)=>l.jsxs("div",{className:"wizard-progress-item",children:[a>0&&l.jsx("div",{className:"wizard-progress-line-before",children:l.jsx("div",{className:`wizard-progress-line-fill ${r>=t.number?"completed":""}`})}),l.jsxs("div",{className:`wizard-progress-step ${r===t.number?"active":r>t.number?"completed":"pending"}`,children:[l.jsx("div",{className:"wizard-progress-step-number",children:t.number}),l.jsx("div",{className:"wizard-progress-step-label",children:t.label})]}),a<dp.length-1&&l.jsx("div",{className:"wizard-progress-line-after",children:l.jsx("div",{className:`wizard-progress-line-fill ${r>t.number?"completed":""}`})})]},t.number))})}function b1(){var C,T;const{currentStep:r,previousStep:t,nextStep:a,validateStep:n,isLoading:o,validation:u,success:h}=$a(),g=()=>{n(r)&&a()},m=()=>{t()},p=r===1,y=r===5,x=(T=(C=u[`step${r}`])==null?void 0:C.isValid)!=null?T:!1,v=o||!x,S=p||o||h;return l.jsxs("div",{className:"wizard-navigation",children:[l.jsx("button",{type:"button",onClick:m,disabled:S,className:"wizard-nav-button wizard-nav-button-prev",children:"Previous"}),y?null:l.jsx("button",{type:"button",onClick:g,disabled:v,className:"wizard-nav-button wizard-nav-button-next",children:"Next"})]})}function x1(r){const{data:t,isLoading:a,error:n}=oa({queryKey:["lastOrder",r],queryFn:()=>N(null,null,function*(){var h;if(!r)return null;const u=yield Xt.getOrdersCutByProject(r);return u.length===0?null:((h=u[0])==null?void 0:h["Order ID"])||null}),enabled:!!r,staleTime:3e5}),o=t?w1(t):"";return{lastOrderId:t||"",nextOrderId:o,isLoading:a,error:n}}function w1(r){const t=r.match(/(\d+)$/);if(t){const a=parseInt(t[1],10),n=r.substring(0,r.length-t[1].length),o=a+1,u=t[1].length;return`${n}${o.toString().padStart(u,"0")}`}return`${r}-1`}function j1(r,t=500){const[a,n]=U.useState(r);U.useEffect(()=>{const g=setTimeout(()=>{n(r)},t);return()=>clearTimeout(g)},[r,t]);const{data:o,isLoading:u}=oa({queryKey:["orderIdValidation",a],queryFn:()=>N(null,null,function*(){return!a||!a.trim()?null:yield Xt.checkOrderIdExists(a)}),enabled:!!a&&a.trim().length>0,staleTime:120*1e3,retry:!1});return{isValid:a.trim().length===0||o===null?null:!o,isChecking:u&&a.trim().length>0}}const hp=new Os,S1=[{value:"Ready to cut",label:"Ready to cut",icon:""},{value:"cutting",label:"Cutting",icon:""},{value:"manufacturing",label:"Manufacturing",icon:""},{value:"delivering",label:"Delivering",icon:""},{value:"delivered",label:"Delivered",icon:""}],_1=[{value:"Normal",label:"Normal",color:"#48bb78",bgColor:"#c6f6d5"},{value:"High",label:"High",color:"#d69e2e",bgColor:"#fefcbf"},{value:"Urgent",label:"Urgent",color:"#e53e3e",bgColor:"#fed7d7"}],N1=r=>{if(!r)return"N/A";try{const t=new Date(r);if(isNaN(t.getTime()))return r;const a=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),o=t.getFullYear();return`${a}/${n}/${o}`}catch(t){return r}},C1=r=>r<50?"#48bb78":r<90?"#ecc94b":"#e53e3e";function fp(){var we;const{formData:r,updateFormData:t,validation:a}=$a(),{user:n}=So(),[o,u]=U.useState(!1),h=Gv(),[g,m]=U.useState(""),[p,y]=U.useState(!1),[x,v]=U.useState(!1),{data:S,isLoading:C}=oa({queryKey:["projects"],queryFn:()=>hp.getAllProjects(),staleTime:900*1e3}),T=U.useMemo(()=>!r.project||!S?null:S.find(k=>k.Name===r.project)||null,[r.project,S]),{data:A,isLoading:I}=oa({queryKey:["orders-by-project",r.project],queryFn:()=>Xt.getOrdersCutByProject(r.project||""),enabled:!!r.project,staleTime:300*1e3}),G=U.useMemo(()=>{if(!S)return[];if(!g.trim())return S;const k=g.toLowerCase().trim();return S.filter(M=>{var _,$,z;const F=(_=M.Name)==null?void 0:_.toLowerCase().includes(k),J=($=M.Number)==null?void 0:$.toString().includes(k),w=(z=M.PM)==null?void 0:z.toLowerCase().includes(k);return F||J||w})},[S,g]);U.useEffect(()=>{T!=null&&T.Name&&m(T.Name)},[T]);const P=U.useMemo(()=>{if(!T)return null;const k=Number(T["Expected Square Meters"])||0,M=Number(T["Real Cut Square Meters"])||0;if(k===0)return null;const F=k,J=F>0?M/F*100:0;return{expected:k,realCut:M,reference:F,percentage:Math.min(J,100),actualPercentage:J,color:C1(M>0&&k>0?M/k*100:0),hasRealCut:M>0}},[T]),{nextOrderId:te,isLoading:he}=x1(r.project||null),{isValid:X,isChecking:le}=j1(r.orderId,500),{setOrderIdIsValid:O}=$a();U.useEffect(()=>{O(X)},[X,O]),U.useEffect(()=>{(!r.orderId||r.orderId.trim().length===0)&&O(null)},[r.orderId,O]),U.useEffect(()=>{if(n!=null&&n.email&&!r.responsable){const k=n.email.split("@")[0].charAt(0).toUpperCase()+n.email.split("@")[0].slice(1);t({responsable:k})}},[n==null?void 0:n.email,r.responsable,t]),U.useEffect(()=>{r.project&&te&&!x?t({orderId:te}):r.project||(t({orderId:""}),v(!1))},[r.project,te,t,x]),U.useEffect(()=>{v(!1)},[r.project]);const D=U.useCallback(()=>N(null,null,function*(){u(!0);try{const k=yield hp.getAllProjects({forceAppSheet:!0});h.setQueryData(["projects"],k),console.log(" Sync completed - data refreshed from AppSheet")}catch(k){console.error("Error syncing from AppSheet:",k)}finally{u(!1)}}),[h]),E=(k,M)=>{t({[k]:M}),k==="orderId"&&v(!0)},Y=k=>{t({project:k}),m(k),y(!1)},W=k=>{m(k),y(!0),k.trim()||t({project:""})},ue=k=>{t({priority:k})},pe=a.step1;return C?l.jsxs("div",{className:"step-container step-loading",children:[l.jsx(Ea,{}),l.jsx("p",{children:"Loading projects..."})]}):l.jsxs("div",{className:"step-container step1-order",children:[l.jsx("h2",{className:"step-title",children:"Order Information"}),l.jsx("p",{className:"step-description",children:"Complete the basic information for the cutting order"}),l.jsxs("div",{className:"step1-layout",children:[l.jsxs("div",{className:"step1-form-column",children:[l.jsxs("div",{className:"form-row-compact",children:[l.jsxs("div",{className:"form-group form-group-large",children:[l.jsx("label",{htmlFor:"project",className:"form-label required",children:"Project"}),l.jsxs("div",{className:"project-search-container",children:[l.jsx("input",{id:"project",type:"text",value:g,onChange:k=>W(k.target.value),onFocus:()=>y(!0),onBlur:()=>{setTimeout(()=>y(!1),200)},className:`form-input project-search-input ${pe.errors.includes("The project is required")?"error":""}`,placeholder:"Search project by name, number, or PM...",autoComplete:"off"}),p&&G.length>0&&l.jsxs("div",{className:"project-dropdown",children:[G.slice(0,10).map(k=>l.jsxs("div",{className:`project-dropdown-item ${r.project===k.Name?"selected":""}`,onMouseDown:M=>{M.preventDefault(),Y(k.Name)},children:[l.jsxs("div",{className:"project-dropdown-name",children:[k.Name,k.Number&&l.jsxs("span",{className:"project-dropdown-number",children:["#",k.Number]})]}),k.PM&&l.jsxs("div",{className:"project-dropdown-pm",children:["PM: ",k.PM]})]},k.Name)),G.length>10&&l.jsxs("div",{className:"project-dropdown-footer",children:["Showing 10 of ",G.length," projects"]})]}),p&&g.trim()&&G.length===0&&l.jsx("div",{className:"project-dropdown",children:l.jsx("div",{className:"project-dropdown-empty",children:"No projects found"})})]}),pe.errors.includes("The project is required")&&l.jsx("span",{className:"form-error",children:"The project is required"})]}),l.jsxs("div",{className:"form-group form-group-small",children:[l.jsxs("label",{htmlFor:"orderId",className:"form-label required",children:[l.jsx("span",{className:"label-icon",children:""}),"Order ID"]}),l.jsxs("div",{className:"input-with-validation",children:[l.jsx("input",{id:"orderId",type:"text",value:r.orderId,onChange:k=>E("orderId",k.target.value),className:`form-input input-centered ${pe.errors.includes("The Order ID is required")?"error":X===!0?"valid":""}`,placeholder:he?"...":"Auto",disabled:he}),he&&l.jsx("span",{className:"input-loading",children:""}),!he&&le&&l.jsx("span",{className:"input-validation-icon checking",title:"Checking availability...",children:""}),!he&&!le&&X===!0&&l.jsx("span",{className:"input-validation-icon valid",title:"Order ID is available",children:""}),!he&&!le&&X===!1&&l.jsx("span",{className:"input-validation-icon invalid",title:"Order ID already exists",children:""})]}),pe.errors.includes("The Order ID is required")&&l.jsx("span",{className:"form-error",children:"Required"}),pe.errors.includes("Order ID already exists. Please use a different Order ID.")&&l.jsx("span",{className:"form-error",children:"This Order ID already exists."}),pe.errors.includes("Please wait while we verify the Order ID availability")&&l.jsx("span",{className:"form-error",children:"Please wait while we verify the Order ID availability"}),X===!1&&!pe.errors.some(k=>k.includes("Order ID already exists"))&&l.jsx("span",{className:"form-error",children:"This Order ID already exists"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"status",className:"form-label required",children:"Status"}),l.jsx("select",{id:"status",value:r.status,onChange:k=>E("status",k.target.value),className:"form-select select-centered",children:S1.map(k=>l.jsxs("option",{value:k.value,children:[k.icon," ",k.label]},k.value))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"responsable",className:"form-label required",children:"Responsable"}),l.jsx("input",{id:"responsable",type:"text",value:r.responsable,onChange:k=>E("responsable",k.target.value),className:`form-input ${pe.errors.includes("The responsible is required")?"error":""}`,placeholder:"Enter responsable name"}),pe.errors.includes("The responsible is required")&&l.jsx("span",{className:"form-error",children:"The responsible is required"})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{className:"form-label required",children:[l.jsx("span",{className:"label-icon",children:""}),"Priority"]}),l.jsx("div",{className:"priority-toggle-group",children:_1.map(k=>l.jsxs("button",{type:"button",className:`priority-toggle-btn priority-${k.value.toLowerCase()} ${r.priority===k.value?"selected":""}`,onClick:()=>ue(k.value),style:{"--priority-color":k.color,"--priority-bg":k.bgColor},children:[k.value==="Urgent"?"":k.value==="High"?"":"",l.jsx("span",{children:k.label})]},k.value))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"expectedTo",className:"form-label required",children:"Expected to"}),l.jsx("input",{id:"expectedTo",type:"date",value:r.expectedTo,onChange:k=>E("expectedTo",k.target.value),className:`form-input input-centered ${pe.errors.includes("The expected date is required")?"error":""}`,min:Pp()}),pe.errors.includes("The expected date is required")&&l.jsx("span",{className:"form-error",children:"The expected date is required"})]})]}),l.jsx("div",{className:"step1-info-column",children:T?l.jsxs("div",{className:"project-info-card",children:[l.jsxs("div",{className:"project-info-header",children:[l.jsxs("h3",{className:"project-info-title",children:[l.jsx("span",{className:"info-icon",children:""}),"Project Information"]}),l.jsx("span",{className:`header-status-badge status-${(we=T.Status)==null?void 0:we.toLowerCase().replace(/\s+/g,"-")}`,children:T.Status||"N/A"})]}),P&&l.jsxs("div",{className:"project-progress-section",children:[l.jsxs("div",{className:"progress-header",children:[l.jsx("span",{className:"progress-label",children:"Cutting Progress"}),P.hasRealCut&&l.jsxs("span",{className:"progress-percentage",style:{color:P.color},children:[P.actualPercentage.toFixed(1),"%"]})]}),l.jsx("div",{className:"progress-bar-container",children:l.jsx("div",{className:"progress-bar-fill",style:{width:`${P.percentage}%`,backgroundColor:P.color}})}),l.jsxs("div",{className:"progress-stats",children:[l.jsxs("div",{className:"progress-stat-row",children:[l.jsx("span",{className:"stat-label",children:"Real Cut:"}),l.jsxs("span",{className:"stat-value-with-sync",children:[l.jsx("span",{className:"stat-value",style:{color:P.hasRealCut?P.color:"#a0aec0"},children:P.hasRealCut?`${P.realCut.toFixed(2)} m`:"No data"}),l.jsx("button",{type:"button",className:`sync-btn ${o?"syncing":""}`,onClick:D,disabled:o,title:"Sync data from AppSheet",children:o?"":""})]})]}),l.jsxs("div",{className:"progress-stat-row",children:[l.jsx("span",{className:"stat-label",children:"Expected:"}),l.jsxs("span",{className:"stat-value",children:[P.expected.toLocaleString()," m"]})]})]})]}),l.jsxs("div",{className:"project-info-grid",children:[l.jsxs("div",{className:"info-item",children:[l.jsx("span",{className:"info-label",children:"Project Manager"}),l.jsx("span",{className:"info-value",children:T.PM||"N/A"})]}),l.jsxs("div",{className:"info-item",children:[l.jsx("span",{className:"info-label",children:"Site Supervisor"}),l.jsx("span",{className:"info-value",children:T["Site Supervisor"]||"N/A"})]}),T["Total Orders"]!==void 0&&Number(T["Total Orders"])>0&&l.jsxs("div",{className:"info-item",children:[l.jsx("span",{className:"info-label",children:"Total Orders"}),l.jsx("span",{className:"info-value highlight",children:T["Total Orders"]})]})]}),l.jsxs("div",{className:"project-orders-section",children:[l.jsxs("h4",{className:"orders-section-title",children:[l.jsx("span",{className:"orders-icon",children:""}),"Project Orders",A&&A.length>0&&l.jsxs("span",{className:"orders-count",children:["(",A.length,")"]})]}),I?l.jsxs("div",{className:"orders-loading",children:[l.jsx(Ea,{}),l.jsx("span",{children:"Loading orders..."})]}):A&&A.length>0?l.jsxs("div",{className:"orders-list",children:[A.sort((k,M)=>{const F=new Date(k["Creation Date"]||0);return new Date(M["Creation Date"]||0).getTime()-F.getTime()}).slice(0,10).map(k=>{var M;return l.jsxs("div",{className:`order-item ${k["Order ID"]===r.orderId?"current-order":""}`,children:[l.jsxs("div",{className:"order-item-header",children:[l.jsx("span",{className:"order-id",children:k["Order ID"]}),l.jsx("span",{className:`order-status status-${(M=k.Status)==null?void 0:M.toLowerCase().replace(/\s+/g,"-")}`,children:k.Status||"N/A"})]}),l.jsxs("div",{className:"order-item-details",children:[k.Priority&&l.jsx("span",{className:`order-priority priority-${k.Priority.toLowerCase()}`,children:k.Priority}),k.Colour&&l.jsxs("span",{className:"order-colour",children:["Colour: ",k.Colour]}),k["Creation Date"]&&l.jsxs("span",{className:"order-date",children:["Created: ",N1(k["Creation Date"])]}),k.Responsable&&l.jsxs("span",{className:"order-responsable",children:["Responsable: ",k.Responsable]})]})]},k["Order ID"])}),A.length>10&&l.jsxs("div",{className:"orders-footer",children:["Showing 10 of ",A.length," orders"]})]}):l.jsx("div",{className:"orders-empty",children:l.jsx("p",{children:"No orders found for this project"})})]})]}):l.jsxs("div",{className:"project-info-placeholder",children:[l.jsx("span",{className:"placeholder-icon",children:""}),l.jsx("p",{children:"Select a project to view its information"})]})})]}),pe.errors.length>0&&l.jsxs("div",{className:"step-validation-errors",children:[l.jsx("p",{className:"validation-title",children:"Please correct the following errors:"}),l.jsx("ul",{children:pe.errors.map((k,M)=>l.jsx("li",{children:k},M))})]})]})}var io={exports:{}};var E1=io.exports,mp;function T1(){return mp||(mp=1,(function(r,t){((a,n)=>{r.exports=n()})(E1,function a(){var n=typeof self!="undefined"?self:typeof window!="undefined"?window:n!==void 0?n:{},o,u=!n.document&&!!n.postMessage,h=n.IS_PAPA_WORKER||!1,g={},m=0,p={};function y(O){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(D){var E=he(D);E.chunkSize=parseInt(E.chunkSize),D.step||D.chunk||(E.chunkSize=null),this._handle=new T(E),(this._handle.streamer=this)._config=E}.call(this,O),this.parseChunk=function(D,E){var Y=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<Y){let ue=this._config.newline;ue||(W=this._config.quoteChar||'"',ue=this._handle.guessLineEndings(D,W)),D=[...D.split(ue).slice(Y)].join(ue)}this.isFirstChunk&&le(this._config.beforeFirstChunk)&&(W=this._config.beforeFirstChunk(D))!==void 0&&(D=W),this.isFirstChunk=!1,this._halted=!1;var Y=this._partialLine+D,W=(this._partialLine="",this._handle.parse(Y,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(D=W.meta.cursor,Y=(this._finished||(this._partialLine=Y.substring(D-this._baseIndex),this._baseIndex=D),W&&W.data&&(this._rowCount+=W.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),h)n.postMessage({results:W,workerId:p.WORKER_ID,finished:Y});else if(le(this._config.chunk)&&!E){if(this._config.chunk(W,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=W=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(W.data),this._completeResults.errors=this._completeResults.errors.concat(W.errors),this._completeResults.meta=W.meta),this._completed||!Y||!le(this._config.complete)||W&&W.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),Y||W&&W.meta.paused||this._nextChunk(),W}this._halted=!0},this._sendError=function(D){le(this._config.error)?this._config.error(D):h&&this._config.error&&n.postMessage({workerId:p.WORKER_ID,error:D,finished:!1})}}function x(O){var D;(O=O||{}).chunkSize||(O.chunkSize=p.RemoteChunkSize),y.call(this,O),this._nextChunk=u?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(E){this._input=E,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(D=new XMLHttpRequest,this._config.withCredentials&&(D.withCredentials=this._config.withCredentials),u||(D.onload=X(this._chunkLoaded,this),D.onerror=X(this._chunkError,this)),D.open(this._config.downloadRequestBody?"POST":"GET",this._input,!u),this._config.downloadRequestHeaders){var E,Y=this._config.downloadRequestHeaders;for(E in Y)D.setRequestHeader(E,Y[E])}var W;this._config.chunkSize&&(W=this._start+this._config.chunkSize-1,D.setRequestHeader("Range","bytes="+this._start+"-"+W));try{D.send(this._config.downloadRequestBody)}catch(ue){this._chunkError(ue.message)}u&&D.status===0&&this._chunkError()}},this._chunkLoaded=function(){D.readyState===4&&(D.status<200||400<=D.status?this._chunkError():(this._start+=this._config.chunkSize||D.responseText.length,this._finished=!this._config.chunkSize||this._start>=(E=>(E=E.getResponseHeader("Content-Range"))!==null?parseInt(E.substring(E.lastIndexOf("/")+1)):-1)(D),this.parseChunk(D.responseText)))},this._chunkError=function(E){E=D.statusText||E,this._sendError(new Error(E))}}function v(O){(O=O||{}).chunkSize||(O.chunkSize=p.LocalChunkSize),y.call(this,O);var D,E,Y=typeof FileReader!="undefined";this.stream=function(W){this._input=W,E=W.slice||W.webkitSlice||W.mozSlice,Y?((D=new FileReader).onload=X(this._chunkLoaded,this),D.onerror=X(this._chunkError,this)):D=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var W=this._input,ue=(this._config.chunkSize&&(ue=Math.min(this._start+this._config.chunkSize,this._input.size),W=E.call(W,this._start,ue)),D.readAsText(W,this._config.encoding));Y||this._chunkLoaded({target:{result:ue}})},this._chunkLoaded=function(W){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(W.target.result)},this._chunkError=function(){this._sendError(D.error)}}function S(O){var D;y.call(this,O=O||{}),this.stream=function(E){return D=E,this._nextChunk()},this._nextChunk=function(){var E,Y;if(!this._finished)return E=this._config.chunkSize,D=E?(Y=D.substring(0,E),D.substring(E)):(Y=D,""),this._finished=!D,this.parseChunk(Y)}}function C(O){y.call(this,O=O||{});var D=[],E=!0,Y=!1;this.pause=function(){y.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){y.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(W){this._input=W,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){Y&&D.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),D.length?this.parseChunk(D.shift()):E=!0},this._streamData=X(function(W){try{D.push(typeof W=="string"?W:W.toString(this._config.encoding)),E&&(E=!1,this._checkIsFinished(),this.parseChunk(D.shift()))}catch(ue){this._streamError(ue)}},this),this._streamError=X(function(W){this._streamCleanUp(),this._sendError(W)},this),this._streamEnd=X(function(){this._streamCleanUp(),Y=!0,this._streamData("")},this),this._streamCleanUp=X(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function T(O){var D,E,Y,W,ue=Math.pow(2,53),pe=-ue,we=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,k=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,M=this,F=0,J=0,w=!1,_=!1,$=[],z={data:[],errors:[],meta:{}};function ae(oe){return O.skipEmptyLines==="greedy"?oe.join("").trim()==="":oe.length===1&&oe[0].length===0}function ie(){if(z&&Y&&(de("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+p.DefaultDelimiter+"'"),Y=!1),O.skipEmptyLines&&(z.data=z.data.filter(function(me){return!ae(me)})),re()){let me=function(_e,Re){le(O.transformHeader)&&(_e=O.transformHeader(_e,Re)),$.push(_e)};if(z)if(Array.isArray(z.data[0])){for(var oe=0;re()&&oe<z.data.length;oe++)z.data[oe].forEach(me);z.data.splice(0,1)}else z.data.forEach(me)}function fe(me,_e){for(var Re=O.header?{}:[],ve=0;ve<me.length;ve++){var Ae=ve,Ne=me[ve],Ne=((ze,L)=>(Z=>(O.dynamicTypingFunction&&O.dynamicTyping[Z]===void 0&&(O.dynamicTyping[Z]=O.dynamicTypingFunction(Z)),(O.dynamicTyping[Z]||O.dynamicTyping)===!0))(ze)?L==="true"||L==="TRUE"||L!=="false"&&L!=="FALSE"&&((Z=>{if(we.test(Z)&&(Z=parseFloat(Z),pe<Z&&Z<ue))return 1})(L)?parseFloat(L):k.test(L)?new Date(L):L===""?null:L):L)(Ae=O.header?ve>=$.length?"__parsed_extra":$[ve]:Ae,Ne=O.transform?O.transform(Ne,Ae):Ne);Ae==="__parsed_extra"?(Re[Ae]=Re[Ae]||[],Re[Ae].push(Ne)):Re[Ae]=Ne}return O.header&&(ve>$.length?de("FieldMismatch","TooManyFields","Too many fields: expected "+$.length+" fields but parsed "+ve,J+_e):ve<$.length&&de("FieldMismatch","TooFewFields","Too few fields: expected "+$.length+" fields but parsed "+ve,J+_e)),Re}var be;z&&(O.header||O.dynamicTyping||O.transform)&&(be=1,!z.data.length||Array.isArray(z.data[0])?(z.data=z.data.map(fe),be=z.data.length):z.data=fe(z.data,0),O.header&&z.meta&&(z.meta.fields=$),J+=be)}function re(){return O.header&&$.length===0}function de(oe,fe,be,me){oe={type:oe,code:fe,message:be},me!==void 0&&(oe.row=me),z.errors.push(oe)}le(O.step)&&(W=O.step,O.step=function(oe){z=oe,re()?ie():(ie(),z.data.length!==0&&(F+=oe.data.length,O.preview&&F>O.preview?E.abort():(z.data=z.data[0],W(z,M))))}),this.parse=function(oe,fe,be){var me=O.quoteChar||'"',me=(O.newline||(O.newline=this.guessLineEndings(oe,me)),Y=!1,O.delimiter?le(O.delimiter)&&(O.delimiter=O.delimiter(oe),z.meta.delimiter=O.delimiter):((me=((_e,Re,ve,Ae,Ne)=>{var ze,L,Z,ce;Ne=Ne||[",","	","|",";",p.RECORD_SEP,p.UNIT_SEP];for(var ye=0;ye<Ne.length;ye++){for(var Ue,Ie=Ne[ye],Je=0,Dt=0,Ye=0,Ge=(Z=void 0,new I({comments:Ae,delimiter:Ie,newline:Re,preview:10}).parse(_e)),xt=0;xt<Ge.data.length;xt++)ve&&ae(Ge.data[xt])?Ye++:(Ue=Ge.data[xt].length,Dt+=Ue,Z===void 0?Z=Ue:0<Ue&&(Je+=Math.abs(Ue-Z),Z=Ue));0<Ge.data.length&&(Dt/=Ge.data.length-Ye),(L===void 0||Je<=L)&&(ce===void 0||ce<Dt)&&1.99<Dt&&(L=Je,ze=Ie,ce=Dt)}return{successful:!!(O.delimiter=ze),bestDelimiter:ze}})(oe,O.newline,O.skipEmptyLines,O.comments,O.delimitersToGuess)).successful?O.delimiter=me.bestDelimiter:(Y=!0,O.delimiter=p.DefaultDelimiter),z.meta.delimiter=O.delimiter),he(O));return O.preview&&O.header&&me.preview++,D=oe,E=new I(me),z=E.parse(D,fe,be),ie(),w?{meta:{paused:!0}}:z||{meta:{paused:!1}}},this.paused=function(){return w},this.pause=function(){w=!0,E.abort(),D=le(O.chunk)?"":D.substring(E.getCharIndex())},this.resume=function(){M.streamer._halted?(w=!1,M.streamer.parseChunk(D,!0)):setTimeout(M.resume,3)},this.aborted=function(){return _},this.abort=function(){_=!0,E.abort(),z.meta.aborted=!0,le(O.complete)&&O.complete(z),D=""},this.guessLineEndings=function(_e,me){_e=_e.substring(0,1048576);var me=new RegExp(A(me)+"([^]*?)"+A(me),"gm"),be=(_e=_e.replace(me,"")).split("\r"),me=_e.split(`
`),_e=1<me.length&&me[0].length<be[0].length;if(be.length===1||_e)return`
`;for(var Re=0,ve=0;ve<be.length;ve++)be[ve][0]===`
`&&Re++;return Re>=be.length/2?`\r
`:"\r"}}function A(O){return O.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function I(O){var D=(O=O||{}).delimiter,E=O.newline,Y=O.comments,W=O.step,ue=O.preview,pe=O.fastMode,we=null,k=!1,M=O.quoteChar==null?'"':O.quoteChar,F=M;if(O.escapeChar!==void 0&&(F=O.escapeChar),(typeof D!="string"||-1<p.BAD_DELIMITERS.indexOf(D))&&(D=","),Y===D)throw new Error("Comment character same as delimiter");Y===!0?Y="#":(typeof Y!="string"||-1<p.BAD_DELIMITERS.indexOf(Y))&&(Y=!1),E!==`
`&&E!=="\r"&&E!==`\r
`&&(E=`
`);var J=0,w=!1;this.parse=function(_,$,z){if(typeof _!="string")throw new Error("Input must be a string");var ae=_.length,ie=D.length,re=E.length,de=Y.length,oe=le(W),fe=[],be=[],me=[],_e=J=0;if(!_)return Je();if(pe||pe!==!1&&_.indexOf(M)===-1){for(var Re=_.split(E),ve=0;ve<Re.length;ve++){if(me=Re[ve],J+=me.length,ve!==Re.length-1)J+=E.length;else if(z)return Je();if(!Y||me.substring(0,de)!==Y){if(oe){if(fe=[],ce(me.split(D)),Dt(),w)return Je()}else ce(me.split(D));if(ue&&ue<=ve)return fe=fe.slice(0,ue),Je(!0)}}return Je()}for(var Ae=_.indexOf(D,J),Ne=_.indexOf(E,J),ze=new RegExp(A(F)+A(M),"g"),L=_.indexOf(M,J);;)if(_[J]===M)for(L=J,J++;;){if((L=_.indexOf(M,L+1))===-1)return z||be.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:fe.length,index:J}),Ue();if(L===ae-1)return Ue(_.substring(J,L).replace(ze,M));if(M===F&&_[L+1]===F)L++;else if(M===F||L===0||_[L-1]!==F){Ae!==-1&&Ae<L+1&&(Ae=_.indexOf(D,L+1));var Z=ye((Ne=Ne!==-1&&Ne<L+1?_.indexOf(E,L+1):Ne)===-1?Ae:Math.min(Ae,Ne));if(_.substr(L+1+Z,ie)===D){me.push(_.substring(J,L).replace(ze,M)),_[J=L+1+Z+ie]!==M&&(L=_.indexOf(M,J)),Ae=_.indexOf(D,J),Ne=_.indexOf(E,J);break}if(Z=ye(Ne),_.substring(L+1+Z,L+1+Z+re)===E){if(me.push(_.substring(J,L).replace(ze,M)),Ie(L+1+Z+re),Ae=_.indexOf(D,J),L=_.indexOf(M,J),oe&&(Dt(),w))return Je();if(ue&&fe.length>=ue)return Je(!0);break}be.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:fe.length,index:J}),L++}}else if(Y&&me.length===0&&_.substring(J,J+de)===Y){if(Ne===-1)return Je();J=Ne+re,Ne=_.indexOf(E,J),Ae=_.indexOf(D,J)}else if(Ae!==-1&&(Ae<Ne||Ne===-1))me.push(_.substring(J,Ae)),J=Ae+ie,Ae=_.indexOf(D,J);else{if(Ne===-1)break;if(me.push(_.substring(J,Ne)),Ie(Ne+re),oe&&(Dt(),w))return Je();if(ue&&fe.length>=ue)return Je(!0)}return Ue();function ce(Ye){fe.push(Ye),_e=J}function ye(Ye){var Ge=0;return Ge=Ye!==-1&&(Ye=_.substring(L+1,Ye))&&Ye.trim()===""?Ye.length:Ge}function Ue(Ye){return z||(Ye===void 0&&(Ye=_.substring(J)),me.push(Ye),J=ae,ce(me),oe&&Dt()),Je()}function Ie(Ye){J=Ye,ce(me),me=[],Ne=_.indexOf(E,J)}function Je(Ye){if(O.header&&!$&&fe.length&&!k){var Ge=fe[0],xt=Object.create(null),wt=new Set(Ge);let As=!1;for(let ca=0;ca<Ge.length;ca++){let Ht=Ge[ca];if(xt[Ht=le(O.transformHeader)?O.transformHeader(Ht,ca):Ht]){let ua,ks=xt[Ht];for(;ua=Ht+"_"+ks,ks++,wt.has(ua););wt.add(ua),Ge[ca]=ua,xt[Ht]++,As=!0,(we=we===null?{}:we)[ua]=Ht}else xt[Ht]=1,Ge[ca]=Ht;wt.add(Ht)}As&&console.warn("Duplicate headers found and renamed."),k=!0}return{data:fe,errors:be,meta:{delimiter:D,linebreak:E,aborted:w,truncated:!!Ye,cursor:_e+($||0),renamedHeaders:we}}}function Dt(){W(Je()),fe=[],be=[]}},this.abort=function(){w=!0},this.getCharIndex=function(){return J}}function G(O){var D=O.data,E=g[D.workerId],Y=!1;if(D.error)E.userError(D.error,D.file);else if(D.results&&D.results.data){var W={abort:function(){Y=!0,P(D.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:te,resume:te};if(le(E.userStep)){for(var ue=0;ue<D.results.data.length&&(E.userStep({data:D.results.data[ue],errors:D.results.errors,meta:D.results.meta},W),!Y);ue++);delete D.results}else le(E.userChunk)&&(E.userChunk(D.results,W,D.file),delete D.results)}D.finished&&!Y&&P(D.workerId,D.results)}function P(O,D){var E=g[O];le(E.userComplete)&&E.userComplete(D),E.terminate(),delete g[O]}function te(){throw new Error("Not implemented.")}function he(O){if(typeof O!="object"||O===null)return O;var D,E=Array.isArray(O)?[]:{};for(D in O)E[D]=he(O[D]);return E}function X(O,D){return function(){O.apply(D,arguments)}}function le(O){return typeof O=="function"}return p.parse=function(O,D){var E=(D=D||{}).dynamicTyping||!1;if(le(E)&&(D.dynamicTypingFunction=E,E={}),D.dynamicTyping=E,D.transform=!!le(D.transform)&&D.transform,!D.worker||!p.WORKERS_SUPPORTED)return E=null,p.NODE_STREAM_INPUT,typeof O=="string"?(O=(Y=>Y.charCodeAt(0)!==65279?Y:Y.slice(1))(O),E=new(D.download?x:S)(D)):O.readable===!0&&le(O.read)&&le(O.on)?E=new C(D):(n.File&&O instanceof File||O instanceof Object)&&(E=new v(D)),E.stream(O);(E=(()=>{var Y;return!!p.WORKERS_SUPPORTED&&(Y=(()=>{var W=n.URL||n.webkitURL||null,ue=a.toString();return p.BLOB_URL||(p.BLOB_URL=W.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",ue,")();"],{type:"text/javascript"})))})(),(Y=new n.Worker(Y)).onmessage=G,Y.id=m++,g[Y.id]=Y)})()).userStep=D.step,E.userChunk=D.chunk,E.userComplete=D.complete,E.userError=D.error,D.step=le(D.step),D.chunk=le(D.chunk),D.complete=le(D.complete),D.error=le(D.error),delete D.worker,E.postMessage({input:O,config:D,workerId:E.id})},p.unparse=function(O,D){var E=!1,Y=!0,W=",",ue=`\r
`,pe='"',we=pe+pe,k=!1,M=null,F=!1,J=((()=>{if(typeof D=="object"){if(typeof D.delimiter!="string"||p.BAD_DELIMITERS.filter(function($){return D.delimiter.indexOf($)!==-1}).length||(W=D.delimiter),typeof D.quotes!="boolean"&&typeof D.quotes!="function"&&!Array.isArray(D.quotes)||(E=D.quotes),typeof D.skipEmptyLines!="boolean"&&typeof D.skipEmptyLines!="string"||(k=D.skipEmptyLines),typeof D.newline=="string"&&(ue=D.newline),typeof D.quoteChar=="string"&&(pe=D.quoteChar),typeof D.header=="boolean"&&(Y=D.header),Array.isArray(D.columns)){if(D.columns.length===0)throw new Error("Option columns is empty");M=D.columns}D.escapeChar!==void 0&&(we=D.escapeChar+pe),D.escapeFormulae instanceof RegExp?F=D.escapeFormulae:typeof D.escapeFormulae=="boolean"&&D.escapeFormulae&&(F=/^[=+\-@\t\r].*$/)}})(),new RegExp(A(pe),"g"));if(typeof O=="string"&&(O=JSON.parse(O)),Array.isArray(O)){if(!O.length||Array.isArray(O[0]))return w(null,O,k);if(typeof O[0]=="object")return w(M||Object.keys(O[0]),O,k)}else if(typeof O=="object")return typeof O.data=="string"&&(O.data=JSON.parse(O.data)),Array.isArray(O.data)&&(O.fields||(O.fields=O.meta&&O.meta.fields||M),O.fields||(O.fields=Array.isArray(O.data[0])?O.fields:typeof O.data[0]=="object"?Object.keys(O.data[0]):[]),Array.isArray(O.data[0])||typeof O.data[0]=="object"||(O.data=[O.data])),w(O.fields||[],O.data||[],k);throw new Error("Unable to serialize unrecognized input");function w($,z,ae){var ie="",re=(typeof $=="string"&&($=JSON.parse($)),typeof z=="string"&&(z=JSON.parse(z)),Array.isArray($)&&0<$.length),de=!Array.isArray(z[0]);if(re&&Y){for(var oe=0;oe<$.length;oe++)0<oe&&(ie+=W),ie+=_($[oe],oe);0<z.length&&(ie+=ue)}for(var fe=0;fe<z.length;fe++){var be=(re?$:z[fe]).length,me=!1,_e=re?Object.keys(z[fe]).length===0:z[fe].length===0;if(ae&&!re&&(me=ae==="greedy"?z[fe].join("").trim()==="":z[fe].length===1&&z[fe][0].length===0),ae==="greedy"&&re){for(var Re=[],ve=0;ve<be;ve++){var Ae=de?$[ve]:ve;Re.push(z[fe][Ae])}me=Re.join("").trim()===""}if(!me){for(var Ne=0;Ne<be;Ne++){0<Ne&&!_e&&(ie+=W);var ze=re&&de?$[Ne]:Ne;ie+=_(z[fe][ze],Ne)}fe<z.length-1&&(!ae||0<be&&!_e)&&(ie+=ue)}}return ie}function _($,z){var ae,ie;return $==null?"":$.constructor===Date?JSON.stringify($).slice(1,25):(ie=!1,F&&typeof $=="string"&&F.test($)&&($="'"+$,ie=!0),ae=$.toString().replace(J,we),(ie=ie||E===!0||typeof E=="function"&&E($,z)||Array.isArray(E)&&E[z]||((re,de)=>{for(var oe=0;oe<de.length;oe++)if(-1<re.indexOf(de[oe]))return!0;return!1})(ae,p.BAD_DELIMITERS)||-1<ae.indexOf(W)||ae.charAt(0)===" "||ae.charAt(ae.length-1)===" ")?pe+ae+pe:ae)}},p.RECORD_SEP="",p.UNIT_SEP="",p.BYTE_ORDER_MARK="\uFEFF",p.BAD_DELIMITERS=["\r",`
`,'"',p.BYTE_ORDER_MARK],p.WORKERS_SUPPORTED=!u&&!!n.Worker,p.NODE_STREAM_INPUT=1,p.LocalChunkSize=10485760,p.RemoteChunkSize=5242880,p.DefaultDelimiter=",",p.Parser=I,p.ParserHandle=T,p.NetworkStreamer=x,p.FileStreamer=v,p.StringStreamer=S,p.ReadableStreamStreamer=C,n.jQuery&&((o=n.jQuery).fn.parse=function(O){var D=O.config||{},E=[];return this.each(function(ue){if(!(o(this).prop("tagName").toUpperCase()==="INPUT"&&o(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var pe=0;pe<this.files.length;pe++)E.push({file:this.files[pe],inputElem:this,instanceConfig:o.extend({},D)})}),Y(),this;function Y(){if(E.length===0)le(O.complete)&&O.complete();else{var ue,pe,we,k,M=E[0];if(le(O.before)){var F=O.before(M.file,M.inputElem);if(typeof F=="object"){if(F.action==="abort")return ue="AbortError",pe=M.file,we=M.inputElem,k=F.reason,void(le(O.error)&&O.error({name:ue},pe,we,k));if(F.action==="skip")return void W();typeof F.config=="object"&&(M.instanceConfig=o.extend(M.instanceConfig,F.config))}else if(F==="skip")return void W()}var J=M.instanceConfig.complete;M.instanceConfig.complete=function(w){le(J)&&J(w,M.file,M.inputElem),W()},p.parse(M.file,M.instanceConfig)}}function W(){E.splice(0,1),Y()}}),h&&(n.onmessage=function(O){O=O.data,p.WORKER_ID===void 0&&O&&(p.WORKER_ID=O.workerId),typeof O.input=="string"?n.postMessage({workerId:p.WORKER_ID,results:p.parse(O.input,O.config),finished:!0}):(n.File&&O.input instanceof File||O.input instanceof Object)&&(O=p.parse(O.input,O.config))&&n.postMessage({workerId:p.WORKER_ID,results:O,finished:!0})}),(x.prototype=Object.create(y.prototype)).constructor=x,(v.prototype=Object.create(y.prototype)).constructor=v,(S.prototype=Object.create(S.prototype)).constructor=S,(C.prototype=Object.create(y.prototype)).constructor=C,p})})(io)),io.exports}var D1=T1();const O1=bp(D1);function A1(){const{formData:r,updateFormData:t,validation:a}=$a(),[n,o]=U.useState(!1),[u,h]=U.useState(null),[g,m]=U.useState(!1),p=U.useRef(null),y=U.useRef(null),x=E=>{if(!E.name.toLowerCase().endsWith(".csv")){h("Please select a CSV file");return}o(!0),h(null),O1.parse(E,{header:!1,skipEmptyLines:!0,complete:Y=>N(null,null,function*(){try{const W=I(Y.data),ue=W.map(F=>F.name),pe=yield Xt.checkExistingPanels(ue),we=new Set(pe.map(F=>F.Name)),k=new Map(pe.map(F=>[F.Name,{Order:F.Order,Status:F.Status}])),M=W.map(F=>{var J,w;return lt(He({},F),{existsInDatabase:we.has(F.name),existingOrder:((J=k.get(F.name))==null?void 0:J.Order)||null,existingStatus:((w=k.get(F.name))==null?void 0:w.Status)||null})});t({panels:M,csvFile:E}),h(null)}catch(W){h(W instanceof Error?W.message:"Error processing the CSV file")}finally{o(!1)}}),error:Y=>{h(`Error reading CSV: ${Y.message}`),o(!1)}})},v=E=>{var W;const Y=(W=E.target.files)==null?void 0:W[0];Y&&(x(Y),p.current&&(p.current.value=""))},S=E=>{E.preventDefault(),E.stopPropagation(),E.dataTransfer.types.includes("Files")&&!n&&(E.dataTransfer.dropEffect="copy",m(!0))},C=E=>{E.preventDefault(),E.stopPropagation(),E.dataTransfer.types.includes("Files")&&!n&&m(!0)},T=E=>{var Y;E.preventDefault(),E.stopPropagation(),(Y=y.current)!=null&&Y.contains(E.relatedTarget)||m(!1)},A=E=>{var W;if(E.preventDefault(),E.stopPropagation(),m(!1),n)return;const Y=(W=E.dataTransfer.files)==null?void 0:W[0];Y&&x(Y)},I=E=>{if(!E||E.length===0)throw new Error("CSV file is empty or invalid.");const[Y,...W]=E,ue=(Y||[]).map(J=>(J!=null?J:"").toString().trim()),pe=G(ue,["SheetName","Sheet Name","Sheet"]),we=G(ue,["NestNumber","Nest Number","Nest"]),k=P(ue);if(k.length===0)throw new Error("No part columns found. Please make sure the CSV includes PartName columns.");if(pe===-1)throw new Error("SheetName column not found. Please include SheetName or Sheet Name.");if(we===-1)throw new Error("NestNumber column not found. Please include NestNumber or Nest Number.");const M=[];for(const J of W){const w=te(J,pe),_=te(J,we);for(const $ of k){const z=te(J,$.nameIndex);if(!z)continue;const ae=z.toUpperCase();if(ae.includes("OFFCUT")||ae.includes("REMNANT")||ae.includes("SCRAP"))continue;const ie=he(te(J,$.areaIndex)),re=he(te(J,$.cutLengthIndex)),de=Math.max(1,Math.floor(he(te(J,$.qtyIndex))||1));for(let oe=0;oe<de;oe+=1)M.push({name:z.trim(),area:ie,cutDistance:re,sheetName:w.trim(),nestNumber:_.trim(),comment:""})}}if(M.length===0)throw new Error("No valid panels found in the CSV. Please check that the file contains the correct columns.");const F=M.reduce((J,w)=>(J.set(w.name,(J.get(w.name)||0)+1),J),new Map);return M.map(J=>lt(He({},J),{isDuplicate:(F.get(J.name)||0)>1}))},G=(E,Y)=>{var ue;const W=E.map(pe=>pe.toLowerCase().trim());return(ue=Y.map(pe=>W.indexOf(pe.toLowerCase().trim())).find(pe=>pe!==-1))!=null?ue:-1},P=E=>{const Y=E.map(ue=>ue.toLowerCase().replace(/\s+/g,"")),W=Y.map((ue,pe)=>ue==="partname"?pe:-1).filter(ue=>ue!==-1);return W.map((ue,pe)=>{const we=pe<W.length-1?W[pe+1]:E.length,k=Y.slice(ue+1,we),M=k.findIndex(w=>w==="partarea"),F=k.findIndex(w=>w==="cutlength"||w==="cutdistance"),J=k.findIndex(w=>w==="partqtyinnest");return{nameIndex:ue,areaIndex:M>=0?ue+1+M:-1,cutLengthIndex:F>=0?ue+1+F:-1,qtyIndex:J>=0?ue+1+J:-1}})},te=(E,Y)=>{if(Y<0||Y>=E.length)return"";const W=E[Y];return(W!=null?W:"").toString().trim()},he=E=>{if(!E)return 0;const Y=E.replace(/,/g,"").trim(),W=Number(Y);return Number.isFinite(W)?W:0},X=()=>{t({panels:[],csvFile:null}),h(null),p.current&&(p.current.value="")},le=a.step2,O=U.useMemo(()=>{const E=r.panels.reduce((Y,W)=>(Y.set(W.name,(Y.get(W.name)||0)+1),Y),new Map);return Array.from(E.entries()).filter(([,Y])=>Y>1).map(([Y])=>Y).sort()},[r.panels]),D=U.useMemo(()=>r.panels.filter(E=>E.existsInDatabase).map(E=>({name:E.name,existingOrder:E.existingOrder,existingStatus:E.existingStatus})).sort((E,Y)=>E.name.localeCompare(Y.name)),[r.panels]);return l.jsxs("div",{ref:y,className:`step-container step2-panels${g?" step2-panels--drag-over":""}`,onDragOver:S,onDragEnter:C,onDragLeave:T,onDrop:A,children:[g&&l.jsx("div",{className:"step2-drag-overlay","aria-hidden":!0,children:l.jsxs("div",{className:"step2-drag-overlay-content",children:[l.jsx("span",{className:"step2-drag-overlay-icon",children:""}),l.jsx("span",{className:"step2-drag-overlay-title",children:"Drop CSV here"}),l.jsx("span",{className:"step2-drag-overlay-hint",children:"Release to import panels"})]})}),l.jsx("h2",{className:"step-title",children:"Import Panels from CSV"}),l.jsx("p",{className:"step-description",children:"Upload the nesting CSV. We will extract panels from PartName columns and use SheetName and NestNumber from the file."}),l.jsxs("div",{className:"step2-upload",children:[l.jsxs("div",{className:"upload-area",children:[l.jsx("input",{ref:p,type:"file",accept:".csv",onChange:v,className:"file-input",id:"csv-file-input",disabled:n}),l.jsx("label",{htmlFor:"csv-file-input",className:`upload-label ${n?"processing":""} ${r.csvFile?"uploaded":""}`,children:n?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"upload-icon",children:""}),l.jsx("span",{children:"Processing CSV..."})]}):r.csvFile?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"upload-icon",children:""}),l.jsx("span",{children:r.csvFile.name}),l.jsxs("span",{className:"upload-size",children:["(",(r.csvFile.size/1024).toFixed(2)," KB)"]})]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"upload-icon",children:""}),l.jsx("span",{children:"Click to select CSV file"}),l.jsx("span",{className:"upload-hint",children:"or drag and drop"})]})})]}),r.csvFile&&l.jsx("button",{type:"button",onClick:X,className:"clear-button",disabled:n,children:"Clear"})]}),u&&l.jsx("div",{className:"step-error-message",children:l.jsx("p",{children:u})}),l.jsxs("div",{className:"step2-comment-section",children:[l.jsx("label",{htmlFor:"order-comment",className:"comment-label",children:"Order Comment (Optional)"}),l.jsx("textarea",{id:"order-comment",value:r.orderComment||"",onChange:E=>t({orderComment:E.target.value}),className:"comment-textarea",placeholder:"Add any additional comments or notes for this order...",rows:3})]}),O.length>0&&l.jsxs("div",{className:"step-warning-message step-warning-internal",children:[l.jsx("p",{className:"warning-title",children:" Duplicate panel names detected in CSV"}),l.jsx("p",{className:"warning-description",children:"Please review the CSV before creating the order."}),l.jsx("ul",{children:O.slice(0,10).map(E=>l.jsx("li",{children:E},E))}),O.length>10&&l.jsxs("p",{className:"warning-more",children:["... and ",O.length-10," more duplicates"]})]}),D.length>0&&l.jsxs("div",{className:"step-warning-message step-warning-database",children:[l.jsx("p",{className:"warning-title",children:" Panel names already exist in database"}),l.jsx("p",{className:"warning-description",children:"These panel names already exist in Supabase. Please rename them before creating the order."}),l.jsx("div",{className:"existing-panels-list",children:D.slice(0,10).map(E=>l.jsxs("div",{className:"existing-panel-item",children:[l.jsx("span",{className:"existing-panel-name",children:E.name}),l.jsxs("span",{className:"existing-panel-info",children:["Order: ",E.existingOrder||"N/A"," | Status: ",E.existingStatus||"N/A"]})]},E.name))}),D.length>10&&l.jsxs("p",{className:"warning-more",children:["... and ",D.length-10," more existing panels"]})]}),r.panels.length>0&&l.jsxs("div",{className:"step2-preview",children:[l.jsxs("div",{className:"preview-header",children:[l.jsx("h3",{children:"Preview of Processed Panels"}),l.jsxs("span",{className:"preview-count",children:[r.panels.length," panel(s)"]})]}),l.jsxs("div",{className:"preview-table-container",children:[l.jsxs("table",{className:"preview-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Name"}),l.jsx("th",{children:"Area"}),l.jsx("th",{children:"Cut Distance"}),l.jsx("th",{children:"Sheet Name"}),l.jsx("th",{children:"Nest Number"}),l.jsx("th",{children:"Comment"})]})}),l.jsx("tbody",{children:r.panels.slice(0,50).map((E,Y)=>l.jsxs("tr",{className:E.isDuplicate?"panel-duplicate-row":E.existsInDatabase?"panel-exists-row":void 0,children:[l.jsxs("td",{className:"col-name",children:[l.jsx("span",{className:E.isDuplicate?"panel-name-duplicate":E.existsInDatabase?"panel-name-exists":void 0,children:E.name}),E.isDuplicate&&l.jsx("span",{className:"panel-duplicate-badge",children:"Duplicate in CSV"}),E.existsInDatabase&&l.jsx("span",{className:"panel-exists-badge",children:"Exists in DB"})]}),l.jsx("td",{className:"col-number",children:E.area.toFixed(2)}),l.jsx("td",{className:"col-number",children:E.cutDistance.toFixed(2)}),l.jsx("td",{className:"col-text",children:E.sheetName}),l.jsx("td",{className:"col-text",children:E.nestNumber}),l.jsx("td",{className:"col-comment",children:E.comment})]},Y))})]}),r.panels.length>50&&l.jsxs("p",{className:"preview-more",children:["... and ",r.panels.length-50," more panel(s)"]})]}),l.jsxs("div",{className:"preview-summary",children:[l.jsxs("div",{className:"summary-item",children:[l.jsx("span",{className:"summary-label",children:"Total Panels:"}),l.jsx("span",{className:"summary-value",children:r.panels.length})]}),l.jsxs("div",{className:"summary-item",children:[l.jsx("span",{className:"summary-label",children:"Total Area:"}),l.jsxs("span",{className:"summary-value",children:[r.panels.reduce((E,Y)=>E+Y.area,0).toFixed(2)," ","m"]})]}),l.jsxs("div",{className:"summary-item",children:[l.jsx("span",{className:"summary-label",children:"Cut Distance Total:"}),l.jsxs("span",{className:"summary-value",children:[r.panels.reduce((E,Y)=>E+Y.cutDistance,0).toFixed(2)," ","m"]})]})]})]}),le.errors.length>0&&l.jsxs("div",{className:"step-validation-errors",children:[l.jsx("p",{className:"validation-title",children:"Please correct the following errors:"}),l.jsx("ul",{children:le.errors.map((E,Y)=>l.jsx("li",{children:E},Y))})]})]})}const k1=new Os,Be=r=>(r||"").trim().replace(/\s+/g,"").toLowerCase(),R1=r=>r.length===0?null:r.reduce((t,a)=>{const n=Number(t["Quantity in Factory"])||0;return(Number(a["Quantity in Factory"])||0)>n?a:t},r[0]);function M1(){const{formData:r,updateFormData:t,validation:a}=$a(),[n,o]=U.useState("all"),[u,h]=U.useState("all"),[g,m]=U.useState("all"),[p,y]=U.useState(null),x=U.useMemo(()=>new Set((r.ignoredSheetDimensions||[]).map(Be)),[r.ignoredSheetDimensions]),{data:v,isLoading:S}=oa({queryKey:["sheets-by-project",r.project],queryFn:()=>k1.getSheetsByProject(r.project||""),enabled:!!r.project,staleTime:0}),C=U.useMemo(()=>{const w=new Map;return r.panels.forEach(_=>{var ae,ie,re,de,oe;const $=(ae=_.sheetName)==null?void 0:ae.trim();if(!$)return;const z=(ie=_.nestNumber)==null?void 0:ie.trim();w.has($)||w.set($,new Set),z?(re=w.get($))==null||re.add(z):(oe=w.get($))==null||oe.add(`${_.name}-${((de=w.get($))==null?void 0:de.size)||0}`)}),Array.from(w.entries()).map(([_,$])=>({dimension:_,qty:$.size})).sort((_,$)=>_.dimension.localeCompare($.dimension))},[r.panels]),T=U.useMemo(()=>C.filter(w=>!x.has(Be(w.dimension))),[C,x]),A=U.useMemo(()=>new Set(T.map(w=>Be(w.dimension))),[T]),I=U.useMemo(()=>{const w=new Map;return v&&v.forEach(_=>{if(!_.Dimension)return;const $=Be(_.Dimension);w.has($)||w.set($,[]),w.get($).push(_)}),w},[v]),G=U.useMemo(()=>T.map(w=>{const _=I.get(Be(w.dimension))||[];if(_.length===0)return null;const $=R1(_);return $?{dimension:w.dimension,sheet:$,qty:w.qty,isSuggested:_.length>1}:null}).filter(Boolean),[T,I]);U.useEffect(()=>{if(T.length===0)return;const w=[],_=new Set(T.map(re=>Be(re.dimension))),$=new Map(G.map(re=>[re.dimension,re]));T.forEach(re=>{const de=Be(re.dimension),oe=r.selectedSheets.find(be=>Be(be.dimension)===de);if(oe){w.push(lt(He({},oe),{qty:oe.qty>0?oe.qty:re.qty}));return}const fe=$.get(re.dimension);if(fe){const be=fe.sheet;w.push({sheetId:be["Sheet ID"],dimension:be.Dimension||re.dimension,colour:be.Colour||"",qty:fe.qty,sheetData:be})}});const z=r.selectedSheets.filter(re=>!_.has(Be(re.dimension)));w.push(...z);const ae=r.selectedSheets.map(re=>({sheetId:re.sheetId,dimension:re.dimension,colour:re.colour,qty:re.qty})),ie=w.map(re=>({sheetId:re.sheetId,dimension:re.dimension,colour:re.colour,qty:re.qty}));JSON.stringify(ae)!==JSON.stringify(ie)&&t({selectedSheets:w})},[T,I,G,r.selectedSheets,t]),U.useEffect(()=>{var $;if(!(($=r.ignoredSheetDimensions)!=null&&$.length))return;const w=new Set(C.map(z=>Be(z.dimension))),_=r.ignoredSheetDimensions.filter(z=>w.has(Be(z)));_.length!==r.ignoredSheetDimensions.length&&t({ignoredSheetDimensions:_})},[C,r.ignoredSheetDimensions,t]);const P=U.useMemo(()=>{if(!v)return[];const w=new Set(v.map(_=>_.Dimension).filter(Boolean).map(_=>Be(_)));return Array.from(w).sort()},[v]),te=U.useMemo(()=>{if(!v)return[];const w=new Set(v.map(_=>_.Colour).filter(Boolean));return Array.from(w).sort()},[v]),he=U.useMemo(()=>v?v.filter(w=>{if(n!=="all"){const _=w["Off Cut"]===!0||w["Off Cut"]==="true"||w["Off Cut"]==="Yes";if(n==="yes"&&!_||n==="no"&&_)return!1}return!(u!=="all"&&Be(w.Dimension)!==Be(u)||g!=="all"&&w.Colour!==g)}):[],[v,n,u,g]),X=U.useMemo(()=>{if(!he.length)return[];const w=[],_=new Set;T.forEach(z=>{const ae=Be(z.dimension),ie=he.filter(de=>Be(de.Dimension)===ae);if(ie.length===0)return;w.push({type:"header",key:`detected-${z.dimension}`,label:`Detected - ${z.dimension}`});const re=ie.reduce((de,oe)=>{const fe=oe.Colour||"No Colour";return de[fe]||(de[fe]=[]),de[fe].push(oe),de},{});Object.keys(re).sort().forEach(de=>{w.push({type:"subheader",key:`detected-${z.dimension}-${de}`,label:de}),re[de].sort((fe,be)=>be["Quantity in Factory"]-fe["Quantity in Factory"]).forEach(fe=>{w.push({type:"sheet",key:fe["Sheet ID"],sheet:fe}),_.add(fe["Sheet ID"])})})});const $=he.filter(z=>!_.has(z["Sheet ID"]));if($.length>0){w.push({type:"header",key:"other-sheets",label:"Other sheets"});const z=$.reduce((ie,re)=>{const oe=re["Off Cut"]===!0||re["Off Cut"]==="true"||re["Off Cut"]==="Yes"?"offcut":"regular";return ie[oe]||(ie[oe]=[]),ie[oe].push(re),ie},{}),ae=(ie,re)=>{var oe;const de=((oe=z[ie])==null?void 0:oe.reduce((fe,be)=>{const me=be.Colour||"No Colour";return fe[me]||(fe[me]=[]),fe[me].push(be),fe},{}))||{};Object.keys(de).sort().forEach(fe=>{w.push({type:"subheader",key:`${re}-${fe}`,label:`${re} - ${fe}`}),de[fe].sort((me,_e)=>_e["Quantity in Factory"]-me["Quantity in Factory"]).forEach(me=>{w.push({type:"sheet",key:me["Sheet ID"],sheet:me})})})};ae("regular","Regular"),ae("offcut","Off Cut")}return w},[T,he]),le=w=>{const _=Be(w);t({selectedSheets:r.selectedSheets.filter($=>Be($.dimension)!==_),ignoredSheetDimensions:Array.from(new Set([...r.ignoredSheetDimensions||[],w]))}),Be(p||"")===_&&(y(null),h("all"))},O=w=>{var z,ae;const _=r.selectedSheets.findIndex(ie=>ie.sheetId===w["Sheet ID"]);let $;if(_>=0){const ie=((z=w.Dimension)==null?void 0:z.trim())||"";if(ie&&A.has(Be(ie))){const re=T.find(de=>Be(de.dimension)===Be(ie));le((ae=re==null?void 0:re.dimension)!=null?ae:ie);return}$=r.selectedSheets.filter(re=>re.sheetId!==w["Sheet ID"])}else{const ie=Be(w.Dimension||""),re=C.find(de=>Be(de.dimension)===ie);$=r.selectedSheets.filter(de=>Be(de.dimension)!==ie),$.push({sheetId:w["Sheet ID"],dimension:w.Dimension||"",colour:w.Colour||"",qty:(re==null?void 0:re.qty)||1,sheetData:w})}t({selectedSheets:$})},D=(w,_)=>{const $=r.selectedSheets.map(z=>z.sheetId===w?lt(He({},z),{qty:Math.max(1,_)}):z);t({selectedSheets:$})},E=w=>r.selectedSheets.some(_=>_.sheetId===w),Y=w=>{const _=r.selectedSheets.find($=>$.sheetId===w);return(_==null?void 0:_.qty)||0},W=(w,_)=>Y(w)>_,ue=T.filter(w=>!r.selectedSheets.some(_=>Be(_.dimension)===Be(w.dimension))),pe=U.useMemo(()=>new Set(G.filter(w=>w.isSuggested).map(w=>w.sheet["Sheet ID"])),[G]),we=U.useMemo(()=>T.map(w=>{const _=Be(w.dimension),$=r.selectedSheets.find(ae=>Be(ae.dimension)===_),z=G.find(ae=>Be(ae.dimension)===_);return{dimension:w.dimension,qty:w.qty,colour:($==null?void 0:$.colour)||"",isSelected:!!$,isSuggested:!!$&&!!(z!=null&&z.isSuggested)&&($==null?void 0:$.sheetId)===(z==null?void 0:z.sheet["Sheet ID"])}}),[T,r.selectedSheets,G]),k=U.useMemo(()=>we.filter(w=>!w.isSelected),[we]),M=w=>{o("all"),m("all"),h(w),y(w)},F=w=>{le(w)},J=a.step3;return r.project?r.panels.length===0?l.jsx("div",{className:"step-container step-error",children:l.jsx("p",{children:"Please import panels in Step 2 first"})}):S?l.jsxs("div",{className:"step-container step-loading",children:[l.jsx(Ea,{}),l.jsx("p",{children:"Loading sheets..."})]}):l.jsxs("div",{className:"step-container step3-sheets",children:[l.jsx("h2",{className:"step-title",children:"Sheet Selection"}),l.jsx("p",{className:"step-description",children:"We detected the sheets from the nesting CSV. Please select the colour for each sheet size."}),k.length>0&&l.jsxs("div",{className:"detected-sheets-banner",children:[l.jsx("div",{className:"detected-banner-header",children:l.jsxs("div",{children:[l.jsx("h3",{children:"Detected Sheets"}),l.jsx("p",{children:"Quickly focus the table by selecting a chip."})]})}),l.jsx("div",{className:"detected-chips",children:k.map(w=>l.jsxs("div",{className:`detected-chip ${w.isSelected?"chip-selected":"chip-missing"} ${w.isSuggested?"chip-suggested":""}`,children:[l.jsx("button",{type:"button",className:"chip-remove","aria-label":`Remove ${w.dimension}`,onClick:()=>F(w.dimension),children:""}),l.jsxs("div",{className:"chip-top",children:[l.jsx("span",{className:"chip-dimension",children:w.dimension}),l.jsxs("span",{className:"chip-qty",children:["qty ",w.qty]})]}),l.jsxs("div",{className:"chip-colour",children:[w.colour?w.colour:"colour ?",w.isSuggested&&l.jsx("span",{className:"chip-suggested-badge",children:"Suggested"})]}),l.jsx("button",{type:"button",className:"chip-action",onClick:()=>M(w.dimension),children:w.colour?"Change colour":"Select colour"})]},w.dimension))})]}),ue.length>0&&l.jsxs("div",{className:"sheet-warning",children:[l.jsx("p",{children:"Please select a colour for:"}),l.jsx("ul",{className:"sheet-warning-list",children:ue.map(w=>l.jsxs("li",{children:[w.dimension," (qty ",w.qty,")"]},w.dimension))})]}),l.jsxs("div",{className:"step3-filters",children:[l.jsxs("div",{className:"filter-group",children:[l.jsx("label",{htmlFor:"offcut-filter",className:"filter-label",children:"Off Cut"}),l.jsxs("select",{id:"offcut-filter",value:n,onChange:w=>o(w.target.value),className:"filter-select",children:[l.jsx("option",{value:"all",children:"All"}),l.jsx("option",{value:"no",children:"No"}),l.jsx("option",{value:"yes",children:"Yes"})]})]}),l.jsxs("div",{className:"filter-group",children:[l.jsx("label",{htmlFor:"dimension-filter",className:"filter-label",children:"Dimension"}),l.jsxs("select",{id:"dimension-filter",value:u,onChange:w=>h(w.target.value),className:"filter-select",children:[l.jsx("option",{value:"all",children:"All"}),P.map(w=>l.jsx("option",{value:w,children:w},w))]})]}),l.jsxs("div",{className:"filter-group",children:[l.jsx("label",{htmlFor:"colour-filter",className:"filter-label",children:"Colour"}),l.jsxs("select",{id:"colour-filter",value:g,onChange:w=>m(w.target.value),className:"filter-select",children:[l.jsx("option",{value:"all",children:"All"}),te.map(w=>l.jsx("option",{value:w,children:w},w))]})]})]}),l.jsxs("div",{className:"step3-content-layout",children:[l.jsx("div",{className:"step3-main-content",children:he.length===0?l.jsx("div",{className:"step-empty",children:l.jsx("p",{children:"No sheets found for this project."})}):l.jsx("div",{className:"step3-table-container",children:l.jsxs("table",{className:"step3-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{className:"col-checkbox",children:"Select"}),l.jsx("th",{className:"col-order-qty",children:"Order Qty"}),l.jsx("th",{className:"col-dimension",children:"Dimension"}),l.jsx("th",{className:"col-colour",children:"Colour"}),l.jsx("th",{className:"col-qty-factory",children:"Qty Factory"}),l.jsx("th",{className:"col-qty-store",children:"Qty Store"}),l.jsx("th",{className:"col-offcut",children:"Off Cut"}),l.jsx("th",{className:"col-comment",children:"Comment"})]})}),l.jsx("tbody",{children:X.map(w=>{if(w.type==="header")return l.jsx("tr",{className:"group-header",children:l.jsx("td",{colSpan:8,className:"group-header-cell",style:{textAlign:"center"},children:l.jsx("span",{className:"group-label",children:w.label})})},w.key);if(w.type==="subheader")return l.jsx("tr",{className:"group-subheader",children:l.jsx("td",{colSpan:8,className:"group-subheader-cell",style:{textAlign:"center"},children:l.jsx("span",{className:"group-subheader-label",children:w.label})})},w.key);const _=w.sheet,$=E(_["Sheet ID"]),z=Y(_["Sheet ID"]),ae=_["Quantity in Factory"]<=0,ie=$&&W(_["Sheet ID"],_["Quantity in Factory"]),re=A.has(Be(_.Dimension||"")),de=p&&Be(_.Dimension||"")===Be(p),oe=pe.has(_["Sheet ID"]);return l.jsxs("tr",{className:`${$?"selected":""} ${ae?"low-stock":""} ${ie?"exceeds-qty":""} ${re?"dimension-match":""} ${de?"focused-dimension":""}`,children:[l.jsx("td",{className:"col-checkbox",children:l.jsx("input",{type:"checkbox",checked:$,onChange:()=>O(_),className:"sheet-checkbox"})}),l.jsx("td",{className:"col-order-qty",children:$?l.jsxs("div",{className:"qty-input-wrapper",children:[l.jsx("input",{type:"number",min:"1",value:z,onChange:fe=>D(_["Sheet ID"],parseInt(fe.target.value,10)||1),className:`qty-input ${ie?"exceeds-qty-input":""}`}),ie&&l.jsx("span",{className:"qty-warning-icon",title:`Order Qty (${z}) exceeds Factory Qty (${_["Quantity in Factory"]})`,children:""})]}):l.jsx("span",{className:"qty-placeholder",children:"-"})}),l.jsx("td",{className:"col-dimension",children:_.Dimension}),l.jsxs("td",{className:"col-colour",children:[_.Colour,oe&&l.jsx("span",{className:"suggested-badge",children:"Suggested"})]}),l.jsx("td",{className:`col-qty-factory ${ae?"zero-qty":""}`,children:_["Quantity in Factory"]}),l.jsx("td",{className:"col-qty-store",children:_["Quantity in Store"]}),l.jsx("td",{className:"col-offcut",children:_["Off Cut"]?"Yes":"No"}),l.jsx("td",{className:"col-comment",children:l.jsx("span",{className:"comment-text",title:_.Comment||void 0,children:_.Comment||"-"})})]},w.key)})})]})})}),r.selectedSheets.length>0&&l.jsxs("div",{className:"step3-summary-sidebar",children:[l.jsxs("div",{className:"summary-header",children:[l.jsx("h3",{children:"Selected Sheets"}),l.jsx("span",{className:"summary-badge",children:r.selectedSheets.length})]}),l.jsx("div",{className:"summary-items",children:r.selectedSheets.map(w=>{const _=v==null?void 0:v.find(ae=>ae["Sheet ID"]===w.sheetId),$=(_==null?void 0:_["Quantity in Factory"])||0,z=w.qty>$;return l.jsxs("div",{className:`summary-item ${z?"exceeds-qty":""}`,children:[l.jsxs("div",{className:"summary-item-info",children:[l.jsx("span",{className:"summary-item-dimension",children:w.dimension}),l.jsx("span",{className:"summary-item-colour",children:w.colour}),z&&l.jsxs("span",{className:"summary-item-warning",children:[" Order Qty (",w.qty,") exceeds Factory Qty (",$,")"]})]}),l.jsxs("div",{className:"summary-item-actions",children:[l.jsxs("div",{className:"summary-qty-wrapper",children:[l.jsx("input",{type:"number",min:"1",value:w.qty,onChange:ae=>D(w.sheetId,parseInt(ae.target.value,10)||1),className:`summary-qty-input ${z?"exceeds-qty-input":""}`}),z&&l.jsx("span",{className:"summary-qty-warning-icon",title:`Order Qty (${w.qty}) exceeds Factory Qty (${$})`,children:""})]}),l.jsx("button",{onClick:()=>{const ae=T.find(ie=>Be(ie.dimension)===Be(w.dimension));ae?le(ae.dimension):t({selectedSheets:r.selectedSheets.filter(ie=>ie.sheetId!==w.sheetId)})},className:"summary-remove-btn",title:"Remove",children:""})]})]},w.sheetId)})}),l.jsx("div",{className:"summary-footer",children:l.jsxs("div",{className:"summary-colour",children:[l.jsx("span",{className:"summary-colour-label",children:"Order Colour:"}),l.jsx("span",{className:"summary-colour-value",children:r.colour||"No defined"})]})})]})]}),J.errors.length>0&&l.jsxs("div",{className:"step-validation-errors",children:[l.jsx("p",{className:"validation-title",children:"Please correct the following errors:"}),l.jsx("ul",{children:J.errors.map((w,_)=>l.jsx("li",{children:w},_))})]})]}):l.jsx("div",{className:"step-container step-error",children:l.jsx("p",{children:"Please select a project in Step 1"})})}const Zu=new Os;function gp(r){if(!r)return new Date(0);const t=r.split(" ");if(t.length!==2)return new Date(0);const[a,n]=t,[o,u,h]=a.split("/").map(Number),[g,m,p]=n.split(":").map(Number);return new Date(h,u-1,o,g,m,p)}function pp(){return`doc-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}const U1=new Set(["Cut List","Delivery Docket"]),L1=["Cut List","Elevations"];function q1(){const{formData:r,updateFormData:t,validation:a,setLoading:n,setError:o,isLoading:u,creationResult:h}=$a(),[g,m]=U.useState(new Set),[p,y]=U.useState(new Map),[x,v]=U.useState(new Set),[S,C]=U.useState(new Set),[T,A]=U.useState(""),[I,G]=U.useState(new Map),[P,te]=U.useState(new Map),[he,X]=U.useState(!1),le=U.useRef(null),O=U.useRef(null),D=U.useRef(null),{data:E,isLoading:Y}=oa({queryKey:["documents-by-project",r.project],queryFn:()=>Zu.getDocumentsByProject(r.project||""),enabled:!!r.project,staleTime:0}),W=U.useMemo(()=>E!=null&&E.length?E.filter(L=>!U1.has((L.Category||"").trim())):E!=null?E:[],[E]),ue=(L,Z)=>{var ye,Ue,Ie,Je;if(!Z.trim())return!0;const ce=Z.toLowerCase();return((ye=L.Name)==null?void 0:ye.toLowerCase().includes(ce))||((Ue=L.File)==null?void 0:Ue.toLowerCase().includes(ce))||((Ie=L.Comments)==null?void 0:Ie.toLowerCase().includes(ce))||((Je=L.Category)==null?void 0:Je.toLowerCase().includes(ce))},pe=U.useMemo(()=>{if(!W||W.length===0)return[];const L=T.trim()?W.filter(ce=>ue(ce,T)):W;if(L.length===0)return[];const Z=new Map;return L.forEach(ce=>{const ye=ce.Category||"Uncategorized";Z.has(ye)||Z.set(ye,[]),Z.get(ye).push(ce)}),Z.forEach(ce=>{ce.sort((ye,Ue)=>{const Ie=gp(ye["Created at"]||"");return gp(Ue["Created at"]||"").getTime()-Ie.getTime()})}),Array.from(Z.entries()).map(([ce,ye])=>({category:ce,documents:ye})).sort((ce,ye)=>ce.category==="Uncategorized"?1:ye.category==="Uncategorized"?-1:ce.category.localeCompare(ye.category))},[W,T]),we=U.useMemo(()=>{const L=new Set(L1);return E!=null&&E.length&&E.forEach(Z=>{const ce=Z.Category;ce&&ce.trim()&&L.add(ce)}),Array.from(L).sort()},[E]),k=L=>{C(Z=>{const ce=new Set(Z);return ce.has(L)?ce.delete(L):ce.add(L),ce})},M=L=>{const Z=Array.isArray(L)?L:Array.from(L);if(Z.length===0)return;const ce=Z.map(ye=>({id:pp(),file:ye,name:ye.name,comments:"",category:"",uploaded:!1,saved:!1}));t({documents:[...r.documents,...ce]})},F=L=>{const Z=L.target.files;!Z||Z.length===0||(M(Z),le.current&&(le.current.value=""))},J=L=>{L.preventDefault(),L.stopPropagation(),L.dataTransfer.types.includes("Files")&&(L.dataTransfer.dropEffect="copy",X(!0))},w=L=>{L.preventDefault(),L.stopPropagation(),L.dataTransfer.types.includes("Files")&&X(!0)},_=L=>{var Z;L.preventDefault(),L.stopPropagation(),(Z=O.current)!=null&&Z.contains(L.relatedTarget)||X(!1)},$=L=>{L.preventDefault(),L.stopPropagation(),X(!1);const Z=L.dataTransfer.files;!Z||Z.length===0||(M(Z),setTimeout(()=>{var ce;(ce=D.current)==null||ce.scrollIntoView({behavior:"smooth",block:"start"})},120))},z=L=>{t({documents:r.documents.filter(Z=>Z.id!==L)}),p.delete(L),y(new Map(p))},ae=(L,Z)=>{t({documents:r.documents.map(ce=>ce.id===L?lt(He({},ce),{name:Z}):ce)})},ie=(L,Z)=>{t({documents:r.documents.map(ce=>ce.id===L?lt(He({},ce),{comments:Z}):ce)})};U.useEffect(()=>{G(L=>{const Z=new Map(L),ce=new Set(r.documents.map(ye=>ye.id));r.documents.forEach(ye=>{Z.has(ye.id)||Z.set(ye.id,ye.category||"")});for(const[ye]of Z)ce.has(ye)||Z.delete(ye);return Z})},[r.documents]);const re=(L,Z)=>{G(ce=>{const ye=new Map(ce);return ye.set(L,Z),ye}),te(ce=>{const ye=new Map(ce);return ye.set(L,!0),ye}),t({documents:r.documents.map(ce=>ce.id===L?lt(He({},ce),{category:Z}):ce)})},de=(L,Z)=>{G(ce=>{const ye=new Map(ce);return ye.set(L,Z),ye}),te(ce=>{const ye=new Map(ce);return ye.set(L,!1),ye}),t({documents:r.documents.map(ce=>ce.id===L?lt(He({},ce),{category:Z}):ce)})},oe=L=>{const Z=I.get(L)||"";if(!Z.trim())return we;const ce=Z.toLowerCase().trim();return we.filter(ye=>ye.toLowerCase().includes(ce))},fe=L=>N(null,null,function*(){if(!(L.uploaded&&L.saved)){if(!L.category||!L.category.trim()){const Z="Category is required before uploading";p.set(L.id,Z),y(new Map(p)),o(Z);return}m(Z=>new Set(Z).add(L.id)),p.delete(L.id),y(new Map(p));try{n(!0),yield Zu.addDocument({file:L.file,Project:r.project,Name:L.name,Orders:r.orderId,Comments:L.comments||"",Category:L.category||""}),t({documents:r.documents.map(Z=>Z.id===L.id?lt(He({},Z),{uploaded:!0,saved:!0}):Z)})}catch(Z){const ce=Z instanceof Error?Z.message:"Error uploading document";p.set(L.id,ce),y(new Map(p)),o(ce)}finally{m(Z=>{const ce=new Set(Z);return ce.delete(L.id),ce}),n(!1)}}}),be=()=>N(null,null,function*(){const L=r.documents.filter(Z=>!Z.uploaded||!Z.saved);for(const Z of L)yield fe(Z)}),me=L=>{if(r.selectedExistingDocuments.some(ce=>ce.documentId===L["Document ID"]))t({selectedExistingDocuments:r.selectedExistingDocuments.filter(ce=>ce.documentId!==L["Document ID"])});else{const ce={id:pp(),documentId:L["Document ID"],name:L.Name,file:L.File,comments:L.Comments||"",category:L.Category||"",createdAt:L["Created at"]||"",linked:!1};t({selectedExistingDocuments:[...r.selectedExistingDocuments,ce]})}},_e=L=>N(null,null,function*(){if(!L.linked){v(Z=>new Set(Z).add(L.id)),p.delete(L.id),y(new Map(p));try{n(!0),yield Zu.linkDocumentToOrder(L.documentId,r.orderId),t({selectedExistingDocuments:r.selectedExistingDocuments.map(Z=>Z.id===L.id?lt(He({},Z),{linked:!0}):Z)})}catch(Z){const ce=Z instanceof Error?Z.message:"Error linking document";p.set(L.id,ce),y(new Map(p)),o(ce)}finally{v(Z=>{const ce=new Set(Z);return ce.delete(L.id),ce}),n(!1)}}}),Re=()=>N(null,null,function*(){const L=r.selectedExistingDocuments.filter(Z=>!Z.linked);for(const Z of L)yield _e(Z)}),ve=L=>r.selectedExistingDocuments.some(Z=>Z.documentId===L);U.useEffect(()=>{const L=Z=>{Z.target.closest(".category-selector-wrapper")||te(new Map)};return document.addEventListener("mousedown",L),()=>{document.removeEventListener("mousedown",L)}},[]);const Ae=a.step4,Ne=r.documents.length>0,ze=r.documents.some(L=>!L.uploaded||!L.saved);return l.jsxs("div",{ref:O,className:`step-container step4-documents${he?" step4-documents--drag-over":""}`,onDragOver:J,onDragEnter:w,onDragLeave:_,onDrop:$,children:[he&&l.jsx("div",{className:"step4-drag-overlay","aria-hidden":!0,children:l.jsxs("div",{className:"step4-drag-overlay-content",children:[l.jsx("span",{className:"step4-drag-overlay-icon",children:""}),l.jsx("span",{className:"step4-drag-overlay-title",children:"Drop files here"}),l.jsx("span",{className:"step4-drag-overlay-hint",children:"Release to add documents"})]})}),l.jsx("h2",{className:"step-title",children:"Upload Documents"}),l.jsx("p",{className:"step-description",children:"Upload or select documents related to this order. Documents will be saved to CC Flow App and registered in Documents section."}),(h==null?void 0:h.success)&&h.orderId&&l.jsxs("div",{className:"step4-order-banner",role:"status",children:["Adding documents to order: ",l.jsx("strong",{children:h.orderId})]}),r.project&&l.jsxs("div",{className:"step4-existing-documents",children:[l.jsxs("div",{className:"step4-existing-header",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"step4-section-title",children:"Existing Documents"}),l.jsx("p",{className:"step4-section-description",children:"Select existing documents from this project to link to this order."})]}),l.jsx("div",{className:"step4-search-container",children:l.jsxs("div",{className:"step4-search-input-wrapper",children:[l.jsx("span",{className:"step4-search-icon",children:""}),l.jsx("input",{type:"text",value:T,onChange:L=>A(L.target.value),className:"step4-search-input",placeholder:"Search documents..."}),T&&l.jsx("button",{type:"button",onClick:()=>A(""),className:"step4-search-clear","aria-label":"Clear search",children:""})]})})]}),Y?l.jsxs("div",{className:"step-loading",children:[l.jsx(Ea,{}),l.jsx("span",{children:"Loading existing documents..."})]}):W&&W.length>0?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"step4-existing-list",children:pe.length===0?l.jsx("div",{className:"step-empty",children:l.jsx("p",{children:T?`No documents found matching "${T}"`:"No documents found for this project."})}):pe.map(({category:L,documents:Z})=>{const ce=S.has(L);return l.jsxs("div",{className:"document-category-group",children:[l.jsx("div",{className:"document-category-header",onClick:()=>k(L),children:l.jsxs("div",{className:"document-category-header-content",children:[l.jsx("span",{className:`document-category-chevron ${ce?"expanded":""}`,children:""}),l.jsx("h4",{className:"document-category-title",children:L}),l.jsxs("span",{className:"document-category-count",children:["(",Z.length," ",Z.length===1?"document":"documents",")"]})]})}),ce&&l.jsx("div",{className:"document-category-items",children:Z.map(ye=>{const Ue=ve(ye["Document ID"]),Ie=r.selectedExistingDocuments.find(Ye=>Ye.documentId===ye["Document ID"]),Je=Ie?x.has(Ie.id):!1,Dt=Ie?p.get(Ie.id):void 0;return l.jsxs("div",{className:`existing-document-item ${Ue?"selected":""} ${Ie!=null&&Ie.linked?"linked":""} ${Dt?"error":""}`,onClick:()=>me(ye),children:[l.jsx("div",{className:"existing-document-checkbox",children:l.jsx("input",{type:"checkbox",checked:Ue,onChange:()=>me(ye),onClick:Ye=>Ye.stopPropagation()})}),l.jsxs("div",{className:"existing-document-info",children:[l.jsx("div",{className:"existing-document-name",children:ye.Name}),l.jsx("div",{className:"existing-document-file",children:ye.File}),ye.Comments&&l.jsx("div",{className:"existing-document-comments",children:ye.Comments}),ye["Created at"]&&l.jsxs("div",{className:"existing-document-date",children:["Created: ",ye["Created at"]]})]}),Ue&&Ie&&l.jsxs("div",{className:"existing-document-actions",children:[Ie.linked?l.jsxs("div",{className:"document-status",children:[l.jsx("span",{className:"status-icon",children:""}),l.jsx("span",{children:"Linked"})]}):l.jsx("button",{type:"button",onClick:Ye=>{Ye.stopPropagation(),_e(Ie)},disabled:Je||u,className:"link-document-button",children:Je?l.jsxs(l.Fragment,{children:[l.jsx(Ea,{}),"Linking..."]}):"Link to Order"}),Dt&&l.jsx("div",{className:"document-error",children:Dt})]})]},ye["Document ID"])})})]},L)})}),r.selectedExistingDocuments.length>0&&l.jsx("div",{className:"step4-existing-actions",children:l.jsx("button",{type:"button",onClick:Re,disabled:u||x.size>0||r.selectedExistingDocuments.every(L=>L.linked),className:"link-all-button",children:u||x.size>0?l.jsxs(l.Fragment,{children:[l.jsx(Ea,{}),"Linking..."]}):`Link All Selected (${r.selectedExistingDocuments.filter(L=>!L.linked).length})`})})]}):l.jsx("div",{className:"step-empty",children:l.jsx("p",{children:"No existing documents found for this project."})})]}),l.jsxs("div",{className:"step4-upload-section",children:[l.jsx("h3",{className:"step4-section-title",children:"Upload New Documents"}),l.jsxs("div",{className:"step4-upload-area",children:[l.jsx("input",{ref:le,type:"file",id:"document-upload",className:"file-input",multiple:!0,accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png",onChange:F}),l.jsxs("label",{htmlFor:"document-upload",className:"upload-label",children:[l.jsx("span",{className:"upload-icon",children:""}),l.jsxs("div",{className:"upload-text",children:[l.jsx("strong",{children:"Click to select files"}),l.jsx("span",{children:"or drag and drop"}),l.jsx("span",{className:"upload-hint",children:"PDF, DOC, DOCX, XLS, XLSX, JPG, PNG (Max 50MB per file)"})]})]})]})]}),Ne&&l.jsxs("div",{ref:D,className:"step4-documents-list",children:[l.jsxs("div",{className:"step4-documents-header",children:[l.jsxs("h3",{children:["Documents (",r.documents.length,")"]}),ze&&l.jsx("button",{type:"button",onClick:be,disabled:u||g.size>0,className:"upload-all-button",children:u||g.size>0?l.jsxs(l.Fragment,{children:[l.jsx(Ea,{}),"Uploading..."]}):"Upload All"})]}),r.documents.map(L=>{var ye;const Z=g.has(L.id),ce=p.get(L.id);return l.jsxs("div",{className:`document-item ${L.uploaded&&L.saved?"uploaded":""} ${ce?"error":""}`,children:[l.jsxs("div",{className:"document-item-header",children:[l.jsxs("div",{className:"document-item-info",children:[l.jsx("span",{className:"document-icon",children:L.uploaded&&L.saved?"":""}),l.jsxs("div",{className:"document-details",children:[l.jsx("input",{type:"text",value:L.name,onChange:Ue=>ae(L.id,Ue.target.value),className:"document-name-input",placeholder:"Document name",disabled:L.saved}),l.jsx("span",{className:"document-file-name",children:L.file.name}),L.filePath&&l.jsx("span",{className:"document-path",children:L.filePath})]})]}),l.jsx("button",{type:"button",onClick:()=>z(L.id),className:"remove-document-button",disabled:Z,children:""})]}),l.jsxs("div",{className:"document-item-body",children:[l.jsx("div",{className:"document-fields-row",children:l.jsxs("div",{className:"document-field",children:[l.jsxs("label",{className:"document-field-label",children:["Category ",l.jsx("span",{className:"required-asterisk",children:"*"})]}),l.jsxs("div",{className:"category-selector-wrapper",children:[l.jsx("input",{type:"text",value:I.get(L.id)||L.category||"",onChange:Ue=>re(L.id,Ue.target.value),onFocus:()=>{L.saved||te(Ue=>{const Ie=new Map(Ue);return Ie.set(L.id,!0),Ie})},onBlur:()=>{setTimeout(()=>{te(Ue=>{const Ie=new Map(Ue);return Ie.set(L.id,!1),Ie})},200)},className:`document-category-input ${!L.category&&!L.saved?"error":""}`,placeholder:"Add or select a category",disabled:L.saved,autoComplete:"off",required:!0}),!L.saved&&P.get(L.id)&&oe(L.id).length>0&&l.jsxs("div",{className:"category-selector-dropdown",children:[l.jsx("div",{className:"category-selector-options",children:oe(L.id).slice(0,10).map(Ue=>l.jsx("div",{className:`category-selector-option ${L.category===Ue?"selected":""}`,onMouseDown:Ie=>Ie.preventDefault(),onClick:()=>de(L.id,Ue),children:Ue},Ue))}),oe(L.id).length>10&&l.jsxs("div",{className:"category-selector-footer",children:["Showing 10 of ",oe(L.id).length," categories"]})]}),!L.saved&&P.get(L.id)&&((ye=I.get(L.id))==null?void 0:ye.trim())&&oe(L.id).length===0&&l.jsx("div",{className:"category-selector-dropdown",children:l.jsx("div",{className:"category-selector-empty",children:"No categories found. The text you type will be used as the category."})})]}),!L.category&&!L.saved&&l.jsx("span",{className:"field-error",children:"Category is required"})]})}),l.jsx("textarea",{value:L.comments,onChange:Ue=>ie(L.id,Ue.target.value),className:"document-comments",placeholder:"Comments (optional)",rows:2,disabled:L.saved}),ce&&l.jsx("div",{className:"document-error",children:ce}),l.jsx("div",{className:"document-actions",children:!L.uploaded||!L.saved?l.jsx("button",{type:"button",onClick:()=>fe(L),disabled:Z||u||!L.category||!L.category.trim(),className:"upload-document-button",children:Z?l.jsxs(l.Fragment,{children:[l.jsx(Ea,{}),"Uploading..."]}):"Upload to CC Flow 2026"}):l.jsxs("div",{className:"document-status",children:[l.jsx("span",{className:"status-icon",children:""}),l.jsx("span",{children:"Uploaded and saved on CC Flow App 2026"})]})})]})]},L.id)})]}),!Ne&&l.jsx("div",{className:"step-empty",children:l.jsx("p",{children:"No documents added yet. Select files above to get started."})}),Ae.errors.length>0&&l.jsx("div",{className:"step-validation-errors",children:l.jsx("ul",{children:Ae.errors.map((L,Z)=>l.jsx("li",{children:L},Z))})}),l.jsx("div",{className:"step4-info",children:l.jsxs("p",{children:[l.jsx("strong",{children:"Note:"})," Documents are optional. You can skip this step or add documents later. All uploaded documents will be associated with this order."]})})]})}var $i={};(function r(t,a,n,o){var u=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),h=typeof Path2D=="function"&&typeof DOMMatrix=="function",g=(function(){if(!t.OffscreenCanvas)return!1;try{var w=new OffscreenCanvas(1,1),_=w.getContext("2d");_.fillRect(0,0,1,1);var $=w.transferToImageBitmap();_.createPattern($,"no-repeat")}catch(z){return!1}return!0})();function m(){}function p(w){var _=a.exports.Promise,$=_!==void 0?_:t.Promise;return typeof $=="function"?new $(w):(w(m,m),null)}var y=(function(w,_){return{transform:function($){if(w)return $;if(_.has($))return _.get($);var z=new OffscreenCanvas($.width,$.height),ae=z.getContext("2d");return ae.drawImage($,0,0),_.set($,z),z},clear:function(){_.clear()}}})(g,new Map),x=(function(){var w=Math.floor(16.666666666666668),_,$,z={},ae=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(_=function(ie){var re=Math.random();return z[re]=requestAnimationFrame(function de(oe){ae===oe||ae+w-1<oe?(ae=oe,delete z[re],ie()):z[re]=requestAnimationFrame(de)}),re},$=function(ie){z[ie]&&cancelAnimationFrame(z[ie])}):(_=function(ie){return setTimeout(ie,w)},$=function(ie){return clearTimeout(ie)}),{frame:_,cancel:$}})(),v=(function(){var w,_,$={};function z(ae){function ie(re,de){ae.postMessage({options:re||{},callback:de})}ae.init=function(de){var oe=de.transferControlToOffscreen();ae.postMessage({canvas:oe},[oe])},ae.fire=function(de,oe,fe){if(_)return ie(de,null),_;var be=Math.random().toString(36).slice(2);return _=p(function(me){function _e(Re){Re.data.callback===be&&(delete $[be],ae.removeEventListener("message",_e),_=null,y.clear(),fe(),me())}ae.addEventListener("message",_e),ie(de,be),$[be]=_e.bind(null,{data:{callback:be}})}),_},ae.reset=function(){ae.postMessage({reset:!0});for(var de in $)$[de](),delete $[de]}}return function(){if(w)return w;if(!n&&u){var ae=["var CONFETTI, SIZE = {}, module = {};","("+r.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{w=new Worker(URL.createObjectURL(new Blob([ae])))}catch(ie){return typeof console!="undefined"&&typeof console.warn=="function"&&console.warn(" Could not load worker",ie),null}z(w)}return w}})(),S={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function C(w,_){return _?_(w):w}function T(w){return w!=null}function A(w,_,$){return C(w&&T(w[_])?w[_]:S[_],$)}function I(w){return w<0?0:Math.floor(w)}function G(w,_){return Math.floor(Math.random()*(_-w))+w}function P(w){return parseInt(w,16)}function te(w){return w.map(he)}function he(w){var _=String(w).replace(/[^0-9a-f]/gi,"");return _.length<6&&(_=_[0]+_[0]+_[1]+_[1]+_[2]+_[2]),{r:P(_.substring(0,2)),g:P(_.substring(2,4)),b:P(_.substring(4,6))}}function X(w){var _=A(w,"origin",Object);return _.x=A(_,"x",Number),_.y=A(_,"y",Number),_}function le(w){w.width=document.documentElement.clientWidth,w.height=document.documentElement.clientHeight}function O(w){var _=w.getBoundingClientRect();w.width=_.width,w.height=_.height}function D(w){var _=document.createElement("canvas");return _.style.position="fixed",_.style.top="0px",_.style.left="0px",_.style.pointerEvents="none",_.style.zIndex=w,_}function E(w,_,$,z,ae,ie,re,de,oe){w.save(),w.translate(_,$),w.rotate(ie),w.scale(z,ae),w.arc(0,0,1,re,de,oe),w.restore()}function Y(w){var _=w.angle*(Math.PI/180),$=w.spread*(Math.PI/180);return{x:w.x,y:w.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:w.startVelocity*.5+Math.random()*w.startVelocity,angle2D:-_+(.5*$-Math.random()*$),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:w.color,shape:w.shape,tick:0,totalTicks:w.ticks,decay:w.decay,drift:w.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:w.gravity*3,ovalScalar:.6,scalar:w.scalar,flat:w.flat}}function W(w,_){_.x+=Math.cos(_.angle2D)*_.velocity+_.drift,_.y+=Math.sin(_.angle2D)*_.velocity+_.gravity,_.velocity*=_.decay,_.flat?(_.wobble=0,_.wobbleX=_.x+10*_.scalar,_.wobbleY=_.y+10*_.scalar,_.tiltSin=0,_.tiltCos=0,_.random=1):(_.wobble+=_.wobbleSpeed,_.wobbleX=_.x+10*_.scalar*Math.cos(_.wobble),_.wobbleY=_.y+10*_.scalar*Math.sin(_.wobble),_.tiltAngle+=.1,_.tiltSin=Math.sin(_.tiltAngle),_.tiltCos=Math.cos(_.tiltAngle),_.random=Math.random()+2);var $=_.tick++/_.totalTicks,z=_.x+_.random*_.tiltCos,ae=_.y+_.random*_.tiltSin,ie=_.wobbleX+_.random*_.tiltCos,re=_.wobbleY+_.random*_.tiltSin;if(w.fillStyle="rgba("+_.color.r+", "+_.color.g+", "+_.color.b+", "+(1-$)+")",w.beginPath(),h&&_.shape.type==="path"&&typeof _.shape.path=="string"&&Array.isArray(_.shape.matrix))w.fill(M(_.shape.path,_.shape.matrix,_.x,_.y,Math.abs(ie-z)*.1,Math.abs(re-ae)*.1,Math.PI/10*_.wobble));else if(_.shape.type==="bitmap"){var de=Math.PI/10*_.wobble,oe=Math.abs(ie-z)*.1,fe=Math.abs(re-ae)*.1,be=_.shape.bitmap.width*_.scalar,me=_.shape.bitmap.height*_.scalar,_e=new DOMMatrix([Math.cos(de)*oe,Math.sin(de)*oe,-Math.sin(de)*fe,Math.cos(de)*fe,_.x,_.y]);_e.multiplySelf(new DOMMatrix(_.shape.matrix));var Re=w.createPattern(y.transform(_.shape.bitmap),"no-repeat");Re.setTransform(_e),w.globalAlpha=1-$,w.fillStyle=Re,w.fillRect(_.x-be/2,_.y-me/2,be,me),w.globalAlpha=1}else if(_.shape==="circle")w.ellipse?w.ellipse(_.x,_.y,Math.abs(ie-z)*_.ovalScalar,Math.abs(re-ae)*_.ovalScalar,Math.PI/10*_.wobble,0,2*Math.PI):E(w,_.x,_.y,Math.abs(ie-z)*_.ovalScalar,Math.abs(re-ae)*_.ovalScalar,Math.PI/10*_.wobble,0,2*Math.PI);else if(_.shape==="star")for(var ve=Math.PI/2*3,Ae=4*_.scalar,Ne=8*_.scalar,ze=_.x,L=_.y,Z=5,ce=Math.PI/Z;Z--;)ze=_.x+Math.cos(ve)*Ne,L=_.y+Math.sin(ve)*Ne,w.lineTo(ze,L),ve+=ce,ze=_.x+Math.cos(ve)*Ae,L=_.y+Math.sin(ve)*Ae,w.lineTo(ze,L),ve+=ce;else w.moveTo(Math.floor(_.x),Math.floor(_.y)),w.lineTo(Math.floor(_.wobbleX),Math.floor(ae)),w.lineTo(Math.floor(ie),Math.floor(re)),w.lineTo(Math.floor(z),Math.floor(_.wobbleY));return w.closePath(),w.fill(),_.tick<_.totalTicks}function ue(w,_,$,z,ae){var ie=_.slice(),re=w.getContext("2d"),de,oe,fe=p(function(be){function me(){de=oe=null,re.clearRect(0,0,z.width,z.height),y.clear(),ae(),be()}function _e(){n&&!(z.width===o.width&&z.height===o.height)&&(z.width=w.width=o.width,z.height=w.height=o.height),!z.width&&!z.height&&($(w),z.width=w.width,z.height=w.height),re.clearRect(0,0,z.width,z.height),ie=ie.filter(function(Re){return W(re,Re)}),ie.length?de=x.frame(_e):me()}de=x.frame(_e),oe=me});return{addFettis:function(be){return ie=ie.concat(be),fe},canvas:w,promise:fe,reset:function(){de&&x.cancel(de),oe&&oe()}}}function pe(w,_){var $=!w,z=!!A(_||{},"resize"),ae=!1,ie=A(_,"disableForReducedMotion",Boolean),re=u&&!!A(_||{},"useWorker"),de=re?v():null,oe=$?le:O,fe=w&&de?!!w.__confetti_initialized:!1,be=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,me;function _e(ve,Ae,Ne){for(var ze=A(ve,"particleCount",I),L=A(ve,"angle",Number),Z=A(ve,"spread",Number),ce=A(ve,"startVelocity",Number),ye=A(ve,"decay",Number),Ue=A(ve,"gravity",Number),Ie=A(ve,"drift",Number),Je=A(ve,"colors",te),Dt=A(ve,"ticks",Number),Ye=A(ve,"shapes"),Ge=A(ve,"scalar"),xt=!!A(ve,"flat"),wt=X(ve),As=ze,ca=[],Ht=w.width*wt.x,ua=w.height*wt.y;As--;)ca.push(Y({x:Ht,y:ua,angle:L,spread:Z,startVelocity:ce,color:Je[As%Je.length],shape:Ye[G(0,Ye.length)],ticks:Dt,decay:ye,gravity:Ue,drift:Ie,scalar:Ge,flat:xt}));return me?me.addFettis(ca):(me=ue(w,ca,oe,Ae,Ne),me.promise)}function Re(ve){var Ae=ie||A(ve,"disableForReducedMotion",Boolean),Ne=A(ve,"zIndex",Number);if(Ae&&be)return p(function(ce){ce()});$&&me?w=me.canvas:$&&!w&&(w=D(Ne),document.body.appendChild(w)),z&&!fe&&oe(w);var ze={width:w.width,height:w.height};de&&!fe&&de.init(w),fe=!0,de&&(w.__confetti_initialized=!0);function L(){if(de){var ce={getBoundingClientRect:function(){if(!$)return w.getBoundingClientRect()}};oe(ce),de.postMessage({resize:{width:ce.width,height:ce.height}});return}ze.width=ze.height=null}function Z(){me=null,z&&(ae=!1,t.removeEventListener("resize",L)),$&&w&&(document.body.contains(w)&&document.body.removeChild(w),w=null,fe=!1)}return z&&!ae&&(ae=!0,t.addEventListener("resize",L,!1)),de?de.fire(ve,ze,Z):_e(ve,ze,Z)}return Re.reset=function(){de&&de.reset(),me&&me.reset()},Re}var we;function k(){return we||(we=pe(null,{useWorker:!0,resize:!0})),we}function M(w,_,$,z,ae,ie,re){var de=new Path2D(w),oe=new Path2D;oe.addPath(de,new DOMMatrix(_));var fe=new Path2D;return fe.addPath(oe,new DOMMatrix([Math.cos(re)*ae,Math.sin(re)*ae,-Math.sin(re)*ie,Math.cos(re)*ie,$,z])),fe}function F(w){if(!h)throw new Error("path confetti are not supported in this browser");var _,$;typeof w=="string"?_=w:(_=w.path,$=w.matrix);var z=new Path2D(_),ae=document.createElement("canvas"),ie=ae.getContext("2d");if(!$){for(var re=1e3,de=re,oe=re,fe=0,be=0,me,_e,Re=0;Re<re;Re+=2)for(var ve=0;ve<re;ve+=2)ie.isPointInPath(z,Re,ve,"nonzero")&&(de=Math.min(de,Re),oe=Math.min(oe,ve),fe=Math.max(fe,Re),be=Math.max(be,ve));me=fe-de,_e=be-oe;var Ae=10,Ne=Math.min(Ae/me,Ae/_e);$=[Ne,0,0,Ne,-Math.round(me/2+de)*Ne,-Math.round(_e/2+oe)*Ne]}return{type:"path",path:_,matrix:$}}function J(w){var _,$=1,z="#000000",ae='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof w=="string"?_=w:(_=w.text,$="scalar"in w?w.scalar:$,ae="fontFamily"in w?w.fontFamily:ae,z="color"in w?w.color:z);var ie=10*$,re=""+ie+"px "+ae,de=new OffscreenCanvas(ie,ie),oe=de.getContext("2d");oe.font=re;var fe=oe.measureText(_),be=Math.ceil(fe.actualBoundingBoxRight+fe.actualBoundingBoxLeft),me=Math.ceil(fe.actualBoundingBoxAscent+fe.actualBoundingBoxDescent),_e=2,Re=fe.actualBoundingBoxLeft+_e,ve=fe.actualBoundingBoxAscent+_e;be+=_e+_e,me+=_e+_e,de=new OffscreenCanvas(be,me),oe=de.getContext("2d"),oe.font=re,oe.fillStyle=z,oe.fillText(_,Re,ve);var Ae=1/$;return{type:"bitmap",bitmap:de.transferToImageBitmap(),matrix:[Ae,0,0,Ae,-be*Ae/2,-me*Ae/2]}}a.exports=function(){return k().apply(this,arguments)},a.exports.reset=function(){k().reset()},a.exports.create=pe,a.exports.shapeFromPath=F,a.exports.shapeFromText=J})((function(){return typeof window!="undefined"?window:typeof self!="undefined"?self:this||{}})(),$i,!1);const $1=$i.exports;$i.exports.create;const Jr=new Os;function z1(r,t,a=!0,n){return N(this,null,function*(){const o=[],u=[],h=hj(),g=r.documents.filter(S=>!S.uploaded||!S.saved),m=r.selectedExistingDocuments.filter(S=>!S.linked),p=g.length>0||m.length>0,y=7,x=p?(g.length>0?1:0)+(m.length>0?1:0):0,v=y+x;try{n==null||n({step:1,totalSteps:v,message:"Preparing order data...",status:"in-progress"});const S={"Order ID":r.orderId,Project:r.project,Responsable:r.responsable,Status:r.status,Colour:r.colour,Notification:a,"Creation Date":h},C=[{Order:r.orderId,Action:"Cut","Quality Control":t},{Order:r.orderId,Action:"Manufacturing","Quality Control":t},{Order:r.orderId,Action:"Packaging","Quality Control":t}],T=r.panels.map(A=>({Name:A.name,Project:r.project,Status:"Ready to cut",Area:A.area,"Cut Distance":A.cutDistance,Order:r.orderId,"Creation Date":h,Comment:A.comment||"",Image:"",Priority:r.priority,"Nest Number":A.nestNumber,Sheet:A.sheetName}));n==null||n({step:1,totalSteps:v,message:"Order data prepared",status:"completed"}),n==null||n({step:2,totalSteps:v,message:"Creating order in DB...",status:"in-progress"});try{const{error:A}=yield xa.from("Orders cut").insert([S]);if(A)throw new Error(`Supabase error creating order: ${A.message}`);n==null||n({step:2,totalSteps:v,message:"Order created in DB",status:"completed"})}catch(A){const I=A instanceof Error?A.message:"Unknown error";throw o.push(`Failed to create order in Supabase: ${I}`),n==null||n({step:2,totalSteps:v,message:`Error: ${I}`,status:"error"}),A}n==null||n({step:3,totalSteps:v,message:`Creating panels in DB (${T.length} panels)...`,status:"in-progress"});try{T.length>0?(yield Xt.createPanels(T),n==null||n({step:3,totalSteps:v,message:`Panels created in DB (${T.length} panels)`,status:"completed"})):n==null||n({step:3,totalSteps:v,message:"No panels to create",status:"completed"})}catch(A){const I=A instanceof Error?A.message:"Unknown error";throw o.push(`Failed to create panels in Supabase: ${I}`),n==null||n({step:3,totalSteps:v,message:`Error: ${I}`,status:"error"}),A}n==null||n({step:4,totalSteps:v,message:"Creating order in CC Flow 2026...",status:"in-progress"});try{yield Jr.addOrderCut(S),n==null||n({step:4,totalSteps:v,message:"Order created in CC Flow 2026",status:"completed"})}catch(A){const I=A instanceof Error?A.message:"Unknown error";u.push(`Failed to create order in AppSheet: ${I}`),n==null||n({step:4,totalSteps:v,message:`Warning: ${I}`,status:"error"})}n==null||n({step:5,totalSteps:v,message:"Creating stages in CC Flow 2026 (3 stages)...",status:"in-progress"});try{yield Jr.createStages(C),n==null||n({step:5,totalSteps:v,message:"Stages created in CC Flow 2026 (3 stages)",status:"completed"})}catch(A){const I=A instanceof Error?A.message:"Unknown error";u.push(`Failed to create stages in AppSheet: ${I}`),n==null||n({step:5,totalSteps:v,message:`Warning: ${I}`,status:"error"})}n==null||n({step:6,totalSteps:v,message:`Creating panels in CC Flow 2026 (${T.length} panels)...`,status:"in-progress"});try{T.length>0?(yield Jr.createPanels(T),n==null||n({step:6,totalSteps:v,message:`Panels created in CC Flow 2026 (${T.length} panels)`,status:"completed"})):n==null||n({step:6,totalSteps:v,message:"No panels to create",status:"completed"})}catch(A){const I=A instanceof Error?A.message:"Unknown error";u.push(`Failed to create panels in AppSheet: ${I}`),n==null||n({step:6,totalSteps:v,message:`Warning: ${I}`,status:"error"})}n==null||n({step:7,totalSteps:v,message:`Updating sheets inventory in CC Flow 2026 (${r.selectedSheets.length} sheets)...`,status:"in-progress"});try{if(r.selectedSheets.length>0){const A=r.selectedSheets.map(I=>({"Sheet ID":I.sheetId,order:r.orderId,qty:-I.qty,change_time:h}));yield Jr.createSheetsInventory(A),n==null||n({step:7,totalSteps:v,message:`Sheets inventory updated in CC Flow 2026 (${r.selectedSheets.length} sheets)`,status:"completed"})}else n==null||n({step:7,totalSteps:v,message:"No sheets to update in inventory",status:"completed"})}catch(A){const I=A instanceof Error?A.message:"Unknown error";u.push(`Failed to update sheets inventory in AppSheet: ${I}`),n==null||n({step:7,totalSteps:v,message:`Warning: ${I}`,status:"error"})}if(p){let A=y;if(g.length>0){A++,n==null||n({step:A,totalSteps:v,message:`Uploading ${g.length} new document(s)...`,status:"in-progress"});for(let I=0;I<g.length;I++){const G=g[I];if(!G.category||!G.category.trim()){u.push(`Document "${G.name}" skipped: Category is required`);continue}try{yield Jr.addDocument({file:G.file,Project:r.project,Name:G.name,Orders:r.orderId,Comments:G.comments||"",Category:G.category||""})}catch(P){const te=P instanceof Error?P.message:"Unknown error";u.push(`Failed to upload document "${G.name}": ${te}`)}}n==null||n({step:A,totalSteps:v,message:`Uploaded ${g.length} new document(s)`,status:"completed"})}if(m.length>0){A++,n==null||n({step:A,totalSteps:v,message:`Linking ${m.length} existing document(s)...`,status:"in-progress"});for(let I=0;I<m.length;I++){const G=m[I];try{yield Jr.linkDocumentToOrder(G.documentId,r.orderId)}catch(P){const te=P instanceof Error?P.message:"Unknown error";u.push(`Failed to link document "${G.name}": ${te}`)}}n==null||n({step:A,totalSteps:v,message:`Linked ${m.length} existing document(s)`,status:"completed"})}}return{success:o.length===0,orderId:r.orderId,errors:o,warnings:u}}catch(S){const C=S instanceof Error?S.message:"Unknown error";return{success:!1,orderId:r.orderId,errors:[...o,C],warnings:u}}})}const B1=["#16a34a","#22c55e","#15803d","#fbbf24","#fde047","#ffffff"];function I1(){const n=[],o=u=>{const h=window.setTimeout(()=>{$1({particleCount:80,spread:360,origin:{x:.5,y:.45},startVelocity:38,colors:B1,ticks:120,gravity:.9,scalar:.95,drift:0})},u);n.push(h)};for(let u=0;u<5;u++)o(u*120);return n}function P1(){const{formData:r,validation:t,setLoading:a,setError:n,setSuccess:o,resetWizard:u,isLoading:h,goToStep:g,creationResult:m,setCreationResult:p}=$a(),[y,x]=U.useState(!1),[v,S]=U.useState(null),C=m!=null?m:v,[T,A]=U.useState(null),[I,G]=U.useState(!1),[P,te]=U.useState(!0),[he,X]=U.useState(!1),le=U.useRef(!1);U.useEffect(()=>{const M=window.matchMedia("(prefers-reduced-motion: reduce)").matches;if(v!=null&&v.success&&!le.current&&!M){le.current=!0;const F=I1();return()=>{F.forEach(J=>window.clearTimeout(J))}}v!=null&&v.success||(le.current=!1)},[v==null?void 0:v.success]);const O=M=>{G(M)},D=M=>{te(M)},E=()=>N(null,null,function*(){if(C!=null&&C.orderId)try{yield navigator.clipboard.writeText(C.orderId),X(!0),setTimeout(()=>X(!1),2e3)}catch(M){X(!1)}}),Y=()=>N(null,null,function*(){if(!t.step5.isValid)return;a(!0),n(null),o(!1);const M=r.documents.filter($=>!$.uploaded||!$.saved),F=r.selectedExistingDocuments.filter($=>!$.linked),J=[{number:1,label:"Preparing order data",status:"pending"},{number:2,label:"Creating order in DB",status:"pending"},{number:3,label:`Creating panels in DB (${r.panels.length} panels)`,status:"pending"},{number:4,label:"Creating order in CC Flow 2026",status:"pending"},{number:5,label:"Creating stages in CC Flow 2026 (3 stages)",status:"pending"},{number:6,label:`Creating panels in CC Flow 2026 (${r.panels.length} panels)`,status:"pending"},{number:7,label:"Updating sheets inventory in CC Flow 2026",status:"pending"}],w=[];M.length>0&&w.push({number:J.length+w.length+1,label:`Uploading ${M.length} new document(s)`,status:"pending"}),F.length>0&&w.push({number:J.length+w.length+1,label:`Linking ${F.length} existing document(s)`,status:"pending"});const _=[...J,...w];A({currentStep:0,totalSteps:_.length,message:"Starting order creation...",steps:_});try{const $=yield z1(r,I,P,z=>{A(ae=>{if(!ae)return ae;const ie=[...ae.steps];return ie[z.step-1]=lt(He({},ie[z.step-1]),{status:z.status}),{currentStep:z.step,totalSteps:z.totalSteps,message:z.message,steps:ie}})});if(S($),A(null),$.success)p($),o(!0),$.warnings.length>0&&console.warn(" Order created with warnings:",$.warnings);else{const z=$.errors.length>0?$.errors[0]:"Failed to create order";n(z)}}catch($){const z=$ instanceof Error?$.message:"Unknown error";n(z),S({success:!1,orderId:r.orderId,errors:[z],warnings:[]}),A(null)}finally{a(!1),x(!1)}}),W=()=>{u(),S(null),x(!1)},ue=t.step5,pe=r.panels.reduce((M,F)=>M+F.area,0),we=r.panels.reduce((M,F)=>M+F.cutDistance,0),k=r.selectedSheets.reduce((M,F)=>M+F.qty,0);return C!=null&&C.success?l.jsx("div",{className:"step-container step5-review step-success",children:l.jsxs("div",{className:"success-content success-content-enter",children:[l.jsx("div",{className:"success-icon-wrapper",children:l.jsxs("svg",{className:"success-icon-svg",viewBox:"0 0 52 52","aria-hidden":!0,children:[l.jsx("circle",{className:"success-icon-circle",cx:"26",cy:"26",r:"24",fill:"none",stroke:"currentColor",strokeWidth:"2"}),l.jsx("path",{className:"success-icon-check",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M14 27l8 8 16-20"})]})}),l.jsx("h2",{className:"success-title success-title-enter",children:"Order Created Successfully!"}),l.jsxs("p",{className:"success-message success-message-enter",children:["Your order ",l.jsx("strong",{children:C.orderId})," for project ",l.jsx("strong",{children:r.project})," has been created and is ready for processing."]}),l.jsxs("div",{className:"success-order-info",children:[l.jsxs("div",{className:"success-info-item success-info-item-order-id",children:[l.jsx("span",{className:"success-info-label",children:"Order ID:"}),l.jsx("span",{className:"success-info-value",children:C.orderId}),l.jsx("button",{type:"button",onClick:E,className:"success-copy-order-id-btn",title:"Copy Order ID","aria-label":he?"Copied":"Copy Order ID to clipboard",children:he?"Copied!":"Copy"})]}),l.jsxs("div",{className:"success-info-item",children:[l.jsx("span",{className:"success-info-label",children:"Project:"}),l.jsx("span",{className:"success-info-value",children:r.project})]})]}),C.warnings&&C.warnings.length>0&&l.jsxs("div",{className:"success-warnings",children:[l.jsx("p",{className:"warnings-title",children:"Warnings:"}),l.jsx("ul",{children:C.warnings.map((M,F)=>l.jsx("li",{children:M},F))})]}),(()=>{const M=r.documents,F=r.selectedExistingDocuments,J=M,w=F,_=J.length+w.length;return _>0?l.jsxs("div",{className:"success-documents-section success-documents-summary",children:[l.jsxs("div",{className:"success-documents-header",children:[l.jsx("span",{className:"success-icon-small",children:""}),l.jsxs("p",{className:"success-documents-title",children:[_," document",_!==1?"s":""," processed"]})]}),l.jsxs("p",{className:"success-documents-linked-order",children:["Documents will be linked to order: ",l.jsx("strong",{children:C.orderId})]}),l.jsxs("div",{className:"success-documents-list",children:[J.length>0&&l.jsxs("div",{className:"success-documents-group",children:[l.jsxs("span",{className:"documents-group-label",children:["Uploaded (",J.length,"):"]}),l.jsx("div",{className:"documents-group-items",children:J.map(z=>l.jsx("span",{className:"document-item-badge",children:z.name},z.id))})]}),w.length>0&&l.jsxs("div",{className:"success-documents-group",children:[l.jsxs("span",{className:"documents-group-label",children:["Linked (",w.length,"):"]}),l.jsx("div",{className:"documents-group-items",children:w.map(z=>l.jsx("span",{className:"document-item-badge",children:z.name},z.documentId))})]})]}),l.jsx("button",{type:"button",onClick:()=>g(4),className:"action-button action-button-secondary",children:"Add More Documents"})]}):l.jsxs("div",{className:"success-documents-section success-documents-warning",children:[l.jsxs("div",{className:"success-documents-header",children:[l.jsx("span",{className:"warning-icon",children:""}),l.jsx("p",{className:"success-documents-title",children:"No documents were added to this order"})]}),l.jsx("p",{className:"success-documents-message",children:"Consider adding documents such as cut lists, elevation, drawings or other relevant files."}),l.jsxs("p",{className:"success-documents-linked-order",children:["Documents will be linked to order: ",l.jsx("strong",{children:C.orderId})]}),l.jsx("button",{type:"button",onClick:()=>g(4),className:"action-button action-button-secondary",children:"Add Documents Now"})]})})(),l.jsx("p",{className:"success-next-step",children:"What would you like to do next?"}),l.jsx("div",{className:"success-actions",children:l.jsxs("button",{type:"button",onClick:W,className:"action-button success-cta-button",children:[l.jsx("span",{className:"success-cta-icon","aria-hidden":!0,children:l.jsx("svg",{viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:l.jsx("path",{d:"M8 3v10M3 8h10"})})}),"Create another order"]})})]})}):l.jsxs("div",{className:"step-container step5-review",children:[l.jsx("h2",{className:"step-title",children:"Review and Create Order"}),l.jsx("p",{className:"step-description",children:"Review all the information before creating the order."}),h&&T&&l.jsx("div",{className:"step-loading-overlay",children:l.jsxs("div",{className:"creation-progress-container",children:[l.jsx("h3",{className:"progress-title",children:"Creating Order..."}),l.jsx("div",{className:"progress-bar-container",children:l.jsx("div",{className:"progress-bar-fill",style:{width:`${T.currentStep/T.totalSteps*100}%`}})}),l.jsx("div",{className:"progress-steps-list",children:T.steps.map(M=>l.jsxs("div",{className:`progress-step-item progress-step-${M.status}`,children:[l.jsxs("div",{className:"progress-step-icon",children:[M.status==="completed"&&"",M.status==="in-progress"&&"",M.status==="pending"&&"",M.status==="error"&&""]}),l.jsx("span",{className:"progress-step-label",children:M.label})]},M.number))}),l.jsx("p",{className:"progress-message",children:T.message})]})}),l.jsxs("div",{className:"step5-sections",children:[l.jsxs("section",{className:"review-section",children:[l.jsx("h3",{className:"section-title",children:"Order Information"}),l.jsxs("div",{className:"review-highlight-grid",children:[l.jsxs("div",{className:"review-item-highlight review-item-highlight-animated review-item-order-id",style:{animationDelay:"0.1s"},children:[l.jsx("span",{className:"review-label-highlight",children:"Order ID"}),l.jsx("span",{className:"review-value-highlight",children:r.orderId})]}),l.jsxs("div",{className:"review-item-highlight review-item-highlight-animated review-item-project",style:{animationDelay:"0.2s"},children:[l.jsx("span",{className:"review-label-highlight",children:"Project"}),l.jsx("span",{className:"review-value-highlight",children:r.project})]}),l.jsxs("div",{className:"review-item-highlight review-item-highlight-animated review-item-sheets",style:{animationDelay:"0.3s"},children:[l.jsx("span",{className:"review-label-highlight",children:"Sheets"}),l.jsx("span",{className:"review-value-highlight",children:r.sheets||"N/A"})]})]}),l.jsxs("div",{className:"review-controls-inline",children:[l.jsxs("div",{className:"review-control-item-inline review-control-notification review-control-animated",style:{animationDelay:"0.4s"},onClick:()=>D(!P),role:"button",tabIndex:0,onKeyDown:M=>{(M.key==="Enter"||M.key===" ")&&(M.preventDefault(),D(!P))},children:[l.jsxs("div",{className:"control-header-inline",children:[l.jsx("span",{className:"control-label-inline",children:"Notification"}),l.jsxs("div",{className:"tooltip-container",onClick:M=>M.stopPropagation(),children:[l.jsx("span",{className:"tooltip-icon",children:""}),l.jsx("div",{className:"tooltip-content",children:"When enabled, a notification will be sent to the Factory workers about this order."})]})]}),l.jsxs("label",{className:"toggle-switch toggle-switch-enhanced",onClick:M=>M.stopPropagation(),children:[l.jsx("input",{type:"checkbox",checked:P,onChange:M=>D(M.target.checked)}),l.jsx("span",{className:"toggle-slider"})]})]}),l.jsxs("div",{className:"review-control-item-inline review-control-quality review-control-animated",style:{animationDelay:"0.5s"},onClick:()=>O(!I),role:"button",tabIndex:0,onKeyDown:M=>{(M.key==="Enter"||M.key===" ")&&(M.preventDefault(),O(!I))},children:[l.jsxs("div",{className:"control-header-inline",children:[l.jsx("span",{className:"control-label-inline",children:"Quality Control"}),l.jsxs("div",{className:"tooltip-container",onClick:M=>M.stopPropagation(),children:[l.jsx("span",{className:"tooltip-icon",children:""}),l.jsx("div",{className:"tooltip-content",children:"When enabled, in the Manufacturing stage it will be mandatory to take a photo of each manufactured panel."})]})]}),l.jsxs("label",{className:"toggle-switch toggle-switch-enhanced",onClick:M=>M.stopPropagation(),children:[l.jsx("input",{type:"checkbox",checked:I,onChange:M=>O(M.target.checked)}),l.jsx("span",{className:"toggle-slider"})]})]})]}),l.jsxs("div",{className:"review-grid review-grid-secondary",children:[l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Status:"}),l.jsx("span",{className:"review-value",children:r.status})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Responsible:"}),l.jsx("span",{className:"review-value",children:r.responsable})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Expected to:"}),l.jsx("span",{className:"review-value",children:new Date(r.expectedTo).toLocaleDateString("es-ES")})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Priority:"}),l.jsx("span",{className:"review-value",children:r.priority})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Colour:"}),l.jsx("span",{className:"review-value",children:r.colour||"N/A"})]}),r.orderComment&&l.jsxs("div",{className:"review-item review-item-full",children:[l.jsx("span",{className:"review-label",children:"Order Comment:"}),l.jsx("span",{className:"review-value",children:r.orderComment})]})]})]}),l.jsxs("section",{className:"review-section",children:[l.jsxs("h3",{className:"section-title",children:["Selected Sheets (",r.selectedSheets.length,")"]}),l.jsx("div",{className:"review-table-container",children:l.jsxs("table",{className:"review-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Dimension"}),l.jsx("th",{children:"Colour"}),l.jsx("th",{children:"Qty"})]})}),l.jsx("tbody",{children:r.selectedSheets.map(M=>l.jsxs("tr",{children:[l.jsx("td",{children:M.dimension}),l.jsx("td",{children:M.colour}),l.jsx("td",{children:M.qty})]},M.sheetId))})]})}),l.jsxs("div",{className:"review-summary-item review-summary-item-centered",children:[l.jsx("span",{className:"summary-label",children:"Total Sheets Qty:"}),l.jsx("span",{className:"summary-value",children:k})]})]}),l.jsxs("section",{className:"review-section",children:[l.jsxs("h3",{className:"section-title",children:["Summary of Panels (",r.panels.length,")"]}),l.jsxs("div",{className:"review-summary-grid",children:[l.jsxs("div",{className:"review-summary-item",children:[l.jsx("span",{className:"summary-label",children:"Total Panels:"}),l.jsx("span",{className:"summary-value",children:r.panels.length})]}),l.jsxs("div",{className:"review-summary-item",children:[l.jsx("span",{className:"summary-label",children:"Total Area:"}),l.jsxs("span",{className:"summary-value",children:[pe.toFixed(2)," m"]})]}),l.jsxs("div",{className:"review-summary-item",children:[l.jsx("span",{className:"summary-label",children:"Cut Distance Total:"}),l.jsxs("span",{className:"summary-value",children:[we.toFixed(2)," m"]})]})]})]}),l.jsxs("section",{className:"review-section",children:[l.jsxs("div",{className:"review-section-header",children:[l.jsxs("h3",{className:"section-title",children:["Documents (",r.documents.length+r.selectedExistingDocuments.length,")"]}),l.jsx("button",{type:"button",onClick:()=>g(4),className:"review-action-button",disabled:h,children:r.documents.length===0&&r.selectedExistingDocuments.length===0?"Add Documents":"Manage Documents"})]}),r.documents.length===0&&r.selectedExistingDocuments.length===0?l.jsxs("div",{className:"review-empty-state",children:[l.jsx("span",{className:"empty-icon",children:""}),l.jsx("p",{className:"empty-message",children:"No documents added yet. You can add them now or after creating the order."})]}):l.jsxs("div",{className:"review-documents-list",children:[r.documents.map(M=>l.jsxs("div",{className:"review-document-item",children:[l.jsxs("div",{className:"review-document-info",children:[l.jsx("span",{className:"document-name",children:M.name}),l.jsx("span",{className:"document-category",children:M.category||"Uncategorized"})]}),l.jsx("span",{className:`document-status ${M.uploaded&&M.saved?"uploaded":"pending"}`,children:M.uploaded&&M.saved?" Uploaded":" Pending"})]},M.id)),r.selectedExistingDocuments.map(M=>l.jsxs("div",{className:"review-document-item",children:[l.jsxs("div",{className:"review-document-info",children:[l.jsx("span",{className:"document-name",children:M.name}),l.jsx("span",{className:"document-category",children:M.category||"Uncategorized"})]}),l.jsx("span",{className:"document-status linked",children:" To Link"})]},M.documentId))]})]})]}),ue.errors.length>0&&l.jsxs("div",{className:"step-validation-errors",children:[l.jsx("p",{className:"validation-title",children:"Please correct the following errors:"}),l.jsx("ul",{children:ue.errors.map((M,F)=>l.jsx("li",{children:M},F))})]}),C&&!C.success&&l.jsxs("div",{className:"step-error-message",children:[l.jsx("p",{children:l.jsx("strong",{children:"Error creating order:"})}),C.errors&&C.errors.length>0&&l.jsx("ul",{children:C.errors.map((M,F)=>l.jsx("li",{children:M},F))}),C.warnings&&C.warnings.length>0&&l.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid #fecaca"},children:[l.jsx("p",{children:l.jsx("strong",{children:"Warnings:"})}),l.jsx("ul",{children:C.warnings.map((M,F)=>l.jsx("li",{children:M},F))})]})]}),l.jsx("div",{className:"step5-actions",children:y?l.jsxs("div",{className:"confirm-dialog",children:[l.jsx("p",{className:"confirm-message",children:"Are you sure you want to create this order?"}),l.jsxs("div",{className:"confirm-actions",children:[l.jsx("button",{type:"button",onClick:()=>x(!1),className:"confirm-button confirm-button-cancel",disabled:h,children:"Cancel"}),l.jsx("button",{type:"button",onClick:Y,disabled:h,className:"confirm-button confirm-button-confirm",children:h?"Creating...":"Confirm"})]})]}):l.jsx("button",{type:"button",onClick:()=>x(!0),disabled:!ue.isValid||h,className:"create-order-button",children:"Create Order"})})]})}function H1(){const{currentStep:r}=$a();switch(r){case 1:return l.jsx(fp,{});case 2:return l.jsx(A1,{});case 3:return l.jsx(M1,{});case 4:return l.jsx(q1,{});case 5:return l.jsx(P1,{});default:return l.jsx(fp,{})}}const Y1=()=>{const{user:r,signOut:t}=So(),{currentStep:a,creationResult:n}=$a(),o=U.useRef(null);Ri("Creator of Orders - Cladding Creations"),U.useEffect(()=>{const p=setTimeout(()=>{o.current?o.current.scrollIntoView({behavior:"smooth",block:"start"}):window.scrollTo({top:0,behavior:"smooth"})},a===1?200:100);return()=>clearTimeout(p)},[a,n==null?void 0:n.success]);const g=a===2||a===3;return l.jsxs("div",{className:"creator-of-orders",children:[l.jsxs("div",{className:"creator-header",children:[l.jsxs("div",{className:"creator-header-left",children:[l.jsx("img",{src:wo(),alt:"Cladding Creations",className:"creator-logo"}),l.jsx("h1",{children:"Panel Order Creator"})]}),l.jsxs("div",{className:"user-info",children:[l.jsxs("span",{children:["Welcome, ",r==null?void 0:r.email]}),l.jsx("button",{onClick:()=>t(),className:"logout-button",children:"Logout"})]})]}),l.jsx("div",{className:`creator-content ${g?"step2-full-width":""}`,children:l.jsxs("div",{ref:o,className:`wizard-container ${g?"step2-full-width":""}`,children:[l.jsx(v1,{}),l.jsx("div",{className:"wizard-steps-container",children:l.jsx(H1,{})}),l.jsx(b1,{})]})})]})},V1=()=>l.jsx(y1,{children:l.jsx(Y1,{})}),F1=new Kv({defaultOptions:{queries:{staleTime:600*1e3,gcTime:1800*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1}}}),Q1=[{id:"cutting-information",label:"Cutting Information"},{id:"sheets",label:"Sheets"},{id:"project-allowances-section",label:"Allowances"},{id:"material-tables",label:"Material"},{id:"trips-over-time",label:"Trips"}],G1=r=>{const t=document.getElementById(r),a=document.querySelector(".main-header");if(t&&a){const n=a.offsetHeight,o=t.getBoundingClientRect().top+window.scrollY-n-8;window.scrollTo({top:o,behavior:"smooth"})}};function K1(){const r=wp(),[t,a]=U.useState(!0),[n,o]=U.useState(!1),[u,h]=U.useState(0),g=f1(r.pathname),p=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?"/CC-logo-NEW_1.webp":"/CC_Flow_summary_report/CC-logo-NEW_1.webp",y=[{id:"order-delivery",label:"Order Delivery",path:"/order-delivery",icon:""},{id:"analytics",label:"CC Analytics",path:"/analytics",icon:""}];return U.useEffect(()=>{const{animationDuration:x}=g;if(x===0){a(!1),o(!0);return}const v=x*.25,S=x*.5,C=x*.75,T=x,A=setTimeout(()=>{h(1)},v),I=setTimeout(()=>{h(2)},S),G=setTimeout(()=>{h(3)},C),P=setTimeout(()=>{a(!1),setTimeout(()=>{o(!0)},200)},T);return()=>{clearTimeout(A),clearTimeout(I),clearTimeout(G),clearTimeout(P)}},[g]),l.jsx("div",{className:`App ${t?"loading":"loaded"}`,children:l.jsxs(_b,{children:[g.showDataPreloader&&l.jsx(d1,{}),t&&l.jsx("div",{className:`loading-screen phase-${u}`,children:l.jsxs("div",{className:"loading-content",children:[l.jsx("img",{src:p,alt:"CC Logo",className:"loading-logo"}),l.jsx("div",{className:"loading-subtitle",children:g.loadingText})]})}),n&&l.jsx(l.Fragment,{children:l.jsx(cj,{children:l.jsxs(fb,{children:[l.jsx(di,{path:"/",element:l.jsxs(l.Fragment,{children:[g.showHeader&&l.jsxs("header",{className:"main-header",children:[l.jsx("div",{className:"header-left",children:l.jsx(h1,{logoPath:p,menuItems:y})}),l.jsx("nav",{className:"header-nav",children:Q1.map(x=>l.jsx("button",{className:"nav-link",onClick:()=>G1(x.id),children:x.label},x.id))})]}),l.jsx(EN,{})]})}),l.jsx(di,{path:"/order-delivery",element:l.jsx(TN,{})}),l.jsx(di,{path:"/analytics",element:l.jsx(u1,{})}),l.jsx(di,{path:"/login",element:l.jsx(g1,{})}),l.jsx(di,{path:"/creator-of-orders",element:l.jsx(p1,{children:l.jsx(V1,{})})})]})})})]})})}function W1(){return l.jsx(Wv,{client:F1,children:l.jsxs(m1,{children:[l.jsx(hb,{children:l.jsx(K1,{})}),l.jsx(Sb,{initialIsOpen:!1})]})})}bb.createRoot(document.getElementById("root")).render(l.jsx(lo.StrictMode,{children:l.jsx(W1,{})}))});export default X1();
