var Rv=Object.defineProperty,Mv=Object.defineProperties;var Uv=Object.getOwnPropertyDescriptors;var bg=Object.getOwnPropertySymbols,qv=Object.getPrototypeOf,Lv=Object.prototype.hasOwnProperty,$v=Object.prototype.propertyIsEnumerable,zv=Reflect.get;var Au=(r,t,a)=>t in r?Rv(r,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[t]=a,Ue=(r,t)=>{for(var a in t||(t={}))Lv.call(t,a)&&Au(r,a,t[a]);if(bg)for(var a of bg(t))$v.call(t,a)&&Au(r,a,t[a]);return r},et=(r,t)=>Mv(r,Uv(t));var Bv=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports);var ue=(r,t,a)=>Au(r,typeof t!="symbol"?t+"":t,a);var It=(r,t,a)=>zv(qv(r),a,t);var S=(r,t,a)=>new Promise((n,o)=>{var u=m=>{try{g(a.next(m))}catch(p){o(p)}},h=m=>{try{g(a.throw(m))}catch(p){o(p)}},g=m=>m.done?n(m.value):Promise.resolve(m.value).then(u,h);g((a=a.apply(r,t)).next())});import{j as l,u as ta,a as Pv,Q as Iv,b as Hv}from"./query-B4Ur1_o1.js";import{r as k,R as ro,m as ji,i as pi,a as Yv,e as Vv,c as fp,b as pt,v as Qv,t as Gv,d as Fv,f as Kv,A as Xv,P as hd,B as rn,C as qa,g as nn,L as ln,p as on,h as cn,j as un,k as fd,l as Wv,n as Jv,o as mp,T as Zv,q as eb}from"./charts-D_SN6vdU.js";import{r as tb,a as ab,g as gp}from"./vendor-C0DUGSOM.js";import{u as sb,a as pp,b as yp,N as rb,H as nb,R as ib,c as oi}from"./router-D2KI5rDd.js";var B1=Bv(st=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function a(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function n(o){if(o.ep)return;o.ep=!0;const u=a(o);fetch(o.href,u)}})();var ku={exports:{}},ci={},Ru={exports:{}},Mu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xg;function lb(){return xg||(xg=1,function(r){function t(T,Q){var J=T.length;T.push(Q);e:for(;0<J;){var D=J-1>>>1,G=T[D];if(0<o(G,Q))T[D]=Q,T[J]=G,J=D;else break e}}function a(T){return T.length===0?null:T[0]}function n(T){if(T.length===0)return null;var Q=T[0],J=T.pop();if(J!==Q){T[0]=J;e:for(var D=0,G=T.length,ae=G>>>1;D<ae;){var ne=2*(D+1)-1,se=T[ne],me=ne+1,ce=T[me];if(0>o(se,J))me<G&&0>o(ce,se)?(T[D]=ce,T[me]=J,D=me):(T[D]=se,T[ne]=J,D=ne);else if(me<G&&0>o(ce,J))T[D]=ce,T[me]=J,D=me;else break e}}return Q}function o(T,Q){var J=T.sortIndex-Q.sortIndex;return J!==0?J:T.id-Q.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var h=Date,g=h.now();r.unstable_now=function(){return h.now()-g}}var m=[],p=[],y=1,x=null,b=3,j=!1,N=!1,E=!1,A=!1,B=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate!="undefined"?setImmediate:null;function X(T){for(var Q=a(p);Q!==null;){if(Q.callback===null)n(p);else if(Q.startTime<=T)n(p),Q.sortIndex=Q.expirationTime,t(m,Q);else break;Q=a(p)}}function te(T){if(E=!1,X(T),!N)if(a(m)!==null)N=!0,z||(z=!0,K());else{var Q=a(p);Q!==null&&ge(te,Q.startTime-T)}}var z=!1,ie=-1,C=5,_=-1;function R(){return A?!0:!(r.unstable_now()-_<C)}function F(){if(A=!1,z){var T=r.unstable_now();_=T;var Q=!0;try{e:{N=!1,E&&(E=!1,U(ie),ie=-1),j=!0;var J=b;try{t:{for(X(T),x=a(m);x!==null&&!(x.expirationTime>T&&R());){var D=x.callback;if(typeof D=="function"){x.callback=null,b=x.priorityLevel;var G=D(x.expirationTime<=T);if(T=r.unstable_now(),typeof G=="function"){x.callback=G,X(T),Q=!0;break t}x===a(m)&&n(m),X(T)}else n(m);x=a(m)}if(x!==null)Q=!0;else{var ae=a(p);ae!==null&&ge(te,ae.startTime-T),Q=!1}}break e}finally{x=null,b=J,j=!1}Q=void 0}}finally{Q?K():z=!1}}}var K;if(typeof q=="function")K=function(){q(F)};else if(typeof MessageChannel!="undefined"){var le=new MessageChannel,he=le.port2;le.port1.onmessage=F,K=function(){he.postMessage(null)}}else K=function(){B(F,0)};function ge(T,Q){ie=B(function(){T(r.unstable_now())},Q)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(T){T.callback=null},r.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<T?Math.floor(1e3/T):5},r.unstable_getCurrentPriorityLevel=function(){return b},r.unstable_next=function(T){switch(b){case 1:case 2:case 3:var Q=3;break;default:Q=b}var J=b;b=Q;try{return T()}finally{b=J}},r.unstable_requestPaint=function(){A=!0},r.unstable_runWithPriority=function(T,Q){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var J=b;b=T;try{return Q()}finally{b=J}},r.unstable_scheduleCallback=function(T,Q,J){var D=r.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?D+J:D):J=D,T){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=J+G,T={id:y++,callback:Q,priorityLevel:T,startTime:J,expirationTime:G,sortIndex:-1},J>D?(T.sortIndex=J,t(p,T),a(m)===null&&T===a(p)&&(E?(U(ie),ie=-1):E=!0,ge(te,J-D))):(T.sortIndex=G,t(m,T),N||j||(N=!0,z||(z=!0,K()))),T},r.unstable_shouldYield=R,r.unstable_wrapCallback=function(T){var Q=b;return function(){var J=b;b=Q;try{return T.apply(this,arguments)}finally{b=J}}}}(Mu)),Mu}var wg;function ob(){return wg||(wg=1,Ru.exports=lb()),Ru.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jg;function cb(){if(jg)return ci;jg=1;var r=ob(),t=tb(),a=ab();function n(e){var s="https://react.dev/errors/"+e;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)s+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var s=e,i=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do s=e,(s.flags&4098)!==0&&(i=s.return),e=s.return;while(e)}return s.tag===3?i:null}function h(e){if(e.tag===13){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function g(e){if(u(e)!==e)throw Error(n(188))}function m(e){var s=e.alternate;if(!s){if(s=u(e),s===null)throw Error(n(188));return s!==e?null:e}for(var i=e,c=s;;){var d=i.return;if(d===null)break;var f=d.alternate;if(f===null){if(c=d.return,c!==null){i=c;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===i)return g(d),e;if(f===c)return g(d),s;f=f.sibling}throw Error(n(188))}if(i.return!==c.return)i=d,c=f;else{for(var v=!1,w=d.child;w;){if(w===i){v=!0,i=d,c=f;break}if(w===c){v=!0,c=d,i=f;break}w=w.sibling}if(!v){for(w=f.child;w;){if(w===i){v=!0,i=f,c=d;break}if(w===c){v=!0,c=f,i=d;break}w=w.sibling}if(!v)throw Error(n(189))}}if(i.alternate!==c)throw Error(n(190))}if(i.tag!==3)throw Error(n(188));return i.stateNode.current===i?e:s}function p(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e;for(e=e.child;e!==null;){if(s=p(e),s!==null)return s;e=e.sibling}return null}var y=Object.assign,x=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),U=Symbol.for("react.consumer"),q=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),ie=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function K(e){return e===null||typeof e!="object"?null:(e=F&&e[F]||e["@@iterator"],typeof e=="function"?e:null)}var le=Symbol.for("react.client.reference");function he(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===le?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case N:return"Fragment";case A:return"Profiler";case E:return"StrictMode";case te:return"Suspense";case z:return"SuspenseList";case _:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case j:return"Portal";case q:return(e.displayName||"Context")+".Provider";case U:return(e._context.displayName||"Context")+".Consumer";case X:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ie:return s=e.displayName||null,s!==null?s:he(e.type)||"Memo";case C:s=e._payload,e=e._init;try{return he(e(s))}catch(i){}}return null}var ge=Array.isArray,T=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},D=[],G=-1;function ae(e){return{current:e}}function ne(e){0>G||(e.current=D[G],D[G]=null,G--)}function se(e,s){G++,D[G]=e.current,e.current=s}var me=ae(null),ce=ae(null),_e=ae(null),L=ae(null);function V(e,s){switch(se(_e,s),se(ce,e),se(me,null),s.nodeType){case 9:case 11:e=(e=s.documentElement)&&(e=e.namespaceURI)?Gm(e):0;break;default:if(e=s.tagName,s=s.namespaceURI)s=Gm(s),e=Fm(s,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ne(me),se(me,e)}function W(){ne(me),ne(ce),ne(_e)}function oe(e){e.memoizedState!==null&&se(L,e);var s=me.current,i=Fm(s,e.type);s!==i&&(se(ce,e),se(me,i))}function de(e){ce.current===e&&(ne(me),ne(ce)),L.current===e&&(ne(L),si._currentValue=J)}var be=Object.prototype.hasOwnProperty,ze=r.unstable_scheduleCallback,ke=r.unstable_cancelCallback,Re=r.unstable_shouldYield,De=r.unstable_requestPaint,rt=r.unstable_now,Ce=r.unstable_getCurrentPriorityLevel,Fe=r.unstable_ImmediatePriority,ga=r.unstable_UserBlockingPriority,pa=r.unstable_NormalPriority,aa=r.unstable_LowPriority,ts=r.unstable_IdlePriority,wt=r.log,sa=r.unstable_setDisableYieldValue,We=null,He=null;function jt(e){if(typeof wt=="function"&&sa(e),He&&typeof He.setStrictMode=="function")try{He.setStrictMode(We,e)}catch(s){}}var Tt=Math.clz32?Math.clz32:ra,Ui=Math.log,as=Math.LN2;function ra(e){return e>>>=0,e===0?32:31-(Ui(e)/as|0)|0}var _a=256,Os=4194304;function As(e){var s=e&42;if(s!==0)return s;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function qi(e,s,i){var c=e.pendingLanes;if(c===0)return 0;var d=0,f=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var w=c&134217727;return w!==0?(c=w&~f,c!==0?d=As(c):(v&=w,v!==0?d=As(v):i||(i=w&~e,i!==0&&(d=As(i))))):(w=c&~f,w!==0?d=As(w):v!==0?d=As(v):i||(i=c&~e,i!==0&&(d=As(i)))),d===0?0:s!==0&&s!==d&&(s&f)===0&&(f=d&-d,i=s&-s,f>=i||f===32&&(i&4194048)!==0)?s:d}function hn(e,s){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&s)===0}function x0(e,s){switch(e){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dd(){var e=_a;return _a<<=1,(_a&4194048)===0&&(_a=256),e}function Od(){var e=Os;return Os<<=1,(Os&62914560)===0&&(Os=4194304),e}function xo(e){for(var s=[],i=0;31>i;i++)s.push(e);return s}function fn(e,s){e.pendingLanes|=s,s!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function w0(e,s,i,c,d,f){var v=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var w=e.entanglements,O=e.expirationTimes,I=e.hiddenUpdates;for(i=v&~i;0<i;){var Z=31-Tt(i),re=1<<Z;w[Z]=0,O[Z]=-1;var H=I[Z];if(H!==null)for(I[Z]=null,Z=0;Z<H.length;Z++){var Y=H[Z];Y!==null&&(Y.lane&=-536870913)}i&=~re}c!==0&&Ad(e,c,0),f!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=f&~(v&~s))}function Ad(e,s,i){e.pendingLanes|=s,e.suspendedLanes&=~s;var c=31-Tt(s);e.entangledLanes|=s,e.entanglements[c]=e.entanglements[c]|1073741824|i&4194090}function kd(e,s){var i=e.entangledLanes|=s;for(e=e.entanglements;i;){var c=31-Tt(i),d=1<<c;d&s|e[c]&s&&(e[c]|=s),i&=~d}}function wo(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function jo(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Rd(){var e=Q.p;return e!==0?e:(e=window.event,e===void 0?32:fg(e.type))}function j0(e,s){var i=Q.p;try{return Q.p=e,s()}finally{Q.p=i}}var ss=Math.random().toString(36).slice(2),Mt="__reactFiber$"+ss,Lt="__reactProps$"+ss,rr="__reactContainer$"+ss,So="__reactEvents$"+ss,S0="__reactListeners$"+ss,_0="__reactHandles$"+ss,Md="__reactResources$"+ss,mn="__reactMarker$"+ss;function _o(e){delete e[Mt],delete e[Lt],delete e[So],delete e[S0],delete e[_0]}function nr(e){var s=e[Mt];if(s)return s;for(var i=e.parentNode;i;){if(s=i[rr]||i[Mt]){if(i=s.alternate,s.child!==null||i!==null&&i.child!==null)for(e=Jm(e);e!==null;){if(i=e[Mt])return i;e=Jm(e)}return s}e=i,i=e.parentNode}return null}function ir(e){if(e=e[Mt]||e[rr]){var s=e.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return e}return null}function gn(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e.stateNode;throw Error(n(33))}function lr(e){var s=e[Md];return s||(s=e[Md]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function St(e){e[mn]=!0}var Ud=new Set,qd={};function ks(e,s){or(e,s),or(e+"Capture",s)}function or(e,s){for(qd[e]=s,e=0;e<s.length;e++)Ud.add(s[e])}var N0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ld={},$d={};function C0(e){return be.call($d,e)?!0:be.call(Ld,e)?!1:N0.test(e)?$d[e]=!0:(Ld[e]=!0,!1)}function Li(e,s,i){if(C0(s))if(i===null)e.removeAttribute(s);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){e.removeAttribute(s);return}}e.setAttribute(s,""+i)}}function $i(e,s,i){if(i===null)e.removeAttribute(s);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttribute(s,""+i)}}function La(e,s,i,c){if(c===null)e.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(s,i,""+c)}}var No,zd;function cr(e){if(No===void 0)try{throw Error()}catch(i){var s=i.stack.trim().match(/\n( *(at )?)/);No=s&&s[1]||"",zd=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+No+e+zd}var Co=!1;function Eo(e,s){if(!e||Co)return"";Co=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(Y){var H=Y}Reflect.construct(e,[],re)}else{try{re.call()}catch(Y){H=Y}e.call(re.prototype)}}else{try{throw Error()}catch(Y){H=Y}(re=e())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(Y){if(Y&&H&&typeof Y.stack=="string")return[Y.stack,H.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=c.DetermineComponentFrameRoot(),v=f[0],w=f[1];if(v&&w){var O=v.split(`
`),I=w.split(`
`);for(d=c=0;c<O.length&&!O[c].includes("DetermineComponentFrameRoot");)c++;for(;d<I.length&&!I[d].includes("DetermineComponentFrameRoot");)d++;if(c===O.length||d===I.length)for(c=O.length-1,d=I.length-1;1<=c&&0<=d&&O[c]!==I[d];)d--;for(;1<=c&&0<=d;c--,d--)if(O[c]!==I[d]){if(c!==1||d!==1)do if(c--,d--,0>d||O[c]!==I[d]){var Z=`
`+O[c].replace(" at new "," at ");return e.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",e.displayName)),Z}while(1<=c&&0<=d);break}}}finally{Co=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?cr(i):""}function E0(e){switch(e.tag){case 26:case 27:case 5:return cr(e.type);case 16:return cr("Lazy");case 13:return cr("Suspense");case 19:return cr("SuspenseList");case 0:case 15:return Eo(e.type,!1);case 11:return Eo(e.type.render,!1);case 1:return Eo(e.type,!0);case 31:return cr("Activity");default:return""}}function Bd(e){try{var s="";do s+=E0(e),e=e.return;while(e);return s}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}function na(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Pd(e){var s=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function T0(e){var s=Pd(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,s),c=""+e[s];if(!e.hasOwnProperty(s)&&typeof i!="undefined"&&typeof i.get=="function"&&typeof i.set=="function"){var d=i.get,f=i.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return d.call(this)},set:function(v){c=""+v,f.call(this,v)}}),Object.defineProperty(e,s,{enumerable:i.enumerable}),{getValue:function(){return c},setValue:function(v){c=""+v},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}function zi(e){e._valueTracker||(e._valueTracker=T0(e))}function Id(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var i=s.getValue(),c="";return e&&(c=Pd(e)?e.checked?"true":"false":e.value),e=c,e!==i?(s.setValue(e),!0):!1}function Bi(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(s){return e.body}}var D0=/[\n"\\]/g;function ia(e){return e.replace(D0,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function To(e,s,i,c,d,f,v,w){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),s!=null?v==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+na(s)):e.value!==""+na(s)&&(e.value=""+na(s)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),s!=null?Do(e,v,na(s)):i!=null?Do(e,v,na(i)):c!=null&&e.removeAttribute("value"),d==null&&f!=null&&(e.defaultChecked=!!f),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?e.name=""+na(w):e.removeAttribute("name")}function Hd(e,s,i,c,d,f,v,w){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),s!=null||i!=null){if(!(f!=="submit"&&f!=="reset"||s!=null))return;i=i!=null?""+na(i):"",s=s!=null?""+na(s):i,w||s===e.value||(e.value=s),e.defaultValue=s}c=c!=null?c:d,c=typeof c!="function"&&typeof c!="symbol"&&!!c,e.checked=w?e.checked:!!c,e.defaultChecked=!!c,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v)}function Do(e,s,i){s==="number"&&Bi(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function ur(e,s,i,c){if(e=e.options,s){s={};for(var d=0;d<i.length;d++)s["$"+i[d]]=!0;for(i=0;i<e.length;i++)d=s.hasOwnProperty("$"+e[i].value),e[i].selected!==d&&(e[i].selected=d),d&&c&&(e[i].defaultSelected=!0)}else{for(i=""+na(i),s=null,d=0;d<e.length;d++){if(e[d].value===i){e[d].selected=!0,c&&(e[d].defaultSelected=!0);return}s!==null||e[d].disabled||(s=e[d])}s!==null&&(s.selected=!0)}}function Yd(e,s,i){if(s!=null&&(s=""+na(s),s!==e.value&&(e.value=s),i==null)){e.defaultValue!==s&&(e.defaultValue=s);return}e.defaultValue=i!=null?""+na(i):""}function Vd(e,s,i,c){if(s==null){if(c!=null){if(i!=null)throw Error(n(92));if(ge(c)){if(1<c.length)throw Error(n(93));c=c[0]}i=c}i==null&&(i=""),s=i}i=na(s),e.defaultValue=i,c=e.textContent,c===i&&c!==""&&c!==null&&(e.value=c)}function dr(e,s){if(s){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=s;return}}e.textContent=s}var O0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Qd(e,s,i){var c=s.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?c?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="":c?e.setProperty(s,i):typeof i!="number"||i===0||O0.has(s)?s==="float"?e.cssFloat=i:e[s]=(""+i).trim():e[s]=i+"px"}function Gd(e,s,i){if(s!=null&&typeof s!="object")throw Error(n(62));if(e=e.style,i!=null){for(var c in i)!i.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?e.setProperty(c,""):c==="float"?e.cssFloat="":e[c]="");for(var d in s)c=s[d],s.hasOwnProperty(d)&&i[d]!==c&&Qd(e,d,c)}else for(var f in s)s.hasOwnProperty(f)&&Qd(e,f,s[f])}function Oo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var A0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),k0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pi(e){return k0.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Ao=null;function ko(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var hr=null,fr=null;function Fd(e){var s=ir(e);if(s&&(e=s.stateNode)){var i=e[Lt]||null;e:switch(e=s.stateNode,s.type){case"input":if(To(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),s=i.name,i.type==="radio"&&s!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+ia(""+s)+'"][type="radio"]'),s=0;s<i.length;s++){var c=i[s];if(c!==e&&c.form===e.form){var d=c[Lt]||null;if(!d)throw Error(n(90));To(c,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<i.length;s++)c=i[s],c.form===e.form&&Id(c)}break e;case"textarea":Yd(e,i.value,i.defaultValue);break e;case"select":s=i.value,s!=null&&ur(e,!!i.multiple,s,!1)}}}var Ro=!1;function Kd(e,s,i){if(Ro)return e(s,i);Ro=!0;try{var c=e(s);return c}finally{if(Ro=!1,(hr!==null||fr!==null)&&(Cl(),hr&&(s=hr,e=fr,fr=hr=null,Fd(s),e)))for(s=0;s<e.length;s++)Fd(e[s])}}function pn(e,s){var i=e.stateNode;if(i===null)return null;var c=i[Lt]||null;if(c===null)return null;i=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(n(231,s,typeof i));return i}var $a=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Mo=!1;if($a)try{var yn={};Object.defineProperty(yn,"passive",{get:function(){Mo=!0}}),window.addEventListener("test",yn,yn),window.removeEventListener("test",yn,yn)}catch(e){Mo=!1}var rs=null,Uo=null,Ii=null;function Xd(){if(Ii)return Ii;var e,s=Uo,i=s.length,c,d="value"in rs?rs.value:rs.textContent,f=d.length;for(e=0;e<i&&s[e]===d[e];e++);var v=i-e;for(c=1;c<=v&&s[i-c]===d[f-c];c++);return Ii=d.slice(e,1<c?1-c:void 0)}function Hi(e){var s=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&s===13&&(e=13)):e=s,e===10&&(e=13),32<=e||e===13?e:0}function Yi(){return!0}function Wd(){return!1}function $t(e){function s(i,c,d,f,v){this._reactName=i,this._targetInst=d,this.type=c,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(i=e[w],this[w]=i?i(f):f[w]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Yi:Wd,this.isPropagationStopped=Wd,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Yi)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Yi)},persist:function(){},isPersistent:Yi}),s}var Rs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vi=$t(Rs),vn=y({},Rs,{view:0,detail:0}),R0=$t(vn),qo,Lo,bn,Qi=y({},vn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==bn&&(bn&&e.type==="mousemove"?(qo=e.screenX-bn.screenX,Lo=e.screenY-bn.screenY):Lo=qo=0,bn=e),qo)},movementY:function(e){return"movementY"in e?e.movementY:Lo}}),Jd=$t(Qi),M0=y({},Qi,{dataTransfer:0}),U0=$t(M0),q0=y({},vn,{relatedTarget:0}),$o=$t(q0),L0=y({},Rs,{animationName:0,elapsedTime:0,pseudoElement:0}),$0=$t(L0),z0=y({},Rs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),B0=$t(z0),P0=y({},Rs,{data:0}),Zd=$t(P0),I0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},H0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Y0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function V0(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):(e=Y0[e])?!!s[e]:!1}function zo(){return V0}var Q0=y({},vn,{key:function(e){if(e.key){var s=I0[e.key]||e.key;if(s!=="Unidentified")return s}return e.type==="keypress"?(e=Hi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?H0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zo,charCode:function(e){return e.type==="keypress"?Hi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Hi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),G0=$t(Q0),F0=y({},Qi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eh=$t(F0),K0=y({},vn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zo}),X0=$t(K0),W0=y({},Rs,{propertyName:0,elapsedTime:0,pseudoElement:0}),J0=$t(W0),Z0=y({},Qi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ey=$t(Z0),ty=y({},Rs,{newState:0,oldState:0}),ay=$t(ty),sy=[9,13,27,32],Bo=$a&&"CompositionEvent"in window,xn=null;$a&&"documentMode"in document&&(xn=document.documentMode);var ry=$a&&"TextEvent"in window&&!xn,th=$a&&(!Bo||xn&&8<xn&&11>=xn),ah=" ",sh=!1;function rh(e,s){switch(e){case"keyup":return sy.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var mr=!1;function ny(e,s){switch(e){case"compositionend":return nh(s);case"keypress":return s.which!==32?null:(sh=!0,ah);case"textInput":return e=s.data,e===ah&&sh?null:e;default:return null}}function iy(e,s){if(mr)return e==="compositionend"||!Bo&&rh(e,s)?(e=Xd(),Ii=Uo=rs=null,mr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return th&&s.locale!=="ko"?null:s.data;default:return null}}var ly={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ih(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s==="input"?!!ly[e.type]:s==="textarea"}function lh(e,s,i,c){hr?fr?fr.push(c):fr=[c]:hr=c,s=kl(s,"onChange"),0<s.length&&(i=new Vi("onChange","change",null,i,c),e.push({event:i,listeners:s}))}var wn=null,jn=null;function oy(e){Im(e,0)}function Gi(e){var s=gn(e);if(Id(s))return e}function oh(e,s){if(e==="change")return s}var ch=!1;if($a){var Po;if($a){var Io="oninput"in document;if(!Io){var uh=document.createElement("div");uh.setAttribute("oninput","return;"),Io=typeof uh.oninput=="function"}Po=Io}else Po=!1;ch=Po&&(!document.documentMode||9<document.documentMode)}function dh(){wn&&(wn.detachEvent("onpropertychange",hh),jn=wn=null)}function hh(e){if(e.propertyName==="value"&&Gi(jn)){var s=[];lh(s,jn,e,ko(e)),Kd(oy,s)}}function cy(e,s,i){e==="focusin"?(dh(),wn=s,jn=i,wn.attachEvent("onpropertychange",hh)):e==="focusout"&&dh()}function uy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Gi(jn)}function dy(e,s){if(e==="click")return Gi(s)}function hy(e,s){if(e==="input"||e==="change")return Gi(s)}function fy(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var Vt=typeof Object.is=="function"?Object.is:fy;function Sn(e,s){if(Vt(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;var i=Object.keys(e),c=Object.keys(s);if(i.length!==c.length)return!1;for(c=0;c<i.length;c++){var d=i[c];if(!be.call(s,d)||!Vt(e[d],s[d]))return!1}return!0}function fh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function mh(e,s){var i=fh(e);e=0;for(var c;i;){if(i.nodeType===3){if(c=e+i.textContent.length,e<=s&&c>=s)return{node:i,offset:s-e};e=c}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=fh(i)}}function gh(e,s){return e&&s?e===s?!0:e&&e.nodeType===3?!1:s&&s.nodeType===3?gh(e,s.parentNode):"contains"in e?e.contains(s):e.compareDocumentPosition?!!(e.compareDocumentPosition(s)&16):!1:!1}function ph(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var s=Bi(e.document);s instanceof e.HTMLIFrameElement;){try{var i=typeof s.contentWindow.location.href=="string"}catch(c){i=!1}if(i)e=s.contentWindow;else break;s=Bi(e.document)}return s}function Ho(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&(s==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||s==="textarea"||e.contentEditable==="true")}var my=$a&&"documentMode"in document&&11>=document.documentMode,gr=null,Yo=null,_n=null,Vo=!1;function yh(e,s,i){var c=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Vo||gr==null||gr!==Bi(c)||(c=gr,"selectionStart"in c&&Ho(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),_n&&Sn(_n,c)||(_n=c,c=kl(Yo,"onSelect"),0<c.length&&(s=new Vi("onSelect","select",null,s,i),e.push({event:s,listeners:c}),s.target=gr)))}function Ms(e,s){var i={};return i[e.toLowerCase()]=s.toLowerCase(),i["Webkit"+e]="webkit"+s,i["Moz"+e]="moz"+s,i}var pr={animationend:Ms("Animation","AnimationEnd"),animationiteration:Ms("Animation","AnimationIteration"),animationstart:Ms("Animation","AnimationStart"),transitionrun:Ms("Transition","TransitionRun"),transitionstart:Ms("Transition","TransitionStart"),transitioncancel:Ms("Transition","TransitionCancel"),transitionend:Ms("Transition","TransitionEnd")},Qo={},vh={};$a&&(vh=document.createElement("div").style,"AnimationEvent"in window||(delete pr.animationend.animation,delete pr.animationiteration.animation,delete pr.animationstart.animation),"TransitionEvent"in window||delete pr.transitionend.transition);function Us(e){if(Qo[e])return Qo[e];if(!pr[e])return e;var s=pr[e],i;for(i in s)if(s.hasOwnProperty(i)&&i in vh)return Qo[e]=s[i];return e}var bh=Us("animationend"),xh=Us("animationiteration"),wh=Us("animationstart"),gy=Us("transitionrun"),py=Us("transitionstart"),yy=Us("transitioncancel"),jh=Us("transitionend"),Sh=new Map,Go="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Go.push("scrollEnd");function ya(e,s){Sh.set(e,s),ks(s,[e])}var _h=new WeakMap;function la(e,s){if(typeof e=="object"&&e!==null){var i=_h.get(e);return i!==void 0?i:(s={value:e,source:s,stack:Bd(s)},_h.set(e,s),s)}return{value:e,source:s,stack:Bd(s)}}var oa=[],yr=0,Fo=0;function Fi(){for(var e=yr,s=Fo=yr=0;s<e;){var i=oa[s];oa[s++]=null;var c=oa[s];oa[s++]=null;var d=oa[s];oa[s++]=null;var f=oa[s];if(oa[s++]=null,c!==null&&d!==null){var v=c.pending;v===null?d.next=d:(d.next=v.next,v.next=d),c.pending=d}f!==0&&Nh(i,d,f)}}function Ki(e,s,i,c){oa[yr++]=e,oa[yr++]=s,oa[yr++]=i,oa[yr++]=c,Fo|=c,e.lanes|=c,e=e.alternate,e!==null&&(e.lanes|=c)}function Ko(e,s,i,c){return Ki(e,s,i,c),Xi(e)}function vr(e,s){return Ki(e,null,null,s),Xi(e)}function Nh(e,s,i){e.lanes|=i;var c=e.alternate;c!==null&&(c.lanes|=i);for(var d=!1,f=e.return;f!==null;)f.childLanes|=i,c=f.alternate,c!==null&&(c.childLanes|=i),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(d=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,d&&s!==null&&(d=31-Tt(i),e=f.hiddenUpdates,c=e[d],c===null?e[d]=[s]:c.push(s),s.lane=i|536870912),f):null}function Xi(e){if(50<Kn)throw Kn=0,tu=null,Error(n(185));for(var s=e.return;s!==null;)e=s,s=e.return;return e.tag===3?e.stateNode:null}var br={};function vy(e,s,i,c){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qt(e,s,i,c){return new vy(e,s,i,c)}function Xo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function za(e,s){var i=e.alternate;return i===null?(i=Qt(e.tag,s,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=s,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,s=e.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Ch(e,s){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=s,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,s=i.dependencies,e.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),e}function Wi(e,s,i,c,d,f){var v=0;if(c=e,typeof e=="function")Xo(e)&&(v=1);else if(typeof e=="string")v=xv(e,i,me.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case _:return e=Qt(31,i,s,d),e.elementType=_,e.lanes=f,e;case N:return qs(i.children,d,f,s);case E:v=8,d|=24;break;case A:return e=Qt(12,i,s,d|2),e.elementType=A,e.lanes=f,e;case te:return e=Qt(13,i,s,d),e.elementType=te,e.lanes=f,e;case z:return e=Qt(19,i,s,d),e.elementType=z,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case B:case q:v=10;break e;case U:v=9;break e;case X:v=11;break e;case ie:v=14;break e;case C:v=16,c=null;break e}v=29,i=Error(n(130,e===null?"null":typeof e,"")),c=null}return s=Qt(v,i,s,d),s.elementType=e,s.type=c,s.lanes=f,s}function qs(e,s,i,c){return e=Qt(7,e,c,s),e.lanes=i,e}function Wo(e,s,i){return e=Qt(6,e,null,s),e.lanes=i,e}function Jo(e,s,i){return s=Qt(4,e.children!==null?e.children:[],e.key,s),s.lanes=i,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}var xr=[],wr=0,Ji=null,Zi=0,ca=[],ua=0,Ls=null,Ba=1,Pa="";function $s(e,s){xr[wr++]=Zi,xr[wr++]=Ji,Ji=e,Zi=s}function Eh(e,s,i){ca[ua++]=Ba,ca[ua++]=Pa,ca[ua++]=Ls,Ls=e;var c=Ba;e=Pa;var d=32-Tt(c)-1;c&=~(1<<d),i+=1;var f=32-Tt(s)+d;if(30<f){var v=d-d%5;f=(c&(1<<v)-1).toString(32),c>>=v,d-=v,Ba=1<<32-Tt(s)+d|i<<d|c,Pa=f+e}else Ba=1<<f|i<<d|c,Pa=e}function Zo(e){e.return!==null&&($s(e,1),Eh(e,1,0))}function ec(e){for(;e===Ji;)Ji=xr[--wr],xr[wr]=null,Zi=xr[--wr],xr[wr]=null;for(;e===Ls;)Ls=ca[--ua],ca[ua]=null,Pa=ca[--ua],ca[ua]=null,Ba=ca[--ua],ca[ua]=null}var qt=null,nt=null,Le=!1,zs=null,Na=!1,tc=Error(n(519));function Bs(e){var s=Error(n(418,""));throw En(la(s,e)),tc}function Th(e){var s=e.stateNode,i=e.type,c=e.memoizedProps;switch(s[Mt]=e,s[Lt]=c,i){case"dialog":Ae("cancel",s),Ae("close",s);break;case"iframe":case"object":case"embed":Ae("load",s);break;case"video":case"audio":for(i=0;i<Wn.length;i++)Ae(Wn[i],s);break;case"source":Ae("error",s);break;case"img":case"image":case"link":Ae("error",s),Ae("load",s);break;case"details":Ae("toggle",s);break;case"input":Ae("invalid",s),Hd(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),zi(s);break;case"select":Ae("invalid",s);break;case"textarea":Ae("invalid",s),Vd(s,c.value,c.defaultValue,c.children),zi(s)}i=c.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||s.textContent===""+i||c.suppressHydrationWarning===!0||Qm(s.textContent,i)?(c.popover!=null&&(Ae("beforetoggle",s),Ae("toggle",s)),c.onScroll!=null&&Ae("scroll",s),c.onScrollEnd!=null&&Ae("scrollend",s),c.onClick!=null&&(s.onclick=Rl),s=!0):s=!1,s||Bs(e)}function Dh(e){for(qt=e.return;qt;)switch(qt.tag){case 5:case 13:Na=!1;return;case 27:case 3:Na=!0;return;default:qt=qt.return}}function Nn(e){if(e!==qt)return!1;if(!Le)return Dh(e),Le=!0,!1;var s=e.tag,i;if((i=s!==3&&s!==27)&&((i=s===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||yu(e.type,e.memoizedProps)),i=!i),i&&nt&&Bs(e),Dh(e),s===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(n(317));e:{for(e=e.nextSibling,s=0;e;){if(e.nodeType===8)if(i=e.data,i==="/$"){if(s===0){nt=ba(e.nextSibling);break e}s--}else i!=="$"&&i!=="$!"&&i!=="$?"||s++;e=e.nextSibling}nt=null}}else s===27?(s=nt,xs(e.type)?(e=wu,wu=null,nt=e):nt=s):nt=qt?ba(e.stateNode.nextSibling):null;return!0}function Cn(){nt=qt=null,Le=!1}function Oh(){var e=zs;return e!==null&&(Pt===null?Pt=e:Pt.push.apply(Pt,e),zs=null),e}function En(e){zs===null?zs=[e]:zs.push(e)}var ac=ae(null),Ps=null,Ia=null;function ns(e,s,i){se(ac,s._currentValue),s._currentValue=i}function Ha(e){e._currentValue=ac.current,ne(ac)}function sc(e,s,i){for(;e!==null;){var c=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),e===i)break;e=e.return}}function rc(e,s,i,c){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var f=d.dependencies;if(f!==null){var v=d.child;f=f.firstContext;e:for(;f!==null;){var w=f;f=d;for(var O=0;O<s.length;O++)if(w.context===s[O]){f.lanes|=i,w=f.alternate,w!==null&&(w.lanes|=i),sc(f.return,i,e),c||(v=null);break e}f=w.next}}else if(d.tag===18){if(v=d.return,v===null)throw Error(n(341));v.lanes|=i,f=v.alternate,f!==null&&(f.lanes|=i),sc(v,i,e),v=null}else v=d.child;if(v!==null)v.return=d;else for(v=d;v!==null;){if(v===e){v=null;break}if(d=v.sibling,d!==null){d.return=v.return,v=d;break}v=v.return}d=v}}function Tn(e,s,i,c){e=null;for(var d=s,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var v=d.alternate;if(v===null)throw Error(n(387));if(v=v.memoizedProps,v!==null){var w=d.type;Vt(d.pendingProps.value,v.value)||(e!==null?e.push(w):e=[w])}}else if(d===L.current){if(v=d.alternate,v===null)throw Error(n(387));v.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(si):e=[si])}d=d.return}e!==null&&rc(s,e,i,c),s.flags|=262144}function el(e){for(e=e.firstContext;e!==null;){if(!Vt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Is(e){Ps=e,Ia=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ut(e){return Ah(Ps,e)}function tl(e,s){return Ps===null&&Is(e),Ah(e,s)}function Ah(e,s){var i=s._currentValue;if(s={context:s,memoizedValue:i,next:null},Ia===null){if(e===null)throw Error(n(308));Ia=s,e.dependencies={lanes:0,firstContext:s},e.flags|=524288}else Ia=Ia.next=s;return i}var by=typeof AbortController!="undefined"?AbortController:function(){var e=[],s=this.signal={aborted:!1,addEventListener:function(i,c){e.push(c)}};this.abort=function(){s.aborted=!0,e.forEach(function(i){return i()})}},xy=r.unstable_scheduleCallback,wy=r.unstable_NormalPriority,vt={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function nc(){return{controller:new by,data:new Map,refCount:0}}function Dn(e){e.refCount--,e.refCount===0&&xy(wy,function(){e.controller.abort()})}var On=null,ic=0,jr=0,Sr=null;function jy(e,s){if(On===null){var i=On=[];ic=0,jr=ou(),Sr={status:"pending",value:void 0,then:function(c){i.push(c)}}}return ic++,s.then(kh,kh),s}function kh(){if(--ic===0&&On!==null){Sr!==null&&(Sr.status="fulfilled");var e=On;On=null,jr=0,Sr=null;for(var s=0;s<e.length;s++)(0,e[s])()}}function Sy(e,s){var i=[],c={status:"pending",value:null,reason:null,then:function(d){i.push(d)}};return e.then(function(){c.status="fulfilled",c.value=s;for(var d=0;d<i.length;d++)(0,i[d])(s)},function(d){for(c.status="rejected",c.reason=d,d=0;d<i.length;d++)(0,i[d])(void 0)}),c}var Rh=T.S;T.S=function(e,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&jy(e,s),Rh!==null&&Rh(e,s)};var Hs=ae(null);function lc(){var e=Hs.current;return e!==null?e:Ke.pooledCache}function al(e,s){s===null?se(Hs,Hs.current):se(Hs,s.pool)}function Mh(){var e=lc();return e===null?null:{parent:vt._currentValue,pool:e}}var An=Error(n(460)),Uh=Error(n(474)),sl=Error(n(542)),oc={then:function(){}};function qh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function rl(){}function Lh(e,s,i){switch(i=e[i],i===void 0?e.push(s):i!==s&&(s.then(rl,rl),s=i),s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,zh(e),e;default:if(typeof s.status=="string")s.then(rl,rl);else{if(e=Ke,e!==null&&100<e.shellSuspendCounter)throw Error(n(482));e=s,e.status="pending",e.then(function(c){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=c}},function(c){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,zh(e),e}throw kn=s,An}}var kn=null;function $h(){if(kn===null)throw Error(n(459));var e=kn;return kn=null,e}function zh(e){if(e===An||e===sl)throw Error(n(483))}var is=!1;function cc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function uc(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ls(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function os(e,s,i){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,(Be&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,s=Xi(e),Nh(e,null,i),s}return Ki(e,c,s,i),Xi(e)}function Rn(e,s,i){if(s=s.updateQueue,s!==null&&(s=s.shared,(i&4194048)!==0)){var c=s.lanes;c&=e.pendingLanes,i|=c,s.lanes=i,kd(e,i)}}function dc(e,s){var i=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,i===c)){var d=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var v={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};f===null?d=f=v:f=f.next=v,i=i.next}while(i!==null);f===null?d=f=s:f=f.next=s}else d=f=s;i={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:c.shared,callbacks:c.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=s:e.next=s,i.lastBaseUpdate=s}var hc=!1;function Mn(){if(hc){var e=Sr;if(e!==null)throw e}}function Un(e,s,i,c){hc=!1;var d=e.updateQueue;is=!1;var f=d.firstBaseUpdate,v=d.lastBaseUpdate,w=d.shared.pending;if(w!==null){d.shared.pending=null;var O=w,I=O.next;O.next=null,v===null?f=I:v.next=I,v=O;var Z=e.alternate;Z!==null&&(Z=Z.updateQueue,w=Z.lastBaseUpdate,w!==v&&(w===null?Z.firstBaseUpdate=I:w.next=I,Z.lastBaseUpdate=O))}if(f!==null){var re=d.baseState;v=0,Z=I=O=null,w=f;do{var H=w.lane&-536870913,Y=H!==w.lane;if(Y?(Me&H)===H:(c&H)===H){H!==0&&H===jr&&(hc=!0),Z!==null&&(Z=Z.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Se=e,ve=w;H=s;var Qe=i;switch(ve.tag){case 1:if(Se=ve.payload,typeof Se=="function"){re=Se.call(Qe,re,H);break e}re=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=ve.payload,H=typeof Se=="function"?Se.call(Qe,re,H):Se,H==null)break e;re=y({},re,H);break e;case 2:is=!0}}H=w.callback,H!==null&&(e.flags|=64,Y&&(e.flags|=8192),Y=d.callbacks,Y===null?d.callbacks=[H]:Y.push(H))}else Y={lane:H,tag:w.tag,payload:w.payload,callback:w.callback,next:null},Z===null?(I=Z=Y,O=re):Z=Z.next=Y,v|=H;if(w=w.next,w===null){if(w=d.shared.pending,w===null)break;Y=w,w=Y.next,Y.next=null,d.lastBaseUpdate=Y,d.shared.pending=null}}while(!0);Z===null&&(O=re),d.baseState=O,d.firstBaseUpdate=I,d.lastBaseUpdate=Z,f===null&&(d.shared.lanes=0),ps|=v,e.lanes=v,e.memoizedState=re}}function Bh(e,s){if(typeof e!="function")throw Error(n(191,e));e.call(s)}function Ph(e,s){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)Bh(i[e],s)}var _r=ae(null),nl=ae(0);function Ih(e,s){e=Xa,se(nl,e),se(_r,s),Xa=e|s.baseLanes}function fc(){se(nl,Xa),se(_r,_r.current)}function mc(){Xa=nl.current,ne(_r),ne(nl)}var cs=0,Ee=null,Ye=null,mt=null,il=!1,Nr=!1,Ys=!1,ll=0,qn=0,Cr=null,_y=0;function ut(){throw Error(n(321))}function gc(e,s){if(s===null)return!1;for(var i=0;i<s.length&&i<e.length;i++)if(!Vt(e[i],s[i]))return!1;return!0}function pc(e,s,i,c,d,f){return cs=f,Ee=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,T.H=e===null||e.memoizedState===null?Cf:Ef,Ys=!1,f=i(c,d),Ys=!1,Nr&&(f=Yh(s,i,c,d)),Hh(e),f}function Hh(e){T.H=fl;var s=Ye!==null&&Ye.next!==null;if(cs=0,mt=Ye=Ee=null,il=!1,qn=0,Cr=null,s)throw Error(n(300));e===null||_t||(e=e.dependencies,e!==null&&el(e)&&(_t=!0))}function Yh(e,s,i,c){Ee=e;var d=0;do{if(Nr&&(Cr=null),qn=0,Nr=!1,25<=d)throw Error(n(301));if(d+=1,mt=Ye=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}T.H=Ay,f=s(i,c)}while(Nr);return f}function Ny(){var e=T.H,s=e.useState()[0];return s=typeof s.then=="function"?Ln(s):s,e=e.useState()[0],(Ye!==null?Ye.memoizedState:null)!==e&&(Ee.flags|=1024),s}function yc(){var e=ll!==0;return ll=0,e}function vc(e,s,i){s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~i}function bc(e){if(il){for(e=e.memoizedState;e!==null;){var s=e.queue;s!==null&&(s.pending=null),e=e.next}il=!1}cs=0,mt=Ye=Ee=null,Nr=!1,qn=ll=0,Cr=null}function zt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?Ee.memoizedState=mt=e:mt=mt.next=e,mt}function gt(){if(Ye===null){var e=Ee.alternate;e=e!==null?e.memoizedState:null}else e=Ye.next;var s=mt===null?Ee.memoizedState:mt.next;if(s!==null)mt=s,Ye=e;else{if(e===null)throw Ee.alternate===null?Error(n(467)):Error(n(310));Ye=e,e={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},mt===null?Ee.memoizedState=mt=e:mt=mt.next=e}return mt}function xc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ln(e){var s=qn;return qn+=1,Cr===null&&(Cr=[]),e=Lh(Cr,e,s),s=Ee,(mt===null?s.memoizedState:mt.next)===null&&(s=s.alternate,T.H=s===null||s.memoizedState===null?Cf:Ef),e}function ol(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ln(e);if(e.$$typeof===q)return Ut(e)}throw Error(n(438,String(e)))}function wc(e){var s=null,i=Ee.updateQueue;if(i!==null&&(s=i.memoCache),s==null){var c=Ee.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),i===null&&(i=xc(),Ee.updateQueue=i),i.memoCache=s,i=s.data[s.index],i===void 0)for(i=s.data[s.index]=Array(e),c=0;c<e;c++)i[c]=R;return s.index++,i}function Ya(e,s){return typeof s=="function"?s(e):s}function cl(e){var s=gt();return jc(s,Ye,e)}function jc(e,s,i){var c=e.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=i;var d=e.baseQueue,f=c.pending;if(f!==null){if(d!==null){var v=d.next;d.next=f.next,f.next=v}s.baseQueue=d=f,c.pending=null}if(f=e.baseState,d===null)e.memoizedState=f;else{s=d.next;var w=v=null,O=null,I=s,Z=!1;do{var re=I.lane&-536870913;if(re!==I.lane?(Me&re)===re:(cs&re)===re){var H=I.revertLane;if(H===0)O!==null&&(O=O.next={lane:0,revertLane:0,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),re===jr&&(Z=!0);else if((cs&H)===H){I=I.next,H===jr&&(Z=!0);continue}else re={lane:0,revertLane:I.revertLane,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null},O===null?(w=O=re,v=f):O=O.next=re,Ee.lanes|=H,ps|=H;re=I.action,Ys&&i(f,re),f=I.hasEagerState?I.eagerState:i(f,re)}else H={lane:re,revertLane:I.revertLane,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null},O===null?(w=O=H,v=f):O=O.next=H,Ee.lanes|=re,ps|=re;I=I.next}while(I!==null&&I!==s);if(O===null?v=f:O.next=w,!Vt(f,e.memoizedState)&&(_t=!0,Z&&(i=Sr,i!==null)))throw i;e.memoizedState=f,e.baseState=v,e.baseQueue=O,c.lastRenderedState=f}return d===null&&(c.lanes=0),[e.memoizedState,c.dispatch]}function Sc(e){var s=gt(),i=s.queue;if(i===null)throw Error(n(311));i.lastRenderedReducer=e;var c=i.dispatch,d=i.pending,f=s.memoizedState;if(d!==null){i.pending=null;var v=d=d.next;do f=e(f,v.action),v=v.next;while(v!==d);Vt(f,s.memoizedState)||(_t=!0),s.memoizedState=f,s.baseQueue===null&&(s.baseState=f),i.lastRenderedState=f}return[f,c]}function Vh(e,s,i){var c=Ee,d=gt(),f=Le;if(f){if(i===void 0)throw Error(n(407));i=i()}else i=s();var v=!Vt((Ye||d).memoizedState,i);v&&(d.memoizedState=i,_t=!0),d=d.queue;var w=Fh.bind(null,c,d,e);if($n(2048,8,w,[e]),d.getSnapshot!==s||v||mt!==null&&mt.memoizedState.tag&1){if(c.flags|=2048,Er(9,ul(),Gh.bind(null,c,d,i,s),null),Ke===null)throw Error(n(349));f||(cs&124)!==0||Qh(c,s,i)}return i}function Qh(e,s,i){e.flags|=16384,e={getSnapshot:s,value:i},s=Ee.updateQueue,s===null?(s=xc(),Ee.updateQueue=s,s.stores=[e]):(i=s.stores,i===null?s.stores=[e]:i.push(e))}function Gh(e,s,i,c){s.value=i,s.getSnapshot=c,Kh(s)&&Xh(e)}function Fh(e,s,i){return i(function(){Kh(s)&&Xh(e)})}function Kh(e){var s=e.getSnapshot;e=e.value;try{var i=s();return!Vt(e,i)}catch(c){return!0}}function Xh(e){var s=vr(e,2);s!==null&&Wt(s,e,2)}function _c(e){var s=zt();if(typeof e=="function"){var i=e;if(e=i(),Ys){jt(!0);try{i()}finally{jt(!1)}}}return s.memoizedState=s.baseState=e,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:e},s}function Wh(e,s,i,c){return e.baseState=i,jc(e,Ye,typeof c=="function"?c:Ya)}function Cy(e,s,i,c,d){if(hl(e))throw Error(n(485));if(e=s.action,e!==null){var f={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};T.T!==null?i(!0):f.isTransition=!1,c(f),i=s.pending,i===null?(f.next=s.pending=f,Jh(s,f)):(f.next=i.next,s.pending=i.next=f)}}function Jh(e,s){var i=s.action,c=s.payload,d=e.state;if(s.isTransition){var f=T.T,v={};T.T=v;try{var w=i(d,c),O=T.S;O!==null&&O(v,w),Zh(e,s,w)}catch(I){Nc(e,s,I)}finally{T.T=f}}else try{f=i(d,c),Zh(e,s,f)}catch(I){Nc(e,s,I)}}function Zh(e,s,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(c){ef(e,s,c)},function(c){return Nc(e,s,c)}):ef(e,s,i)}function ef(e,s,i){s.status="fulfilled",s.value=i,tf(s),e.state=i,s=e.pending,s!==null&&(i=s.next,i===s?e.pending=null:(i=i.next,s.next=i,Jh(e,i)))}function Nc(e,s,i){var c=e.pending;if(e.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=i,tf(s),s=s.next;while(s!==c)}e.action=null}function tf(e){e=e.listeners;for(var s=0;s<e.length;s++)(0,e[s])()}function af(e,s){return s}function sf(e,s){if(Le){var i=Ke.formState;if(i!==null){e:{var c=Ee;if(Le){if(nt){t:{for(var d=nt,f=Na;d.nodeType!==8;){if(!f){d=null;break t}if(d=ba(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){nt=ba(d.nextSibling),c=d.data==="F!";break e}}Bs(c)}c=!1}c&&(s=i[0])}}return i=zt(),i.memoizedState=i.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:af,lastRenderedState:s},i.queue=c,i=Sf.bind(null,Ee,c),c.dispatch=i,c=_c(!1),f=Oc.bind(null,Ee,!1,c.queue),c=zt(),d={state:s,dispatch:null,action:e,pending:null},c.queue=d,i=Cy.bind(null,Ee,d,f,i),d.dispatch=i,c.memoizedState=e,[s,i,!1]}function rf(e){var s=gt();return nf(s,Ye,e)}function nf(e,s,i){if(s=jc(e,s,af)[0],e=cl(Ya)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=Ln(s)}catch(v){throw v===An?sl:v}else c=s;s=gt();var d=s.queue,f=d.dispatch;return i!==s.memoizedState&&(Ee.flags|=2048,Er(9,ul(),Ey.bind(null,d,i),null)),[c,f,e]}function Ey(e,s){e.action=s}function lf(e){var s=gt(),i=Ye;if(i!==null)return nf(s,i,e);gt(),s=s.memoizedState,i=gt();var c=i.queue.dispatch;return i.memoizedState=e,[s,c,!1]}function Er(e,s,i,c){return e={tag:e,create:i,deps:c,inst:s,next:null},s=Ee.updateQueue,s===null&&(s=xc(),Ee.updateQueue=s),i=s.lastEffect,i===null?s.lastEffect=e.next=e:(c=i.next,i.next=e,e.next=c,s.lastEffect=e),e}function ul(){return{destroy:void 0,resource:void 0}}function of(){return gt().memoizedState}function dl(e,s,i,c){var d=zt();c=c===void 0?null:c,Ee.flags|=e,d.memoizedState=Er(1|s,ul(),i,c)}function $n(e,s,i,c){var d=gt();c=c===void 0?null:c;var f=d.memoizedState.inst;Ye!==null&&c!==null&&gc(c,Ye.memoizedState.deps)?d.memoizedState=Er(s,f,i,c):(Ee.flags|=e,d.memoizedState=Er(1|s,f,i,c))}function cf(e,s){dl(8390656,8,e,s)}function uf(e,s){$n(2048,8,e,s)}function df(e,s){return $n(4,2,e,s)}function hf(e,s){return $n(4,4,e,s)}function ff(e,s){if(typeof s=="function"){e=e();var i=s(e);return function(){typeof i=="function"?i():s(null)}}if(s!=null)return e=e(),s.current=e,function(){s.current=null}}function mf(e,s,i){i=i!=null?i.concat([e]):null,$n(4,4,ff.bind(null,s,e),i)}function Cc(){}function gf(e,s){var i=gt();s=s===void 0?null:s;var c=i.memoizedState;return s!==null&&gc(s,c[1])?c[0]:(i.memoizedState=[e,s],e)}function pf(e,s){var i=gt();s=s===void 0?null:s;var c=i.memoizedState;if(s!==null&&gc(s,c[1]))return c[0];if(c=e(),Ys){jt(!0);try{e()}finally{jt(!1)}}return i.memoizedState=[c,s],c}function Ec(e,s,i){return i===void 0||(cs&1073741824)!==0?e.memoizedState=s:(e.memoizedState=i,e=bm(),Ee.lanes|=e,ps|=e,i)}function yf(e,s,i,c){return Vt(i,s)?i:_r.current!==null?(e=Ec(e,i,c),Vt(e,s)||(_t=!0),e):(cs&42)===0?(_t=!0,e.memoizedState=i):(e=bm(),Ee.lanes|=e,ps|=e,s)}function vf(e,s,i,c,d){var f=Q.p;Q.p=f!==0&&8>f?f:8;var v=T.T,w={};T.T=w,Oc(e,!1,s,i);try{var O=d(),I=T.S;if(I!==null&&I(w,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var Z=Sy(O,c);zn(e,s,Z,Xt(e))}else zn(e,s,c,Xt(e))}catch(re){zn(e,s,{then:function(){},status:"rejected",reason:re},Xt())}finally{Q.p=f,T.T=v}}function Ty(){}function Tc(e,s,i,c){if(e.tag!==5)throw Error(n(476));var d=bf(e).queue;vf(e,d,s,J,i===null?Ty:function(){return xf(e),i(c)})}function bf(e){var s=e.memoizedState;if(s!==null)return s;s={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:J},next:null};var i={};return s.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:i},next:null},e.memoizedState=s,e=e.alternate,e!==null&&(e.memoizedState=s),s}function xf(e){var s=bf(e).next.queue;zn(e,s,{},Xt())}function Dc(){return Ut(si)}function wf(){return gt().memoizedState}function jf(){return gt().memoizedState}function Dy(e){for(var s=e.return;s!==null;){switch(s.tag){case 24:case 3:var i=Xt();e=ls(i);var c=os(s,e,i);c!==null&&(Wt(c,s,i),Rn(c,s,i)),s={cache:nc()},e.payload=s;return}s=s.return}}function Oy(e,s,i){var c=Xt();i={lane:c,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},hl(e)?_f(s,i):(i=Ko(e,s,i,c),i!==null&&(Wt(i,e,c),Nf(i,s,c)))}function Sf(e,s,i){var c=Xt();zn(e,s,i,c)}function zn(e,s,i,c){var d={lane:c,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(hl(e))_f(s,d);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=s.lastRenderedReducer,f!==null))try{var v=s.lastRenderedState,w=f(v,i);if(d.hasEagerState=!0,d.eagerState=w,Vt(w,v))return Ki(e,s,d,0),Ke===null&&Fi(),!1}catch(O){}finally{}if(i=Ko(e,s,d,c),i!==null)return Wt(i,e,c),Nf(i,s,c),!0}return!1}function Oc(e,s,i,c){if(c={lane:2,revertLane:ou(),action:c,hasEagerState:!1,eagerState:null,next:null},hl(e)){if(s)throw Error(n(479))}else s=Ko(e,i,c,2),s!==null&&Wt(s,e,2)}function hl(e){var s=e.alternate;return e===Ee||s!==null&&s===Ee}function _f(e,s){Nr=il=!0;var i=e.pending;i===null?s.next=s:(s.next=i.next,i.next=s),e.pending=s}function Nf(e,s,i){if((i&4194048)!==0){var c=s.lanes;c&=e.pendingLanes,i|=c,s.lanes=i,kd(e,i)}}var fl={readContext:Ut,use:ol,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useLayoutEffect:ut,useInsertionEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useSyncExternalStore:ut,useId:ut,useHostTransitionStatus:ut,useFormState:ut,useActionState:ut,useOptimistic:ut,useMemoCache:ut,useCacheRefresh:ut},Cf={readContext:Ut,use:ol,useCallback:function(e,s){return zt().memoizedState=[e,s===void 0?null:s],e},useContext:Ut,useEffect:cf,useImperativeHandle:function(e,s,i){i=i!=null?i.concat([e]):null,dl(4194308,4,ff.bind(null,s,e),i)},useLayoutEffect:function(e,s){return dl(4194308,4,e,s)},useInsertionEffect:function(e,s){dl(4,2,e,s)},useMemo:function(e,s){var i=zt();s=s===void 0?null:s;var c=e();if(Ys){jt(!0);try{e()}finally{jt(!1)}}return i.memoizedState=[c,s],c},useReducer:function(e,s,i){var c=zt();if(i!==void 0){var d=i(s);if(Ys){jt(!0);try{i(s)}finally{jt(!1)}}}else d=s;return c.memoizedState=c.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},c.queue=e,e=e.dispatch=Oy.bind(null,Ee,e),[c.memoizedState,e]},useRef:function(e){var s=zt();return e={current:e},s.memoizedState=e},useState:function(e){e=_c(e);var s=e.queue,i=Sf.bind(null,Ee,s);return s.dispatch=i,[e.memoizedState,i]},useDebugValue:Cc,useDeferredValue:function(e,s){var i=zt();return Ec(i,e,s)},useTransition:function(){var e=_c(!1);return e=vf.bind(null,Ee,e.queue,!0,!1),zt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,s,i){var c=Ee,d=zt();if(Le){if(i===void 0)throw Error(n(407));i=i()}else{if(i=s(),Ke===null)throw Error(n(349));(Me&124)!==0||Qh(c,s,i)}d.memoizedState=i;var f={value:i,getSnapshot:s};return d.queue=f,cf(Fh.bind(null,c,f,e),[e]),c.flags|=2048,Er(9,ul(),Gh.bind(null,c,f,i,s),null),i},useId:function(){var e=zt(),s=Ke.identifierPrefix;if(Le){var i=Pa,c=Ba;i=(c&~(1<<32-Tt(c)-1)).toString(32)+i,s=""+s+"R"+i,i=ll++,0<i&&(s+="H"+i.toString(32)),s+=""}else i=_y++,s=""+s+"r"+i.toString(32)+"";return e.memoizedState=s},useHostTransitionStatus:Dc,useFormState:sf,useActionState:sf,useOptimistic:function(e){var s=zt();s.memoizedState=s.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=i,s=Oc.bind(null,Ee,!0,i),i.dispatch=s,[e,s]},useMemoCache:wc,useCacheRefresh:function(){return zt().memoizedState=Dy.bind(null,Ee)}},Ef={readContext:Ut,use:ol,useCallback:gf,useContext:Ut,useEffect:uf,useImperativeHandle:mf,useInsertionEffect:df,useLayoutEffect:hf,useMemo:pf,useReducer:cl,useRef:of,useState:function(){return cl(Ya)},useDebugValue:Cc,useDeferredValue:function(e,s){var i=gt();return yf(i,Ye.memoizedState,e,s)},useTransition:function(){var e=cl(Ya)[0],s=gt().memoizedState;return[typeof e=="boolean"?e:Ln(e),s]},useSyncExternalStore:Vh,useId:wf,useHostTransitionStatus:Dc,useFormState:rf,useActionState:rf,useOptimistic:function(e,s){var i=gt();return Wh(i,Ye,e,s)},useMemoCache:wc,useCacheRefresh:jf},Ay={readContext:Ut,use:ol,useCallback:gf,useContext:Ut,useEffect:uf,useImperativeHandle:mf,useInsertionEffect:df,useLayoutEffect:hf,useMemo:pf,useReducer:Sc,useRef:of,useState:function(){return Sc(Ya)},useDebugValue:Cc,useDeferredValue:function(e,s){var i=gt();return Ye===null?Ec(i,e,s):yf(i,Ye.memoizedState,e,s)},useTransition:function(){var e=Sc(Ya)[0],s=gt().memoizedState;return[typeof e=="boolean"?e:Ln(e),s]},useSyncExternalStore:Vh,useId:wf,useHostTransitionStatus:Dc,useFormState:lf,useActionState:lf,useOptimistic:function(e,s){var i=gt();return Ye!==null?Wh(i,Ye,e,s):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:wc,useCacheRefresh:jf},Tr=null,Bn=0;function ml(e){var s=Bn;return Bn+=1,Tr===null&&(Tr=[]),Lh(Tr,e,s)}function Pn(e,s){s=s.props.ref,e.ref=s!==void 0?s:null}function gl(e,s){throw s.$$typeof===x?Error(n(525)):(e=Object.prototype.toString.call(s),Error(n(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e)))}function Tf(e){var s=e._init;return s(e._payload)}function Df(e){function s($,M){if(e){var P=$.deletions;P===null?($.deletions=[M],$.flags|=16):P.push(M)}}function i($,M){if(!e)return null;for(;M!==null;)s($,M),M=M.sibling;return null}function c($){for(var M=new Map;$!==null;)$.key!==null?M.set($.key,$):M.set($.index,$),$=$.sibling;return M}function d($,M){return $=za($,M),$.index=0,$.sibling=null,$}function f($,M,P){return $.index=P,e?(P=$.alternate,P!==null?(P=P.index,P<M?($.flags|=67108866,M):P):($.flags|=67108866,M)):($.flags|=1048576,M)}function v($){return e&&$.alternate===null&&($.flags|=67108866),$}function w($,M,P,ee){return M===null||M.tag!==6?(M=Wo(P,$.mode,ee),M.return=$,M):(M=d(M,P),M.return=$,M)}function O($,M,P,ee){var fe=P.type;return fe===N?Z($,M,P.props.children,ee,P.key):M!==null&&(M.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===C&&Tf(fe)===M.type)?(M=d(M,P.props),Pn(M,P),M.return=$,M):(M=Wi(P.type,P.key,P.props,null,$.mode,ee),Pn(M,P),M.return=$,M)}function I($,M,P,ee){return M===null||M.tag!==4||M.stateNode.containerInfo!==P.containerInfo||M.stateNode.implementation!==P.implementation?(M=Jo(P,$.mode,ee),M.return=$,M):(M=d(M,P.children||[]),M.return=$,M)}function Z($,M,P,ee,fe){return M===null||M.tag!==7?(M=qs(P,$.mode,ee,fe),M.return=$,M):(M=d(M,P),M.return=$,M)}function re($,M,P){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=Wo(""+M,$.mode,P),M.return=$,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case b:return P=Wi(M.type,M.key,M.props,null,$.mode,P),Pn(P,M),P.return=$,P;case j:return M=Jo(M,$.mode,P),M.return=$,M;case C:var ee=M._init;return M=ee(M._payload),re($,M,P)}if(ge(M)||K(M))return M=qs(M,$.mode,P,null),M.return=$,M;if(typeof M.then=="function")return re($,ml(M),P);if(M.$$typeof===q)return re($,tl($,M),P);gl($,M)}return null}function H($,M,P,ee){var fe=M!==null?M.key:null;if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return fe!==null?null:w($,M,""+P,ee);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case b:return P.key===fe?O($,M,P,ee):null;case j:return P.key===fe?I($,M,P,ee):null;case C:return fe=P._init,P=fe(P._payload),H($,M,P,ee)}if(ge(P)||K(P))return fe!==null?null:Z($,M,P,ee,null);if(typeof P.then=="function")return H($,M,ml(P),ee);if(P.$$typeof===q)return H($,M,tl($,P),ee);gl($,P)}return null}function Y($,M,P,ee,fe){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return $=$.get(P)||null,w(M,$,""+ee,fe);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case b:return $=$.get(ee.key===null?P:ee.key)||null,O(M,$,ee,fe);case j:return $=$.get(ee.key===null?P:ee.key)||null,I(M,$,ee,fe);case C:var Te=ee._init;return ee=Te(ee._payload),Y($,M,P,ee,fe)}if(ge(ee)||K(ee))return $=$.get(P)||null,Z(M,$,ee,fe,null);if(typeof ee.then=="function")return Y($,M,P,ml(ee),fe);if(ee.$$typeof===q)return Y($,M,P,tl(M,ee),fe);gl(M,ee)}return null}function Se($,M,P,ee){for(var fe=null,Te=null,ye=M,xe=M=0,Ct=null;ye!==null&&xe<P.length;xe++){ye.index>xe?(Ct=ye,ye=null):Ct=ye.sibling;var qe=H($,ye,P[xe],ee);if(qe===null){ye===null&&(ye=Ct);break}e&&ye&&qe.alternate===null&&s($,ye),M=f(qe,M,xe),Te===null?fe=qe:Te.sibling=qe,Te=qe,ye=Ct}if(xe===P.length)return i($,ye),Le&&$s($,xe),fe;if(ye===null){for(;xe<P.length;xe++)ye=re($,P[xe],ee),ye!==null&&(M=f(ye,M,xe),Te===null?fe=ye:Te.sibling=ye,Te=ye);return Le&&$s($,xe),fe}for(ye=c(ye);xe<P.length;xe++)Ct=Y(ye,$,xe,P[xe],ee),Ct!==null&&(e&&Ct.alternate!==null&&ye.delete(Ct.key===null?xe:Ct.key),M=f(Ct,M,xe),Te===null?fe=Ct:Te.sibling=Ct,Te=Ct);return e&&ye.forEach(function(Ns){return s($,Ns)}),Le&&$s($,xe),fe}function ve($,M,P,ee){if(P==null)throw Error(n(151));for(var fe=null,Te=null,ye=M,xe=M=0,Ct=null,qe=P.next();ye!==null&&!qe.done;xe++,qe=P.next()){ye.index>xe?(Ct=ye,ye=null):Ct=ye.sibling;var Ns=H($,ye,qe.value,ee);if(Ns===null){ye===null&&(ye=Ct);break}e&&ye&&Ns.alternate===null&&s($,ye),M=f(Ns,M,xe),Te===null?fe=Ns:Te.sibling=Ns,Te=Ns,ye=Ct}if(qe.done)return i($,ye),Le&&$s($,xe),fe;if(ye===null){for(;!qe.done;xe++,qe=P.next())qe=re($,qe.value,ee),qe!==null&&(M=f(qe,M,xe),Te===null?fe=qe:Te.sibling=qe,Te=qe);return Le&&$s($,xe),fe}for(ye=c(ye);!qe.done;xe++,qe=P.next())qe=Y(ye,$,xe,qe.value,ee),qe!==null&&(e&&qe.alternate!==null&&ye.delete(qe.key===null?xe:qe.key),M=f(qe,M,xe),Te===null?fe=qe:Te.sibling=qe,Te=qe);return e&&ye.forEach(function(kv){return s($,kv)}),Le&&$s($,xe),fe}function Qe($,M,P,ee){if(typeof P=="object"&&P!==null&&P.type===N&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case b:e:{for(var fe=P.key;M!==null;){if(M.key===fe){if(fe=P.type,fe===N){if(M.tag===7){i($,M.sibling),ee=d(M,P.props.children),ee.return=$,$=ee;break e}}else if(M.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===C&&Tf(fe)===M.type){i($,M.sibling),ee=d(M,P.props),Pn(ee,P),ee.return=$,$=ee;break e}i($,M);break}else s($,M);M=M.sibling}P.type===N?(ee=qs(P.props.children,$.mode,ee,P.key),ee.return=$,$=ee):(ee=Wi(P.type,P.key,P.props,null,$.mode,ee),Pn(ee,P),ee.return=$,$=ee)}return v($);case j:e:{for(fe=P.key;M!==null;){if(M.key===fe)if(M.tag===4&&M.stateNode.containerInfo===P.containerInfo&&M.stateNode.implementation===P.implementation){i($,M.sibling),ee=d(M,P.children||[]),ee.return=$,$=ee;break e}else{i($,M);break}else s($,M);M=M.sibling}ee=Jo(P,$.mode,ee),ee.return=$,$=ee}return v($);case C:return fe=P._init,P=fe(P._payload),Qe($,M,P,ee)}if(ge(P))return Se($,M,P,ee);if(K(P)){if(fe=K(P),typeof fe!="function")throw Error(n(150));return P=fe.call(P),ve($,M,P,ee)}if(typeof P.then=="function")return Qe($,M,ml(P),ee);if(P.$$typeof===q)return Qe($,M,tl($,P),ee);gl($,P)}return typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint"?(P=""+P,M!==null&&M.tag===6?(i($,M.sibling),ee=d(M,P),ee.return=$,$=ee):(i($,M),ee=Wo(P,$.mode,ee),ee.return=$,$=ee),v($)):i($,M)}return function($,M,P,ee){try{Bn=0;var fe=Qe($,M,P,ee);return Tr=null,fe}catch(ye){if(ye===An||ye===sl)throw ye;var Te=Qt(29,ye,null,$.mode);return Te.lanes=ee,Te.return=$,Te}finally{}}}var Dr=Df(!0),Of=Df(!1),da=ae(null),Ca=null;function us(e){var s=e.alternate;se(bt,bt.current&1),se(da,e),Ca===null&&(s===null||_r.current!==null||s.memoizedState!==null)&&(Ca=e)}function Af(e){if(e.tag===22){if(se(bt,bt.current),se(da,e),Ca===null){var s=e.alternate;s!==null&&s.memoizedState!==null&&(Ca=e)}}else ds()}function ds(){se(bt,bt.current),se(da,da.current)}function Va(e){ne(da),Ca===e&&(Ca=null),ne(bt)}var bt=ae(0);function pl(e){for(var s=e;s!==null;){if(s.tag===13){var i=s.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||xu(i)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Ac(e,s,i,c){s=e.memoizedState,i=i(c,s),i=i==null?s:y({},s,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var kc={enqueueSetState:function(e,s,i){e=e._reactInternals;var c=Xt(),d=ls(c);d.payload=s,i!=null&&(d.callback=i),s=os(e,d,c),s!==null&&(Wt(s,e,c),Rn(s,e,c))},enqueueReplaceState:function(e,s,i){e=e._reactInternals;var c=Xt(),d=ls(c);d.tag=1,d.payload=s,i!=null&&(d.callback=i),s=os(e,d,c),s!==null&&(Wt(s,e,c),Rn(s,e,c))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var i=Xt(),c=ls(i);c.tag=2,s!=null&&(c.callback=s),s=os(e,c,i),s!==null&&(Wt(s,e,i),Rn(s,e,i))}};function kf(e,s,i,c,d,f,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,f,v):s.prototype&&s.prototype.isPureReactComponent?!Sn(i,c)||!Sn(d,f):!0}function Rf(e,s,i,c){e=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(i,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(i,c),s.state!==e&&kc.enqueueReplaceState(s,s.state,null)}function Vs(e,s){var i=s;if("ref"in s){i={};for(var c in s)c!=="ref"&&(i[c]=s[c])}if(e=e.defaultProps){i===s&&(i=y({},i));for(var d in e)i[d]===void 0&&(i[d]=e[d])}return i}var yl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Mf(e){yl(e)}function Uf(e){console.error(e)}function qf(e){yl(e)}function vl(e,s){try{var i=e.onUncaughtError;i(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function Lf(e,s,i){try{var c=e.onCaughtError;c(i.value,{componentStack:i.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Rc(e,s,i){return i=ls(i),i.tag=3,i.payload={element:null},i.callback=function(){vl(e,s)},i}function $f(e){return e=ls(e),e.tag=3,e}function zf(e,s,i,c){var d=i.type.getDerivedStateFromError;if(typeof d=="function"){var f=c.value;e.payload=function(){return d(f)},e.callback=function(){Lf(s,i,c)}}var v=i.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Lf(s,i,c),typeof d!="function"&&(ys===null?ys=new Set([this]):ys.add(this));var w=c.stack;this.componentDidCatch(c.value,{componentStack:w!==null?w:""})})}function ky(e,s,i,c,d){if(i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=i.alternate,s!==null&&Tn(s,i,d,!0),i=da.current,i!==null){switch(i.tag){case 13:return Ca===null?su():i.alternate===null&&it===0&&(it=3),i.flags&=-257,i.flags|=65536,i.lanes=d,c===oc?i.flags|=16384:(s=i.updateQueue,s===null?i.updateQueue=new Set([c]):s.add(c),nu(e,c,d)),!1;case 22:return i.flags|=65536,c===oc?i.flags|=16384:(s=i.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},i.updateQueue=s):(i=s.retryQueue,i===null?s.retryQueue=new Set([c]):i.add(c)),nu(e,c,d)),!1}throw Error(n(435,i.tag))}return nu(e,c,d),su(),!1}if(Le)return s=da.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,c!==tc&&(e=Error(n(422),{cause:c}),En(la(e,i)))):(c!==tc&&(s=Error(n(423),{cause:c}),En(la(s,i))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,c=la(c,i),d=Rc(e.stateNode,c,d),dc(e,d),it!==4&&(it=2)),!1;var f=Error(n(520),{cause:c});if(f=la(f,i),Fn===null?Fn=[f]:Fn.push(f),it!==4&&(it=2),s===null)return!0;c=la(c,i),i=s;do{switch(i.tag){case 3:return i.flags|=65536,e=d&-d,i.lanes|=e,e=Rc(i.stateNode,c,e),dc(i,e),!1;case 1:if(s=i.type,f=i.stateNode,(i.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(ys===null||!ys.has(f))))return i.flags|=65536,d&=-d,i.lanes|=d,d=$f(d),zf(d,e,i,c),dc(i,d),!1}i=i.return}while(i!==null);return!1}var Bf=Error(n(461)),_t=!1;function Dt(e,s,i,c){s.child=e===null?Of(s,null,i,c):Dr(s,e.child,i,c)}function Pf(e,s,i,c,d){i=i.render;var f=s.ref;if("ref"in c){var v={};for(var w in c)w!=="ref"&&(v[w]=c[w])}else v=c;return Is(s),c=pc(e,s,i,v,f,d),w=yc(),e!==null&&!_t?(vc(e,s,d),Qa(e,s,d)):(Le&&w&&Zo(s),s.flags|=1,Dt(e,s,c,d),s.child)}function If(e,s,i,c,d){if(e===null){var f=i.type;return typeof f=="function"&&!Xo(f)&&f.defaultProps===void 0&&i.compare===null?(s.tag=15,s.type=f,Hf(e,s,f,c,d)):(e=Wi(i.type,null,c,s,s.mode,d),e.ref=s.ref,e.return=s,s.child=e)}if(f=e.child,!Pc(e,d)){var v=f.memoizedProps;if(i=i.compare,i=i!==null?i:Sn,i(v,c)&&e.ref===s.ref)return Qa(e,s,d)}return s.flags|=1,e=za(f,c),e.ref=s.ref,e.return=s,s.child=e}function Hf(e,s,i,c,d){if(e!==null){var f=e.memoizedProps;if(Sn(f,c)&&e.ref===s.ref)if(_t=!1,s.pendingProps=c=f,Pc(e,d))(e.flags&131072)!==0&&(_t=!0);else return s.lanes=e.lanes,Qa(e,s,d)}return Mc(e,s,i,c,d)}function Yf(e,s,i){var c=s.pendingProps,d=c.children,f=e!==null?e.memoizedState:null;if(c.mode==="hidden"){if((s.flags&128)!==0){if(c=f!==null?f.baseLanes|i:i,e!==null){for(d=s.child=e.child,f=0;d!==null;)f=f|d.lanes|d.childLanes,d=d.sibling;s.childLanes=f&~c}else s.childLanes=0,s.child=null;return Vf(e,s,c,i)}if((i&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},e!==null&&al(s,f!==null?f.cachePool:null),f!==null?Ih(s,f):fc(),Af(s);else return s.lanes=s.childLanes=536870912,Vf(e,s,f!==null?f.baseLanes|i:i,i)}else f!==null?(al(s,f.cachePool),Ih(s,f),ds(),s.memoizedState=null):(e!==null&&al(s,null),fc(),ds());return Dt(e,s,d,i),s.child}function Vf(e,s,i,c){var d=lc();return d=d===null?null:{parent:vt._currentValue,pool:d},s.memoizedState={baseLanes:i,cachePool:d},e!==null&&al(s,null),fc(),Af(s),e!==null&&Tn(e,s,c,!0),null}function bl(e,s){var i=s.ref;if(i===null)e!==null&&e.ref!==null&&(s.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(n(284));(e===null||e.ref!==i)&&(s.flags|=4194816)}}function Mc(e,s,i,c,d){return Is(s),i=pc(e,s,i,c,void 0,d),c=yc(),e!==null&&!_t?(vc(e,s,d),Qa(e,s,d)):(Le&&c&&Zo(s),s.flags|=1,Dt(e,s,i,d),s.child)}function Qf(e,s,i,c,d,f){return Is(s),s.updateQueue=null,i=Yh(s,c,i,d),Hh(e),c=yc(),e!==null&&!_t?(vc(e,s,f),Qa(e,s,f)):(Le&&c&&Zo(s),s.flags|=1,Dt(e,s,i,f),s.child)}function Gf(e,s,i,c,d){if(Is(s),s.stateNode===null){var f=br,v=i.contextType;typeof v=="object"&&v!==null&&(f=Ut(v)),f=new i(c,f),s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=kc,s.stateNode=f,f._reactInternals=s,f=s.stateNode,f.props=c,f.state=s.memoizedState,f.refs={},cc(s),v=i.contextType,f.context=typeof v=="object"&&v!==null?Ut(v):br,f.state=s.memoizedState,v=i.getDerivedStateFromProps,typeof v=="function"&&(Ac(s,i,v,c),f.state=s.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&kc.enqueueReplaceState(f,f.state,null),Un(s,c,f,d),Mn(),f.state=s.memoizedState),typeof f.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(e===null){f=s.stateNode;var w=s.memoizedProps,O=Vs(i,w);f.props=O;var I=f.context,Z=i.contextType;v=br,typeof Z=="object"&&Z!==null&&(v=Ut(Z));var re=i.getDerivedStateFromProps;Z=typeof re=="function"||typeof f.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,Z||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(w||I!==v)&&Rf(s,f,c,v),is=!1;var H=s.memoizedState;f.state=H,Un(s,c,f,d),Mn(),I=s.memoizedState,w||H!==I||is?(typeof re=="function"&&(Ac(s,i,re,c),I=s.memoizedState),(O=is||kf(s,i,O,c,H,I,v))?(Z||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(s.flags|=4194308)):(typeof f.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=I),f.props=c,f.state=I,f.context=v,c=O):(typeof f.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{f=s.stateNode,uc(e,s),v=s.memoizedProps,Z=Vs(i,v),f.props=Z,re=s.pendingProps,H=f.context,I=i.contextType,O=br,typeof I=="object"&&I!==null&&(O=Ut(I)),w=i.getDerivedStateFromProps,(I=typeof w=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==re||H!==O)&&Rf(s,f,c,O),is=!1,H=s.memoizedState,f.state=H,Un(s,c,f,d),Mn();var Y=s.memoizedState;v!==re||H!==Y||is||e!==null&&e.dependencies!==null&&el(e.dependencies)?(typeof w=="function"&&(Ac(s,i,w,c),Y=s.memoizedState),(Z=is||kf(s,i,Z,c,H,Y,O)||e!==null&&e.dependencies!==null&&el(e.dependencies))?(I||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(c,Y,O),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(c,Y,O)),typeof f.componentDidUpdate=="function"&&(s.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&H===e.memoizedState||(s.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&H===e.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=Y),f.props=c,f.state=Y,f.context=O,c=Z):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&H===e.memoizedState||(s.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&H===e.memoizedState||(s.flags|=1024),c=!1)}return f=c,bl(e,s),c=(s.flags&128)!==0,f||c?(f=s.stateNode,i=c&&typeof i.getDerivedStateFromError!="function"?null:f.render(),s.flags|=1,e!==null&&c?(s.child=Dr(s,e.child,null,d),s.child=Dr(s,null,i,d)):Dt(e,s,i,d),s.memoizedState=f.state,e=s.child):e=Qa(e,s,d),e}function Ff(e,s,i,c){return Cn(),s.flags|=256,Dt(e,s,i,c),s.child}var Uc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qc(e){return{baseLanes:e,cachePool:Mh()}}function Lc(e,s,i){return e=e!==null?e.childLanes&~i:0,s&&(e|=ha),e}function Kf(e,s,i){var c=s.pendingProps,d=!1,f=(s.flags&128)!==0,v;if((v=f)||(v=e!==null&&e.memoizedState===null?!1:(bt.current&2)!==0),v&&(d=!0,s.flags&=-129),v=(s.flags&32)!==0,s.flags&=-33,e===null){if(Le){if(d?us(s):ds(),Le){var w=nt,O;if(O=w){e:{for(O=w,w=Na;O.nodeType!==8;){if(!w){w=null;break e}if(O=ba(O.nextSibling),O===null){w=null;break e}}w=O}w!==null?(s.memoizedState={dehydrated:w,treeContext:Ls!==null?{id:Ba,overflow:Pa}:null,retryLane:536870912,hydrationErrors:null},O=Qt(18,null,null,0),O.stateNode=w,O.return=s,s.child=O,qt=s,nt=null,O=!0):O=!1}O||Bs(s)}if(w=s.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return xu(w)?s.lanes=32:s.lanes=536870912,null;Va(s)}return w=c.children,c=c.fallback,d?(ds(),d=s.mode,w=xl({mode:"hidden",children:w},d),c=qs(c,d,i,null),w.return=s,c.return=s,w.sibling=c,s.child=w,d=s.child,d.memoizedState=qc(i),d.childLanes=Lc(e,v,i),s.memoizedState=Uc,c):(us(s),$c(s,w))}if(O=e.memoizedState,O!==null&&(w=O.dehydrated,w!==null)){if(f)s.flags&256?(us(s),s.flags&=-257,s=zc(e,s,i)):s.memoizedState!==null?(ds(),s.child=e.child,s.flags|=128,s=null):(ds(),d=c.fallback,w=s.mode,c=xl({mode:"visible",children:c.children},w),d=qs(d,w,i,null),d.flags|=2,c.return=s,d.return=s,c.sibling=d,s.child=c,Dr(s,e.child,null,i),c=s.child,c.memoizedState=qc(i),c.childLanes=Lc(e,v,i),s.memoizedState=Uc,s=d);else if(us(s),xu(w)){if(v=w.nextSibling&&w.nextSibling.dataset,v)var I=v.dgst;v=I,c=Error(n(419)),c.stack="",c.digest=v,En({value:c,source:null,stack:null}),s=zc(e,s,i)}else if(_t||Tn(e,s,i,!1),v=(i&e.childLanes)!==0,_t||v){if(v=Ke,v!==null&&(c=i&-i,c=(c&42)!==0?1:wo(c),c=(c&(v.suspendedLanes|i))!==0?0:c,c!==0&&c!==O.retryLane))throw O.retryLane=c,vr(e,c),Wt(v,e,c),Bf;w.data==="$?"||su(),s=zc(e,s,i)}else w.data==="$?"?(s.flags|=192,s.child=e.child,s=null):(e=O.treeContext,nt=ba(w.nextSibling),qt=s,Le=!0,zs=null,Na=!1,e!==null&&(ca[ua++]=Ba,ca[ua++]=Pa,ca[ua++]=Ls,Ba=e.id,Pa=e.overflow,Ls=s),s=$c(s,c.children),s.flags|=4096);return s}return d?(ds(),d=c.fallback,w=s.mode,O=e.child,I=O.sibling,c=za(O,{mode:"hidden",children:c.children}),c.subtreeFlags=O.subtreeFlags&65011712,I!==null?d=za(I,d):(d=qs(d,w,i,null),d.flags|=2),d.return=s,c.return=s,c.sibling=d,s.child=c,c=d,d=s.child,w=e.child.memoizedState,w===null?w=qc(i):(O=w.cachePool,O!==null?(I=vt._currentValue,O=O.parent!==I?{parent:I,pool:I}:O):O=Mh(),w={baseLanes:w.baseLanes|i,cachePool:O}),d.memoizedState=w,d.childLanes=Lc(e,v,i),s.memoizedState=Uc,c):(us(s),i=e.child,e=i.sibling,i=za(i,{mode:"visible",children:c.children}),i.return=s,i.sibling=null,e!==null&&(v=s.deletions,v===null?(s.deletions=[e],s.flags|=16):v.push(e)),s.child=i,s.memoizedState=null,i)}function $c(e,s){return s=xl({mode:"visible",children:s},e.mode),s.return=e,e.child=s}function xl(e,s){return e=Qt(22,e,null,s),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function zc(e,s,i){return Dr(s,e.child,null,i),e=$c(s,s.pendingProps.children),e.flags|=2,s.memoizedState=null,e}function Xf(e,s,i){e.lanes|=s;var c=e.alternate;c!==null&&(c.lanes|=s),sc(e.return,s,i)}function Bc(e,s,i,c,d){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:i,tailMode:d}:(f.isBackwards=s,f.rendering=null,f.renderingStartTime=0,f.last=c,f.tail=i,f.tailMode=d)}function Wf(e,s,i){var c=s.pendingProps,d=c.revealOrder,f=c.tail;if(Dt(e,s,c.children,i),c=bt.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=s.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Xf(e,i,s);else if(e.tag===19)Xf(e,i,s);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break e;for(;e.sibling===null;){if(e.return===null||e.return===s)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}c&=1}switch(se(bt,c),d){case"forwards":for(i=s.child,d=null;i!==null;)e=i.alternate,e!==null&&pl(e)===null&&(d=i),i=i.sibling;i=d,i===null?(d=s.child,s.child=null):(d=i.sibling,i.sibling=null),Bc(s,!1,d,i,f);break;case"backwards":for(i=null,d=s.child,s.child=null;d!==null;){if(e=d.alternate,e!==null&&pl(e)===null){s.child=d;break}e=d.sibling,d.sibling=i,i=d,d=e}Bc(s,!0,i,null,f);break;case"together":Bc(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Qa(e,s,i){if(e!==null&&(s.dependencies=e.dependencies),ps|=s.lanes,(i&s.childLanes)===0)if(e!==null){if(Tn(e,s,i,!1),(i&s.childLanes)===0)return null}else return null;if(e!==null&&s.child!==e.child)throw Error(n(153));if(s.child!==null){for(e=s.child,i=za(e,e.pendingProps),s.child=i,i.return=s;e.sibling!==null;)e=e.sibling,i=i.sibling=za(e,e.pendingProps),i.return=s;i.sibling=null}return s.child}function Pc(e,s){return(e.lanes&s)!==0?!0:(e=e.dependencies,!!(e!==null&&el(e)))}function Ry(e,s,i){switch(s.tag){case 3:V(s,s.stateNode.containerInfo),ns(s,vt,e.memoizedState.cache),Cn();break;case 27:case 5:oe(s);break;case 4:V(s,s.stateNode.containerInfo);break;case 10:ns(s,s.type,s.memoizedProps.value);break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(us(s),s.flags|=128,null):(i&s.child.childLanes)!==0?Kf(e,s,i):(us(s),e=Qa(e,s,i),e!==null?e.sibling:null);us(s);break;case 19:var d=(e.flags&128)!==0;if(c=(i&s.childLanes)!==0,c||(Tn(e,s,i,!1),c=(i&s.childLanes)!==0),d){if(c)return Wf(e,s,i);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),se(bt,bt.current),c)break;return null;case 22:case 23:return s.lanes=0,Yf(e,s,i);case 24:ns(s,vt,e.memoizedState.cache)}return Qa(e,s,i)}function Jf(e,s,i){if(e!==null)if(e.memoizedProps!==s.pendingProps)_t=!0;else{if(!Pc(e,i)&&(s.flags&128)===0)return _t=!1,Ry(e,s,i);_t=(e.flags&131072)!==0}else _t=!1,Le&&(s.flags&1048576)!==0&&Eh(s,Zi,s.index);switch(s.lanes=0,s.tag){case 16:e:{e=s.pendingProps;var c=s.elementType,d=c._init;if(c=d(c._payload),s.type=c,typeof c=="function")Xo(c)?(e=Vs(c,e),s.tag=1,s=Gf(null,s,c,e,i)):(s.tag=0,s=Mc(null,s,c,e,i));else{if(c!=null){if(d=c.$$typeof,d===X){s.tag=11,s=Pf(null,s,c,e,i);break e}else if(d===ie){s.tag=14,s=If(null,s,c,e,i);break e}}throw s=he(c)||c,Error(n(306,s,""))}}return s;case 0:return Mc(e,s,s.type,s.pendingProps,i);case 1:return c=s.type,d=Vs(c,s.pendingProps),Gf(e,s,c,d,i);case 3:e:{if(V(s,s.stateNode.containerInfo),e===null)throw Error(n(387));c=s.pendingProps;var f=s.memoizedState;d=f.element,uc(e,s),Un(s,c,null,i);var v=s.memoizedState;if(c=v.cache,ns(s,vt,c),c!==f.cache&&rc(s,[vt],i,!0),Mn(),c=v.element,f.isDehydrated)if(f={element:c,isDehydrated:!1,cache:v.cache},s.updateQueue.baseState=f,s.memoizedState=f,s.flags&256){s=Ff(e,s,c,i);break e}else if(c!==d){d=la(Error(n(424)),s),En(d),s=Ff(e,s,c,i);break e}else{switch(e=s.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(nt=ba(e.firstChild),qt=s,Le=!0,zs=null,Na=!0,i=Of(s,null,c,i),s.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(Cn(),c===d){s=Qa(e,s,i);break e}Dt(e,s,c,i)}s=s.child}return s;case 26:return bl(e,s),e===null?(i=ag(s.type,null,s.pendingProps,null))?s.memoizedState=i:Le||(i=s.type,e=s.pendingProps,c=Ml(_e.current).createElement(i),c[Mt]=s,c[Lt]=e,At(c,i,e),St(c),s.stateNode=c):s.memoizedState=ag(s.type,e.memoizedProps,s.pendingProps,e.memoizedState),null;case 27:return oe(s),e===null&&Le&&(c=s.stateNode=Zm(s.type,s.pendingProps,_e.current),qt=s,Na=!0,d=nt,xs(s.type)?(wu=d,nt=ba(c.firstChild)):nt=d),Dt(e,s,s.pendingProps.children,i),bl(e,s),e===null&&(s.flags|=4194304),s.child;case 5:return e===null&&Le&&((d=c=nt)&&(c=lv(c,s.type,s.pendingProps,Na),c!==null?(s.stateNode=c,qt=s,nt=ba(c.firstChild),Na=!1,d=!0):d=!1),d||Bs(s)),oe(s),d=s.type,f=s.pendingProps,v=e!==null?e.memoizedProps:null,c=f.children,yu(d,f)?c=null:v!==null&&yu(d,v)&&(s.flags|=32),s.memoizedState!==null&&(d=pc(e,s,Ny,null,null,i),si._currentValue=d),bl(e,s),Dt(e,s,c,i),s.child;case 6:return e===null&&Le&&((e=i=nt)&&(i=ov(i,s.pendingProps,Na),i!==null?(s.stateNode=i,qt=s,nt=null,e=!0):e=!1),e||Bs(s)),null;case 13:return Kf(e,s,i);case 4:return V(s,s.stateNode.containerInfo),c=s.pendingProps,e===null?s.child=Dr(s,null,c,i):Dt(e,s,c,i),s.child;case 11:return Pf(e,s,s.type,s.pendingProps,i);case 7:return Dt(e,s,s.pendingProps,i),s.child;case 8:return Dt(e,s,s.pendingProps.children,i),s.child;case 12:return Dt(e,s,s.pendingProps.children,i),s.child;case 10:return c=s.pendingProps,ns(s,s.type,c.value),Dt(e,s,c.children,i),s.child;case 9:return d=s.type._context,c=s.pendingProps.children,Is(s),d=Ut(d),c=c(d),s.flags|=1,Dt(e,s,c,i),s.child;case 14:return If(e,s,s.type,s.pendingProps,i);case 15:return Hf(e,s,s.type,s.pendingProps,i);case 19:return Wf(e,s,i);case 31:return c=s.pendingProps,i=s.mode,c={mode:c.mode,children:c.children},e===null?(i=xl(c,i),i.ref=s.ref,s.child=i,i.return=s,s=i):(i=za(e.child,c),i.ref=s.ref,s.child=i,i.return=s,s=i),s;case 22:return Yf(e,s,i);case 24:return Is(s),c=Ut(vt),e===null?(d=lc(),d===null&&(d=Ke,f=nc(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=i),d=f),s.memoizedState={parent:c,cache:d},cc(s),ns(s,vt,d)):((e.lanes&i)!==0&&(uc(e,s),Un(s,null,null,i),Mn()),d=e.memoizedState,f=s.memoizedState,d.parent!==c?(d={parent:c,cache:c},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),ns(s,vt,c)):(c=f.cache,ns(s,vt,c),c!==d.cache&&rc(s,[vt],i,!0))),Dt(e,s,s.pendingProps.children,i),s.child;case 29:throw s.pendingProps}throw Error(n(156,s.tag))}function Ga(e){e.flags|=4}function Zf(e,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!lg(s)){if(s=da.current,s!==null&&((Me&4194048)===Me?Ca!==null:(Me&62914560)!==Me&&(Me&536870912)===0||s!==Ca))throw kn=oc,Uh;e.flags|=8192}}function wl(e,s){s!==null&&(e.flags|=4),e.flags&16384&&(s=e.tag!==22?Od():536870912,e.lanes|=s,Rr|=s)}function In(e,s){if(!Le)switch(e.tailMode){case"hidden":s=e.tail;for(var i=null;s!==null;)s.alternate!==null&&(i=s),s=s.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?s||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function Ze(e){var s=e.alternate!==null&&e.alternate.child===e.child,i=0,c=0;if(s)for(var d=e.child;d!==null;)i|=d.lanes|d.childLanes,c|=d.subtreeFlags&65011712,c|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)i|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=c,e.childLanes=i,s}function My(e,s,i){var c=s.pendingProps;switch(ec(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(s),null;case 1:return Ze(s),null;case 3:return i=s.stateNode,c=null,e!==null&&(c=e.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),Ha(vt),W(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Nn(s)?Ga(s):e===null||e.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Oh())),Ze(s),null;case 26:return i=s.memoizedState,e===null?(Ga(s),i!==null?(Ze(s),Zf(s,i)):(Ze(s),s.flags&=-16777217)):i?i!==e.memoizedState?(Ga(s),Ze(s),Zf(s,i)):(Ze(s),s.flags&=-16777217):(e.memoizedProps!==c&&Ga(s),Ze(s),s.flags&=-16777217),null;case 27:de(s),i=_e.current;var d=s.type;if(e!==null&&s.stateNode!=null)e.memoizedProps!==c&&Ga(s);else{if(!c){if(s.stateNode===null)throw Error(n(166));return Ze(s),null}e=me.current,Nn(s)?Th(s):(e=Zm(d,c,i),s.stateNode=e,Ga(s))}return Ze(s),null;case 5:if(de(s),i=s.type,e!==null&&s.stateNode!=null)e.memoizedProps!==c&&Ga(s);else{if(!c){if(s.stateNode===null)throw Error(n(166));return Ze(s),null}if(e=me.current,Nn(s))Th(s);else{switch(d=Ml(_e.current),e){case 1:e=d.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:e=d.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":e=d.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":e=d.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof c.is=="string"?d.createElement("select",{is:c.is}):d.createElement("select"),c.multiple?e.multiple=!0:c.size&&(e.size=c.size);break;default:e=typeof c.is=="string"?d.createElement(i,{is:c.is}):d.createElement(i)}}e[Mt]=s,e[Lt]=c;e:for(d=s.child;d!==null;){if(d.tag===5||d.tag===6)e.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break e;for(;d.sibling===null;){if(d.return===null||d.return===s)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}s.stateNode=e;e:switch(At(e,i,c),i){case"button":case"input":case"select":case"textarea":e=!!c.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ga(s)}}return Ze(s),s.flags&=-16777217,null;case 6:if(e&&s.stateNode!=null)e.memoizedProps!==c&&Ga(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(n(166));if(e=_e.current,Nn(s)){if(e=s.stateNode,i=s.memoizedProps,c=null,d=qt,d!==null)switch(d.tag){case 27:case 5:c=d.memoizedProps}e[Mt]=s,e=!!(e.nodeValue===i||c!==null&&c.suppressHydrationWarning===!0||Qm(e.nodeValue,i)),e||Bs(s)}else e=Ml(e).createTextNode(c),e[Mt]=s,s.stateNode=e}return Ze(s),null;case 13:if(c=s.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=Nn(s),c!==null&&c.dehydrated!==null){if(e===null){if(!d)throw Error(n(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(n(317));d[Mt]=s}else Cn(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ze(s),d=!1}else d=Oh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(Va(s),s):(Va(s),null)}if(Va(s),(s.flags&128)!==0)return s.lanes=i,s;if(i=c!==null,e=e!==null&&e.memoizedState!==null,i){c=s.child,d=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(d=c.alternate.memoizedState.cachePool.pool);var f=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(f=c.memoizedState.cachePool.pool),f!==d&&(c.flags|=2048)}return i!==e&&i&&(s.child.flags|=8192),wl(s,s.updateQueue),Ze(s),null;case 4:return W(),e===null&&hu(s.stateNode.containerInfo),Ze(s),null;case 10:return Ha(s.type),Ze(s),null;case 19:if(ne(bt),d=s.memoizedState,d===null)return Ze(s),null;if(c=(s.flags&128)!==0,f=d.rendering,f===null)if(c)In(d,!1);else{if(it!==0||e!==null&&(e.flags&128)!==0)for(e=s.child;e!==null;){if(f=pl(e),f!==null){for(s.flags|=128,In(d,!1),e=f.updateQueue,s.updateQueue=e,wl(s,e),s.subtreeFlags=0,e=i,i=s.child;i!==null;)Ch(i,e),i=i.sibling;return se(bt,bt.current&1|2),s.child}e=e.sibling}d.tail!==null&&rt()>_l&&(s.flags|=128,c=!0,In(d,!1),s.lanes=4194304)}else{if(!c)if(e=pl(f),e!==null){if(s.flags|=128,c=!0,e=e.updateQueue,s.updateQueue=e,wl(s,e),In(d,!0),d.tail===null&&d.tailMode==="hidden"&&!f.alternate&&!Le)return Ze(s),null}else 2*rt()-d.renderingStartTime>_l&&i!==536870912&&(s.flags|=128,c=!0,In(d,!1),s.lanes=4194304);d.isBackwards?(f.sibling=s.child,s.child=f):(e=d.last,e!==null?e.sibling=f:s.child=f,d.last=f)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=rt(),s.sibling=null,e=bt.current,se(bt,c?e&1|2:e&1),s):(Ze(s),null);case 22:case 23:return Va(s),mc(),c=s.memoizedState!==null,e!==null?e.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(i&536870912)!==0&&(s.flags&128)===0&&(Ze(s),s.subtreeFlags&6&&(s.flags|=8192)):Ze(s),i=s.updateQueue,i!==null&&wl(s,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==i&&(s.flags|=2048),e!==null&&ne(Hs),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),s.memoizedState.cache!==i&&(s.flags|=2048),Ha(vt),Ze(s),null;case 25:return null;case 30:return null}throw Error(n(156,s.tag))}function Uy(e,s){switch(ec(s),s.tag){case 1:return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 3:return Ha(vt),W(),e=s.flags,(e&65536)!==0&&(e&128)===0?(s.flags=e&-65537|128,s):null;case 26:case 27:case 5:return de(s),null;case 13:if(Va(s),e=s.memoizedState,e!==null&&e.dehydrated!==null){if(s.alternate===null)throw Error(n(340));Cn()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 19:return ne(bt),null;case 4:return W(),null;case 10:return Ha(s.type),null;case 22:case 23:return Va(s),mc(),e!==null&&ne(Hs),e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 24:return Ha(vt),null;case 25:return null;default:return null}}function em(e,s){switch(ec(s),s.tag){case 3:Ha(vt),W();break;case 26:case 27:case 5:de(s);break;case 4:W();break;case 13:Va(s);break;case 19:ne(bt);break;case 10:Ha(s.type);break;case 22:case 23:Va(s),mc(),e!==null&&ne(Hs);break;case 24:Ha(vt)}}function Hn(e,s){try{var i=s.updateQueue,c=i!==null?i.lastEffect:null;if(c!==null){var d=c.next;i=d;do{if((i.tag&e)===e){c=void 0;var f=i.create,v=i.inst;c=f(),v.destroy=c}i=i.next}while(i!==d)}}catch(w){Ge(s,s.return,w)}}function hs(e,s,i){try{var c=s.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var f=d.next;c=f;do{if((c.tag&e)===e){var v=c.inst,w=v.destroy;if(w!==void 0){v.destroy=void 0,d=s;var O=i,I=w;try{I()}catch(Z){Ge(d,O,Z)}}}c=c.next}while(c!==f)}}catch(Z){Ge(s,s.return,Z)}}function tm(e){var s=e.updateQueue;if(s!==null){var i=e.stateNode;try{Ph(s,i)}catch(c){Ge(e,e.return,c)}}}function am(e,s,i){i.props=Vs(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(c){Ge(e,s,c)}}function Yn(e,s){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var c=e.stateNode;break;case 30:c=e.stateNode;break;default:c=e.stateNode}typeof i=="function"?e.refCleanup=i(c):i.current=c}}catch(d){Ge(e,s,d)}}function Ea(e,s){var i=e.ref,c=e.refCleanup;if(i!==null)if(typeof c=="function")try{c()}catch(d){Ge(e,s,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(d){Ge(e,s,d)}else i.current=null}function sm(e){var s=e.type,i=e.memoizedProps,c=e.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":i.autoFocus&&c.focus();break e;case"img":i.src?c.src=i.src:i.srcSet&&(c.srcset=i.srcSet)}}catch(d){Ge(e,e.return,d)}}function Ic(e,s,i){try{var c=e.stateNode;av(c,e.type,i,s),c[Lt]=s}catch(d){Ge(e,e.return,d)}}function rm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&xs(e.type)||e.tag===4}function Hc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||rm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&xs(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Yc(e,s,i){var c=e.tag;if(c===5||c===6)e=e.stateNode,s?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,s):(s=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,s.appendChild(e),i=i._reactRootContainer,i!=null||s.onclick!==null||(s.onclick=Rl));else if(c!==4&&(c===27&&xs(e.type)&&(i=e.stateNode,s=null),e=e.child,e!==null))for(Yc(e,s,i),e=e.sibling;e!==null;)Yc(e,s,i),e=e.sibling}function jl(e,s,i){var c=e.tag;if(c===5||c===6)e=e.stateNode,s?i.insertBefore(e,s):i.appendChild(e);else if(c!==4&&(c===27&&xs(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(jl(e,s,i),e=e.sibling;e!==null;)jl(e,s,i),e=e.sibling}function nm(e){var s=e.stateNode,i=e.memoizedProps;try{for(var c=e.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);At(s,c,i),s[Mt]=e,s[Lt]=i}catch(f){Ge(e,e.return,f)}}var Fa=!1,dt=!1,Vc=!1,im=typeof WeakSet=="function"?WeakSet:Set,Nt=null;function qy(e,s){if(e=e.containerInfo,gu=Bl,e=ph(e),Ho(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var c=i.getSelection&&i.getSelection();if(c&&c.rangeCount!==0){i=c.anchorNode;var d=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{i.nodeType,f.nodeType}catch(ve){i=null;break e}var v=0,w=-1,O=-1,I=0,Z=0,re=e,H=null;t:for(;;){for(var Y;re!==i||d!==0&&re.nodeType!==3||(w=v+d),re!==f||c!==0&&re.nodeType!==3||(O=v+c),re.nodeType===3&&(v+=re.nodeValue.length),(Y=re.firstChild)!==null;)H=re,re=Y;for(;;){if(re===e)break t;if(H===i&&++I===d&&(w=v),H===f&&++Z===c&&(O=v),(Y=re.nextSibling)!==null)break;re=H,H=re.parentNode}re=Y}i=w===-1||O===-1?null:{start:w,end:O}}else i=null}i=i||{start:0,end:0}}else i=null;for(pu={focusedElem:e,selectionRange:i},Bl=!1,Nt=s;Nt!==null;)if(s=Nt,e=s.child,(s.subtreeFlags&1024)!==0&&e!==null)e.return=s,Nt=e;else for(;Nt!==null;){switch(s=Nt,f=s.alternate,e=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,i=s,d=f.memoizedProps,f=f.memoizedState,c=i.stateNode;try{var Se=Vs(i.type,d,i.elementType===i.type);e=c.getSnapshotBeforeUpdate(Se,f),c.__reactInternalSnapshotBeforeUpdate=e}catch(ve){Ge(i,i.return,ve)}}break;case 3:if((e&1024)!==0){if(e=s.stateNode.containerInfo,i=e.nodeType,i===9)bu(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":bu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(n(163))}if(e=s.sibling,e!==null){e.return=s.return,Nt=e;break}Nt=s.return}}function lm(e,s,i){var c=i.flags;switch(i.tag){case 0:case 11:case 15:fs(e,i),c&4&&Hn(5,i);break;case 1:if(fs(e,i),c&4)if(e=i.stateNode,s===null)try{e.componentDidMount()}catch(v){Ge(i,i.return,v)}else{var d=Vs(i.type,s.memoizedProps);s=s.memoizedState;try{e.componentDidUpdate(d,s,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Ge(i,i.return,v)}}c&64&&tm(i),c&512&&Yn(i,i.return);break;case 3:if(fs(e,i),c&64&&(e=i.updateQueue,e!==null)){if(s=null,i.child!==null)switch(i.child.tag){case 27:case 5:s=i.child.stateNode;break;case 1:s=i.child.stateNode}try{Ph(e,s)}catch(v){Ge(i,i.return,v)}}break;case 27:s===null&&c&4&&nm(i);case 26:case 5:fs(e,i),s===null&&c&4&&sm(i),c&512&&Yn(i,i.return);break;case 12:fs(e,i);break;case 13:fs(e,i),c&4&&um(e,i),c&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=Vy.bind(null,i),cv(e,i))));break;case 22:if(c=i.memoizedState!==null||Fa,!c){s=s!==null&&s.memoizedState!==null||dt,d=Fa;var f=dt;Fa=c,(dt=s)&&!f?ms(e,i,(i.subtreeFlags&8772)!==0):fs(e,i),Fa=d,dt=f}break;case 30:break;default:fs(e,i)}}function om(e){var s=e.alternate;s!==null&&(e.alternate=null,om(s)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(s=e.stateNode,s!==null&&_o(s)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Je=null,Bt=!1;function Ka(e,s,i){for(i=i.child;i!==null;)cm(e,s,i),i=i.sibling}function cm(e,s,i){if(He&&typeof He.onCommitFiberUnmount=="function")try{He.onCommitFiberUnmount(We,i)}catch(f){}switch(i.tag){case 26:dt||Ea(i,s),Ka(e,s,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:dt||Ea(i,s);var c=Je,d=Bt;xs(i.type)&&(Je=i.stateNode,Bt=!1),Ka(e,s,i),Zn(i.stateNode),Je=c,Bt=d;break;case 5:dt||Ea(i,s);case 6:if(c=Je,d=Bt,Je=null,Ka(e,s,i),Je=c,Bt=d,Je!==null)if(Bt)try{(Je.nodeType===9?Je.body:Je.nodeName==="HTML"?Je.ownerDocument.body:Je).removeChild(i.stateNode)}catch(f){Ge(i,s,f)}else try{Je.removeChild(i.stateNode)}catch(f){Ge(i,s,f)}break;case 18:Je!==null&&(Bt?(e=Je,Wm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),li(e)):Wm(Je,i.stateNode));break;case 4:c=Je,d=Bt,Je=i.stateNode.containerInfo,Bt=!0,Ka(e,s,i),Je=c,Bt=d;break;case 0:case 11:case 14:case 15:dt||hs(2,i,s),dt||hs(4,i,s),Ka(e,s,i);break;case 1:dt||(Ea(i,s),c=i.stateNode,typeof c.componentWillUnmount=="function"&&am(i,s,c)),Ka(e,s,i);break;case 21:Ka(e,s,i);break;case 22:dt=(c=dt)||i.memoizedState!==null,Ka(e,s,i),dt=c;break;default:Ka(e,s,i)}}function um(e,s){if(s.memoizedState===null&&(e=s.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{li(e)}catch(i){Ge(s,s.return,i)}}function Ly(e){switch(e.tag){case 13:case 19:var s=e.stateNode;return s===null&&(s=e.stateNode=new im),s;case 22:return e=e.stateNode,s=e._retryCache,s===null&&(s=e._retryCache=new im),s;default:throw Error(n(435,e.tag))}}function Qc(e,s){var i=Ly(e);s.forEach(function(c){var d=Qy.bind(null,e,c);i.has(c)||(i.add(c),c.then(d,d))})}function Gt(e,s){var i=s.deletions;if(i!==null)for(var c=0;c<i.length;c++){var d=i[c],f=e,v=s,w=v;e:for(;w!==null;){switch(w.tag){case 27:if(xs(w.type)){Je=w.stateNode,Bt=!1;break e}break;case 5:Je=w.stateNode,Bt=!1;break e;case 3:case 4:Je=w.stateNode.containerInfo,Bt=!0;break e}w=w.return}if(Je===null)throw Error(n(160));cm(f,v,d),Je=null,Bt=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)dm(s,e),s=s.sibling}var va=null;function dm(e,s){var i=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Gt(s,e),Ft(e),c&4&&(hs(3,e,e.return),Hn(3,e),hs(5,e,e.return));break;case 1:Gt(s,e),Ft(e),c&512&&(dt||i===null||Ea(i,i.return)),c&64&&Fa&&(e=e.updateQueue,e!==null&&(c=e.callbacks,c!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?c:i.concat(c))));break;case 26:var d=va;if(Gt(s,e),Ft(e),c&512&&(dt||i===null||Ea(i,i.return)),c&4){var f=i!==null?i.memoizedState:null;if(c=e.memoizedState,i===null)if(c===null)if(e.stateNode===null){e:{c=e.type,i=e.memoizedProps,d=d.ownerDocument||d;t:switch(c){case"title":f=d.getElementsByTagName("title")[0],(!f||f[mn]||f[Mt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(c),d.head.insertBefore(f,d.querySelector("head > title"))),At(f,c,i),f[Mt]=e,St(f),c=f;break e;case"link":var v=ng("link","href",d).get(c+(i.href||""));if(v){for(var w=0;w<v.length;w++)if(f=v[w],f.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&f.getAttribute("rel")===(i.rel==null?null:i.rel)&&f.getAttribute("title")===(i.title==null?null:i.title)&&f.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){v.splice(w,1);break t}}f=d.createElement(c),At(f,c,i),d.head.appendChild(f);break;case"meta":if(v=ng("meta","content",d).get(c+(i.content||""))){for(w=0;w<v.length;w++)if(f=v[w],f.getAttribute("content")===(i.content==null?null:""+i.content)&&f.getAttribute("name")===(i.name==null?null:i.name)&&f.getAttribute("property")===(i.property==null?null:i.property)&&f.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&f.getAttribute("charset")===(i.charSet==null?null:i.charSet)){v.splice(w,1);break t}}f=d.createElement(c),At(f,c,i),d.head.appendChild(f);break;default:throw Error(n(468,c))}f[Mt]=e,St(f),c=f}e.stateNode=c}else ig(d,e.type,e.stateNode);else e.stateNode=rg(d,c,e.memoizedProps);else f!==c?(f===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):f.count--,c===null?ig(d,e.type,e.stateNode):rg(d,c,e.memoizedProps)):c===null&&e.stateNode!==null&&Ic(e,e.memoizedProps,i.memoizedProps)}break;case 27:Gt(s,e),Ft(e),c&512&&(dt||i===null||Ea(i,i.return)),i!==null&&c&4&&Ic(e,e.memoizedProps,i.memoizedProps);break;case 5:if(Gt(s,e),Ft(e),c&512&&(dt||i===null||Ea(i,i.return)),e.flags&32){d=e.stateNode;try{dr(d,"")}catch(Y){Ge(e,e.return,Y)}}c&4&&e.stateNode!=null&&(d=e.memoizedProps,Ic(e,d,i!==null?i.memoizedProps:d)),c&1024&&(Vc=!0);break;case 6:if(Gt(s,e),Ft(e),c&4){if(e.stateNode===null)throw Error(n(162));c=e.memoizedProps,i=e.stateNode;try{i.nodeValue=c}catch(Y){Ge(e,e.return,Y)}}break;case 3:if(Ll=null,d=va,va=Ul(s.containerInfo),Gt(s,e),va=d,Ft(e),c&4&&i!==null&&i.memoizedState.isDehydrated)try{li(s.containerInfo)}catch(Y){Ge(e,e.return,Y)}Vc&&(Vc=!1,hm(e));break;case 4:c=va,va=Ul(e.stateNode.containerInfo),Gt(s,e),Ft(e),va=c;break;case 12:Gt(s,e),Ft(e);break;case 13:Gt(s,e),Ft(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Jc=rt()),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Qc(e,c)));break;case 22:d=e.memoizedState!==null;var O=i!==null&&i.memoizedState!==null,I=Fa,Z=dt;if(Fa=I||d,dt=Z||O,Gt(s,e),dt=Z,Fa=I,Ft(e),c&8192)e:for(s=e.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(i===null||O||Fa||dt||Qs(e)),i=null,s=e;;){if(s.tag===5||s.tag===26){if(i===null){O=i=s;try{if(f=O.stateNode,d)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{w=O.stateNode;var re=O.memoizedProps.style,H=re!=null&&re.hasOwnProperty("display")?re.display:null;w.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(Y){Ge(O,O.return,Y)}}}else if(s.tag===6){if(i===null){O=s;try{O.stateNode.nodeValue=d?"":O.memoizedProps}catch(Y){Ge(O,O.return,Y)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===e)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;i===s&&(i=null),s=s.return}i===s&&(i=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=e.updateQueue,c!==null&&(i=c.retryQueue,i!==null&&(c.retryQueue=null,Qc(e,i))));break;case 19:Gt(s,e),Ft(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,Qc(e,c)));break;case 30:break;case 21:break;default:Gt(s,e),Ft(e)}}function Ft(e){var s=e.flags;if(s&2){try{for(var i,c=e.return;c!==null;){if(rm(c)){i=c;break}c=c.return}if(i==null)throw Error(n(160));switch(i.tag){case 27:var d=i.stateNode,f=Hc(e);jl(e,f,d);break;case 5:var v=i.stateNode;i.flags&32&&(dr(v,""),i.flags&=-33);var w=Hc(e);jl(e,w,v);break;case 3:case 4:var O=i.stateNode.containerInfo,I=Hc(e);Yc(e,I,O);break;default:throw Error(n(161))}}catch(Z){Ge(e,e.return,Z)}e.flags&=-3}s&4096&&(e.flags&=-4097)}function hm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var s=e;hm(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),e=e.sibling}}function fs(e,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)lm(e,s.alternate,s),s=s.sibling}function Qs(e){for(e=e.child;e!==null;){var s=e;switch(s.tag){case 0:case 11:case 14:case 15:hs(4,s,s.return),Qs(s);break;case 1:Ea(s,s.return);var i=s.stateNode;typeof i.componentWillUnmount=="function"&&am(s,s.return,i),Qs(s);break;case 27:Zn(s.stateNode);case 26:case 5:Ea(s,s.return),Qs(s);break;case 22:s.memoizedState===null&&Qs(s);break;case 30:Qs(s);break;default:Qs(s)}e=e.sibling}}function ms(e,s,i){for(i=i&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,d=e,f=s,v=f.flags;switch(f.tag){case 0:case 11:case 15:ms(d,f,i),Hn(4,f);break;case 1:if(ms(d,f,i),c=f,d=c.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(I){Ge(c,c.return,I)}if(c=f,d=c.updateQueue,d!==null){var w=c.stateNode;try{var O=d.shared.hiddenCallbacks;if(O!==null)for(d.shared.hiddenCallbacks=null,d=0;d<O.length;d++)Bh(O[d],w)}catch(I){Ge(c,c.return,I)}}i&&v&64&&tm(f),Yn(f,f.return);break;case 27:nm(f);case 26:case 5:ms(d,f,i),i&&c===null&&v&4&&sm(f),Yn(f,f.return);break;case 12:ms(d,f,i);break;case 13:ms(d,f,i),i&&v&4&&um(d,f);break;case 22:f.memoizedState===null&&ms(d,f,i),Yn(f,f.return);break;case 30:break;default:ms(d,f,i)}s=s.sibling}}function Gc(e,s){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(e=s.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Dn(i))}function Fc(e,s){e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&Dn(e))}function Ta(e,s,i,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)fm(e,s,i,c),s=s.sibling}function fm(e,s,i,c){var d=s.flags;switch(s.tag){case 0:case 11:case 15:Ta(e,s,i,c),d&2048&&Hn(9,s);break;case 1:Ta(e,s,i,c);break;case 3:Ta(e,s,i,c),d&2048&&(e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&Dn(e)));break;case 12:if(d&2048){Ta(e,s,i,c),e=s.stateNode;try{var f=s.memoizedProps,v=f.id,w=f.onPostCommit;typeof w=="function"&&w(v,s.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(O){Ge(s,s.return,O)}}else Ta(e,s,i,c);break;case 13:Ta(e,s,i,c);break;case 23:break;case 22:f=s.stateNode,v=s.alternate,s.memoizedState!==null?f._visibility&2?Ta(e,s,i,c):Vn(e,s):f._visibility&2?Ta(e,s,i,c):(f._visibility|=2,Or(e,s,i,c,(s.subtreeFlags&10256)!==0)),d&2048&&Gc(v,s);break;case 24:Ta(e,s,i,c),d&2048&&Fc(s.alternate,s);break;default:Ta(e,s,i,c)}}function Or(e,s,i,c,d){for(d=d&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var f=e,v=s,w=i,O=c,I=v.flags;switch(v.tag){case 0:case 11:case 15:Or(f,v,w,O,d),Hn(8,v);break;case 23:break;case 22:var Z=v.stateNode;v.memoizedState!==null?Z._visibility&2?Or(f,v,w,O,d):Vn(f,v):(Z._visibility|=2,Or(f,v,w,O,d)),d&&I&2048&&Gc(v.alternate,v);break;case 24:Or(f,v,w,O,d),d&&I&2048&&Fc(v.alternate,v);break;default:Or(f,v,w,O,d)}s=s.sibling}}function Vn(e,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var i=e,c=s,d=c.flags;switch(c.tag){case 22:Vn(i,c),d&2048&&Gc(c.alternate,c);break;case 24:Vn(i,c),d&2048&&Fc(c.alternate,c);break;default:Vn(i,c)}s=s.sibling}}var Qn=8192;function Ar(e){if(e.subtreeFlags&Qn)for(e=e.child;e!==null;)mm(e),e=e.sibling}function mm(e){switch(e.tag){case 26:Ar(e),e.flags&Qn&&e.memoizedState!==null&&jv(va,e.memoizedState,e.memoizedProps);break;case 5:Ar(e);break;case 3:case 4:var s=va;va=Ul(e.stateNode.containerInfo),Ar(e),va=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=Qn,Qn=16777216,Ar(e),Qn=s):Ar(e));break;default:Ar(e)}}function gm(e){var s=e.alternate;if(s!==null&&(e=s.child,e!==null)){s.child=null;do s=e.sibling,e.sibling=null,e=s;while(e!==null)}}function Gn(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var i=0;i<s.length;i++){var c=s[i];Nt=c,ym(c,e)}gm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)pm(e),e=e.sibling}function pm(e){switch(e.tag){case 0:case 11:case 15:Gn(e),e.flags&2048&&hs(9,e,e.return);break;case 3:Gn(e);break;case 12:Gn(e);break;case 22:var s=e.stateNode;e.memoizedState!==null&&s._visibility&2&&(e.return===null||e.return.tag!==13)?(s._visibility&=-3,Sl(e)):Gn(e);break;default:Gn(e)}}function Sl(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var i=0;i<s.length;i++){var c=s[i];Nt=c,ym(c,e)}gm(e)}for(e=e.child;e!==null;){switch(s=e,s.tag){case 0:case 11:case 15:hs(8,s,s.return),Sl(s);break;case 22:i=s.stateNode,i._visibility&2&&(i._visibility&=-3,Sl(s));break;default:Sl(s)}e=e.sibling}}function ym(e,s){for(;Nt!==null;){var i=Nt;switch(i.tag){case 0:case 11:case 15:hs(8,i,s);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var c=i.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Dn(i.memoizedState.cache)}if(c=i.child,c!==null)c.return=i,Nt=c;else e:for(i=e;Nt!==null;){c=Nt;var d=c.sibling,f=c.return;if(om(c),c===i){Nt=null;break e}if(d!==null){d.return=f,Nt=d;break e}Nt=f}}}var $y={getCacheForType:function(e){var s=Ut(vt),i=s.data.get(e);return i===void 0&&(i=e(),s.data.set(e,i)),i}},zy=typeof WeakMap=="function"?WeakMap:Map,Be=0,Ke=null,Oe=null,Me=0,Pe=0,Kt=null,gs=!1,kr=!1,Kc=!1,Xa=0,it=0,ps=0,Gs=0,Xc=0,ha=0,Rr=0,Fn=null,Pt=null,Wc=!1,Jc=0,_l=1/0,Nl=null,ys=null,Ot=0,vs=null,Mr=null,Ur=0,Zc=0,eu=null,vm=null,Kn=0,tu=null;function Xt(){if((Be&2)!==0&&Me!==0)return Me&-Me;if(T.T!==null){var e=jr;return e!==0?e:ou()}return Rd()}function bm(){ha===0&&(ha=(Me&536870912)===0||Le?Dd():536870912);var e=da.current;return e!==null&&(e.flags|=32),ha}function Wt(e,s,i){(e===Ke&&(Pe===2||Pe===9)||e.cancelPendingCommit!==null)&&(qr(e,0),bs(e,Me,ha,!1)),fn(e,i),((Be&2)===0||e!==Ke)&&(e===Ke&&((Be&2)===0&&(Gs|=i),it===4&&bs(e,Me,ha,!1)),Da(e))}function xm(e,s,i){if((Be&6)!==0)throw Error(n(327));var c=!i&&(s&124)===0&&(s&e.expiredLanes)===0||hn(e,s),d=c?Iy(e,s):ru(e,s,!0),f=c;do{if(d===0){kr&&!c&&bs(e,s,0,!1);break}else{if(i=e.current.alternate,f&&!By(i)){d=ru(e,s,!1),f=!1;continue}if(d===2){if(f=s,e.errorRecoveryDisabledLanes&f)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){s=v;e:{var w=e;d=Fn;var O=w.current.memoizedState.isDehydrated;if(O&&(qr(w,v).flags|=256),v=ru(w,v,!1),v!==2){if(Kc&&!O){w.errorRecoveryDisabledLanes|=f,Gs|=f,d=4;break e}f=Pt,Pt=d,f!==null&&(Pt===null?Pt=f:Pt.push.apply(Pt,f))}d=v}if(f=!1,d!==2)continue}}if(d===1){qr(e,0),bs(e,s,0,!0);break}e:{switch(c=e,f=d,f){case 0:case 1:throw Error(n(345));case 4:if((s&4194048)!==s)break;case 6:bs(c,s,ha,!gs);break e;case 2:Pt=null;break;case 3:case 5:break;default:throw Error(n(329))}if((s&62914560)===s&&(d=Jc+300-rt(),10<d)){if(bs(c,s,ha,!gs),qi(c,0,!0)!==0)break e;c.timeoutHandle=Km(wm.bind(null,c,i,Pt,Nl,Wc,s,ha,Gs,Rr,gs,f,2,-0,0),d);break e}wm(c,i,Pt,Nl,Wc,s,ha,Gs,Rr,gs,f,0,-0,0)}}break}while(!0);Da(e)}function wm(e,s,i,c,d,f,v,w,O,I,Z,re,H,Y){if(e.timeoutHandle=-1,re=s.subtreeFlags,(re&8192||(re&16785408)===16785408)&&(ai={stylesheets:null,count:0,unsuspend:wv},mm(s),re=Sv(),re!==null)){e.cancelPendingCommit=re(Tm.bind(null,e,s,f,i,c,d,v,w,O,Z,1,H,Y)),bs(e,f,v,!I);return}Tm(e,s,f,i,c,d,v,w,O)}function By(e){for(var s=e;;){var i=s.tag;if((i===0||i===11||i===15)&&s.flags&16384&&(i=s.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var c=0;c<i.length;c++){var d=i[c],f=d.getSnapshot;d=d.value;try{if(!Vt(f(),d))return!1}catch(v){return!1}}if(i=s.child,s.subtreeFlags&16384&&i!==null)i.return=s,s=i;else{if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function bs(e,s,i,c){s&=~Xc,s&=~Gs,e.suspendedLanes|=s,e.pingedLanes&=~s,c&&(e.warmLanes|=s),c=e.expirationTimes;for(var d=s;0<d;){var f=31-Tt(d),v=1<<f;c[f]=-1,d&=~v}i!==0&&Ad(e,i,s)}function Cl(){return(Be&6)===0?(Xn(0),!1):!0}function au(){if(Oe!==null){if(Pe===0)var e=Oe.return;else e=Oe,Ia=Ps=null,bc(e),Tr=null,Bn=0,e=Oe;for(;e!==null;)em(e.alternate,e),e=e.return;Oe=null}}function qr(e,s){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,rv(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),au(),Ke=e,Oe=i=za(e.current,null),Me=s,Pe=0,Kt=null,gs=!1,kr=hn(e,s),Kc=!1,Rr=ha=Xc=Gs=ps=it=0,Pt=Fn=null,Wc=!1,(s&8)!==0&&(s|=s&32);var c=e.entangledLanes;if(c!==0)for(e=e.entanglements,c&=s;0<c;){var d=31-Tt(c),f=1<<d;s|=e[d],c&=~f}return Xa=s,Fi(),i}function jm(e,s){Ee=null,T.H=fl,s===An||s===sl?(s=$h(),Pe=3):s===Uh?(s=$h(),Pe=4):Pe=s===Bf?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Kt=s,Oe===null&&(it=1,vl(e,la(s,e.current)))}function Sm(){var e=T.H;return T.H=fl,e===null?fl:e}function _m(){var e=T.A;return T.A=$y,e}function su(){it=4,gs||(Me&4194048)!==Me&&da.current!==null||(kr=!0),(ps&134217727)===0&&(Gs&134217727)===0||Ke===null||bs(Ke,Me,ha,!1)}function ru(e,s,i){var c=Be;Be|=2;var d=Sm(),f=_m();(Ke!==e||Me!==s)&&(Nl=null,qr(e,s)),s=!1;var v=it;e:do try{if(Pe!==0&&Oe!==null){var w=Oe,O=Kt;switch(Pe){case 8:au(),v=6;break e;case 3:case 2:case 9:case 6:da.current===null&&(s=!0);var I=Pe;if(Pe=0,Kt=null,Lr(e,w,O,I),i&&kr){v=0;break e}break;default:I=Pe,Pe=0,Kt=null,Lr(e,w,O,I)}}Py(),v=it;break}catch(Z){jm(e,Z)}while(!0);return s&&e.shellSuspendCounter++,Ia=Ps=null,Be=c,T.H=d,T.A=f,Oe===null&&(Ke=null,Me=0,Fi()),v}function Py(){for(;Oe!==null;)Nm(Oe)}function Iy(e,s){var i=Be;Be|=2;var c=Sm(),d=_m();Ke!==e||Me!==s?(Nl=null,_l=rt()+500,qr(e,s)):kr=hn(e,s);e:do try{if(Pe!==0&&Oe!==null){s=Oe;var f=Kt;t:switch(Pe){case 1:Pe=0,Kt=null,Lr(e,s,f,1);break;case 2:case 9:if(qh(f)){Pe=0,Kt=null,Cm(s);break}s=function(){Pe!==2&&Pe!==9||Ke!==e||(Pe=7),Da(e)},f.then(s,s);break e;case 3:Pe=7;break e;case 4:Pe=5;break e;case 7:qh(f)?(Pe=0,Kt=null,Cm(s)):(Pe=0,Kt=null,Lr(e,s,f,7));break;case 5:var v=null;switch(Oe.tag){case 26:v=Oe.memoizedState;case 5:case 27:var w=Oe;if(!v||lg(v)){Pe=0,Kt=null;var O=w.sibling;if(O!==null)Oe=O;else{var I=w.return;I!==null?(Oe=I,El(I)):Oe=null}break t}}Pe=0,Kt=null,Lr(e,s,f,5);break;case 6:Pe=0,Kt=null,Lr(e,s,f,6);break;case 8:au(),it=6;break e;default:throw Error(n(462))}}Hy();break}catch(Z){jm(e,Z)}while(!0);return Ia=Ps=null,T.H=c,T.A=d,Be=i,Oe!==null?0:(Ke=null,Me=0,Fi(),it)}function Hy(){for(;Oe!==null&&!Re();)Nm(Oe)}function Nm(e){var s=Jf(e.alternate,e,Xa);e.memoizedProps=e.pendingProps,s===null?El(e):Oe=s}function Cm(e){var s=e,i=s.alternate;switch(s.tag){case 15:case 0:s=Qf(i,s,s.pendingProps,s.type,void 0,Me);break;case 11:s=Qf(i,s,s.pendingProps,s.type.render,s.ref,Me);break;case 5:bc(s);default:em(i,s),s=Oe=Ch(s,Xa),s=Jf(i,s,Xa)}e.memoizedProps=e.pendingProps,s===null?El(e):Oe=s}function Lr(e,s,i,c){Ia=Ps=null,bc(s),Tr=null,Bn=0;var d=s.return;try{if(ky(e,d,s,i,Me)){it=1,vl(e,la(i,e.current)),Oe=null;return}}catch(f){if(d!==null)throw Oe=d,f;it=1,vl(e,la(i,e.current)),Oe=null;return}s.flags&32768?(Le||c===1?e=!0:kr||(Me&536870912)!==0?e=!1:(gs=e=!0,(c===2||c===9||c===3||c===6)&&(c=da.current,c!==null&&c.tag===13&&(c.flags|=16384))),Em(s,e)):El(s)}function El(e){var s=e;do{if((s.flags&32768)!==0){Em(s,gs);return}e=s.return;var i=My(s.alternate,s,Xa);if(i!==null){Oe=i;return}if(s=s.sibling,s!==null){Oe=s;return}Oe=s=e}while(s!==null);it===0&&(it=5)}function Em(e,s){do{var i=Uy(e.alternate,e);if(i!==null){i.flags&=32767,Oe=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!s&&(e=e.sibling,e!==null)){Oe=e;return}Oe=e=i}while(e!==null);it=6,Oe=null}function Tm(e,s,i,c,d,f,v,w,O){e.cancelPendingCommit=null;do Tl();while(Ot!==0);if((Be&6)!==0)throw Error(n(327));if(s!==null){if(s===e.current)throw Error(n(177));if(f=s.lanes|s.childLanes,f|=Fo,w0(e,i,f,v,w,O),e===Ke&&(Oe=Ke=null,Me=0),Mr=s,vs=e,Ur=i,Zc=f,eu=d,vm=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Gy(pa,function(){return Rm(),null})):(e.callbackNode=null,e.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=T.T,T.T=null,d=Q.p,Q.p=2,v=Be,Be|=4;try{qy(e,s,i)}finally{Be=v,Q.p=d,T.T=c}}Ot=1,Dm(),Om(),Am()}}function Dm(){if(Ot===1){Ot=0;var e=vs,s=Mr,i=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||i){i=T.T,T.T=null;var c=Q.p;Q.p=2;var d=Be;Be|=4;try{dm(s,e);var f=pu,v=ph(e.containerInfo),w=f.focusedElem,O=f.selectionRange;if(v!==w&&w&&w.ownerDocument&&gh(w.ownerDocument.documentElement,w)){if(O!==null&&Ho(w)){var I=O.start,Z=O.end;if(Z===void 0&&(Z=I),"selectionStart"in w)w.selectionStart=I,w.selectionEnd=Math.min(Z,w.value.length);else{var re=w.ownerDocument||document,H=re&&re.defaultView||window;if(H.getSelection){var Y=H.getSelection(),Se=w.textContent.length,ve=Math.min(O.start,Se),Qe=O.end===void 0?ve:Math.min(O.end,Se);!Y.extend&&ve>Qe&&(v=Qe,Qe=ve,ve=v);var $=mh(w,ve),M=mh(w,Qe);if($&&M&&(Y.rangeCount!==1||Y.anchorNode!==$.node||Y.anchorOffset!==$.offset||Y.focusNode!==M.node||Y.focusOffset!==M.offset)){var P=re.createRange();P.setStart($.node,$.offset),Y.removeAllRanges(),ve>Qe?(Y.addRange(P),Y.extend(M.node,M.offset)):(P.setEnd(M.node,M.offset),Y.addRange(P))}}}}for(re=[],Y=w;Y=Y.parentNode;)Y.nodeType===1&&re.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<re.length;w++){var ee=re[w];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}Bl=!!gu,pu=gu=null}finally{Be=d,Q.p=c,T.T=i}}e.current=s,Ot=2}}function Om(){if(Ot===2){Ot=0;var e=vs,s=Mr,i=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||i){i=T.T,T.T=null;var c=Q.p;Q.p=2;var d=Be;Be|=4;try{lm(e,s.alternate,s)}finally{Be=d,Q.p=c,T.T=i}}Ot=3}}function Am(){if(Ot===4||Ot===3){Ot=0,De();var e=vs,s=Mr,i=Ur,c=vm;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Ot=5:(Ot=0,Mr=vs=null,km(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(ys=null),jo(i),s=s.stateNode,He&&typeof He.onCommitFiberRoot=="function")try{He.onCommitFiberRoot(We,s,void 0,(s.current.flags&128)===128)}catch(O){}if(c!==null){s=T.T,d=Q.p,Q.p=2,T.T=null;try{for(var f=e.onRecoverableError,v=0;v<c.length;v++){var w=c[v];f(w.value,{componentStack:w.stack})}}finally{T.T=s,Q.p=d}}(Ur&3)!==0&&Tl(),Da(e),d=e.pendingLanes,(i&4194090)!==0&&(d&42)!==0?e===tu?Kn++:(Kn=0,tu=e):Kn=0,Xn(0)}}function km(e,s){(e.pooledCacheLanes&=s)===0&&(s=e.pooledCache,s!=null&&(e.pooledCache=null,Dn(s)))}function Tl(e){return Dm(),Om(),Am(),Rm()}function Rm(){if(Ot!==5)return!1;var e=vs,s=Zc;Zc=0;var i=jo(Ur),c=T.T,d=Q.p;try{Q.p=32>i?32:i,T.T=null,i=eu,eu=null;var f=vs,v=Ur;if(Ot=0,Mr=vs=null,Ur=0,(Be&6)!==0)throw Error(n(331));var w=Be;if(Be|=4,pm(f.current),fm(f,f.current,v,i),Be=w,Xn(0,!1),He&&typeof He.onPostCommitFiberRoot=="function")try{He.onPostCommitFiberRoot(We,f)}catch(O){}return!0}finally{Q.p=d,T.T=c,km(e,s)}}function Mm(e,s,i){s=la(i,s),s=Rc(e.stateNode,s,2),e=os(e,s,2),e!==null&&(fn(e,2),Da(e))}function Ge(e,s,i){if(e.tag===3)Mm(e,e,i);else for(;s!==null;){if(s.tag===3){Mm(s,e,i);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ys===null||!ys.has(c))){e=la(i,e),i=$f(2),c=os(s,i,2),c!==null&&(zf(i,c,s,e),fn(c,2),Da(c));break}}s=s.return}}function nu(e,s,i){var c=e.pingCache;if(c===null){c=e.pingCache=new zy;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(i)||(Kc=!0,d.add(i),e=Yy.bind(null,e,s,i),s.then(e,e))}function Yy(e,s,i){var c=e.pingCache;c!==null&&c.delete(s),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Ke===e&&(Me&i)===i&&(it===4||it===3&&(Me&62914560)===Me&&300>rt()-Jc?(Be&2)===0&&qr(e,0):Xc|=i,Rr===Me&&(Rr=0)),Da(e)}function Um(e,s){s===0&&(s=Od()),e=vr(e,s),e!==null&&(fn(e,s),Da(e))}function Vy(e){var s=e.memoizedState,i=0;s!==null&&(i=s.retryLane),Um(e,i)}function Qy(e,s){var i=0;switch(e.tag){case 13:var c=e.stateNode,d=e.memoizedState;d!==null&&(i=d.retryLane);break;case 19:c=e.stateNode;break;case 22:c=e.stateNode._retryCache;break;default:throw Error(n(314))}c!==null&&c.delete(s),Um(e,i)}function Gy(e,s){return ze(e,s)}var Dl=null,$r=null,iu=!1,Ol=!1,lu=!1,Fs=0;function Da(e){e!==$r&&e.next===null&&($r===null?Dl=$r=e:$r=$r.next=e),Ol=!0,iu||(iu=!0,Ky())}function Xn(e,s){if(!lu&&Ol){lu=!0;do for(var i=!1,c=Dl;c!==null;){if(e!==0){var d=c.pendingLanes;if(d===0)var f=0;else{var v=c.suspendedLanes,w=c.pingedLanes;f=(1<<31-Tt(42|e)+1)-1,f&=d&~(v&~w),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(i=!0,zm(c,f))}else f=Me,f=qi(c,c===Ke?f:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(f&3)===0||hn(c,f)||(i=!0,zm(c,f));c=c.next}while(i);lu=!1}}function Fy(){qm()}function qm(){Ol=iu=!1;var e=0;Fs!==0&&(sv()&&(e=Fs),Fs=0);for(var s=rt(),i=null,c=Dl;c!==null;){var d=c.next,f=Lm(c,s);f===0?(c.next=null,i===null?Dl=d:i.next=d,d===null&&($r=i)):(i=c,(e!==0||(f&3)!==0)&&(Ol=!0)),c=d}Xn(e)}function Lm(e,s){for(var i=e.suspendedLanes,c=e.pingedLanes,d=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var v=31-Tt(f),w=1<<v,O=d[v];O===-1?((w&i)===0||(w&c)!==0)&&(d[v]=x0(w,s)):O<=s&&(e.expiredLanes|=w),f&=~w}if(s=Ke,i=Me,i=qi(e,e===s?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c=e.callbackNode,i===0||e===s&&(Pe===2||Pe===9)||e.cancelPendingCommit!==null)return c!==null&&c!==null&&ke(c),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||hn(e,i)){if(s=i&-i,s===e.callbackPriority)return s;switch(c!==null&&ke(c),jo(i)){case 2:case 8:i=ga;break;case 32:i=pa;break;case 268435456:i=ts;break;default:i=pa}return c=$m.bind(null,e),i=ze(i,c),e.callbackPriority=s,e.callbackNode=i,s}return c!==null&&c!==null&&ke(c),e.callbackPriority=2,e.callbackNode=null,2}function $m(e,s){if(Ot!==0&&Ot!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Tl()&&e.callbackNode!==i)return null;var c=Me;return c=qi(e,e===Ke?c:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c===0?null:(xm(e,c,s),Lm(e,rt()),e.callbackNode!=null&&e.callbackNode===i?$m.bind(null,e):null)}function zm(e,s){if(Tl())return null;xm(e,s,!0)}function Ky(){nv(function(){(Be&6)!==0?ze(Fe,Fy):qm()})}function ou(){return Fs===0&&(Fs=Dd()),Fs}function Bm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Pi(""+e)}function Pm(e,s){var i=s.ownerDocument.createElement("input");return i.name=s.name,i.value=s.value,e.id&&i.setAttribute("form",e.id),s.parentNode.insertBefore(i,s),e=new FormData(e),i.parentNode.removeChild(i),e}function Xy(e,s,i,c,d){if(s==="submit"&&i&&i.stateNode===d){var f=Bm((d[Lt]||null).action),v=c.submitter;v&&(s=(s=v[Lt]||null)?Bm(s.formAction):v.getAttribute("formAction"),s!==null&&(f=s,v=null));var w=new Vi("action","action",null,c,d);e.push({event:w,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Fs!==0){var O=v?Pm(d,v):new FormData(d);Tc(i,{pending:!0,data:O,method:d.method,action:f},null,O)}}else typeof f=="function"&&(w.preventDefault(),O=v?Pm(d,v):new FormData(d),Tc(i,{pending:!0,data:O,method:d.method,action:f},f,O))},currentTarget:d}]})}}for(var cu=0;cu<Go.length;cu++){var uu=Go[cu],Wy=uu.toLowerCase(),Jy=uu[0].toUpperCase()+uu.slice(1);ya(Wy,"on"+Jy)}ya(bh,"onAnimationEnd"),ya(xh,"onAnimationIteration"),ya(wh,"onAnimationStart"),ya("dblclick","onDoubleClick"),ya("focusin","onFocus"),ya("focusout","onBlur"),ya(gy,"onTransitionRun"),ya(py,"onTransitionStart"),ya(yy,"onTransitionCancel"),ya(jh,"onTransitionEnd"),or("onMouseEnter",["mouseout","mouseover"]),or("onMouseLeave",["mouseout","mouseover"]),or("onPointerEnter",["pointerout","pointerover"]),or("onPointerLeave",["pointerout","pointerover"]),ks("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ks("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ks("onBeforeInput",["compositionend","keypress","textInput","paste"]),ks("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ks("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ks("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wn));function Im(e,s){s=(s&4)!==0;for(var i=0;i<e.length;i++){var c=e[i],d=c.event;c=c.listeners;e:{var f=void 0;if(s)for(var v=c.length-1;0<=v;v--){var w=c[v],O=w.instance,I=w.currentTarget;if(w=w.listener,O!==f&&d.isPropagationStopped())break e;f=w,d.currentTarget=I;try{f(d)}catch(Z){yl(Z)}d.currentTarget=null,f=O}else for(v=0;v<c.length;v++){if(w=c[v],O=w.instance,I=w.currentTarget,w=w.listener,O!==f&&d.isPropagationStopped())break e;f=w,d.currentTarget=I;try{f(d)}catch(Z){yl(Z)}d.currentTarget=null,f=O}}}}function Ae(e,s){var i=s[So];i===void 0&&(i=s[So]=new Set);var c=e+"__bubble";i.has(c)||(Hm(s,e,2,!1),i.add(c))}function du(e,s,i){var c=0;s&&(c|=4),Hm(i,e,c,s)}var Al="_reactListening"+Math.random().toString(36).slice(2);function hu(e){if(!e[Al]){e[Al]=!0,Ud.forEach(function(i){i!=="selectionchange"&&(Zy.has(i)||du(i,!1,e),du(i,!0,e))});var s=e.nodeType===9?e:e.ownerDocument;s===null||s[Al]||(s[Al]=!0,du("selectionchange",!1,s))}}function Hm(e,s,i,c){switch(fg(s)){case 2:var d=Cv;break;case 8:d=Ev;break;default:d=Cu}i=d.bind(null,s,i,e),d=void 0,!Mo||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?e.addEventListener(s,i,{capture:!0,passive:d}):e.addEventListener(s,i,!0):d!==void 0?e.addEventListener(s,i,{passive:d}):e.addEventListener(s,i,!1)}function fu(e,s,i,c,d){var f=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var w=c.stateNode.containerInfo;if(w===d)break;if(v===4)for(v=c.return;v!==null;){var O=v.tag;if((O===3||O===4)&&v.stateNode.containerInfo===d)return;v=v.return}for(;w!==null;){if(v=nr(w),v===null)return;if(O=v.tag,O===5||O===6||O===26||O===27){c=f=v;continue e}w=w.parentNode}}c=c.return}Kd(function(){var I=f,Z=ko(i),re=[];e:{var H=Sh.get(e);if(H!==void 0){var Y=Vi,Se=e;switch(e){case"keypress":if(Hi(i)===0)break e;case"keydown":case"keyup":Y=G0;break;case"focusin":Se="focus",Y=$o;break;case"focusout":Se="blur",Y=$o;break;case"beforeblur":case"afterblur":Y=$o;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Jd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=U0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=X0;break;case bh:case xh:case wh:Y=$0;break;case jh:Y=J0;break;case"scroll":case"scrollend":Y=R0;break;case"wheel":Y=ey;break;case"copy":case"cut":case"paste":Y=B0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=eh;break;case"toggle":case"beforetoggle":Y=ay}var ve=(s&4)!==0,Qe=!ve&&(e==="scroll"||e==="scrollend"),$=ve?H!==null?H+"Capture":null:H;ve=[];for(var M=I,P;M!==null;){var ee=M;if(P=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||P===null||$===null||(ee=pn(M,$),ee!=null&&ve.push(Jn(M,ee,P))),Qe)break;M=M.return}0<ve.length&&(H=new Y(H,Se,null,i,Z),re.push({event:H,listeners:ve}))}}if((s&7)===0){e:{if(H=e==="mouseover"||e==="pointerover",Y=e==="mouseout"||e==="pointerout",H&&i!==Ao&&(Se=i.relatedTarget||i.fromElement)&&(nr(Se)||Se[rr]))break e;if((Y||H)&&(H=Z.window===Z?Z:(H=Z.ownerDocument)?H.defaultView||H.parentWindow:window,Y?(Se=i.relatedTarget||i.toElement,Y=I,Se=Se?nr(Se):null,Se!==null&&(Qe=u(Se),ve=Se.tag,Se!==Qe||ve!==5&&ve!==27&&ve!==6)&&(Se=null)):(Y=null,Se=I),Y!==Se)){if(ve=Jd,ee="onMouseLeave",$="onMouseEnter",M="mouse",(e==="pointerout"||e==="pointerover")&&(ve=eh,ee="onPointerLeave",$="onPointerEnter",M="pointer"),Qe=Y==null?H:gn(Y),P=Se==null?H:gn(Se),H=new ve(ee,M+"leave",Y,i,Z),H.target=Qe,H.relatedTarget=P,ee=null,nr(Z)===I&&(ve=new ve($,M+"enter",Se,i,Z),ve.target=P,ve.relatedTarget=Qe,ee=ve),Qe=ee,Y&&Se)t:{for(ve=Y,$=Se,M=0,P=ve;P;P=zr(P))M++;for(P=0,ee=$;ee;ee=zr(ee))P++;for(;0<M-P;)ve=zr(ve),M--;for(;0<P-M;)$=zr($),P--;for(;M--;){if(ve===$||$!==null&&ve===$.alternate)break t;ve=zr(ve),$=zr($)}ve=null}else ve=null;Y!==null&&Ym(re,H,Y,ve,!1),Se!==null&&Qe!==null&&Ym(re,Qe,Se,ve,!0)}}e:{if(H=I?gn(I):window,Y=H.nodeName&&H.nodeName.toLowerCase(),Y==="select"||Y==="input"&&H.type==="file")var fe=oh;else if(ih(H))if(ch)fe=hy;else{fe=uy;var Te=cy}else Y=H.nodeName,!Y||Y.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?I&&Oo(I.elementType)&&(fe=oh):fe=dy;if(fe&&(fe=fe(e,I))){lh(re,fe,i,Z);break e}Te&&Te(e,H,I),e==="focusout"&&I&&H.type==="number"&&I.memoizedProps.value!=null&&Do(H,"number",H.value)}switch(Te=I?gn(I):window,e){case"focusin":(ih(Te)||Te.contentEditable==="true")&&(gr=Te,Yo=I,_n=null);break;case"focusout":_n=Yo=gr=null;break;case"mousedown":Vo=!0;break;case"contextmenu":case"mouseup":case"dragend":Vo=!1,yh(re,i,Z);break;case"selectionchange":if(my)break;case"keydown":case"keyup":yh(re,i,Z)}var ye;if(Bo)e:{switch(e){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else mr?rh(e,i)&&(xe="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(xe="onCompositionStart");xe&&(th&&i.locale!=="ko"&&(mr||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&mr&&(ye=Xd()):(rs=Z,Uo="value"in rs?rs.value:rs.textContent,mr=!0)),Te=kl(I,xe),0<Te.length&&(xe=new Zd(xe,e,null,i,Z),re.push({event:xe,listeners:Te}),ye?xe.data=ye:(ye=nh(i),ye!==null&&(xe.data=ye)))),(ye=ry?ny(e,i):iy(e,i))&&(xe=kl(I,"onBeforeInput"),0<xe.length&&(Te=new Zd("onBeforeInput","beforeinput",null,i,Z),re.push({event:Te,listeners:xe}),Te.data=ye)),Xy(re,e,I,i,Z)}Im(re,s)})}function Jn(e,s,i){return{instance:e,listener:s,currentTarget:i}}function kl(e,s){for(var i=s+"Capture",c=[];e!==null;){var d=e,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=pn(e,i),d!=null&&c.unshift(Jn(e,d,f)),d=pn(e,s),d!=null&&c.push(Jn(e,d,f))),e.tag===3)return c;e=e.return}return[]}function zr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Ym(e,s,i,c,d){for(var f=s._reactName,v=[];i!==null&&i!==c;){var w=i,O=w.alternate,I=w.stateNode;if(w=w.tag,O!==null&&O===c)break;w!==5&&w!==26&&w!==27||I===null||(O=I,d?(I=pn(i,f),I!=null&&v.unshift(Jn(i,I,O))):d||(I=pn(i,f),I!=null&&v.push(Jn(i,I,O)))),i=i.return}v.length!==0&&e.push({event:s,listeners:v})}var ev=/\r\n?/g,tv=/\u0000|\uFFFD/g;function Vm(e){return(typeof e=="string"?e:""+e).replace(ev,`
`).replace(tv,"")}function Qm(e,s){return s=Vm(s),Vm(e)===s}function Rl(){}function Ve(e,s,i,c,d,f){switch(i){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||dr(e,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&dr(e,""+c);break;case"className":$i(e,"class",c);break;case"tabIndex":$i(e,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":$i(e,i,c);break;case"style":Gd(e,c,f);break;case"data":if(s!=="object"){$i(e,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||i!=="href")){e.removeAttribute(i);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(i);break}c=Pi(""+c),e.setAttribute(i,c);break;case"action":case"formAction":if(typeof c=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(i==="formAction"?(s!=="input"&&Ve(e,s,"name",d.name,d,null),Ve(e,s,"formEncType",d.formEncType,d,null),Ve(e,s,"formMethod",d.formMethod,d,null),Ve(e,s,"formTarget",d.formTarget,d,null)):(Ve(e,s,"encType",d.encType,d,null),Ve(e,s,"method",d.method,d,null),Ve(e,s,"target",d.target,d,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(i);break}c=Pi(""+c),e.setAttribute(i,c);break;case"onClick":c!=null&&(e.onclick=Rl);break;case"onScroll":c!=null&&Ae("scroll",e);break;case"onScrollEnd":c!=null&&Ae("scrollend",e);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(n(61));if(i=c.__html,i!=null){if(d.children!=null)throw Error(n(60));e.innerHTML=i}}break;case"multiple":e.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":e.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){e.removeAttribute("xlink:href");break}i=Pi(""+c),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(i,""+c):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":c===!0?e.setAttribute(i,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(i,c):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?e.setAttribute(i,c):e.removeAttribute(i);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?e.removeAttribute(i):e.setAttribute(i,c);break;case"popover":Ae("beforetoggle",e),Ae("toggle",e),Li(e,"popover",c);break;case"xlinkActuate":La(e,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":La(e,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":La(e,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":La(e,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":La(e,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":La(e,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":La(e,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":La(e,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":La(e,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Li(e,"is",c);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=A0.get(i)||i,Li(e,i,c))}}function mu(e,s,i,c,d,f){switch(i){case"style":Gd(e,c,f);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(n(61));if(i=c.__html,i!=null){if(d.children!=null)throw Error(n(60));e.innerHTML=i}}break;case"children":typeof c=="string"?dr(e,c):(typeof c=="number"||typeof c=="bigint")&&dr(e,""+c);break;case"onScroll":c!=null&&Ae("scroll",e);break;case"onScrollEnd":c!=null&&Ae("scrollend",e);break;case"onClick":c!=null&&(e.onclick=Rl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!qd.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(d=i.endsWith("Capture"),s=i.slice(2,d?i.length-7:void 0),f=e[Lt]||null,f=f!=null?f[i]:null,typeof f=="function"&&e.removeEventListener(s,f,d),typeof c=="function")){typeof f!="function"&&f!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(s,c,d);break e}i in e?e[i]=c:c===!0?e.setAttribute(i,""):Li(e,i,c)}}}function At(e,s,i){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ae("error",e),Ae("load",e);var c=!1,d=!1,f;for(f in i)if(i.hasOwnProperty(f)){var v=i[f];if(v!=null)switch(f){case"src":c=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:Ve(e,s,f,v,i,null)}}d&&Ve(e,s,"srcSet",i.srcSet,i,null),c&&Ve(e,s,"src",i.src,i,null);return;case"input":Ae("invalid",e);var w=f=v=d=null,O=null,I=null;for(c in i)if(i.hasOwnProperty(c)){var Z=i[c];if(Z!=null)switch(c){case"name":d=Z;break;case"type":v=Z;break;case"checked":O=Z;break;case"defaultChecked":I=Z;break;case"value":f=Z;break;case"defaultValue":w=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(n(137,s));break;default:Ve(e,s,c,Z,i,null)}}Hd(e,f,w,O,I,v,d,!1),zi(e);return;case"select":Ae("invalid",e),c=v=f=null;for(d in i)if(i.hasOwnProperty(d)&&(w=i[d],w!=null))switch(d){case"value":f=w;break;case"defaultValue":v=w;break;case"multiple":c=w;default:Ve(e,s,d,w,i,null)}s=f,i=v,e.multiple=!!c,s!=null?ur(e,!!c,s,!1):i!=null&&ur(e,!!c,i,!0);return;case"textarea":Ae("invalid",e),f=d=c=null;for(v in i)if(i.hasOwnProperty(v)&&(w=i[v],w!=null))switch(v){case"value":c=w;break;case"defaultValue":d=w;break;case"children":f=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(n(91));break;default:Ve(e,s,v,w,i,null)}Vd(e,c,d,f),zi(e);return;case"option":for(O in i)if(i.hasOwnProperty(O)&&(c=i[O],c!=null))switch(O){case"selected":e.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Ve(e,s,O,c,i,null)}return;case"dialog":Ae("beforetoggle",e),Ae("toggle",e),Ae("cancel",e),Ae("close",e);break;case"iframe":case"object":Ae("load",e);break;case"video":case"audio":for(c=0;c<Wn.length;c++)Ae(Wn[c],e);break;case"image":Ae("error",e),Ae("load",e);break;case"details":Ae("toggle",e);break;case"embed":case"source":case"link":Ae("error",e),Ae("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(I in i)if(i.hasOwnProperty(I)&&(c=i[I],c!=null))switch(I){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:Ve(e,s,I,c,i,null)}return;default:if(Oo(s)){for(Z in i)i.hasOwnProperty(Z)&&(c=i[Z],c!==void 0&&mu(e,s,Z,c,i,void 0));return}}for(w in i)i.hasOwnProperty(w)&&(c=i[w],c!=null&&Ve(e,s,w,c,i,null))}function av(e,s,i,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,v=null,w=null,O=null,I=null,Z=null;for(Y in i){var re=i[Y];if(i.hasOwnProperty(Y)&&re!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":O=re;default:c.hasOwnProperty(Y)||Ve(e,s,Y,null,c,re)}}for(var H in c){var Y=c[H];if(re=i[H],c.hasOwnProperty(H)&&(Y!=null||re!=null))switch(H){case"type":f=Y;break;case"name":d=Y;break;case"checked":I=Y;break;case"defaultChecked":Z=Y;break;case"value":v=Y;break;case"defaultValue":w=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(n(137,s));break;default:Y!==re&&Ve(e,s,H,Y,c,re)}}To(e,v,w,O,I,Z,f,d);return;case"select":Y=v=w=H=null;for(f in i)if(O=i[f],i.hasOwnProperty(f)&&O!=null)switch(f){case"value":break;case"multiple":Y=O;default:c.hasOwnProperty(f)||Ve(e,s,f,null,c,O)}for(d in c)if(f=c[d],O=i[d],c.hasOwnProperty(d)&&(f!=null||O!=null))switch(d){case"value":H=f;break;case"defaultValue":w=f;break;case"multiple":v=f;default:f!==O&&Ve(e,s,d,f,c,O)}s=w,i=v,c=Y,H!=null?ur(e,!!i,H,!1):!!c!=!!i&&(s!=null?ur(e,!!i,s,!0):ur(e,!!i,i?[]:"",!1));return;case"textarea":Y=H=null;for(w in i)if(d=i[w],i.hasOwnProperty(w)&&d!=null&&!c.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Ve(e,s,w,null,c,d)}for(v in c)if(d=c[v],f=i[v],c.hasOwnProperty(v)&&(d!=null||f!=null))switch(v){case"value":H=d;break;case"defaultValue":Y=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(n(91));break;default:d!==f&&Ve(e,s,v,d,c,f)}Yd(e,H,Y);return;case"option":for(var Se in i)if(H=i[Se],i.hasOwnProperty(Se)&&H!=null&&!c.hasOwnProperty(Se))switch(Se){case"selected":e.selected=!1;break;default:Ve(e,s,Se,null,c,H)}for(O in c)if(H=c[O],Y=i[O],c.hasOwnProperty(O)&&H!==Y&&(H!=null||Y!=null))switch(O){case"selected":e.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:Ve(e,s,O,H,c,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in i)H=i[ve],i.hasOwnProperty(ve)&&H!=null&&!c.hasOwnProperty(ve)&&Ve(e,s,ve,null,c,H);for(I in c)if(H=c[I],Y=i[I],c.hasOwnProperty(I)&&H!==Y&&(H!=null||Y!=null))switch(I){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(n(137,s));break;default:Ve(e,s,I,H,c,Y)}return;default:if(Oo(s)){for(var Qe in i)H=i[Qe],i.hasOwnProperty(Qe)&&H!==void 0&&!c.hasOwnProperty(Qe)&&mu(e,s,Qe,void 0,c,H);for(Z in c)H=c[Z],Y=i[Z],!c.hasOwnProperty(Z)||H===Y||H===void 0&&Y===void 0||mu(e,s,Z,H,c,Y);return}}for(var $ in i)H=i[$],i.hasOwnProperty($)&&H!=null&&!c.hasOwnProperty($)&&Ve(e,s,$,null,c,H);for(re in c)H=c[re],Y=i[re],!c.hasOwnProperty(re)||H===Y||H==null&&Y==null||Ve(e,s,re,H,c,Y)}var gu=null,pu=null;function Ml(e){return e.nodeType===9?e:e.ownerDocument}function Gm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Fm(e,s){if(e===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&s==="foreignObject"?0:e}function yu(e,s){return e==="textarea"||e==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var vu=null;function sv(){var e=window.event;return e&&e.type==="popstate"?e===vu?!1:(vu=e,!0):(vu=null,!1)}var Km=typeof setTimeout=="function"?setTimeout:void 0,rv=typeof clearTimeout=="function"?clearTimeout:void 0,Xm=typeof Promise=="function"?Promise:void 0,nv=typeof queueMicrotask=="function"?queueMicrotask:typeof Xm!="undefined"?function(e){return Xm.resolve(null).then(e).catch(iv)}:Km;function iv(e){setTimeout(function(){throw e})}function xs(e){return e==="head"}function Wm(e,s){var i=s,c=0,d=0;do{var f=i.nextSibling;if(e.removeChild(i),f&&f.nodeType===8)if(i=f.data,i==="/$"){if(0<c&&8>c){i=c;var v=e.ownerDocument;if(i&1&&Zn(v.documentElement),i&2&&Zn(v.body),i&4)for(i=v.head,Zn(i),v=i.firstChild;v;){var w=v.nextSibling,O=v.nodeName;v[mn]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&v.rel.toLowerCase()==="stylesheet"||i.removeChild(v),v=w}}if(d===0){e.removeChild(f),li(s);return}d--}else i==="$"||i==="$?"||i==="$!"?d++:c=i.charCodeAt(0)-48;else c=0;i=f}while(i);li(s)}function bu(e){var s=e.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var i=s;switch(s=s.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":bu(i),_o(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function lv(e,s,i,c){for(;e.nodeType===1;){var d=i;if(e.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(c){if(!e[mn])switch(s){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(s==="input"&&e.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=ba(e.nextSibling),e===null)break}return null}function ov(e,s,i){if(s==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=ba(e.nextSibling),e===null))return null;return e}function xu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function cv(e,s){var i=e.ownerDocument;if(e.data!=="$?"||i.readyState==="complete")s();else{var c=function(){s(),i.removeEventListener("DOMContentLoaded",c)};i.addEventListener("DOMContentLoaded",c),e._reactRetry=c}}function ba(e){for(;e!=null;e=e.nextSibling){var s=e.nodeType;if(s===1||s===3)break;if(s===8){if(s=e.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return e}var wu=null;function Jm(e){e=e.previousSibling;for(var s=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(s===0)return e;s--}else i==="/$"&&s++}e=e.previousSibling}return null}function Zm(e,s,i){switch(s=Ml(i),e){case"html":if(e=s.documentElement,!e)throw Error(n(452));return e;case"head":if(e=s.head,!e)throw Error(n(453));return e;case"body":if(e=s.body,!e)throw Error(n(454));return e;default:throw Error(n(451))}}function Zn(e){for(var s=e.attributes;s.length;)e.removeAttributeNode(s[0]);_o(e)}var fa=new Map,eg=new Set;function Ul(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Wa=Q.d;Q.d={f:uv,r:dv,D:hv,C:fv,L:mv,m:gv,X:yv,S:pv,M:vv};function uv(){var e=Wa.f(),s=Cl();return e||s}function dv(e){var s=ir(e);s!==null&&s.tag===5&&s.type==="form"?xf(s):Wa.r(e)}var Br=typeof document=="undefined"?null:document;function tg(e,s,i){var c=Br;if(c&&typeof s=="string"&&s){var d=ia(s);d='link[rel="'+e+'"][href="'+d+'"]',typeof i=="string"&&(d+='[crossorigin="'+i+'"]'),eg.has(d)||(eg.add(d),e={rel:e,crossOrigin:i,href:s},c.querySelector(d)===null&&(s=c.createElement("link"),At(s,"link",e),St(s),c.head.appendChild(s)))}}function hv(e){Wa.D(e),tg("dns-prefetch",e,null)}function fv(e,s){Wa.C(e,s),tg("preconnect",e,s)}function mv(e,s,i){Wa.L(e,s,i);var c=Br;if(c&&e&&s){var d='link[rel="preload"][as="'+ia(s)+'"]';s==="image"&&i&&i.imageSrcSet?(d+='[imagesrcset="'+ia(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(d+='[imagesizes="'+ia(i.imageSizes)+'"]')):d+='[href="'+ia(e)+'"]';var f=d;switch(s){case"style":f=Pr(e);break;case"script":f=Ir(e)}fa.has(f)||(e=y({rel:"preload",href:s==="image"&&i&&i.imageSrcSet?void 0:e,as:s},i),fa.set(f,e),c.querySelector(d)!==null||s==="style"&&c.querySelector(ei(f))||s==="script"&&c.querySelector(ti(f))||(s=c.createElement("link"),At(s,"link",e),St(s),c.head.appendChild(s)))}}function gv(e,s){Wa.m(e,s);var i=Br;if(i&&e){var c=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+ia(c)+'"][href="'+ia(e)+'"]',f=d;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Ir(e)}if(!fa.has(f)&&(e=y({rel:"modulepreload",href:e},s),fa.set(f,e),i.querySelector(d)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(ti(f)))return}c=i.createElement("link"),At(c,"link",e),St(c),i.head.appendChild(c)}}}function pv(e,s,i){Wa.S(e,s,i);var c=Br;if(c&&e){var d=lr(c).hoistableStyles,f=Pr(e);s=s||"default";var v=d.get(f);if(!v){var w={loading:0,preload:null};if(v=c.querySelector(ei(f)))w.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":s},i),(i=fa.get(f))&&ju(e,i);var O=v=c.createElement("link");St(O),At(O,"link",e),O._p=new Promise(function(I,Z){O.onload=I,O.onerror=Z}),O.addEventListener("load",function(){w.loading|=1}),O.addEventListener("error",function(){w.loading|=2}),w.loading|=4,ql(v,s,c)}v={type:"stylesheet",instance:v,count:1,state:w},d.set(f,v)}}}function yv(e,s){Wa.X(e,s);var i=Br;if(i&&e){var c=lr(i).hoistableScripts,d=Ir(e),f=c.get(d);f||(f=i.querySelector(ti(d)),f||(e=y({src:e,async:!0},s),(s=fa.get(d))&&Su(e,s),f=i.createElement("script"),St(f),At(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},c.set(d,f))}}function vv(e,s){Wa.M(e,s);var i=Br;if(i&&e){var c=lr(i).hoistableScripts,d=Ir(e),f=c.get(d);f||(f=i.querySelector(ti(d)),f||(e=y({src:e,async:!0,type:"module"},s),(s=fa.get(d))&&Su(e,s),f=i.createElement("script"),St(f),At(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},c.set(d,f))}}function ag(e,s,i,c){var d=(d=_e.current)?Ul(d):null;if(!d)throw Error(n(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(s=Pr(i.href),i=lr(d).hoistableStyles,c=i.get(s),c||(c={type:"style",instance:null,count:0,state:null},i.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=Pr(i.href);var f=lr(d).hoistableStyles,v=f.get(e);if(v||(d=d.ownerDocument||d,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,v),(f=d.querySelector(ei(e)))&&!f._p&&(v.instance=f,v.state.loading=5),fa.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},fa.set(e,i),f||bv(d,e,i,v.state))),s&&c===null)throw Error(n(528,""));return v}if(s&&c!==null)throw Error(n(529,""));return null;case"script":return s=i.async,i=i.src,typeof i=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ir(i),i=lr(d).hoistableScripts,c=i.get(s),c||(c={type:"script",instance:null,count:0,state:null},i.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,e))}}function Pr(e){return'href="'+ia(e)+'"'}function ei(e){return'link[rel="stylesheet"]['+e+"]"}function sg(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function bv(e,s,i,c){e.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=e.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),At(s,"link",i),St(s),e.head.appendChild(s))}function Ir(e){return'[src="'+ia(e)+'"]'}function ti(e){return"script[async]"+e}function rg(e,s,i){if(s.count++,s.instance===null)switch(s.type){case"style":var c=e.querySelector('style[data-href~="'+ia(i.href)+'"]');if(c)return s.instance=c,St(c),c;var d=y({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return c=(e.ownerDocument||e).createElement("style"),St(c),At(c,"style",d),ql(c,i.precedence,e),s.instance=c;case"stylesheet":d=Pr(i.href);var f=e.querySelector(ei(d));if(f)return s.state.loading|=4,s.instance=f,St(f),f;c=sg(i),(d=fa.get(d))&&ju(c,d),f=(e.ownerDocument||e).createElement("link"),St(f);var v=f;return v._p=new Promise(function(w,O){v.onload=w,v.onerror=O}),At(f,"link",c),s.state.loading|=4,ql(f,i.precedence,e),s.instance=f;case"script":return f=Ir(i.src),(d=e.querySelector(ti(f)))?(s.instance=d,St(d),d):(c=i,(d=fa.get(f))&&(c=y({},i),Su(c,d)),e=e.ownerDocument||e,d=e.createElement("script"),St(d),At(d,"link",c),e.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(n(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,ql(c,i.precedence,e));return s.instance}function ql(e,s,i){for(var c=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=c.length?c[c.length-1]:null,f=d,v=0;v<c.length;v++){var w=c[v];if(w.dataset.precedence===s)f=w;else if(f!==d)break}f?f.parentNode.insertBefore(e,f.nextSibling):(s=i.nodeType===9?i.head:i,s.insertBefore(e,s.firstChild))}function ju(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.title==null&&(e.title=s.title)}function Su(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.integrity==null&&(e.integrity=s.integrity)}var Ll=null;function ng(e,s,i){if(Ll===null){var c=new Map,d=Ll=new Map;d.set(i,c)}else d=Ll,c=d.get(i),c||(c=new Map,d.set(i,c));if(c.has(e))return c;for(c.set(e,null),i=i.getElementsByTagName(e),d=0;d<i.length;d++){var f=i[d];if(!(f[mn]||f[Mt]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(s)||"";v=e+v;var w=c.get(v);w?w.push(f):c.set(v,[f])}}return c}function ig(e,s,i){e=e.ownerDocument||e,e.head.insertBefore(i,s==="title"?e.querySelector("head > title"):null)}function xv(e,s,i){if(i===1||s.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return e=s.disabled,typeof s.precedence=="string"&&e==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function lg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var ai=null;function wv(){}function jv(e,s,i){if(ai===null)throw Error(n(475));var c=ai;if(s.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var d=Pr(i.href),f=e.querySelector(ei(d));if(f){e=f._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(c.count++,c=$l.bind(c),e.then(c,c)),s.state.loading|=4,s.instance=f,St(f);return}f=e.ownerDocument||e,i=sg(i),(d=fa.get(d))&&ju(i,d),f=f.createElement("link"),St(f);var v=f;v._p=new Promise(function(w,O){v.onload=w,v.onerror=O}),At(f,"link",i),s.instance=f}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(s,e),(e=s.state.preload)&&(s.state.loading&3)===0&&(c.count++,s=$l.bind(c),e.addEventListener("load",s),e.addEventListener("error",s))}}function Sv(){if(ai===null)throw Error(n(475));var e=ai;return e.stylesheets&&e.count===0&&_u(e,e.stylesheets),0<e.count?function(s){var i=setTimeout(function(){if(e.stylesheets&&_u(e,e.stylesheets),e.unsuspend){var c=e.unsuspend;e.unsuspend=null,c()}},6e4);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(i)}}:null}function $l(){if(this.count--,this.count===0){if(this.stylesheets)_u(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var zl=null;function _u(e,s){e.stylesheets=null,e.unsuspend!==null&&(e.count++,zl=new Map,s.forEach(_v,e),zl=null,$l.call(e))}function _v(e,s){if(!(s.state.loading&4)){var i=zl.get(e);if(i)var c=i.get(null);else{i=new Map,zl.set(e,i);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var v=d[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(i.set(v.dataset.precedence,v),c=v)}c&&i.set(null,c)}d=s.instance,v=d.getAttribute("data-precedence"),f=i.get(v)||c,f===c&&i.set(null,d),i.set(v,d),this.count++,c=$l.bind(this),d.addEventListener("load",c),d.addEventListener("error",c),f?f.parentNode.insertBefore(d,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),s.state.loading|=4}}var si={$$typeof:q,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function Nv(e,s,i,c,d,f,v,w){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xo(0),this.hiddenUpdates=xo(null),this.identifierPrefix=c,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function og(e,s,i,c,d,f,v,w,O,I,Z,re){return e=new Nv(e,s,i,v,w,O,I,re),s=1,f===!0&&(s|=24),f=Qt(3,null,null,s),e.current=f,f.stateNode=e,s=nc(),s.refCount++,e.pooledCache=s,s.refCount++,f.memoizedState={element:c,isDehydrated:i,cache:s},cc(f),e}function cg(e){return e?(e=br,e):br}function ug(e,s,i,c,d,f){d=cg(d),c.context===null?c.context=d:c.pendingContext=d,c=ls(s),c.payload={element:i},f=f===void 0?null:f,f!==null&&(c.callback=f),i=os(e,c,s),i!==null&&(Wt(i,e,s),Rn(i,e,s))}function dg(e,s){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<s?i:s}}function Nu(e,s){dg(e,s),(e=e.alternate)&&dg(e,s)}function hg(e){if(e.tag===13){var s=vr(e,67108864);s!==null&&Wt(s,e,67108864),Nu(e,67108864)}}var Bl=!0;function Cv(e,s,i,c){var d=T.T;T.T=null;var f=Q.p;try{Q.p=2,Cu(e,s,i,c)}finally{Q.p=f,T.T=d}}function Ev(e,s,i,c){var d=T.T;T.T=null;var f=Q.p;try{Q.p=8,Cu(e,s,i,c)}finally{Q.p=f,T.T=d}}function Cu(e,s,i,c){if(Bl){var d=Eu(c);if(d===null)fu(e,s,c,Pl,i),mg(e,c);else if(Dv(d,e,s,i,c))c.stopPropagation();else if(mg(e,c),s&4&&-1<Tv.indexOf(e)){for(;d!==null;){var f=ir(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=As(f.pendingLanes);if(v!==0){var w=f;for(w.pendingLanes|=2,w.entangledLanes|=2;v;){var O=1<<31-Tt(v);w.entanglements[1]|=O,v&=~O}Da(f),(Be&6)===0&&(_l=rt()+500,Xn(0))}}break;case 13:w=vr(f,2),w!==null&&Wt(w,f,2),Cl(),Nu(f,2)}if(f=Eu(c),f===null&&fu(e,s,c,Pl,i),f===d)break;d=f}d!==null&&c.stopPropagation()}else fu(e,s,c,null,i)}}function Eu(e){return e=ko(e),Tu(e)}var Pl=null;function Tu(e){if(Pl=null,e=nr(e),e!==null){var s=u(e);if(s===null)e=null;else{var i=s.tag;if(i===13){if(e=h(s),e!==null)return e;e=null}else if(i===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null)}}return Pl=e,null}function fg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ce()){case Fe:return 2;case ga:return 8;case pa:case aa:return 32;case ts:return 268435456;default:return 32}default:return 32}}var Du=!1,ws=null,js=null,Ss=null,ri=new Map,ni=new Map,_s=[],Tv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mg(e,s){switch(e){case"focusin":case"focusout":ws=null;break;case"dragenter":case"dragleave":js=null;break;case"mouseover":case"mouseout":Ss=null;break;case"pointerover":case"pointerout":ri.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":ni.delete(s.pointerId)}}function ii(e,s,i,c,d,f){return e===null||e.nativeEvent!==f?(e={blockedOn:s,domEventName:i,eventSystemFlags:c,nativeEvent:f,targetContainers:[d]},s!==null&&(s=ir(s),s!==null&&hg(s)),e):(e.eventSystemFlags|=c,s=e.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),e)}function Dv(e,s,i,c,d){switch(s){case"focusin":return ws=ii(ws,e,s,i,c,d),!0;case"dragenter":return js=ii(js,e,s,i,c,d),!0;case"mouseover":return Ss=ii(Ss,e,s,i,c,d),!0;case"pointerover":var f=d.pointerId;return ri.set(f,ii(ri.get(f)||null,e,s,i,c,d)),!0;case"gotpointercapture":return f=d.pointerId,ni.set(f,ii(ni.get(f)||null,e,s,i,c,d)),!0}return!1}function gg(e){var s=nr(e.target);if(s!==null){var i=u(s);if(i!==null){if(s=i.tag,s===13){if(s=h(i),s!==null){e.blockedOn=s,j0(e.priority,function(){if(i.tag===13){var c=Xt();c=wo(c);var d=vr(i,c);d!==null&&Wt(d,i,c),Nu(i,c)}});return}}else if(s===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Il(e){if(e.blockedOn!==null)return!1;for(var s=e.targetContainers;0<s.length;){var i=Eu(e.nativeEvent);if(i===null){i=e.nativeEvent;var c=new i.constructor(i.type,i);Ao=c,i.target.dispatchEvent(c),Ao=null}else return s=ir(i),s!==null&&hg(s),e.blockedOn=i,!1;s.shift()}return!0}function pg(e,s,i){Il(e)&&i.delete(s)}function Ov(){Du=!1,ws!==null&&Il(ws)&&(ws=null),js!==null&&Il(js)&&(js=null),Ss!==null&&Il(Ss)&&(Ss=null),ri.forEach(pg),ni.forEach(pg)}function Hl(e,s){e.blockedOn===s&&(e.blockedOn=null,Du||(Du=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ov)))}var Yl=null;function yg(e){Yl!==e&&(Yl=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Yl===e&&(Yl=null);for(var s=0;s<e.length;s+=3){var i=e[s],c=e[s+1],d=e[s+2];if(typeof c!="function"){if(Tu(c||i)===null)continue;break}var f=ir(i);f!==null&&(e.splice(s,3),s-=3,Tc(f,{pending:!0,data:d,method:i.method,action:c},c,d))}}))}function li(e){function s(O){return Hl(O,e)}ws!==null&&Hl(ws,e),js!==null&&Hl(js,e),Ss!==null&&Hl(Ss,e),ri.forEach(s),ni.forEach(s);for(var i=0;i<_s.length;i++){var c=_s[i];c.blockedOn===e&&(c.blockedOn=null)}for(;0<_s.length&&(i=_s[0],i.blockedOn===null);)gg(i),i.blockedOn===null&&_s.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(c=0;c<i.length;c+=3){var d=i[c],f=i[c+1],v=d[Lt]||null;if(typeof f=="function")v||yg(i);else if(v){var w=null;if(f&&f.hasAttribute("formAction")){if(d=f,v=f[Lt]||null)w=v.formAction;else if(Tu(d)!==null)continue}else w=v.action;typeof w=="function"?i[c+1]=w:(i.splice(c,3),c-=3),yg(i)}}}function Ou(e){this._internalRoot=e}Vl.prototype.render=Ou.prototype.render=function(e){var s=this._internalRoot;if(s===null)throw Error(n(409));var i=s.current,c=Xt();ug(i,c,e,s,null,null)},Vl.prototype.unmount=Ou.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var s=e.containerInfo;ug(e.current,2,null,e,null,null),Cl(),s[rr]=null}};function Vl(e){this._internalRoot=e}Vl.prototype.unstable_scheduleHydration=function(e){if(e){var s=Rd();e={blockedOn:null,target:e,priority:s};for(var i=0;i<_s.length&&s!==0&&s<_s[i].priority;i++);_s.splice(i,0,e),i===0&&gg(e)}};var vg=t.version;if(vg!=="19.1.0")throw Error(n(527,vg,"19.1.0"));Q.findDOMNode=function(e){var s=e._reactInternals;if(s===void 0)throw typeof e.render=="function"?Error(n(188)):(e=Object.keys(e).join(","),Error(n(268,e)));return e=m(s),e=e!==null?p(e):null,e=e===null?null:e.stateNode,e};var Av={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:T,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Ql=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ql.isDisabled&&Ql.supportsFiber)try{We=Ql.inject(Av),He=Ql}catch(e){}}return ci.createRoot=function(e,s){if(!o(e))throw Error(n(299));var i=!1,c="",d=Mf,f=Uf,v=qf,w=null;return s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(f=s.onCaughtError),s.onRecoverableError!==void 0&&(v=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(w=s.unstable_transitionCallbacks)),s=og(e,1,!1,null,null,i,c,d,f,v,w,null),e[rr]=s.current,hu(e),new Ou(s)},ci.hydrateRoot=function(e,s,i){if(!o(e))throw Error(n(299));var c=!1,d="",f=Mf,v=Uf,w=qf,O=null,I=null;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(v=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(O=i.unstable_transitionCallbacks),i.formState!==void 0&&(I=i.formState)),s=og(e,1,!0,s,i!=null?i:null,c,d,f,v,w,O,I),s.context=cg(null),i=s.current,c=Xt(),c=wo(c),d=ls(c),d.callback=null,os(i,d,c),i=c,s.current.lanes=i,fn(s,i),Da(s),e[rr]=s.current,hu(e),new Vl(s)},ci.version="19.1.0",ci}var Sg;function ub(){if(Sg)return ku.exports;Sg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),ku.exports=cb(),ku.exports}var db=ub();const hb=gp(db),fb="modulepreload",mb=function(r){return"/CC_Flow_summary_report/"+r},_g={},gb=function(t,a,n){let o=Promise.resolve();if(a&&a.length>0){let m=function(p){return Promise.all(p.map(y=>Promise.resolve(y).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),g=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));o=m(a.map(p=>{if(p=mb(p),p in _g)return;_g[p]=!0;const y=p.endsWith(".css"),x=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${x}`))return;const b=document.createElement("link");if(b.rel=y?"stylesheet":fb,y||(b.as="script"),b.crossOrigin="",b.href=p,g&&b.setAttribute("nonce",g),document.head.appendChild(b),y)return new Promise((j,N)=>{b.addEventListener("load",j),b.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${p}`)))})}))}function u(h){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=h,window.dispatchEvent(g),!g.defaultPrevented)throw h}return o.then(h=>{for(const g of h||[])g.status==="rejected"&&u(g.reason);return t().catch(u)})};var pb=function(){return null};class yb extends k.Component{constructor(a){super(a);ue(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});ue(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(a){return{hasError:!0,error:a,errorInfo:null}}componentDidCatch(a,n){console.error("ErrorBoundary caught an error:",a,n),this.setState({error:a,errorInfo:n}),this.props.onError&&this.props.onError(a,n)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:l.jsx("div",{className:"error-boundary",children:l.jsxs("div",{className:"error-container",children:[l.jsx("div",{className:"error-icon",children:""}),l.jsx("h2",{children:"Algo sali mal"}),l.jsx("p",{className:"error-message",children:"Ha ocurrido un error inesperado en la aplicacin."}),this.state.error&&l.jsxs("details",{className:"error-details",children:[l.jsx("summary",{children:"Detalles del error"}),l.jsxs("div",{className:"error-stack",children:[l.jsx("strong",{children:"Error:"})," ",this.state.error.message,this.state.errorInfo&&l.jsxs(l.Fragment,{children:[l.jsx("br",{}),l.jsx("strong",{children:"Stack:"}),l.jsx("pre",{children:this.state.errorInfo.componentStack})]})]})]}),l.jsxs("div",{className:"error-actions",children:[l.jsx("button",{onClick:this.handleRetry,className:"retry-btn",children:" Reintentar"}),l.jsx("button",{onClick:this.handleReload,className:"reload-btn",children:" Recargar Pgina"})]}),l.jsx("div",{className:"error-help",children:l.jsx("p",{children:"Si el problema persiste, contacta al equipo de desarrollo."})})]})}):this.props.children}}function mo(r,t){var a={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(a[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(r);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(r,n[o])&&(a[n[o]]=r[n[o]]);return a}function vb(r,t,a,n){function o(u){return u instanceof a?u:new a(function(h){h(u)})}return new(a||(a=Promise))(function(u,h){function g(y){try{p(n.next(y))}catch(x){h(x)}}function m(y){try{p(n.throw(y))}catch(x){h(x)}}function p(y){y.done?u(y.value):o(y.value).then(g,m)}p((n=n.apply(r,t||[])).next())})}const bb=r=>r?(...t)=>r(...t):(...t)=>fetch(...t);class md extends Error{constructor(t,a="FunctionsError",n){super(t),this.name=a,this.context=n}}class xb extends md{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Ng extends md{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Cg extends md{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Wu;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(Wu||(Wu={}));class wb{constructor(t,{headers:a={},customFetch:n,region:o=Wu.Any}={}){this.url=t,this.headers=a,this.region=o,this.fetch=bb(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return vb(this,arguments,void 0,function*(a,n={}){var o;let u,h;try{const{headers:g,method:m,body:p,signal:y,timeout:x}=n;let b={},{region:j}=n;j||(j=this.region);const N=new URL(`${this.url}/${a}`);j&&j!=="any"&&(b["x-region"]=j,N.searchParams.set("forceFunctionRegion",j));let E;p&&(g&&!Object.prototype.hasOwnProperty.call(g,"Content-Type")||!g)?typeof Blob!="undefined"&&p instanceof Blob||p instanceof ArrayBuffer?(b["Content-Type"]="application/octet-stream",E=p):typeof p=="string"?(b["Content-Type"]="text/plain",E=p):typeof FormData!="undefined"&&p instanceof FormData?E=p:(b["Content-Type"]="application/json",E=JSON.stringify(p)):E=p;let A=y;x&&(h=new AbortController,u=setTimeout(()=>h.abort(),x),y?(A=h.signal,y.addEventListener("abort",()=>h.abort())):A=h.signal);const B=yield this.fetch(N.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},b),this.headers),g),body:E,signal:A}).catch(te=>{throw new xb(te)}),U=B.headers.get("x-relay-error");if(U&&U==="true")throw new Ng(B);if(!B.ok)throw new Cg(B);let q=((o=B.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),X;return q==="application/json"?X=yield B.json():q==="application/octet-stream"||q==="application/pdf"?X=yield B.blob():q==="text/event-stream"?X=B:q==="multipart/form-data"?X=yield B.formData():X=yield B.text(),{data:X,error:null,response:B}}catch(g){return{data:null,error:g,response:g instanceof Cg||g instanceof Ng?g.context:void 0}}finally{u&&clearTimeout(u)}})}}var jb=class extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}},Sb=class{constructor(r){var t,a;this.shouldThrowOnError=!1,this.method=r.method,this.url=r.url,this.headers=new Headers(r.headers),this.schema=r.schema,this.body=r.body,this.shouldThrowOnError=(t=r.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=r.signal,this.isMaybeSingle=(a=r.isMaybeSingle)!==null&&a!==void 0?a:!1,r.fetch?this.fetch=r.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(r,t){return this.headers=new Headers(this.headers),this.headers.set(r,t),this}then(r,t){var a=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let o=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(u=>S(this,null,function*(){let h=null,g=null,m=null,p=u.status,y=u.statusText;if(u.ok){var x,b;if(a.method!=="HEAD"){var j;const B=yield u.text();B===""||(a.headers.get("Accept")==="text/csv"||a.headers.get("Accept")&&(!((j=a.headers.get("Accept"))===null||j===void 0)&&j.includes("application/vnd.pgrst.plan+text"))?g=B:g=JSON.parse(B))}const E=(x=a.headers.get("Prefer"))===null||x===void 0?void 0:x.match(/count=(exact|planned|estimated)/),A=(b=u.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");E&&A&&A.length>1&&(m=parseInt(A[1])),a.isMaybeSingle&&a.method==="GET"&&Array.isArray(g)&&(g.length>1?(h={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,m=null,p=406,y="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{var N;const E=yield u.text();try{h=JSON.parse(E),Array.isArray(h)&&u.status===404&&(g=[],h=null,p=200,y="OK")}catch(A){u.status===404&&E===""?(p=204,y="No Content"):h={message:E}}if(h&&a.isMaybeSingle&&(!(h==null||(N=h.details)===null||N===void 0)&&N.includes("0 rows"))&&(h=null,p=200,y="OK"),h&&a.shouldThrowOnError)throw new jb(h)}return{error:h,data:g,count:m,status:p,statusText:y}}));return this.shouldThrowOnError||(o=o.catch(u=>{var h;let g="";const m=u==null?void 0:u.cause;if(m){var p,y,x,b;const N=(p=m==null?void 0:m.message)!==null&&p!==void 0?p:"",E=(y=m==null?void 0:m.code)!==null&&y!==void 0?y:"";g=`${(x=u==null?void 0:u.name)!==null&&x!==void 0?x:"FetchError"}: ${u==null?void 0:u.message}`,g+=`

Caused by: ${(b=m==null?void 0:m.name)!==null&&b!==void 0?b:"Error"}: ${N}`,E&&(g+=` (${E})`),m!=null&&m.stack&&(g+=`
${m.stack}`)}else{var j;g=(j=u==null?void 0:u.stack)!==null&&j!==void 0?j:""}return{error:{message:`${(h=u==null?void 0:u.name)!==null&&h!==void 0?h:"FetchError"}: ${u==null?void 0:u.message}`,details:g,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(r,t)}returns(){return this}overrideTypes(){return this}},_b=class extends Sb{select(r){let t=!1;const a=(r!=null?r:"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(r,{ascending:t=!0,nullsFirst:a,foreignTable:n,referencedTable:o=n}={}){const u=o?`${o}.order`:"order",h=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${h?`${h},`:""}${r}.${t?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:t,referencedTable:a=t}={}){const n=typeof a=="undefined"?"limit":`${a}.limit`;return this.url.searchParams.set(n,`${r}`),this}range(r,t,{foreignTable:a,referencedTable:n=a}={}){const o=typeof n=="undefined"?"offset":`${n}.offset`,u=typeof n=="undefined"?"limit":`${n}.limit`;return this.url.searchParams.set(o,`${r}`),this.url.searchParams.set(u,`${t-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:r=!1,verbose:t=!1,settings:a=!1,buffers:n=!1,wal:o=!1,format:u="text"}={}){var h;const g=[r?"analyze":null,t?"verbose":null,a?"settings":null,n?"buffers":null,o?"wal":null].filter(Boolean).join("|"),m=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${m}"; options=${g};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(r){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${r}`),this}};const Eg=new RegExp("[,()]");var Xr=class extends _b{eq(r,t){return this.url.searchParams.append(r,`eq.${t}`),this}neq(r,t){return this.url.searchParams.append(r,`neq.${t}`),this}gt(r,t){return this.url.searchParams.append(r,`gt.${t}`),this}gte(r,t){return this.url.searchParams.append(r,`gte.${t}`),this}lt(r,t){return this.url.searchParams.append(r,`lt.${t}`),this}lte(r,t){return this.url.searchParams.append(r,`lte.${t}`),this}like(r,t){return this.url.searchParams.append(r,`like.${t}`),this}likeAllOf(r,t){return this.url.searchParams.append(r,`like(all).{${t.join(",")}}`),this}likeAnyOf(r,t){return this.url.searchParams.append(r,`like(any).{${t.join(",")}}`),this}ilike(r,t){return this.url.searchParams.append(r,`ilike.${t}`),this}ilikeAllOf(r,t){return this.url.searchParams.append(r,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(r,t){return this.url.searchParams.append(r,`ilike(any).{${t.join(",")}}`),this}regexMatch(r,t){return this.url.searchParams.append(r,`match.${t}`),this}regexIMatch(r,t){return this.url.searchParams.append(r,`imatch.${t}`),this}is(r,t){return this.url.searchParams.append(r,`is.${t}`),this}isDistinct(r,t){return this.url.searchParams.append(r,`isdistinct.${t}`),this}in(r,t){const a=Array.from(new Set(t)).map(n=>typeof n=="string"&&Eg.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(r,`in.(${a})`),this}notIn(r,t){const a=Array.from(new Set(t)).map(n=>typeof n=="string"&&Eg.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(r,`not.in.(${a})`),this}contains(r,t){return typeof t=="string"?this.url.searchParams.append(r,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(r,`cs.{${t.join(",")}}`):this.url.searchParams.append(r,`cs.${JSON.stringify(t)}`),this}containedBy(r,t){return typeof t=="string"?this.url.searchParams.append(r,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(r,`cd.{${t.join(",")}}`):this.url.searchParams.append(r,`cd.${JSON.stringify(t)}`),this}rangeGt(r,t){return this.url.searchParams.append(r,`sr.${t}`),this}rangeGte(r,t){return this.url.searchParams.append(r,`nxl.${t}`),this}rangeLt(r,t){return this.url.searchParams.append(r,`sl.${t}`),this}rangeLte(r,t){return this.url.searchParams.append(r,`nxr.${t}`),this}rangeAdjacent(r,t){return this.url.searchParams.append(r,`adj.${t}`),this}overlaps(r,t){return typeof t=="string"?this.url.searchParams.append(r,`ov.${t}`):this.url.searchParams.append(r,`ov.{${t.join(",")}}`),this}textSearch(r,t,{config:a,type:n}={}){let o="";n==="plain"?o="pl":n==="phrase"?o="ph":n==="websearch"&&(o="w");const u=a===void 0?"":`(${a})`;return this.url.searchParams.append(r,`${o}fts${u}.${t}`),this}match(r){return Object.entries(r).forEach(([t,a])=>{this.url.searchParams.append(t,`eq.${a}`)}),this}not(r,t,a){return this.url.searchParams.append(r,`not.${t}.${a}`),this}or(r,{foreignTable:t,referencedTable:a=t}={}){const n=a?`${a}.or`:"or";return this.url.searchParams.append(n,`(${r})`),this}filter(r,t,a){return this.url.searchParams.append(r,`${t}.${a}`),this}},Nb=class{constructor(r,{headers:t={},schema:a,fetch:n}){this.url=r,this.headers=new Headers(t),this.schema=a,this.fetch=n}select(r,t){const{head:a=!1,count:n}=t!=null?t:{},o=a?"HEAD":"GET";let u=!1;const h=(r!=null?r:"*").split("").map(g=>/\s/.test(g)&&!u?"":(g==='"'&&(u=!u),g)).join("");return this.url.searchParams.set("select",h),n&&this.headers.append("Prefer",`count=${n}`),new Xr({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(r,{count:t,defaultToNull:a=!0}={}){var n;const o="POST";if(t&&this.headers.append("Prefer",`count=${t}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const u=r.reduce((h,g)=>h.concat(Object.keys(g)),[]);if(u.length>0){const h=[...new Set(u)].map(g=>`"${g}"`);this.url.searchParams.set("columns",h.join(","))}}return new Xr({method:o,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(r,{onConflict:t,ignoreDuplicates:a=!1,count:n,defaultToNull:o=!0}={}){var u;const h="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),n&&this.headers.append("Prefer",`count=${n}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const g=r.reduce((m,p)=>m.concat(Object.keys(p)),[]);if(g.length>0){const m=[...new Set(g)].map(p=>`"${p}"`);this.url.searchParams.set("columns",m.join(","))}}return new Xr({method:h,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(r,{count:t}={}){var a;const n="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new Xr({method:n,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:r}={}){var t;const a="DELETE";return r&&this.headers.append("Prefer",`count=${r}`),new Xr({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},Cb=class vp{constructor(t,{headers:a={},schema:n,fetch:o}={}){this.url=t,this.headers=new Headers(a),this.schemaName=n,this.fetch=o}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Nb(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new vp(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,a={},{head:n=!1,get:o=!1,count:u}={}){var h;let g;const m=new URL(`${this.url}/rpc/${t}`);let p;n||o?(g=n?"HEAD":"GET",Object.entries(a).filter(([x,b])=>b!==void 0).map(([x,b])=>[x,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([x,b])=>{m.searchParams.append(x,b)})):(g="POST",p=a);const y=new Headers(this.headers);return u&&y.set("Prefer",`count=${u}`),new Xr({method:g,url:m,headers:y,schema:this.schemaName,body:p,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}};class Eb{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket!="undefined")return{type:"native",constructor:WebSocket};if(typeof globalThis!="undefined"&&typeof globalThis.WebSocket!="undefined")return{type:"native",constructor:globalThis.WebSocket};if(typeof global!="undefined"&&typeof global.WebSocket!="undefined")return{type:"native",constructor:global.WebSocket};if(typeof globalThis!="undefined"&&typeof globalThis.WebSocketPair!="undefined"&&typeof globalThis.WebSocket=="undefined")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis!="undefined"&&globalThis.EdgeRuntime||typeof navigator!="undefined"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process!="undefined"){const a=process.versions;if(a&&a.node){const n=a.node,o=parseInt(n.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket!="undefined"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let a=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(a+=`

Suggested solution: ${t.workaround}`),new Error(a)}static createWebSocket(t,a){const n=this.getWebSocketConstructor();return new n(t,a)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch(t){return!1}}}const Tb="2.89.0",Db=`realtime-js/${Tb}`,bp="1.0.0",Ob="2.0.0",Tg=bp,Ju=1e4,Ab=1e3,kb=100;var Es;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Es||(Es={}));var xt;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(xt||(xt={}));var ja;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(ja||(ja={}));var Zu;(function(r){r.websocket="websocket"})(Zu||(Zu={}));var Zs;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(Zs||(Zs={}));class Rb{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t!=null?t:[]}encode(t,a){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return a(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return a(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var a;return this._isArrayBuffer((a=t.payload)===null||a===void 0?void 0:a.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var a,n;const o=(n=(a=t.payload)===null||a===void 0?void 0:a.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(t){var a,n;const o=(n=(a=t.payload)===null||a===void 0?void 0:a.payload)!==null&&n!==void 0?n:{},h=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,h)}_encodeUserBroadcastPush(t,a,n){var o,u;const h=t.topic,g=(o=t.ref)!==null&&o!==void 0?o:"",m=(u=t.join_ref)!==null&&u!==void 0?u:"",p=t.payload.event,y=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},x=Object.keys(y).length===0?"":JSON.stringify(y);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`ref length ${g.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`topic length ${h.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(x.length>255)throw new Error(`metadata length ${x.length} exceeds maximum of 255`);const b=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+g.length+h.length+p.length+x.length,j=new ArrayBuffer(this.HEADER_LENGTH+b);let N=new DataView(j),E=0;N.setUint8(E++,this.KINDS.userBroadcastPush),N.setUint8(E++,m.length),N.setUint8(E++,g.length),N.setUint8(E++,h.length),N.setUint8(E++,p.length),N.setUint8(E++,x.length),N.setUint8(E++,a),Array.from(m,B=>N.setUint8(E++,B.charCodeAt(0))),Array.from(g,B=>N.setUint8(E++,B.charCodeAt(0))),Array.from(h,B=>N.setUint8(E++,B.charCodeAt(0))),Array.from(p,B=>N.setUint8(E++,B.charCodeAt(0))),Array.from(x,B=>N.setUint8(E++,B.charCodeAt(0)));var A=new Uint8Array(j.byteLength+n.byteLength);return A.set(new Uint8Array(j),0),A.set(new Uint8Array(n),j.byteLength),A.buffer}decode(t,a){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return a(n)}if(typeof t=="string"){const n=JSON.parse(t),[o,u,h,g,m]=n;return a({join_ref:o,ref:u,topic:h,event:g,payload:m})}return a({})}_binaryDecode(t){const a=new DataView(t),n=a.getUint8(0),o=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,a,o)}}_decodeUserBroadcast(t,a,n){const o=a.getUint8(1),u=a.getUint8(2),h=a.getUint8(3),g=a.getUint8(4);let m=this.HEADER_LENGTH+4;const p=n.decode(t.slice(m,m+o));m=m+o;const y=n.decode(t.slice(m,m+u));m=m+u;const x=n.decode(t.slice(m,m+h));m=m+h;const b=t.slice(m,t.byteLength),j=g===this.JSON_ENCODING?JSON.parse(n.decode(b)):b,N={type:this.BROADCAST_EVENT,event:y,payload:j};return h>0&&(N.meta=JSON.parse(x)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:N}}_isArrayBuffer(t){var a;return t instanceof ArrayBuffer||((a=t==null?void 0:t.constructor)===null||a===void 0?void 0:a.name)==="ArrayBuffer"}_pick(t,a){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>a.includes(n)))}}class xp{constructor(t,a){this.callback=t,this.timerCalc=a,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=a}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Xe;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(Xe||(Xe={}));const Dg=(r,t,a={})=>{var n;const o=(n=a.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((u,h)=>(u[h]=Mb(h,r,t,o),u),{}):{}},Mb=(r,t,a,n)=>{const o=t.find(g=>g.name===r),u=o==null?void 0:o.type,h=a[r];return u&&!n.includes(u)?wp(u,h):ed(h)},wp=(r,t)=>{if(r.charAt(0)==="_"){const a=r.slice(1,r.length);return $b(t,a)}switch(r){case Xe.bool:return Ub(t);case Xe.float4:case Xe.float8:case Xe.int2:case Xe.int4:case Xe.int8:case Xe.numeric:case Xe.oid:return qb(t);case Xe.json:case Xe.jsonb:return Lb(t);case Xe.timestamp:return zb(t);case Xe.abstime:case Xe.date:case Xe.daterange:case Xe.int4range:case Xe.int8range:case Xe.money:case Xe.reltime:case Xe.text:case Xe.time:case Xe.timestamptz:case Xe.timetz:case Xe.tsrange:case Xe.tstzrange:return ed(t);default:return ed(t)}},ed=r=>r,Ub=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},qb=r=>{if(typeof r=="string"){const t=parseFloat(r);if(!Number.isNaN(t))return t}return r},Lb=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(t){return r}return r},$b=(r,t)=>{if(typeof r!="string")return r;const a=r.length-1,n=r[a];if(r[0]==="{"&&n==="}"){let u;const h=r.slice(1,a);try{u=JSON.parse("["+h+"]")}catch(g){u=h?h.split(","):[]}return u.map(g=>wp(t,g))}return r},zb=r=>typeof r=="string"?r.replace(" ","T"):r,jp=r=>{const t=new URL(r);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Uu{constructor(t,a,n={},o=Ju){this.channel=t,this.event=a,this.payload=n,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,a){var n;return this._hasReceived(t)&&a((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:a}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,a){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:a})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:a}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(a))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Og;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(Og||(Og={}));class yi{constructor(t,a){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(a==null?void 0:a.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},o=>{const{onJoin:u,onLeave:h,onSync:g}=this.caller;this.joinRef=this.channel._joinRef(),this.state=yi.syncState(this.state,o,u,h),this.pendingDiffs.forEach(m=>{this.state=yi.syncDiff(this.state,m,u,h)}),this.pendingDiffs=[],g()}),this.channel._on(n.diff,{},o=>{const{onJoin:u,onLeave:h,onSync:g}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=yi.syncDiff(this.state,o,u,h),g())}),this.onJoin((o,u,h)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:u,newPresences:h})}),this.onLeave((o,u,h)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:u,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,a,n,o){const u=this.cloneDeep(t),h=this.transformState(a),g={},m={};return this.map(u,(p,y)=>{h[p]||(m[p]=y)}),this.map(h,(p,y)=>{const x=u[p];if(x){const b=y.map(A=>A.presence_ref),j=x.map(A=>A.presence_ref),N=y.filter(A=>j.indexOf(A.presence_ref)<0),E=x.filter(A=>b.indexOf(A.presence_ref)<0);N.length>0&&(g[p]=N),E.length>0&&(m[p]=E)}else g[p]=y}),this.syncDiff(u,{joins:g,leaves:m},n,o)}static syncDiff(t,a,n,o){const{joins:u,leaves:h}={joins:this.transformState(a.joins),leaves:this.transformState(a.leaves)};return n||(n=()=>{}),o||(o=()=>{}),this.map(u,(g,m)=>{var p;const y=(p=t[g])!==null&&p!==void 0?p:[];if(t[g]=this.cloneDeep(m),y.length>0){const x=t[g].map(j=>j.presence_ref),b=y.filter(j=>x.indexOf(j.presence_ref)<0);t[g].unshift(...b)}n(g,y,m)}),this.map(h,(g,m)=>{let p=t[g];if(!p)return;const y=m.map(x=>x.presence_ref);p=p.filter(x=>y.indexOf(x.presence_ref)<0),t[g]=p,o(g,p,m),p.length===0&&delete t[g]}),t}static map(t,a){return Object.getOwnPropertyNames(t).map(n=>a(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((a,n)=>{const o=t[n];return"metas"in o?a[n]=o.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):a[n]=o,a},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ag;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(Ag||(Ag={}));var vi;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(vi||(vi={}));var Ja;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(Ja||(Ja={}));class Zr{constructor(t,a={config:{}},n){var o,u;if(this.topic=t,this.params=a,this.socket=n,this.bindings={},this.state=xt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},a.config),this.timeout=this.socket.timeout,this.joinPush=new Uu(this,ja.join,this.params,this.timeout),this.rejoinTimer=new xp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=xt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=xt.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=xt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=xt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=xt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ja.reply,{},(h,g)=>{this._trigger(this._replyEventName(g),h)}),this.presence=new yi(this),this.broadcastEndpointURL=jp(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((u=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||u===void 0)&&u.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,a=this.timeout){var n,o,u;if(this.socket.isConnected()||this.socket.connect(),this.state==xt.closed){const{config:{broadcast:h,presence:g,private:m}}=this.params,p=(o=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(j=>j.filter))!==null&&o!==void 0?o:[],y=!!this.bindings[vi.PRESENCE]&&this.bindings[vi.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,x={},b={broadcast:h,presence:Object.assign(Object.assign({},g),{enabled:y}),postgres_changes:p,private:m};this.socket.accessTokenValue&&(x.access_token=this.socket.accessTokenValue),this._onError(j=>t==null?void 0:t(Ja.CHANNEL_ERROR,j)),this._onClose(()=>t==null?void 0:t(Ja.CLOSED)),this.updateJoinPayload(Object.assign({config:b},x)),this.joinedOnce=!0,this._rejoin(a),this.joinPush.receive("ok",N=>S(this,[N],function*({postgres_changes:j}){var E;if(this.socket._isManualToken()||this.socket.setAuth(),j===void 0){t==null||t(Ja.SUBSCRIBED);return}else{const A=this.bindings.postgres_changes,B=(E=A==null?void 0:A.length)!==null&&E!==void 0?E:0,U=[];for(let q=0;q<B;q++){const X=A[q],{filter:{event:te,schema:z,table:ie,filter:C}}=X,_=j&&j[q];if(_&&_.event===te&&Zr.isFilterValueEqual(_.schema,z)&&Zr.isFilterValueEqual(_.table,ie)&&Zr.isFilterValueEqual(_.filter,C))U.push(Object.assign(Object.assign({},X),{id:_.id}));else{this.unsubscribe(),this.state=xt.errored,t==null||t(Ja.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=U,t&&t(Ja.SUBSCRIBED);return}})).receive("error",j=>{this.state=xt.errored,t==null||t(Ja.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(j).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ja.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(n){return S(this,arguments,function*(t,a={}){return yield this.send({type:"presence",event:"track",payload:t},a.timeout||this.timeout)})}untrack(){return S(this,arguments,function*(t={}){return yield this.send({type:"presence",event:"untrack"},t)})}on(t,a,n){return this.state===xt.joined&&t===vi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>S(this,null,function*(){return yield this.subscribe()}))),this._on(t,a,n)}httpSend(o,u){return S(this,arguments,function*(t,a,n={}){var h;if(a==null)return Promise.reject("Payload is required for httpSend()");const g={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(g.Authorization=`Bearer ${this.socket.accessTokenValue}`);const m={method:"POST",headers:g,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:a,private:this.private}]})},p=yield this._fetchWithTimeout(this.broadcastEndpointURL,m,(h=n.timeout)!==null&&h!==void 0?h:this.timeout);if(p.status===202)return{success:!0};let y=p.statusText;try{const x=yield p.json();y=x.error||x.message||y}catch(x){}return Promise.reject(new Error(y))})}send(n){return S(this,arguments,function*(t,a={}){var o,u;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:h,payload:g}=t,m={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(m.Authorization=`Bearer ${this.socket.accessTokenValue}`);const p={method:"POST",headers:m,body:JSON.stringify({messages:[{topic:this.subTopic,event:h,payload:g,private:this.private}]})};try{const y=yield this._fetchWithTimeout(this.broadcastEndpointURL,p,(o=a.timeout)!==null&&o!==void 0?o:this.timeout);return yield(u=y.body)===null||u===void 0?void 0:u.cancel(),y.ok?"ok":"error"}catch(y){return y.name==="AbortError"?"timed out":"error"}}else return new Promise(h=>{var g,m,p;const y=this._push(t.type,t,a.timeout||this.timeout);t.type==="broadcast"&&!(!((p=(m=(g=this.params)===null||g===void 0?void 0:g.config)===null||m===void 0?void 0:m.broadcast)===null||p===void 0)&&p.ack)&&h("ok"),y.receive("ok",()=>h("ok")),y.receive("error",()=>h("error")),y.receive("timeout",()=>h("timed out"))})})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=xt.leaving;const a=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ja.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(o=>{n=new Uu(this,ja.leave,{},t),n.receive("ok",()=>{a(),o("ok")}).receive("timeout",()=>{a(),o("timed out")}).receive("error",()=>{o("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=xt.closed,this.bindings={}}_fetchWithTimeout(t,a,n){return S(this,null,function*(){const o=new AbortController,u=setTimeout(()=>o.abort(),n),h=yield this.socket.fetch(t,Object.assign(Object.assign({},a),{signal:o.signal}));return clearTimeout(u),h})}_push(t,a,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Uu(this,t,a,n);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>kb){const a=this.pushBuffer.shift();a&&(a.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${a.event}`,a.payload))}}_onMessage(t,a,n){return a}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,a,n){var o,u;const h=t.toLocaleLowerCase(),{close:g,error:m,leave:p,join:y}=ja;if(n&&[g,m,p,y].indexOf(h)>=0&&n!==this._joinRef())return;let b=this._onMessage(h,a,n);if(a&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(j=>{var N,E,A;return((N=j.filter)===null||N===void 0?void 0:N.event)==="*"||((A=(E=j.filter)===null||E===void 0?void 0:E.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===h}).map(j=>j.callback(b,n)):(u=this.bindings[h])===null||u===void 0||u.filter(j=>{var N,E,A,B,U,q;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in j){const X=j.id,te=(N=j.filter)===null||N===void 0?void 0:N.event;return X&&((E=a.ids)===null||E===void 0?void 0:E.includes(X))&&(te==="*"||(te==null?void 0:te.toLocaleLowerCase())===((A=a.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const X=(U=(B=j==null?void 0:j.filter)===null||B===void 0?void 0:B.event)===null||U===void 0?void 0:U.toLocaleLowerCase();return X==="*"||X===((q=a==null?void 0:a.event)===null||q===void 0?void 0:q.toLocaleLowerCase())}else return j.type.toLocaleLowerCase()===h}).map(j=>{if(typeof b=="object"&&"ids"in b){const N=b.data,{schema:E,table:A,commit_timestamp:B,type:U,errors:q}=N;b=Object.assign(Object.assign({},{schema:E,table:A,commit_timestamp:B,eventType:U,new:{},old:{},errors:q}),this._getPayloadRecords(N))}j.callback(b,n)})}_isClosed(){return this.state===xt.closed}_isJoined(){return this.state===xt.joined}_isJoining(){return this.state===xt.joining}_isLeaving(){return this.state===xt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,a,n){const o=t.toLocaleLowerCase(),u={type:o,filter:a,callback:n};return this.bindings[o]?this.bindings[o].push(u):this.bindings[o]=[u],this}_off(t,a){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(o=>{var u;return!(((u=o.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===n&&Zr.isEqual(o.filter,a))})),this}static isEqual(t,a){if(Object.keys(t).length!==Object.keys(a).length)return!1;for(const n in t)if(t[n]!==a[n])return!1;return!0}static isFilterValueEqual(t,a){const n=t!=null?t:void 0,o=a!=null?a:void 0;return n===o}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ja.close,{},t)}_onError(t){this._on(ja.error,{},a=>t(a))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=xt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const a={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(a.new=Dg(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(a.old=Dg(t.columns,t.old_record)),a}}const qu=()=>{},Gl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Bb=[1e3,2e3,5e3,1e4],Pb=1e4,Ib=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Hb{constructor(t,a){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ju,this.transport=null,this.heartbeatIntervalMs=Gl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=qu,this.ref=0,this.reconnectTimer=null,this.vsn=Tg,this.logger=qu,this.conn=null,this.sendBuffer=[],this.serializer=new Rb,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>o?(...u)=>o(...u):(...u)=>fetch(...u),!(!((n=a==null?void 0:a.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=a.params.apikey,this.endPoint=`${t}/${Zu.websocket}`,this.httpEndpoint=jp(t),this._initializeOptions(a),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(a==null?void 0:a.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Eb.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const a=t.message;throw a.includes("Node.js")?new Error(`${a}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${a}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,a){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,a!=null?a:""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}removeChannel(t){return S(this,null,function*(){const a=yield t.unsubscribe();return this.channels.length===0&&this.disconnect(),a})}removeAllChannels(){return S(this,null,function*(){const t=yield Promise.all(this.channels.map(a=>a.unsubscribe()));return this.channels=[],this.disconnect(),t})}log(t,a,n){this.logger(t,a,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Es.connecting:return Zs.Connecting;case Es.open:return Zs.Open;case Es.closing:return Zs.Closing;default:return Zs.Closed}}isConnected(){return this.connectionState()===Zs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,a={config:{}}){const n=`realtime:${t}`,o=this.getChannels().find(u=>u.topic===n);if(o)return o;{const u=new Zr(`realtime:${t}`,a,this);return this.channels.push(u),u}}push(t){const{topic:a,event:n,payload:o,ref:u}=t,h=()=>{this.encode(t,g=>{var m;(m=this.conn)===null||m===void 0||m.send(g)})};this.log("push",`${a} ${n} (${u})`,o),this.isConnected()?h():this.sendBuffer.push(h)}setAuth(t=null){return S(this,null,function*(){this._authPromise=this._performAuth(t);try{yield this._authPromise}finally{this._authPromise=null}})}_isManualToken(){return this._manuallySetToken}sendHeartbeat(){return S(this,null,function*(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(a){this.log("error","error in heartbeat callback",a)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(a){this.log("error","error in heartbeat callback",a)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Ab,"heartbeat timeout"),setTimeout(()=>{var a;this.isConnected()||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout()},Gl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(a){this.log("error","error in heartbeat callback",a)}this._setAuthSafely("heartbeat")})}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let a=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));a&&(this.log("transport",`leaving duplicate topic "${t}"`),a.unsubscribe())}_remove(t){this.channels=this.channels.filter(a=>a.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,a=>{if(a.topic==="phoenix"&&a.event==="phx_reply")try{this.heartbeatCallback(a.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}a.ref&&a.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:o,payload:u,ref:h}=a,g=h?`(${h})`:"",m=u.status||"";this.log("receive",`${m} ${n} ${o} ${g}`.trim(),u),this.channels.filter(p=>p._isMember(n)).forEach(p=>p._trigger(o,u,h)),this._triggerStateCallbacks("message",a)})}_clearTimer(t){var a;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((a=this.reconnectTimer)===null||a===void 0||a.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Es.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Es.open||this.conn.readyState===Es.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(a=>{this.log("error","error waiting for auth on connect",a),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this._terminateWorker()},this.workerRef.onmessage=a=>{a.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var a;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(ja.error))}_appendParams(t,a){if(Object.keys(a).length===0)return t;const n=t.match(/\?/)?"&":"?",o=new URLSearchParams(a);return`${t}${n}${o}`}_workerObjectUrl(t){let a;if(t)a=t;else{const n=new Blob([Ib],{type:"application/javascript"});a=URL.createObjectURL(n)}return a}_setConnectionState(t,a=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=a)}_performAuth(t=null){return S(this,null,function*(){let a,n=!1;if(t)a=t,n=!0;else if(this.accessToken)try{a=yield this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),a=this.accessTokenValue}else a=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=a&&(this.accessTokenValue=a,this.channels.forEach(o=>{const u={access_token:a,version:Db};a&&o.updateJoinPayload(u),o.joinedOnce&&o._isJoined()&&o._push(ja.access_token,{access_token:a})}))})}_waitForAuthIfNeeded(){return S(this,null,function*(){this._authPromise&&(yield this._authPromise)})}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(a=>{this.log("error",`Error setting auth in ${t}`,a)})}_triggerStateCallbacks(t,a){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(a)}catch(o){this.log("error",`error in ${t} callback`,o)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new xp(()=>S(this,null,function*(){setTimeout(()=>S(this,null,function*(){yield this._waitForAuthIfNeeded(),this.isConnected()||this.connect()}),Gl.RECONNECT_DELAY)}),this.reconnectAfterMs)}_initializeOptions(t){var a,n,o,u,h,g,m,p,y,x,b,j;switch(this.transport=(a=t==null?void 0:t.transport)!==null&&a!==void 0?a:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Ju,this.heartbeatIntervalMs=(o=t==null?void 0:t.heartbeatIntervalMs)!==null&&o!==void 0?o:Gl.HEARTBEAT_INTERVAL,this.worker=(u=t==null?void 0:t.worker)!==null&&u!==void 0?u:!1,this.accessToken=(h=t==null?void 0:t.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(g=t==null?void 0:t.heartbeatCallback)!==null&&g!==void 0?g:qu,this.vsn=(m=t==null?void 0:t.vsn)!==null&&m!==void 0?m:Tg,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=t==null?void 0:t.reconnectAfterMs)!==null&&p!==void 0?p:N=>Bb[N-1]||Pb,this.vsn){case bp:this.encode=(y=t==null?void 0:t.encode)!==null&&y!==void 0?y:(N,E)=>E(JSON.stringify(N)),this.decode=(x=t==null?void 0:t.decode)!==null&&x!==void 0?x:(N,E)=>E(JSON.parse(N));break;case Ob:this.encode=(b=t==null?void 0:t.encode)!==null&&b!==void 0?b:this.serializer.encode.bind(this.serializer),this.decode=(j=t==null?void 0:t.decode)!==null&&j!==void 0?j:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window!="undefined"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Si=class extends Error{constructor(r,t){var a;super(r),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((a=t.icebergType)==null?void 0:a.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Yb(r,t,a){const n=new URL(t,r);if(a)for(const[o,u]of Object.entries(a))u!==void 0&&n.searchParams.set(o,u);return n.toString()}function Vb(r){return S(this,null,function*(){return!r||r.type==="none"?{}:r.type==="bearer"?{Authorization:`Bearer ${r.token}`}:r.type==="header"?{[r.name]:r.value}:r.type==="custom"?yield r.getHeaders():{}})}function Qb(r){var a;const t=(a=r.fetchImpl)!=null?a:globalThis.fetch;return{request(p){return S(this,arguments,function*({method:o,path:u,query:h,body:g,headers:m}){var A;const y=Yb(r.baseUrl,u,h),x=yield Vb(r.auth),b=yield t(y,{method:o,headers:Ue(Ue(Ue({},g?{"Content-Type":"application/json"}:{}),x),m),body:g?JSON.stringify(g):void 0}),j=yield b.text(),N=(b.headers.get("content-type")||"").includes("application/json"),E=N&&j?JSON.parse(j):j;if(!b.ok){const B=N?E:void 0,U=B==null?void 0:B.error;throw new Si((A=U==null?void 0:U.message)!=null?A:`Request failed with status ${b.status}`,{status:b.status,icebergType:U==null?void 0:U.type,icebergCode:U==null?void 0:U.code,details:B})}return{status:b.status,headers:b.headers,data:E}})}}}function Fl(r){return r.join("")}var Gb=class{constructor(r,t=""){this.client=r,this.prefix=t}listNamespaces(r){return S(this,null,function*(){const t=r?{parent:Fl(r.namespace)}:void 0;return(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))})}createNamespace(r,t){return S(this,null,function*(){const a={namespace:r.namespace,properties:t==null?void 0:t.properties};return(yield this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:a})).data})}dropNamespace(r){return S(this,null,function*(){yield this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Fl(r.namespace)}`})})}loadNamespaceMetadata(r){return S(this,null,function*(){return{properties:(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Fl(r.namespace)}`})).data.properties}})}namespaceExists(r){return S(this,null,function*(){try{return yield this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Fl(r.namespace)}`}),!0}catch(t){if(t instanceof Si&&t.status===404)return!1;throw t}})}createNamespaceIfNotExists(r,t){return S(this,null,function*(){try{return yield this.createNamespace(r,t)}catch(a){if(a instanceof Si&&a.status===409)return;throw a}})}};function Hr(r){return r.join("")}var Fb=class{constructor(r,t="",a){this.client=r,this.prefix=t,this.accessDelegation=a}listTables(r){return S(this,null,function*(){return(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Hr(r.namespace)}/tables`})).data.identifiers})}createTable(r,t){return S(this,null,function*(){const a={};return this.accessDelegation&&(a["X-Iceberg-Access-Delegation"]=this.accessDelegation),(yield this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Hr(r.namespace)}/tables`,body:t,headers:a})).data.metadata})}updateTable(r,t){return S(this,null,function*(){const a=yield this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Hr(r.namespace)}/tables/${r.name}`,body:t});return{"metadata-location":a.data["metadata-location"],metadata:a.data.metadata}})}dropTable(r,t){return S(this,null,function*(){var a;yield this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Hr(r.namespace)}/tables/${r.name}`,query:{purgeRequested:String((a=t==null?void 0:t.purge)!=null?a:!1)}})})}loadTable(r){return S(this,null,function*(){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Hr(r.namespace)}/tables/${r.name}`,headers:t})).data.metadata})}tableExists(r){return S(this,null,function*(){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return yield this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Hr(r.namespace)}/tables/${r.name}`,headers:t}),!0}catch(a){if(a instanceof Si&&a.status===404)return!1;throw a}})}createTableIfNotExists(r,t){return S(this,null,function*(){try{return yield this.createTable(r,t)}catch(a){if(a instanceof Si&&a.status===409)return yield this.loadTable({namespace:r.namespace,name:t.name});throw a}})}},Kb=class{constructor(r){var n;let t="v1";r.catalogName&&(t+=`/${r.catalogName}`);const a=r.baseUrl.endsWith("/")?r.baseUrl:`${r.baseUrl}/`;this.client=Qb({baseUrl:a,auth:r.auth,fetchImpl:r.fetch}),this.accessDelegation=(n=r.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new Gb(this.client,t),this.tableOps=new Fb(this.client,t,this.accessDelegation)}listNamespaces(r){return S(this,null,function*(){return this.namespaceOps.listNamespaces(r)})}createNamespace(r,t){return S(this,null,function*(){return this.namespaceOps.createNamespace(r,t)})}dropNamespace(r){return S(this,null,function*(){yield this.namespaceOps.dropNamespace(r)})}loadNamespaceMetadata(r){return S(this,null,function*(){return this.namespaceOps.loadNamespaceMetadata(r)})}listTables(r){return S(this,null,function*(){return this.tableOps.listTables(r)})}createTable(r,t){return S(this,null,function*(){return this.tableOps.createTable(r,t)})}updateTable(r,t){return S(this,null,function*(){return this.tableOps.updateTable(r,t)})}dropTable(r,t){return S(this,null,function*(){yield this.tableOps.dropTable(r,t)})}loadTable(r){return S(this,null,function*(){return this.tableOps.loadTable(r)})}namespaceExists(r){return S(this,null,function*(){return this.namespaceOps.namespaceExists(r)})}tableExists(r){return S(this,null,function*(){return this.tableOps.tableExists(r)})}createNamespaceIfNotExists(r,t){return S(this,null,function*(){return this.namespaceOps.createNamespaceIfNotExists(r,t)})}createTableIfNotExists(r,t){return S(this,null,function*(){return this.tableOps.createTableIfNotExists(r,t)})}},go=class extends Error{constructor(r){super(r),this.__isStorageError=!0,this.name="StorageError"}};function tt(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}var Xb=class extends go{constructor(r,t,a){super(r),this.name="StorageApiError",this.status=t,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},td=class extends go{constructor(r,t){super(r),this.name="StorageUnknownError",this.originalError=t}};const gd=r=>r?(...t)=>r(...t):(...t)=>fetch(...t),Wb=()=>Response,ad=r=>{if(Array.isArray(r))return r.map(a=>ad(a));if(typeof r=="function"||r!==Object(r))return r;const t={};return Object.entries(r).forEach(([a,n])=>{const o=a.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));t[o]=ad(n)}),t},Jb=r=>{if(typeof r!="object"||r===null)return!1;const t=Object.getPrototypeOf(r);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},Zb=r=>!r||typeof r!="string"||r.length===0||r.length>100||r.trim()!==r||r.includes("/")||r.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(r);function _i(r){"@babel/helpers - typeof";return _i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_i(r)}function ex(r,t){if(_i(r)!="object"||!r)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var n=a.call(r,t);if(_i(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function tx(r){var t=ex(r,"string");return _i(t)=="symbol"?t:t+""}function ax(r,t,a){return(t=tx(t))in r?Object.defineProperty(r,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[t]=a,r}function kg(r,t){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),a.push.apply(a,n)}return a}function je(r){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?kg(Object(a),!0).forEach(function(n){ax(r,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):kg(Object(a)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(a,n))})}return r}const Lu=r=>{var t;return r.msg||r.message||r.error_description||(typeof r.error=="string"?r.error:(t=r.error)===null||t===void 0?void 0:t.message)||JSON.stringify(r)},sx=(r,t,a)=>S(null,null,function*(){r instanceof(yield Wb())&&!(a!=null&&a.noResolveJson)?r.json().then(n=>{const o=r.status||500,u=(n==null?void 0:n.statusCode)||o+"";t(new Xb(Lu(n),o,u))}).catch(n=>{t(new td(Lu(n),n))}):t(new td(Lu(r),r))}),rx=(r,t,a,n)=>{const o={method:r,headers:(t==null?void 0:t.headers)||{}};return r==="GET"||!n?o:(Jb(n)?(o.headers=je({"Content-Type":"application/json"},t==null?void 0:t.headers),o.body=JSON.stringify(n)):o.body=n,t!=null&&t.duplex&&(o.duplex=t.duplex),je(je({},o),a))};function Di(r,t,a,n,o,u){return S(this,null,function*(){return new Promise((h,g)=>{r(a,rx(t,n,o,u)).then(m=>{if(!m.ok)throw m;return n!=null&&n.noResolveJson?m:m.json()}).then(m=>h(m)).catch(m=>sx(m,g,n))})})}function Ni(r,t,a,n){return S(this,null,function*(){return Di(r,"GET",t,a,n)})}function wa(r,t,a,n,o){return S(this,null,function*(){return Di(r,"POST",t,n,o,a)})}function sd(r,t,a,n,o){return S(this,null,function*(){return Di(r,"PUT",t,n,o,a)})}function nx(r,t,a,n){return S(this,null,function*(){return Di(r,"HEAD",t,je(je({},a),{},{noResolveJson:!0}),n)})}function pd(r,t,a,n,o){return S(this,null,function*(){return Di(r,"DELETE",t,n,o,a)})}var ix=class{constructor(r,t){this.downloadFn=r,this.shouldThrowOnError=t}then(r,t){return this.execute().then(r,t)}execute(){return S(this,null,function*(){var r=this;try{return{data:(yield r.downloadFn()).body,error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(tt(t))return{data:null,error:t};throw t}})}};let Sp;Sp=Symbol.toStringTag;var lx=class{constructor(r,t){this.downloadFn=r,this.shouldThrowOnError=t,this[Sp]="BlobDownloadBuilder",this.promise=null}asStream(){return new ix(this.downloadFn,this.shouldThrowOnError)}then(r,t){return this.getPromise().then(r,t)}catch(r){return this.getPromise().catch(r)}finally(r){return this.getPromise().finally(r)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return S(this,null,function*(){var r=this;try{return{data:yield(yield r.downloadFn()).blob(),error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(tt(t))return{data:null,error:t};throw t}})}};const ox={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Rg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var cx=class{constructor(r,t={},a,n){this.shouldThrowOnError=!1,this.url=r,this.headers=t,this.bucketId=a,this.fetch=gd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(r,t,a,n){return S(this,null,function*(){var o=this;try{let u;const h=je(je({},Rg),n);let g=je(je({},o.headers),r==="POST"&&{"x-upsert":String(h.upsert)});const m=h.metadata;typeof Blob!="undefined"&&a instanceof Blob?(u=new FormData,u.append("cacheControl",h.cacheControl),m&&u.append("metadata",o.encodeMetadata(m)),u.append("",a)):typeof FormData!="undefined"&&a instanceof FormData?(u=a,u.has("cacheControl")||u.append("cacheControl",h.cacheControl),m&&!u.has("metadata")&&u.append("metadata",o.encodeMetadata(m))):(u=a,g["cache-control"]=`max-age=${h.cacheControl}`,g["content-type"]=h.contentType,m&&(g["x-metadata"]=o.toBase64(o.encodeMetadata(m))),(typeof ReadableStream!="undefined"&&u instanceof ReadableStream||u&&typeof u=="object"&&"pipe"in u&&typeof u.pipe=="function")&&!h.duplex&&(h.duplex="half")),n!=null&&n.headers&&(g=je(je({},g),n.headers));const p=o._removeEmptyFolders(t),y=o._getFinalPath(p),x=yield(r=="PUT"?sd:wa)(o.fetch,`${o.url}/object/${y}`,u,je({headers:g},h!=null&&h.duplex?{duplex:h.duplex}:{}));return{data:{path:p,id:x.Id,fullPath:x.Key},error:null}}catch(u){if(o.shouldThrowOnError)throw u;if(tt(u))return{data:null,error:u};throw u}})}upload(r,t,a){return S(this,null,function*(){return this.uploadOrUpdate("POST",r,t,a)})}uploadToSignedUrl(r,t,a,n){return S(this,null,function*(){var o=this;const u=o._removeEmptyFolders(r),h=o._getFinalPath(u),g=new URL(o.url+`/object/upload/sign/${h}`);g.searchParams.set("token",t);try{let m;const p=je({upsert:Rg.upsert},n),y=je(je({},o.headers),{"x-upsert":String(p.upsert)});return typeof Blob!="undefined"&&a instanceof Blob?(m=new FormData,m.append("cacheControl",p.cacheControl),m.append("",a)):typeof FormData!="undefined"&&a instanceof FormData?(m=a,m.append("cacheControl",p.cacheControl)):(m=a,y["cache-control"]=`max-age=${p.cacheControl}`,y["content-type"]=p.contentType),{data:{path:u,fullPath:(yield sd(o.fetch,g.toString(),m,{headers:y})).Key},error:null}}catch(m){if(o.shouldThrowOnError)throw m;if(tt(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(r,t){return S(this,null,function*(){var a=this;try{let n=a._getFinalPath(r);const o=je({},a.headers);t!=null&&t.upsert&&(o["x-upsert"]="true");const u=yield wa(a.fetch,`${a.url}/object/upload/sign/${n}`,{},{headers:o}),h=new URL(a.url+u.url),g=h.searchParams.get("token");if(!g)throw new go("No token returned by API");return{data:{signedUrl:h.toString(),path:r,token:g},error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(tt(n))return{data:null,error:n};throw n}})}update(r,t,a){return S(this,null,function*(){return this.uploadOrUpdate("PUT",r,t,a)})}move(r,t,a){return S(this,null,function*(){var n=this;try{return{data:yield wa(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:r,destinationKey:t,destinationBucket:a==null?void 0:a.destinationBucket},{headers:n.headers}),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(tt(o))return{data:null,error:o};throw o}})}copy(r,t,a){return S(this,null,function*(){var n=this;try{return{data:{path:(yield wa(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:r,destinationKey:t,destinationBucket:a==null?void 0:a.destinationBucket},{headers:n.headers})).Key},error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(tt(o))return{data:null,error:o};throw o}})}createSignedUrl(r,t,a){return S(this,null,function*(){var n=this;try{let o=n._getFinalPath(r),u=yield wa(n.fetch,`${n.url}/object/sign/${o}`,je({expiresIn:t},a!=null&&a.transform?{transform:a.transform}:{}),{headers:n.headers});const h=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return u={signedUrl:encodeURI(`${n.url}${u.signedURL}${h}`)},{data:u,error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(tt(o))return{data:null,error:o};throw o}})}createSignedUrls(r,t,a){return S(this,null,function*(){var n=this;try{const o=yield wa(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:r},{headers:n.headers}),u=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return{data:o.map(h=>je(je({},h),{},{signedUrl:h.signedURL?encodeURI(`${n.url}${h.signedURL}${u}`):null})),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(tt(o))return{data:null,error:o};throw o}})}download(r,t){const a=typeof(t==null?void 0:t.transform)!="undefined"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=n?`?${n}`:"",u=this._getFinalPath(r),h=()=>Ni(this.fetch,`${this.url}/${a}/${u}${o}`,{headers:this.headers,noResolveJson:!0});return new lx(h,this.shouldThrowOnError)}info(r){return S(this,null,function*(){var t=this;const a=t._getFinalPath(r);try{return{data:ad(yield Ni(t.fetch,`${t.url}/object/info/${a}`,{headers:t.headers})),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(tt(n))return{data:null,error:n};throw n}})}exists(r){return S(this,null,function*(){var t=this;const a=t._getFinalPath(r);try{return yield nx(t.fetch,`${t.url}/object/${a}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(tt(n)&&n instanceof td){const o=n.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:n}}throw n}})}getPublicUrl(r,t){const a=this._getFinalPath(r),n=[],o=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&n.push(o);const u=typeof(t==null?void 0:t.transform)!="undefined"?"render/image":"object",h=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});h!==""&&n.push(h);let g=n.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${a}${g}`)}}}remove(r){return S(this,null,function*(){var t=this;try{return{data:yield pd(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:r},{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(tt(a))return{data:null,error:a};throw a}})}list(r,t,a){return S(this,null,function*(){var n=this;try{const o=je(je(je({},ox),t),{},{prefix:r||""});return{data:yield wa(n.fetch,`${n.url}/object/list/${n.bucketId}`,o,{headers:n.headers},a),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(tt(o))return{data:null,error:o};throw o}})}listV2(r,t){return S(this,null,function*(){var a=this;try{const n=je({},r);return{data:yield wa(a.fetch,`${a.url}/object/list-v2/${a.bucketId}`,n,{headers:a.headers},t),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(tt(n))return{data:null,error:n};throw n}})}encodeMetadata(r){return JSON.stringify(r)}toBase64(r){return typeof Buffer!="undefined"?Buffer.from(r).toString("base64"):btoa(r)}_getFinalPath(r){return`${this.bucketId}/${r.replace(/^\/+/,"")}`}_removeEmptyFolders(r){return r.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(r){const t=[];return r.width&&t.push(`width=${r.width}`),r.height&&t.push(`height=${r.height}`),r.resize&&t.push(`resize=${r.resize}`),r.format&&t.push(`format=${r.format}`),r.quality&&t.push(`quality=${r.quality}`),t.join("&")}};const _p="2.89.0",Np={"X-Client-Info":`storage-js/${_p}`};var ux=class{constructor(r,t={},a,n){this.shouldThrowOnError=!1;const o=new URL(r);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=je(je({},Np),t),this.fetch=gd(a)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(r){return S(this,null,function*(){var t=this;try{const a=t.listBucketOptionsToQueryString(r);return{data:yield Ni(t.fetch,`${t.url}/bucket${a}`,{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(tt(a))return{data:null,error:a};throw a}})}getBucket(r){return S(this,null,function*(){var t=this;try{return{data:yield Ni(t.fetch,`${t.url}/bucket/${r}`,{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(tt(a))return{data:null,error:a};throw a}})}createBucket(a){return S(this,arguments,function*(r,t={public:!1}){var n=this;try{return{data:yield wa(n.fetch,`${n.url}/bucket`,{id:r,name:r,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(tt(o))return{data:null,error:o};throw o}})}updateBucket(r,t){return S(this,null,function*(){var a=this;try{return{data:yield sd(a.fetch,`${a.url}/bucket/${r}`,{id:r,name:r,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(tt(n))return{data:null,error:n};throw n}})}emptyBucket(r){return S(this,null,function*(){var t=this;try{return{data:yield wa(t.fetch,`${t.url}/bucket/${r}/empty`,{},{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(tt(a))return{data:null,error:a};throw a}})}deleteBucket(r){return S(this,null,function*(){var t=this;try{return{data:yield pd(t.fetch,`${t.url}/bucket/${r}`,{},{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(tt(a))return{data:null,error:a};throw a}})}listBucketOptionsToQueryString(r){const t={};return r&&("limit"in r&&(t.limit=String(r.limit)),"offset"in r&&(t.offset=String(r.offset)),r.search&&(t.search=r.search),r.sortColumn&&(t.sortColumn=r.sortColumn),r.sortOrder&&(t.sortOrder=r.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},dx=class{constructor(r,t={},a){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=je(je({},Np),t),this.fetch=gd(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(r){return S(this,null,function*(){var t=this;try{return{data:yield wa(t.fetch,`${t.url}/bucket`,{name:r},{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(tt(a))return{data:null,error:a};throw a}})}listBuckets(r){return S(this,null,function*(){var t=this;try{const a=new URLSearchParams;(r==null?void 0:r.limit)!==void 0&&a.set("limit",r.limit.toString()),(r==null?void 0:r.offset)!==void 0&&a.set("offset",r.offset.toString()),r!=null&&r.sortColumn&&a.set("sortColumn",r.sortColumn),r!=null&&r.sortOrder&&a.set("sortOrder",r.sortOrder),r!=null&&r.search&&a.set("search",r.search);const n=a.toString(),o=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return{data:yield Ni(t.fetch,o,{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(tt(a))return{data:null,error:a};throw a}})}deleteBucket(r){return S(this,null,function*(){var t=this;try{return{data:yield pd(t.fetch,`${t.url}/bucket/${r}`,{},{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(tt(a))return{data:null,error:a};throw a}})}from(r){var t=this;if(!Zb(r))throw new go("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const a=new Kb({baseUrl:this.url,catalogName:r,auth:{type:"custom",getHeaders:()=>S(this,null,function*(){return t.headers})},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(a,{get(o,u){const h=o[u];return typeof h!="function"?h:(...g)=>S(null,null,function*(){try{return{data:yield h.apply(o,g),error:null}}catch(m){if(n)throw m;return{data:null,error:m}}})}})}};const yd={"X-Client-Info":`storage-js/${_p}`,"Content-Type":"application/json"};var Cp=class extends Error{constructor(r){super(r),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Zt(r){return typeof r=="object"&&r!==null&&"__isStorageVectorsError"in r}var $u=class extends Cp{constructor(r,t,a){super(r),this.name="StorageVectorsApiError",this.status=t,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},hx=class extends Cp{constructor(r,t){super(r),this.name="StorageVectorsUnknownError",this.originalError=t}};const vd=r=>r?(...t)=>r(...t):(...t)=>fetch(...t),fx=r=>{if(typeof r!="object"||r===null)return!1;const t=Object.getPrototypeOf(r);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},Mg=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),mx=(r,t,a)=>S(null,null,function*(){if(r&&typeof r=="object"&&"status"in r&&"ok"in r&&typeof r.status=="number"&&!(a!=null&&a.noResolveJson)){const n=r.status||500,o=r;if(typeof o.json=="function")o.json().then(u=>{const h=(u==null?void 0:u.statusCode)||(u==null?void 0:u.code)||n+"";t(new $u(Mg(u),n,h))}).catch(()=>{const u=n+"";t(new $u(o.statusText||`HTTP ${n} error`,n,u))});else{const u=n+"";t(new $u(o.statusText||`HTTP ${n} error`,n,u))}}else t(new hx(Mg(r),r))}),gx=(r,t,a,n)=>{const o={method:r,headers:(t==null?void 0:t.headers)||{}};return n?(fx(n)?(o.headers=je({"Content-Type":"application/json"},t==null?void 0:t.headers),o.body=JSON.stringify(n)):o.body=n,je(je({},o),a)):o};function px(r,t,a,n,o,u){return S(this,null,function*(){return new Promise((h,g)=>{r(a,gx(t,n,o,u)).then(m=>{if(!m.ok)throw m;if(n!=null&&n.noResolveJson)return m;const p=m.headers.get("content-type");return!p||!p.includes("application/json")?{}:m.json()}).then(m=>h(m)).catch(m=>mx(m,g,n))})})}function ea(r,t,a,n,o){return S(this,null,function*(){return px(r,"POST",t,n,o,a)})}var yx=class{constructor(r,t={},a){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=je(je({},yd),t),this.fetch=vd(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(r){return S(this,null,function*(){var t=this;try{return{data:(yield ea(t.fetch,`${t.url}/CreateIndex`,r,{headers:t.headers}))||{},error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(Zt(a))return{data:null,error:a};throw a}})}getIndex(r,t){return S(this,null,function*(){var a=this;try{return{data:yield ea(a.fetch,`${a.url}/GetIndex`,{vectorBucketName:r,indexName:t},{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Zt(n))return{data:null,error:n};throw n}})}listIndexes(r){return S(this,null,function*(){var t=this;try{return{data:yield ea(t.fetch,`${t.url}/ListIndexes`,r,{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(Zt(a))return{data:null,error:a};throw a}})}deleteIndex(r,t){return S(this,null,function*(){var a=this;try{return{data:(yield ea(a.fetch,`${a.url}/DeleteIndex`,{vectorBucketName:r,indexName:t},{headers:a.headers}))||{},error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Zt(n))return{data:null,error:n};throw n}})}},vx=class{constructor(r,t={},a){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=je(je({},yd),t),this.fetch=vd(a)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(r){return S(this,null,function*(){var t=this;try{if(r.vectors.length<1||r.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield ea(t.fetch,`${t.url}/PutVectors`,r,{headers:t.headers}))||{},error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(Zt(a))return{data:null,error:a};throw a}})}getVectors(r){return S(this,null,function*(){var t=this;try{return{data:yield ea(t.fetch,`${t.url}/GetVectors`,r,{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(Zt(a))return{data:null,error:a};throw a}})}listVectors(r){return S(this,null,function*(){var t=this;try{if(r.segmentCount!==void 0){if(r.segmentCount<1||r.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(r.segmentIndex!==void 0&&(r.segmentIndex<0||r.segmentIndex>=r.segmentCount))throw new Error(`segmentIndex must be between 0 and ${r.segmentCount-1}`)}return{data:yield ea(t.fetch,`${t.url}/ListVectors`,r,{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(Zt(a))return{data:null,error:a};throw a}})}queryVectors(r){return S(this,null,function*(){var t=this;try{return{data:yield ea(t.fetch,`${t.url}/QueryVectors`,r,{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(Zt(a))return{data:null,error:a};throw a}})}deleteVectors(r){return S(this,null,function*(){var t=this;try{if(r.keys.length<1||r.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield ea(t.fetch,`${t.url}/DeleteVectors`,r,{headers:t.headers}))||{},error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(Zt(a))return{data:null,error:a};throw a}})}},bx=class{constructor(r,t={},a){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=je(je({},yd),t),this.fetch=vd(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(r){return S(this,null,function*(){var t=this;try{return{data:(yield ea(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:r},{headers:t.headers}))||{},error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(Zt(a))return{data:null,error:a};throw a}})}getBucket(r){return S(this,null,function*(){var t=this;try{return{data:yield ea(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:r},{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(Zt(a))return{data:null,error:a};throw a}})}listBuckets(){return S(this,arguments,function*(r={}){var t=this;try{return{data:yield ea(t.fetch,`${t.url}/ListVectorBuckets`,r,{headers:t.headers}),error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(Zt(a))return{data:null,error:a};throw a}})}deleteBucket(r){return S(this,null,function*(){var t=this;try{return{data:(yield ea(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:r},{headers:t.headers}))||{},error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(Zt(a))return{data:null,error:a};throw a}})}},xx=class r extends bx{constructor(t,a={}){super(t,a.headers||{},a.fetch)}from(t){return new wx(this.url,this.headers,t,this.fetch)}createBucket(t){return S(this,null,function*(){var a=()=>It(r.prototype,this,"createBucket"),n=this;return a().call(n,t)})}getBucket(t){return S(this,null,function*(){var a=()=>It(r.prototype,this,"getBucket"),n=this;return a().call(n,t)})}listBuckets(){return S(this,arguments,function*(t={}){var a=()=>It(r.prototype,this,"listBuckets"),n=this;return a().call(n,t)})}deleteBucket(t){return S(this,null,function*(){var a=()=>It(r.prototype,this,"deleteBucket"),n=this;return a().call(n,t)})}},wx=class r extends yx{constructor(t,a,n,o){super(t,a,o),this.vectorBucketName=n}createIndex(t){return S(this,null,function*(){var a=()=>It(r.prototype,this,"createIndex"),n=this;return a().call(n,je(je({},t),{},{vectorBucketName:n.vectorBucketName}))})}listIndexes(){return S(this,arguments,function*(t={}){var a=()=>It(r.prototype,this,"listIndexes"),n=this;return a().call(n,je(je({},t),{},{vectorBucketName:n.vectorBucketName}))})}getIndex(t){return S(this,null,function*(){var a=()=>It(r.prototype,this,"getIndex"),n=this;return a().call(n,n.vectorBucketName,t)})}deleteIndex(t){return S(this,null,function*(){var a=()=>It(r.prototype,this,"deleteIndex"),n=this;return a().call(n,n.vectorBucketName,t)})}index(t){return new jx(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},jx=class r extends vx{constructor(t,a,n,o,u){super(t,a,u),this.vectorBucketName=n,this.indexName=o}putVectors(t){return S(this,null,function*(){var a=()=>It(r.prototype,this,"putVectors"),n=this;return a().call(n,je(je({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))})}getVectors(t){return S(this,null,function*(){var a=()=>It(r.prototype,this,"getVectors"),n=this;return a().call(n,je(je({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))})}listVectors(){return S(this,arguments,function*(t={}){var a=()=>It(r.prototype,this,"listVectors"),n=this;return a().call(n,je(je({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))})}queryVectors(t){return S(this,null,function*(){var a=()=>It(r.prototype,this,"queryVectors"),n=this;return a().call(n,je(je({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))})}deleteVectors(t){return S(this,null,function*(){var a=()=>It(r.prototype,this,"deleteVectors"),n=this;return a().call(n,je(je({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))})}},Sx=class extends ux{constructor(r,t={},a,n){super(r,t,a,n)}from(r){return new cx(this.url,this.headers,r,this.fetch)}get vectors(){return new xx(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new dx(this.url+"/iceberg",this.headers,this.fetch)}};const Ep="2.89.0",Wr=30*1e3,rd=3,zu=rd*Wr,_x="http://localhost:9999",Nx="supabase.auth.token",Cx={"X-Client-Info":`gotrue-js/${Ep}`},nd="X-Supabase-Api-Version",Tp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Ex=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Tx=10*60*1e3;class Ci extends Error{constructor(t,a,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=a,this.code=n}}function pe(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class Dx extends Ci{constructor(t,a,n){super(t,a,n),this.name="AuthApiError",this.status=a,this.code=n}}function Ox(r){return pe(r)&&r.name==="AuthApiError"}class er extends Ci{constructor(t,a){super(t),this.name="AuthUnknownError",this.originalError=a}}class es extends Ci{constructor(t,a,n,o){super(t,n,o),this.name=a,this.status=n}}class Jt extends es{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Ax(r){return pe(r)&&r.name==="AuthSessionMissingError"}class Yr extends es{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Kl extends es{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Xl extends es{constructor(t,a=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function kx(r){return pe(r)&&r.name==="AuthImplicitGrantRedirectError"}class Ug extends es{constructor(t,a=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Rx extends es{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class id extends es{constructor(t,a){super(t,"AuthRetryableFetchError",a,void 0)}}function Bu(r){return pe(r)&&r.name==="AuthRetryableFetchError"}class qg extends es{constructor(t,a,n){super(t,"AuthWeakPasswordError",a,"weak_password"),this.reasons=n}}class ld extends es{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const no="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Lg=` 	
\r=`.split(""),Mx=(()=>{const r=new Array(128);for(let t=0;t<r.length;t+=1)r[t]=-1;for(let t=0;t<Lg.length;t+=1)r[Lg[t].charCodeAt(0)]=-2;for(let t=0;t<no.length;t+=1)r[no[t].charCodeAt(0)]=t;return r})();function $g(r,t,a){if(r!==null)for(t.queue=t.queue<<8|r,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;a(no[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;a(no[n]),t.queuedBits-=6}}function Dp(r,t,a){const n=Mx[r];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)a(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function zg(r){const t=[],a=h=>{t.push(String.fromCodePoint(h))},n={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},u=h=>{Lx(h,n,a)};for(let h=0;h<r.length;h+=1)Dp(r.charCodeAt(h),o,u);return t.join("")}function Ux(r,t){if(r<=127){t(r);return}else if(r<=2047){t(192|r>>6),t(128|r&63);return}else if(r<=65535){t(224|r>>12),t(128|r>>6&63),t(128|r&63);return}else if(r<=1114111){t(240|r>>18),t(128|r>>12&63),t(128|r>>6&63),t(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function qx(r,t){for(let a=0;a<r.length;a+=1){let n=r.charCodeAt(a);if(n>55295&&n<=56319){const o=(n-55296)*1024&65535;n=(r.charCodeAt(a+1)-56320&65535|o)+65536,a+=1}Ux(n,t)}}function Lx(r,t,a){if(t.utf8seq===0){if(r<=127){a(r);return}for(let n=1;n<6;n+=1)if((r>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=r&31;else if(t.utf8seq===3)t.codepoint=r&15;else if(t.utf8seq===4)t.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|r&63,t.utf8seq-=1,t.utf8seq===0&&a(t.codepoint)}}function tn(r){const t=[],a={queue:0,queuedBits:0},n=o=>{t.push(o)};for(let o=0;o<r.length;o+=1)Dp(r.charCodeAt(o),a,n);return new Uint8Array(t)}function $x(r){const t=[];return qx(r,a=>t.push(a)),new Uint8Array(t)}function tr(r){const t=[],a={queue:0,queuedBits:0},n=o=>{t.push(o)};return r.forEach(o=>$g(o,a,n)),$g(null,a,n),t.join("")}function zx(r){return Math.round(Date.now()/1e3)+r}function Bx(){return Symbol("auth-callback")}const Rt=()=>typeof window!="undefined"&&typeof document!="undefined",Ks={tested:!1,writable:!1},Op=()=>{if(!Rt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch(t){return!1}if(Ks.tested)return Ks.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),Ks.tested=!0,Ks.writable=!0}catch(t){Ks.tested=!0,Ks.writable=!1}return Ks.writable};function Px(r){const t={},a=new URL(r);if(a.hash&&a.hash[0]==="#")try{new URLSearchParams(a.hash.substring(1)).forEach((o,u)=>{t[u]=o})}catch(n){}return a.searchParams.forEach((n,o)=>{t[o]=n}),t}const Ap=r=>r?(...t)=>r(...t):(...t)=>fetch(...t),Ix=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Jr=(r,t,a)=>S(null,null,function*(){yield r.setItem(t,JSON.stringify(a))}),Xs=(r,t)=>S(null,null,function*(){const a=yield r.getItem(t);if(!a)return null;try{return JSON.parse(a)}catch(n){return a}}),kt=(r,t)=>S(null,null,function*(){yield r.removeItem(t)});class po{constructor(){this.promise=new po.promiseConstructor((t,a)=>{this.resolve=t,this.reject=a})}}po.promiseConstructor=Promise;function Pu(r){const t=r.split(".");if(t.length!==3)throw new ld("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Ex.test(t[n]))throw new ld("JWT not in base64url format");return{header:JSON.parse(zg(t[0])),payload:JSON.parse(zg(t[1])),signature:tn(t[2]),raw:{header:t[0],payload:t[1]}}}function Hx(r){return S(this,null,function*(){return yield new Promise(t=>{setTimeout(()=>t(null),r)})})}function Yx(r,t){return new Promise((n,o)=>{S(null,null,function*(){for(let u=0;u<1/0;u++)try{const h=yield r(u);if(!t(u,null,h)){n(h);return}}catch(h){if(!t(u,h)){o(h);return}}})})}function Vx(r){return("0"+r.toString(16)).substr(-2)}function Qx(){const t=new Uint32Array(56);if(typeof crypto=="undefined"){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=a.length;let o="";for(let u=0;u<56;u++)o+=a.charAt(Math.floor(Math.random()*n));return o}return crypto.getRandomValues(t),Array.from(t,Vx).join("")}function Gx(r){return S(this,null,function*(){const a=new TextEncoder().encode(r),n=yield crypto.subtle.digest("SHA-256",a),o=new Uint8Array(n);return Array.from(o).map(u=>String.fromCharCode(u)).join("")})}function Fx(r){return S(this,null,function*(){if(!(typeof crypto!="undefined"&&typeof crypto.subtle!="undefined"&&typeof TextEncoder!="undefined"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const a=yield Gx(r);return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})}function Vr(r,t,a=!1){return S(this,null,function*(){const n=Qx();let o=n;a&&(o+="/PASSWORD_RECOVERY"),yield Jr(r,`${t}-code-verifier`,o);const u=yield Fx(n);return[u,n===u?"plain":"s256"]})}const Kx=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Xx(r){const t=r.headers.get(nd);if(!t||!t.match(Kx))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(a){return null}}function Wx(r){if(!r)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(r<=t)throw new Error("JWT has expired")}function Jx(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Zx=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Qr(r){if(!Zx.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Iu(){const r={};return new Proxy(r,{get:(t,a)=>{if(a==="__isUserNotAvailableProxy")return!0;if(typeof a=="symbol"){const n=a.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${a}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ew(r,t){return new Proxy(r,{get:(a,n,o)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const u=n.toString();if(u==="Symbol(Symbol.toPrimitive)"||u==="Symbol(Symbol.toStringTag)"||u==="Symbol(util.inspect.custom)"||u==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(a,n,o)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(a,n,o)}})}function Bg(r){return JSON.parse(JSON.stringify(r))}const Ws=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),tw=[502,503,504];function Pg(r){return S(this,null,function*(){var t;if(!Ix(r))throw new id(Ws(r),0);if(tw.includes(r.status))throw new id(Ws(r),r.status);let a;try{a=yield r.json()}catch(u){throw new er(Ws(u),u)}let n;const o=Xx(r);if(o&&o.getTime()>=Tp["2024-01-01"].timestamp&&typeof a=="object"&&a&&typeof a.code=="string"?n=a.code:typeof a=="object"&&a&&typeof a.error_code=="string"&&(n=a.error_code),n){if(n==="weak_password")throw new qg(Ws(a),r.status,((t=a.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Jt}else if(typeof a=="object"&&a&&typeof a.weak_password=="object"&&a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.reasons.reduce((u,h)=>u&&typeof h=="string",!0))throw new qg(Ws(a),r.status,a.weak_password.reasons);throw new Dx(Ws(a),r.status||500,n)})}const aw=(r,t,a,n)=>{const o={method:r,headers:(t==null?void 0:t.headers)||{}};return r==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),o.body=JSON.stringify(n),Object.assign(Object.assign({},o),a))};function we(r,t,a,n){return S(this,null,function*(){var o;const u=Object.assign({},n==null?void 0:n.headers);u[nd]||(u[nd]=Tp["2024-01-01"].name),n!=null&&n.jwt&&(u.Authorization=`Bearer ${n.jwt}`);const h=(o=n==null?void 0:n.query)!==null&&o!==void 0?o:{};n!=null&&n.redirectTo&&(h.redirect_to=n.redirectTo);const g=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",m=yield sw(r,t,a+g,{headers:u,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(m):{data:Object.assign({},m),error:null}})}function sw(r,t,a,n,o,u){return S(this,null,function*(){const h=aw(t,n,o,u);let g;try{g=yield r(a,Object.assign({},h))}catch(m){throw console.error(m),new id(Ws(m),0)}if(g.ok||(yield Pg(g)),n!=null&&n.noResolveJson)return g;try{return yield g.json()}catch(m){yield Pg(m)}})}function xa(r){var t;let a=null;iw(r)&&(a=Object.assign({},r),r.expires_at||(a.expires_at=zx(r.expires_in)));const n=(t=r.user)!==null&&t!==void 0?t:r;return{data:{session:a,user:n},error:null}}function Ig(r){const t=xa(r);return!t.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((a,n)=>a&&typeof n=="string",!0)&&(t.data.weak_password=r.weak_password),t}function Ts(r){var t;return{data:{user:(t=r.user)!==null&&t!==void 0?t:r},error:null}}function rw(r){return{data:r,error:null}}function nw(r){const{action_link:t,email_otp:a,hashed_token:n,redirect_to:o,verification_type:u}=r,h=mo(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),g={action_link:t,email_otp:a,hashed_token:n,redirect_to:o,verification_type:u},m=Object.assign({},h);return{data:{properties:g,user:m},error:null}}function Hg(r){return r}function iw(r){return r.access_token&&r.refresh_token&&r.expires_in}const Hu=["global","local","others"];class lw{constructor({url:t="",headers:a={},fetch:n}){this.url=t,this.headers=a,this.fetch=Ap(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}signOut(n){return S(this,arguments,function*(t,a=Hu[0]){if(Hu.indexOf(a)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Hu.join(", ")}`);try{return yield we(this.fetch,"POST",`${this.url}/logout?scope=${a}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(o){if(pe(o))return{data:null,error:o};throw o}})}inviteUserByEmail(n){return S(this,arguments,function*(t,a={}){try{return yield we(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:a.data},headers:this.headers,redirectTo:a.redirectTo,xform:Ts})}catch(o){if(pe(o))return{data:{user:null},error:o};throw o}})}generateLink(t){return S(this,null,function*(){try{const{options:a}=t,n=mo(t,["options"]),o=Object.assign(Object.assign({},n),a);return"newEmail"in n&&(o.new_email=n==null?void 0:n.newEmail,delete o.newEmail),yield we(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:nw,redirectTo:a==null?void 0:a.redirectTo})}catch(a){if(pe(a))return{data:{properties:null,user:null},error:a};throw a}})}createUser(t){return S(this,null,function*(){try{return yield we(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ts})}catch(a){if(pe(a))return{data:{user:null},error:a};throw a}})}listUsers(t){return S(this,null,function*(){var a,n,o,u,h,g,m;try{const p={nextPage:null,lastPage:0,total:0},y=yield we(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(a=t==null?void 0:t.page)===null||a===void 0?void 0:a.toString())!==null&&n!==void 0?n:"",per_page:(u=(o=t==null?void 0:t.perPage)===null||o===void 0?void 0:o.toString())!==null&&u!==void 0?u:""},xform:Hg});if(y.error)throw y.error;const x=yield y.json(),b=(h=y.headers.get("x-total-count"))!==null&&h!==void 0?h:0,j=(m=(g=y.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&m!==void 0?m:[];return j.length>0&&(j.forEach(N=>{const E=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(N.split(";")[1].split("=")[1]);p[`${A}Page`]=E}),p.total=parseInt(b)),{data:Object.assign(Object.assign({},x),p),error:null}}catch(p){if(pe(p))return{data:{users:[]},error:p};throw p}})}getUserById(t){return S(this,null,function*(){Qr(t);try{return yield we(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ts})}catch(a){if(pe(a))return{data:{user:null},error:a};throw a}})}updateUserById(t,a){return S(this,null,function*(){Qr(t);try{return yield we(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:a,headers:this.headers,xform:Ts})}catch(n){if(pe(n))return{data:{user:null},error:n};throw n}})}deleteUser(t,a=!1){return S(this,null,function*(){Qr(t);try{return yield we(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:a},xform:Ts})}catch(n){if(pe(n))return{data:{user:null},error:n};throw n}})}_listFactors(t){return S(this,null,function*(){Qr(t.userId);try{const{data:a,error:n}=yield we(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:a,error:n}}catch(a){if(pe(a))return{data:null,error:a};throw a}})}_deleteFactor(t){return S(this,null,function*(){Qr(t.userId),Qr(t.id);try{return{data:yield we(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(a){if(pe(a))return{data:null,error:a};throw a}})}_listOAuthClients(t){return S(this,null,function*(){var a,n,o,u,h,g,m;try{const p={nextPage:null,lastPage:0,total:0},y=yield we(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(a=t==null?void 0:t.page)===null||a===void 0?void 0:a.toString())!==null&&n!==void 0?n:"",per_page:(u=(o=t==null?void 0:t.perPage)===null||o===void 0?void 0:o.toString())!==null&&u!==void 0?u:""},xform:Hg});if(y.error)throw y.error;const x=yield y.json(),b=(h=y.headers.get("x-total-count"))!==null&&h!==void 0?h:0,j=(m=(g=y.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&m!==void 0?m:[];return j.length>0&&(j.forEach(N=>{const E=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(N.split(";")[1].split("=")[1]);p[`${A}Page`]=E}),p.total=parseInt(b)),{data:Object.assign(Object.assign({},x),p),error:null}}catch(p){if(pe(p))return{data:{clients:[]},error:p};throw p}})}_createOAuthClient(t){return S(this,null,function*(){try{return yield we(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(pe(a))return{data:null,error:a};throw a}})}_getOAuthClient(t){return S(this,null,function*(){try{return yield we(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(pe(a))return{data:null,error:a};throw a}})}_updateOAuthClient(t,a){return S(this,null,function*(){try{return yield we(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:a,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(pe(n))return{data:null,error:n};throw n}})}_deleteOAuthClient(t){return S(this,null,function*(){try{return yield we(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(a){if(pe(a))return{data:null,error:a};throw a}})}_regenerateOAuthClientSecret(t){return S(this,null,function*(){try{return yield we(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(pe(a))return{data:null,error:a};throw a}})}}function Yg(r={}){return{getItem:t=>r[t]||null,setItem:(t,a)=>{r[t]=a},removeItem:t=>{delete r[t]}}}const Gr={debug:!!(globalThis&&Op()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class kp extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class ow extends kp{}function cw(r,t,a){return S(this,null,function*(){Gr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Gr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},t),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(r,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},o=>S(null,null,function*(){if(o){Gr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,o.name);try{return yield a()}finally{Gr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,o.name)}}else{if(t===0)throw Gr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new ow(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(Gr.debug)try{const u=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield a()}})))})}function uw(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(r){typeof self!="undefined"&&(self.globalThis=self)}}function Rp(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function dw(r){return parseInt(r,16)}function hw(r){const t=new TextEncoder().encode(r);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function fw(r){var t;const{chainId:a,domain:n,expirationTime:o,issuedAt:u=new Date,nonce:h,notBefore:g,requestId:m,resources:p,scheme:y,uri:x,version:b}=r;{if(!Number.isInteger(a))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${a}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!x)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(b!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${b}`);if(!((t=r.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const j=Rp(r.address),N=y?`${y}://${n}`:n,E=r.statement?`${r.statement}
`:"",A=`${N} wants you to sign in with your Ethereum account:
${j}

${E}`;let B=`URI: ${x}
Version: ${b}
Chain ID: ${a}${h?`
Nonce: ${h}`:""}
Issued At: ${u.toISOString()}`;if(o&&(B+=`
Expiration Time: ${o.toISOString()}`),g&&(B+=`
Not Before: ${g.toISOString()}`),m&&(B+=`
Request ID: ${m}`),p){let U=`
Resources:`;for(const q of p){if(!q||typeof q!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${q}`);U+=`
- ${q}`}B+=U}return`${A}
${B}`}class yt extends Error{constructor({message:t,code:a,cause:n,name:o}){var u;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(u=o!=null?o:n instanceof Error?n.name:void 0)!==null&&u!==void 0?u:"Unknown Error",this.code=a}}class io extends yt{constructor(t,a){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a,message:t}),this.name="WebAuthnUnknownError",this.originalError=a}}function mw({error:r,options:t}){var a,n,o;const{publicKey:u}=t;if(!u)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(t.signal instanceof AbortSignal)return new yt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((a=u.authenticatorSelection)===null||a===void 0?void 0:a.requireResidentKey)===!0)return new yt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(t.mediation==="conditional"&&((n=u.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new yt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((o=u.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new yt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new yt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new yt({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return u.pubKeyCredParams.filter(g=>g.type==="public-key").length===0?new yt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new yt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const h=window.location.hostname;if(Mp(h)){if(u.rp.id!==h)return new yt({message:`The RP ID "${u.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new yt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(u.user.id.byteLength<1||u.user.id.byteLength>64)return new yt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new yt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new yt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function gw({error:r,options:t}){const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(t.signal instanceof AbortSignal)return new yt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new yt({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const n=window.location.hostname;if(Mp(n)){if(a.rpId!==n)return new yt({message:`The RP ID "${a.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new yt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new yt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new yt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}class pw{createNewAbortSignal(){if(this.controller){const a=new Error("Cancelling existing WebAuthn API call for new one");a.name="AbortError",this.controller.abort(a)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const yw=new pw;function vw(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential!="undefined"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:t,user:a,excludeCredentials:n}=r,o=mo(r,["challenge","user","excludeCredentials"]),u=tn(t).buffer,h=Object.assign(Object.assign({},a),{id:tn(a.id).buffer}),g=Object.assign(Object.assign({},o),{challenge:u,user:h});if(n&&n.length>0){g.excludeCredentials=new Array(n.length);for(let m=0;m<n.length;m++){const p=n[m];g.excludeCredentials[m]=Object.assign(Object.assign({},p),{id:tn(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return g}function bw(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential!="undefined"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:t,allowCredentials:a}=r,n=mo(r,["challenge","allowCredentials"]),o=tn(t).buffer,u=Object.assign(Object.assign({},n),{challenge:o});if(a&&a.length>0){u.allowCredentials=new Array(a.length);for(let h=0;h<a.length;h++){const g=a[h];u.allowCredentials[h]=Object.assign(Object.assign({},g),{id:tn(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return u}function xw(r){var t;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const a=r;return{id:r.id,rawId:r.id,response:{attestationObject:tr(new Uint8Array(r.response.attestationObject)),clientDataJSON:tr(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(t=a.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function ww(r){var t;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const a=r,n=r.getClientExtensionResults(),o=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:tr(new Uint8Array(o.authenticatorData)),clientDataJSON:tr(new Uint8Array(o.clientDataJSON)),signature:tr(new Uint8Array(o.signature)),userHandle:o.userHandle?tr(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=a.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Mp(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function Vg(){var r,t;return!!(Rt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator==null?void 0:navigator.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}function jw(r){return S(this,null,function*(){try{const t=yield navigator.credentials.create(r);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new io("Browser returned unexpected credential type",t)}:{data:null,error:new io("Empty credential response",t)}}catch(t){return{data:null,error:mw({error:t,options:r})}}})}function Sw(r){return S(this,null,function*(){try{const t=yield navigator.credentials.get(r);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new io("Browser returned unexpected credential type",t)}:{data:null,error:new io("Empty credential response",t)}}catch(t){return{data:null,error:gw({error:t,options:r})}}})}const _w={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Nw={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function lo(...r){const t=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),a=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),n={};for(const o of r)if(o)for(const u in o){const h=o[u];if(h!==void 0)if(Array.isArray(h))n[u]=h;else if(a(h))n[u]=h;else if(t(h)){const g=n[u];t(g)?n[u]=lo(g,h):n[u]=lo(h)}else n[u]=h}return n}function Cw(r,t){return lo(_w,r,t||{})}function Ew(r,t){return lo(Nw,r,t||{})}class Tw{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}_enroll(t){return S(this,null,function*(){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))})}_challenge(h,g){return S(this,arguments,function*({factorId:t,webauthn:a,friendlyName:n,signal:o},u){try{const{data:m,error:p}=yield this.client.mfa.challenge({factorId:t,webauthn:a});if(!m)return{data:null,error:p};const y=o!=null?o:yw.createNewAbortSignal();if(m.webauthn.type==="create"){const{user:x}=m.webauthn.credential_options.publicKey;x.name||(x.name=`${x.id}:${n}`),x.displayName||(x.displayName=x.name)}switch(m.webauthn.type){case"create":{const x=Cw(m.webauthn.credential_options.publicKey,u==null?void 0:u.create),{data:b,error:j}=yield jw({publicKey:x,signal:y});return b?{data:{factorId:t,challengeId:m.id,webauthn:{type:m.webauthn.type,credential_response:b}},error:null}:{data:null,error:j}}case"request":{const x=Ew(m.webauthn.credential_options.publicKey,u==null?void 0:u.request),{data:b,error:j}=yield Sw(Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:x,signal:y}));return b?{data:{factorId:t,challengeId:m.id,webauthn:{type:m.webauthn.type,credential_response:b}},error:null}:{data:null,error:j}}}}catch(m){return pe(m)?{data:null,error:m}:{data:null,error:new er("Unexpected error in challenge",m)}}})}_verify(o){return S(this,arguments,function*({challengeId:t,factorId:a,webauthn:n}){return this.client.mfa.verify({factorId:a,challengeId:t,webauthn:n})})}_authenticate(h,g){return S(this,arguments,function*({factorId:t,webauthn:{rpId:a=typeof window!="undefined"?window.location.hostname:void 0,rpOrigins:n=typeof window!="undefined"?[window.location.origin]:void 0,signal:o}={}},u){if(!a)return{data:null,error:new Ci("rpId is required for WebAuthn authentication")};try{if(!Vg())return{data:null,error:new er("Browser does not support WebAuthn",null)};const{data:m,error:p}=yield this.challenge({factorId:t,webauthn:{rpId:a,rpOrigins:n},signal:o},{request:u});if(!m)return{data:null,error:p};const{webauthn:y}=m;return this._verify({factorId:t,challengeId:m.challengeId,webauthn:{type:y.type,rpId:a,rpOrigins:n,credential_response:y.credential_response}})}catch(m){return pe(m)?{data:null,error:m}:{data:null,error:new er("Unexpected error in authenticate",m)}}})}_register(h,g){return S(this,arguments,function*({friendlyName:t,webauthn:{rpId:a=typeof window!="undefined"?window.location.hostname:void 0,rpOrigins:n=typeof window!="undefined"?[window.location.origin]:void 0,signal:o}={}},u){if(!a)return{data:null,error:new Ci("rpId is required for WebAuthn registration")};try{if(!Vg())return{data:null,error:new er("Browser does not support WebAuthn",null)};const{data:m,error:p}=yield this._enroll({friendlyName:t});if(!m)return yield this.client.mfa.listFactors().then(b=>{var j;return(j=b.data)===null||j===void 0?void 0:j.all.find(N=>N.factor_type==="webauthn"&&N.friendly_name===t&&N.status!=="unverified")}).then(b=>b?this.client.mfa.unenroll({factorId:b==null?void 0:b.id}):void 0),{data:null,error:p};const{data:y,error:x}=yield this._challenge({factorId:m.id,friendlyName:m.friendly_name,webauthn:{rpId:a,rpOrigins:n},signal:o},{create:u});return y?this._verify({factorId:m.id,challengeId:y.challengeId,webauthn:{rpId:a,rpOrigins:n,type:y.webauthn.type,credential_response:y.webauthn.credential_response}}):{data:null,error:x}}catch(m){return pe(m)?{data:null,error:m}:{data:null,error:new er("Unexpected error in register",m)}}})}}uw();const Dw={url:_x,storageKey:Nx,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Cx,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};function Qg(r,t,a){return S(this,null,function*(){return yield a()})}const Fr={};class Ei{get jwks(){var t,a;return(a=(t=Fr[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&a!==void 0?a:{keys:[]}}set jwks(t){Fr[this.storageKey]=Object.assign(Object.assign({},Fr[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,a;return(a=(t=Fr[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Fr[this.storageKey]=Object.assign(Object.assign({},Fr[this.storageKey]),{cachedAt:t})}constructor(t){var a,n,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const u=Object.assign(Object.assign({},Dw),t);if(this.storageKey=u.storageKey,this.instanceID=(a=Ei.nextInstanceID[this.storageKey])!==null&&a!==void 0?a:0,Ei.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.instanceID>0&&Rt()){const h=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(h),this.logDebugMessages&&console.trace(h)}if(this.persistSession=u.persistSession,this.autoRefreshToken=u.autoRefreshToken,this.admin=new lw({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=Ap(u.fetch),this.lock=u.lock||Qg,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,this.throwOnError=u.throwOnError,u.lock?this.lock=u.lock:this.persistSession&&Rt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=cw:this.lock=Qg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Tw(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(u.storage?this.storage=u.storage:Op()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Yg(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=Yg(this.memoryStorage)),Rt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(h){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",h)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",h=>S(this,null,function*(){this._debug("received broadcast notification from other tab or client",h),yield this._notifyAllSubscribers(h.data.event,h.data.session,!1)}))}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Ep}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}initialize(){return S(this,null,function*(){return this.initializePromise?yield this.initializePromise:(this.initializePromise=S(this,null,function*(){return yield this._acquireLock(-1,()=>S(this,null,function*(){return yield this._initialize()}))}),yield this.initializePromise)})}_initialize(){return S(this,null,function*(){var t;try{let a={},n="none";if(Rt()&&(a=Px(window.location.href),this._isImplicitGrantCallback(a)?n="implicit":(yield this._isPKCECallback(a))&&(n="pkce")),Rt()&&this.detectSessionInUrl&&n!=="none"){const{data:o,error:u}=yield this._getSessionFromURL(a,n);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),kx(u)){const m=(t=u.details)===null||t===void 0?void 0:t.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:u}}return yield this._removeSession(),{error:u}}const{session:h,redirectType:g}=o;return this._debug("#_initialize()","detected session in URL",h,"redirect type",g),yield this._saveSession(h),setTimeout(()=>S(this,null,function*(){g==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",h):yield this._notifyAllSubscribers("SIGNED_IN",h)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(a){return pe(a)?this._returnResult({error:a}):this._returnResult({error:new er("Unexpected error during initialization",a)})}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signInAnonymously(t){return S(this,null,function*(){var a,n,o;try{const u=yield we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(o=t==null?void 0:t.options)===null||o===void 0?void 0:o.captchaToken}},xform:xa}),{data:h,error:g}=u;if(g||!h)return this._returnResult({data:{user:null,session:null},error:g});const m=h.session,p=h.user;return h.session&&(yield this._saveSession(h.session),yield this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(u){if(pe(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}})}signUp(t){return S(this,null,function*(){var a,n,o;try{let u;if("email"in t){const{email:y,password:x,options:b}=t;let j=null,N=null;this.flowType==="pkce"&&([j,N]=yield Vr(this.storage,this.storageKey)),u=yield we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b==null?void 0:b.emailRedirectTo,body:{email:y,password:x,data:(a=b==null?void 0:b.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},code_challenge:j,code_challenge_method:N},xform:xa})}else if("phone"in t){const{phone:y,password:x,options:b}=t;u=yield we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:x,data:(n=b==null?void 0:b.data)!==null&&n!==void 0?n:{},channel:(o=b==null?void 0:b.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken}},xform:xa})}else throw new Kl("You must provide either an email or phone number and a password");const{data:h,error:g}=u;if(g||!h)return yield kt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:g});const m=h.session,p=h.user;return h.session&&(yield this._saveSession(h.session),yield this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(u){if(yield kt(this.storage,`${this.storageKey}-code-verifier`),pe(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}})}signInWithPassword(t){return S(this,null,function*(){try{let a;if("email"in t){const{email:u,password:h,options:g}=t;a=yield we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:h,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Ig})}else if("phone"in t){const{phone:u,password:h,options:g}=t;a=yield we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:h,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Ig})}else throw new Kl("You must provide either an email or phone number and a password");const{data:n,error:o}=a;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!n||!n.session||!n.user){const u=new Yr;return this._returnResult({data:{user:null,session:null},error:u})}return n.session&&(yield this._saveSession(n.session),yield this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:o})}catch(a){if(pe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}signInWithOAuth(t){return S(this,null,function*(){var a,n,o,u;return yield this._handleProviderSignIn(t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(u=t.options)===null||u===void 0?void 0:u.skipBrowserRedirect})})}exchangeCodeForSession(t){return S(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>S(this,null,function*(){return this._exchangeCodeForSession(t)}))})}signInWithWeb3(t){return S(this,null,function*(){const{chain:a}=t;switch(a){case"ethereum":return yield this.signInWithEthereum(t);case"solana":return yield this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${a}"`)}})}signInWithEthereum(t){return S(this,null,function*(){var a,n,o,u,h,g,m,p,y,x,b;let j,N;if("message"in t)j=t.message,N=t.signature;else{const{chain:E,wallet:A,statement:B,options:U}=t;let q;if(Rt())if(typeof A=="object")q=A;else{const _=window;if("ethereum"in _&&typeof _.ethereum=="object"&&"request"in _.ethereum&&typeof _.ethereum.request=="function")q=_.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!(U!=null&&U.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");q=A}const X=new URL((a=U==null?void 0:U.url)!==null&&a!==void 0?a:window.location.href),te=yield q.request({method:"eth_requestAccounts"}).then(_=>_).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!te||te.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const z=Rp(te[0]);let ie=(n=U==null?void 0:U.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!ie){const _=yield q.request({method:"eth_chainId"});ie=dw(_)}const C={domain:X.host,address:z,statement:B,uri:X.href,version:"1",chainId:ie,nonce:(o=U==null?void 0:U.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(h=(u=U==null?void 0:U.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(g=U==null?void 0:U.signInWithEthereum)===null||g===void 0?void 0:g.expirationTime,notBefore:(m=U==null?void 0:U.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(p=U==null?void 0:U.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(y=U==null?void 0:U.signInWithEthereum)===null||y===void 0?void 0:y.resources};j=fw(C),N=yield q.request({method:"personal_sign",params:[hw(j),z]})}try{const{data:E,error:A}=yield we(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:j,signature:N},!((x=t.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(b=t.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:xa});if(A)throw A;if(!E||!E.session||!E.user){const B=new Yr;return this._returnResult({data:{user:null,session:null},error:B})}return E.session&&(yield this._saveSession(E.session),yield this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:A})}catch(E){if(pe(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}})}signInWithSolana(t){return S(this,null,function*(){var a,n,o,u,h,g,m,p,y,x,b,j;let N,E;if("message"in t)N=t.message,E=t.signature;else{const{chain:A,wallet:B,statement:U,options:q}=t;let X;if(Rt())if(typeof B=="object")X=B;else{const z=window;if("solana"in z&&typeof z.solana=="object"&&("signIn"in z.solana&&typeof z.solana.signIn=="function"||"signMessage"in z.solana&&typeof z.solana.signMessage=="function"))X=z.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof B!="object"||!(q!=null&&q.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");X=B}const te=new URL((a=q==null?void 0:q.url)!==null&&a!==void 0?a:window.location.href);if("signIn"in X&&X.signIn){const z=yield X.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},q==null?void 0:q.signInWithSolana),{version:"1",domain:te.host,uri:te.href}),U?{statement:U}:null));let ie;if(Array.isArray(z)&&z[0]&&typeof z[0]=="object")ie=z[0];else if(z&&typeof z=="object"&&"signedMessage"in z&&"signature"in z)ie=z;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ie&&"signature"in ie&&(typeof ie.signedMessage=="string"||ie.signedMessage instanceof Uint8Array)&&ie.signature instanceof Uint8Array)N=typeof ie.signedMessage=="string"?ie.signedMessage:new TextDecoder().decode(ie.signedMessage),E=ie.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in X)||typeof X.signMessage!="function"||!("publicKey"in X)||typeof X!="object"||!X.publicKey||!("toBase58"in X.publicKey)||typeof X.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");N=[`${te.host} wants you to sign in with your Solana account:`,X.publicKey.toBase58(),...U?["",U,""]:[""],"Version: 1",`URI: ${te.href}`,`Issued At: ${(o=(n=q==null?void 0:q.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((u=q==null?void 0:q.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${q.signInWithSolana.notBefore}`]:[],...!((h=q==null?void 0:q.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${q.signInWithSolana.expirationTime}`]:[],...!((g=q==null?void 0:q.signInWithSolana)===null||g===void 0)&&g.chainId?[`Chain ID: ${q.signInWithSolana.chainId}`]:[],...!((m=q==null?void 0:q.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${q.signInWithSolana.nonce}`]:[],...!((p=q==null?void 0:q.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${q.signInWithSolana.requestId}`]:[],...!((x=(y=q==null?void 0:q.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||x===void 0)&&x.length?["Resources",...q.signInWithSolana.resources.map(ie=>`- ${ie}`)]:[]].join(`
`);const z=yield X.signMessage(new TextEncoder().encode(N),"utf8");if(!z||!(z instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=z}}try{const{data:A,error:B}=yield we(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:N,signature:tr(E)},!((b=t.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(j=t.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:xa});if(B)throw B;if(!A||!A.session||!A.user){const U=new Yr;return this._returnResult({data:{user:null,session:null},error:U})}return A.session&&(yield this._saveSession(A.session),yield this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:B})}catch(A){if(pe(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}})}_exchangeCodeForSession(t){return S(this,null,function*(){const a=yield Xs(this.storage,`${this.storageKey}-code-verifier`),[n,o]=(a!=null?a:"").split("/");try{if(!n&&this.flowType==="pkce")throw new Rx;const{data:u,error:h}=yield we(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:xa});if(yield kt(this.storage,`${this.storageKey}-code-verifier`),h)throw h;if(!u||!u.session||!u.user){const g=new Yr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:g})}return u.session&&(yield this._saveSession(u.session),yield this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:Object.assign(Object.assign({},u),{redirectType:o!=null?o:null}),error:h})}catch(u){if(yield kt(this.storage,`${this.storageKey}-code-verifier`),pe(u))return this._returnResult({data:{user:null,session:null,redirectType:null},error:u});throw u}})}signInWithIdToken(t){return S(this,null,function*(){try{const{options:a,provider:n,token:o,access_token:u,nonce:h}=t,g=yield we(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:o,access_token:u,nonce:h,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:xa}),{data:m,error:p}=g;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!m||!m.session||!m.user){const y=new Yr;return this._returnResult({data:{user:null,session:null},error:y})}return m.session&&(yield this._saveSession(m.session),yield this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:p})}catch(a){if(pe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}signInWithOtp(t){return S(this,null,function*(){var a,n,o,u,h;try{if("email"in t){const{email:g,options:m}=t;let p=null,y=null;this.flowType==="pkce"&&([p,y]=yield Vr(this.storage,this.storageKey));const{error:x}=yield we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:g,data:(a=m==null?void 0:m.data)!==null&&a!==void 0?a:{},create_user:(n=m==null?void 0:m.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:y},redirectTo:m==null?void 0:m.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:x})}if("phone"in t){const{phone:g,options:m}=t,{data:p,error:y}=yield we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:g,data:(o=m==null?void 0:m.data)!==null&&o!==void 0?o:{},create_user:(u=m==null?void 0:m.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},channel:(h=m==null?void 0:m.channel)!==null&&h!==void 0?h:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:y})}throw new Kl("You must provide either an email or phone number.")}catch(g){if(yield kt(this.storage,`${this.storageKey}-code-verifier`),pe(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}})}verifyOtp(t){return S(this,null,function*(){var a,n;try{let o,u;"options"in t&&(o=(a=t.options)===null||a===void 0?void 0:a.redirectTo,u=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:h,error:g}=yield we(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:u}}),redirectTo:o,xform:xa});if(g)throw g;if(!h)throw new Error("An error occurred on token verification.");const m=h.session,p=h.user;return m!=null&&m.access_token&&(yield this._saveSession(m),yield this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(o){if(pe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}signInWithSSO(t){return S(this,null,function*(){var a,n,o,u,h;try{let g=null,m=null;this.flowType==="pkce"&&([g,m]=yield Vr(this.storage,this.storageKey));const p=yield we(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(a=t.options)===null||a===void 0?void 0:a.redirectTo)!==null&&n!==void 0?n:void 0}),!((o=t==null?void 0:t.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:g,code_challenge_method:m}),headers:this.headers,xform:rw});return!((u=p.data)===null||u===void 0)&&u.url&&Rt()&&!(!((h=t.options)===null||h===void 0)&&h.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(g){if(yield kt(this.storage,`${this.storageKey}-code-verifier`),pe(g))return this._returnResult({data:null,error:g});throw g}})}reauthenticate(){return S(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>S(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return S(this,null,function*(){try{return yield this._useSession(t=>S(this,null,function*(){const{data:{session:a},error:n}=t;if(n)throw n;if(!a)throw new Jt;const{error:o}=yield we(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:a.access_token});return this._returnResult({data:{user:null,session:null},error:o})}))}catch(t){if(pe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}})}resend(t){return S(this,null,function*(){try{const a=`${this.url}/resend`;if("email"in t){const{email:n,type:o,options:u}=t,{error:h}=yield we(this.fetch,"POST",a,{headers:this.headers,body:{email:n,type:o,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},redirectTo:u==null?void 0:u.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}else if("phone"in t){const{phone:n,type:o,options:u}=t,{data:h,error:g}=yield we(this.fetch,"POST",a,{headers:this.headers,body:{phone:n,type:o,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:g})}throw new Kl("You must provide either an email or phone number and a type")}catch(a){if(pe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}getSession(){return S(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>S(this,null,function*(){return this._useSession(a=>S(this,null,function*(){return a}))}))})}_acquireLock(t,a){return S(this,null,function*(){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=S(this,null,function*(){return yield n,yield a()});return this.pendingInLock.push(S(this,null,function*(){try{yield o}catch(u){}})),o}return yield this.lock(`lock:${this.storageKey}`,t,()=>S(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=a();for(this.pendingInLock.push(S(this,null,function*(){try{yield n}catch(o){}})),yield n;this.pendingInLock.length;){const o=[...this.pendingInLock];yield Promise.all(o),this.pendingInLock.splice(0,o.length)}return yield n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(t){return S(this,null,function*(){this._debug("#_useSession","begin");try{const a=yield this.__loadSession();return yield t(a)}finally{this._debug("#_useSession","end")}})}__loadSession(){return S(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const a=yield Xs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",a),a!==null&&(this._isValidSession(a)?t=a:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<zu:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const h=yield Xs(this.userStorage,this.storageKey+"-user");h!=null&&h.user?t.user=h.user:t.user=Iu()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const h={value:this.suppressGetSessionWarning};t.user=ew(t.user,h),h.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:o,error:u}=yield this._callRefreshToken(t.refresh_token);return u?this._returnResult({data:{session:null},error:u}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}})}getUser(t){return S(this,null,function*(){if(t)return yield this._getUser(t);yield this.initializePromise;const a=yield this._acquireLock(-1,()=>S(this,null,function*(){return yield this._getUser()}));return a.data.user&&(this.suppressGetSessionWarning=!0),a})}_getUser(t){return S(this,null,function*(){try{return t?yield we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ts}):yield this._useSession(a=>S(this,null,function*(){var n,o,u;const{data:h,error:g}=a;if(g)throw g;return!(!((n=h.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Jt}:yield we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(o=h.session)===null||o===void 0?void 0:o.access_token)!==null&&u!==void 0?u:void 0,xform:Ts})}))}catch(a){if(pe(a))return Ax(a)&&(yield this._removeSession(),yield kt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:a});throw a}})}updateUser(n){return S(this,arguments,function*(t,a={}){return yield this.initializePromise,yield this._acquireLock(-1,()=>S(this,null,function*(){return yield this._updateUser(t,a)}))})}_updateUser(n){return S(this,arguments,function*(t,a={}){try{return yield this._useSession(o=>S(this,null,function*(){const{data:u,error:h}=o;if(h)throw h;if(!u.session)throw new Jt;const g=u.session;let m=null,p=null;this.flowType==="pkce"&&t.email!=null&&([m,p]=yield Vr(this.storage,this.storageKey));const{data:y,error:x}=yield we(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:a==null?void 0:a.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:m,code_challenge_method:p}),jwt:g.access_token,xform:Ts});if(x)throw x;return g.user=y.user,yield this._saveSession(g),yield this._notifyAllSubscribers("USER_UPDATED",g),this._returnResult({data:{user:g.user},error:null})}))}catch(o){if(yield kt(this.storage,`${this.storageKey}-code-verifier`),pe(o))return this._returnResult({data:{user:null},error:o});throw o}})}setSession(t){return S(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>S(this,null,function*(){return yield this._setSession(t)}))})}_setSession(t){return S(this,null,function*(){try{if(!t.access_token||!t.refresh_token)throw new Jt;const a=Date.now()/1e3;let n=a,o=!0,u=null;const{payload:h}=Pu(t.access_token);if(h.exp&&(n=h.exp,o=n<=a),o){const{data:g,error:m}=yield this._callRefreshToken(t.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!g)return{data:{user:null,session:null},error:null};u=g}else{const{data:g,error:m}=yield this._getUser(t.access_token);if(m)throw m;u={access_token:t.access_token,refresh_token:t.refresh_token,user:g.user,token_type:"bearer",expires_in:n-a,expires_at:n},yield this._saveSession(u),yield this._notifyAllSubscribers("SIGNED_IN",u)}return this._returnResult({data:{user:u.user,session:u},error:null})}catch(a){if(pe(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}})}refreshSession(t){return S(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>S(this,null,function*(){return yield this._refreshSession(t)}))})}_refreshSession(t){return S(this,null,function*(){try{return yield this._useSession(a=>S(this,null,function*(){var n;if(!t){const{data:h,error:g}=a;if(g)throw g;t=(n=h.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Jt;const{data:o,error:u}=yield this._callRefreshToken(t.refresh_token);return u?this._returnResult({data:{user:null,session:null},error:u}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})}))}catch(a){if(pe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}_getSessionFromURL(t,a){return S(this,null,function*(){try{if(!Rt())throw new Xl("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Xl(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(a){case"implicit":if(this.flowType==="pkce")throw new Ug("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Xl("Not a valid implicit grant flow url.");break;default:}if(a==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Ug("No code detected.");const{data:U,error:q}=yield this._exchangeCodeForSession(t.code);if(q)throw q;const X=new URL(window.location.href);return X.searchParams.delete("code"),window.history.replaceState(window.history.state,"",X.toString()),{data:{session:U.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:o,access_token:u,refresh_token:h,expires_in:g,expires_at:m,token_type:p}=t;if(!u||!g||!h||!p)throw new Xl("No session defined in URL");const y=Math.round(Date.now()/1e3),x=parseInt(g);let b=y+x;m&&(b=parseInt(m));const j=b-y;j*1e3<=Wr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${j}s, should have been closer to ${x}s`);const N=b-x;y-N>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",N,b,y):y-N<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",N,b,y);const{data:E,error:A}=yield this._getUser(u);if(A)throw A;const B={provider_token:n,provider_refresh_token:o,access_token:u,expires_in:x,expires_at:b,refresh_token:h,token_type:p,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:B,redirectType:t.type},error:null})}catch(n){if(pe(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}})}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}_isPKCECallback(t){return S(this,null,function*(){const a=yield Xs(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&a)})}signOut(){return S(this,arguments,function*(t={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(-1,()=>S(this,null,function*(){return yield this._signOut(t)}))})}_signOut(){return S(this,arguments,function*({scope:t}={scope:"global"}){return yield this._useSession(a=>S(this,null,function*(){var n;const{data:o,error:u}=a;if(u)return this._returnResult({error:u});const h=(n=o.session)===null||n===void 0?void 0:n.access_token;if(h){const{error:g}=yield this.admin.signOut(h,t);if(g&&!(Ox(g)&&(g.status===404||g.status===401||g.status===403)))return this._returnResult({error:g})}return t!=="others"&&(yield this._removeSession(),yield kt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})}))})}onAuthStateChange(t){const a=Bx(),n={id:a,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",a),this.stateChangeEmitters.delete(a)}};return this._debug("#onAuthStateChange()","registered callback with id",a),this.stateChangeEmitters.set(a,n),S(this,null,function*(){yield this.initializePromise,yield this._acquireLock(-1,()=>S(this,null,function*(){this._emitInitialSession(a)}))}),{data:{subscription:n}}}_emitInitialSession(t){return S(this,null,function*(){return yield this._useSession(a=>S(this,null,function*(){var n,o;try{const{data:{session:u},error:h}=a;if(h)throw h;yield(n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",u),this._debug("INITIAL_SESSION","callback id",t,"session",u)}catch(u){yield(o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",t,"error",u),console.error(u)}}))})}resetPasswordForEmail(n){return S(this,arguments,function*(t,a={}){let o=null,u=null;this.flowType==="pkce"&&([o,u]=yield Vr(this.storage,this.storageKey,!0));try{return yield we(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:o,code_challenge_method:u,gotrue_meta_security:{captcha_token:a.captchaToken}},headers:this.headers,redirectTo:a.redirectTo})}catch(h){if(yield kt(this.storage,`${this.storageKey}-code-verifier`),pe(h))return this._returnResult({data:null,error:h});throw h}})}getUserIdentities(){return S(this,null,function*(){var t;try{const{data:a,error:n}=yield this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=a.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(a){if(pe(a))return this._returnResult({data:null,error:a});throw a}})}linkIdentity(t){return S(this,null,function*(){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)})}linkIdentityOAuth(t){return S(this,null,function*(){var a;try{const{data:n,error:o}=yield this._useSession(u=>S(this,null,function*(){var h,g,m,p,y;const{data:x,error:b}=u;if(b)throw b;const j=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(h=t.options)===null||h===void 0?void 0:h.redirectTo,scopes:(g=t.options)===null||g===void 0?void 0:g.scopes,queryParams:(m=t.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return yield we(this.fetch,"GET",j,{headers:this.headers,jwt:(y=(p=x.session)===null||p===void 0?void 0:p.access_token)!==null&&y!==void 0?y:void 0})}));if(o)throw o;return Rt()&&!(!((a=t.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(pe(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}})}linkIdentityIdToken(t){return S(this,null,function*(){return yield this._useSession(a=>S(this,null,function*(){var n;try{const{error:o,data:{session:u}}=a;if(o)throw o;const{options:h,provider:g,token:m,access_token:p,nonce:y}=t,x=yield we(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=u==null?void 0:u.access_token)!==null&&n!==void 0?n:void 0,body:{provider:g,id_token:m,access_token:p,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:xa}),{data:b,error:j}=x;return j?this._returnResult({data:{user:null,session:null},error:j}):!b||!b.session||!b.user?this._returnResult({data:{user:null,session:null},error:new Yr}):(b.session&&(yield this._saveSession(b.session),yield this._notifyAllSubscribers("USER_UPDATED",b.session)),this._returnResult({data:b,error:j}))}catch(o){if(yield kt(this.storage,`${this.storageKey}-code-verifier`),pe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}))})}unlinkIdentity(t){return S(this,null,function*(){try{return yield this._useSession(a=>S(this,null,function*(){var n,o;const{data:u,error:h}=a;if(h)throw h;return yield we(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(o=(n=u.session)===null||n===void 0?void 0:n.access_token)!==null&&o!==void 0?o:void 0})}))}catch(a){if(pe(a))return this._returnResult({data:null,error:a});throw a}})}_refreshAccessToken(t){return S(this,null,function*(){const a=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{const n=Date.now();return yield Yx(o=>S(this,null,function*(){return o>0&&(yield Hx(200*Math.pow(2,o-1))),this._debug(a,"refreshing attempt",o),yield we(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:xa})}),(o,u)=>{const h=200*Math.pow(2,o);return u&&Bu(u)&&Date.now()+h-n<Wr})}catch(n){if(this._debug(a,"error",n),pe(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(a,"end")}})}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}_handleProviderSignIn(t,a){return S(this,null,function*(){const n=yield this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",a,"url",n),Rt()&&!a.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}})}_recoverAndRefresh(){return S(this,null,function*(){var t,a;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const o=yield Xs(this.storage,this.storageKey);if(o&&this.userStorage){let h=yield Xs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:o.user},yield Jr(this.userStorage,this.storageKey+"-user",h)),o.user=(t=h==null?void 0:h.user)!==null&&t!==void 0?t:Iu()}else if(o&&!o.user&&!o.user){const h=yield Xs(this.storage,this.storageKey+"-user");h&&(h!=null&&h.user)?(o.user=h.user,yield kt(this.storage,this.storageKey+"-user"),yield Jr(this.storage,this.storageKey,o)):o.user=Iu()}if(this._debug(n,"session from storage",o),!this._isValidSession(o)){this._debug(n,"session is not valid"),o!==null&&(yield this._removeSession());return}const u=((a=o.expires_at)!==null&&a!==void 0?a:1/0)*1e3-Date.now()<zu;if(this._debug(n,`session has${u?"":" not"} expired with margin of ${zu}s`),u){if(this.autoRefreshToken&&o.refresh_token){const{error:h}=yield this._callRefreshToken(o.refresh_token);h&&(console.error(h),Bu(h)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",h),yield this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:g}=yield this._getUser(o.access_token);!g&&(h!=null&&h.user)?(o.user=h.user,yield this._saveSession(o),yield this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(n,"error getting user data, skipping SIGNED_IN notification",h)}else yield this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(n,"error",o),console.error(o);return}finally{this._debug(n,"end")}})}_callRefreshToken(t){return S(this,null,function*(){var a,n;if(!t)throw new Jt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new po;const{data:u,error:h}=yield this._refreshAccessToken(t);if(h)throw h;if(!u.session)throw new Jt;yield this._saveSession(u.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const g={data:u.session,error:null};return this.refreshingDeferred.resolve(g),g}catch(u){if(this._debug(o,"error",u),pe(u)){const h={data:null,error:u};return Bu(u)||(yield this._removeSession()),(a=this.refreshingDeferred)===null||a===void 0||a.resolve(h),h}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(u),u}finally{this.refreshingDeferred=null,this._debug(o,"end")}})}_notifyAllSubscribers(t,a,n=!0){return S(this,null,function*(){const o=`#_notifyAllSubscribers(${t})`;this._debug(o,"begin",a,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:a});const u=[],h=Array.from(this.stateChangeEmitters.values()).map(g=>S(this,null,function*(){try{yield g.callback(t,a)}catch(m){u.push(m)}}));if(yield Promise.all(h),u.length>0){for(let g=0;g<u.length;g+=1)console.error(u[g]);throw u[0]}}finally{this._debug(o,"end")}})}_saveSession(t){return S(this,null,function*(){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,yield kt(this.storage,`${this.storageKey}-code-verifier`);const a=Object.assign({},t),n=a.user&&a.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&a.user&&(yield Jr(this.userStorage,this.storageKey+"-user",{user:a.user}));const o=Object.assign({},a);delete o.user;const u=Bg(o);yield Jr(this.storage,this.storageKey,u)}else{const o=Bg(a);yield Jr(this.storage,this.storageKey,o)}})}_removeSession(){return S(this,null,function*(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,yield kt(this.storage,this.storageKey),yield kt(this.storage,this.storageKey+"-code-verifier"),yield kt(this.storage,this.storageKey+"-user"),this.userStorage&&(yield kt(this.userStorage,this.storageKey+"-user")),yield this._notifyAllSubscribers("SIGNED_OUT",null)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Rt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(a){console.error("removing visibilitychange callback failed",a)}}_startAutoRefresh(){return S(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Wr);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno!="undefined"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(()=>S(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0)})}_stopAutoRefresh(){return S(this,null,function*(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)})}startAutoRefresh(){return S(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return S(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return S(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>S(this,null,function*(){try{const t=Date.now();try{return yield this._useSession(a=>S(this,null,function*(){const{data:{session:n}}=a;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((n.expires_at*1e3-t)/Wr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Wr}ms, refresh threshold is ${rd} ticks`),o<=rd&&(yield this._callRefreshToken(n.refresh_token))}))}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(t){if(t.isAcquireTimeout||t instanceof kp)this._debug("auto refresh token tick lock not available");else throw t}})}_handleVisibilityChange(){return S(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!Rt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>S(this,null,function*(){return yield this._onVisibilityChanged(!1)}),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}})}_onVisibilityChanged(t){return S(this,null,function*(){const a=`#_onVisibilityChanged(${t})`;this._debug(a,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(yield this.initializePromise,yield this._acquireLock(-1,()=>S(this,null,function*(){if(document.visibilityState!=="visible"){this._debug(a,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}yield this._recoverAndRefresh()})))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(t,a,n){return S(this,null,function*(){const o=[`provider=${encodeURIComponent(a)}`];if(n!=null&&n.redirectTo&&o.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&o.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[u,h]=yield Vr(this.storage,this.storageKey),g=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(h)}`});o.push(g.toString())}if(n!=null&&n.queryParams){const u=new URLSearchParams(n.queryParams);o.push(u.toString())}return n!=null&&n.skipBrowserRedirect&&o.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${o.join("&")}`})}_unenroll(t){return S(this,null,function*(){try{return yield this._useSession(a=>S(this,null,function*(){var n;const{data:o,error:u}=a;return u?this._returnResult({data:null,error:u}):yield we(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token})}))}catch(a){if(pe(a))return this._returnResult({data:null,error:a});throw a}})}_enroll(t){return S(this,null,function*(){try{return yield this._useSession(a=>S(this,null,function*(){var n,o;const{data:u,error:h}=a;if(h)return this._returnResult({data:null,error:h});const g=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:m,error:p}=yield we(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:(n=u==null?void 0:u.session)===null||n===void 0?void 0:n.access_token});return p?this._returnResult({data:null,error:p}):(t.factorType==="totp"&&m.type==="totp"&&(!((o=m==null?void 0:m.totp)===null||o===void 0)&&o.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))}))}catch(a){if(pe(a))return this._returnResult({data:null,error:a});throw a}})}_verify(t){return S(this,null,function*(){return this._acquireLock(-1,()=>S(this,null,function*(){try{return yield this._useSession(a=>S(this,null,function*(){var n;const{data:o,error:u}=a;if(u)return this._returnResult({data:null,error:u});const h=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?xw(t.webauthn.credential_response):ww(t.webauthn.credential_response)})}:{code:t.code}),{data:g,error:m}=yield we(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:h,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return m?this._returnResult({data:null,error:m}):(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+g.expires_in},g)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",g),this._returnResult({data:g,error:m}))}))}catch(a){if(pe(a))return this._returnResult({data:null,error:a});throw a}}))})}_challenge(t){return S(this,null,function*(){return this._acquireLock(-1,()=>S(this,null,function*(){try{return yield this._useSession(a=>S(this,null,function*(){var n;const{data:o,error:u}=a;if(u)return this._returnResult({data:null,error:u});const h=yield we(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});if(h.error)return h;const{data:g}=h;if(g.type!=="webauthn")return{data:g,error:null};switch(g.webauthn.type){case"create":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:vw(g.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:bw(g.webauthn.credential_options.publicKey)})})}),error:null}}}))}catch(a){if(pe(a))return this._returnResult({data:null,error:a});throw a}}))})}_challengeAndVerify(t){return S(this,null,function*(){const{data:a,error:n}=yield this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):yield this._verify({factorId:t.factorId,challengeId:a.id,code:t.code})})}_listFactors(){return S(this,null,function*(){var t;const{data:{user:a},error:n}=yield this.getUser();if(n)return{data:null,error:n};const o={all:[],phone:[],totp:[],webauthn:[]};for(const u of(t=a==null?void 0:a.factors)!==null&&t!==void 0?t:[])o.all.push(u),u.status==="verified"&&o[u.factor_type].push(u);return{data:o,error:null}})}_getAuthenticatorAssuranceLevel(){return S(this,null,function*(){var t,a;const{data:{session:n},error:o}=yield this.getSession();if(o)return this._returnResult({data:null,error:o});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=Pu(n.access_token);let h=null;u.aal&&(h=u.aal);let g=h;((a=(t=n.user.factors)===null||t===void 0?void 0:t.filter(y=>y.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(g="aal2");const p=u.amr||[];return{data:{currentLevel:h,nextLevel:g,currentAuthenticationMethods:p},error:null}})}_getAuthorizationDetails(t){return S(this,null,function*(){try{return yield this._useSession(a=>S(this,null,function*(){const{data:{session:n},error:o}=a;return o?this._returnResult({data:null,error:o}):n?yield we(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new Jt})}))}catch(a){if(pe(a))return this._returnResult({data:null,error:a});throw a}})}_approveAuthorization(t,a){return S(this,null,function*(){try{return yield this._useSession(n=>S(this,null,function*(){const{data:{session:o},error:u}=n;if(u)return this._returnResult({data:null,error:u});if(!o)return this._returnResult({data:null,error:new Jt});const h=yield we(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:g=>({data:g,error:null})});return h.data&&h.data.redirect_url&&Rt()&&!(a!=null&&a.skipBrowserRedirect)&&window.location.assign(h.data.redirect_url),h}))}catch(n){if(pe(n))return this._returnResult({data:null,error:n});throw n}})}_denyAuthorization(t,a){return S(this,null,function*(){try{return yield this._useSession(n=>S(this,null,function*(){const{data:{session:o},error:u}=n;if(u)return this._returnResult({data:null,error:u});if(!o)return this._returnResult({data:null,error:new Jt});const h=yield we(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:g=>({data:g,error:null})});return h.data&&h.data.redirect_url&&Rt()&&!(a!=null&&a.skipBrowserRedirect)&&window.location.assign(h.data.redirect_url),h}))}catch(n){if(pe(n))return this._returnResult({data:null,error:n});throw n}})}_listOAuthGrants(){return S(this,null,function*(){try{return yield this._useSession(t=>S(this,null,function*(){const{data:{session:a},error:n}=t;return n?this._returnResult({data:null,error:n}):a?yield we(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:a.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Jt})}))}catch(t){if(pe(t))return this._returnResult({data:null,error:t});throw t}})}_revokeOAuthGrant(t){return S(this,null,function*(){try{return yield this._useSession(a=>S(this,null,function*(){const{data:{session:n},error:o}=a;return o?this._returnResult({data:null,error:o}):n?(yield we(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Jt})}))}catch(a){if(pe(a))return this._returnResult({data:null,error:a});throw a}})}fetchJwk(n){return S(this,arguments,function*(t,a={keys:[]}){let o=a.keys.find(m=>m.kid===t);if(o)return o;const u=Date.now();if(o=this.jwks.keys.find(m=>m.kid===t),o&&this.jwks_cached_at+Tx>u)return o;const{data:h,error:g}=yield we(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(g)throw g;return!h.keys||h.keys.length===0||(this.jwks=h,this.jwks_cached_at=u,o=h.keys.find(m=>m.kid===t),!o)?null:o})}getClaims(n){return S(this,arguments,function*(t,a={}){try{let o=t;if(!o){const{data:N,error:E}=yield this.getSession();if(E||!N.session)return this._returnResult({data:null,error:E});o=N.session.access_token}const{header:u,payload:h,signature:g,raw:{header:m,payload:p}}=Pu(o);a!=null&&a.allowExpired||Wx(h.exp);const y=!u.alg||u.alg.startsWith("HS")||!u.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:yield this.fetchJwk(u.kid,a!=null&&a.keys?{keys:a.keys}:a==null?void 0:a.jwks);if(!y){const{error:N}=yield this.getUser(o);if(N)throw N;return{data:{claims:h,header:u,signature:g},error:null}}const x=Jx(u.alg),b=yield crypto.subtle.importKey("jwk",y,x,!0,["verify"]);if(!(yield crypto.subtle.verify(x,b,g,$x(`${m}.${p}`))))throw new ld("Invalid JWT signature");return{data:{claims:h,header:u,signature:g},error:null}}catch(o){if(pe(o))return this._returnResult({data:null,error:o});throw o}})}}Ei.nextInstanceID={};const Ow=Ei,Aw="2.89.0";let gi="";typeof Deno!="undefined"?gi="deno":typeof document!="undefined"?gi="web":typeof navigator!="undefined"&&navigator.product==="ReactNative"?gi="react-native":gi="node";const kw={"X-Client-Info":`supabase-js-${gi}/${Aw}`},Rw={headers:kw},Mw={schema:"public"},Uw={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},qw={};function Ti(r){"@babel/helpers - typeof";return Ti=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ti(r)}function Lw(r,t){if(Ti(r)!="object"||!r)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var n=a.call(r,t);if(Ti(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function $w(r){var t=Lw(r,"string");return Ti(t)=="symbol"?t:t+""}function zw(r,t,a){return(t=$w(t))in r?Object.defineProperty(r,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[t]=a,r}function Gg(r,t){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),a.push.apply(a,n)}return a}function lt(r){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Gg(Object(a),!0).forEach(function(n){zw(r,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):Gg(Object(a)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(a,n))})}return r}const Bw=r=>r?(...t)=>r(...t):(...t)=>fetch(...t),Pw=()=>Headers,Iw=(r,t,a)=>{const n=Bw(a),o=Pw();return(u,h)=>S(null,null,function*(){var g;const m=(g=yield t())!==null&&g!==void 0?g:r;let p=new o(h==null?void 0:h.headers);return p.has("apikey")||p.set("apikey",r),p.has("Authorization")||p.set("Authorization",`Bearer ${m}`),n(u,lt(lt({},h),{},{headers:p}))})};function Hw(r){return r.endsWith("/")?r:r+"/"}function Yw(r,t){var a,n;const{db:o,auth:u,realtime:h,global:g}=r,{db:m,auth:p,realtime:y,global:x}=t,b={db:lt(lt({},m),o),auth:lt(lt({},p),u),realtime:lt(lt({},y),h),storage:{},global:lt(lt(lt({},x),g),{},{headers:lt(lt({},(a=x==null?void 0:x.headers)!==null&&a!==void 0?a:{}),(n=g==null?void 0:g.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>S(null,null,function*(){return""})};return r.accessToken?b.accessToken=r.accessToken:delete b.accessToken,b}function Vw(r){const t=r==null?void 0:r.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Hw(t))}catch(a){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Qw=class extends Ow{constructor(r){super(r)}},Gw=class{constructor(r,t,a){var n,o;this.supabaseUrl=r,this.supabaseKey=t;const u=Vw(r);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const h=`sb-${u.hostname.split(".")[0]}-auth-token`,g={db:Mw,realtime:qw,auth:lt(lt({},Uw),{},{storageKey:h}),global:Rw},m=Yw(a!=null?a:{},g);if(this.storageKey=(n=m.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(o=m.global.headers)!==null&&o!==void 0?o:{},m.accessToken)this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(y,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}});else{var p;this.auth=this._initSupabaseAuthClient((p=m.auth)!==null&&p!==void 0?p:{},this.headers,m.global.fetch)}this.fetch=Iw(t,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(lt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.accessToken&&this.accessToken().then(y=>this.realtime.setAuth(y)).catch(y=>console.warn("Failed to set initial Realtime auth token:",y)),this.rest=new Cb(new URL("rest/v1",u).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new Sx(this.storageUrl.href,this.headers,this.fetch,a==null?void 0:a.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new wb(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(r){return this.rest.from(r)}schema(r){return this.rest.schema(r)}rpc(r,t={},a={head:!1,get:!1,count:void 0}){return this.rest.rpc(r,t,a)}channel(r,t={config:{}}){return this.realtime.channel(r,t)}getChannels(){return this.realtime.getChannels()}removeChannel(r){return this.realtime.removeChannel(r)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return S(this,null,function*(){var r=this,t,a;if(r.accessToken)return yield r.accessToken();const{data:n}=yield r.auth.getSession();return(t=(a=n.session)===null||a===void 0?void 0:a.access_token)!==null&&t!==void 0?t:r.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:r,persistSession:t,detectSessionInUrl:a,storage:n,userStorage:o,storageKey:u,flowType:h,lock:g,debug:m,throwOnError:p},y,x){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Qw({url:this.authUrl.href,headers:lt(lt({},b),y),storageKey:u,autoRefreshToken:r,persistSession:t,detectSessionInUrl:a,storage:n,userStorage:o,flowType:h,lock:g,debug:m,throwOnError:p,fetch:x,hasCustomAuthorizationHeader:Object.keys(this.headers).some(j=>j.toLowerCase()==="authorization")})}_initRealtimeClient(r){return new Hb(this.realtimeUrl.href,lt(lt({},r),{},{params:lt(lt({},{apikey:this.supabaseKey}),r==null?void 0:r.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,t)=>{this._handleTokenChanged(r,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(r,t,a){(r==="TOKEN_REFRESHED"||r==="SIGNED_IN")&&this.changedAccessToken!==a?(this.changedAccessToken=a,this.realtime.setAuth(a)):r==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Fw=(r,t,a)=>new Gw(r,t,a);function Kw(){if(typeof window!="undefined"||typeof process=="undefined")return!1;const r=process.version;if(r==null)return!1;const t=r.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Kw()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Xw="https://tirzmotuypesxopnnitt.supabase.co",Ww="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRpcnptb3R1eXBlc3hvcG5uaXR0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYzOTAyMjEsImV4cCI6MjA3MTk2NjIyMX0.YQaXWOWEFoiAJU412gA4MOXfm10E6XPJJb75FMh_H0k",ma=Fw(Xw,Ww,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storage:window.localStorage,storageKey:"cc-flow-auth"}});class Jw{constructor(){ue(this,"config");ue(this,"cache",new Map);ue(this,"CACHE_DURATION",5*60*1e3);this.config={url:"https://tirzmotuypesxopnnitt.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRpcnptb3R1eXBlc3hvcG5uaXR0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYzOTAyMjEsImV4cCI6MjA3MTk2NjIyMX0.YQaXWOWEFoiAJU412gA4MOXfm10E6XPJJb75FMh_H0k"}}getCacheKey(t,a={}){return`${t}_${JSON.stringify(a)}`}getCachedData(t){const a=this.cache.get(t);return a&&Date.now()-a.timestamp<this.CACHE_DURATION?a.data:null}setCachedData(t,a){this.cache.set(t,{data:a,timestamp:Date.now()})}getCutProductivityByResponsible(t,a){return S(this,null,function*(){const n=this.getCacheKey("cut_productivity_responsible",{startDate:t,endDate:a}),o=this.getCachedData(n);if(o)return o;const u=yield fetch(`${this.config.url}/rest/v1/rpc/get_cut_productivity_by_responsible`,{method:"POST",headers:{apikey:this.config.anonKey,Authorization:`Bearer ${this.config.anonKey}`,"Content-Type":"application/json"},body:JSON.stringify({start_date:t,end_date:a})});if(!u.ok)throw new Error(`Supabase RPC error: ${u.status} ${u.statusText}`);const h=yield u.json();return this.setCachedData(n,h),h})}getCutProductivityByCNC(t,a){return S(this,null,function*(){const n=this.getCacheKey("cut_productivity_cnc",{startDate:t,endDate:a}),o=this.getCachedData(n);if(o)return o;const u=yield fetch(`${this.config.url}/rest/v1/rpc/get_cut_productivity_by_cnc`,{method:"POST",headers:{apikey:this.config.anonKey,Authorization:`Bearer ${this.config.anonKey}`,"Content-Type":"application/json"},body:JSON.stringify({start_date:t,end_date:a})});if(!u.ok)throw new Error(`Supabase RPC error: ${u.status} ${u.statusText}`);const h=yield u.json();return this.setCachedData(n,h),h})}getManufacturingProductivityByResponsible(t,a){return S(this,null,function*(){const n=this.getCacheKey("manufacturing_productivity_responsible",{startDate:t,endDate:a}),o=this.getCachedData(n);if(o)return o;const u=yield fetch(`${this.config.url}/rest/v1/rpc/get_manufacturing_productivity_by_responsible`,{method:"POST",headers:{apikey:this.config.anonKey,Authorization:`Bearer ${this.config.anonKey}`,"Content-Type":"application/json"},body:JSON.stringify({start_date:t,end_date:a})});if(!u.ok)throw new Error(`Supabase RPC error: ${u.status} ${u.statusText}`);const h=yield u.json();return this.setCachedData(n,h),h})}getMainMetrics(t,a){return S(this,null,function*(){const n=this.getCacheKey("main_metrics",{startDate:t,endDate:a}),o=this.getCachedData(n);if(o)return o;const u=yield fetch(`${this.config.url}/rest/v1/rpc/get_main_metrics_factory_analytics`,{method:"POST",headers:{apikey:this.config.anonKey,Authorization:`Bearer ${this.config.anonKey}`,"Content-Type":"application/json"},body:JSON.stringify({start_date:t,end_date:a})});if(!u.ok)throw new Error(`Supabase RPC error: ${u.status} ${u.statusText}`);const h=yield u.json(),g=Array.isArray(h)&&h.length>0?h[0]:h;return this.setCachedData(n,g),g})}getProjectsWithMetrics(o,u){return S(this,arguments,function*(t,a,n={}){const h=this.getCacheKey("projects_with_metrics",Ue({startDate:t,endDate:a},n)),g=this.getCachedData(h);if(g)return g;const m=yield fetch(`${this.config.url}/rest/v1/rpc/get_projects_with_metrics`,{method:"POST",headers:{apikey:this.config.anonKey,Authorization:`Bearer ${this.config.anonKey}`,"Content-Type":"application/json"},body:JSON.stringify({start_date:t,end_date:a,pm_filter:n.pm||null,status_filter:n.status||null})});if(!m.ok)throw new Error(`Supabase RPC error: ${m.status} ${m.statusText}`);const p=yield m.json();return this.setCachedData(h,p),p})}getOrdersByProject(t,a,n){return S(this,null,function*(){const o=this.getCacheKey("orders_by_project",{projectName:t,startDate:a,endDate:n}),u=this.getCachedData(o);if(u)return u;const h=yield fetch(`${this.config.url}/rest/v1/rpc/get_orders_by_project`,{method:"POST",headers:{apikey:this.config.anonKey,Authorization:`Bearer ${this.config.anonKey}`,"Content-Type":"application/json"},body:JSON.stringify({project_name:t,start_date:a,end_date:n})});if(!h.ok)throw new Error(`Supabase RPC error: ${h.status} ${h.statusText}`);const g=yield h.json();return this.setCachedData(o,g),g})}getAllProjects(){return S(this,null,function*(){const t="all-projects-supabase",a="all-projects",n=this.getCachedData(t);if(n)return console.log(" Using cached projects data from Supabase"),n;try{console.log(" Fetching projects from Supabase...");const{data:o,error:u}=yield ma.from("Projects").select("*").order("Name").not("Number","is",null);if(u)throw u;const h=(o||[]).map(m=>{var p;return{_RowNumber:void 0,Name:m.Name||"",Number:((p=m.Number)==null?void 0:p.toString())||"",Status:m.Status||"","Project ID":m["Project ID"]||"","Start Date":m["Start Date"]||"","Expected Completion Date":m["Expected Completion Date"]||"","Finalization Date":m["Finalization Date"]||"",PM:m.PM||"","CC/Subcontractor":m["CC/Subcontractor"]||"","Site Supervisor":m["Site Supervisor"]||"","EBA/Non-EBA":m["EBA/Non-EBA"]||"",Contact:m.Contact||"","Expected Square Meters":m["Expected Square Meters"]?Number(m["Expected Square Meters"]):void 0,"Deliveries Allowed":m["Deliveries Allowed"]?Number(m["Deliveries Allowed"]):void 0,"Allowed SQM to buy":m["Allowed SQM to buy"]?Number(m["Allowed SQM to buy"]):void 0,"Real Cut Square Meters":void 0,"Real Cut Linear Meters":void 0,"Total Orders":void 0,"Total Materials":void 0,"Total Sheets":void 0,"Total Allowances":void 0,"Total Deliveries":void 0,"Total Inventory":void 0,"Related Items Requests":void 0,"Related Delivery_Dockets":void 0,"Related People Allowances":void 0}});this.setCachedData(t,h);const g=this.getCachedData(a);return(!g||g.length===0)&&this.setCachedData(a,h),console.log(` Cached ${h.length} projects from Supabase`),h}catch(o){return console.error("Error fetching projects from Supabase:",o),[]}})}getOrdersCutByProject(t){return S(this,null,function*(){const a=`orders-cut-${t}`,n=this.getCachedData(a);if(n)return console.log(` Using cached orders for project: ${t}`),n;try{console.log(` Fetching orders from Supabase for project: ${t}...`);const{data:o,error:u}=yield ma.from("Orders cut").select('"Order ID", "Creation Date", "Status", "Priority", "Responsable", "Colour"').eq("Project",t).order('"Creation Date"',{ascending:!1});if(u)throw u;const h=(o||[]).map(g=>({"Order ID":g["Order ID"]||"",Status:g.Status||"",Priority:g.Priority||"",Colour:g.Colour||"","Creation Date":g["Creation Date"]||"",Responsable:g.Responsable||""}));return this.setCachedData(a,h),console.log(` Cached ${h.length} orders for project: ${t} (sorted by Creation Date)`),h}catch(o){return console.error(`Error fetching orders from Supabase for project ${t}:`,o),[]}})}checkOrderIdExists(t){return S(this,null,function*(){if(!t||!t.trim())return!1;try{const{data:a,error:n}=yield ma.from("Orders cut").select('"Order ID"').eq("Order ID",t.trim()).limit(1).maybeSingle();if(n)throw n;return a!==null}catch(a){return console.error(`Error checking Order ID existence: ${t}`,a),!1}})}checkExistingPanels(t){return S(this,null,function*(){if(t.length===0)return[];const a=this.getCacheKey("existing-panels",{names:t.sort().join(",")}),n=this.getCachedData(a);if(n)return n;try{const o=yield ma.from("Panels").select("Name, Order, Status").in("Name",t);if(o.error)throw new Error(`Supabase error: ${o.error.message}`);const u=o.data||[];return this.setCachedData(a,u),u}catch(o){throw console.error("Error checking existing panels:",o),o}})}createOrderCut(t,a){return S(this,null,function*(){try{console.log(` Creating order cut in Supabase: ${t["Order ID"]}`);const{error:n}=yield ma.from("Orders cut").insert([t]);if(n)throw new Error(`Supabase error creating order: ${n.message}`);console.log(" Order cut created in Supabase"),a.length>0?yield this.createPanels(a):console.warn(" No panels to create for this order")}catch(n){throw console.error("Error creating order cut in Supabase:",n),n}})}createPanels(t){return S(this,null,function*(){if(t.length===0){console.warn(" No panels to create");return}try{for(let n=0;n<t.length;n+=1e3){const o=t.slice(n,n+1e3),{error:u}=yield ma.from("Panels").insert(o);if(u)throw new Error(`Supabase error inserting panels batch ${Math.floor(n/1e3)+1}: ${u.message}`)}console.log(` ${t.length} panels created in Supabase`)}catch(a){throw console.error("Error creating panels in Supabase:",a),a}})}clearCache(){this.cache.clear()}}const Yt=new Jw;class Ds{constructor(){ue(this,"config");ue(this,"cache",new Map);ue(this,"CACHE_DURATION",5*60*1e3);ue(this,"PROJECTS_CACHE_DURATION",15*60*1e3);this.config={appId:"efcdb2a0-181f-4e43-bc65-6887dc279032",apiKey:"V2-cTfzb-hYt3f-e0d9Z-5PD1w-jyqcd-y21HR-ioeLZ-nV3h4",baseUrl:"https://www.appsheet.com/api/v2"},(!this.config.appId||!this.config.apiKey)&&console.warn("AppSheet credentials not configured. Please check your environment variables.")}makeRequest(t,a,n,o){return S(this,null,function*(){const u=`${this.config.baseUrl}/apps/${this.config.appId}/tables/${encodeURIComponent(t)}/Action`;let h=o||{},g=n||[];if(n&&n.length>0&&a==="Find"){const p=[];if(n.forEach(y=>{Object.entries(y).forEach(([x,b])=>{if(b!=null){const j=typeof b=="string"?JSON.stringify(b):b;p.push(`[${x}]=${j}`)}})}),p.length>0){const y=p.length===1?`Filter(${t}, ${p[0]})`:`Filter(${t}, AND(${p.join(", ")}))`;h=et(Ue({},h),{Selector:y}),g=[]}}let m;a!=="Find"&&a!=="Edit"&&a!=="Add"&&a!=="Delete"?m={Action:a,Properties:Ue({Locale:"en-US",Location:"-28.0167, 153.4000",Timezone:"E. Australia Standard Time"},h),Rows:g}:m={Action:a,Properties:Ue({Locale:"en-AU",Location:"-28.0167, 153.4000",Timezone:"E. Australia Standard Time"},h),Rows:g};try{const p=yield fetch(u,{method:"POST",headers:{"Content-Type":"application/json",ApplicationAccessKey:this.config.apiKey},body:JSON.stringify(m)});if(!p.ok){const x=yield p.text();throw console.error(`HTTP error! status: ${p.status}, response: ${x}`),new Error(`HTTP error! status: ${p.status}`)}const y=yield p.text();if(!y||y.trim()==="")return console.warn(` Empty response from ${t}`),[];try{const x=JSON.parse(y);return x.Rows&&Array.isArray(x.Rows)?x.Rows:Array.isArray(x)?x:[x]}catch(x){throw console.error(` JSON parse error for ${t}:`,x),console.error(" Response text:",y),new Error(`Invalid JSON response from ${t}`)}}catch(p){throw console.error(`Error making request to ${t}:`,p),new Error(`Failed to fetch data from ${t}: ${p instanceof Error?p.message:"Unknown error"}`)}})}getCachedData(t){const a=this.cache.get(t);if(a){const n=t==="all-projects"?this.PROJECTS_CACHE_DURATION:this.CACHE_DURATION;if(Date.now()-a.timestamp<n)return a.data}return null}setCachedData(t,a){this.cache.set(t,{data:a,timestamp:Date.now()})}getAllProjects(t){return S(this,null,function*(){const a="all-projects",n="all-projects-appsheet",o="all-projects-supabase";if(t!=null&&t.forceAppSheet){const m=this.getCachedData(n);if(m&&m.length>0)return console.log(" Using cached AppSheet data (instant, no request)"),this.setCachedData(a,m),m;console.log(" Force fetching from AppSheet (no cache available)...");try{const y=yield this.makeRequest("projects_dashboard_summary_slice","Find",[],{});return this.setCachedData(n,y),this.setCachedData(a,y),console.log(` Synced ${y.length} projects from AppSheet`),y}catch(p){console.error("Error fetching from AppSheet:",p);const y=this.getCachedData(a);return y||[]}}const u=this.getCachedData(a);if(u)return console.log(" Using cached projects data"),u;const h=Yt.getAllProjects().catch(m=>(console.log(" Supabase getAllProjects failed:",m),[])),g=S(this,null,function*(){try{console.log(" Fetching projects from AppSheet API...");const p=yield this.makeRequest("projects_dashboard_summary_slice","Find",[],{});return this.setCachedData(n,p),this.setCachedData(a,p),console.log(` Cached ${p.length} projects from AppSheet (complete data)`),p}catch(m){return console.error("Error fetching projects from AppSheet:",m),[]}});try{const m=yield h;if(m&&m.length>0){console.log(` Using ${m.length} projects from Supabase (fast response)`),this.setCachedData(o,m);const p=this.getCachedData(a);return(!p||p.length===0)&&this.setCachedData(a,m),g.catch(()=>{console.log(" Background AppSheet update failed")}),m}}catch(m){console.log(" Supabase failed, waiting for AppSheet...",m)}try{const m=yield g;if(m&&m.length>0)return console.log(` Using ${m.length} projects from AppSheet (fallback)`),m}catch(m){console.error("Error fetching projects from both sources:",m)}return[]})}getProjectDataFromCache(t){return S(this,null,function*(){try{const n=(yield this.getAllProjects()).find(o=>o.Name===t);return n?(console.log(` Project data found in cache for: ${t}`),n):(console.warn(` Project not found in cache: ${t}`),null)}catch(a){return console.error("Error getting project data from cache:",a),null}})}getAllItems(){return S(this,null,function*(){const t="all-items",a=this.getCachedData(t);if(a)return a;try{const n=yield this.makeRequest("items_dashboard_summary_slice","Find",[],{});return this.setCachedData(t,n),n}catch(n){return console.error("Error fetching all items:",n),[]}})}getProjectData(t){return S(this,null,function*(){const a=`project-${t}`,n=this.getCachedData(a);if(n)return n;try{const o=`Filter(Projects, [Name]=${JSON.stringify(t)})`,u=yield this.makeRequest("Projects","Find",[],{Selector:o});if(u.length>0){const h=u[0];return this.setCachedData(a,h),h}return null}catch(o){return console.error("Error fetching project data:",o),null}})}getOrdersByProject(t){return S(this,null,function*(){const a=`orders-${t}`,n=this.getCachedData(a);if(n)return n;try{const o=`Filter(Orders, [Project ID]=${JSON.stringify(t)})`,u=yield this.makeRequest("Orders","Find",[],{Selector:o});return this.setCachedData(a,u),u}catch(o){return console.error("Error fetching orders:",o),[]}})}getMaterials(t){return S(this,null,function*(){const a=`materials-${t}`,n=this.getCachedData(a);if(n)return n;try{const o=yield this.getItemsRequestsByProject(t),u=yield this.getOrdersByProject(t),h=yield this.getAllItems(),g=o.map(x=>{const b=h.find(N=>N["Item ID"]===x["Item ID"]),j=u.find(N=>N["Order ID"]===x["Order ID"]);return et(Ue({},x),{Name:b?b.Name:"Unknown Item","Order Number":j?j.Number:"0","Order Date":j?j["Due Date"]:"","Order Status":j?j.Status:"","Request by":j?j["Created By"]:""})}),m=this.groupMaterialsForSummary(g),p=this.groupMaterialsForDetails(g),y={summary:m,details:p};return this.setCachedData(a,y),y}catch(o){return console.error("Error fetching materials:",o),{summary:[],details:[]}}})}groupMaterialsForSummary(t){const a={"Top hat":{},Angles:{},Screws:{},"Caulking Glue":{},Packers:{},Tapes:{},Others:{}};t.forEach(o=>{const u=Object.prototype.hasOwnProperty.call(a,o.Category)?o.Category:"Others",h=o["Item ID"];a[u][h]||(a[u][h]={Name:o.Name||"Unknown Item",SubCategory:o["Sub Category"]||"",Description:o["Description Material"]||"",Total:0}),a[u][h].Total+=Number(o.Quantity)||0});const n=[];return Object.entries(a).forEach(([o,u])=>{const h=Object.entries(u).map(([g,m])=>({ItemID:g,Name:m.Name,SubCategory:m.SubCategory,Description:m.Description,Total:m.Total}));n.push({category:o,items:h})}),n}groupMaterialsForDetails(t){const a={"Top hat":[],Angles:[],Screws:[],"Caulking Glue":[],Packers:[],Tapes:[],Others:[]};t.forEach(o=>{const u=Object.prototype.hasOwnProperty.call(a,o.Category)?o.Category:"Others";a[u].push(o)});const n=[];return Object.entries(a).forEach(([o,u])=>{n.push({category:o,items:u})}),n}getItemsRequestsByProject(t){return S(this,null,function*(){const a=`items-requests-${t}`,n=this.getCachedData(a);if(n)return n;try{const o=`Filter(Items Request, [Project]=${JSON.stringify(t)})`,u=yield this.makeRequest("Items Request","Find",[],{Selector:o});return this.setCachedData(a,u),u}catch(o){return console.error("Error fetching items requests by Project Name:",o),[]}})}getSheetsData(t){return S(this,null,function*(){const a=`sheets-${t}`,n=this.getCachedData(a);if(n)return n;try{const o=`Filter(Sheets, AND([Project]=${JSON.stringify(t)}, [Off Cut]=false))`,u=yield this.makeRequest("Sheets","Find",[],{Selector:o});if(u.length===0)return this.setCachedData(a,[]),[];const h=[];u.forEach(p=>{if(p["Related Sheets Inventorys"]){const y=p["Related Sheets Inventorys"].split(",").map(x=>x.trim()).filter(x=>x.length>0);h.push(...y)}});let g=[];if(h.length>0){const y=`Filter(Sheets Inventory, OR(${h.map(x=>`[sheet_inventory_id]=${JSON.stringify(x)}`).join(", ")}))`;g=yield this.makeRequest("Sheets Inventory","Find",[],{Selector:y})}const m=u.map(p=>{const y=g.filter(j=>j.sheet===p["Sheet ID"]);let x=0,b=0;if(y.length>0)x=y.filter(j=>Number(j.qty)>0).reduce((j,N)=>j+Number(N.qty),0),b=y.filter(j=>Number(j.qty)<0).reduce((j,N)=>j+Math.abs(Number(N.qty)),0);else{const j=Number(p["Quantity in Factory"])||0,N=Number(p["Quantity in Store"])||0;j>0&&(x=j),N<0&&(b=Math.abs(N))}return et(Ue({},p),{TotalReceived:x,TotalUsed:b})});return this.setCachedData(a,m),m}catch(o){return console.error("Error fetching sheets:",o),[]}})}getSheetsByProject(t){return S(this,null,function*(){try{console.log(` Fetching sheets from AppSheet for project: ${t}...`);const a=`Filter(Sheets, [Project]=${JSON.stringify(t)})`,n=yield this.makeRequest("Sheets","Find",[],{Selector:a});return n.length===0?(console.log(` No sheets found for project: ${t}`),[]):n.map(u=>({"Sheet ID":u["Sheet ID"]||"",Dimension:u.Dimension||"",Colour:u.Colour||"","Quantity in Factory":Number(u["Quantity in Factory"])||0,"Quantity in Store":Number(u["Quantity in Store"])||0,"Off Cut":u["Off Cut"]=="Y",Comment:u.Comment||""}))}catch(a){return console.error(`Error fetching sheets for project ${t}:`,a),[]}})}getDeliveryDockets(t){return S(this,null,function*(){var o;const a=`deliveries-${t}`,n=this.getCachedData(a);if(n)return n;try{const u=yield this.getProjectData(t);if(!u||!u["Related Delivery_Dockets"])return[];const h=((o=u["Related Delivery_Dockets"])==null?void 0:o.split(",").map(y=>y.trim()).filter(y=>y.length>0))||[];if(h.length===0)return[];const m=`Filter(Delivery_Dockets, OR(${h.map(y=>`[delivery_id]=${JSON.stringify(y)}`).join(", ")}))`,p=yield this.makeRequest("Delivery_Dockets","Find",[],{Selector:m});return this.setCachedData(a,p),p}catch(u){return console.error("Error fetching delivery dockets:",u),[]}})}clearCache(){this.cache.clear()}clearCacheFor(t){this.cache.delete(t)}getPeopleAllowances(t){return S(this,null,function*(){const a=`allowances-${t}`,n=this.getCachedData(a);if(n)return n;try{const o=yield this.makeRequest("People Allowance","Find",[],{Selector:`Filter(People Allowance, [Project]=${JSON.stringify(t)})`});return console.log(" People Allowances API Response:",o),this.setCachedData(a,o),o}catch(o){return console.error("Error fetching people allowances:",o),[]}})}markOrderAsDelivered(t){return S(this,null,function*(){try{console.log(` Marking order ${t} as delivered...`);const a=yield this.makeRequest("Orders cut","Delivered",[{"Order ID":t}]);return a&&a.length>0?(console.log(` Order ${t} marked as delivered successfully`),console.log(" Updated order details:",a[0]),a):(console.error(` Failed to mark order ${t} as delivered - empty response`),[])}catch(a){return console.error(`Error marking order ${t} as delivered:`,a),[]}})}getDocumentsByProject(t){return S(this,null,function*(){try{console.log(` Fetching documents for project: ${t}...`);const a=`Filter(Documents, [Project]=${JSON.stringify(t)})`,n=yield this.makeRequest("Documents","Find",[],{Selector:a});return n&&n.length>0?(console.log(` Found ${n.length} documents for project ${t}`),n):(console.log(` No documents found for project ${t}`),[])}catch(a){return console.error(`Error fetching documents for project ${t}:`,a),[]}})}addDocument(t){return S(this,null,function*(){try{console.log(" Adding document to AppSheet...");const{uploadDocumentToDrive:a}=yield gb(()=>S(null,null,function*(){const{uploadDocumentToDrive:u}=yield import("./uploadService-CpoydQ-Y.js");return{uploadDocumentToDrive:u}}),[]);console.log(" Uploading file to Google Drive...");const n=yield a(t.file,t.Project,t.Orders,t.Name);console.log(` File uploaded to Drive: ${n}`),console.log(" Saving document record in AppSheet...");const o=yield this.makeRequest("Documents","Add",[{Project:t.Project,Name:t.Name,File:n,Orders:t.Orders,Comments:t.Comments||"",Category:t.Category||""}]);return o&&o.length>0?(console.log(" Document added successfully"),o):(console.error(" Failed to add document - empty response"),[])}catch(a){throw console.error("Error adding document:",a),a}})}linkDocumentToOrder(t,a){return S(this,null,function*(){try{console.log(` Linking document ${t} to order ${a}...`);const n=yield this.makeRequest("Documents","Find",[{"Document ID":t}]);if(!n||n.length===0)throw new Error(`Document with ID ${t} not found`);const o=n[0],u=o.Orders||"";let h=[];u&&(typeof u=="string"?h=u.split(",").map(x=>x.trim()).filter(x=>x.length>0):Array.isArray(u)&&(h=u.map(x=>String(x).trim()).filter(x=>x.length>0)));const g=a.trim();g&&!h.includes(g)&&h.push(g);const m=h.join(","),p={"Document ID":t,Orders:m,Comments:o.Comments||"",Category:o.Category||""},y=yield this.makeRequest("Documents","Edit",[p]);return y&&y.length>0?(console.log(` Document ${t} linked to order ${a} successfully`),y):(console.error(" Failed to link document - empty response"),[])}catch(n){throw console.error("Error linking document to order:",n),n}})}createStages(t){return S(this,null,function*(){if(t.length===0)return console.warn(" No stages to create"),[];try{console.log(` Creating ${t.length} stages in AppSheet...`);const a=yield this.makeRequest("Stages Order","Add",t);return a&&a.length>0?(console.log(` ${a.length} stages created successfully in AppSheet`),a):(console.error(" Failed to create stages - empty response"),[])}catch(a){throw console.error("Error creating stages in AppSheet:",a),a}})}createPanels(t){return S(this,null,function*(){if(t.length===0)return console.warn(" No panels to create"),[];try{console.log(` Creating ${t.length} panels in AppSheet...`);const a=yield this.makeRequest("Panels","Add",t);return a&&a.length>0?(console.log(` ${a.length} panels created successfully in AppSheet`),a):(console.error(" Failed to create panels - empty response"),[])}catch(a){throw console.error("Error creating panels in AppSheet:",a),a}})}addOrderCut(t){return S(this,null,function*(){try{console.log(` Creating order cut in AppSheet: ${t["Order ID"]}`);const a=yield this.makeRequest("Orders cut","Add",[t]);if(!a||a.length===0)throw new Error("Failed to create order cut in AppSheet - empty response");return console.log(" Order cut created successfully in AppSheet"),a}catch(a){throw console.error("Error creating order cut in AppSheet:",a),a}})}createOrderCut(t,a,n){return S(this,null,function*(){try{console.log(` Creating order cut in AppSheet: ${t["Order ID"]}`),console.log(" Creating order...");const o=yield this.makeRequest("Orders cut","Add",[t]);if(!o||o.length===0)throw new Error("Failed to create order in AppSheet - empty response");console.log(" Order created successfully in AppSheet"),console.log(" Creating stages...");let u=[];try{u=yield this.createStages(a)}catch(g){console.error(" Error creating stages, but continuing:",g)}console.log(" Creating panels...");let h=[];try{h=yield this.createPanels(n)}catch(g){console.error(" Error creating panels, but continuing:",g)}return console.log(" Order cut creation completed in AppSheet"),{order:o,stages:u,panels:h}}catch(o){throw console.error("Error creating order cut in AppSheet:",o),o}})}}const dn=new Ds,Up=()=>ta({queryKey:["projects-list"],queryFn:()=>dn.getAllProjects(),staleTime:10*60*1e3,gcTime:20*60*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1,retry:2,retryDelay:1e3}),bd=()=>ta({queryKey:["items"],queryFn:()=>dn.getAllItems(),staleTime:60*60*1e3,gcTime:24*60*60*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1,retry:1,retryDelay:2e3}),qp=r=>ta({queryKey:["project",r],queryFn:()=>dn.getProjectDataFromCache(r),enabled:!!r,staleTime:15*60*1e3,gcTime:30*60*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1,retry:!1}),Zw=r=>ta({queryKey:["project-materials",r],queryFn:()=>dn.getMaterials(r),enabled:!!r,staleTime:5*60*1e3,gcTime:15*60*1e3}),ej=r=>ta({queryKey:["project-sheets",r],queryFn:()=>dn.getSheetsData(r),enabled:!!r,staleTime:5*60*1e3,gcTime:15*60*1e3}),tj=r=>ta({queryKey:["project-allowances",r],queryFn:()=>dn.getPeopleAllowances(r),enabled:!!r,staleTime:5*60*1e3,gcTime:15*60*1e3}),aj=({children:r})=>{const{isLoading:t,isError:a}=bd();return l.jsxs(l.Fragment,{children:[r,t&&l.jsx("div",{className:"progressive-loader",children:l.jsx("div",{className:"loader-indicator",children:l.jsx("div",{className:"loader-spinner"})})}),a&&l.jsx("div",{className:"progressive-loader error",children:l.jsx("div",{className:"loader-indicator",children:l.jsx("span",{className:"error-icon",children:""})})})]})},Lp=()=>{const[r,t]=k.useState(()=>new URLSearchParams(window.location.search).get("project")),a=k.useCallback(u=>{if(r===u)return;t(u);const h=new URL(window.location.href);u?h.searchParams.set("project",u):h.searchParams.delete("project"),window.history.replaceState({},"",h.toString())},[r]),n=k.useCallback(u=>{a(u)},[a]),o=k.useCallback(()=>{a(null)},[a]);return k.useEffect(()=>{const u=()=>{const g=new URLSearchParams(window.location.search).get("project");t(g)};return window.addEventListener("popstate",u),()=>window.removeEventListener("popstate",u)},[]),{projectParam:r,setProjectParam:a,updateUrlWithProject:n,clearProjectParam:o}},Oi=r=>{k.useEffect(()=>{const t=document.title;return document.title=r,()=>{document.title=t}},[r])},Sa=()=>l.jsx("div",{className:"loading-spinner",role:"status","aria-label":"Loading"}),Yu=({isLoading:r,children:t,sectionName:a})=>r?l.jsx("div",{className:"section-loader",children:l.jsxs("div",{className:"section-loading-content",children:[l.jsx(Sa,{}),l.jsxs("p",{className:"section-loading-text",children:["Loading ",a,"..."]})]})}):l.jsx(l.Fragment,{children:t}),sj=({onProjectSelect:r})=>{var X,te;const[t,a]=k.useState(""),[n,o]=k.useState(""),[u,h]=k.useState("In Progress"),[g,m]=k.useState(!1),p=k.useRef(null),{projectParam:y,updateUrlWithProject:x}=Lp(),{data:b=[],isLoading:j,error:N,refetch:E}=Up(),A=k.useMemo(()=>[...b].sort((ie,C)=>ie.Name.localeCompare(C.Name)).filter(ie=>{const C=ie.Name.toLowerCase().includes(n.toLowerCase()),_=u==="all"||ie.Status===u;return C&&_}),[b,n,u]);k.useEffect(()=>{if(y&&b.length>0){const z=b.find(ie=>ie.Name===y);z&&t!==y&&(a(y),r(z))}},[y,b,r,t]),k.useEffect(()=>{const z=ie=>{p.current&&!p.current.contains(ie.target)&&m(!1)};return document.addEventListener("mousedown",z),()=>document.removeEventListener("mousedown",z)},[]);const B=z=>S(null,null,function*(){a(z),m(!1);const ie=b.find(C=>C.Name===z);ie&&(x(z),r(ie))}),U=z=>{switch(z){case"To Do":return"#87CEEB";case"In Progress":return"#FFA500";case"Defects":return"#FF6347";case"Done":return"#32CD32";default:return"#95a5a6"}},q=z=>{switch(z){case"To Do":return"";case"In Progress":return"";case"Defects":return"";case"Done":return"";default:return""}};return j?l.jsx("div",{className:"project-selector",children:l.jsxs("div",{className:"loading-container",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{className:"loading-text",children:"Loading projects..."}),l.jsxs("div",{className:"loading-dots",children:[l.jsx("span",{}),l.jsx("span",{}),l.jsx("span",{})]})]})}):N?l.jsx("div",{className:"project-selector",children:l.jsxs("div",{className:"error-container",children:[l.jsx("div",{className:"error-icon",children:""}),l.jsx("h3",{className:"error-title",children:"Connection Error"}),l.jsx("p",{className:"error-message",children:N.message||"Error loading projects"}),l.jsxs("button",{onClick:()=>E(),className:"retry-button",children:[l.jsx("span",{className:"retry-icon",children:""}),l.jsx("span",{className:"retry-text",children:"Retry Connection"})]})]})}):b.length===0?l.jsx("div",{className:"project-selector",children:l.jsxs("div",{className:"empty-container",children:[l.jsx("div",{className:"empty-icon",children:""}),l.jsx("h3",{className:"empty-title",children:"No Projects Available"}),l.jsx("p",{className:"empty-message",children:"There are no projects to display at the moment."})]})}):l.jsx("div",{className:"project-selector",children:l.jsx("div",{className:"combobox-section",children:l.jsxs("div",{className:"combobox-container",ref:p,children:[l.jsxs("div",{className:"combobox-wrapper",children:[l.jsxs("div",{className:`combobox ${g?"open":""}`,onClick:()=>m(!0),children:[l.jsxs("div",{className:"combobox-input",children:[l.jsx("span",{className:"combobox-icon",children:""}),l.jsx("input",{type:"text",placeholder:"Search and select project...",value:n,onChange:z=>{o(z.target.value),m(!0)},onClick:z=>z.stopPropagation(),className:"combobox-search"}),n&&l.jsx("button",{className:"clear-search",onClick:z=>{z.stopPropagation(),o("")},children:""})]}),l.jsx("div",{className:"combobox-arrow",children:""})]}),g&&l.jsxs("div",{className:"combobox-dropdown",children:[l.jsxs("div",{className:"dropdown-header",children:[l.jsx("div",{className:"filter-tabs",children:["all","To Do","In Progress","Defects","Done"].map(z=>l.jsxs("button",{className:`filter-tab ${u===z?"active":""}`,onClick:ie=>{ie.stopPropagation(),h(z)},style:{"--status-color":z==="all"?"#95a5a6":U(z)},title:z==="all"?"All Projects":z,children:[l.jsx("span",{className:"tab-icon",children:z==="all"?"":q(z)}),l.jsx("span",{className:"tab-text",children:z==="all"?"All":z}),l.jsx("span",{className:"tab-count",children:z==="all"?b.length:b.filter(ie=>ie.Status===z).length})]},z))}),l.jsx("div",{className:"mobile-results-indicator",children:l.jsxs("span",{className:"results-count",children:[A.length," of ",b.length," projects"]})})]}),l.jsx("div",{className:"dropdown-list",children:A.length>0?A.map(z=>l.jsx("div",{className:`dropdown-item ${t===z.Name?"selected":""}`,onClick:ie=>{ie.stopPropagation(),B(z.Name)},children:l.jsxs("div",{className:"item-content",children:[l.jsxs("div",{className:"item-main",children:[l.jsx("div",{className:"item-name",children:z.Name}),l.jsx("div",{className:"item-status",children:l.jsxs("span",{className:"status-badge",style:{backgroundColor:U(z.Status||"")},children:[q(z.Status||"")," ",z.Status||"Unknown"]})})]}),l.jsx("div",{className:"item-check",children:t===z.Name?"":""})]})},z.Name)):l.jsxs("div",{className:"no-results",children:[l.jsx("div",{className:"no-results-icon",children:""}),l.jsxs("div",{className:"no-results-text",children:[l.jsx("div",{className:"no-results-title",children:"No projects found"}),l.jsx("div",{className:"no-results-subtitle",children:"Try adjusting your search or filters"})]})]})})]})]}),t&&l.jsxs("div",{className:"selected-project",children:[l.jsxs("div",{className:"selected-project-info",children:[l.jsx("div",{className:"project-name",children:t}),l.jsx("div",{className:"project-status",children:l.jsx("span",{className:"status-indicator",style:{backgroundColor:U(((X=b.find(z=>z.Name===t))==null?void 0:X.Status)||"")},children:((te=b.find(z=>z.Name===t))==null?void 0:te.Status)||"Unknown"})})]}),j&&l.jsxs("div",{className:"loading-indicator",children:[l.jsx("div",{className:"loading-dot"}),l.jsx("div",{className:"loading-dot"}),l.jsx("div",{className:"loading-dot"})]})]})]})})})},Vu=r=>{if(!r)return"N/A";try{const t=new Date(r);if(isNaN(t.getTime()))return r;const a=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),o=t.getFullYear();return`${a}/${n}/${o}`}catch(t){return console.warn("Error formateando fecha:",r,t),r}},rj=r=>{if(!r)return"N/A";try{const t=new Date(r);if(isNaN(t.getTime()))return r;const a=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),o=t.getFullYear(),u=t.getHours().toString().padStart(2,"0"),h=t.getMinutes().toString().padStart(2,"0");return`${a}/${n}/${o} ${u}:${h}`}catch(t){return console.warn("Error formateando fecha y hora:",r,t),r}};function nj(){var p,y,x,b,j,N;const r=new Date,a=new Intl.DateTimeFormat("en-AU",{timeZone:"Australia/Brisbane",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).formatToParts(r),n=(p=a.find(E=>E.type==="year"))==null?void 0:p.value,o=(y=a.find(E=>E.type==="month"))==null?void 0:y.value,u=(x=a.find(E=>E.type==="day"))==null?void 0:x.value,h=(b=a.find(E=>E.type==="hour"))==null?void 0:b.value,g=(j=a.find(E=>E.type==="minute"))==null?void 0:j.value,m=(N=a.find(E=>E.type==="second"))==null?void 0:N.value;return`${n}-${o}-${u} ${h}:${g}:${m}`}const Wl={"Top hat":"",Angles:"",Screws:"","Caulking Glue":"",Packers:"",Tapes:"",Others:""},ij=({materials:r,isLoading:t=!1})=>{const[a,n]=k.useState(null),o=k.useMemo(()=>r.summary.map(h=>et(Ue({},h),{category:`${Wl[h.category]||""} ${h.category} ${Wl[h.category]||""}`})),[r.summary]),u=k.useMemo(()=>r.details.map(h=>et(Ue({},h),{category:`${Wl[h.category]||""} ${h.category} ${Wl[h.category]||""}`})),[r.details]);return t?l.jsxs("div",{className:"materials-table-container",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Loading materials..."})]}):r.summary.length===0&&r.details.length===0?l.jsxs("div",{className:"materials-table-container",children:[l.jsx("h2",{children:" Material Tables"}),l.jsx("p",{children:"No materials available for this project."})]}):l.jsxs("div",{className:"materials-table-container",children:[l.jsx("h2",{id:"material-tables",children:"Material Tables"}),l.jsxs("div",{id:"materialsTablesContainer",children:[l.jsx("button",{id:"btnSummary",className:a==="summary"?"active":"",onClick:()=>n(a==="summary"?null:"summary"),children:" Summary Table"}),l.jsx("button",{id:"btnDetails",className:a==="details"?"active":"",onClick:()=>n(a==="details"?null:"details"),children:" Detailed Table"})]}),l.jsx("div",{className:"table-scroll-container",children:l.jsxs("table",{id:"materialsTable",className:a==="summary"?"":"hidden",children:[l.jsxs("thead",{children:[l.jsx("tr",{children:l.jsx("th",{colSpan:4,children:"Summary materials"})}),l.jsxs("tr",{children:[l.jsx("th",{children:" Name"}),l.jsx("th",{children:" Sub Category"}),l.jsx("th",{children:" Description"}),l.jsx("th",{children:" Total"})]})]}),l.jsx("tbody",{children:o.map(h=>h.items.length===0?null:l.jsxs(ro.Fragment,{children:[l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"category",children:h.category})}),h.items.map(g=>l.jsxs("tr",{className:"item",children:[l.jsx("td",{children:g.Name}),l.jsx("td",{children:g.SubCategory}),l.jsx("td",{children:g.Description}),l.jsx("td",{children:g.Total})]},g.ItemID))]},h.category))})]})}),l.jsx("div",{className:"table-scroll-container",children:l.jsxs("table",{id:"materialsTable_details",className:a==="details"?"":"hidden",children:[l.jsxs("thead",{children:[l.jsx("tr",{children:l.jsx("th",{colSpan:8,children:"Summary detailed materials"})}),l.jsxs("tr",{children:[l.jsx("th",{children:" Order"}),l.jsx("th",{children:" Status"}),l.jsx("th",{children:" Date"}),l.jsx("th",{children:" Name"}),l.jsx("th",{children:" Description"}),l.jsx("th",{children:" User Spec"}),l.jsx("th",{children:" Request by"}),l.jsx("th",{children:" Quantity"})]})]}),l.jsx("tbody",{children:u.map(h=>h.items.length===0?null:l.jsxs(ro.Fragment,{children:[l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"category",children:h.category})}),h.items.map((g,m)=>l.jsxs("tr",{className:"item",children:[l.jsx("td",{children:g["Order Number"]}),l.jsx("td",{children:g["Order Status"]==="Delivered"?"":""}),l.jsx("td",{style:{whiteSpace:"nowrap"},children:rj(g["Order Date"])}),l.jsx("td",{children:g.Name}),l.jsx("td",{children:g["Description Material"]}),l.jsx("td",{children:g.Description}),l.jsx("td",{children:g["Request by"]}),l.jsx("td",{children:g.Quantity})]},`${g["Item ID"]}-${m}`))]},h.category))})]})})]})};/*!
 * chartjs-plugin-datalabels v2.2.0
 * https://chartjs-plugin-datalabels.netlify.app
 * (c) 2017-2022 chartjs-plugin-datalabels contributors
 * Released under the MIT license
 */var Fg=function(){if(typeof window!="undefined"){if(window.devicePixelRatio)return window.devicePixelRatio;var r=window.screen;if(r)return(r.deviceXDPI||1)/(r.logicalXDPI||1)}return 1}(),bi={toTextLines:function(r){var t=[],a;for(r=[].concat(r);r.length;)a=r.pop(),typeof a=="string"?t.unshift.apply(t,a.split(`
`)):Array.isArray(a)?r.push.apply(r,a):pi(r)||t.unshift(""+a);return t},textSize:function(r,t,a){var n=[].concat(t),o=n.length,u=r.font,h=0,g;for(r.font=a.string,g=0;g<o;++g)h=Math.max(r.measureText(n[g]).width,h);return r.font=u,{height:o*a.lineHeight,width:h}},bound:function(r,t,a){return Math.max(r,Math.min(t,a))},arrayDiff:function(r,t){var a=r.slice(),n=[],o,u,h,g;for(o=0,h=t.length;o<h;++o)g=t[o],u=a.indexOf(g),u===-1?n.push([g,1]):a.splice(u,1);for(o=0,h=a.length;o<h;++o)n.push([a[o],-1]);return n},rasterize:function(r){return Math.round(r*Fg)/Fg}};function Qu(r,t){var a=t.x,n=t.y;if(a===null)return{x:0,y:-1};if(n===null)return{x:1,y:0};var o=r.x-a,u=r.y-n,h=Math.sqrt(o*o+u*u);return{x:h?o/h:0,y:h?u/h:-1}}function lj(r,t,a,n,o){switch(o){case"center":a=n=0;break;case"bottom":a=0,n=1;break;case"right":a=1,n=0;break;case"left":a=-1,n=0;break;case"top":a=0,n=-1;break;case"start":a=-a,n=-n;break;case"end":break;default:o*=Math.PI/180,a=Math.cos(o),n=Math.sin(o);break}return{x:r,y:t,vx:a,vy:n}}var oj=0,$p=1,zp=2,Bp=4,Pp=8;function Jl(r,t,a){var n=oj;return r<a.left?n|=$p:r>a.right&&(n|=zp),t<a.top?n|=Pp:t>a.bottom&&(n|=Bp),n}function cj(r,t){for(var a=r.x0,n=r.y0,o=r.x1,u=r.y1,h=Jl(a,n,t),g=Jl(o,u,t),m,p,y;!(!(h|g)||h&g);)m=h||g,m&Pp?(p=a+(o-a)*(t.top-n)/(u-n),y=t.top):m&Bp?(p=a+(o-a)*(t.bottom-n)/(u-n),y=t.bottom):m&zp?(y=n+(u-n)*(t.right-a)/(o-a),p=t.right):m&$p&&(y=n+(u-n)*(t.left-a)/(o-a),p=t.left),m===h?(a=p,n=y,h=Jl(a,n,t)):(o=p,u=y,g=Jl(o,u,t));return{x0:a,x1:o,y0:n,y1:u}}function Zl(r,t){var a=t.anchor,n=r,o,u;return t.clamp&&(n=cj(n,t.area)),a==="start"?(o=n.x0,u=n.y0):a==="end"?(o=n.x1,u=n.y1):(o=(n.x0+n.x1)/2,u=(n.y0+n.y1)/2),lj(o,u,r.vx,r.vy,t.align)}var eo={arc:function(r,t){var a=(r.startAngle+r.endAngle)/2,n=Math.cos(a),o=Math.sin(a),u=r.innerRadius,h=r.outerRadius;return Zl({x0:r.x+n*u,y0:r.y+o*u,x1:r.x+n*h,y1:r.y+o*h,vx:n,vy:o},t)},point:function(r,t){var a=Qu(r,t.origin),n=a.x*r.options.radius,o=a.y*r.options.radius;return Zl({x0:r.x-n,y0:r.y-o,x1:r.x+n,y1:r.y+o,vx:a.x,vy:a.y},t)},bar:function(r,t){var a=Qu(r,t.origin),n=r.x,o=r.y,u=0,h=0;return r.horizontal?(n=Math.min(r.x,r.base),u=Math.abs(r.base-r.x)):(o=Math.min(r.y,r.base),h=Math.abs(r.base-r.y)),Zl({x0:n,y0:o+h,x1:n+u,y1:o,vx:a.x,vy:a.y},t)},fallback:function(r,t){var a=Qu(r,t.origin);return Zl({x0:r.x,y0:r.y,x1:r.x+(r.width||0),y1:r.y+(r.height||0),vx:a.x,vy:a.y},t)}},Za=bi.rasterize;function uj(r){var t=r.borderWidth||0,a=r.padding,n=r.size.height,o=r.size.width,u=-o/2,h=-n/2;return{frame:{x:u-a.left-t,y:h-a.top-t,w:o+a.width+t*2,h:n+a.height+t*2},text:{x:u,y:h,w:o,h:n}}}function dj(r,t){var a=t.chart.getDatasetMeta(t.datasetIndex).vScale;if(!a)return null;if(a.xCenter!==void 0&&a.yCenter!==void 0)return{x:a.xCenter,y:a.yCenter};var n=a.getBasePixel();return r.horizontal?{x:n,y:null}:{x:null,y:n}}function hj(r){return r instanceof Xv?eo.arc:r instanceof hd?eo.point:r instanceof rn?eo.bar:eo.fallback}function fj(r,t,a,n,o,u){var h=Math.PI/2;if(u){var g=Math.min(u,o/2,n/2),m=t+g,p=a+g,y=t+n-g,x=a+o-g;r.moveTo(t,p),m<y&&p<x?(r.arc(m,p,g,-Math.PI,-h),r.arc(y,p,g,-h,0),r.arc(y,x,g,0,h),r.arc(m,x,g,h,Math.PI)):m<y?(r.moveTo(m,a),r.arc(y,p,g,-h,h),r.arc(m,p,g,h,Math.PI+h)):p<x?(r.arc(m,p,g,-Math.PI,0),r.arc(m,x,g,0,Math.PI)):r.arc(m,p,g,-Math.PI,Math.PI),r.closePath(),r.moveTo(t,a)}else r.rect(t,a,n,o)}function mj(r,t,a){var n=a.backgroundColor,o=a.borderColor,u=a.borderWidth;!n&&(!o||!u)||(r.beginPath(),fj(r,Za(t.x)+u/2,Za(t.y)+u/2,Za(t.w)-u,Za(t.h)-u,a.borderRadius),r.closePath(),n&&(r.fillStyle=n,r.fill()),o&&u&&(r.strokeStyle=o,r.lineWidth=u,r.lineJoin="miter",r.stroke()))}function gj(r,t,a){var n=a.lineHeight,o=r.w,u=r.x,h=r.y+n/2;return t==="center"?u+=o/2:(t==="end"||t==="right")&&(u+=o),{h:n,w:o,x:u,y:h}}function pj(r,t,a){var n=r.shadowBlur,o=a.stroked,u=Za(a.x),h=Za(a.y),g=Za(a.w);o&&r.strokeText(t,u,h,g),a.filled&&(n&&o&&(r.shadowBlur=0),r.fillText(t,u,h,g),n&&o&&(r.shadowBlur=n))}function yj(r,t,a,n){var o=n.textAlign,u=n.color,h=!!u,g=n.font,m=t.length,p=n.textStrokeColor,y=n.textStrokeWidth,x=p&&y,b;if(!(!m||!h&&!x))for(a=gj(a,o,g),r.font=g.string,r.textAlign=o,r.textBaseline="middle",r.shadowBlur=n.textShadowBlur,r.shadowColor=n.textShadowColor,h&&(r.fillStyle=u),x&&(r.lineJoin="round",r.lineWidth=y,r.strokeStyle=p),b=0,m=t.length;b<m;++b)pj(r,t[b],{stroked:x,filled:h,w:a.w,x:a.x,y:a.y+a.h*b})}var Ip=function(r,t,a,n){var o=this;o._config=r,o._index=n,o._model=null,o._rects=null,o._ctx=t,o._el=a};ji(Ip.prototype,{_modelize:function(r,t,a,n){var o=this,u=o._index,h=Gv(pt([a.font,{}],n,u)),g=pt([a.color,Fv.color],n,u);return{align:pt([a.align,"center"],n,u),anchor:pt([a.anchor,"center"],n,u),area:n.chart.chartArea,backgroundColor:pt([a.backgroundColor,null],n,u),borderColor:pt([a.borderColor,null],n,u),borderRadius:pt([a.borderRadius,0],n,u),borderWidth:pt([a.borderWidth,0],n,u),clamp:pt([a.clamp,!1],n,u),clip:pt([a.clip,!1],n,u),color:g,display:r,font:h,lines:t,offset:pt([a.offset,4],n,u),opacity:pt([a.opacity,1],n,u),origin:dj(o._el,n),padding:Kv(pt([a.padding,4],n,u)),positioner:hj(o._el),rotation:pt([a.rotation,0],n,u)*(Math.PI/180),size:bi.textSize(o._ctx,t,h),textAlign:pt([a.textAlign,"start"],n,u),textShadowBlur:pt([a.textShadowBlur,0],n,u),textShadowColor:pt([a.textShadowColor,g],n,u),textStrokeColor:pt([a.textStrokeColor,g],n,u),textStrokeWidth:pt([a.textStrokeWidth,0],n,u)}},update:function(r){var t=this,a=null,n=null,o=t._index,u=t._config,h,g,m,p=pt([u.display,!0],r,o);p&&(h=r.dataset.data[o],g=Qv(fp(u.formatter,[h,r]),h),m=pi(g)?[]:bi.toTextLines(g),m.length&&(a=t._modelize(p,m,u,r),n=uj(a))),t._model=a,t._rects=n},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(r,t){var a=this,n=r.ctx,o=a._model,u=a._rects,h;this.visible()&&(n.save(),o.clip&&(h=o.area,n.beginPath(),n.rect(h.left,h.top,h.right-h.left,h.bottom-h.top),n.clip()),n.globalAlpha=bi.bound(0,o.opacity,1),n.translate(Za(t.x),Za(t.y)),n.rotate(o.rotation),mj(n,u.frame,o),yj(n,o.lines,u.text,o),n.restore())}});var vj=Number.MIN_SAFE_INTEGER||-9007199254740991,bj=Number.MAX_SAFE_INTEGER||9007199254740991;function ui(r,t,a){var n=Math.cos(a),o=Math.sin(a),u=t.x,h=t.y;return{x:u+n*(r.x-u)-o*(r.y-h),y:h+o*(r.x-u)+n*(r.y-h)}}function Kg(r,t){var a=bj,n=vj,o=t.origin,u,h,g,m,p;for(u=0;u<r.length;++u)h=r[u],g=h.x-o.x,m=h.y-o.y,p=t.vx*g+t.vy*m,a=Math.min(a,p),n=Math.max(n,p);return{min:a,max:n}}function to(r,t){var a=t.x-r.x,n=t.y-r.y,o=Math.sqrt(a*a+n*n);return{vx:(t.x-r.x)/o,vy:(t.y-r.y)/o,origin:r,ln:o}}var Hp=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};ji(Hp.prototype,{center:function(){var r=this._rect;return{x:r.x+r.w/2,y:r.y+r.h/2}},update:function(r,t,a){this._rotation=a,this._rect={x:t.x+r.x,y:t.y+r.y,w:t.w,h:t.h}},contains:function(r){var t=this,a=1,n=t._rect;return r=ui(r,t.center(),-t._rotation),!(r.x<n.x-a||r.y<n.y-a||r.x>n.x+n.w+a*2||r.y>n.y+n.h+a*2)},intersects:function(r){var t=this._points(),a=r._points(),n=[to(t[0],t[1]),to(t[0],t[3])],o,u,h;for(this._rotation!==r._rotation&&n.push(to(a[0],a[1]),to(a[0],a[3])),o=0;o<n.length;++o)if(u=Kg(t,n[o]),h=Kg(a,n[o]),u.max<h.min||h.max<u.min)return!1;return!0},_points:function(){var r=this,t=r._rect,a=r._rotation,n=r.center();return[ui({x:t.x,y:t.y},n,a),ui({x:t.x+t.w,y:t.y},n,a),ui({x:t.x+t.w,y:t.y+t.h},n,a),ui({x:t.x,y:t.y+t.h},n,a)]}});function Yp(r,t,a){var n=t.positioner(r,t),o=n.vx,u=n.vy;if(!o&&!u)return{x:n.x,y:n.y};var h=a.w,g=a.h,m=t.rotation,p=Math.abs(h/2*Math.cos(m))+Math.abs(g/2*Math.sin(m)),y=Math.abs(h/2*Math.sin(m))+Math.abs(g/2*Math.cos(m)),x=1/Math.max(Math.abs(o),Math.abs(u));return p*=o*x,y*=u*x,p+=t.offset*o,y+=t.offset*u,{x:n.x+p,y:n.y+y}}function xj(r,t){var a,n,o,u;for(a=r.length-1;a>=0;--a)for(o=r[a].$layout,n=a-1;n>=0&&o._visible;--n)u=r[n].$layout,u._visible&&o._box.intersects(u._box)&&t(o,u);return r}function wj(r){var t,a,n,o,u,h,g;for(t=0,a=r.length;t<a;++t)n=r[t],o=n.$layout,o._visible&&(g=new Proxy(n._el,{get:(m,p)=>m.getProps([p],!0)[p]}),u=n.geometry(),h=Yp(g,n.model(),u),o._box.update(h,u,n.rotation()));return xj(r,function(m,p){var y=m._hidable,x=p._hidable;y&&x||x?p._visible=!1:y&&(m._visible=!1)})}var xi={prepare:function(r){var t=[],a,n,o,u,h;for(a=0,o=r.length;a<o;++a)for(n=0,u=r[a].length;n<u;++n)h=r[a][n],t.push(h),h.$layout={_box:new Hp,_hidable:!1,_visible:!0,_set:a,_idx:h._index};return t.sort(function(g,m){var p=g.$layout,y=m.$layout;return p._idx===y._idx?y._set-p._set:y._idx-p._idx}),this.update(t),t},update:function(r){var t=!1,a,n,o,u,h;for(a=0,n=r.length;a<n;++a)o=r[a],u=o.model(),h=o.$layout,h._hidable=u&&u.display==="auto",h._visible=o.visible(),t|=h._hidable;t&&wj(r)},lookup:function(r,t){var a,n;for(a=r.length-1;a>=0;--a)if(n=r[a].$layout,n&&n._visible&&n._box.contains(t))return r[a];return null},draw:function(r,t){var a,n,o,u,h,g;for(a=0,n=t.length;a<n;++a)o=t[a],u=o.$layout,u._visible&&(h=o.geometry(),g=Yp(o._el,o.model(),h),u._box.update(g,h,o.rotation()),o.draw(r,g))}},jj=function(r){if(pi(r))return null;var t=r,a,n,o;if(Yv(r))if(!pi(r.label))t=r.label;else if(!pi(r.r))t=r.r;else for(t="",a=Object.keys(r),o=0,n=a.length;o<n;++o)t+=(o!==0?", ":"")+a[o]+": "+r[a[o]];return""+t},Sj={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:jj,labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},Ht="$datalabels",Vp="$default";function _j(r,t){var a=r.datalabels,n={},o=[],u,h;return a===!1?null:(a===!0&&(a={}),t=ji({},[t,a]),u=t.labels||{},h=Object.keys(u),delete t.labels,h.length?h.forEach(function(g){u[g]&&o.push(ji({},[t,u[g],{_key:g}]))}):o.push(t),n=o.reduce(function(g,m){return Vv(m.listeners||{},function(p,y){g[y]=g[y]||{},g[y][m._key||Vp]=p}),delete m.listeners,g},{}),{labels:o,listeners:n})}function od(r,t,a,n){if(t){var o=a.$context,u=a.$groups,h;t[u._set]&&(h=t[u._set][u._key],h&&fp(h,[o,n])===!0&&(r[Ht]._dirty=!0,a.update(o)))}}function Nj(r,t,a,n,o){var u,h;!a&&!n||(a?n?a!==n&&(h=u=!0):h=!0:u=!0,h&&od(r,t.leave,a,o),u&&od(r,t.enter,n,o))}function Cj(r,t){var a=r[Ht],n=a._listeners,o,u;if(!(!n.enter&&!n.leave)){if(t.type==="mousemove")u=xi.lookup(a._labels,t);else if(t.type!=="mouseout")return;o=a._hovered,a._hovered=u,Nj(r,n,o,u,t)}}function Ej(r,t){var a=r[Ht],n=a._listeners.click,o=n&&xi.lookup(a._labels,t);o&&od(r,n,o,t)}var Tj={id:"datalabels",defaults:Sj,beforeInit:function(r){r[Ht]={_actives:[]}},beforeUpdate:function(r){var t=r[Ht];t._listened=!1,t._listeners={},t._datasets=[],t._labels=[]},afterDatasetUpdate:function(r,t,a){var n=t.index,o=r[Ht],u=o._datasets[n]=[],h=r.isDatasetVisible(n),g=r.data.datasets[n],m=_j(g,a),p=t.meta.data||[],y=r.ctx,x,b,j,N,E,A,B,U;for(y.save(),x=0,j=p.length;x<j;++x)if(B=p[x],B[Ht]=[],h&&B&&r.getDataVisibility(x)&&!B.skip)for(b=0,N=m.labels.length;b<N;++b)E=m.labels[b],A=E._key,U=new Ip(E,y,B,x),U.$groups={_set:n,_key:A||Vp},U.$context={active:!1,chart:r,dataIndex:x,dataset:g,datasetIndex:n},U.update(U.$context),B[Ht].push(U),u.push(U);y.restore(),ji(o._listeners,m.listeners,{merger:function(q,X,te){X[q]=X[q]||{},X[q][t.index]=te[q],o._listened=!0}})},afterUpdate:function(r){r[Ht]._labels=xi.prepare(r[Ht]._datasets)},afterDatasetsDraw:function(r){xi.draw(r,r[Ht]._labels)},beforeEvent:function(r,t){if(r[Ht]._listened){var a=t.event;switch(a.type){case"mousemove":case"mouseout":Cj(r,a);break;case"click":Ej(r,a);break}}},afterEvent:function(r){var t=r[Ht],a=t._actives,n=t._actives=r.getActiveElements(),o=bi.arrayDiff(a,n),u,h,g,m,p,y,x;for(u=0,h=o.length;u<h;++u)if(p=o[u],p[1])for(x=p[0].element[Ht]||[],g=0,m=x.length;g<m;++g)y=x[g],y.$context.active=p[1]===1,y.update(y.$context);(t._dirty||o.length)&&(xi.update(t._labels),r.render()),delete t._dirty}};qa.register(nn,ln,rn,on,cn,un,Tj,fd);const Dj=({sheets:r,isLoading:t=!1})=>{if(t)return l.jsxs("div",{className:"chart-container",children:[l.jsx("h3",{children:"Comparison of Purchased vs Used Sheets"}),l.jsx("div",{className:"loading-spinner",id:"sheetsLoadingSpinner"}),l.jsx("p",{children:"Loading sheets data..."})]});if(!r||r.length===0)return l.jsxs("div",{className:"chart-container",children:[l.jsx("h3",{children:"Comparison of Purchased vs Used Sheets"}),l.jsx("p",{children:"No sheets data available for this project."})]});const a=r.length,n=r.reduce((g,m)=>g+(m.TotalReceived||0),0),o=r.reduce((g,m)=>g+(m.TotalUsed||0),0),u={labels:r.map(g=>g.Sheet),datasets:[{label:"Total Received",data:r.map(g=>g.TotalReceived||0),backgroundColor:"rgba(75, 192, 192, 0.6)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1},{label:"Total Used",data:r.map(g=>g.TotalUsed||0),backgroundColor:"rgba(255, 99, 132, 0.6)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1}]},h={responsive:!0,maintainAspectRatio:!1,layout:{padding:{bottom:25}},plugins:{datalabels:{color:"#000",align:"top",anchor:"end",font:{size:12,weight:"bold"},formatter:function(g){return g>0?g.toString():"0"}},legend:{position:"top",font:{size:16,weight:"bold"}},title:{display:!0,text:"Sheets Overview by Details",font:{size:20,weight:"bold"}}},scales:{x:{title:{display:!0,text:"Sheets",font:{size:16,weight:"bold"}},ticks:{autoSkip:!0,maxRotation:45,minRotation:0,font:{size:12,weight:"bold"}}},y:{beginAtZero:!0,title:{display:!0,text:"Quantity",font:{size:16,weight:"bold"}},ticks:{font:{size:14,weight:"bold"}}}}};return l.jsxs("div",{className:"chart-container",children:[l.jsx("h3",{children:"Comparison of Purchased vs Used Sheets"}),l.jsx("div",{className:"chart-wrapper",children:l.jsx(Wv,{data:u,options:h})}),l.jsxs("div",{className:"chart-info",style:{display:"flex",justifyContent:"space-around",marginTop:"20px",flexWrap:"wrap",gap:"20px"},children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Total Sheets:"})," ",a]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Total Received:"})," ",n]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Total Used:"})," ",o]})]})]})},Qp=6048e5,Oj=864e5,Ai=6e4,ki=36e5,Aj=1e3,Xg=Symbol.for("constructDateFrom");function ot(r,t){return typeof r=="function"?r(t):r&&typeof r=="object"&&Xg in r?r[Xg](t):r instanceof Date?new r.constructor(t):new Date(t)}function Ne(r,t){return ot(t||r,r)}function yo(r,t,a){const n=Ne(r,a==null?void 0:a.in);return isNaN(t)?ot((a==null?void 0:a.in)||r,NaN):(t&&n.setDate(n.getDate()+t),n)}function xd(r,t,a){const n=Ne(r,a==null?void 0:a.in);if(isNaN(t))return ot(r,NaN);if(!t)return n;const o=n.getDate(),u=ot(r,n.getTime());u.setMonth(n.getMonth()+t+1,0);const h=u.getDate();return o>=h?u:(n.setFullYear(u.getFullYear(),u.getMonth(),o),n)}function wd(r,t,a){return ot(r,+Ne(r)+t)}function kj(r,t,a){return wd(r,t*ki)}let Rj={};function ar(){return Rj}function ka(r,t){var g,m,p,y,x,b,j,N;const a=ar(),n=(N=(j=(y=(p=t==null?void 0:t.weekStartsOn)!=null?p:(m=(g=t==null?void 0:t.locale)==null?void 0:g.options)==null?void 0:m.weekStartsOn)!=null?y:a.weekStartsOn)!=null?j:(b=(x=a.locale)==null?void 0:x.options)==null?void 0:b.weekStartsOn)!=null?N:0,o=Ne(r,t==null?void 0:t.in),u=o.getDay(),h=(u<n?7:0)+u-n;return o.setDate(o.getDate()-h),o.setHours(0,0,0,0),o}function sn(r,t){return ka(r,et(Ue({},t),{weekStartsOn:1}))}function Gp(r,t){const a=Ne(r,t==null?void 0:t.in),n=a.getFullYear(),o=ot(a,0);o.setFullYear(n+1,0,4),o.setHours(0,0,0,0);const u=sn(o),h=ot(a,0);h.setFullYear(n,0,4),h.setHours(0,0,0,0);const g=sn(h);return a.getTime()>=u.getTime()?n+1:a.getTime()>=g.getTime()?n:n-1}function oo(r){const t=Ne(r),a=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return a.setUTCFullYear(t.getFullYear()),+r-+a}function sr(r,...t){const a=ot.bind(null,t.find(n=>typeof n=="object"));return t.map(a)}function cd(r,t){const a=Ne(r,t==null?void 0:t.in);return a.setHours(0,0,0,0),a}function Fp(r,t,a){const[n,o]=sr(a==null?void 0:a.in,r,t),u=cd(n),h=cd(o),g=+u-oo(u),m=+h-oo(h);return Math.round((g-m)/Oj)}function Mj(r,t){const a=Gp(r,t),n=ot(r,0);return n.setFullYear(a,0,4),n.setHours(0,0,0,0),sn(n)}function Uj(r,t,a){const n=Ne(r,a==null?void 0:a.in);return n.setTime(n.getTime()+t*Ai),n}function qj(r,t,a){return xd(r,t*3,a)}function Lj(r,t,a){return wd(r,t*1e3)}function $j(r,t,a){return yo(r,t*7,a)}function zj(r,t,a){return xd(r,t*12,a)}function wi(r,t){const a=+Ne(r)-+Ne(t);return a<0?-1:a>0?1:a}function Bj(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function Kp(r){return!(!Bj(r)&&typeof r!="number"||isNaN(+Ne(r)))}function Pj(r,t,a){const[n,o]=sr(a==null?void 0:a.in,r,t),u=n.getFullYear()-o.getFullYear(),h=n.getMonth()-o.getMonth();return u*12+h}function Ij(r,t,a){const[n,o]=sr(a==null?void 0:a.in,r,t);return n.getFullYear()-o.getFullYear()}function Xp(r,t,a){const[n,o]=sr(a==null?void 0:a.in,r,t),u=Wg(n,o),h=Math.abs(Fp(n,o));n.setDate(n.getDate()-u*h);const g=+(Wg(n,o)===-u),m=u*(h-g);return m===0?0:m}function Wg(r,t){const a=r.getFullYear()-t.getFullYear()||r.getMonth()-t.getMonth()||r.getDate()-t.getDate()||r.getHours()-t.getHours()||r.getMinutes()-t.getMinutes()||r.getSeconds()-t.getSeconds()||r.getMilliseconds()-t.getMilliseconds();return a<0?-1:a>0?1:a}function Ri(r){return t=>{const n=(r?Math[r]:Math.trunc)(t);return n===0?0:n}}function Hj(r,t,a){const[n,o]=sr(a==null?void 0:a.in,r,t),u=(+n-+o)/ki;return Ri(a==null?void 0:a.roundingMethod)(u)}function jd(r,t){return+Ne(r)-+Ne(t)}function Yj(r,t,a){const n=jd(r,t)/Ai;return Ri(a==null?void 0:a.roundingMethod)(n)}function Wp(r,t){const a=Ne(r,t==null?void 0:t.in);return a.setHours(23,59,59,999),a}function Jp(r,t){const a=Ne(r,t==null?void 0:t.in),n=a.getMonth();return a.setFullYear(a.getFullYear(),n+1,0),a.setHours(23,59,59,999),a}function Vj(r,t){const a=Ne(r,t==null?void 0:t.in);return+Wp(a,t)==+Jp(a,t)}function Zp(r,t,a){const[n,o,u]=sr(a==null?void 0:a.in,r,r,t),h=wi(o,u),g=Math.abs(Pj(o,u));if(g<1)return 0;o.getMonth()===1&&o.getDate()>27&&o.setDate(30),o.setMonth(o.getMonth()-h*g);let m=wi(o,u)===-h;Vj(n)&&g===1&&wi(n,u)===1&&(m=!1);const p=h*(g-+m);return p===0?0:p}function Qj(r,t,a){const n=Zp(r,t,a)/3;return Ri(a==null?void 0:a.roundingMethod)(n)}function Gj(r,t,a){const n=jd(r,t)/1e3;return Ri(a==null?void 0:a.roundingMethod)(n)}function Fj(r,t,a){const n=Xp(r,t,a)/7;return Ri(a==null?void 0:a.roundingMethod)(n)}function Kj(r,t,a){const[n,o]=sr(a==null?void 0:a.in,r,t),u=wi(n,o),h=Math.abs(Ij(n,o));n.setFullYear(1584),o.setFullYear(1584);const g=wi(n,o)===-u,m=u*(h-+g);return m===0?0:m}function Xj(r,t){const a=Ne(r,t==null?void 0:t.in),n=a.getMonth(),o=n-n%3;return a.setMonth(o,1),a.setHours(0,0,0,0),a}function Wj(r,t){const a=Ne(r,t==null?void 0:t.in);return a.setDate(1),a.setHours(0,0,0,0),a}function Jj(r,t){const a=Ne(r,t==null?void 0:t.in),n=a.getFullYear();return a.setFullYear(n+1,0,0),a.setHours(23,59,59,999),a}function e0(r,t){const a=Ne(r,t==null?void 0:t.in);return a.setFullYear(a.getFullYear(),0,1),a.setHours(0,0,0,0),a}function Zj(r,t){const a=Ne(r,t==null?void 0:t.in);return a.setMinutes(59,59,999),a}function eS(r,t){var g,m,p,y;const a=ar(),n=(y=(p=a.weekStartsOn)!=null?p:(m=(g=a.locale)==null?void 0:g.options)==null?void 0:m.weekStartsOn)!=null?y:0,o=Ne(r,t==null?void 0:t.in),u=o.getDay(),h=(u<n?-7:0)+6-(u-n);return o.setDate(o.getDate()+h),o.setHours(23,59,59,999),o}function tS(r,t){const a=Ne(r,t==null?void 0:t.in);return a.setSeconds(59,999),a}function aS(r,t){const a=Ne(r,t==null?void 0:t.in),n=a.getMonth(),o=n-n%3+3;return a.setMonth(o,0),a.setHours(23,59,59,999),a}function sS(r,t){const a=Ne(r,t==null?void 0:t.in);return a.setMilliseconds(999),a}const rS={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},nS=(r,t,a)=>{let n;const o=rS[r];return typeof o=="string"?n=o:t===1?n=o.one:n=o.other.replace("{{count}}",t.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+n:n+" ago":n};function Gu(r){return(t={})=>{const a=t.width?String(t.width):r.defaultWidth;return r.formats[a]||r.formats[r.defaultWidth]}}const iS={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},lS={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},oS={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},cS={date:Gu({formats:iS,defaultWidth:"full"}),time:Gu({formats:lS,defaultWidth:"full"}),dateTime:Gu({formats:oS,defaultWidth:"full"})},uS={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},dS=(r,t,a,n)=>uS[r];function di(r){return(t,a)=>{const n=a!=null&&a.context?String(a.context):"standalone";let o;if(n==="formatting"&&r.formattingValues){const h=r.defaultFormattingWidth||r.defaultWidth,g=a!=null&&a.width?String(a.width):h;o=r.formattingValues[g]||r.formattingValues[h]}else{const h=r.defaultWidth,g=a!=null&&a.width?String(a.width):r.defaultWidth;o=r.values[g]||r.values[h]}const u=r.argumentCallback?r.argumentCallback(t):t;return o[u]}}const hS={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},fS={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},mS={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},gS={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},pS={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},yS={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},vS=(r,t)=>{const a=Number(r),n=a%100;if(n>20||n<10)switch(n%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},bS={ordinalNumber:vS,era:di({values:hS,defaultWidth:"wide"}),quarter:di({values:fS,defaultWidth:"wide",argumentCallback:r=>r-1}),month:di({values:mS,defaultWidth:"wide"}),day:di({values:gS,defaultWidth:"wide"}),dayPeriod:di({values:pS,defaultWidth:"wide",formattingValues:yS,defaultFormattingWidth:"wide"})};function hi(r){return(t,a={})=>{const n=a.width,o=n&&r.matchPatterns[n]||r.matchPatterns[r.defaultMatchWidth],u=t.match(o);if(!u)return null;const h=u[0],g=n&&r.parsePatterns[n]||r.parsePatterns[r.defaultParseWidth],m=Array.isArray(g)?wS(g,x=>x.test(h)):xS(g,x=>x.test(h));let p;p=r.valueCallback?r.valueCallback(m):m,p=a.valueCallback?a.valueCallback(p):p;const y=t.slice(h.length);return{value:p,rest:y}}}function xS(r,t){for(const a in r)if(Object.prototype.hasOwnProperty.call(r,a)&&t(r[a]))return a}function wS(r,t){for(let a=0;a<r.length;a++)if(t(r[a]))return a}function jS(r){return(t,a={})=>{const n=t.match(r.matchPattern);if(!n)return null;const o=n[0],u=t.match(r.parsePattern);if(!u)return null;let h=r.valueCallback?r.valueCallback(u[0]):u[0];h=a.valueCallback?a.valueCallback(h):h;const g=t.slice(o.length);return{value:h,rest:g}}}const SS=/^(\d+)(th|st|nd|rd)?/i,_S=/\d+/i,NS={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},CS={any:[/^b/i,/^(a|c)/i]},ES={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},TS={any:[/1/i,/2/i,/3/i,/4/i]},DS={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},OS={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},AS={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},kS={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},RS={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},MS={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},US={ordinalNumber:jS({matchPattern:SS,parsePattern:_S,valueCallback:r=>parseInt(r,10)}),era:hi({matchPatterns:NS,defaultMatchWidth:"wide",parsePatterns:CS,defaultParseWidth:"any"}),quarter:hi({matchPatterns:ES,defaultMatchWidth:"wide",parsePatterns:TS,defaultParseWidth:"any",valueCallback:r=>r+1}),month:hi({matchPatterns:DS,defaultMatchWidth:"wide",parsePatterns:OS,defaultParseWidth:"any"}),day:hi({matchPatterns:AS,defaultMatchWidth:"wide",parsePatterns:kS,defaultParseWidth:"any"}),dayPeriod:hi({matchPatterns:RS,defaultMatchWidth:"any",parsePatterns:MS,defaultParseWidth:"any"})},t0={code:"en-US",formatDistance:nS,formatLong:cS,formatRelative:dS,localize:bS,match:US,options:{weekStartsOn:0,firstWeekContainsDate:1}};function qS(r,t){const a=Ne(r,t==null?void 0:t.in);return Fp(a,e0(a))+1}function a0(r,t){const a=Ne(r,t==null?void 0:t.in),n=+sn(a)-+Mj(a);return Math.round(n/Qp)+1}function Sd(r,t){var y,x,b,j,N,E,A,B;const a=Ne(r,t==null?void 0:t.in),n=a.getFullYear(),o=ar(),u=(B=(A=(j=(b=t==null?void 0:t.firstWeekContainsDate)!=null?b:(x=(y=t==null?void 0:t.locale)==null?void 0:y.options)==null?void 0:x.firstWeekContainsDate)!=null?j:o.firstWeekContainsDate)!=null?A:(E=(N=o.locale)==null?void 0:N.options)==null?void 0:E.firstWeekContainsDate)!=null?B:1,h=ot((t==null?void 0:t.in)||r,0);h.setFullYear(n+1,0,u),h.setHours(0,0,0,0);const g=ka(h,t),m=ot((t==null?void 0:t.in)||r,0);m.setFullYear(n,0,u),m.setHours(0,0,0,0);const p=ka(m,t);return+a>=+g?n+1:+a>=+p?n:n-1}function LS(r,t){var g,m,p,y,x,b,j,N;const a=ar(),n=(N=(j=(y=(p=t==null?void 0:t.firstWeekContainsDate)!=null?p:(m=(g=t==null?void 0:t.locale)==null?void 0:g.options)==null?void 0:m.firstWeekContainsDate)!=null?y:a.firstWeekContainsDate)!=null?j:(b=(x=a.locale)==null?void 0:x.options)==null?void 0:b.firstWeekContainsDate)!=null?N:1,o=Sd(r,t),u=ot((t==null?void 0:t.in)||r,0);return u.setFullYear(o,0,n),u.setHours(0,0,0,0),ka(u,t)}function s0(r,t){const a=Ne(r,t==null?void 0:t.in),n=+ka(a,t)-+LS(a,t);return Math.round(n/Qp)+1}function Ie(r,t){const a=r<0?"-":"",n=Math.abs(r).toString().padStart(t,"0");return a+n}const Cs={y(r,t){const a=r.getFullYear(),n=a>0?a:1-a;return Ie(t==="yy"?n%100:n,t.length)},M(r,t){const a=r.getMonth();return t==="M"?String(a+1):Ie(a+1,2)},d(r,t){return Ie(r.getDate(),t.length)},a(r,t){const a=r.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];case"aaaa":default:return a==="am"?"a.m.":"p.m."}},h(r,t){return Ie(r.getHours()%12||12,t.length)},H(r,t){return Ie(r.getHours(),t.length)},m(r,t){return Ie(r.getMinutes(),t.length)},s(r,t){return Ie(r.getSeconds(),t.length)},S(r,t){const a=t.length,n=r.getMilliseconds(),o=Math.trunc(n*Math.pow(10,a-3));return Ie(o,t.length)}},Kr={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Jg={G:function(r,t,a){const n=r.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return a.era(n,{width:"abbreviated"});case"GGGGG":return a.era(n,{width:"narrow"});case"GGGG":default:return a.era(n,{width:"wide"})}},y:function(r,t,a){if(t==="yo"){const n=r.getFullYear(),o=n>0?n:1-n;return a.ordinalNumber(o,{unit:"year"})}return Cs.y(r,t)},Y:function(r,t,a,n){const o=Sd(r,n),u=o>0?o:1-o;if(t==="YY"){const h=u%100;return Ie(h,2)}return t==="Yo"?a.ordinalNumber(u,{unit:"year"}):Ie(u,t.length)},R:function(r,t){const a=Gp(r);return Ie(a,t.length)},u:function(r,t){const a=r.getFullYear();return Ie(a,t.length)},Q:function(r,t,a){const n=Math.ceil((r.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return Ie(n,2);case"Qo":return a.ordinalNumber(n,{unit:"quarter"});case"QQQ":return a.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(n,{width:"wide",context:"formatting"})}},q:function(r,t,a){const n=Math.ceil((r.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return Ie(n,2);case"qo":return a.ordinalNumber(n,{unit:"quarter"});case"qqq":return a.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(n,{width:"wide",context:"standalone"})}},M:function(r,t,a){const n=r.getMonth();switch(t){case"M":case"MM":return Cs.M(r,t);case"Mo":return a.ordinalNumber(n+1,{unit:"month"});case"MMM":return a.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(n,{width:"wide",context:"formatting"})}},L:function(r,t,a){const n=r.getMonth();switch(t){case"L":return String(n+1);case"LL":return Ie(n+1,2);case"Lo":return a.ordinalNumber(n+1,{unit:"month"});case"LLL":return a.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(n,{width:"wide",context:"standalone"})}},w:function(r,t,a,n){const o=s0(r,n);return t==="wo"?a.ordinalNumber(o,{unit:"week"}):Ie(o,t.length)},I:function(r,t,a){const n=a0(r);return t==="Io"?a.ordinalNumber(n,{unit:"week"}):Ie(n,t.length)},d:function(r,t,a){return t==="do"?a.ordinalNumber(r.getDate(),{unit:"date"}):Cs.d(r,t)},D:function(r,t,a){const n=qS(r);return t==="Do"?a.ordinalNumber(n,{unit:"dayOfYear"}):Ie(n,t.length)},E:function(r,t,a){const n=r.getDay();switch(t){case"E":case"EE":case"EEE":return a.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(n,{width:"short",context:"formatting"});case"EEEE":default:return a.day(n,{width:"wide",context:"formatting"})}},e:function(r,t,a,n){const o=r.getDay(),u=(o-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(u);case"ee":return Ie(u,2);case"eo":return a.ordinalNumber(u,{unit:"day"});case"eee":return a.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(o,{width:"short",context:"formatting"});case"eeee":default:return a.day(o,{width:"wide",context:"formatting"})}},c:function(r,t,a,n){const o=r.getDay(),u=(o-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(u);case"cc":return Ie(u,t.length);case"co":return a.ordinalNumber(u,{unit:"day"});case"ccc":return a.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(o,{width:"narrow",context:"standalone"});case"cccccc":return a.day(o,{width:"short",context:"standalone"});case"cccc":default:return a.day(o,{width:"wide",context:"standalone"})}},i:function(r,t,a){const n=r.getDay(),o=n===0?7:n;switch(t){case"i":return String(o);case"ii":return Ie(o,t.length);case"io":return a.ordinalNumber(o,{unit:"day"});case"iii":return a.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(n,{width:"short",context:"formatting"});case"iiii":default:return a.day(n,{width:"wide",context:"formatting"})}},a:function(r,t,a){const o=r.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(r,t,a){const n=r.getHours();let o;switch(n===12?o=Kr.noon:n===0?o=Kr.midnight:o=n/12>=1?"pm":"am",t){case"b":case"bb":return a.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(r,t,a){const n=r.getHours();let o;switch(n>=17?o=Kr.evening:n>=12?o=Kr.afternoon:n>=4?o=Kr.morning:o=Kr.night,t){case"B":case"BB":case"BBB":return a.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(r,t,a){if(t==="ho"){let n=r.getHours()%12;return n===0&&(n=12),a.ordinalNumber(n,{unit:"hour"})}return Cs.h(r,t)},H:function(r,t,a){return t==="Ho"?a.ordinalNumber(r.getHours(),{unit:"hour"}):Cs.H(r,t)},K:function(r,t,a){const n=r.getHours()%12;return t==="Ko"?a.ordinalNumber(n,{unit:"hour"}):Ie(n,t.length)},k:function(r,t,a){let n=r.getHours();return n===0&&(n=24),t==="ko"?a.ordinalNumber(n,{unit:"hour"}):Ie(n,t.length)},m:function(r,t,a){return t==="mo"?a.ordinalNumber(r.getMinutes(),{unit:"minute"}):Cs.m(r,t)},s:function(r,t,a){return t==="so"?a.ordinalNumber(r.getSeconds(),{unit:"second"}):Cs.s(r,t)},S:function(r,t){return Cs.S(r,t)},X:function(r,t,a){const n=r.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return ep(n);case"XXXX":case"XX":return Js(n);case"XXXXX":case"XXX":default:return Js(n,":")}},x:function(r,t,a){const n=r.getTimezoneOffset();switch(t){case"x":return ep(n);case"xxxx":case"xx":return Js(n);case"xxxxx":case"xxx":default:return Js(n,":")}},O:function(r,t,a){const n=r.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Zg(n,":");case"OOOO":default:return"GMT"+Js(n,":")}},z:function(r,t,a){const n=r.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Zg(n,":");case"zzzz":default:return"GMT"+Js(n,":")}},t:function(r,t,a){const n=Math.trunc(+r/1e3);return Ie(n,t.length)},T:function(r,t,a){return Ie(+r,t.length)}};function Zg(r,t=""){const a=r>0?"-":"+",n=Math.abs(r),o=Math.trunc(n/60),u=n%60;return u===0?a+String(o):a+String(o)+t+Ie(u,2)}function ep(r,t){return r%60===0?(r>0?"-":"+")+Ie(Math.abs(r)/60,2):Js(r,t)}function Js(r,t=""){const a=r>0?"-":"+",n=Math.abs(r),o=Ie(Math.trunc(n/60),2),u=Ie(n%60,2);return a+o+t+u}const tp=(r,t)=>{switch(r){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},r0=(r,t)=>{switch(r){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},$S=(r,t)=>{const a=r.match(/(P+)(p+)?/)||[],n=a[1],o=a[2];if(!o)return tp(r,t);let u;switch(n){case"P":u=t.dateTime({width:"short"});break;case"PP":u=t.dateTime({width:"medium"});break;case"PPP":u=t.dateTime({width:"long"});break;case"PPPP":default:u=t.dateTime({width:"full"});break}return u.replace("{{date}}",tp(n,t)).replace("{{time}}",r0(o,t))},ud={p:r0,P:$S},zS=/^D+$/,BS=/^Y+$/,PS=["D","DD","YY","YYYY"];function n0(r){return zS.test(r)}function i0(r){return BS.test(r)}function dd(r,t,a){const n=IS(r,t,a);if(console.warn(n),PS.includes(r))throw new RangeError(n)}function IS(r,t,a){const n=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${t}\`) for formatting ${n} to the input \`${a}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const HS=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,YS=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,VS=/^'([^]*?)'?$/,QS=/''/g,GS=/[a-zA-Z]/;function FS(r,t,a){var y,x,b,j,N,E,A,B,U,q,X,te,z,ie,C,_,R,F;const n=ar(),o=(x=(y=a==null?void 0:a.locale)!=null?y:n.locale)!=null?x:t0,u=(q=(U=(E=(N=a==null?void 0:a.firstWeekContainsDate)!=null?N:(j=(b=a==null?void 0:a.locale)==null?void 0:b.options)==null?void 0:j.firstWeekContainsDate)!=null?E:n.firstWeekContainsDate)!=null?U:(B=(A=n.locale)==null?void 0:A.options)==null?void 0:B.firstWeekContainsDate)!=null?q:1,h=(F=(R=(ie=(z=a==null?void 0:a.weekStartsOn)!=null?z:(te=(X=a==null?void 0:a.locale)==null?void 0:X.options)==null?void 0:te.weekStartsOn)!=null?ie:n.weekStartsOn)!=null?R:(_=(C=n.locale)==null?void 0:C.options)==null?void 0:_.weekStartsOn)!=null?F:0,g=Ne(r,a==null?void 0:a.in);if(!Kp(g))throw new RangeError("Invalid time value");let m=t.match(YS).map(K=>{const le=K[0];if(le==="p"||le==="P"){const he=ud[le];return he(K,o.formatLong)}return K}).join("").match(HS).map(K=>{if(K==="''")return{isToken:!1,value:"'"};const le=K[0];if(le==="'")return{isToken:!1,value:KS(K)};if(Jg[le])return{isToken:!0,value:K};if(le.match(GS))throw new RangeError("Format string contains an unescaped latin alphabet character `"+le+"`");return{isToken:!1,value:K}});o.localize.preprocessor&&(m=o.localize.preprocessor(g,m));const p={firstWeekContainsDate:u,weekStartsOn:h,locale:o};return m.map(K=>{if(!K.isToken)return K.value;const le=K.value;(!(a!=null&&a.useAdditionalWeekYearTokens)&&i0(le)||!(a!=null&&a.useAdditionalDayOfYearTokens)&&n0(le))&&dd(le,t,String(r));const he=Jg[le[0]];return he(g,le,o.localize,p)}).join("")}function KS(r){const t=r.match(VS);return t?t[1].replace(QS,"'"):r}function XS(){return Object.assign({},ar())}function WS(r,t){const a=Ne(r,t==null?void 0:t.in).getDay();return a===0?7:a}function JS(r,t){const a=ZS(t)?new t(0):ot(t,0);return a.setFullYear(r.getFullYear(),r.getMonth(),r.getDate()),a.setHours(r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()),a}function ZS(r){var t;return typeof r=="function"&&((t=r.prototype)==null?void 0:t.constructor)===r}const e_=10;class l0{constructor(){ue(this,"subPriority",0)}validate(t,a){return!0}}class t_ extends l0{constructor(t,a,n,o,u){super(),this.value=t,this.validateValue=a,this.setValue=n,this.priority=o,u&&(this.subPriority=u)}validate(t,a){return this.validateValue(t,this.value,a)}set(t,a,n){return this.setValue(t,a,this.value,n)}}class a_ extends l0{constructor(a,n){super();ue(this,"priority",e_);ue(this,"subPriority",-1);this.context=a||(o=>ot(n,o))}set(a,n){return n.timestampIsSet?a:ot(a,JS(a,this.context))}}class $e{run(t,a,n,o){const u=this.parse(t,a,n,o);return u?{setter:new t_(u.value,this.validate,this.set,this.priority,this.subPriority),rest:u.rest}:null}validate(t,a,n){return!0}}class s_ extends $e{constructor(){super(...arguments);ue(this,"priority",140);ue(this,"incompatibleTokens",["R","u","t","T"])}parse(a,n,o){switch(n){case"G":case"GG":case"GGG":return o.era(a,{width:"abbreviated"})||o.era(a,{width:"narrow"});case"GGGGG":return o.era(a,{width:"narrow"});case"GGGG":default:return o.era(a,{width:"wide"})||o.era(a,{width:"abbreviated"})||o.era(a,{width:"narrow"})}}set(a,n,o){return n.era=o,a.setFullYear(o,0,1),a.setHours(0,0,0,0),a}}const ht={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Oa={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function ft(r,t){return r&&{value:t(r.value),rest:r.rest}}function at(r,t){const a=t.match(r);return a?{value:parseInt(a[0],10),rest:t.slice(a[0].length)}:null}function Aa(r,t){const a=t.match(r);if(!a)return null;if(a[0]==="Z")return{value:0,rest:t.slice(1)};const n=a[1]==="+"?1:-1,o=a[2]?parseInt(a[2],10):0,u=a[3]?parseInt(a[3],10):0,h=a[5]?parseInt(a[5],10):0;return{value:n*(o*ki+u*Ai+h*Aj),rest:t.slice(a[0].length)}}function o0(r){return at(ht.anyDigitsSigned,r)}function ct(r,t){switch(r){case 1:return at(ht.singleDigit,t);case 2:return at(ht.twoDigits,t);case 3:return at(ht.threeDigits,t);case 4:return at(ht.fourDigits,t);default:return at(new RegExp("^\\d{1,"+r+"}"),t)}}function co(r,t){switch(r){case 1:return at(ht.singleDigitSigned,t);case 2:return at(ht.twoDigitsSigned,t);case 3:return at(ht.threeDigitsSigned,t);case 4:return at(ht.fourDigitsSigned,t);default:return at(new RegExp("^-?\\d{1,"+r+"}"),t)}}function _d(r){switch(r){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function c0(r,t){const a=t>0,n=a?t:1-t;let o;if(n<=50)o=r||100;else{const u=n+50,h=Math.trunc(u/100)*100,g=r>=u%100;o=r+h-(g?100:0)}return a?o:1-o}function u0(r){return r%400===0||r%4===0&&r%100!==0}class r_ extends $e{constructor(){super(...arguments);ue(this,"priority",130);ue(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(a,n,o){const u=h=>({year:h,isTwoDigitYear:n==="yy"});switch(n){case"y":return ft(ct(4,a),u);case"yo":return ft(o.ordinalNumber(a,{unit:"year"}),u);default:return ft(ct(n.length,a),u)}}validate(a,n){return n.isTwoDigitYear||n.year>0}set(a,n,o){const u=a.getFullYear();if(o.isTwoDigitYear){const g=c0(o.year,u);return a.setFullYear(g,0,1),a.setHours(0,0,0,0),a}const h=!("era"in n)||n.era===1?o.year:1-o.year;return a.setFullYear(h,0,1),a.setHours(0,0,0,0),a}}class n_ extends $e{constructor(){super(...arguments);ue(this,"priority",130);ue(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(a,n,o){const u=h=>({year:h,isTwoDigitYear:n==="YY"});switch(n){case"Y":return ft(ct(4,a),u);case"Yo":return ft(o.ordinalNumber(a,{unit:"year"}),u);default:return ft(ct(n.length,a),u)}}validate(a,n){return n.isTwoDigitYear||n.year>0}set(a,n,o,u){const h=Sd(a,u);if(o.isTwoDigitYear){const m=c0(o.year,h);return a.setFullYear(m,0,u.firstWeekContainsDate),a.setHours(0,0,0,0),ka(a,u)}const g=!("era"in n)||n.era===1?o.year:1-o.year;return a.setFullYear(g,0,u.firstWeekContainsDate),a.setHours(0,0,0,0),ka(a,u)}}class i_ extends $e{constructor(){super(...arguments);ue(this,"priority",130);ue(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(a,n){return co(n==="R"?4:n.length,a)}set(a,n,o){const u=ot(a,0);return u.setFullYear(o,0,4),u.setHours(0,0,0,0),sn(u)}}class l_ extends $e{constructor(){super(...arguments);ue(this,"priority",130);ue(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(a,n){return co(n==="u"?4:n.length,a)}set(a,n,o){return a.setFullYear(o,0,1),a.setHours(0,0,0,0),a}}class o_ extends $e{constructor(){super(...arguments);ue(this,"priority",120);ue(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(a,n,o){switch(n){case"Q":case"QQ":return ct(n.length,a);case"Qo":return o.ordinalNumber(a,{unit:"quarter"});case"QQQ":return o.quarter(a,{width:"abbreviated",context:"formatting"})||o.quarter(a,{width:"narrow",context:"formatting"});case"QQQQQ":return o.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return o.quarter(a,{width:"wide",context:"formatting"})||o.quarter(a,{width:"abbreviated",context:"formatting"})||o.quarter(a,{width:"narrow",context:"formatting"})}}validate(a,n){return n>=1&&n<=4}set(a,n,o){return a.setMonth((o-1)*3,1),a.setHours(0,0,0,0),a}}class c_ extends $e{constructor(){super(...arguments);ue(this,"priority",120);ue(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(a,n,o){switch(n){case"q":case"qq":return ct(n.length,a);case"qo":return o.ordinalNumber(a,{unit:"quarter"});case"qqq":return o.quarter(a,{width:"abbreviated",context:"standalone"})||o.quarter(a,{width:"narrow",context:"standalone"});case"qqqqq":return o.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return o.quarter(a,{width:"wide",context:"standalone"})||o.quarter(a,{width:"abbreviated",context:"standalone"})||o.quarter(a,{width:"narrow",context:"standalone"})}}validate(a,n){return n>=1&&n<=4}set(a,n,o){return a.setMonth((o-1)*3,1),a.setHours(0,0,0,0),a}}class u_ extends $e{constructor(){super(...arguments);ue(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);ue(this,"priority",110)}parse(a,n,o){const u=h=>h-1;switch(n){case"M":return ft(at(ht.month,a),u);case"MM":return ft(ct(2,a),u);case"Mo":return ft(o.ordinalNumber(a,{unit:"month"}),u);case"MMM":return o.month(a,{width:"abbreviated",context:"formatting"})||o.month(a,{width:"narrow",context:"formatting"});case"MMMMM":return o.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return o.month(a,{width:"wide",context:"formatting"})||o.month(a,{width:"abbreviated",context:"formatting"})||o.month(a,{width:"narrow",context:"formatting"})}}validate(a,n){return n>=0&&n<=11}set(a,n,o){return a.setMonth(o,1),a.setHours(0,0,0,0),a}}class d_ extends $e{constructor(){super(...arguments);ue(this,"priority",110);ue(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(a,n,o){const u=h=>h-1;switch(n){case"L":return ft(at(ht.month,a),u);case"LL":return ft(ct(2,a),u);case"Lo":return ft(o.ordinalNumber(a,{unit:"month"}),u);case"LLL":return o.month(a,{width:"abbreviated",context:"standalone"})||o.month(a,{width:"narrow",context:"standalone"});case"LLLLL":return o.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return o.month(a,{width:"wide",context:"standalone"})||o.month(a,{width:"abbreviated",context:"standalone"})||o.month(a,{width:"narrow",context:"standalone"})}}validate(a,n){return n>=0&&n<=11}set(a,n,o){return a.setMonth(o,1),a.setHours(0,0,0,0),a}}function h_(r,t,a){const n=Ne(r,a==null?void 0:a.in),o=s0(n,a)-t;return n.setDate(n.getDate()-o*7),Ne(n,a==null?void 0:a.in)}class f_ extends $e{constructor(){super(...arguments);ue(this,"priority",100);ue(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(a,n,o){switch(n){case"w":return at(ht.week,a);case"wo":return o.ordinalNumber(a,{unit:"week"});default:return ct(n.length,a)}}validate(a,n){return n>=1&&n<=53}set(a,n,o,u){return ka(h_(a,o,u),u)}}function m_(r,t,a){const n=Ne(r,a==null?void 0:a.in),o=a0(n,a)-t;return n.setDate(n.getDate()-o*7),n}class g_ extends $e{constructor(){super(...arguments);ue(this,"priority",100);ue(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(a,n,o){switch(n){case"I":return at(ht.week,a);case"Io":return o.ordinalNumber(a,{unit:"week"});default:return ct(n.length,a)}}validate(a,n){return n>=1&&n<=53}set(a,n,o){return sn(m_(a,o))}}const p_=[31,28,31,30,31,30,31,31,30,31,30,31],y_=[31,29,31,30,31,30,31,31,30,31,30,31];class v_ extends $e{constructor(){super(...arguments);ue(this,"priority",90);ue(this,"subPriority",1);ue(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(a,n,o){switch(n){case"d":return at(ht.date,a);case"do":return o.ordinalNumber(a,{unit:"date"});default:return ct(n.length,a)}}validate(a,n){const o=a.getFullYear(),u=u0(o),h=a.getMonth();return u?n>=1&&n<=y_[h]:n>=1&&n<=p_[h]}set(a,n,o){return a.setDate(o),a.setHours(0,0,0,0),a}}class b_ extends $e{constructor(){super(...arguments);ue(this,"priority",90);ue(this,"subpriority",1);ue(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(a,n,o){switch(n){case"D":case"DD":return at(ht.dayOfYear,a);case"Do":return o.ordinalNumber(a,{unit:"date"});default:return ct(n.length,a)}}validate(a,n){const o=a.getFullYear();return u0(o)?n>=1&&n<=366:n>=1&&n<=365}set(a,n,o){return a.setMonth(0,o),a.setHours(0,0,0,0),a}}function Nd(r,t,a){var x,b,j,N,E,A,B,U;const n=ar(),o=(U=(B=(N=(j=a==null?void 0:a.weekStartsOn)!=null?j:(b=(x=a==null?void 0:a.locale)==null?void 0:x.options)==null?void 0:b.weekStartsOn)!=null?N:n.weekStartsOn)!=null?B:(A=(E=n.locale)==null?void 0:E.options)==null?void 0:A.weekStartsOn)!=null?U:0,u=Ne(r,a==null?void 0:a.in),h=u.getDay(),m=(t%7+7)%7,p=7-o,y=t<0||t>6?t-(h+p)%7:(m+p)%7-(h+p)%7;return yo(u,y,a)}class x_ extends $e{constructor(){super(...arguments);ue(this,"priority",90);ue(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(a,n,o){switch(n){case"E":case"EE":case"EEE":return o.day(a,{width:"abbreviated",context:"formatting"})||o.day(a,{width:"short",context:"formatting"})||o.day(a,{width:"narrow",context:"formatting"});case"EEEEE":return o.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(a,{width:"short",context:"formatting"})||o.day(a,{width:"narrow",context:"formatting"});case"EEEE":default:return o.day(a,{width:"wide",context:"formatting"})||o.day(a,{width:"abbreviated",context:"formatting"})||o.day(a,{width:"short",context:"formatting"})||o.day(a,{width:"narrow",context:"formatting"})}}validate(a,n){return n>=0&&n<=6}set(a,n,o,u){return a=Nd(a,o,u),a.setHours(0,0,0,0),a}}class w_ extends $e{constructor(){super(...arguments);ue(this,"priority",90);ue(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(a,n,o,u){const h=g=>{const m=Math.floor((g-1)/7)*7;return(g+u.weekStartsOn+6)%7+m};switch(n){case"e":case"ee":return ft(ct(n.length,a),h);case"eo":return ft(o.ordinalNumber(a,{unit:"day"}),h);case"eee":return o.day(a,{width:"abbreviated",context:"formatting"})||o.day(a,{width:"short",context:"formatting"})||o.day(a,{width:"narrow",context:"formatting"});case"eeeee":return o.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return o.day(a,{width:"short",context:"formatting"})||o.day(a,{width:"narrow",context:"formatting"});case"eeee":default:return o.day(a,{width:"wide",context:"formatting"})||o.day(a,{width:"abbreviated",context:"formatting"})||o.day(a,{width:"short",context:"formatting"})||o.day(a,{width:"narrow",context:"formatting"})}}validate(a,n){return n>=0&&n<=6}set(a,n,o,u){return a=Nd(a,o,u),a.setHours(0,0,0,0),a}}class j_ extends $e{constructor(){super(...arguments);ue(this,"priority",90);ue(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(a,n,o,u){const h=g=>{const m=Math.floor((g-1)/7)*7;return(g+u.weekStartsOn+6)%7+m};switch(n){case"c":case"cc":return ft(ct(n.length,a),h);case"co":return ft(o.ordinalNumber(a,{unit:"day"}),h);case"ccc":return o.day(a,{width:"abbreviated",context:"standalone"})||o.day(a,{width:"short",context:"standalone"})||o.day(a,{width:"narrow",context:"standalone"});case"ccccc":return o.day(a,{width:"narrow",context:"standalone"});case"cccccc":return o.day(a,{width:"short",context:"standalone"})||o.day(a,{width:"narrow",context:"standalone"});case"cccc":default:return o.day(a,{width:"wide",context:"standalone"})||o.day(a,{width:"abbreviated",context:"standalone"})||o.day(a,{width:"short",context:"standalone"})||o.day(a,{width:"narrow",context:"standalone"})}}validate(a,n){return n>=0&&n<=6}set(a,n,o,u){return a=Nd(a,o,u),a.setHours(0,0,0,0),a}}function S_(r,t,a){const n=Ne(r,a==null?void 0:a.in),o=WS(n,a),u=t-o;return yo(n,u,a)}class __ extends $e{constructor(){super(...arguments);ue(this,"priority",90);ue(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(a,n,o){const u=h=>h===0?7:h;switch(n){case"i":case"ii":return ct(n.length,a);case"io":return o.ordinalNumber(a,{unit:"day"});case"iii":return ft(o.day(a,{width:"abbreviated",context:"formatting"})||o.day(a,{width:"short",context:"formatting"})||o.day(a,{width:"narrow",context:"formatting"}),u);case"iiiii":return ft(o.day(a,{width:"narrow",context:"formatting"}),u);case"iiiiii":return ft(o.day(a,{width:"short",context:"formatting"})||o.day(a,{width:"narrow",context:"formatting"}),u);case"iiii":default:return ft(o.day(a,{width:"wide",context:"formatting"})||o.day(a,{width:"abbreviated",context:"formatting"})||o.day(a,{width:"short",context:"formatting"})||o.day(a,{width:"narrow",context:"formatting"}),u)}}validate(a,n){return n>=1&&n<=7}set(a,n,o){return a=S_(a,o),a.setHours(0,0,0,0),a}}class N_ extends $e{constructor(){super(...arguments);ue(this,"priority",80);ue(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(a,n,o){switch(n){case"a":case"aa":case"aaa":return o.dayPeriod(a,{width:"abbreviated",context:"formatting"})||o.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaaa":return o.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return o.dayPeriod(a,{width:"wide",context:"formatting"})||o.dayPeriod(a,{width:"abbreviated",context:"formatting"})||o.dayPeriod(a,{width:"narrow",context:"formatting"})}}set(a,n,o){return a.setHours(_d(o),0,0,0),a}}class C_ extends $e{constructor(){super(...arguments);ue(this,"priority",80);ue(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(a,n,o){switch(n){case"b":case"bb":case"bbb":return o.dayPeriod(a,{width:"abbreviated",context:"formatting"})||o.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbbb":return o.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return o.dayPeriod(a,{width:"wide",context:"formatting"})||o.dayPeriod(a,{width:"abbreviated",context:"formatting"})||o.dayPeriod(a,{width:"narrow",context:"formatting"})}}set(a,n,o){return a.setHours(_d(o),0,0,0),a}}class E_ extends $e{constructor(){super(...arguments);ue(this,"priority",80);ue(this,"incompatibleTokens",["a","b","t","T"])}parse(a,n,o){switch(n){case"B":case"BB":case"BBB":return o.dayPeriod(a,{width:"abbreviated",context:"formatting"})||o.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBBB":return o.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return o.dayPeriod(a,{width:"wide",context:"formatting"})||o.dayPeriod(a,{width:"abbreviated",context:"formatting"})||o.dayPeriod(a,{width:"narrow",context:"formatting"})}}set(a,n,o){return a.setHours(_d(o),0,0,0),a}}class T_ extends $e{constructor(){super(...arguments);ue(this,"priority",70);ue(this,"incompatibleTokens",["H","K","k","t","T"])}parse(a,n,o){switch(n){case"h":return at(ht.hour12h,a);case"ho":return o.ordinalNumber(a,{unit:"hour"});default:return ct(n.length,a)}}validate(a,n){return n>=1&&n<=12}set(a,n,o){const u=a.getHours()>=12;return u&&o<12?a.setHours(o+12,0,0,0):!u&&o===12?a.setHours(0,0,0,0):a.setHours(o,0,0,0),a}}class D_ extends $e{constructor(){super(...arguments);ue(this,"priority",70);ue(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(a,n,o){switch(n){case"H":return at(ht.hour23h,a);case"Ho":return o.ordinalNumber(a,{unit:"hour"});default:return ct(n.length,a)}}validate(a,n){return n>=0&&n<=23}set(a,n,o){return a.setHours(o,0,0,0),a}}class O_ extends $e{constructor(){super(...arguments);ue(this,"priority",70);ue(this,"incompatibleTokens",["h","H","k","t","T"])}parse(a,n,o){switch(n){case"K":return at(ht.hour11h,a);case"Ko":return o.ordinalNumber(a,{unit:"hour"});default:return ct(n.length,a)}}validate(a,n){return n>=0&&n<=11}set(a,n,o){return a.getHours()>=12&&o<12?a.setHours(o+12,0,0,0):a.setHours(o,0,0,0),a}}class A_ extends $e{constructor(){super(...arguments);ue(this,"priority",70);ue(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(a,n,o){switch(n){case"k":return at(ht.hour24h,a);case"ko":return o.ordinalNumber(a,{unit:"hour"});default:return ct(n.length,a)}}validate(a,n){return n>=1&&n<=24}set(a,n,o){const u=o<=24?o%24:o;return a.setHours(u,0,0,0),a}}class k_ extends $e{constructor(){super(...arguments);ue(this,"priority",60);ue(this,"incompatibleTokens",["t","T"])}parse(a,n,o){switch(n){case"m":return at(ht.minute,a);case"mo":return o.ordinalNumber(a,{unit:"minute"});default:return ct(n.length,a)}}validate(a,n){return n>=0&&n<=59}set(a,n,o){return a.setMinutes(o,0,0),a}}class R_ extends $e{constructor(){super(...arguments);ue(this,"priority",50);ue(this,"incompatibleTokens",["t","T"])}parse(a,n,o){switch(n){case"s":return at(ht.second,a);case"so":return o.ordinalNumber(a,{unit:"second"});default:return ct(n.length,a)}}validate(a,n){return n>=0&&n<=59}set(a,n,o){return a.setSeconds(o,0),a}}class M_ extends $e{constructor(){super(...arguments);ue(this,"priority",30);ue(this,"incompatibleTokens",["t","T"])}parse(a,n){const o=u=>Math.trunc(u*Math.pow(10,-n.length+3));return ft(ct(n.length,a),o)}set(a,n,o){return a.setMilliseconds(o),a}}class U_ extends $e{constructor(){super(...arguments);ue(this,"priority",10);ue(this,"incompatibleTokens",["t","T","x"])}parse(a,n){switch(n){case"X":return Aa(Oa.basicOptionalMinutes,a);case"XX":return Aa(Oa.basic,a);case"XXXX":return Aa(Oa.basicOptionalSeconds,a);case"XXXXX":return Aa(Oa.extendedOptionalSeconds,a);case"XXX":default:return Aa(Oa.extended,a)}}set(a,n,o){return n.timestampIsSet?a:ot(a,a.getTime()-oo(a)-o)}}class q_ extends $e{constructor(){super(...arguments);ue(this,"priority",10);ue(this,"incompatibleTokens",["t","T","X"])}parse(a,n){switch(n){case"x":return Aa(Oa.basicOptionalMinutes,a);case"xx":return Aa(Oa.basic,a);case"xxxx":return Aa(Oa.basicOptionalSeconds,a);case"xxxxx":return Aa(Oa.extendedOptionalSeconds,a);case"xxx":default:return Aa(Oa.extended,a)}}set(a,n,o){return n.timestampIsSet?a:ot(a,a.getTime()-oo(a)-o)}}class L_ extends $e{constructor(){super(...arguments);ue(this,"priority",40);ue(this,"incompatibleTokens","*")}parse(a){return o0(a)}set(a,n,o){return[ot(a,o*1e3),{timestampIsSet:!0}]}}class $_ extends $e{constructor(){super(...arguments);ue(this,"priority",20);ue(this,"incompatibleTokens","*")}parse(a){return o0(a)}set(a,n,o){return[ot(a,o),{timestampIsSet:!0}]}}const z_={G:new s_,y:new r_,Y:new n_,R:new i_,u:new l_,Q:new o_,q:new c_,M:new u_,L:new d_,w:new f_,I:new g_,d:new v_,D:new b_,E:new x_,e:new w_,c:new j_,i:new __,a:new N_,b:new C_,B:new E_,h:new T_,H:new D_,K:new O_,k:new A_,m:new k_,s:new R_,S:new M_,X:new U_,x:new q_,t:new L_,T:new $_},B_=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,P_=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,I_=/^'([^]*?)'?$/,H_=/''/g,Y_=/\S/,V_=/[a-zA-Z]/;function Q_(r,t,a,n){var A,B,U,q,X,te,z,ie,C,_,R,F,K,le,he,ge,T,Q;const o=()=>ot((n==null?void 0:n.in)||a,NaN),u=XS(),h=(B=(A=n==null?void 0:n.locale)!=null?A:u.locale)!=null?B:t0,g=(_=(C=(te=(X=n==null?void 0:n.firstWeekContainsDate)!=null?X:(q=(U=n==null?void 0:n.locale)==null?void 0:U.options)==null?void 0:q.firstWeekContainsDate)!=null?te:u.firstWeekContainsDate)!=null?C:(ie=(z=u.locale)==null?void 0:z.options)==null?void 0:ie.firstWeekContainsDate)!=null?_:1,m=(Q=(T=(le=(K=n==null?void 0:n.weekStartsOn)!=null?K:(F=(R=n==null?void 0:n.locale)==null?void 0:R.options)==null?void 0:F.weekStartsOn)!=null?le:u.weekStartsOn)!=null?T:(ge=(he=u.locale)==null?void 0:he.options)==null?void 0:ge.weekStartsOn)!=null?Q:0;if(!t)return r?o():Ne(a,n==null?void 0:n.in);const p={firstWeekContainsDate:g,weekStartsOn:m,locale:h},y=[new a_(n==null?void 0:n.in,a)],x=t.match(P_).map(J=>{const D=J[0];if(D in ud){const G=ud[D];return G(J,h.formatLong)}return J}).join("").match(B_),b=[];for(let J of x){!(n!=null&&n.useAdditionalWeekYearTokens)&&i0(J)&&dd(J,t,r),!(n!=null&&n.useAdditionalDayOfYearTokens)&&n0(J)&&dd(J,t,r);const D=J[0],G=z_[D];if(G){const{incompatibleTokens:ae}=G;if(Array.isArray(ae)){const se=b.find(me=>ae.includes(me.token)||me.token===D);if(se)throw new RangeError(`The format string mustn't contain \`${se.fullToken}\` and \`${J}\` at the same time`)}else if(G.incompatibleTokens==="*"&&b.length>0)throw new RangeError(`The format string mustn't contain \`${J}\` and any other token at the same time`);b.push({token:D,fullToken:J});const ne=G.run(r,J,h.match,p);if(!ne)return o();y.push(ne.setter),r=ne.rest}else{if(D.match(V_))throw new RangeError("Format string contains an unescaped latin alphabet character `"+D+"`");if(J==="''"?J="'":D==="'"&&(J=G_(J)),r.indexOf(J)===0)r=r.slice(J.length);else return o()}}if(r.length>0&&Y_.test(r))return o();const j=y.map(J=>J.priority).sort((J,D)=>D-J).filter((J,D,G)=>G.indexOf(J)===D).map(J=>y.filter(D=>D.priority===J).sort((D,G)=>G.subPriority-D.subPriority)).map(J=>J[0]);let N=Ne(a,n==null?void 0:n.in);if(isNaN(+N))return o();const E={};for(const J of j){if(!J.validate(N,p))return o();const D=J.set(N,E,p);Array.isArray(D)?(N=D[0],Object.assign(E,D[1])):N=D}return N}function G_(r){return r.match(I_)[1].replace(H_,"'")}function F_(r,t){const a=Ne(r,t==null?void 0:t.in);return a.setMinutes(0,0,0),a}function K_(r,t){const a=Ne(r,t==null?void 0:t.in);return a.setSeconds(0,0),a}function X_(r,t){const a=Ne(r,t==null?void 0:t.in);return a.setMilliseconds(0),a}function W_(r,t){var p;const a=()=>ot(t==null?void 0:t.in,NaN),n=(p=t==null?void 0:t.additionalDigits)!=null?p:2,o=tN(r);let u;if(o.date){const y=aN(o.date,n);u=sN(y.restDateString,y.year)}if(!u||isNaN(+u))return a();const h=+u;let g=0,m;if(o.time&&(g=rN(o.time),isNaN(g)))return a();if(o.timezone){if(m=nN(o.timezone),isNaN(m))return a()}else{const y=new Date(h+g),x=Ne(0,t==null?void 0:t.in);return x.setFullYear(y.getUTCFullYear(),y.getUTCMonth(),y.getUTCDate()),x.setHours(y.getUTCHours(),y.getUTCMinutes(),y.getUTCSeconds(),y.getUTCMilliseconds()),x}return Ne(h+g+m,t==null?void 0:t.in)}const ao={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},J_=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Z_=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,eN=/^([+-])(\d{2})(?::?(\d{2}))?$/;function tN(r){const t={},a=r.split(ao.dateTimeDelimiter);let n;if(a.length>2)return t;if(/:/.test(a[0])?n=a[0]:(t.date=a[0],n=a[1],ao.timeZoneDelimiter.test(t.date)&&(t.date=r.split(ao.timeZoneDelimiter)[0],n=r.substr(t.date.length,r.length))),n){const o=ao.timezone.exec(n);o?(t.time=n.replace(o[1],""),t.timezone=o[1]):t.time=n}return t}function aN(r,t){const a=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=r.match(a);if(!n)return{year:NaN,restDateString:""};const o=n[1]?parseInt(n[1]):null,u=n[2]?parseInt(n[2]):null;return{year:u===null?o:u*100,restDateString:r.slice((n[1]||n[2]).length)}}function sN(r,t){if(t===null)return new Date(NaN);const a=r.match(J_);if(!a)return new Date(NaN);const n=!!a[4],o=fi(a[1]),u=fi(a[2])-1,h=fi(a[3]),g=fi(a[4]),m=fi(a[5])-1;if(n)return uN(t,g,m)?iN(t,g,m):new Date(NaN);{const p=new Date(0);return!oN(t,u,h)||!cN(t,o)?new Date(NaN):(p.setUTCFullYear(t,u,Math.max(o,h)),p)}}function fi(r){return r?parseInt(r):1}function rN(r){const t=r.match(Z_);if(!t)return NaN;const a=Fu(t[1]),n=Fu(t[2]),o=Fu(t[3]);return dN(a,n,o)?a*ki+n*Ai+o*1e3:NaN}function Fu(r){return r&&parseFloat(r.replace(",","."))||0}function nN(r){if(r==="Z")return 0;const t=r.match(eN);if(!t)return 0;const a=t[1]==="+"?-1:1,n=parseInt(t[2]),o=t[3]&&parseInt(t[3])||0;return hN(n,o)?a*(n*ki+o*Ai):NaN}function iN(r,t,a){const n=new Date(0);n.setUTCFullYear(r,0,4);const o=n.getUTCDay()||7,u=(t-1)*7+a+1-o;return n.setUTCDate(n.getUTCDate()+u),n}const lN=[31,null,31,30,31,30,31,31,30,31,30,31];function d0(r){return r%400===0||r%4===0&&r%100!==0}function oN(r,t,a){return t>=0&&t<=11&&a>=1&&a<=(lN[t]||(d0(r)?29:28))}function cN(r,t){return t>=1&&t<=(d0(r)?366:365)}function uN(r,t,a){return t>=1&&t<=53&&a>=0&&a<=6}function dN(r,t,a){return r===24?t===0&&a===0:a>=0&&a<60&&t>=0&&t<60&&r>=0&&r<25}function hN(r,t){return t>=0&&t<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const fN={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};Jv._date.override({_id:"date-fns",formats:function(){return fN},parse:function(r,t){if(r===null||typeof r=="undefined")return null;const a=typeof r;return a==="number"||r instanceof Date?r=Ne(r):a==="string"&&(typeof t=="string"?r=Q_(r,t,new Date,this.options):r=W_(r,this.options)),Kp(r)?r.getTime():null},format:function(r,t){return FS(r,t,this.options)},add:function(r,t,a){switch(a){case"millisecond":return wd(r,t);case"second":return Lj(r,t);case"minute":return Uj(r,t);case"hour":return kj(r,t);case"day":return yo(r,t);case"week":return $j(r,t);case"month":return xd(r,t);case"quarter":return qj(r,t);case"year":return zj(r,t);default:return r}},diff:function(r,t,a){switch(a){case"millisecond":return jd(r,t);case"second":return Gj(r,t);case"minute":return Yj(r,t);case"hour":return Hj(r,t);case"day":return Xp(r,t);case"week":return Fj(r,t);case"month":return Zp(r,t);case"quarter":return Qj(r,t);case"year":return Kj(r,t);default:return 0}},startOf:function(r,t,a){switch(t){case"second":return X_(r);case"minute":return K_(r);case"hour":return F_(r);case"day":return cd(r);case"week":return ka(r);case"isoWeek":return ka(r,{weekStartsOn:+a});case"month":return Wj(r);case"quarter":return Xj(r);case"year":return e0(r);default:return r}},endOf:function(r,t){switch(t){case"second":return sS(r);case"minute":return tS(r);case"hour":return Zj(r);case"day":return Wp(r);case"week":return eS(r);case"month":return Jp(r);case"quarter":return aS(r);case"year":return Jj(r);default:return r}}});new Ds;const mN=r=>ta({queryKey:["project-deliveries",r],queryFn:()=>S(null,null,function*(){const a=yield new Ds().getDeliveryDockets(r);console.log(" Raw deliveries data:",a);const n=a.map(m=>{const p=m["Ready at"];if(!p)return console.warn(" No Ready at date found for delivery:",m),null;try{const[y,x]=p.split(" "),b=y.split("/");let j,N,E;parseInt(b[0])>12?[j,N,E]=b:[N,j,E]=b;const A=`${E}-${N.padStart(2,"0")}-${j.padStart(2,"0")}T${x||"00:00:00"}`,B=new Date(A);return isNaN(B.getTime())?(console.warn(" Invalid date format:",p),null):et(Ue({},m),{parsedDate:B,dayKey:B.toISOString().split("T")[0]})}catch(y){return console.warn(" Error parsing date:",p,y),null}}).filter(Boolean);console.log(" Processed deliveries:",n);const o={};n.forEach(m=>{o[m.dayKey]=(o[m.dayKey]||0)+1});const u=Object.keys(o).sort();let h=0;const g=u.map(m=>(h+=o[m],h));return console.log(" Date counts:",o),console.log(" Sorted dates:",u),console.log(" Cumulative data:",g),{deliveries:n,dateCounts:o,sortedDates:u,dailyData:u.map(m=>o[m]),cumulativeData:g,totalDeliveries:n.length}}),enabled:!!r,staleTime:5*60*1e3});qa.register(nn,ln,hd,mp,on,cn,un,Zv,fd);const gN=({projectName:r})=>{const{data:t,isLoading:a,error:n}=mN(r),{data:o,isLoading:u}=qp(r);if(a||u)return l.jsx(Sa,{});if(n)return l.jsx("div",{className:"error-message",children:"Error loading delivery data"});if(!t||!o)return l.jsx("div",{className:"no-data",children:"No delivery data available"});const{sortedDates:h,dailyData:g,cumulativeData:m,totalDeliveries:p}=t,y=o["Deliveries Allowed"]?parseInt(o["Deliveries Allowed"].toString()):0,b=p>=Math.floor(y*.9)&&p<y,j=p>=y&&y>0,N={labels:h,datasets:[{label:"Trips per Day",data:g,borderColor:"#4caf50",backgroundColor:"rgba(76,175,80,0.2)",pointBackgroundColor:"#0af013",pointRadius:6,fill:!0,tension:.3},{label:"Cumulative Trips",data:m,borderColor:"#c1c536",backgroundColor:"rgba(193,197,54,0.2)",pointBackgroundColor:"#ffc107",pointRadius:6,fill:!0,tension:.3},{label:"Delivery Allowances",data:h.map(()=>y),borderColor:"#cb4335",borderWidth:4,borderDash:[5,5],pointRadius:0,fill:!1}]},E={responsive:!0,maintainAspectRatio:!1,animation:{duration:2e3,easing:"easeInOutQuad"},plugins:{title:{display:!0,text:"Daily and Cumulative Trips",font:{size:18,weight:"bold"}},tooltip:{mode:"index",intersect:!1},legend:{labels:{usePointStyle:!0,font:{size:14}}},datalabels:{display:!1}},interaction:{mode:"index",intersect:!1},scales:{x:{type:"time",time:{unit:"day"},title:{display:!0,text:"Date",font:{size:16,weight:"bold"}}},y:{beginAtZero:!0,title:{display:!0,text:"Number of Trips",font:{size:16,weight:"bold"}}}}};return l.jsxs("div",{className:"chart-container",children:[l.jsx("div",{className:"chart-info",children:l.jsxs("div",{className:"chart-stats trips-stats-row",children:[l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"emoji",children:""}),l.jsx("span",{className:"stat-label",children:"Delivery Allowances:"}),l.jsx("span",{className:"stat-value",children:y})]}),l.jsxs("div",{className:`stat-item trips-made-stat${j?" danger":b?" warning":""}`,children:[l.jsx("span",{className:"emoji",children:""}),l.jsx("span",{className:"stat-label",children:"Trips Made:"}),l.jsx("span",{className:"stat-value",children:p}),j&&l.jsx("span",{className:"stat-alert",title:"Exceeded delivery allowance",children:""}),b&&!j&&l.jsx("span",{className:"stat-alert",title:"Close to delivery allowance",children:""})]})]})}),l.jsx("div",{className:"chart-wrapper",children:l.jsx(eb,{data:N,options:E})})]})},pN=({onMetricsUpdate:r,showDetails:t=!1})=>{const[a,n]=k.useState({loadTime:0,renderTime:0,memoryUsage:0,domSize:0,jsHeapSize:0,timestamp:Date.now()}),[o,u]=k.useState(!1),[h,g]=k.useState(t),m=k.useCallback(()=>{if(performance&&performance.getEntriesByType){const A=performance.getEntriesByType("navigation")[0];if(A)return A.loadEventEnd-A.fetchStart}return performance.now()},[]),p=k.useCallback(()=>{if("memory"in performance){const A=performance.memory;return{used:Math.round(A.usedJSHeapSize/1024/1024),total:Math.round(A.totalJSHeapSize/1024/1024),limit:Math.round(A.jsHeapSizeLimit/1024/1024)}}return{used:0,total:0,limit:0}},[]),y=k.useCallback(()=>document.querySelectorAll("*").length,[]),x=k.useCallback(()=>new Promise(A=>{const B=performance.now();requestAnimationFrame(()=>{requestAnimationFrame(()=>{const U=performance.now();A(U-B)})})}),[]),b=k.useCallback(()=>S(null,null,function*(){u(!0);try{const A=m(),B=yield x(),U=p(),q=y(),X={loadTime:Math.round(A),renderTime:Math.round(B),memoryUsage:U.used,domSize:q,jsHeapSize:U.total,timestamp:Date.now()};n(X),r&&r(X)}catch(A){console.error("Error measuring performance:",A)}finally{u(!1)}}),[m,x,p,y,r]);k.useEffect(()=>{const A=setInterval(()=>{o||b()},3e4);return()=>clearInterval(A)},[b,o]),k.useEffect(()=>{const A=setTimeout(()=>{b()},1e3);return()=>clearTimeout(A)},[b]);const j=(A,B)=>A<=B.good?"good":A<=B.warning?"warning":"poor",N=A=>{switch(A){case"good":return"";case"warning":return"";case"poor":return"";default:return""}},E=A=>{switch(A){case"good":return"performance-good";case"warning":return"performance-warning";case"poor":return"performance-poor";default:return"performance-unknown"}};return l.jsxs("div",{className:"performance-monitor",children:[l.jsxs("div",{className:"monitor-header",children:[l.jsx("h3",{children:" Performance Monitor"}),l.jsxs("div",{className:"monitor-controls",children:[l.jsx("button",{onClick:b,disabled:o,className:"monitor-btn",children:o?" Monitoring...":" Measure Performance"}),l.jsx("button",{onClick:()=>g(!h),className:"toggle-details-btn",children:h?" Hide Details":" Show Details"})]})]}),l.jsxs("div",{className:"performance-metrics",children:[l.jsxs("div",{className:"metric-grid",children:[l.jsxs("div",{className:`metric-item ${E(j(a.loadTime,{good:2e3,warning:5e3}))}`,children:[l.jsx("div",{className:"metric-icon",children:N(j(a.loadTime,{good:2e3,warning:5e3}))}),l.jsxs("div",{className:"metric-content",children:[l.jsx("div",{className:"metric-label",children:"Load Time"}),l.jsxs("div",{className:"metric-value",children:[a.loadTime,"ms"]})]})]}),l.jsxs("div",{className:`metric-item ${E(j(a.renderTime,{good:16,warning:33}))}`,children:[l.jsx("div",{className:"metric-icon",children:N(j(a.renderTime,{good:16,warning:33}))}),l.jsxs("div",{className:"metric-content",children:[l.jsx("div",{className:"metric-label",children:"Render Time"}),l.jsxs("div",{className:"metric-value",children:[a.renderTime,"ms"]})]})]}),l.jsxs("div",{className:`metric-item ${E(j(a.memoryUsage,{good:50,warning:100}))}`,children:[l.jsx("div",{className:"metric-icon",children:N(j(a.memoryUsage,{good:50,warning:100}))}),l.jsxs("div",{className:"metric-content",children:[l.jsx("div",{className:"metric-label",children:"Memory Usage"}),l.jsxs("div",{className:"metric-value",children:[a.memoryUsage,"MB"]})]})]}),l.jsxs("div",{className:`metric-item ${E(j(a.domSize,{good:1e3,warning:3e3}))}`,children:[l.jsx("div",{className:"metric-icon",children:N(j(a.domSize,{good:1e3,warning:3e3}))}),l.jsxs("div",{className:"metric-content",children:[l.jsx("div",{className:"metric-label",children:"DOM Elements"}),l.jsx("div",{className:"metric-value",children:a.domSize})]})]}),l.jsxs("div",{className:`metric-item ${E(j(a.jsHeapSize,{good:100,warning:200}))}`,children:[l.jsx("div",{className:"metric-icon",children:N(j(a.jsHeapSize,{good:100,warning:200}))}),l.jsxs("div",{className:"metric-content",children:[l.jsx("div",{className:"metric-label",children:"JS Heap Size"}),l.jsxs("div",{className:"metric-value",children:[a.jsHeapSize,"MB"]})]})]})]}),h&&l.jsxs("div",{className:"performance-details",children:[l.jsx("h4",{children:"Performance Recommendations"}),l.jsxs("div",{className:"recommendations",children:[a.loadTime>5e3&&l.jsxs("div",{className:"recommendation warning",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"High load time. Consider optimizing bundle size or implementing lazy loading."})]}),a.renderTime>33&&l.jsxs("div",{className:"recommendation warning",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"High render time. Review heavy components or implement React.memo."})]}),a.memoryUsage>100&&l.jsxs("div",{className:"recommendation warning",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"High memory usage. Check for memory leaks or optimize state management."})]}),a.domSize>3e3&&l.jsxs("div",{className:"recommendation warning",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Large DOM tree. Consider virtualizing lists or reducing component complexity."})]}),a.jsHeapSize>200&&l.jsxs("div",{className:"recommendation warning",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Large JS heap. Review object allocations and garbage collection."})]}),a.loadTime<=2e3&&a.renderTime<=16&&a.memoryUsage<=50&&l.jsxs("div",{className:"recommendation good",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Excellent performance! The application is running optimally."})]})]}),l.jsxs("div",{className:"performance-info",children:[l.jsx("h5",{children:"Measurement Details"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Load Time:"})," Time from fetch start to load event end"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Render Time:"})," Time for two animation frames (real render measurement)"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Memory Usage:"})," Current JavaScript heap usage"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"DOM Elements:"})," Total number of DOM nodes"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"JS Heap Size:"})," Total allocated JavaScript heap"]})]}),l.jsx("p",{children:l.jsxs("em",{children:["Last updated: ",new Date(a.timestamp).toLocaleTimeString()]})})]})]})]})]})},yN=({allowances:r,isLoading:t=!1})=>{if(t)return l.jsxs("div",{className:"allowances-container",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Loading allowances..."})]});if(!r||r.length===0)return l.jsxs("div",{className:"allowances-container",children:[l.jsx("h2",{id:"project-allowances-section",children:"Project Allowances"}),l.jsx("div",{className:"no-allowances",children:l.jsx("p",{children:"No personnel allowances registered for this project."})})]});const a=r.reduce((m,p)=>{const y=p.Type||"Other",x=p.Category||"General";return m[y]||(m[y]={}),m[y][x]||(m[y][x]=[]),m[y][x].push(p),m},{}),n=(m,p)=>{if(p)switch(p.toLowerCase()){case"drafting":return"";case"tradesman":return"";case"labourers":return"";case"pms":return"";case"vertical access":return""}switch(m.toLowerCase()){case"drafting":return"";case"factory":return"";case"site":return"";case"tradesman":return"";case"labourer":return"";case"pm":return"";case"vertical access":return"";default:return""}},o=(m,p)=>{switch(m.toLowerCase()){case"site":switch(p.toLowerCase()){case"tradesman":return"Tradesman Allowances (days)";case"labourers":return"Labourers Allowances (days)";case"pms":return"PMs Allowances (days)";default:return`${p} Allowances (days)`}case"factory":switch(p.toLowerCase()){case"drafting":return"Drafting Allowances (days)";case"labourers":return"Labourers Allowances (days)";default:return`${p} Allowances (days)`}default:return`${p} Allowances (days)`}},u=m=>m<50?"#4caf50":m<99?"#c1c536":"#cb4335",h=(m,p)=>{if(!p||p===0)return"";const y=m/p*100;return y>=100?"danger":y>=90?"warning":""},g=(m,p)=>!p||p===0?0:m/p*100;return l.jsxs("div",{className:"allowances-container",children:[l.jsx("h2",{id:"project-allowances-section",children:"Project Allowances"}),Object.entries(a).map(([m,p])=>l.jsxs("div",{children:[l.jsxs("h3",{children:[m," Allowances"]}),Object.entries(p).map(([y,x])=>l.jsxs("div",{children:[l.jsx("h4",{children:y}),x.map((b,j)=>{const N=g(Number(b["Days Used"]),Number(b["Days Allowed"])),E=h(Number(b["Days Used"]),Number(b["Days Allowed"]));return l.jsxs("div",{className:`allowance-card ${E}`,children:[l.jsxs("p",{children:[l.jsx("span",{className:"emoji",children:n(m,y)}),l.jsxs("strong",{children:[o(m,y),":     "]}),l.jsx("i",{children:b["Days Allowed"]||"0"})]}),l.jsxs("p",{children:[l.jsx("span",{className:"emoji",children:""}),l.jsx("strong",{children:"Current days used:     "}),l.jsx("i",{children:b["Days Used"]||"0.00"})]}),l.jsx("div",{className:"progress-container",children:l.jsxs("div",{className:"progress-bar",style:{"--progress-width":`${N}%`,"--progress-color":u(N),"--progress-color-light":u(N)==="#4caf50"?"#66bb6a":u(N)==="#c1c536"?"#d4e157":"#ef5350"},children:[N.toFixed(2),"%"]})})]},j)})]},y))]},m))]})};function vN(r,t){const a=`https://www.appsheet.com/start/${r}`,n={EvalType:"BOOLEAN",OperatorName:"Equals",IsAtomic:!0,IsSargable:!0,SourceExpr:`[${t.filterField}] :: ${t.filterValue}`,Children:[{EvalType:"COLUMN",ColIndex:2,ColName:t.filterField,ContextLevel:0,SourceExpr:`[${t.filterField}]`,Children:[],ColumnsReferenced:[2],AncColumnsReferenced:[],TablesReferenced:[],ResultType:"Ref",ResultTypeQualifier:{ReferencedTableName:t.tableName,ReferencedRootTableName:t.tableName,ReferencedType:"Name",ReferencedKeyColumn:"Name",IsAPartOf:!1,RelationshipName:null,InputMode:"Auto"},IsPure:!0,MayBeExpensive:!1,EagerEvalChildren:!0},{EvalType:"CONSTANT",ConstantValue:t.filterValue,SourceExpr:t.filterValue,Children:[],ColumnsReferenced:[],AncColumnsReferenced:[],TablesReferenced:[],ResultType:"Ref",ResultTypeQualifier:{ReferencedTableName:t.tableName,ReferencedRootTableName:t.tableName,ReferencedType:"Name",ReferencedKeyColumn:"Name",IsAPartOf:!1,RelationshipName:null,InputMode:"Auto"},IsPure:!0,MayBeExpensive:!1,EagerEvalChildren:!0}],ColumnsReferenced:[2],AncColumnsReferenced:[],TablesReferenced:[],ResultType:"Yes/No",ResultTypeQualifier:{YesLabel:"",NoLabel:""},IsPure:!0,MayBeExpensive:!1,EagerEvalChildren:!0},o=encodeURIComponent(JSON.stringify(n));return`${a}#control=${encodeURIComponent(t.tableName)}&filter=${o}`}function bN(r){return vN("efcdb2a0-181f-4e43-bc65-6887dc279032",{tableName:"Delivery Dockets",filterField:"Project",filterValue:r})}const xN=()=>{var ie;const[r,t]=k.useState(""),[a,n]=k.useState({sheets:!0,trips:!1}),[o,u]=k.useState(!1),[h,g]=k.useState(!1),{projectParam:m}=Lp(),p=k.useRef(!1);Oi("CC Project Dashboard"),bd();const{data:y,error:x}=qp(r),{data:b,isLoading:j}=tj(r),{data:N,isLoading:E}=Zw(r),{data:A,isLoading:B}=ej(r),U=x;k.useEffect(()=>{m&&!p.current&&(t(m),p.current=!0)},[m]);const q=C=>{t(C.Name)},X=C=>{n(_=>et(Ue({},_),{[C]:!_[C]}))},te=C=>C<50?"#4caf50":C<99?"#c1c536":"#cb4335",z=(C,_)=>{if(!C||!_)return"";const R=Number(C),F=Number(_),K=R/F*100;return K>=100?"danger":K>=90?"warning":""};return U?l.jsxs("div",{className:"container",children:[l.jsx("h1",{children:"Error"}),l.jsxs("p",{children:["Error loading project data: ",x==null?void 0:x.message]}),l.jsx("button",{onClick:()=>window.location.reload(),children:"Retry"})]}):l.jsxs("div",{className:"container accordion",id:"accordion",children:[l.jsx("h1",{children:"PROJECTS SUMMARY"}),l.jsx(sj,{onProjectSelect:q}),y?l.jsxs("div",{className:"project-info",children:[l.jsxs("div",{className:"project-header",children:[l.jsx("h2",{className:"project-title",children:y.Name||"N/A"}),l.jsx("span",{className:`status-badge ${((ie=y.Status)==null?void 0:ie.toLowerCase())||"unknown"}`,children:y.Status||"N/A"})]}),l.jsxs("div",{className:"project-details-grid",children:[l.jsxs("div",{className:"detail-section",children:[l.jsx("h3",{children:" Project Details"}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Project Number:"}),l.jsx("span",{className:"detail-value",children:y.Number||""})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"CC/Subcontractor:"}),l.jsx("span",{className:"detail-value",children:y["CC/Subcontractor"]||""})]})]}),l.jsxs("div",{className:"detail-section",children:[l.jsx("h3",{children:" Timeline"}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Start Date:"}),l.jsx("span",{className:"detail-value",children:Vu(y["Start Date"])})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Expected Completion:"}),l.jsx("span",{className:"detail-value",children:Vu(y["Expected Completion Date"])})]}),y["Finalization Date"]&&l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Finalization Date:"}),l.jsx("span",{className:"detail-value",children:Vu(y["Finalization Date"])})]})]}),l.jsxs("div",{className:"detail-section",children:[l.jsx("h3",{children:" Team"}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Project Manager:"}),l.jsx("span",{className:"detail-value",children:y.PM||"N/A"})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Site Supervisor:"}),l.jsx("span",{className:"detail-value",children:y["Site Supervisor"]||"N/A"})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"EBA/Non-EBA:"}),l.jsx("span",{className:"detail-value",children:y["EBA/Non-EBA"]||"N/A"})]})]}),y.Contact&&l.jsxs("div",{className:"detail-section contact-section",children:[l.jsx("h3",{children:" Contact Information"}),l.jsx("div",{className:"contact-toggle",children:l.jsx("button",{className:"contact-toggle-btn",onClick:()=>g(!h),children:h?" Hide Contact":" Show Contact"})}),h&&l.jsx("div",{className:"contact-content",children:l.jsx("pre",{className:"contact-text",children:y.Contact})})]})]}),l.jsx("div",{className:"project-footer",children:l.jsxs("span",{className:"last-updated",children:["Last updated: ",new Date().toLocaleString()]})})]}):r?l.jsx("div",{className:"project-info loading",children:l.jsxs("div",{className:"loading-placeholder",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"Loading project data..."})]})}):l.jsx("div",{className:"project-info empty",children:l.jsxs("div",{className:"empty-state",children:[l.jsx("span",{className:"empty-icon",children:""}),l.jsx("h3",{children:"Select a Project"}),l.jsx("p",{children:"Choose a project from the dropdown above to view its details and statistics."})]})}),l.jsx("h2",{id:"cutting-information",children:"Cutting Information"}),y?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"cutting-info-grid",children:[l.jsxs("div",{className:"cutting-item",children:[l.jsx("span",{className:"cutting-icon",children:""}),l.jsx("span",{className:"cutting-label",children:"Expected Square Meters:"}),l.jsx("span",{className:"cutting-value",children:y["Expected Square Meters"]||"0"})]}),l.jsxs("div",{className:`cutting-item ${z(String(y["Real Cut Square Meters"]||""),String(y["Expected Square Meters"]||""))}`,children:[l.jsx("span",{className:"cutting-icon",children:""}),l.jsx("span",{className:"cutting-label",children:"Real Cut Square Meters:"}),l.jsx("span",{className:"cutting-value",children:y["Real Cut Square Meters"]||"0.00"})]}),y["Allowed SQM to buy"]&&l.jsxs("div",{className:"cutting-item",children:[l.jsx("span",{className:"cutting-icon",children:""}),l.jsx("span",{className:"cutting-label",children:"Allowed SQM to Buy:"}),l.jsx("span",{className:"cutting-value",children:y["Allowed SQM to buy"]})]})]}),l.jsx("p",{className:"cutting-note",children:l.jsx("em",{children:'Note: The value of "Real Cut Square Meters" includes all square meters in the system, including panels that have not yet been cut or orders that are in "Ready to Cut" status.'})}),l.jsx("div",{className:"progress-container",children:l.jsx("div",{className:"progress-bar",style:{"--progress-width":`${y["Real Cut Square Meters"]&&y["Expected Square Meters"]?Number(y["Real Cut Square Meters"])/Number(y["Expected Square Meters"])*100:0}%`,backgroundColor:te(y["Real Cut Square Meters"]&&y["Expected Square Meters"]?Number(y["Real Cut Square Meters"])/Number(y["Expected Square Meters"])*100:0)},children:y["Real Cut Square Meters"]&&y["Expected Square Meters"]?`${(Number(y["Real Cut Square Meters"])/Number(y["Expected Square Meters"])*100).toFixed(2)}%`:"0%"})})]}):l.jsx("div",{className:"cutting-info-placeholder",children:l.jsxs("div",{className:"placeholder-content",children:[l.jsx("span",{className:"placeholder-icon",children:""}),l.jsx("p",{children:"Cutting information will appear here when a project is selected."})]})}),l.jsx(Yu,{isLoading:B,sectionName:"Sheets Overview",children:l.jsxs("div",{className:`accordion-item ${a.sheets?"active":""}`,children:[l.jsx("div",{className:"accordion-header",id:"sheets",onClick:()=>X("sheets"),children:l.jsxs("h2",{children:[l.jsx("span",{className:"accordion-indicator",children:""}),"Sheets Overview",l.jsx("span",{className:"accordion-indicator",children:" "})]})}),l.jsx("div",{className:"accordion-body",children:l.jsx(Dj,{sheets:A||[],isLoading:B})})]})}),l.jsx(Yu,{isLoading:j,sectionName:"Project Allowances",children:l.jsx(yN,{allowances:b||[],isLoading:j})}),l.jsx(Yu,{isLoading:E,sectionName:"Material Tables",children:l.jsx(ij,{materials:N||{summary:[],details:[]},isLoading:E})}),l.jsx("h2",{id:"trips-over-time",children:"Trips Over Time"}),l.jsxs("p",{children:[l.jsx("em",{children:'These data are collected from the "Delivery Dockets" performed by the manufacturing team. You can view the detailed records by '}),l.jsx("a",{href:r?bN(r):"#",target:"_blank",children:"clicking here"}),"."]}),l.jsxs("div",{className:"chart-container",children:[l.jsx("h3",{children:"Daily and Cumulative Trips"}),l.jsx("p",{id:"deliveryDates",style:{display:"none"}}),l.jsx(gN,{projectName:r})]}),o&&l.jsxs(l.Fragment,{children:[l.jsx(pN,{onMetricsUpdate:C=>{console.log("Performance metrics:",C)},showDetails:!0}),l.jsx("div",{className:"debug-info",children:l.jsxs("span",{className:"last-update",children:["Last updated: ",new Date().toLocaleString()]})})]}),l.jsx("div",{style:{marginTop:"20px",textAlign:"center"},children:l.jsx("button",{onClick:()=>u(!o),style:{background:"transparent",border:"1px solid #ccc",padding:"5px 10px",fontSize:"12px",color:"#666"},children:o?" Hide Debug Tools":" Show Debug Tools"})})]})},h0=r=>window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?`/${r}`:`/CC_Flow_summary_report/${r}`,Cd=()=>h0("CC-logo-NEW_1.webp"),uo=()=>h0("favicon.png"),wN=()=>{const[r]=sb(),[t,a]=k.useState(""),[n,o]=k.useState(!1),[u,h]=k.useState(""),[g,m]=k.useState(""),[p,y]=k.useState(null),[x,b]=k.useState(null),[j,N]=k.useState(!1),[E,A]=k.useState(12),B=new Ds;Oi("CC Delivery"),k.useEffect(()=>{const te=()=>{window.innerWidth<=480||window.innerWidth<=768,A(12)};return te(),window.addEventListener("resize",te),()=>window.removeEventListener("resize",te)},[]);const U=te=>/^[A-Z]{2,3}-\d+$/.test(te);k.useEffect(()=>{const te=r.get("Order_ID")||r.get("order_ID");te&&(a(te),b(U(te)),h(""),m(""),y(null))},[r]),k.useEffect(()=>{b(t?U(t):null)},[t]);const q=te=>S(null,null,function*(){if(te.preventDefault(),!t.trim()){h("Please enter a valid Order ID"),m("error");return}if(!x){h("Order ID format must be XX-00 (e.g., FL-1, AB-123)"),m("error");return}o(!0),h(""),m(""),y(null);try{const z=yield B.markOrderAsDelivered(t.trim());z&&z.length>0?(y(z[0]),h(""),m("success"),a("")):(h("Error marking order as delivered"),m("error"))}catch(z){console.error("Error marking order as delivered:",z),h("Error processing request. Please try again."),m("error")}finally{o(!1)}}),X=te=>{const z=te.target.value.toUpperCase();a(z),u&&(h(""),m("")),p&&y(null)};return l.jsx("div",{className:"order-delivery-container",children:l.jsxs("div",{className:"order-delivery-card",children:[l.jsx("div",{className:"watermark-pattern",children:l.jsx("div",{className:"watermark-grid",children:Array.from({length:E},(te,z)=>l.jsx("img",{src:Cd(),alt:"CC Logo Watermark",className:"watermark",style:{"--i":z}},z))})}),l.jsxs("div",{className:"order-delivery-header",children:[l.jsx("h1",{children:"Mark Order as Delivered"}),l.jsx("p",{children:"Enter the Order ID to mark it as delivered"})]}),l.jsxs("form",{onSubmit:q,className:"order-delivery-form",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"orderId",children:"Order ID:"}),l.jsxs("div",{className:"input-container",children:[l.jsx("input",{type:"text",id:"orderId",value:t,onChange:X,placeholder:"Enter Order ID (e.g., FL-1)",className:`form-input ${x===!1?"invalid":x===!0?"valid":""}`,disabled:n,required:!0,"aria-describedby":"orderId-help",style:{textTransform:"uppercase"},onKeyDown:te=>{if(te.key==="Enter"&&!n&&x){te.preventDefault();const z=te.currentTarget.form;if(z){const ie=new Event("submit",{bubbles:!0,cancelable:!0});z.dispatchEvent(ie)}}}}),x===!0&&l.jsx("span",{className:"validation-icon valid",children:""}),x===!1&&l.jsx("span",{className:"validation-icon invalid",children:""})]}),l.jsx("div",{id:"orderId-help",className:"help-text",children:"Format: XX-00 (e.g., FL-1, AB-123)"})]}),l.jsx("button",{type:"submit",className:`submit-button ${n?"loading":""}`,disabled:n||x===!1,"aria-label":"Mark order as delivered",children:n?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"spinner"}),"Processing..."]}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:uo(),alt:"CC Favicon",className:"button-favicon"}),"Mark as Delivered",l.jsx("img",{src:uo(),alt:"CC Favicon",className:"button-favicon"})]})})]}),u&&!p&&l.jsx("div",{className:`message ${g}`,role:"alert",children:u}),p&&g==="success"&&l.jsxs("div",{className:"order-details-card",children:[l.jsxs("div",{className:"order-details-header",children:[l.jsx("span",{className:"success-icon",children:""}),l.jsx("h3",{children:"Order Successfully Delivered"})]}),l.jsxs("div",{className:"order-details-content",children:[l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:"Order ID:"}),l.jsx("span",{className:"detail-value",children:p["Order ID"]})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:"Project:"}),l.jsx("span",{className:"detail-value",children:p.Project})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:"Responsible:"}),l.jsx("span",{className:"detail-value",children:p.Responsable})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:"Color:"}),l.jsx("span",{className:"detail-value",children:p.Colour})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:"Square Meters:"}),l.jsxs("span",{className:"detail-value",children:[p["Meters Square"]," m"]})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{className:"detail-label",children:"Delivery Date:"}),l.jsx("span",{className:"detail-value",children:new Date().toLocaleDateString()})]})]})]}),l.jsxs("div",{className:"order-delivery-info",children:[l.jsxs("button",{className:"info-toggle-button",onClick:()=>N(!j),"aria-expanded":j,"aria-controls":"info-content",children:[l.jsxs("div",{className:"info-toggle-left",children:[l.jsx("div",{className:"info-icon",children:""}),l.jsx("span",{className:"info-toggle-text",children:"Help & Information"})]}),l.jsx("span",{className:`info-toggle-icon ${j?"open":""}`,children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:l.jsx("path",{d:"M6 9L12 15L18 9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),l.jsx("div",{id:"info-content",className:`info-content ${j?"show":""}`,"aria-hidden":!j,children:l.jsxs("div",{className:"info-content-inner",children:[l.jsxs("div",{className:"info-section",children:[l.jsx("h4",{className:"info-section-title",children:"How to use"}),l.jsxs("ul",{className:"info-list",children:[l.jsx("li",{children:"Enter the Order ID in the field above"}),l.jsx("li",{children:"Format must be XX-00 (e.g., FL-1, AB-123)"}),l.jsx("li",{children:'Click "Mark as Delivered" to confirm'})]})]}),l.jsxs("div",{className:"info-section",children:[l.jsx("h4",{className:"info-section-title",children:"Important notes"}),l.jsxs("ul",{className:"info-list",children:[l.jsx("li",{children:"Once confirmed, the order cannot be undone"}),l.jsx("li",{children:"Delivery date will be automatically recorded"})]})]})]})})]})]})})},an=({children:r,className:t="",delay:a=0,duration:n=300,direction:o="fade",stagger:u=0,index:h=0})=>{const g=()=>`transition-all ease-out ${{up:"opacity-0 animate-slide-up",down:"opacity-0 animate-slide-down",left:"opacity-0 animate-slide-left",right:"opacity-0 animate-slide-right",fade:"opacity-0 animate-fade-in",scale:"opacity-0 animate-scale-in"}[o]}`,m=()=>({animationDelay:`${a+u*h}ms`,animationDuration:`${n}ms`,animationFillMode:"forwards"});return l.jsx("div",{className:`${g()} ${t}`,style:et(Ue({},m()),{contain:"layout style paint"}),children:r})},jN=({size:r="md",color:t="blue",text:a})=>{const n={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"},o={blue:"text-blue-600",gray:"text-gray-600",green:"text-green-600",red:"text-red-600"};return l.jsxs("div",{className:"flex flex-col items-center justify-center space-y-3",children:[l.jsx("div",{className:`${n[r]} ${o[t]} animate-spin`,children:l.jsxs("svg",{className:"w-full h-full",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),a&&l.jsx("p",{className:`text-sm ${o[t]} animate-pulse`,children:a})]})},f0=({children:r,className:t="",scale:a=!0,glow:n=!1,color:o="blue"})=>{const u=a?"hover:scale-105":"",h=n?`hover:shadow-lg hover:shadow-${o}-200`:"hover:shadow-md";return l.jsx("div",{className:`transition-all duration-200 ease-in-out ${u} ${h} ${t}`,children:r})},SN=({children:r,className:t=""})=>l.jsx("div",{className:`animate-page-enter ${t}`,children:r}),_N=[{id:"analytics",label:"Analytics",icon:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})},{id:"cut-process",label:"Cut Process",icon:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.121 14.121L19 19m-7-7l7-7m-7 7l-2.879 2.879M12 12L9.121 9.121m0 5.758a3 3 0 10-4.243-4.243 3 3 0 004.243 4.243zm5.758-9.758a3 3 0 10-4.243-4.243 3 3 0 004.243 4.243z"})})},{id:"manufacturing",label:"Manufacturing",icon:l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2zm5-18v2M7 7h2v5a1 1 0 01-1 1H7V7z"})})}],NN=({currentView:r,onViewChange:t,isOpen:a,onToggle:n,showHintAnimation:o=!1})=>l.jsxs(l.Fragment,{children:[a&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:n}),l.jsx("div",{className:`
        fixed inset-y-0 left-0 z-50 bg-white shadow-lg transform transition-all duration-300 ease-in-out
        ${a?"w-64":"w-16"}
        md:relative md:z-50
      `,children:l.jsxs("div",{className:"flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-400",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:l.jsx("img",{src:uo(),alt:"CC Logo",className:"w-8 h-8"})}),a&&l.jsx("span",{className:"text-xl font-bold text-gray-900 whitespace-nowrap",children:"Cladding Creations"})]}),l.jsx("button",{onClick:n,className:`p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200 ${o?"animate-sidebar-hint animate-sidebar-wiggle animate-sidebar-glow":""}`,title:a?"Collapse sidebar":"Expand sidebar",children:l.jsx("svg",{className:`w-5 h-5 text-white transition-transform duration-200 ${a?"rotate-180":"rotate-0"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),l.jsx("nav",{className:"flex-1 p-4 space-y-2",children:_N.map((u,h)=>l.jsx(an,{direction:"left",delay:h*100,className:"w-full",children:l.jsx(f0,{scale:!0,glow:!0,color:"blue",children:l.jsxs("button",{onClick:()=>t(u.id),className:`
                      w-full flex items-center rounded-sm text-left transition-all duration-200 group micro-bounce relative z-10
                      ${a?"px-4 py-3 space-x-3":"px-3 py-3 justify-center"}
                      ${r===u.id?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"}
                    `,title:a?void 0:u.label,children:[l.jsx("div",{className:"flex-shrink-0",children:u.icon}),a&&l.jsx("span",{className:"font-medium whitespace-nowrap",children:u.label})]})})},u.id))}),l.jsx("div",{className:"p-8 border-t border-gray-600",children:l.jsx("div",{className:`flex items-center text-sm text-gray-600 ${a?"space-x-3":"justify-center"}`,children:a&&l.jsx("img",{src:Cd(),alt:"CC Logo",className:"w-4/5"})})})]})})]}),CN=({dateRange:r,onDateRangeChange:t,onQuickRangeChange:a})=>{const[n,o]=k.useState("30d"),[u,h]=k.useState({start:r.startDate,end:r.endDate});k.useEffect(()=>{h({start:r.startDate,end:r.endDate})},[r]);const g=[{value:"today",label:"Today"},{value:"thisWeek",label:"This week"},{value:"7d",label:"Last 7 days"},{value:"30d",label:"Last 30 days"},{value:"90d",label:"Last 90 days"},{value:"1y",label:"Last year"},{value:"custom",label:"Custom range"}],m=b=>{o(b),b!=="custom"&&a(b)},p=(b,j)=>{const N=et(Ue({},u),{[b]:j});h(N),n==="custom"&&t({startDate:N.start,endDate:N.end})},x=((b,j)=>{const N=new Date(b+"T00:00:00"),E=new Date(j+"T00:00:00"),A=Math.ceil((E.getTime()-N.getTime())/(1e3*60*60*24))+1,B=N.getFullYear(),U=E.getFullYear(),q=B!==U,X=N.toLocaleDateString("en-AU",{day:"numeric",month:"short",year:q?"numeric":void 0}),te=E.toLocaleDateString("en-AU",{day:"numeric",month:"short",year:"numeric"});return{formatted:`${X} - ${te}`,days:A}})(r.startDate,r.endDate);return l.jsxs("div",{className:"relative",children:[l.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[l.jsxs("div",{className:"flex items-center space-x-2 bg-gradient-to-r from-purple-500 to-indigo-600 text-white px-4 py-2 rounded-lg shadow-lg",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),l.jsx("span",{className:"font-bold text-sm",children:"DATE RANGE CONTROL"})]}),l.jsx("div",{className:"h-px bg-gradient-to-r from-purple-300 to-transparent flex-1"})]}),l.jsxs("div",{className:"flex items-center space-x-6",children:[l.jsxs("div",{className:"flex items-center space-x-4 bg-gradient-to-r from-emerald-50 via-green-50 to-teal-50 border-3 border-emerald-300 rounded-2xl px-6 py-4 shadow-xl",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-emerald-500 rounded-full shadow-lg",children:l.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),l.jsx("span",{className:"text-sm font-bold text-emerald-800 uppercase tracking-wide",children:"Active Range:"})]}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"text-lg text-emerald-900 font-bold bg-white px-4 py-2 rounded-lg shadow-md border-2 border-emerald-200",children:x.formatted}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("div",{className:"w-2 h-2 bg-emerald-400 rounded-full"}),l.jsx("div",{className:"w-4 h-0.5 bg-emerald-400"}),l.jsx("div",{className:"w-2 h-2 bg-emerald-400 rounded-full"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("div",{className:"text-sm text-emerald-700 bg-emerald-200 px-4 py-2 rounded-full font-bold shadow-md border border-emerald-300",children:[x.days," ",x.days===1?"day":"days"]}),l.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"})]})]})]}),l.jsx("div",{className:"w-16 h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent"}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"flex items-center space-x-3 bg-gradient-to-r from-indigo-50 to-blue-50 border-2 border-indigo-200 rounded-xl px-4 py-3 shadow-lg",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("svg",{className:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),l.jsx("label",{className:"text-sm font-bold text-indigo-800",children:"Select Period:"})]}),l.jsx("select",{value:n,onChange:b=>m(b.target.value),className:"px-4 py-2 text-sm font-semibold border-2 border-indigo-300 rounded-lg focus:ring-4 focus:ring-indigo-200 focus:border-indigo-500 transition-all duration-300 bg-white shadow-md hover:shadow-lg hover:border-indigo-400 min-w-[140px]",children:g.map(b=>l.jsx("option",{value:b.value,children:b.label},b.value))}),l.jsx("svg",{className:"w-4 h-4 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),n==="custom"&&l.jsxs("div",{className:"flex items-center space-x-3 bg-gradient-to-r from-amber-50 to-orange-50 border-2 border-amber-200 rounded-xl px-4 py-3 shadow-lg",children:[l.jsx("svg",{className:"w-5 h-5 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"text-xs font-semibold text-amber-700 mb-1",children:"From"}),l.jsx("input",{type:"date",value:u.start,onChange:b=>p("start",b.target.value),className:"px-3 py-2 text-sm font-semibold border-2 border-amber-300 rounded-lg focus:ring-4 focus:ring-amber-200 focus:border-amber-500 transition-all duration-300 bg-white shadow-md hover:shadow-lg hover:border-amber-400"})]}),l.jsx("div",{className:"flex items-center",children:l.jsx("svg",{className:"w-4 h-4 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"text-xs font-semibold text-amber-700 mb-1",children:"To"}),l.jsx("input",{type:"date",value:u.end,onChange:b=>p("end",b.target.value),className:"px-3 py-2 text-sm font-semibold border-2 border-amber-300 rounded-lg focus:ring-4 focus:ring-amber-200 focus:border-amber-500 transition-all duration-300 bg-white shadow-md hover:shadow-lg hover:border-amber-400"})]})]})]})]})]})]})},EN=({dateRange:r,onDateRangeChange:t,onQuickRangeChange:a,onExportCSV:n,canExport:o=!1})=>l.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 px-8 py-6 min-h-[80px] flex items-center",children:l.jsxs("div",{className:"flex items-center justify-between w-full",children:[l.jsx("div",{className:"w-15"}),l.jsx("div",{className:"flex items-center",children:l.jsxs("button",{onClick:n,disabled:!o,className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors duration-200 text-sm font-medium ${o?"bg-blue-600 hover:bg-blue-700 text-white cursor-pointer":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,title:o?"Export dashboard data":"No data available for export",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),l.jsx("span",{children:"Export Data"})]})}),l.jsx("div",{className:"flex-1 flex justify-center",children:l.jsx("h2",{className:"text-xl font-bold text-gray-900 mt-[10px]!",children:"CC Analytics"})}),l.jsxs("div",{className:"flex items-center space-x-8 min-w-0 flex-shrink-0",children:[l.jsx(CN,{dateRange:r,onDateRangeChange:t,onQuickRangeChange:a}),l.jsx("img",{src:uo(),alt:"CC Logo",className:"w-10 h-10 flex-shrink-0"})]})]})}),Et=({children:r,className:t="",padding:a="md",hover:n=!1})=>{const o={sm:"p-4",md:"p-6",lg:"p-8"};return l.jsx("div",{className:`
      bg-white rounded-xl shadow-sm border border-gray-200
      ${o[a]}
      ${n?"hover:shadow-md transition-shadow duration-200":""}
      ${t}
    `,children:r})},TN=({title:r,value:t,change:a,icon:n,trend:o="stable",className:u=""})=>{const h=m=>{switch(m){case"up":return"text-green-600";case"down":return"text-red-600";default:return"text-gray-600"}},g=m=>{switch(m){case"increase":return"text-green-600 bg-green-50";case"decrease":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}};return l.jsx(f0,{scale:!0,glow:!0,color:"blue",children:l.jsx(Et,{className:`${u} hover-lift`,children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:r}),l.jsx("p",{className:"text-3xl font-bold text-gray-900",children:t}),a&&l.jsxs("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium mt-2 ${g(a.type)}`,children:[l.jsx("span",{className:"mr-1",children:a.type==="increase"?"":a.type==="decrease"?"":""}),Math.abs(a.value),"%"]})]}),n&&l.jsx("div",{className:`rounded-lg ${h(o)}`,children:n})]})})})},Ed=({data:r,loading:t=!1})=>{if(t){const o=(r.totalSqmCut!==void 0?1:0)+(r.totalSqmManufactured!==void 0?1:0)+(r.projects!==void 0?1:0)+(r.responsibles!==void 0?1:0)+1,u=()=>o===1?"grid grid-cols-1 gap-6 justify-center":o===2?"grid grid-cols-1 md:grid-cols-2 gap-6 justify-center":o===3?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 justify-center":"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 justify-center";return l.jsx("div",{className:u(),children:[...Array(o)].map((h,g)=>l.jsx("div",{className:"animate-pulse",children:l.jsx("div",{className:"bg-gray-200 rounded-xl h-32"})},g))})}const a=[];r.totalSqmCut!==void 0&&a.push({title:"Total SQM Cut",value:`${r.totalSqmCut.toLocaleString()} m`,change:{value:0,type:"neutral"},trend:"stable",icon:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.121 14.121L19 19m-7-7l7-7m-7 7l-2.879 2.879M12 12L9.121 9.121m0 5.758a3 3 0 10-4.243-4.243 3 3 0 004.243 4.243zm8.879-8.879a3 3 0 10-4.243-4.243 3 3 0 004.243 4.243z"})})}),r.totalSqmManufactured!==void 0&&a.push({title:"Total SQM Manufactured",value:`${r.totalSqmManufactured.toLocaleString()} m`,change:{value:0,type:"neutral"},trend:"stable",icon:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2zm5-18v2M7 7h2v5a1 1 0 01-1 1H7V7z"})})}),r.projects!==void 0&&a.push({title:"Projects",value:r.projects,change:{value:0,type:"neutral"},trend:"stable",icon:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),r.responsibles!==void 0&&a.push({title:"Responsibles",value:r.responsibles,change:{value:0,type:"neutral"},trend:"stable",icon:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),a.push({title:"Total Panels",value:r.totalPanels.toLocaleString(),change:{value:0,type:"neutral"},trend:"stable",icon:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})});const n=()=>{const o=a.length;return o===1?"grid grid-cols-1 gap-6 justify-center":o===2?"grid grid-cols-1 md:grid-cols-2 gap-6 justify-center":o===3?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 justify-center":"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 justify-center"};return l.jsx("div",{className:n(),children:a.map((o,u)=>l.jsx(an,{direction:"up",delay:u*100,className:"w-full",children:l.jsx(TN,{title:o.title,value:o.value,change:o.change,trend:o.trend,icon:o.icon})},u))})},DN="Australia/Brisbane",m0=()=>{const r=new Date;return new Date(r.toLocaleString("en-US",{timeZone:DN}))},ho=r=>{const t=[7,9,11,14],a=[9,12,14],n=[14];return r===1||r===2||r===3||r===5?t:r===4?a:r===6?n:[]},g0=r=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][r],vo=()=>{const r=m0(),t=r.getDay(),a=r.getHours(),n=r.getMinutes(),o=a+n/60,h=ho(t).find(x=>x>o);if(h)return`Today at ${fo(h)} (Brisbane)`;const g=(t+1)%7,p=ho(g)[0];return`${g0(g)} at ${fo(p)} (Brisbane)`},Td=()=>{const r=m0(),t=r.getDay(),a=r.getHours(),n=r.getMinutes(),o=a+n/60,h=[...ho(t)].reverse().find(x=>x<o);if(h)return`Today at ${fo(h)} (Brisbane)`;const g=(t-1+7)%7,m=ho(g),p=m[m.length-1];return`${g0(g)} at ${fo(p)} (Brisbane)`},fo=r=>{const t=Math.floor(r),a=Math.round(r%1*60),n=t>=12?"PM":"AM";return`${t>12?t-12:t===0?12:t}:${a.toString().padStart(2,"0")} ${n}`};qa.register(nn,ln,rn,mp,hd,on,cn,un,fd);const ON=({data:r,title:t,loading:a=!1})=>{const n=k.useRef(null),o=k.useRef(null);if(k.useEffect(()=>{if(!n.current||a||!r||r.length===0)return;o.current&&o.current.destroy();const u=r.length>0?r.reduce((y,x)=>y+x.cut,0)/r.length:0,h=new Array(r.length).fill(u),g=r.map(y=>y.cut>=u?"rgb(34, 197, 94)":"rgb(239, 68, 68)"),m=r.length>0?r.reduce((y,x)=>x.cut+x.manufactured>y.cut+y.manufactured?x:y):{date:""},p=n.current.getContext("2d");if(p)return o.current=new qa(p,{type:"bar",data:{labels:r.map(y=>{const[x,b,j]=y.date.split("-").map(Number);return new Date(x,b-1,j).toLocaleDateString("en-AU",{month:"short",day:"numeric"})}),datasets:[{label:"SQM Cut",data:r.map(y=>y.cut),backgroundColor:"rgba(59, 130, 246, 0.5)",borderColor:"rgb(59, 130, 246)",borderWidth:1,order:1,datalabels:{display:!1}},{label:"SQM Manufactured",data:r.map(y=>y.manufactured),backgroundColor:"rgba(34, 197, 94, 0.5)",borderColor:"rgb(34, 197, 94)",borderWidth:1,order:1,datalabels:{display:!1}},{label:"Average Cut",data:h,type:"line",borderColor:"rgb(251, 191, 36)",backgroundColor:"rgba(251, 191, 36, 0.1)",borderWidth:2,fill:!1,tension:.1,pointRadius:4,pointHoverRadius:6,pointBackgroundColor:g,pointBorderColor:g,pointBorderWidth:2,order:0,datalabels:{display:!1}}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20}},title:{display:!0,text:t,font:{size:25,weight:"bold"}},tooltip:{mode:"index",intersect:!1,callbacks:{afterTitle:y=>{const x=y[0].dataIndex;return r[x].date===m.date?[" Peak Production Day"]:[]}}}},scales:{x:{display:!0,title:{display:!0,text:"Date"},grid:{display:!1}},y:{display:!0,title:{display:!0,text:"SQM (m)"},beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.1)"}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}}),()=>{o.current&&o.current.destroy()}},[r,t,a]),a)return l.jsx(Et,{children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),l.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})});if(!r||r.length===0){const u=vo();return l.jsx(Et,{children:l.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Data Available Yet"}),l.jsx("p",{className:"text-sm text-center mb-3",children:"No productivity data available for the selected date range."}),l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-center max-w-sm",children:l.jsxs("p",{className:"text-xs text-blue-500 font-medium italic mb-1",children:["Next sync: ",u]})})]})})}return l.jsx(an,{direction:"fade",delay:200,children:l.jsxs(Et,{className:"hover-lift",children:[l.jsx("div",{className:"relative h-120 animate-chart-fade-in",children:l.jsx("canvas",{ref:n})}),l.jsx("div",{className:"mt-4 p-3 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg border border-yellow-200 animate-fade-in",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"text-yellow-600",children:""}),l.jsxs("span",{className:"text-sm font-bold text-gray-700",children:["Peak Production Day: ",(()=>{if(r.length===0)return"No data available";const h=r.reduce((x,b)=>b.cut+b.manufactured>x.cut+x.manufactured?b:x).date,[g,m,p]=h.split("-").map(Number);return new Date(g,m-1,p).toLocaleDateString("en-AU",{weekday:"long",month:"long",day:"numeric"})})()]})]})})]})})},ap=({children:r,onClick:t,variant:a="primary",size:n="md",disabled:o=!1,loading:u=!1,className:h=""})=>{const g="inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2",m={primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 disabled:bg-blue-300",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500 disabled:bg-gray-300",outline:"border border-gray-300 text-gray-700 bg-white hover:bg-gray-50 focus:ring-blue-500 disabled:bg-gray-50 disabled:text-gray-400",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-gray-500 disabled:text-gray-400"},p={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return l.jsxs("button",{onClick:t,disabled:o||u,className:`
        ${g}
        ${m[a]}
        ${p[n]}
        ${h}
      `,children:[u&&l.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r]})};class AN{constructor(t={}){ue(this,"memoryCache",new Map);ue(this,"defaultTTL");ue(this,"maxSize");this.defaultTTL=t.ttl||5*60*1e3,this.maxSize=t.maxSize||100}generateKey(t,a){const n=Object.keys(a).sort().map(o=>`${o}:${a[o]}`).join("|");return`${t}:${n}`}get(t,a){const n=this.generateKey(t,a),o=this.memoryCache.get(n);return o?Date.now()-o.timestamp>o.ttl?(this.memoryCache.delete(n),null):o.data:null}set(t,a,n,o){const u=this.generateKey(t,a);this.memoryCache.size>=this.maxSize&&this.cleanup(),this.memoryCache.set(u,{data:n,timestamp:Date.now(),ttl:o||this.defaultTTL})}invalidate(t){const a=[];for(const n of this.memoryCache.keys())n.startsWith(`${t}:`)&&a.push(n);a.forEach(n=>this.memoryCache.delete(n))}cleanup(){const t=Date.now(),a=[];for(const[n,o]of this.memoryCache.entries())t-o.timestamp>o.ttl&&a.push(n);a.forEach(n=>this.memoryCache.delete(n)),this.memoryCache.size>=this.maxSize&&Array.from(this.memoryCache.entries()).sort((u,h)=>u[1].timestamp-h[1].timestamp).slice(0,Math.floor(this.maxSize/2)).forEach(([u])=>this.memoryCache.delete(u))}clear(){this.memoryCache.clear()}getStats(){const t=Date.now();let a=0,n=0;for(const o of this.memoryCache.values())t-o.timestamp>o.ttl?a++:n++;return{total:this.memoryCache.size,active:n,expired:a,maxSize:this.maxSize}}}const Ra=new AN({ttl:5*60*1e3,maxSize:50}),Ma={MAIN_METRICS:"main_metrics",PROJECTS:"projects",CUT_PRODUCTIVITY:"cut_productivity",MANUFACTURING_PRODUCTIVITY:"manufacturing_productivity",CNC_PRODUCTIVITY:"cnc_productivity",MAIN_CHART:"main_chart",CUT_CHART:"cut_chart",MANUFACTURING_CHART:"manufacturing_chart",CNC_CHART:"cnc_chart",ORDERS_BY_PROJECT:"orders_by_project"},Mi={SHORT:2*60*1e3,MEDIUM:5*60*1e3,LONG:15*60*1e3,VERY_LONG:60*60*1e3},kN=(r,t,a,n={})=>{const[o,u]=k.useState([]),[h,g]=k.useState(!1),[m,p]=k.useState(null),y=k.useCallback(()=>S(null,null,function*(){if(!r||!t||!a){u([]);return}const x={projectName:r,startDate:t,endDate:a};if(!n.forceRefresh){const b=Ra.get(Ma.ORDERS_BY_PROJECT,x);if(b){u(b);return}}try{g(!0),p(null);const b=yield Yt.getOrdersByProject(r,t,a);Ra.set(Ma.ORDERS_BY_PROJECT,x,b,n.ttl||Mi.MEDIUM),u(b)}catch(b){console.error("Error fetching project orders:",b),p(b instanceof Error?b.message:"Error desconocido")}finally{g(!1)}}),[r,t,a,n.forceRefresh,n.ttl]);return k.useEffect(()=>{r&&t&&a&&y()},[y,r,t,a]),{orders:o,loading:h,error:m,refetch:y}},RN=({projectName:r,startDate:t,endDate:a})=>{const{orders:n,loading:o,error:u}=kN(r,t,a),h=m=>m?new Date(m).toLocaleDateString("en-AU",{year:"numeric",month:"short",day:"numeric"}):"N/A",g=m=>{if(!m)return"bg-gray-100 text-gray-800";switch(m.toLowerCase()){case"delivered":case"entregado":return"bg-green-100 text-green-800";case"delivering":return"bg-yellow-100 text-yellow-800";case"manufacturing":case"fabricando":return"bg-gray-100 text-gray-800";case"cutting":case"cortando":return"bg-orange-100 text-orange-800";default:return"bg-blue-100 text-blue-800"}};return o?l.jsx("div",{className:"flex items-center justify-center py-8",children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-4 bg-gray-200 rounded w-48 mb-2"}),l.jsx("div",{className:"h-4 bg-gray-200 rounded w-32"})]})}):u?l.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"text-red-600",children:l.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),l.jsxs("div",{className:"ml-3",children:[l.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading orders"}),l.jsx("p",{className:"text-sm text-red-700 mt-1",children:u})]})]})}):n.length===0?l.jsx("div",{className:"text-center py-8",children:l.jsxs("div",{className:"text-gray-500",children:[l.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),l.jsx("p",{className:"text-sm",children:"No orders found for this project in the selected period"})]})}):l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex items-center justify-center border-b border-gray-200 pb-4 mb-8",children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("h4",{className:"text-xl font-bold text-gray-900",children:"Orders"}),l.jsx("div",{className:"w-16 h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent"}),l.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:[n.length," orders"]})]})}),l.jsx("div",{className:"w-full border-t border-gray-100 my-4"}),l.jsx("div",{className:"space-y-4",children:n.map((m,p)=>l.jsxs("div",{className:"bg-gradient-to-r from-white to-gray-50 border border-gray-200 rounded-xl p-6 hover:shadow-lg hover:border-blue-300 transition-all duration-300",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-blue-100 text-blue-800 text-lg font-bold rounded-lg",children:p+1}),l.jsxs("div",{children:[l.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["Order #",m.order_id]}),l.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full ml-3 ${g(m.status)}`,children:(m.status||"Unknown").toUpperCase()})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-sm text-gray-500",children:"Created"}),l.jsx("div",{className:"font-medium text-gray-900",children:h(m.creation_date)})]})]}),l.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[l.jsxs("div",{className:"text-center p-4 bg-white rounded-lg border border-gray-100",children:[l.jsx("div",{className:"text-sm font-medium text-gray-500 mb-2",children:"Total Area"}),l.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[(m.total_area||0).toFixed(2)," m"]})]}),l.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg border border-blue-200",children:[l.jsx("div",{className:"text-sm font-medium text-blue-600 mb-2",children:"Cut SQM"}),l.jsxs("div",{className:"text-2xl font-bold text-blue-700",children:[(m.cut_sqm||0).toFixed(2)," m"]})]}),l.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg border border-green-200",children:[l.jsx("div",{className:"text-sm font-medium text-green-600 mb-2",children:"Manufactured SQM"}),l.jsxs("div",{className:"text-2xl font-bold text-green-700",children:[(m.manufactured_sqm||0).toFixed(2)," m"]})]}),l.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg border border-purple-200",children:[l.jsx("div",{className:"text-sm font-medium text-purple-600 mb-2",children:"Panels"}),l.jsx("div",{className:"text-2xl font-bold text-purple-700",children:m.panels_count||0})]})]}),l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[l.jsxs("div",{className:"flex items-center space-x-6",children:[m.expected_date&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"w-3 h-3 bg-yellow-400 rounded-full"}),l.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Expected: ",h(m.expected_date)]})]}),m.delivered_date&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"w-3 h-3 bg-green-400 rounded-full"}),l.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Delivered: ",h(m.delivered_date)]})]})]}),l.jsxs("div",{className:"text-sm text-gray-500",children:["Order #",m.order_id]})]})]},m.order_id))})]})},MN=({projects:r,loading:t=!1,dateRange:a})=>{const[n,o]=k.useState(new Set),u=p=>{const y=new Set(n);y.has(p)?y.delete(p):y.add(p),o(y)},h=p=>{switch(p){case"In Progress":return"bg-green-100 text-green-800";case"Done":return"bg-blue-100 text-blue-800";case"To Do":return"bg-yellow-100 text-yellow-800";case"Defects":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},g=p=>window.location.hostname==="gasti10.github.io"?`https://gasti10.github.io/CC_Flow_summary_report/?project=${encodeURIComponent(p)}`:`http://localhost:3000/?project=${encodeURIComponent(p)}`,m=p=>{const y=g(p);window.open(y,"_blank")};return t?l.jsx(Et,{children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),l.jsx("div",{className:"space-y-3",children:[...Array(5)].map((p,y)=>l.jsx("div",{className:"h-16 bg-gray-200 rounded"},y))})]})}):l.jsxs(Et,{children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Projects"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Worked on projects during the selected period"})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b-2 border-gray-300 bg-gray-50",children:[l.jsx("th",{className:"text-center py-4 px-6 font-semibold text-gray-800 text-sm",children:"Name"}),l.jsx("th",{className:"text-center py-4 px-4 font-semibold text-gray-800 text-sm",children:"Number"}),l.jsx("th",{className:"text-center py-4 px-4 font-semibold text-gray-800 text-sm",children:"PM"}),l.jsx("th",{className:"text-center py-4 px-4 font-semibold text-gray-800 text-sm",children:"Supervisor"}),l.jsx("th",{className:"text-center py-4 px-4 font-semibold text-gray-800 text-sm",children:"Status"}),l.jsx("th",{className:"text-center py-4 px-4 font-semibold text-gray-800 text-sm",children:"Progress"}),l.jsx("th",{className:"text-center py-4 px-4 font-semibold text-gray-800 text-sm",children:"SQM Cut"}),l.jsx("th",{className:"text-center py-4 px-4 font-semibold text-gray-800 text-sm",children:"SQM Manufactured"}),l.jsx("th",{className:"text-center py-4 px-6 font-semibold text-gray-800 text-sm",children:"Actions"})]})}),l.jsx("tbody",{children:r.map(p=>l.jsxs(ro.Fragment,{children:[l.jsxs("tr",{className:"border-b border-gray-200 hover:bg-blue-50 transition-colors duration-200",children:[l.jsx("td",{className:"py-6 px-6",children:l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"font-semibold text-gray-900 text-base",children:p.name}),l.jsx("div",{className:"text-sm text-gray-600 space-y-1",children:l.jsxs("div",{className:"flex items-center space-x-4 justify-center",children:[l.jsxs("span",{className:"flex items-center",children:[l.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full mr-2"}),"Start: ",p.startDate?new Date(p.startDate).toLocaleDateString("en-AU"):"N/A"]}),l.jsxs("span",{className:"flex items-center",children:[l.jsx("span",{className:"w-2 h-2 bg-yellow-400 rounded-full mr-2"}),"Expected: ",p.expectedCompletionDate?new Date(p.expectedCompletionDate).toLocaleDateString("en-AU"):"N/A"]}),l.jsxs("span",{className:"flex items-center",children:[l.jsx("span",{className:"w-2 h-2 bg-red-400 rounded-full mr-2"}),"End: ",p.endDate?new Date(p.endDate).toLocaleDateString("en-AU"):"N/A"]})]})})]})}),l.jsx("td",{className:"py-6 px-4 text-center",children:l.jsxs("span",{className:"inline-flex items-center justify-center w-12 h-8 bg-blue-100 text-blue-800 text-sm font-bold rounded-lg",children:["#",p.number]})}),l.jsx("td",{className:"py-6 px-4 text-center",children:l.jsx("div",{className:"text-sm font-medium text-gray-800",children:p.pm||"N/A"})}),l.jsx("td",{className:"py-6 px-4 text-center",children:l.jsx("div",{className:"text-sm font-medium text-gray-800",children:p.supervisor||"N/A"})}),l.jsx("td",{className:"py-6 px-4",children:l.jsx("span",{className:`inline-flex px-3 py-1.5 text-xs font-semibold rounded-full ${h(p.status)}`,children:p.status.replace("-"," ").toUpperCase()})}),l.jsx("td",{className:"py-6 px-4",children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-3",children:l.jsx("div",{className:`h-3 rounded-full transition-all duration-500 ${p.progress>=100?"bg-gradient-to-r from-red-500 to-red-600":p.progress>=85?"bg-gradient-to-r from-yellow-500 to-yellow-600":"bg-gradient-to-r from-blue-500 to-blue-600"}`,style:{width:`${Math.min(p.progress,100)}%`}})}),l.jsxs("span",{className:"text-sm font-semibold text-gray-700 min-w-[3rem]",children:[p.progress,"%"]})]})}),l.jsx("td",{className:"py-6 px-4 text-center",children:l.jsxs("div",{className:"text-sm font-semibold text-blue-700",children:[p.sqmCut.toLocaleString()," m"]})}),l.jsx("td",{className:"py-6 px-4 text-center",children:l.jsxs("div",{className:"text-sm font-semibold text-green-700",children:[p.sqmManufactured.toLocaleString()," m"]})}),l.jsx("td",{className:"py-6 px-6",children:l.jsxs("div",{className:"flex flex-col space-y-2",children:[l.jsx(ap,{variant:"ghost",size:"sm",onClick:()=>m(p.name),className:"px-4 py-2 text-sm font-medium text-blue-600 hover:text-blue-800 hover:bg-blue-50",children:"Project Dashboard "}),l.jsx(ap,{variant:"outline",size:"sm",onClick:()=>u(p.id),className:"px-4 py-2 text-sm font-medium",children:n.has(p.id)?" Hide Orders":" Show Orders"})]})})]}),n.has(p.id)&&l.jsx("tr",{className:"bg-gradient-to-r from-gray-50 to-blue-50",children:l.jsx("td",{colSpan:9,className:"py-8 px-8",children:l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:l.jsx(RN,{projectName:p.name,startDate:a.startDate,endDate:a.endDate})})})})]},p.id))})]})})]})},en=({title:r,icon:t,variant:a="default",className:n=""})=>{const u=(()=>{switch(a){case"charts":return{lineColor:"from-blue-400 to-blue-600",iconBg:"from-blue-500 to-blue-700",iconColor:"text-white",icon:"",label:"Charts"};case"performance":return{lineColor:"from-green-400 to-green-600",iconBg:"from-green-500 to-green-700",iconColor:"text-white",icon:"",label:"Performance"};case"projects":return{lineColor:"from-purple-400 to-purple-600",iconBg:"from-purple-500 to-purple-700",iconColor:"text-white",icon:"",label:"Projects"};case"cnc":return{lineColor:"from-orange-400 to-orange-600",iconBg:"from-orange-500 to-orange-700",iconColor:"text-white",icon:"",label:"CNC"};default:return{lineColor:"from-gray-400 to-gray-600",iconBg:"from-gray-500 to-gray-700",iconColor:"text-white",icon:"",label:"Section"}}})();return l.jsx("div",{className:`flex items-center justify-center py-12 ${n}`,children:l.jsxs("div",{className:"relative group",children:[l.jsxs("div",{className:"flex items-center space-x-6",children:[l.jsx("div",{className:`w-20 h-px bg-gradient-to-r from-transparent via-${u.lineColor.split("-")[1]}-400 to-${u.lineColor.split("-")[3]}-600 transform group-hover:scale-x-150 transition-all duration-500`}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:`w-12 h-12 bg-gradient-to-br ${u.iconBg} rounded-full flex items-center justify-center shadow-lg group-hover:shadow-xl group-hover:scale-110 transition-all duration-300`,children:l.jsx("span",{className:`${u.iconColor} text-lg`,children:t||u.icon})}),l.jsx("div",{className:`absolute -inset-3 bg-${u.lineColor.split("-")[1]}-200 rounded-full opacity-0 group-hover:opacity-30 group-hover:animate-ping transition-all duration-300`})]}),l.jsx("div",{className:`w-20 h-px bg-gradient-to-l from-transparent via-${u.lineColor.split("-")[1]}-400 to-${u.lineColor.split("-")[3]}-600 transform group-hover:scale-x-150 transition-all duration-500`})]}),l.jsx("div",{className:"absolute -top-12 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-all duration-300",children:l.jsx("div",{className:`bg-${u.lineColor.split("-")[1]}-600 text-white text-xs font-medium px-3 py-1 rounded-full shadow-lg`,children:r||u.label})})]})})},UN=(r,t,a={})=>{const[n,o]=k.useState(null),[u,h]=k.useState(!0),[g,m]=k.useState(null),p=k.useCallback(()=>S(null,null,function*(){const y={startDate:r,endDate:t};if(!a.forceRefresh){const x=Ra.get(Ma.MAIN_METRICS,y);if(x){o(x),h(!1);return}}try{h(!0),m(null);const x=yield Yt.getMainMetrics(r,t);Ra.set(Ma.MAIN_METRICS,y,x,a.ttl||Mi.MEDIUM),o(x)}catch(x){console.error("Error fetching main metrics:",x),m(x instanceof Error?x.message:"Error desconocido")}finally{h(!1)}}),[r,t,a.forceRefresh,a.ttl]);return k.useEffect(()=>{r&&t&&p()},[p,r,t]),{data:n,loading:u,error:g,refetch:p}},qN=(r,t,a={})=>{const[n,o]=k.useState([]),[u,h]=k.useState(!0),[g,m]=k.useState(null),p=k.useCallback(()=>S(null,null,function*(){const y={startDate:r,endDate:t};if(!a.forceRefresh){const x=Ra.get(Ma.PROJECTS,y);if(x){o(x),h(!1);return}}try{h(!0),m(null);const x=yield Yt.getProjectsWithMetrics(r,t);Ra.set(Ma.PROJECTS,y,x,a.ttl||Mi.MEDIUM),o(x)}catch(x){console.error("Error fetching projects:",x),m(x instanceof Error?x.message:"Error desconocido")}finally{h(!1)}}),[r,t,a.forceRefresh,a.ttl]);return k.useEffect(()=>{r&&t&&p()},[p,r,t]),{data:n,loading:u,error:g,refetch:p}},LN=(r,t,a={})=>{const[n,o]=k.useState([]),[u,h]=k.useState(!0),[g,m]=k.useState(null),p=k.useCallback(()=>S(null,null,function*(){const y={startDate:r,endDate:t};if(!a.forceRefresh){const x=Ra.get(Ma.CUT_PRODUCTIVITY,y);if(x){o(x),h(!1);return}}try{h(!0),m(null);const x=yield Yt.getCutProductivityByResponsible(r,t);Ra.set(Ma.CUT_PRODUCTIVITY,y,x,a.ttl||Mi.SHORT),o(x)}catch(x){console.error("Error fetching cut productivity:",x),m(x instanceof Error?x.message:"Error desconocido")}finally{h(!1)}}),[r,t,a.forceRefresh,a.ttl]);return k.useEffect(()=>{r&&t&&p()},[p,r,t]),{data:n,loading:u,error:g,refetch:p}},$N=(r,t,a={})=>{const[n,o]=k.useState([]),[u,h]=k.useState(!0),[g,m]=k.useState(null),p=k.useCallback(()=>S(null,null,function*(){const y={startDate:r,endDate:t};if(!a.forceRefresh){const x=Ra.get(Ma.MANUFACTURING_PRODUCTIVITY,y);if(x){o(x),h(!1);return}}try{h(!0),m(null);const x=yield Yt.getManufacturingProductivityByResponsible(r,t);Ra.set(Ma.MANUFACTURING_PRODUCTIVITY,y,x,a.ttl||Mi.SHORT),o(x)}catch(x){console.error("Error fetching manufacturing productivity:",x),m(x instanceof Error?x.message:"Error desconocido")}finally{h(!1)}}),[r,t,a.forceRefresh,a.ttl]);return k.useEffect(()=>{r&&t&&p()},[p,r,t]),{data:n,loading:u,error:g,refetch:p}},p0=({startDate:r,endDate:t})=>{const{data:a,loading:n,error:o,refetch:u}=UN(r,t),{data:h,loading:g,error:m,refetch:p}=qN(r,t),{data:y,loading:x,error:b,refetch:j}=LN(r,t),{data:N,loading:E,error:A,refetch:B}=$N(r,t),U=zN(y,N),q=n||g||x||E,X=o||m||b||A,te=k.useCallback(()=>{u(),p(),j(),B()},[u,p,j,B]);return{mainMetrics:a,projects:h,chartData:U,loading:q,error:X,refetch:te}},zN=(r,t)=>{const a=new Map,n=new Map;r.forEach(h=>{const g=h.fecha,m=a.get(g)||0;a.set(g,m+h.total_area)}),console.log("cutData",r),console.log("cutByDate",a),t.forEach(h=>{const g=h.fecha,m=n.get(g)||0;n.set(g,m+h.total_area)}),console.log("manufacturingData",t),console.log("manufacturingByDate",n);const o=new Set([...a.keys(),...n.keys()]);return Array.from(o).sort().map(h=>({date:h,cut:a.get(h)||0,manufactured:n.get(h)||0}))},sp=({dateRange:r})=>{const{mainMetrics:t,projects:a,chartData:n,loading:o,error:u,refetch:h}=p0(r),g=Td(),m=vo(),p=t?{totalSqmCut:t.total_sqm_cut,totalSqmManufactured:t.total_sqm_manufactured,projects:a.length,totalPanels:a.reduce((x,b)=>x+(b.total_panels||0),0)||0}:{totalSqmCut:0,totalSqmManufactured:0,projects:0,totalPanels:0},y=a.map((x,b)=>{var j;return{id:`project-${b}`,name:x.project_name,number:((j=x.project_number)==null?void 0:j.toString())||"N/A",pm:x.pm||"N/A",supervisor:x.site_supervisor||"N/A",status:x.status||"To Do",sqmCut:x.total_sqm_cut||0,sqmManufactured:x.total_sqm_manufactured||0,totalPanels:x.total_panels||0,progress:Math.round(x.progress_percentage||0),startDate:x.project_start_date,endDate:x.finalization_date||"",expectedCompletionDate:x.expected_completion_date,details:{panels:x.total_panels||0,materials:[],priority:"medium"}}});return l.jsxs("div",{className:"space-y-0",children:[o&&l.jsx("div",{className:"flex items-center justify-center py-12",children:l.jsx(jN,{size:"lg",color:"blue",text:"Loading analytics data..."})}),l.jsxs("div",{className:"flex items-center justify-between py-8",children:[l.jsx("div",{className:"w-32"}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Factory Analytics Dashboard"}),l.jsx("p",{className:"text-gray-600 italic",children:"Comprehensive overview of factory operations and performance metrics"})]}),l.jsx("div",{className:"flex items-center space-x-3",children:l.jsxs("div",{className:"text-sm text-gray-500",children:[l.jsxs("div",{className:"text-base font-medium",children:["Last sync: ",g]}),l.jsxs("div",{className:"text-xs italic",children:["Next sync: ",m]})]})})]}),u&&l.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"text-red-400 mr-3",children:""}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading data"}),l.jsx("p",{className:"text-sm text-red-600 mt-1",children:u})]})]}),l.jsx("button",{onClick:h,className:"px-3 py-1 bg-red-100 hover:bg-red-200 text-red-700 rounded-md text-sm font-medium transition-colors duration-200",children:"Retry"})]})}),l.jsx("section",{className:"py-8",children:l.jsx(an,{direction:"up",delay:200,children:l.jsx(Ed,{data:p,loading:o})})}),l.jsx(en,{variant:"charts",title:"Charts"}),l.jsx("section",{className:"py-8",children:l.jsx(an,{direction:"up",delay:400,children:l.jsx(ON,{data:n,title:"Daily Production Overview",loading:o})})}),l.jsx(en,{variant:"projects",title:"Projects"}),l.jsx("section",{className:"py-8",children:l.jsx(an,{direction:"up",delay:600,children:l.jsx(MN,{projects:y,loading:o,dateRange:r})})})]})};qa.register(nn,ln,rn,on,cn,un);const BN=({data:r,title:t,loading:a=!1})=>{const n=k.useRef(null),o=k.useRef(null);return k.useEffect(()=>{if(!n.current||a)return;o.current&&o.current.destroy();const u=r.reduce((b,j)=>(b[j.date]||(b[j.date]={}),b[j.date][j.responsible]||(b[j.date][j.responsible]=0),b[j.date][j.responsible]+=j.cut,b),{}),h=Object.keys(u).sort(),g=Array.from(new Set(r.map(b=>b.responsible))),p=(b=>{const j=["rgb(239, 68, 68)","rgb(251, 146, 60)","rgb(251, 191, 36)","rgb(132, 204, 22)","rgb(34, 197, 94)","rgb(16, 185, 129)","rgb(6, 182, 212)","rgb(59, 130, 246)","rgb(147, 51, 234)","rgb(168, 85, 247)"];if(b>j.length){const N=[];for(let E=j.length;E<b;E++){const B=(300+(E-j.length)*36)%360,U=75+E%2*15,q=50+E%3*8;N.push(`hsl(${B}, ${U}%, ${q}%)`)}return[...j,...N]}return j.slice(0,b)})(g.length),y=g.map((b,j)=>({label:b,data:h.map(N=>u[N][b]||0),backgroundColor:p[j%p.length],borderColor:p[j%p.length],borderWidth:1,datalabels:{display:!1}})),x=n.current.getContext("2d");if(x)return o.current=new qa(x,{type:"bar",data:{labels:h.map(b=>{const[j,N,E]=b.split("-").map(Number);return new Date(j,N-1,E).toLocaleDateString("en-AU",{month:"short",day:"numeric"})}),datasets:y},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20,font:{size:12}}},title:{display:!0,text:t,font:{size:25,weight:"bold"}},tooltip:{mode:"index",intersect:!1,callbacks:{title:b=>{const j=h[b[0].dataIndex],[N,E,A]=j.split("-").map(Number);return new Date(N,E-1,A).toLocaleDateString("en-AU",{weekday:"long",month:"long",day:"numeric"})},label:b=>{const j=b.dataset.label,N=b.parsed.y;return`${j}: ${N.toLocaleString()} m`},footer:b=>`Total: ${b.reduce((N,E)=>N+E.parsed.y,0).toLocaleString()} m`}}},scales:{x:{display:!0,title:{display:!0,text:"Date"},grid:{display:!1},stacked:!0},y:{display:!0,title:{display:!0,text:"SQM Cut (m)"},beginAtZero:!0,stacked:!0,grid:{color:"rgba(0, 0, 0, 0.1)"}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}}),()=>{o.current&&o.current.destroy()}},[r,t,a]),a?l.jsx(Et,{children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),l.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):l.jsx(Et,{children:l.jsx("div",{className:"relative h-96",children:l.jsx("canvas",{ref:n})})})};qa.register(nn,ln,rn,on,cn,un);const PN=({data:r,title:t,loading:a=!1})=>{const n=k.useRef(null),o=k.useRef(null);return k.useEffect(()=>{if(!n.current||a)return;o.current&&o.current.destroy();const u=r.reduce((x,b)=>(x[b.date]||(x[b.date]={}),x[b.date][b.cnc]||(x[b.date][b.cnc]=0),x[b.date][b.cnc]+=b.cut,x),{}),h=Object.keys(u).sort(),g=Array.from(new Set(r.map(x=>x.cnc))),m=["rgb(59, 130, 246)","rgb(34, 197, 94)","rgb(251, 191, 36)","rgb(239, 68, 68)","rgb(168, 85, 247)","rgb(236, 72, 153)"],p=g.map((x,b)=>({label:x,data:h.map(j=>u[j][x]||0),backgroundColor:m[b%m.length],borderColor:m[b%m.length],borderWidth:1,datalabels:{display:!1}})),y=n.current.getContext("2d");if(y)return o.current=new qa(y,{type:"bar",data:{labels:h.map(x=>{const[b,j,N]=x.split("-").map(Number);return new Date(b,j-1,N).toLocaleDateString("en-AU",{month:"short",day:"numeric"})}),datasets:p},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20,font:{size:12}}},title:{display:!0,text:t,font:{size:25,weight:"bold"}},tooltip:{mode:"index",intersect:!1,callbacks:{title:x=>{const b=h[x[0].dataIndex],[j,N,E]=b.split("-").map(Number);return new Date(j,N-1,E).toLocaleDateString("en-AU",{weekday:"long",month:"long",day:"numeric"})},label:x=>{const b=x.dataset.label,j=x.parsed.y;return`${b}: ${j.toLocaleString()} m`},footer:x=>`Total: ${x.reduce((j,N)=>j+N.parsed.y,0).toLocaleString()} m`}}},scales:{x:{display:!0,title:{display:!0,text:"Date"},grid:{display:!1},stacked:!0},y:{display:!0,title:{display:!0,text:"SQM Cut (m)"},beginAtZero:!0,stacked:!0,grid:{color:"rgba(0, 0, 0, 0.1)"}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}}),()=>{o.current&&o.current.destroy()}},[r,t,a]),a?l.jsx(Et,{children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),l.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):l.jsx(Et,{children:l.jsx("div",{className:"relative h-96",children:l.jsx("canvas",{ref:n})})})},y0=({data:r,loading:t=!1,title:a})=>{if(t)return l.jsx(Et,{children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),l.jsx("div",{className:"space-y-3",children:[...Array(5)].map((o,u)=>l.jsx("div",{className:"h-16 bg-gray-200 rounded"},u))})]})});if(!r||r.length===0)return l.jsx(Et,{children:l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"text-4xl mb-4",children:""}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Data Available"}),l.jsx("p",{className:"text-gray-500",children:"No data available for the selected period"})]})});const n=[...r].sort((o,u)=>u.totalSqm-o.totalSqm);return l.jsxs(Et,{children:[l.jsx("div",{className:"mb-6",children:l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:a})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-gray-200",children:[l.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Responsible"}),l.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Total Panels"}),l.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Total SQM"}),l.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Avg SQM/Panel"})]})}),l.jsx("tbody",{children:n.map((o,u)=>{const h=o.totalPanels>0?o.totalSqm/o.totalPanels:0,g=u===0;return l.jsxs("tr",{className:`
                    border-b border-gray-100 hover:bg-gray-50 transition-colors duration-200
                    ${g?"bg-yellow-50":""}
                  `,children:[l.jsx("td",{className:"py-4 px-4",children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:`
                        w-8 h-8 flex items-center justify-center text-white text-sm font-medium`,children:g?"":""}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-gray-900",children:o.responsible||"Unknown"}),g&&l.jsx("div",{className:"text-xs text-yellow-600 font-medium",children:"Top Performer"})]})]})}),l.jsx("td",{className:"py-4 px-4",children:l.jsx("div",{className:"text-sm text-gray-900 font-medium",children:o.totalPanels.toLocaleString()})}),l.jsx("td",{className:"py-4 px-4",children:l.jsxs("div",{className:"text-sm text-gray-900 font-medium",children:[o.totalSqm.toFixed(2)," m"]})}),l.jsx("td",{className:"py-4 px-4",children:l.jsxs("div",{className:"text-sm text-gray-900 font-medium",children:[h.toFixed(2)," m"]})})]},o.responsible)})})]})}),l.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-900",children:r.reduce((o,u)=>o+u.totalPanels,0).toLocaleString()}),l.jsx("div",{className:"text-sm text-gray-600",children:"Total Panels"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[r.reduce((o,u)=>o+u.totalSqm,0).toFixed(2)," m"]}),l.jsx("div",{className:"text-sm text-gray-600",children:"Total SQM"})]})]})})]})},IN=({data:r,loading:t=!1,title:a})=>{if(t)return l.jsx(Et,{children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),l.jsx("div",{className:"space-y-3",children:[...Array(3)].map((o,u)=>l.jsx("div",{className:"h-16 bg-gray-200 rounded"},u))})]})});if(!r||r.length===0)return l.jsx(Et,{children:l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"text-4xl mb-4",children:""}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No CNC Data Available"}),l.jsx("p",{className:"text-gray-500",children:"No CNC data available for the selected period"})]})});const n=[...r].sort((o,u)=>u.totalSqm-o.totalSqm);return l.jsxs(Et,{children:[l.jsx("div",{className:"mb-6",children:l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:a})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-gray-200",children:[l.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"CNC Machine"}),l.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Total Panels"}),l.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Total SQM"}),l.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Avg SQM/Panel"}),l.jsx("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Inactive Days"})]})}),l.jsx("tbody",{children:n.map((o,u)=>{const h=o.totalPanels>0?o.totalSqm/o.totalPanels:0,g=u===0,m=o.totalDaysInRange>0?o.inactiveDays/o.totalDaysInRange*100:0,p=m>50;return l.jsxs("tr",{className:`
                    border-b border-gray-100 hover:bg-gray-50 transition-colors duration-200
                    ${g?"bg-yellow-50":""}
                    ${p?"bg-red-50":""}
                  `,children:[l.jsx("td",{className:"py-4 px-4",children:l.jsxs("div",{className:"flex items-center space-x-3 justify-center",children:[l.jsx("div",{className:`
                        w-8 h-8 flex items-center justify-center text-white text-sm font-medium rounded-full    
                      `,children:""}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-gray-900",children:o.cnc||"Unknown"}),g&&l.jsx("div",{className:"text-xs text-yellow-600 font-medium",children:"Top Performer"}),p&&l.jsx("div",{className:"text-xs text-red-600 font-medium",children:"Inactive"})]})]})}),l.jsx("td",{className:"py-4 px-4",children:l.jsx("div",{className:"text-sm text-gray-900 font-medium",children:o.totalPanels.toLocaleString()})}),l.jsx("td",{className:"py-4 px-4",children:l.jsxs("div",{className:"text-sm text-gray-900 font-medium",children:[o.totalSqm.toFixed(2)," m"]})}),l.jsx("td",{className:"py-4 px-4",children:l.jsxs("div",{className:"text-sm text-gray-900 font-medium",children:[h.toFixed(2)," m"]})}),l.jsx("td",{className:"py-4 px-4",children:l.jsx("div",{className:"flex items-center justify-center",children:l.jsxs("span",{className:`
                        inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
                        ${m===0?"bg-green-100 text-green-800":m<=50?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}
                      `,children:[o.inactiveDays," days (",m.toFixed(1),"%)"]})})})]},o.cnc)})})]})}),l.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-900",children:r.reduce((o,u)=>o+u.totalPanels,0).toLocaleString()}),l.jsx("div",{className:"text-sm text-gray-600",children:"Total Panels"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[r.reduce((o,u)=>o+u.totalSqm,0).toFixed(2)," m"]}),l.jsx("div",{className:"text-sm text-gray-600",children:"Total SQM"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-900",children:r.reduce((o,u)=>o+u.inactiveDays,0)}),l.jsx("div",{className:"text-sm text-gray-600",children:"Total Inactive Days"})]})]})})]})},HN=({startDate:r,endDate:t})=>{const[a,n]=k.useState([]),[o,u]=k.useState([]),[h,g]=k.useState([]),[m,p]=k.useState([]),[y,x]=k.useState(!0),[b,j]=k.useState(null);return k.useEffect(()=>{r&&t&&S(null,null,function*(){try{x(!0),j(null);const[E,A]=yield Promise.all([Yt.getCutProductivityByResponsible(r,t),Yt.getCutProductivityByCNC(r,t)]),B=E.map(_=>({date:_.fecha,responsible:_.responsable||"Sin asignar",cut:_.total_area})),U=A.map(_=>({date:_.fecha,cnc:_.cnc||"Sin asignar",cut:_.total_area})),q=new Map,X=new Map;E.forEach(_=>{const R=_.responsable||"Sin asignar";q.has(R)||q.set(R,{totalPanels:0,totalSqm:0,efficiency:0});const F=q.get(R);F.totalPanels+=_.panel_count,F.totalSqm+=_.total_area}),q.forEach(_=>{_.efficiency=_.totalSqm>0?Math.min(100,_.totalSqm/100*10):0}),["1","2","3"].forEach(_=>{X.set(_,{totalPanels:0,totalSqm:0,inactiveDays:0,totalDaysInRange:0})}),A.forEach(_=>{const R=_.cnc||"Sin asignar";X.has(R)||X.set(R,{totalPanels:0,totalSqm:0,inactiveDays:0,totalDaysInRange:0});const F=X.get(R);F.totalPanels+=_.panel_count,F.totalSqm+=_.total_area});const z=new Date(r),ie=new Date(t),C=Math.ceil((ie.getTime()-z.getTime())/(1e3*60*60*24))+1;X.forEach((_,R)=>{const F=new Set(A.filter(le=>le.cnc===R).map(le=>le.fecha)),K=C-F.size;_.inactiveDays=Math.max(0,K),_.totalDaysInRange=C}),n(B),u(U),g(Array.from(q.entries()).map(([_,R])=>Ue({responsible:_},R))),p(Array.from(X.entries()).map(([_,R])=>Ue({cnc:_},R)))}catch(E){console.error("Error fetching cut process data:",E),j(E instanceof Error?E.message:"Error desconocido")}finally{x(!1)}})},[r,t]),{responsibleData:a,cncData:o,responsiblesTable:h,cncTable:m,loading:y,error:b}},YN=({dateRange:r})=>{const{responsibleData:t,cncData:a,responsiblesTable:n,cncTable:o,loading:u,error:h}=HN(r),g=Td(),m=vo(),p=t.reduce((j,N)=>j+N.cut,0),y=n.reduce((j,N)=>j+N.totalPanels,0),x=new Set(t.map(j=>j.responsible)).size,b={totalSqmCut:p,responsibles:x,totalPanels:y};return l.jsxs("div",{className:"space-y-10",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"w-32"}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Cut Process Analytics"}),l.jsx("p",{className:"text-gray-600 italic",children:"Detailed analysis of cutting operations and performance by responsible person and CNC machines"})]}),l.jsx("div",{className:"flex items-center space-x-3",children:l.jsxs("div",{className:"text-sm text-gray-500",children:[l.jsxs("div",{className:"text-base font-medium",children:["Last sync: ",g]}),l.jsxs("div",{className:"text-xs italic",children:["Next sync: ",m]})]})})]}),h&&l.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"text-red-400 mr-3",children:""}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading data"}),l.jsx("p",{className:"text-sm text-red-600 mt-1",children:h})]})]})}),l.jsx("div",{className:"space-y-4",children:l.jsx(Ed,{data:b,loading:u})}),l.jsx(en,{variant:"charts",title:"Charts"}),l.jsx("div",{className:"space-y-4",children:l.jsx(BN,{data:t,title:"Daily Cutting",loading:u})}),l.jsx(en,{variant:"performance",title:"Performance"}),l.jsx("div",{className:"space-y-4",children:l.jsx(y0,{data:n,title:"Performance by Responsible Person",loading:u})}),l.jsx(en,{variant:"cnc",title:"CNC Machines"}),l.jsx("div",{className:"space-y-4",children:l.jsx(PN,{data:a,title:"Daily CNC",loading:u})}),l.jsx(en,{variant:"cnc",title:"CNC Performance"}),l.jsx("div",{className:"space-y-4",children:l.jsx(IN,{data:o,title:"CNC Machine Performance",loading:u})})]})};qa.register(nn,ln,rn,on,cn,un);const VN=({data:r,title:t,loading:a=!1})=>{const n=k.useRef(null),o=k.useRef(null);return k.useEffect(()=>{if(!n.current||a)return;o.current&&o.current.destroy();const u=r.reduce((b,j)=>(b[j.date]||(b[j.date]={}),b[j.date][j.responsible]||(b[j.date][j.responsible]=0),b[j.date][j.responsible]+=j.manufactured,b),{}),h=Object.keys(u).sort(),g=Array.from(new Set(r.map(b=>b.responsible))),p=(b=>{const j=["rgb(239, 68, 68)","rgb(251, 146, 60)","rgb(251, 191, 36)","rgb(132, 204, 22)","rgb(34, 197, 94)","rgb(16, 185, 129)","rgb(6, 182, 212)","rgb(59, 130, 246)","rgb(147, 51, 234)","rgb(168, 85, 247)"];if(b>j.length){const N=[];for(let E=j.length;E<b;E++){const B=(300+(E-j.length)*36)%360,U=75+E%2*15,q=50+E%3*8;N.push(`hsl(${B}, ${U}%, ${q}%)`)}return[...j,...N]}return j.slice(0,b)})(g.length),y=g.map((b,j)=>({label:b,data:h.map(N=>u[N][b]||0),backgroundColor:p[j%p.length],borderColor:p[j%p.length],borderWidth:1,datalabels:{display:!1}})),x=n.current.getContext("2d");if(x)return o.current=new qa(x,{type:"bar",data:{labels:h.map(b=>{const[j,N,E]=b.split("-").map(Number);return new Date(j,N-1,E).toLocaleDateString("en-AU",{month:"short",day:"numeric"})}),datasets:y},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20,font:{size:12}}},title:{display:!0,text:t,font:{size:25,weight:"bold"}},tooltip:{mode:"index",intersect:!1,callbacks:{title:b=>{const j=h[b[0].dataIndex],[N,E,A]=j.split("-").map(Number);return new Date(N,E-1,A).toLocaleDateString("en-AU",{weekday:"long",month:"long",day:"numeric"})},label:b=>{const j=b.dataset.label,N=b.parsed.y;return`${j}: ${N.toLocaleString()} m`},footer:b=>`Total: ${b.reduce((N,E)=>N+E.parsed.y,0).toLocaleString()} m`}}},scales:{x:{display:!0,title:{display:!0,text:"Date"},grid:{display:!1},stacked:!0},y:{display:!0,title:{display:!0,text:"SQM Manufactured (m)"},beginAtZero:!0,stacked:!0,grid:{color:"rgba(0, 0, 0, 0.1)"}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}}),()=>{o.current&&o.current.destroy()}},[r,t,a]),a?l.jsx(Et,{children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),l.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):l.jsx(Et,{children:l.jsx("div",{className:"relative h-96",children:l.jsx("canvas",{ref:n})})})},QN=({startDate:r,endDate:t})=>{const[a,n]=k.useState([]),[o,u]=k.useState([]),[h,g]=k.useState(!0),[m,p]=k.useState(null);return k.useEffect(()=>{r&&t&&S(null,null,function*(){try{g(!0),p(null);const x=yield Yt.getManufacturingProductivityByResponsible(r,t),b=x.map(N=>({date:N.fecha,responsible:N.responsable||"Sin asignar",manufactured:N.total_area})),j=new Map;x.forEach(N=>{const E=N.responsable||"Sin asignar";j.has(E)||j.set(E,{totalPanels:0,totalSqm:0,efficiency:0});const A=j.get(E);A.totalPanels+=N.panel_count,A.totalSqm+=N.total_area}),j.forEach(N=>{N.efficiency=N.totalSqm>0?Math.min(100,N.totalSqm/100*10):0}),n(b),u(Array.from(j.entries()).map(([N,E])=>Ue({responsible:N},E)))}catch(x){console.error("Error fetching manufacturing data:",x),p(x instanceof Error?x.message:"Error desconocido")}finally{g(!1)}})},[r,t]),{responsibleData:a,responsiblesTable:o,loading:h,error:m}},GN=({dateRange:r})=>{const{responsibleData:t,responsiblesTable:a,loading:n,error:o}=QN(r),u=Td(),h=vo(),g=t.reduce((x,b)=>x+b.manufactured,0),m=a.reduce((x,b)=>x+b.totalPanels,0),p=new Set(t.map(x=>x.responsible)).size,y={totalSqmManufactured:g,responsibles:p,totalPanels:m};return l.jsxs("div",{className:"space-y-10",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"w-32"}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Manufacturing Analytics"}),l.jsx("p",{className:"text-gray-600 italic",children:"Detailed analysis of manufacturing operations and performance by responsible person"})]}),l.jsx("div",{className:"flex items-center space-x-3",children:l.jsxs("div",{className:"text-sm text-gray-500",children:[l.jsxs("div",{className:"text-base font-medium",children:["Last sync: ",u]}),l.jsxs("div",{className:"text-xs italic",children:["Next sync: ",h]})]})})]}),o&&l.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"text-red-400 mr-3",children:""}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading data"}),l.jsx("p",{className:"text-sm text-red-600 mt-1",children:o})]})]})}),l.jsx("div",{className:"space-y-4",children:l.jsx(Ed,{data:y,loading:n})}),l.jsx("div",{className:"flex items-center justify-center space-y-4",children:l.jsxs("div",{className:"relative group",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:"w-16 h-px bg-gradient-to-r from-transparent via-green-400 to-green-600 transform group-hover:scale-x-150 transition-all duration-500"}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-green-500 to-green-700 rounded-full flex items-center justify-center shadow-lg group-hover:shadow-xl group-hover:scale-110 transition-all duration-300",children:l.jsx("span",{className:"text-white text-sm font-bold",children:""})}),l.jsx("div",{className:"absolute -inset-2 bg-green-200 rounded-full opacity-0 group-hover:opacity-30 group-hover:animate-ping transition-all duration-300"})]}),l.jsx("div",{className:"w-16 h-px bg-gradient-to-l from-transparent via-green-400 to-green-600 transform group-hover:scale-x-150 transition-all duration-500"})]}),l.jsx("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-all duration-300",children:l.jsx("span",{className:"text-xs font-medium text-green-600 bg-white px-2 py-1 rounded-full shadow-sm",children:"Charts"})})]})}),l.jsx("div",{className:"space-y-4",children:l.jsx(VN,{data:t,title:"Daily Manufacturing",loading:n})}),l.jsx("div",{className:"flex items-center justify-center my-16",children:l.jsxs("div",{className:"relative group cursor-pointer",children:[l.jsxs("div",{className:"flex items-center space-x-6",children:[l.jsxs("div",{className:"flex space-x-1",children:[l.jsx("div",{className:"w-2 h-2 bg-blue-300 rounded-full group-hover:bg-blue-500 transition-colors duration-300"}),l.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full group-hover:bg-blue-600 transition-colors duration-300 delay-75"}),l.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full group-hover:bg-blue-700 transition-colors duration-300 delay-150"}),l.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full group-hover:bg-blue-600 transition-colors duration-300 delay-75"}),l.jsx("div",{className:"w-2 h-2 bg-blue-300 rounded-full group-hover:bg-blue-500 transition-colors duration-300"})]}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-700 rounded-lg flex items-center justify-center shadow-lg group-hover:shadow-2xl group-hover:rotate-12 transition-all duration-300",children:l.jsx("span",{className:"text-white text-lg",children:""})}),l.jsx("div",{className:"absolute -inset-3 bg-blue-200 rounded-lg opacity-0 group-hover:opacity-20 group-hover:animate-pulse transition-all duration-300"})]}),l.jsxs("div",{className:"flex space-x-1",children:[l.jsx("div",{className:"w-2 h-2 bg-blue-300 rounded-full group-hover:bg-blue-500 transition-colors duration-300"}),l.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full group-hover:bg-blue-600 transition-colors duration-300 delay-75"}),l.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full group-hover:bg-blue-700 transition-colors duration-300 delay-150"}),l.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full group-hover:bg-blue-600 transition-colors duration-300 delay-75"}),l.jsx("div",{className:"w-2 h-2 bg-blue-300 rounded-full group-hover:bg-blue-500 transition-colors duration-300"})]})]}),l.jsx("div",{className:"absolute -top-10 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-all duration-300",children:l.jsx("div",{className:"bg-blue-600 text-white text-xs font-medium px-3 py-1 rounded-full shadow-lg",children:"Performance"})})]})}),l.jsx("div",{className:"space-y-4",children:l.jsx(y0,{data:a,title:"Performance by Responsible Person",loading:n})})]})},Ku=r=>{const t=r.getFullYear(),a=String(r.getMonth()+1).padStart(2,"0"),n=String(r.getDate()).padStart(2,"0");return`${t}-${a}-${n}`},FN=()=>{const r=k.useCallback(Ku,[]),[t,a]=k.useState(()=>{const u=new Date,h=new Date(u);return h.setDate(u.getDate()-29),{startDate:Ku(h),endDate:Ku(u)}}),n=k.useCallback(u=>{a(u)},[]),o=k.useCallback(u=>{const h=new Date,g=new Date(h);switch(u){case"today":a({startDate:r(h),endDate:r(h)});return;case"thisWeek":{const m=h.getDay(),p=m===0?6:m-1;g.setDate(h.getDate()-p);break}case"7d":g.setDate(h.getDate()-6);break;case"30d":g.setDate(h.getDate()-29);break;case"90d":g.setDate(h.getDate()-89);break;case"1y":g.setFullYear(h.getFullYear()-1);break}a({startDate:r(g),endDate:r(h)})},[r]);return{dateRange:t,setDateRange:n,setQuickRange:o,formatDate:r}},KN=(r,t)=>{const a=XN(r);WN(a,`${t}.csv`,"text/csv")},XN=r=>{const t=[];return t.push("=== FACTORY ANALYTICS REPORT ==="),t.push(`Generated: ${new Date(r.exportDate).toLocaleString("en-AU")}`),t.push(`Date Range: ${r.dateRange.start} to ${r.dateRange.end}`),t.push("Company: Cladding Creations"),t.push(""),t.push("=== MAIN METRICS ==="),t.push("Metric,Value,Unit"),t.push(`Total SQM Cut,${r.metrics.totalCutArea.toFixed(2)},SQM`),t.push(`Total SQM Manufactured,${r.metrics.totalManufacturedArea.toFixed(2)},SQM`),t.push(`Total Projects,${r.projects.length},units`),t.push(`Total Panels,${r.metrics.totalPanels},units`),t.push(""),r.projects&&r.projects.length>0&&(t.push("=== PROJECTS SUMMARY ==="),t.push("Project Number,Project Name,PM,Supervisor,Status,Real Total Cut SQM,Expected Total SQM,Progress %,Allowed SQM to Buy,Start Date,Expected Date,Finalization Date,SQM Cut,SQM Manufactured,Total Panels"),r.projects.forEach(a=>{t.push([`"${a.projectNumber}"`,`"${a.projectName}"`,`"${a.pm}"`,`"${a.supervisor}"`,`"${a.status}"`,a.realTotalCutSqm.toFixed(2),a.expectedTotalSqm.toFixed(2),a.progressPercentage,a.allowedSqmToBuy.toFixed(2),a.startDate,a.expectedDate,a.finalizationDate,a.cutSqm.toFixed(2),a.manufacturedSqm.toFixed(2),a.totalPanels].join(","))}),t.push("")),r.chartData&&r.chartData.length>0&&(t.push("=== DAILY PRODUCTIVITY ==="),t.push("Date,SQM Cut,SQM Manufactured"),r.chartData.forEach(a=>{t.push([a.date,a.cutArea.toFixed(2),a.manufacturedArea.toFixed(2)].join(","))})),t.join(`
`)},WN=(r,t,a)=>{const n=new Blob([r],{type:a}),o=URL.createObjectURL(n),u=document.createElement("a");u.href=o,u.download=t,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(o)},JN=(r,t,a)=>`${r}_${t}_to_${a}`,ZN=()=>({exportData:k.useCallback(t=>{if(!t.mainMetrics||!t.projects||!t.chartData){console.error("Missing data for export");return}const a={metrics:{totalCutArea:t.mainMetrics.total_sqm_cut,totalManufacturedArea:t.mainMetrics.total_sqm_manufactured,totalPanels:t.projects.reduce((o,u)=>o+(u.total_panels||0),0)},projects:t.projects.map(o=>{var u;return{projectNumber:((u=o.project_number)==null?void 0:u.toString())||"N/A",projectName:o.project_name,pm:o.pm||"N/A",supervisor:o.site_supervisor||"N/A",status:o.status||"N/A",realTotalCutSqm:o.real_cut_square_meters||0,expectedTotalSqm:o.expected_square_meters||0,progressPercentage:Math.round(o.progress_percentage||0),allowedSqmToBuy:o.allowed_sqm_to_buy||0,startDate:o.project_start_date||"",expectedDate:o.expected_completion_date||"",finalizationDate:o.finalization_date||"",cutSqm:o.total_sqm_cut||0,manufacturedSqm:o.total_sqm_manufactured||0,totalPanels:o.total_panels||0}}),chartData:t.chartData.map(o=>({date:o.date,cutArea:o.cut,manufacturedArea:o.manufactured})),exportDate:new Date().toISOString(),dateRange:{start:t.dateRange.startDate,end:t.dateRange.endDate}},n=JN("CC_Analytics_Report",t.dateRange.startDate,t.dateRange.endDate);KN(a,n)},[])}),e1=r=>{const{mainMetrics:t,projects:a,chartData:n}=p0(r),{exportData:o}=ZN();return{handleExportCSV:k.useCallback(()=>{t&&a&&n&&o({mainMetrics:t,projects:a,chartData:n,dateRange:r})},[t,a,n,r,o]),canExport:!!(t&&a&&n)}},t1=({currentView:r,onViewChange:t,isOpen:a,onToggle:n})=>{const[o,u]=k.useState(!1);return k.useEffect(()=>{const h=setTimeout(()=>{u(!0),setTimeout(()=>{u(!1)},2e3)},1e3);return()=>clearTimeout(h)},[]),l.jsx(NN,{currentView:r,onViewChange:t,isOpen:a,onToggle:n,showHintAnimation:o})},a1=()=>{const[r,t]=k.useState("analytics"),[a,n]=k.useState(!1),{dateRange:o,setDateRange:u,setQuickRange:h}=FN(),{handleExportCSV:g,canExport:m}=e1(o);Oi("CC Analytics Dashboard"),k.useEffect(()=>{const x=setTimeout(()=>{n(!0)},1e3);return()=>clearTimeout(x)},[]);const p=k.useCallback(()=>{switch(r){case"analytics":return l.jsx(sp,{dateRange:o});case"cut-process":return l.jsx(YN,{dateRange:o});case"manufacturing":return l.jsx(GN,{dateRange:o});default:return l.jsx(sp,{dateRange:o})}},[r,o]),y=k.useCallback(()=>{n(!a)},[a]);return l.jsxs("div",{className:"flex h-screen bg-gray-50",children:[l.jsx(t1,{currentView:r,onViewChange:t,isOpen:a,onToggle:y}),l.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden transition-all duration-300",children:[l.jsx(EN,{dateRange:o,onDateRangeChange:u,onQuickRangeChange:h,onExportCSV:g,canExport:m}),l.jsx("main",{className:"flex-1 overflow-auto p-8",children:l.jsx(SN,{children:p()})}),l.jsx("footer",{className:"bg-white border-t border-gray-200 px-8 py-6 sticky bottom-0",children:l.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[l.jsx("div",{className:"w-16 h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent"}),l.jsx("div",{className:"flex items-center space-x-3",children:l.jsx("img",{src:Cd(),alt:"CC Logo",className:"h-10 w-auto"})}),l.jsx("div",{className:"w-16 h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent"}),l.jsx("div",{className:"text-center",children:l.jsxs("div",{className:"text-sm text-gray-500 mb-1",children:["Developed by"," ",l.jsx("a",{href:"https://www.gjouglard.com.ar",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 hover:underline transition-colors duration-200 font-medium",children:"GJ"})]})}),l.jsx("div",{className:"w-16 h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent"})]})})]})]})},s1=()=>{const{data:r,isLoading:t}=bd(),{data:a,isLoading:n}=Up();return k.useEffect(()=>{console.log(" Precargando datos en background...")},[]),k.useEffect(()=>{!t&&!n&&(console.log(" Datos precargados exitosamente"),console.log(` ${(a==null?void 0:a.length)||0} proyectos cargados`),console.log(` ${(r==null?void 0:r.length)||0} items cargados`))},[t,n,a==null?void 0:a.length,r==null?void 0:r.length]),null},r1=({logoPath:r,menuItems:t})=>{const[a,n]=k.useState(!1),o=k.useRef(null),u=pp();k.useEffect(()=>{const m=p=>{o.current&&!o.current.contains(p.target)&&n(!1)};return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[]);const h=()=>{n(!a)},g=m=>{u(m),n(!1)};return l.jsxs("div",{className:"logo-menu-container",ref:o,children:[l.jsxs("div",{className:"logo-button",onClick:h,children:[l.jsx("img",{src:r,alt:"CC Logo",className:"logo-image"}),l.jsx("div",{className:`menu-arrow ${a?"open":""}`,children:""})]}),a&&l.jsxs("div",{className:"menu-dropdown",children:[l.jsx("div",{className:"menu-header",children:l.jsx("span",{children:"Other Functions"})}),l.jsx("div",{className:"menu-items",children:t.map(m=>l.jsxs("button",{className:"menu-item",onClick:()=>g(m.path),children:[m.icon&&l.jsx("span",{className:"menu-item-icon",children:m.icon}),l.jsx("span",{className:"menu-item-label",children:m.label})]},m.id))})]})]})},rp={"/":{name:"main",animationDuration:4e3,showDataPreloader:!0,loadingText:"Loading projects...",showHeader:!0},"/order-delivery":{name:"order-delivery",animationDuration:1200,showDataPreloader:!1,loadingText:"Loading...",showHeader:!1},"/analytics":{name:"analytics",animationDuration:1200,showDataPreloader:!1,loadingText:"Loading CC Analytics...",showHeader:!1},"/login":{name:"login",animationDuration:0,showDataPreloader:!1,loadingText:"",showHeader:!1},"/creator-of-orders":{name:"creator-of-orders",animationDuration:1200,showDataPreloader:!1,loadingText:"Loading...",showHeader:!1}},n1=r=>rp[r]||rp["/"],v0=k.createContext(void 0),i1=({children:r})=>{const[t,a]=k.useState(null),[n,o]=k.useState(null),[u,h]=k.useState(!0);k.useEffect(()=>{ma.auth.getSession().then(({data:{session:b}})=>{var j;o(b),a((j=b==null?void 0:b.user)!=null?j:null),h(!1)});const{data:{subscription:x}}=ma.auth.onAuthStateChange((b,j)=>{var N;o(j),a((N=j==null?void 0:j.user)!=null?N:null),h(!1)});return()=>x.unsubscribe()},[]);const y={user:t,session:n,loading:u,sendOtp:x=>S(null,null,function*(){const{error:b}=yield ma.auth.signInWithOtp({email:x,options:{shouldCreateUser:!0}});return{error:b}}),verifyOtp:(x,b)=>S(null,null,function*(){const{data:j,error:N}=yield ma.auth.verifyOtp({email:x,token:b,type:"email"});return{data:j,error:N}}),signOut:()=>S(null,null,function*(){yield ma.auth.signOut(),a(null),o(null)})};return l.jsx(v0.Provider,{value:y,children:r})},bo=()=>{const r=k.useContext(v0);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r},l1=()=>{const[r,t]=k.useState(""),[a,n]=k.useState(""),[o,u]=k.useState("email"),[h,g]=k.useState(!1),[m,p]=k.useState(null),{sendOtp:y,verifyOtp:x,user:b}=bo(),j=pp(),N=()=>window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?"/CC-logo-NEW_1.webp":"/CC_Flow_summary_report/CC-logo-NEW_1.webp",E=()=>window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?"/Cladding-Creations-Showcase.jpeg":"/CC_Flow_summary_report/Cladding-Creations-Showcase.jpeg";Oi("CC Login"),k.useEffect(()=>{if(b){const q=new URLSearchParams(window.location.search).get("from")||"/creator-of-orders";j(q,{replace:!0})}},[b,j]);const A=q=>S(null,null,function*(){if(q.preventDefault(),g(!0),p(null),!r||!r.includes("@")){p({type:"error",text:"Please enter a valid email"}),g(!1);return}try{const{error:X}=yield y(r);X?p({type:"error",text:X.message||"Error sending code"}):(p({type:"success",text:"Check your email for the 6-digit code."}),u("code"))}catch(X){p({type:"error",text:"An unexpected error occurred. Please try again."})}finally{g(!1)}}),B=q=>S(null,null,function*(){if(q.preventDefault(),g(!0),p(null),!a||a.length!==6){p({type:"error",text:"Please enter the 6-digit code"}),g(!1);return}try{const{error:X}=yield x(r,a);if(X)p({type:"error",text:X.message||"Invalid code. Please try again."}),n("");else{const te=new URLSearchParams(window.location.search).get("from")||"/creator-of-orders";j(te,{replace:!0})}}catch(X){p({type:"error",text:"An unexpected error occurred. Please try again."}),n("")}finally{g(!1)}}),U=()=>{u("email"),n(""),p(null)};return l.jsxs("div",{className:"login-container",children:[l.jsxs("div",{className:"login-image-section",children:[l.jsx("img",{src:E(),alt:"Cladding Creations",className:"login-showcase-image"}),l.jsx("div",{className:"login-image-overlay"})]}),l.jsx("div",{className:"login-form-section",children:l.jsxs("div",{className:"login-content",children:[l.jsx("div",{className:"login-logo",children:l.jsx("img",{src:N(),alt:"CC Logo"})}),l.jsxs("div",{className:"login-header",children:[l.jsx("h1",{children:"Welcome"}),l.jsx("p",{children:o==="email"?"Enter your email to receive a login code. Can use your Cladding Creations email address.":"Enter the 6-digit code sent to your email"})]}),o==="email"?l.jsxs("form",{onSubmit:A,className:"login-form",children:[l.jsx("div",{className:"form-group",children:l.jsx("input",{id:"email",type:"email",value:r,onChange:q=>t(q.target.value),placeholder:"your-email@claddingcreations.com.au",required:!0,disabled:h,autoComplete:"email"})}),m&&l.jsx("div",{className:`message ${m.type}`,children:m.text}),l.jsx("button",{type:"submit",className:"login-button",disabled:h,children:h?"Sending...":"Send Code"})]}):l.jsxs("form",{onSubmit:B,className:"login-form",children:[l.jsx("div",{className:"form-group",children:l.jsx("input",{id:"code",type:"text",value:a,onChange:q=>{const X=q.target.value.replace(/\D/g,"").slice(0,6);n(X)},placeholder:"000000",required:!0,disabled:h,autoComplete:"one-time-code",maxLength:6,className:"code-input"})}),m&&l.jsx("div",{className:`message ${m.type}`,children:m.text}),l.jsx("button",{type:"submit",className:"login-button",disabled:h||a.length!==6,children:h?"Verifying...":"Verify Code"}),l.jsx("button",{type:"button",onClick:U,className:"login-button-secondary",disabled:h,children:"Change Email"})]}),l.jsx("div",{className:"login-footer",children:l.jsx("p",{className:"help-text",children:o==="email"?"You will receive a 6-digit code in your email":`Code sent to ${r}`})})]})})]})},o1=({children:r})=>{const{user:t,loading:a}=bo(),n=yp();return a?l.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:l.jsx(Sa,{})}):t?l.jsx(l.Fragment,{children:r}):l.jsx(rb,{to:"/login",state:{from:n.pathname},replace:!0})},b0=k.createContext(void 0),c1=()=>new Date().toISOString().split("T")[0],np={project:"",orderId:"",status:"Ready to cut",responsable:"",expectedTo:c1(),priority:"Normal",selectedSheets:[],sheets:"",colour:"",ignoredSheetDimensions:[],panels:[],csvFile:null,orderComment:"",documents:[],selectedExistingDocuments:[]},ip={step1:{isValid:!1,errors:[]},step2:{isValid:!1,errors:[]},step3:{isValid:!1,errors:[]},step4:{isValid:!0,errors:[]},step5:{isValid:!1,errors:[]}};function u1({children:r}){const[t,a]=k.useState(1),[n,o]=k.useState(np),[u,h]=k.useState(ip),[g,m]=k.useState(!1),[p,y]=k.useState(null),[x,b]=k.useState(!1),[j,N]=k.useState(null),E=k.useCallback((z,ie)=>{const C=ie||n,_=[];switch(z){case 1:C.project||_.push("Project is required"),C.orderId?j===!1?_.push("Order ID already exists. Please use a different Order ID."):j===null&&C.orderId.trim().length>0&&_.push("Please wait while we verify the Order ID availability"):_.push("Order ID is required"),C.responsable||_.push("Responsable is required"),C.expectedTo||_.push("Expected to is required");break;case 2:C.panels.length===0?_.push("Must import at least one valid panel"):(C.panels.filter(le=>le.isDuplicate).length>0&&_.push("Please fix duplicate panel names in the CSV"),C.panels.filter(le=>le.existsInDatabase).length>0&&_.push("Some panel names already exist in the database. Please rename them."));break;case 3:if(C.selectedSheets.length===0)_.push("Must select at least one sheet");else{C.selectedSheets.filter(ge=>ge.qty<=0).length>0&&_.push("All selected sheets must have a quantity greater than 0"),C.selectedSheets.filter(ge=>!ge.colour||ge.colour.trim()==="").length>0&&_.push("All sheets must have a colour");const le=new Set(C.ignoredSheetDimensions||[]),he=new Set(C.panels.map(ge=>{var T;return(T=ge.sheetName)==null?void 0:T.trim()}).filter(Boolean).filter(ge=>!le.has(ge)));C.selectedSheets.length<he.size&&_.push("Please select a colour for every detected sheet size")}break;case 4:C.documents.length>0&&(C.documents.filter(le=>!le.name||le.name.trim()==="").length>0&&_.push("All documents must have a name"),C.documents.filter(le=>!le.category||le.category.trim()==="").length>0&&_.push("All documents must have a category"));break;case 5:C.project||_.push("Project is required"),C.orderId||_.push("Order ID is required"),C.selectedSheets.length===0&&_.push("Must select at least one sheet"),C.panels.length===0&&_.push("Must import at least one valid panel");break}const R=_.length===0;return h(F=>et(Ue({},F),{[`step${z}`]:{isValid:R,errors:_}})),R},[n,j]),A=k.useCallback(z=>{o(ie=>{const C=Ue(Ue({},ie),z);if(z.selectedSheets!==void 0)if(z.selectedSheets.length>0){const _=z.selectedSheets[0];C.colour=_.colour;const R=z.selectedSheets.map(F=>`${F.dimension} - ${F.colour}`);C.sheets=R.join(", ")}else C.colour="",C.sheets="";return C})},[]);k.useEffect(()=>{E(t,n)},[n,t,j,E]);const B=k.useCallback(()=>{E(t)&&t<5&&a(z=>z+1)},[t,E]),U=k.useCallback(()=>{t>1&&a(z=>z-1)},[t]),q=k.useCallback(z=>{z>=1&&z<=5&&a(z)},[]),X=k.useCallback(()=>{a(1),o(np),h(ip),m(!1),y(null),b(!1),N(null)},[]),te={currentStep:t,formData:n,validation:u,isLoading:g,error:p,success:x,orderIdIsValid:j,updateFormData:A,validateStep:E,nextStep:B,previousStep:U,goToStep:q,resetWizard:X,setLoading:m,setError:y,setSuccess:b,setOrderIdIsValid:N};return l.jsx(b0.Provider,{value:te,children:r})}function Ua(){const r=k.useContext(b0);if(r===void 0)throw new Error("useWizard must be used within a WizardProvider");return r}const lp=[{number:1,label:"Order Information"},{number:2,label:"Panels Import"},{number:3,label:"Sheets Selection"},{number:4,label:"Upload Documents"},{number:5,label:"Review & Create"}];function d1(){const{currentStep:r}=Ua();return l.jsx("div",{className:"wizard-progress",children:lp.map((t,a)=>l.jsxs("div",{className:"wizard-progress-item",children:[a>0&&l.jsx("div",{className:"wizard-progress-line-before",children:l.jsx("div",{className:`wizard-progress-line-fill ${r>=t.number?"completed":""}`})}),l.jsxs("div",{className:`wizard-progress-step ${r===t.number?"active":r>t.number?"completed":"pending"}`,children:[l.jsx("div",{className:"wizard-progress-step-number",children:t.number}),l.jsx("div",{className:"wizard-progress-step-label",children:t.label})]}),a<lp.length-1&&l.jsx("div",{className:"wizard-progress-line-after",children:l.jsx("div",{className:`wizard-progress-line-fill ${r>t.number?"completed":""}`})})]},t.number))})}function h1(){var b,j;const{currentStep:r,previousStep:t,nextStep:a,validateStep:n,isLoading:o,validation:u}=Ua(),h=()=>{n(r)&&a()},g=()=>{t()},m=r===1,p=r===5,y=(j=(b=u[`step${r}`])==null?void 0:b.isValid)!=null?j:!1,x=o||!y;return l.jsxs("div",{className:"wizard-navigation",children:[l.jsx("button",{type:"button",onClick:g,disabled:m||o,className:"wizard-nav-button wizard-nav-button-prev",children:"Previous"}),p?null:l.jsx("button",{type:"button",onClick:h,disabled:x,className:"wizard-nav-button wizard-nav-button-next",children:"Next"})]})}function f1(r){const{data:t,isLoading:a,error:n}=ta({queryKey:["lastOrder",r],queryFn:()=>S(null,null,function*(){var h;if(!r)return null;const u=yield Yt.getOrdersCutByProject(r);return u.length===0?null:((h=u[0])==null?void 0:h["Order ID"])||null}),enabled:!!r,staleTime:3e5}),o=t?m1(t):"";return{lastOrderId:t||"",nextOrderId:o,isLoading:a,error:n}}function m1(r){const t=r.match(/(\d+)$/);if(t){const a=parseInt(t[1],10),n=r.substring(0,r.length-t[1].length),o=a+1,u=t[1].length;return`${n}${o.toString().padStart(u,"0")}`}return`${r}-1`}function g1(r,t=500){const[a,n]=k.useState(r);k.useEffect(()=>{const g=setTimeout(()=>{n(r)},t);return()=>clearTimeout(g)},[r,t]);const{data:o,isLoading:u}=ta({queryKey:["orderIdValidation",a],queryFn:()=>S(null,null,function*(){return!a||!a.trim()?null:yield Yt.checkOrderIdExists(a)}),enabled:!!a&&a.trim().length>0,staleTime:2*60*1e3,retry:!1});return{isValid:a.trim().length===0||o===null?null:!o,isChecking:u&&a.trim().length>0}}const op=new Ds,p1=[{value:"Ready to cut",label:"Ready to cut",icon:""},{value:"cutting",label:"Cutting",icon:""},{value:"manufacturing",label:"Manufacturing",icon:""},{value:"delivering",label:"Delivering",icon:""},{value:"delivered",label:"Delivered",icon:""}],y1=[{value:"Normal",label:"Normal",color:"#48bb78",bgColor:"#c6f6d5"},{value:"High",label:"High",color:"#d69e2e",bgColor:"#fefcbf"},{value:"Urgent",label:"Urgent",color:"#e53e3e",bgColor:"#fed7d7"}],v1=r=>{if(!r)return"N/A";try{const t=new Date(r);if(isNaN(t.getTime()))return r;const a=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0"),o=t.getFullYear();return`${a}/${n}/${o}`}catch(t){return r}},b1=r=>r<50?"#48bb78":r<90?"#ecc94b":"#e53e3e";function cp(){var ge;const{formData:r,updateFormData:t,validation:a}=Ua(),{user:n}=bo(),[o,u]=k.useState(!1),h=Pv(),[g,m]=k.useState(""),[p,y]=k.useState(!1),[x,b]=k.useState(!1),{data:j,isLoading:N}=ta({queryKey:["projects"],queryFn:()=>op.getAllProjects(),staleTime:15*60*1e3}),E=k.useMemo(()=>!r.project||!j?null:j.find(T=>T.Name===r.project)||null,[r.project,j]),{data:A,isLoading:B}=ta({queryKey:["orders-by-project",r.project],queryFn:()=>Yt.getOrdersCutByProject(r.project||""),enabled:!!r.project,staleTime:5*60*1e3}),U=k.useMemo(()=>{if(!j)return[];if(!g.trim())return j;const T=g.toLowerCase().trim();return j.filter(Q=>{var ae,ne,se;const J=(ae=Q.Name)==null?void 0:ae.toLowerCase().includes(T),D=(ne=Q.Number)==null?void 0:ne.toString().includes(T),G=(se=Q.PM)==null?void 0:se.toLowerCase().includes(T);return J||D||G})},[j,g]);k.useEffect(()=>{E!=null&&E.Name&&m(E.Name)},[E]);const q=k.useMemo(()=>{if(!E)return null;const T=Number(E["Expected Square Meters"])||0,Q=Number(E["Real Cut Square Meters"])||0;if(T===0)return null;const J=T,D=J>0?Q/J*100:0;return{expected:T,realCut:Q,reference:J,percentage:Math.min(D,100),actualPercentage:D,color:b1(Q>0&&T>0?Q/T*100:0),hasRealCut:Q>0}},[E]),{nextOrderId:X,isLoading:te}=f1(r.project||null),{isValid:z,isChecking:ie}=g1(r.orderId,500),{setOrderIdIsValid:C}=Ua();k.useEffect(()=>{C(z)},[z,C]),k.useEffect(()=>{(!r.orderId||r.orderId.trim().length===0)&&C(null)},[r.orderId,C]),k.useEffect(()=>{if(n!=null&&n.email&&!r.responsable){const T=n.email.split("@")[0].charAt(0).toUpperCase()+n.email.split("@")[0].slice(1);t({responsable:T})}},[n==null?void 0:n.email,r.responsable,t]),k.useEffect(()=>{r.project&&X&&!x?t({orderId:X}):r.project||(t({orderId:""}),b(!1))},[r.project,X,t,x]),k.useEffect(()=>{b(!1)},[r.project]);const _=k.useCallback(()=>S(null,null,function*(){u(!0);try{const T=yield op.getAllProjects({forceAppSheet:!0});h.setQueryData(["projects"],T),console.log(" Sync completed - data refreshed from AppSheet")}catch(T){console.error("Error syncing from AppSheet:",T)}finally{u(!1)}}),[h]),R=(T,Q)=>{t({[T]:Q}),T==="orderId"&&b(!0)},F=T=>{t({project:T}),m(T),y(!1)},K=T=>{m(T),y(!0),T.trim()||t({project:""})},le=T=>{t({priority:T})},he=a.step1;return N?l.jsxs("div",{className:"step-container step-loading",children:[l.jsx(Sa,{}),l.jsx("p",{children:"Loading projects..."})]}):l.jsxs("div",{className:"step-container step1-order",children:[l.jsx("h2",{className:"step-title",children:"Order Information"}),l.jsx("p",{className:"step-description",children:"Complete the basic information for the cutting order"}),l.jsxs("div",{className:"step1-layout",children:[l.jsxs("div",{className:"step1-form-column",children:[l.jsxs("div",{className:"form-row-compact",children:[l.jsxs("div",{className:"form-group form-group-large",children:[l.jsx("label",{htmlFor:"project",className:"form-label required",children:"Project"}),l.jsxs("div",{className:"project-search-container",children:[l.jsx("input",{id:"project",type:"text",value:g,onChange:T=>K(T.target.value),onFocus:()=>y(!0),onBlur:()=>{setTimeout(()=>y(!1),200)},className:`form-input project-search-input ${he.errors.includes("The project is required")?"error":""}`,placeholder:"Search project by name, number, or PM...",autoComplete:"off"}),p&&U.length>0&&l.jsxs("div",{className:"project-dropdown",children:[U.slice(0,10).map(T=>l.jsxs("div",{className:`project-dropdown-item ${r.project===T.Name?"selected":""}`,onMouseDown:Q=>{Q.preventDefault(),F(T.Name)},children:[l.jsxs("div",{className:"project-dropdown-name",children:[T.Name,T.Number&&l.jsxs("span",{className:"project-dropdown-number",children:["#",T.Number]})]}),T.PM&&l.jsxs("div",{className:"project-dropdown-pm",children:["PM: ",T.PM]})]},T.Name)),U.length>10&&l.jsxs("div",{className:"project-dropdown-footer",children:["Showing 10 of ",U.length," projects"]})]}),p&&g.trim()&&U.length===0&&l.jsx("div",{className:"project-dropdown",children:l.jsx("div",{className:"project-dropdown-empty",children:"No projects found"})})]}),he.errors.includes("The project is required")&&l.jsx("span",{className:"form-error",children:"The project is required"})]}),l.jsxs("div",{className:"form-group form-group-small",children:[l.jsxs("label",{htmlFor:"orderId",className:"form-label required",children:[l.jsx("span",{className:"label-icon",children:""}),"Order ID"]}),l.jsxs("div",{className:"input-with-validation",children:[l.jsx("input",{id:"orderId",type:"text",value:r.orderId,onChange:T=>R("orderId",T.target.value),className:`form-input input-centered ${he.errors.includes("The Order ID is required")?"error":z===!0?"valid":""}`,placeholder:te?"...":"Auto",disabled:te}),te&&l.jsx("span",{className:"input-loading",children:""}),!te&&ie&&l.jsx("span",{className:"input-validation-icon checking",title:"Checking availability...",children:""}),!te&&!ie&&z===!0&&l.jsx("span",{className:"input-validation-icon valid",title:"Order ID is available",children:""}),!te&&!ie&&z===!1&&l.jsx("span",{className:"input-validation-icon invalid",title:"Order ID already exists",children:""})]}),he.errors.includes("The Order ID is required")&&l.jsx("span",{className:"form-error",children:"Required"}),he.errors.includes("Order ID already exists. Please use a different Order ID.")&&l.jsx("span",{className:"form-error",children:"This Order ID already exists."}),he.errors.includes("Please wait while we verify the Order ID availability")&&l.jsx("span",{className:"form-error",children:"Please wait while we verify the Order ID availability"}),z===!1&&!he.errors.some(T=>T.includes("Order ID already exists"))&&l.jsx("span",{className:"form-error",children:"This Order ID already exists"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"status",className:"form-label required",children:"Status"}),l.jsx("select",{id:"status",value:r.status,onChange:T=>R("status",T.target.value),className:"form-select select-centered",children:p1.map(T=>l.jsxs("option",{value:T.value,children:[T.icon," ",T.label]},T.value))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"responsable",className:"form-label required",children:"Responsable"}),l.jsx("input",{id:"responsable",type:"text",value:r.responsable,onChange:T=>R("responsable",T.target.value),className:`form-input ${he.errors.includes("The responsible is required")?"error":""}`,placeholder:"Enter responsable name"}),he.errors.includes("The responsible is required")&&l.jsx("span",{className:"form-error",children:"The responsible is required"})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{className:"form-label required",children:[l.jsx("span",{className:"label-icon",children:""}),"Priority"]}),l.jsx("div",{className:"priority-toggle-group",children:y1.map(T=>l.jsxs("button",{type:"button",className:`priority-toggle-btn priority-${T.value.toLowerCase()} ${r.priority===T.value?"selected":""}`,onClick:()=>le(T.value),style:{"--priority-color":T.color,"--priority-bg":T.bgColor},children:[T.value==="Urgent"?"":T.value==="High"?"":"",l.jsx("span",{children:T.label})]},T.value))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"expectedTo",className:"form-label required",children:"Expected to"}),l.jsx("input",{id:"expectedTo",type:"date",value:r.expectedTo,onChange:T=>R("expectedTo",T.target.value),className:`form-input input-centered ${he.errors.includes("The expected date is required")?"error":""}`,min:new Date().toISOString().split("T")[0]}),he.errors.includes("The expected date is required")&&l.jsx("span",{className:"form-error",children:"The expected date is required"})]})]}),l.jsx("div",{className:"step1-info-column",children:E?l.jsxs("div",{className:"project-info-card",children:[l.jsxs("div",{className:"project-info-header",children:[l.jsxs("h3",{className:"project-info-title",children:[l.jsx("span",{className:"info-icon",children:""}),"Project Information"]}),l.jsx("span",{className:`header-status-badge status-${(ge=E.Status)==null?void 0:ge.toLowerCase().replace(/\s+/g,"-")}`,children:E.Status||"N/A"})]}),q&&l.jsxs("div",{className:"project-progress-section",children:[l.jsxs("div",{className:"progress-header",children:[l.jsx("span",{className:"progress-label",children:"Cutting Progress"}),q.hasRealCut&&l.jsxs("span",{className:"progress-percentage",style:{color:q.color},children:[q.actualPercentage.toFixed(1),"%"]})]}),l.jsx("div",{className:"progress-bar-container",children:l.jsx("div",{className:"progress-bar-fill",style:{width:`${q.percentage}%`,backgroundColor:q.color}})}),l.jsxs("div",{className:"progress-stats",children:[l.jsxs("div",{className:"progress-stat-row",children:[l.jsx("span",{className:"stat-label",children:"Real Cut:"}),l.jsxs("span",{className:"stat-value-with-sync",children:[l.jsx("span",{className:"stat-value",style:{color:q.hasRealCut?q.color:"#a0aec0"},children:q.hasRealCut?`${q.realCut.toFixed(2)} m`:"No data"}),l.jsx("button",{type:"button",className:`sync-btn ${o?"syncing":""}`,onClick:_,disabled:o,title:"Sync data from AppSheet",children:o?"":""})]})]}),l.jsxs("div",{className:"progress-stat-row",children:[l.jsx("span",{className:"stat-label",children:"Expected:"}),l.jsxs("span",{className:"stat-value",children:[q.expected.toLocaleString()," m"]})]})]})]}),l.jsxs("div",{className:"project-info-grid",children:[l.jsxs("div",{className:"info-item",children:[l.jsx("span",{className:"info-label",children:"Project Manager"}),l.jsx("span",{className:"info-value",children:E.PM||"N/A"})]}),l.jsxs("div",{className:"info-item",children:[l.jsx("span",{className:"info-label",children:"Site Supervisor"}),l.jsx("span",{className:"info-value",children:E["Site Supervisor"]||"N/A"})]}),E["Total Orders"]!==void 0&&Number(E["Total Orders"])>0&&l.jsxs("div",{className:"info-item",children:[l.jsx("span",{className:"info-label",children:"Total Orders"}),l.jsx("span",{className:"info-value highlight",children:E["Total Orders"]})]})]}),l.jsxs("div",{className:"project-orders-section",children:[l.jsxs("h4",{className:"orders-section-title",children:[l.jsx("span",{className:"orders-icon",children:""}),"Project Orders",A&&A.length>0&&l.jsxs("span",{className:"orders-count",children:["(",A.length,")"]})]}),B?l.jsxs("div",{className:"orders-loading",children:[l.jsx(Sa,{}),l.jsx("span",{children:"Loading orders..."})]}):A&&A.length>0?l.jsxs("div",{className:"orders-list",children:[A.sort((T,Q)=>{const J=new Date(T["Creation Date"]||0);return new Date(Q["Creation Date"]||0).getTime()-J.getTime()}).slice(0,10).map(T=>{var Q;return l.jsxs("div",{className:`order-item ${T["Order ID"]===r.orderId?"current-order":""}`,children:[l.jsxs("div",{className:"order-item-header",children:[l.jsx("span",{className:"order-id",children:T["Order ID"]}),l.jsx("span",{className:`order-status status-${(Q=T.Status)==null?void 0:Q.toLowerCase().replace(/\s+/g,"-")}`,children:T.Status||"N/A"})]}),l.jsxs("div",{className:"order-item-details",children:[T.Priority&&l.jsx("span",{className:`order-priority priority-${T.Priority.toLowerCase()}`,children:T.Priority}),T.Colour&&l.jsxs("span",{className:"order-colour",children:["Colour: ",T.Colour]}),T["Creation Date"]&&l.jsxs("span",{className:"order-date",children:["Created: ",v1(T["Creation Date"])]}),T.Responsable&&l.jsxs("span",{className:"order-responsable",children:["Responsable: ",T.Responsable]})]})]},T["Order ID"])}),A.length>10&&l.jsxs("div",{className:"orders-footer",children:["Showing 10 of ",A.length," orders"]})]}):l.jsx("div",{className:"orders-empty",children:l.jsx("p",{children:"No orders found for this project"})})]})]}):l.jsxs("div",{className:"project-info-placeholder",children:[l.jsx("span",{className:"placeholder-icon",children:""}),l.jsx("p",{children:"Select a project to view its information"})]})})]}),he.errors.length>0&&l.jsxs("div",{className:"step-validation-errors",children:[l.jsx("p",{className:"validation-title",children:"Please correct the following errors:"}),l.jsx("ul",{children:he.errors.map((T,Q)=>l.jsx("li",{children:T},Q))})]})]})}const x1=new Ds,w1=r=>r.length===0?null:r.reduce((t,a)=>{const n=Number(t["Quantity in Factory"])||0;return(Number(a["Quantity in Factory"])||0)>n?a:t},r[0]);function j1(){const{formData:r,updateFormData:t,validation:a}=Ua(),[n,o]=k.useState("all"),[u,h]=k.useState("all"),[g,m]=k.useState("all"),[p,y]=k.useState(null),x=k.useMemo(()=>new Set(r.ignoredSheetDimensions||[]),[r.ignoredSheetDimensions]),{data:b,isLoading:j}=ta({queryKey:["sheets-by-project",r.project],queryFn:()=>x1.getSheetsByProject(r.project||""),enabled:!!r.project,staleTime:0}),N=k.useMemo(()=>{const D=new Map;return r.panels.forEach(G=>{var se,me,ce,_e,L;const ae=(se=G.sheetName)==null?void 0:se.trim();if(!ae)return;const ne=(me=G.nestNumber)==null?void 0:me.trim();D.has(ae)||D.set(ae,new Set),ne?(ce=D.get(ae))==null||ce.add(ne):(L=D.get(ae))==null||L.add(`${G.name}-${((_e=D.get(ae))==null?void 0:_e.size)||0}`)}),Array.from(D.entries()).map(([G,ae])=>({dimension:G,qty:ae.size})).sort((G,ae)=>G.dimension.localeCompare(ae.dimension))},[r.panels]),E=k.useMemo(()=>N.filter(D=>!x.has(D.dimension)),[N,x]),A=k.useMemo(()=>{const D=new Map;return b&&b.forEach(G=>{var ae;G.Dimension&&(D.has(G.Dimension)||D.set(G.Dimension,[]),(ae=D.get(G.Dimension))==null||ae.push(G))}),D},[b]),B=k.useMemo(()=>E.map(D=>{const G=A.get(D.dimension)||[];if(G.length===0)return null;const ae=w1(G);return ae?{dimension:D.dimension,sheet:ae,qty:D.qty,isSuggested:G.length>1}:null}).filter(Boolean),[E,A]);k.useEffect(()=>{if(E.length===0)return;const D=[],G=new Set(E.map(ce=>ce.dimension)),ae=new Map(B.map(ce=>[ce.dimension,ce]));E.forEach(ce=>{const _e=r.selectedSheets.find(V=>V.dimension===ce.dimension);if(_e){D.push(et(Ue({},_e),{qty:_e.qty>0?_e.qty:ce.qty}));return}const L=ae.get(ce.dimension);if(L){const V=L.sheet;D.push({sheetId:V["Sheet ID"],dimension:V.Dimension||ce.dimension,colour:V.Colour||"",qty:L.qty,sheetData:V})}});const ne=r.selectedSheets.filter(ce=>!G.has(ce.dimension));D.push(...ne);const se=r.selectedSheets.map(ce=>({sheetId:ce.sheetId,dimension:ce.dimension,colour:ce.colour,qty:ce.qty})),me=D.map(ce=>({sheetId:ce.sheetId,dimension:ce.dimension,colour:ce.colour,qty:ce.qty}));JSON.stringify(se)!==JSON.stringify(me)&&t({selectedSheets:D})},[E,A,B,r.selectedSheets,t]),k.useEffect(()=>{var ae;if(!((ae=r.ignoredSheetDimensions)!=null&&ae.length))return;const D=new Set(N.map(ne=>ne.dimension)),G=r.ignoredSheetDimensions.filter(ne=>D.has(ne));G.length!==r.ignoredSheetDimensions.length&&t({ignoredSheetDimensions:G})},[N,r.ignoredSheetDimensions,t]);const U=k.useMemo(()=>{if(!b)return[];const D=new Set(b.map(G=>G.Dimension).filter(Boolean));return Array.from(D).sort()},[b]),q=k.useMemo(()=>{if(!b)return[];const D=new Set(b.map(G=>G.Colour).filter(Boolean));return Array.from(D).sort()},[b]),X=k.useMemo(()=>b?b.filter(D=>{if(n!=="all"){const G=D["Off Cut"]===!0||D["Off Cut"]==="true"||D["Off Cut"]==="Yes";if(n==="yes"&&!G||n==="no"&&G)return!1}return!(u!=="all"&&D.Dimension!==u||g!=="all"&&D.Colour!==g)}):[],[b,n,u,g]),te=k.useMemo(()=>{if(!X.length)return[];const D=[],G=new Set;E.forEach(ne=>{const se=X.filter(ce=>ce.Dimension===ne.dimension);if(se.length===0)return;D.push({type:"header",key:`detected-${ne.dimension}`,label:`Detected - ${ne.dimension}`});const me=se.reduce((ce,_e)=>{const L=_e.Colour||"No Colour";return ce[L]||(ce[L]=[]),ce[L].push(_e),ce},{});Object.keys(me).sort().forEach(ce=>{D.push({type:"subheader",key:`detected-${ne.dimension}-${ce}`,label:ce}),me[ce].sort((L,V)=>V["Quantity in Factory"]-L["Quantity in Factory"]).forEach(L=>{D.push({type:"sheet",key:L["Sheet ID"],sheet:L}),G.add(L["Sheet ID"])})})});const ae=X.filter(ne=>!G.has(ne["Sheet ID"]));if(ae.length>0){D.push({type:"header",key:"other-sheets",label:"Other sheets"});const ne=ae.reduce((me,ce)=>{const L=ce["Off Cut"]===!0||ce["Off Cut"]==="true"||ce["Off Cut"]==="Yes"?"offcut":"regular";return me[L]||(me[L]=[]),me[L].push(ce),me},{}),se=(me,ce)=>{var L;const _e=((L=ne[me])==null?void 0:L.reduce((V,W)=>{const oe=W.Colour||"No Colour";return V[oe]||(V[oe]=[]),V[oe].push(W),V},{}))||{};Object.keys(_e).sort().forEach(V=>{D.push({type:"subheader",key:`${ce}-${V}`,label:`${ce} - ${V}`}),_e[V].sort((oe,de)=>de["Quantity in Factory"]-oe["Quantity in Factory"]).forEach(oe=>{D.push({type:"sheet",key:oe["Sheet ID"],sheet:oe})})})};se("regular","Regular"),se("offcut","Off Cut")}return D},[E,X]),z=D=>{const G=r.selectedSheets.findIndex(ne=>ne.sheetId===D["Sheet ID"]);let ae;if(G>=0)ae=r.selectedSheets.filter(ne=>ne.sheetId!==D["Sheet ID"]);else{const ne=N.find(se=>se.dimension===D.Dimension);ae=r.selectedSheets.filter(se=>se.dimension!==D.Dimension),ae.push({sheetId:D["Sheet ID"],dimension:D.Dimension||"",colour:D.Colour||"",qty:(ne==null?void 0:ne.qty)||1,sheetData:D})}t({selectedSheets:ae})},ie=(D,G)=>{const ae=r.selectedSheets.map(ne=>ne.sheetId===D?et(Ue({},ne),{qty:Math.max(1,G)}):ne);t({selectedSheets:ae})},C=D=>r.selectedSheets.some(G=>G.sheetId===D),_=D=>{const G=r.selectedSheets.find(ae=>ae.sheetId===D);return(G==null?void 0:G.qty)||0},R=(D,G)=>_(D)>G,F=E.filter(D=>!r.selectedSheets.some(G=>G.dimension===D.dimension)),K=k.useMemo(()=>new Set(E.map(D=>D.dimension)),[E]),le=k.useMemo(()=>new Set(B.filter(D=>D.isSuggested).map(D=>D.sheet["Sheet ID"])),[B]),he=k.useMemo(()=>E.map(D=>{const G=r.selectedSheets.find(ne=>ne.dimension===D.dimension),ae=B.find(ne=>ne.dimension===D.dimension);return{dimension:D.dimension,qty:D.qty,colour:(G==null?void 0:G.colour)||"",isSelected:!!G,isSuggested:!!G&&!!(ae!=null&&ae.isSuggested)&&(G==null?void 0:G.sheetId)===(ae==null?void 0:ae.sheet["Sheet ID"])}}),[E,r.selectedSheets,B]),ge=k.useMemo(()=>he.filter(D=>!D.isSelected),[he]),T=D=>{o("all"),m("all"),h(D),y(D)},Q=D=>{t({selectedSheets:r.selectedSheets.filter(G=>G.dimension!==D),ignoredSheetDimensions:Array.from(new Set([...r.ignoredSheetDimensions||[],D]))}),p===D&&(y(null),h("all"))},J=a.step3;return r.project?r.panels.length===0?l.jsx("div",{className:"step-container step-error",children:l.jsx("p",{children:"Please import panels in Step 2 first"})}):j?l.jsxs("div",{className:"step-container step-loading",children:[l.jsx(Sa,{}),l.jsx("p",{children:"Loading sheets..."})]}):l.jsxs("div",{className:"step-container step2-sheets",children:[l.jsx("h2",{className:"step-title",children:"Sheet Selection"}),l.jsx("p",{className:"step-description",children:"We detected the sheets from the nesting CSV. Please select the colour for each sheet size."}),ge.length>0&&l.jsxs("div",{className:"detected-sheets-banner",children:[l.jsx("div",{className:"detected-banner-header",children:l.jsxs("div",{children:[l.jsx("h3",{children:"Detected Sheets"}),l.jsx("p",{children:"Quickly focus the table by selecting a chip."})]})}),l.jsx("div",{className:"detected-chips",children:ge.map(D=>l.jsxs("div",{className:`detected-chip ${D.isSelected?"chip-selected":"chip-missing"} ${D.isSuggested?"chip-suggested":""}`,children:[l.jsx("button",{type:"button",className:"chip-remove","aria-label":`Remove ${D.dimension}`,onClick:()=>Q(D.dimension),children:""}),l.jsxs("div",{className:"chip-top",children:[l.jsx("span",{className:"chip-dimension",children:D.dimension}),l.jsxs("span",{className:"chip-qty",children:["qty ",D.qty]})]}),l.jsxs("div",{className:"chip-colour",children:[D.colour?D.colour:"colour ?",D.isSuggested&&l.jsx("span",{className:"chip-suggested-badge",children:"Suggested"})]}),l.jsx("button",{type:"button",className:"chip-action",onClick:()=>T(D.dimension),children:D.colour?"Change colour":"Select colour"})]},D.dimension))})]}),F.length>0&&l.jsxs("div",{className:"sheet-warning",children:[l.jsx("p",{children:"Please select a colour for:"}),l.jsx("ul",{className:"sheet-warning-list",children:F.map(D=>l.jsxs("li",{children:[D.dimension," (qty ",D.qty,")"]},D.dimension))})]}),l.jsxs("div",{className:"step2-filters",children:[l.jsxs("div",{className:"filter-group",children:[l.jsx("label",{htmlFor:"offcut-filter",className:"filter-label",children:"Off Cut"}),l.jsxs("select",{id:"offcut-filter",value:n,onChange:D=>o(D.target.value),className:"filter-select",children:[l.jsx("option",{value:"all",children:"All"}),l.jsx("option",{value:"no",children:"No"}),l.jsx("option",{value:"yes",children:"Yes"})]})]}),l.jsxs("div",{className:"filter-group",children:[l.jsx("label",{htmlFor:"dimension-filter",className:"filter-label",children:"Dimension"}),l.jsxs("select",{id:"dimension-filter",value:u,onChange:D=>h(D.target.value),className:"filter-select",children:[l.jsx("option",{value:"all",children:"All"}),U.map(D=>l.jsx("option",{value:D,children:D},D))]})]}),l.jsxs("div",{className:"filter-group",children:[l.jsx("label",{htmlFor:"colour-filter",className:"filter-label",children:"Colour"}),l.jsxs("select",{id:"colour-filter",value:g,onChange:D=>m(D.target.value),className:"filter-select",children:[l.jsx("option",{value:"all",children:"All"}),q.map(D=>l.jsx("option",{value:D,children:D},D))]})]})]}),l.jsxs("div",{className:"step2-content-layout",children:[l.jsx("div",{className:"step2-main-content",children:X.length===0?l.jsx("div",{className:"step-empty",children:l.jsx("p",{children:"No sheets found for this project."})}):l.jsx("div",{className:"step2-table-container",children:l.jsxs("table",{className:"step2-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{className:"col-checkbox",children:"Select"}),l.jsx("th",{className:"col-order-qty",children:"Order Qty"}),l.jsx("th",{className:"col-dimension",children:"Dimension"}),l.jsx("th",{className:"col-colour",children:"Colour"}),l.jsx("th",{className:"col-qty-factory",children:"Qty Factory"}),l.jsx("th",{className:"col-qty-store",children:"Qty Store"}),l.jsx("th",{className:"col-offcut",children:"Off Cut"}),l.jsx("th",{className:"col-comment",children:"Comment"})]})}),l.jsx("tbody",{children:te.map(D=>{if(D.type==="header")return l.jsx("tr",{className:"group-header",children:l.jsx("td",{colSpan:8,className:"group-header-cell",style:{textAlign:"center"},children:l.jsx("span",{className:"group-label",children:D.label})})},D.key);if(D.type==="subheader")return l.jsx("tr",{className:"group-subheader",children:l.jsx("td",{colSpan:8,className:"group-subheader-cell",style:{textAlign:"center"},children:l.jsx("span",{className:"group-subheader-label",children:D.label})})},D.key);const G=D.sheet,ae=C(G["Sheet ID"]),ne=_(G["Sheet ID"]),se=G["Quantity in Factory"]<=0,me=ae&&R(G["Sheet ID"],G["Quantity in Factory"]),ce=K.has(G.Dimension||""),_e=p&&G.Dimension===p,L=le.has(G["Sheet ID"]);return l.jsxs("tr",{className:`${ae?"selected":""} ${se?"low-stock":""} ${me?"exceeds-qty":""} ${ce?"dimension-match":""} ${_e?"focused-dimension":""}`,children:[l.jsx("td",{className:"col-checkbox",children:l.jsx("input",{type:"checkbox",checked:ae,onChange:()=>z(G),className:"sheet-checkbox"})}),l.jsx("td",{className:"col-order-qty",children:ae?l.jsxs("div",{className:"qty-input-wrapper",children:[l.jsx("input",{type:"number",min:"1",value:ne,onChange:V=>ie(G["Sheet ID"],parseInt(V.target.value,10)||1),className:`qty-input ${me?"exceeds-qty-input":""}`}),me&&l.jsx("span",{className:"qty-warning-icon",title:`Order Qty (${ne}) exceeds Factory Qty (${G["Quantity in Factory"]})`,children:""})]}):l.jsx("span",{className:"qty-placeholder",children:"-"})}),l.jsx("td",{className:"col-dimension",children:G.Dimension}),l.jsxs("td",{className:"col-colour",children:[G.Colour,L&&l.jsx("span",{className:"suggested-badge",children:"Suggested"})]}),l.jsx("td",{className:`col-qty-factory ${se?"zero-qty":""}`,children:G["Quantity in Factory"]}),l.jsx("td",{className:"col-qty-store",children:G["Quantity in Store"]}),l.jsx("td",{className:"col-offcut",children:G["Off Cut"]?"Yes":"No"}),l.jsx("td",{className:"col-comment",children:l.jsx("span",{className:"comment-text",title:G.Comment||void 0,children:G.Comment||"-"})})]},D.key)})})]})})}),r.selectedSheets.length>0&&l.jsxs("div",{className:"step2-summary-sidebar",children:[l.jsxs("div",{className:"summary-header",children:[l.jsx("h3",{children:"Selected Sheets"}),l.jsx("span",{className:"summary-badge",children:r.selectedSheets.length})]}),l.jsx("div",{className:"summary-items",children:r.selectedSheets.map(D=>{const G=b==null?void 0:b.find(se=>se["Sheet ID"]===D.sheetId),ae=(G==null?void 0:G["Quantity in Factory"])||0,ne=D.qty>ae;return l.jsxs("div",{className:`summary-item ${ne?"exceeds-qty":""}`,children:[l.jsxs("div",{className:"summary-item-info",children:[l.jsx("span",{className:"summary-item-dimension",children:D.dimension}),l.jsx("span",{className:"summary-item-colour",children:D.colour}),ne&&l.jsxs("span",{className:"summary-item-warning",children:[" Order Qty (",D.qty,") exceeds Factory Qty (",ae,")"]})]}),l.jsxs("div",{className:"summary-item-actions",children:[l.jsxs("div",{className:"summary-qty-wrapper",children:[l.jsx("input",{type:"number",min:"1",value:D.qty,onChange:se=>ie(D.sheetId,parseInt(se.target.value,10)||1),className:`summary-qty-input ${ne?"exceeds-qty-input":""}`}),ne&&l.jsx("span",{className:"summary-qty-warning-icon",title:`Order Qty (${D.qty}) exceeds Factory Qty (${ae})`,children:""})]}),l.jsx("button",{onClick:()=>z({"Sheet ID":D.sheetId,Dimension:D.dimension,Colour:D.colour,"Quantity in Factory":0,"Quantity in Store":0,"Off Cut":!1,Comment:""}),className:"summary-remove-btn",title:"Remove",children:""})]})]},D.sheetId)})}),l.jsx("div",{className:"summary-footer",children:l.jsxs("div",{className:"summary-colour",children:[l.jsx("span",{className:"summary-colour-label",children:"Order Colour:"}),l.jsx("span",{className:"summary-colour-value",children:r.colour||"No defined"})]})})]})]}),J.errors.length>0&&l.jsxs("div",{className:"step-validation-errors",children:[l.jsx("p",{className:"validation-title",children:"Please correct the following errors:"}),l.jsx("ul",{children:J.errors.map((D,G)=>l.jsx("li",{children:D},G))})]})]}):l.jsx("div",{className:"step-container step-error",children:l.jsx("p",{children:"Please select a project in Step 1"})})}var so={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var S1=so.exports,up;function _1(){return up||(up=1,function(r,t){((a,n)=>{r.exports=n()})(S1,function a(){var n=typeof self!="undefined"?self:typeof window!="undefined"?window:n!==void 0?n:{},o,u=!n.document&&!!n.postMessage,h=n.IS_PAPA_WORKER||!1,g={},m=0,p={};function y(C){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(_){var R=te(_);R.chunkSize=parseInt(R.chunkSize),_.step||_.chunk||(R.chunkSize=null),this._handle=new E(R),(this._handle.streamer=this)._config=R}.call(this,C),this.parseChunk=function(_,R){var F=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<F){let le=this._config.newline;le||(K=this._config.quoteChar||'"',le=this._handle.guessLineEndings(_,K)),_=[..._.split(le).slice(F)].join(le)}this.isFirstChunk&&ie(this._config.beforeFirstChunk)&&(K=this._config.beforeFirstChunk(_))!==void 0&&(_=K),this.isFirstChunk=!1,this._halted=!1;var F=this._partialLine+_,K=(this._partialLine="",this._handle.parse(F,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(_=K.meta.cursor,F=(this._finished||(this._partialLine=F.substring(_-this._baseIndex),this._baseIndex=_),K&&K.data&&(this._rowCount+=K.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),h)n.postMessage({results:K,workerId:p.WORKER_ID,finished:F});else if(ie(this._config.chunk)&&!R){if(this._config.chunk(K,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=K=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(K.data),this._completeResults.errors=this._completeResults.errors.concat(K.errors),this._completeResults.meta=K.meta),this._completed||!F||!ie(this._config.complete)||K&&K.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),F||K&&K.meta.paused||this._nextChunk(),K}this._halted=!0},this._sendError=function(_){ie(this._config.error)?this._config.error(_):h&&this._config.error&&n.postMessage({workerId:p.WORKER_ID,error:_,finished:!1})}}function x(C){var _;(C=C||{}).chunkSize||(C.chunkSize=p.RemoteChunkSize),y.call(this,C),this._nextChunk=u?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(R){this._input=R,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(_=new XMLHttpRequest,this._config.withCredentials&&(_.withCredentials=this._config.withCredentials),u||(_.onload=z(this._chunkLoaded,this),_.onerror=z(this._chunkError,this)),_.open(this._config.downloadRequestBody?"POST":"GET",this._input,!u),this._config.downloadRequestHeaders){var R,F=this._config.downloadRequestHeaders;for(R in F)_.setRequestHeader(R,F[R])}var K;this._config.chunkSize&&(K=this._start+this._config.chunkSize-1,_.setRequestHeader("Range","bytes="+this._start+"-"+K));try{_.send(this._config.downloadRequestBody)}catch(le){this._chunkError(le.message)}u&&_.status===0&&this._chunkError()}},this._chunkLoaded=function(){_.readyState===4&&(_.status<200||400<=_.status?this._chunkError():(this._start+=this._config.chunkSize||_.responseText.length,this._finished=!this._config.chunkSize||this._start>=(R=>(R=R.getResponseHeader("Content-Range"))!==null?parseInt(R.substring(R.lastIndexOf("/")+1)):-1)(_),this.parseChunk(_.responseText)))},this._chunkError=function(R){R=_.statusText||R,this._sendError(new Error(R))}}function b(C){(C=C||{}).chunkSize||(C.chunkSize=p.LocalChunkSize),y.call(this,C);var _,R,F=typeof FileReader!="undefined";this.stream=function(K){this._input=K,R=K.slice||K.webkitSlice||K.mozSlice,F?((_=new FileReader).onload=z(this._chunkLoaded,this),_.onerror=z(this._chunkError,this)):_=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var K=this._input,le=(this._config.chunkSize&&(le=Math.min(this._start+this._config.chunkSize,this._input.size),K=R.call(K,this._start,le)),_.readAsText(K,this._config.encoding));F||this._chunkLoaded({target:{result:le}})},this._chunkLoaded=function(K){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(K.target.result)},this._chunkError=function(){this._sendError(_.error)}}function j(C){var _;y.call(this,C=C||{}),this.stream=function(R){return _=R,this._nextChunk()},this._nextChunk=function(){var R,F;if(!this._finished)return R=this._config.chunkSize,_=R?(F=_.substring(0,R),_.substring(R)):(F=_,""),this._finished=!_,this.parseChunk(F)}}function N(C){y.call(this,C=C||{});var _=[],R=!0,F=!1;this.pause=function(){y.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){y.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(K){this._input=K,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){F&&_.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),_.length?this.parseChunk(_.shift()):R=!0},this._streamData=z(function(K){try{_.push(typeof K=="string"?K:K.toString(this._config.encoding)),R&&(R=!1,this._checkIsFinished(),this.parseChunk(_.shift()))}catch(le){this._streamError(le)}},this),this._streamError=z(function(K){this._streamCleanUp(),this._sendError(K)},this),this._streamEnd=z(function(){this._streamCleanUp(),F=!0,this._streamData("")},this),this._streamCleanUp=z(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function E(C){var _,R,F,K,le=Math.pow(2,53),he=-le,ge=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,T=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Q=this,J=0,D=0,G=!1,ae=!1,ne=[],se={data:[],errors:[],meta:{}};function me(V){return C.skipEmptyLines==="greedy"?V.join("").trim()==="":V.length===1&&V[0].length===0}function ce(){if(se&&F&&(L("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+p.DefaultDelimiter+"'"),F=!1),C.skipEmptyLines&&(se.data=se.data.filter(function(de){return!me(de)})),_e()){let de=function(be,ze){ie(C.transformHeader)&&(be=C.transformHeader(be,ze)),ne.push(be)};if(se)if(Array.isArray(se.data[0])){for(var V=0;_e()&&V<se.data.length;V++)se.data[V].forEach(de);se.data.splice(0,1)}else se.data.forEach(de)}function W(de,be){for(var ze=C.header?{}:[],ke=0;ke<de.length;ke++){var Re=ke,De=de[ke],De=((rt,Ce)=>(Fe=>(C.dynamicTypingFunction&&C.dynamicTyping[Fe]===void 0&&(C.dynamicTyping[Fe]=C.dynamicTypingFunction(Fe)),(C.dynamicTyping[Fe]||C.dynamicTyping)===!0))(rt)?Ce==="true"||Ce==="TRUE"||Ce!=="false"&&Ce!=="FALSE"&&((Fe=>{if(ge.test(Fe)&&(Fe=parseFloat(Fe),he<Fe&&Fe<le))return 1})(Ce)?parseFloat(Ce):T.test(Ce)?new Date(Ce):Ce===""?null:Ce):Ce)(Re=C.header?ke>=ne.length?"__parsed_extra":ne[ke]:Re,De=C.transform?C.transform(De,Re):De);Re==="__parsed_extra"?(ze[Re]=ze[Re]||[],ze[Re].push(De)):ze[Re]=De}return C.header&&(ke>ne.length?L("FieldMismatch","TooManyFields","Too many fields: expected "+ne.length+" fields but parsed "+ke,D+be):ke<ne.length&&L("FieldMismatch","TooFewFields","Too few fields: expected "+ne.length+" fields but parsed "+ke,D+be)),ze}var oe;se&&(C.header||C.dynamicTyping||C.transform)&&(oe=1,!se.data.length||Array.isArray(se.data[0])?(se.data=se.data.map(W),oe=se.data.length):se.data=W(se.data,0),C.header&&se.meta&&(se.meta.fields=ne),D+=oe)}function _e(){return C.header&&ne.length===0}function L(V,W,oe,de){V={type:V,code:W,message:oe},de!==void 0&&(V.row=de),se.errors.push(V)}ie(C.step)&&(K=C.step,C.step=function(V){se=V,_e()?ce():(ce(),se.data.length!==0&&(J+=V.data.length,C.preview&&J>C.preview?R.abort():(se.data=se.data[0],K(se,Q))))}),this.parse=function(V,W,oe){var de=C.quoteChar||'"',de=(C.newline||(C.newline=this.guessLineEndings(V,de)),F=!1,C.delimiter?ie(C.delimiter)&&(C.delimiter=C.delimiter(V),se.meta.delimiter=C.delimiter):((de=((be,ze,ke,Re,De)=>{var rt,Ce,Fe,ga;De=De||[",","	","|",";",p.RECORD_SEP,p.UNIT_SEP];for(var pa=0;pa<De.length;pa++){for(var aa,ts=De[pa],wt=0,sa=0,We=0,He=(Fe=void 0,new B({comments:Re,delimiter:ts,newline:ze,preview:10}).parse(be)),jt=0;jt<He.data.length;jt++)ke&&me(He.data[jt])?We++:(aa=He.data[jt].length,sa+=aa,Fe===void 0?Fe=aa:0<aa&&(wt+=Math.abs(aa-Fe),Fe=aa));0<He.data.length&&(sa/=He.data.length-We),(Ce===void 0||wt<=Ce)&&(ga===void 0||ga<sa)&&1.99<sa&&(Ce=wt,rt=ts,ga=sa)}return{successful:!!(C.delimiter=rt),bestDelimiter:rt}})(V,C.newline,C.skipEmptyLines,C.comments,C.delimitersToGuess)).successful?C.delimiter=de.bestDelimiter:(F=!0,C.delimiter=p.DefaultDelimiter),se.meta.delimiter=C.delimiter),te(C));return C.preview&&C.header&&de.preview++,_=V,R=new B(de),se=R.parse(_,W,oe),ce(),G?{meta:{paused:!0}}:se||{meta:{paused:!1}}},this.paused=function(){return G},this.pause=function(){G=!0,R.abort(),_=ie(C.chunk)?"":_.substring(R.getCharIndex())},this.resume=function(){Q.streamer._halted?(G=!1,Q.streamer.parseChunk(_,!0)):setTimeout(Q.resume,3)},this.aborted=function(){return ae},this.abort=function(){ae=!0,R.abort(),se.meta.aborted=!0,ie(C.complete)&&C.complete(se),_=""},this.guessLineEndings=function(be,de){be=be.substring(0,1048576);var de=new RegExp(A(de)+"([^]*?)"+A(de),"gm"),oe=(be=be.replace(de,"")).split("\r"),de=be.split(`
`),be=1<de.length&&de[0].length<oe[0].length;if(oe.length===1||be)return`
`;for(var ze=0,ke=0;ke<oe.length;ke++)oe[ke][0]===`
`&&ze++;return ze>=oe.length/2?`\r
`:"\r"}}function A(C){return C.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function B(C){var _=(C=C||{}).delimiter,R=C.newline,F=C.comments,K=C.step,le=C.preview,he=C.fastMode,ge=null,T=!1,Q=C.quoteChar==null?'"':C.quoteChar,J=Q;if(C.escapeChar!==void 0&&(J=C.escapeChar),(typeof _!="string"||-1<p.BAD_DELIMITERS.indexOf(_))&&(_=","),F===_)throw new Error("Comment character same as delimiter");F===!0?F="#":(typeof F!="string"||-1<p.BAD_DELIMITERS.indexOf(F))&&(F=!1),R!==`
`&&R!=="\r"&&R!==`\r
`&&(R=`
`);var D=0,G=!1;this.parse=function(ae,ne,se){if(typeof ae!="string")throw new Error("Input must be a string");var me=ae.length,ce=_.length,_e=R.length,L=F.length,V=ie(K),W=[],oe=[],de=[],be=D=0;if(!ae)return wt();if(he||he!==!1&&ae.indexOf(Q)===-1){for(var ze=ae.split(R),ke=0;ke<ze.length;ke++){if(de=ze[ke],D+=de.length,ke!==ze.length-1)D+=R.length;else if(se)return wt();if(!F||de.substring(0,L)!==F){if(V){if(W=[],ga(de.split(_)),sa(),G)return wt()}else ga(de.split(_));if(le&&le<=ke)return W=W.slice(0,le),wt(!0)}}return wt()}for(var Re=ae.indexOf(_,D),De=ae.indexOf(R,D),rt=new RegExp(A(J)+A(Q),"g"),Ce=ae.indexOf(Q,D);;)if(ae[D]===Q)for(Ce=D,D++;;){if((Ce=ae.indexOf(Q,Ce+1))===-1)return se||oe.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:W.length,index:D}),aa();if(Ce===me-1)return aa(ae.substring(D,Ce).replace(rt,Q));if(Q===J&&ae[Ce+1]===J)Ce++;else if(Q===J||Ce===0||ae[Ce-1]!==J){Re!==-1&&Re<Ce+1&&(Re=ae.indexOf(_,Ce+1));var Fe=pa((De=De!==-1&&De<Ce+1?ae.indexOf(R,Ce+1):De)===-1?Re:Math.min(Re,De));if(ae.substr(Ce+1+Fe,ce)===_){de.push(ae.substring(D,Ce).replace(rt,Q)),ae[D=Ce+1+Fe+ce]!==Q&&(Ce=ae.indexOf(Q,D)),Re=ae.indexOf(_,D),De=ae.indexOf(R,D);break}if(Fe=pa(De),ae.substring(Ce+1+Fe,Ce+1+Fe+_e)===R){if(de.push(ae.substring(D,Ce).replace(rt,Q)),ts(Ce+1+Fe+_e),Re=ae.indexOf(_,D),Ce=ae.indexOf(Q,D),V&&(sa(),G))return wt();if(le&&W.length>=le)return wt(!0);break}oe.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:W.length,index:D}),Ce++}}else if(F&&de.length===0&&ae.substring(D,D+L)===F){if(De===-1)return wt();D=De+_e,De=ae.indexOf(R,D),Re=ae.indexOf(_,D)}else if(Re!==-1&&(Re<De||De===-1))de.push(ae.substring(D,Re)),D=Re+ce,Re=ae.indexOf(_,D);else{if(De===-1)break;if(de.push(ae.substring(D,De)),ts(De+_e),V&&(sa(),G))return wt();if(le&&W.length>=le)return wt(!0)}return aa();function ga(We){W.push(We),be=D}function pa(We){var He=0;return He=We!==-1&&(We=ae.substring(Ce+1,We))&&We.trim()===""?We.length:He}function aa(We){return se||(We===void 0&&(We=ae.substring(D)),de.push(We),D=me,ga(de),V&&sa()),wt()}function ts(We){D=We,ga(de),de=[],De=ae.indexOf(R,D)}function wt(We){if(C.header&&!ne&&W.length&&!T){var He=W[0],jt=Object.create(null),Tt=new Set(He);let Ui=!1;for(let as=0;as<He.length;as++){let ra=He[as];if(jt[ra=ie(C.transformHeader)?C.transformHeader(ra,as):ra]){let _a,Os=jt[ra];for(;_a=ra+"_"+Os,Os++,Tt.has(_a););Tt.add(_a),He[as]=_a,jt[ra]++,Ui=!0,(ge=ge===null?{}:ge)[_a]=ra}else jt[ra]=1,He[as]=ra;Tt.add(ra)}Ui&&console.warn("Duplicate headers found and renamed."),T=!0}return{data:W,errors:oe,meta:{delimiter:_,linebreak:R,aborted:G,truncated:!!We,cursor:be+(ne||0),renamedHeaders:ge}}}function sa(){K(wt()),W=[],oe=[]}},this.abort=function(){G=!0},this.getCharIndex=function(){return D}}function U(C){var _=C.data,R=g[_.workerId],F=!1;if(_.error)R.userError(_.error,_.file);else if(_.results&&_.results.data){var K={abort:function(){F=!0,q(_.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:X,resume:X};if(ie(R.userStep)){for(var le=0;le<_.results.data.length&&(R.userStep({data:_.results.data[le],errors:_.results.errors,meta:_.results.meta},K),!F);le++);delete _.results}else ie(R.userChunk)&&(R.userChunk(_.results,K,_.file),delete _.results)}_.finished&&!F&&q(_.workerId,_.results)}function q(C,_){var R=g[C];ie(R.userComplete)&&R.userComplete(_),R.terminate(),delete g[C]}function X(){throw new Error("Not implemented.")}function te(C){if(typeof C!="object"||C===null)return C;var _,R=Array.isArray(C)?[]:{};for(_ in C)R[_]=te(C[_]);return R}function z(C,_){return function(){C.apply(_,arguments)}}function ie(C){return typeof C=="function"}return p.parse=function(C,_){var R=(_=_||{}).dynamicTyping||!1;if(ie(R)&&(_.dynamicTypingFunction=R,R={}),_.dynamicTyping=R,_.transform=!!ie(_.transform)&&_.transform,!_.worker||!p.WORKERS_SUPPORTED)return R=null,p.NODE_STREAM_INPUT,typeof C=="string"?(C=(F=>F.charCodeAt(0)!==65279?F:F.slice(1))(C),R=new(_.download?x:j)(_)):C.readable===!0&&ie(C.read)&&ie(C.on)?R=new N(_):(n.File&&C instanceof File||C instanceof Object)&&(R=new b(_)),R.stream(C);(R=(()=>{var F;return!!p.WORKERS_SUPPORTED&&(F=(()=>{var K=n.URL||n.webkitURL||null,le=a.toString();return p.BLOB_URL||(p.BLOB_URL=K.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",le,")();"],{type:"text/javascript"})))})(),(F=new n.Worker(F)).onmessage=U,F.id=m++,g[F.id]=F)})()).userStep=_.step,R.userChunk=_.chunk,R.userComplete=_.complete,R.userError=_.error,_.step=ie(_.step),_.chunk=ie(_.chunk),_.complete=ie(_.complete),_.error=ie(_.error),delete _.worker,R.postMessage({input:C,config:_,workerId:R.id})},p.unparse=function(C,_){var R=!1,F=!0,K=",",le=`\r
`,he='"',ge=he+he,T=!1,Q=null,J=!1,D=((()=>{if(typeof _=="object"){if(typeof _.delimiter!="string"||p.BAD_DELIMITERS.filter(function(ne){return _.delimiter.indexOf(ne)!==-1}).length||(K=_.delimiter),typeof _.quotes!="boolean"&&typeof _.quotes!="function"&&!Array.isArray(_.quotes)||(R=_.quotes),typeof _.skipEmptyLines!="boolean"&&typeof _.skipEmptyLines!="string"||(T=_.skipEmptyLines),typeof _.newline=="string"&&(le=_.newline),typeof _.quoteChar=="string"&&(he=_.quoteChar),typeof _.header=="boolean"&&(F=_.header),Array.isArray(_.columns)){if(_.columns.length===0)throw new Error("Option columns is empty");Q=_.columns}_.escapeChar!==void 0&&(ge=_.escapeChar+he),_.escapeFormulae instanceof RegExp?J=_.escapeFormulae:typeof _.escapeFormulae=="boolean"&&_.escapeFormulae&&(J=/^[=+\-@\t\r].*$/)}})(),new RegExp(A(he),"g"));if(typeof C=="string"&&(C=JSON.parse(C)),Array.isArray(C)){if(!C.length||Array.isArray(C[0]))return G(null,C,T);if(typeof C[0]=="object")return G(Q||Object.keys(C[0]),C,T)}else if(typeof C=="object")return typeof C.data=="string"&&(C.data=JSON.parse(C.data)),Array.isArray(C.data)&&(C.fields||(C.fields=C.meta&&C.meta.fields||Q),C.fields||(C.fields=Array.isArray(C.data[0])?C.fields:typeof C.data[0]=="object"?Object.keys(C.data[0]):[]),Array.isArray(C.data[0])||typeof C.data[0]=="object"||(C.data=[C.data])),G(C.fields||[],C.data||[],T);throw new Error("Unable to serialize unrecognized input");function G(ne,se,me){var ce="",_e=(typeof ne=="string"&&(ne=JSON.parse(ne)),typeof se=="string"&&(se=JSON.parse(se)),Array.isArray(ne)&&0<ne.length),L=!Array.isArray(se[0]);if(_e&&F){for(var V=0;V<ne.length;V++)0<V&&(ce+=K),ce+=ae(ne[V],V);0<se.length&&(ce+=le)}for(var W=0;W<se.length;W++){var oe=(_e?ne:se[W]).length,de=!1,be=_e?Object.keys(se[W]).length===0:se[W].length===0;if(me&&!_e&&(de=me==="greedy"?se[W].join("").trim()==="":se[W].length===1&&se[W][0].length===0),me==="greedy"&&_e){for(var ze=[],ke=0;ke<oe;ke++){var Re=L?ne[ke]:ke;ze.push(se[W][Re])}de=ze.join("").trim()===""}if(!de){for(var De=0;De<oe;De++){0<De&&!be&&(ce+=K);var rt=_e&&L?ne[De]:De;ce+=ae(se[W][rt],De)}W<se.length-1&&(!me||0<oe&&!be)&&(ce+=le)}}return ce}function ae(ne,se){var me,ce;return ne==null?"":ne.constructor===Date?JSON.stringify(ne).slice(1,25):(ce=!1,J&&typeof ne=="string"&&J.test(ne)&&(ne="'"+ne,ce=!0),me=ne.toString().replace(D,ge),(ce=ce||R===!0||typeof R=="function"&&R(ne,se)||Array.isArray(R)&&R[se]||((_e,L)=>{for(var V=0;V<L.length;V++)if(-1<_e.indexOf(L[V]))return!0;return!1})(me,p.BAD_DELIMITERS)||-1<me.indexOf(K)||me.charAt(0)===" "||me.charAt(me.length-1)===" ")?he+me+he:me)}},p.RECORD_SEP="",p.UNIT_SEP="",p.BYTE_ORDER_MARK="\uFEFF",p.BAD_DELIMITERS=["\r",`
`,'"',p.BYTE_ORDER_MARK],p.WORKERS_SUPPORTED=!u&&!!n.Worker,p.NODE_STREAM_INPUT=1,p.LocalChunkSize=10485760,p.RemoteChunkSize=5242880,p.DefaultDelimiter=",",p.Parser=B,p.ParserHandle=E,p.NetworkStreamer=x,p.FileStreamer=b,p.StringStreamer=j,p.ReadableStreamStreamer=N,n.jQuery&&((o=n.jQuery).fn.parse=function(C){var _=C.config||{},R=[];return this.each(function(le){if(!(o(this).prop("tagName").toUpperCase()==="INPUT"&&o(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var he=0;he<this.files.length;he++)R.push({file:this.files[he],inputElem:this,instanceConfig:o.extend({},_)})}),F(),this;function F(){if(R.length===0)ie(C.complete)&&C.complete();else{var le,he,ge,T,Q=R[0];if(ie(C.before)){var J=C.before(Q.file,Q.inputElem);if(typeof J=="object"){if(J.action==="abort")return le="AbortError",he=Q.file,ge=Q.inputElem,T=J.reason,void(ie(C.error)&&C.error({name:le},he,ge,T));if(J.action==="skip")return void K();typeof J.config=="object"&&(Q.instanceConfig=o.extend(Q.instanceConfig,J.config))}else if(J==="skip")return void K()}var D=Q.instanceConfig.complete;Q.instanceConfig.complete=function(G){ie(D)&&D(G,Q.file,Q.inputElem),K()},p.parse(Q.file,Q.instanceConfig)}}function K(){R.splice(0,1),F()}}),h&&(n.onmessage=function(C){C=C.data,p.WORKER_ID===void 0&&C&&(p.WORKER_ID=C.workerId),typeof C.input=="string"?n.postMessage({workerId:p.WORKER_ID,results:p.parse(C.input,C.config),finished:!0}):(n.File&&C.input instanceof File||C.input instanceof Object)&&(C=p.parse(C.input,C.config))&&n.postMessage({workerId:p.WORKER_ID,results:C,finished:!0})}),(x.prototype=Object.create(y.prototype)).constructor=x,(b.prototype=Object.create(y.prototype)).constructor=b,(j.prototype=Object.create(j.prototype)).constructor=j,(N.prototype=Object.create(y.prototype)).constructor=N,p})}(so)),so.exports}var N1=_1();const C1=gp(N1);function E1(){const{formData:r,updateFormData:t,validation:a}=Ua(),[n,o]=k.useState(!1),[u,h]=k.useState(null),g=k.useRef(null),m=U=>{var X;const q=(X=U.target.files)==null?void 0:X[0];if(q){if(!q.name.endsWith(".csv")){h("Please select a CSV file");return}o(!0),h(null),C1.parse(q,{header:!1,skipEmptyLines:!0,complete:te=>S(null,null,function*(){try{const z=p(te.data),ie=z.map(K=>K.name),C=yield Yt.checkExistingPanels(ie),_=new Set(C.map(K=>K.Name)),R=new Map(C.map(K=>[K.Name,{Order:K.Order,Status:K.Status}])),F=z.map(K=>{var le,he;return et(Ue({},K),{existsInDatabase:_.has(K.name),existingOrder:((le=R.get(K.name))==null?void 0:le.Order)||null,existingStatus:((he=R.get(K.name))==null?void 0:he.Status)||null})});t({panels:F,csvFile:q}),h(null)}catch(z){h(z instanceof Error?z.message:"Error processing the CSV file")}finally{o(!1)}}),error:te=>{h(`Error reading CSV: ${te.message}`),o(!1)}})}},p=U=>{if(!U||U.length===0)throw new Error("CSV file is empty or invalid.");const[q,...X]=U,te=(q||[]).map(F=>(F!=null?F:"").toString().trim()),z=y(te,["SheetName","Sheet Name","Sheet"]),ie=y(te,["NestNumber","Nest Number","Nest"]),C=x(te);if(C.length===0)throw new Error("No part columns found. Please make sure the CSV includes PartName columns.");if(z===-1)throw new Error("SheetName column not found. Please include SheetName or Sheet Name.");if(ie===-1)throw new Error("NestNumber column not found. Please include NestNumber or Nest Number.");const _=[];for(const F of X){const K=b(F,z),le=b(F,ie);for(const he of C){const ge=b(F,he.nameIndex);if(!ge)continue;const T=ge.toUpperCase();if(T.includes("OFFCUT")||T.includes("REMNANT")||T.includes("SCRAP"))continue;const Q=j(b(F,he.areaIndex)),J=j(b(F,he.cutLengthIndex)),D=Math.max(1,Math.floor(j(b(F,he.qtyIndex))||1));for(let G=0;G<D;G+=1)_.push({name:ge.trim(),area:Q,cutDistance:J,sheetName:K.trim(),nestNumber:le.trim(),comment:""})}}if(_.length===0)throw new Error("No valid panels found in the CSV. Please check that the file contains the correct columns.");const R=_.reduce((F,K)=>(F.set(K.name,(F.get(K.name)||0)+1),F),new Map);return _.map(F=>et(Ue({},F),{isDuplicate:(R.get(F.name)||0)>1}))},y=(U,q)=>{var te;const X=U.map(z=>z.toLowerCase().trim());return(te=q.map(z=>X.indexOf(z.toLowerCase().trim())).find(z=>z!==-1))!=null?te:-1},x=U=>{const q=U.map(te=>te.toLowerCase().replace(/\s+/g,"")),X=q.map((te,z)=>te==="partname"?z:-1).filter(te=>te!==-1);return X.map((te,z)=>{const ie=z<X.length-1?X[z+1]:U.length,C=q.slice(te+1,ie),_=C.findIndex(K=>K==="partarea"),R=C.findIndex(K=>K==="cutlength"||K==="cutdistance"),F=C.findIndex(K=>K==="partqtyinnest");return{nameIndex:te,areaIndex:_>=0?te+1+_:-1,cutLengthIndex:R>=0?te+1+R:-1,qtyIndex:F>=0?te+1+F:-1}})},b=(U,q)=>{if(q<0||q>=U.length)return"";const X=U[q];return(X!=null?X:"").toString().trim()},j=U=>{if(!U)return 0;const q=U.replace(/,/g,"").trim(),X=Number(q);return Number.isFinite(X)?X:0},N=()=>{t({panels:[],csvFile:null}),h(null),g.current&&(g.current.value="")},E=a.step2,A=k.useMemo(()=>{const U=r.panels.reduce((q,X)=>(q.set(X.name,(q.get(X.name)||0)+1),q),new Map);return Array.from(U.entries()).filter(([,q])=>q>1).map(([q])=>q).sort()},[r.panels]),B=k.useMemo(()=>r.panels.filter(U=>U.existsInDatabase).map(U=>({name:U.name,existingOrder:U.existingOrder,existingStatus:U.existingStatus})).sort((U,q)=>U.name.localeCompare(q.name)),[r.panels]);return l.jsxs("div",{className:"step-container step3-panels",children:[l.jsx("h2",{className:"step-title",children:"Import Panels from CSV"}),l.jsx("p",{className:"step-description",children:"Upload the nesting CSV. We will extract panels from PartName columns and use SheetName and NestNumber from the file."}),l.jsxs("div",{className:"step3-upload",children:[l.jsxs("div",{className:"upload-area",children:[l.jsx("input",{ref:g,type:"file",accept:".csv",onChange:m,className:"file-input",id:"csv-file-input",disabled:n}),l.jsx("label",{htmlFor:"csv-file-input",className:`upload-label ${n?"processing":""} ${r.csvFile?"uploaded":""}`,children:n?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"upload-icon",children:""}),l.jsx("span",{children:"Processing CSV..."})]}):r.csvFile?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"upload-icon",children:""}),l.jsx("span",{children:r.csvFile.name}),l.jsxs("span",{className:"upload-size",children:["(",(r.csvFile.size/1024).toFixed(2)," KB)"]})]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"upload-icon",children:""}),l.jsx("span",{children:"Click to select CSV file"})]})})]}),r.csvFile&&l.jsx("button",{type:"button",onClick:N,className:"clear-button",disabled:n,children:"Clear"})]}),u&&l.jsx("div",{className:"step-error-message",children:l.jsx("p",{children:u})}),l.jsxs("div",{className:"step3-comment-section",children:[l.jsx("label",{htmlFor:"order-comment",className:"comment-label",children:"Order Comment (Optional)"}),l.jsx("textarea",{id:"order-comment",value:r.orderComment||"",onChange:U=>t({orderComment:U.target.value}),className:"comment-textarea",placeholder:"Add any additional comments or notes for this order...",rows:3})]}),A.length>0&&l.jsxs("div",{className:"step-warning-message step-warning-internal",children:[l.jsx("p",{className:"warning-title",children:" Duplicate panel names detected in CSV"}),l.jsx("p",{className:"warning-description",children:"Please review the CSV before creating the order."}),l.jsx("ul",{children:A.slice(0,10).map(U=>l.jsx("li",{children:U},U))}),A.length>10&&l.jsxs("p",{className:"warning-more",children:["... and ",A.length-10," more duplicates"]})]}),B.length>0&&l.jsxs("div",{className:"step-warning-message step-warning-database",children:[l.jsx("p",{className:"warning-title",children:" Panel names already exist in database"}),l.jsx("p",{className:"warning-description",children:"These panel names already exist in Supabase. Please rename them before creating the order."}),l.jsx("div",{className:"existing-panels-list",children:B.slice(0,10).map(U=>l.jsxs("div",{className:"existing-panel-item",children:[l.jsx("span",{className:"existing-panel-name",children:U.name}),l.jsxs("span",{className:"existing-panel-info",children:["Order: ",U.existingOrder||"N/A"," | Status: ",U.existingStatus||"N/A"]})]},U.name))}),B.length>10&&l.jsxs("p",{className:"warning-more",children:["... and ",B.length-10," more existing panels"]})]}),r.panels.length>0&&l.jsxs("div",{className:"step3-preview",children:[l.jsxs("div",{className:"preview-header",children:[l.jsx("h3",{children:"Preview of Processed Panels"}),l.jsxs("span",{className:"preview-count",children:[r.panels.length," panel(s)"]})]}),l.jsxs("div",{className:"preview-table-container",children:[l.jsxs("table",{className:"preview-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Name"}),l.jsx("th",{children:"Area"}),l.jsx("th",{children:"Cut Distance"}),l.jsx("th",{children:"Sheet Name"}),l.jsx("th",{children:"Nest Number"}),l.jsx("th",{children:"Comment"})]})}),l.jsx("tbody",{children:r.panels.slice(0,50).map((U,q)=>l.jsxs("tr",{className:U.isDuplicate?"panel-duplicate-row":U.existsInDatabase?"panel-exists-row":void 0,children:[l.jsxs("td",{className:"col-name",children:[l.jsx("span",{className:U.isDuplicate?"panel-name-duplicate":U.existsInDatabase?"panel-name-exists":void 0,children:U.name}),U.isDuplicate&&l.jsx("span",{className:"panel-duplicate-badge",children:"Duplicate in CSV"}),U.existsInDatabase&&l.jsx("span",{className:"panel-exists-badge",children:"Exists in DB"})]}),l.jsx("td",{className:"col-number",children:U.area.toFixed(2)}),l.jsx("td",{className:"col-number",children:U.cutDistance.toFixed(2)}),l.jsx("td",{className:"col-text",children:U.sheetName}),l.jsx("td",{className:"col-text",children:U.nestNumber}),l.jsx("td",{className:"col-comment",children:U.comment})]},q))})]}),r.panels.length>50&&l.jsxs("p",{className:"preview-more",children:["... and ",r.panels.length-50," more panel(s)"]})]}),l.jsxs("div",{className:"preview-summary",children:[l.jsxs("div",{className:"summary-item",children:[l.jsx("span",{className:"summary-label",children:"Total Panels:"}),l.jsx("span",{className:"summary-value",children:r.panels.length})]}),l.jsxs("div",{className:"summary-item",children:[l.jsx("span",{className:"summary-label",children:"Total Area:"}),l.jsxs("span",{className:"summary-value",children:[r.panels.reduce((U,q)=>U+q.area,0).toFixed(2)," ","m"]})]}),l.jsxs("div",{className:"summary-item",children:[l.jsx("span",{className:"summary-label",children:"Cut Distance Total:"}),l.jsxs("span",{className:"summary-value",children:[r.panels.reduce((U,q)=>U+q.cutDistance,0).toFixed(2)," ","m"]})]})]})]}),E.errors.length>0&&l.jsxs("div",{className:"step-validation-errors",children:[l.jsx("p",{className:"validation-title",children:"Please correct the following errors:"}),l.jsx("ul",{children:E.errors.map((U,q)=>l.jsx("li",{children:U},q))})]})]})}const mi=new Ds;function T1(r,t,a=!0,n){return S(this,null,function*(){const o=[],u=[],h=nj(),g=r.documents.filter(j=>!j.uploaded||!j.saved),m=r.selectedExistingDocuments.filter(j=>!j.linked),p=g.length>0||m.length>0,y=6,x=p?(g.length>0?1:0)+(m.length>0?1:0):0,b=y+x;try{n==null||n({step:1,totalSteps:b,message:"Preparing order data...",status:"in-progress"});const j={"Order ID":r.orderId,Project:r.project,Responsable:r.responsable,Status:r.status,Colour:r.colour,Notification:a,"Creation Date":h},N=[{Order:r.orderId,Action:"Cut","Quality Control":t},{Order:r.orderId,Action:"Manufacturing","Quality Control":t},{Order:r.orderId,Action:"Packaging","Quality Control":t}],E=r.panels.map(A=>({Name:A.name,Project:r.project,Status:"Ready to cut",Area:A.area,"Cut Distance":A.cutDistance,Order:r.orderId,"Creation Date":h,Comment:A.comment||"",Image:"",Priority:r.priority,"Nest Number":A.nestNumber,Sheet:A.sheetName}));n==null||n({step:1,totalSteps:b,message:"Order data prepared",status:"completed"}),n==null||n({step:2,totalSteps:b,message:"Creating order in DB...",status:"in-progress"});try{const{error:A}=yield ma.from("Orders cut").insert([j]);if(A)throw new Error(`Supabase error creating order: ${A.message}`);n==null||n({step:2,totalSteps:b,message:"Order created in DB",status:"completed"})}catch(A){const B=A instanceof Error?A.message:"Unknown error";throw o.push(`Failed to create order in Supabase: ${B}`),n==null||n({step:2,totalSteps:b,message:`Error: ${B}`,status:"error"}),A}n==null||n({step:3,totalSteps:b,message:`Creating panels in DB (${E.length} panels)...`,status:"in-progress"});try{E.length>0?(yield Yt.createPanels(E),n==null||n({step:3,totalSteps:b,message:`Panels created in DB (${E.length} panels)`,status:"completed"})):n==null||n({step:3,totalSteps:b,message:"No panels to create",status:"completed"})}catch(A){const B=A instanceof Error?A.message:"Unknown error";throw o.push(`Failed to create panels in Supabase: ${B}`),n==null||n({step:3,totalSteps:b,message:`Error: ${B}`,status:"error"}),A}n==null||n({step:4,totalSteps:b,message:"Creating order in CC Flow 2026...",status:"in-progress"});try{yield mi.addOrderCut(j),n==null||n({step:4,totalSteps:b,message:"Order created in CC Flow 2026",status:"completed"})}catch(A){const B=A instanceof Error?A.message:"Unknown error";u.push(`Failed to create order in AppSheet: ${B}`),n==null||n({step:4,totalSteps:b,message:`Warning: ${B}`,status:"error"})}n==null||n({step:5,totalSteps:b,message:"Creating stages in CC Flow 2026 (3 stages)...",status:"in-progress"});try{yield mi.createStages(N),n==null||n({step:5,totalSteps:b,message:"Stages created in CC Flow 2026 (3 stages)",status:"completed"})}catch(A){const B=A instanceof Error?A.message:"Unknown error";u.push(`Failed to create stages in AppSheet: ${B}`),n==null||n({step:5,totalSteps:b,message:`Warning: ${B}`,status:"error"})}n==null||n({step:6,totalSteps:b,message:`Creating panels in CC Flow 2026 (${E.length} panels)...`,status:"in-progress"});try{E.length>0?(yield mi.createPanels(E),n==null||n({step:6,totalSteps:b,message:`Panels created in CC Flow 2026 (${E.length} panels)`,status:"completed"})):n==null||n({step:6,totalSteps:b,message:"No panels to create",status:"completed"})}catch(A){const B=A instanceof Error?A.message:"Unknown error";u.push(`Failed to create panels in AppSheet: ${B}`),n==null||n({step:6,totalSteps:b,message:`Warning: ${B}`,status:"error"})}if(p){let A=y;if(g.length>0){A++,n==null||n({step:A,totalSteps:b,message:`Uploading ${g.length} new document(s)...`,status:"in-progress"});for(let B=0;B<g.length;B++){const U=g[B];if(!U.category||!U.category.trim()){u.push(`Document "${U.name}" skipped: Category is required`);continue}try{yield mi.addDocument({file:U.file,Project:r.project,Name:U.name,Orders:r.orderId,Comments:U.comments||"",Category:U.category||""})}catch(q){const X=q instanceof Error?q.message:"Unknown error";u.push(`Failed to upload document "${U.name}": ${X}`)}}n==null||n({step:A,totalSteps:b,message:`Uploaded ${g.length} new document(s)`,status:"completed"})}if(m.length>0){A++,n==null||n({step:A,totalSteps:b,message:`Linking ${m.length} existing document(s)...`,status:"in-progress"});for(let B=0;B<m.length;B++){const U=m[B];try{yield mi.linkDocumentToOrder(U.documentId,r.orderId)}catch(q){const X=q instanceof Error?q.message:"Unknown error";u.push(`Failed to link document "${U.name}": ${X}`)}}n==null||n({step:A,totalSteps:b,message:`Linked ${m.length} existing document(s)`,status:"completed"})}}return{success:o.length===0,orderId:r.orderId,errors:o,warnings:u}}catch(j){const N=j instanceof Error?j.message:"Unknown error";return{success:!1,orderId:r.orderId,errors:[...o,N],warnings:u}}})}function D1(){const{formData:r,validation:t,setLoading:a,setError:n,setSuccess:o,resetWizard:u,isLoading:h,goToStep:g}=Ua(),[m,p]=k.useState(!1),[y,x]=k.useState(null),[b,j]=k.useState(null),[N,E]=k.useState(!1),[A,B]=k.useState(!0),U=R=>{E(R)},q=R=>{B(R)},X=()=>S(null,null,function*(){if(!t.step5.isValid)return;a(!0),n(null),o(!1);const R=r.documents.filter(ge=>!ge.uploaded||!ge.saved),F=r.selectedExistingDocuments.filter(ge=>!ge.linked),K=[{number:1,label:"Preparing order data",status:"pending"},{number:2,label:"Creating order in DB",status:"pending"},{number:3,label:`Creating panels in DB (${r.panels.length} panels)`,status:"pending"},{number:4,label:"Creating order in CC Flow 2026",status:"pending"},{number:5,label:"Creating stages in CC Flow 2026 (3 stages)",status:"pending"},{number:6,label:`Creating panels in CC Flow 2026 (${r.panels.length} panels)`,status:"pending"}],le=[];R.length>0&&le.push({number:K.length+le.length+1,label:`Uploading ${R.length} new document(s)`,status:"pending"}),F.length>0&&le.push({number:K.length+le.length+1,label:`Linking ${F.length} existing document(s)`,status:"pending"});const he=[...K,...le];j({currentStep:0,totalSteps:he.length,message:"Starting order creation...",steps:he});try{const ge=yield T1(r,N,A,T=>{j(Q=>{if(!Q)return Q;const J=[...Q.steps];return J[T.step-1]=et(Ue({},J[T.step-1]),{status:T.status}),{currentStep:T.step,totalSteps:T.totalSteps,message:T.message,steps:J}})});if(x(ge),j(null),ge.success)o(!0),ge.warnings.length>0&&console.warn(" Order created with warnings:",ge.warnings);else{const T=ge.errors.length>0?ge.errors[0]:"Failed to create order";n(T)}}catch(ge){const T=ge instanceof Error?ge.message:"Unknown error";n(T),x({success:!1,orderId:r.orderId,errors:[T],warnings:[]}),j(null)}finally{a(!1),p(!1)}}),te=()=>{u(),x(null),p(!1)},z=t.step5,ie=r.panels.reduce((R,F)=>R+F.area,0),C=r.panels.reduce((R,F)=>R+F.cutDistance,0),_=r.selectedSheets.reduce((R,F)=>R+F.qty,0);return y!=null&&y.success?l.jsx("div",{className:"step-container step4-review step-success",children:l.jsxs("div",{className:"success-content",children:[l.jsx("div",{className:"success-icon-wrapper",children:l.jsx("div",{className:"success-icon",children:""})}),l.jsx("h2",{className:"success-title",children:"Order Created Successfully!"}),l.jsxs("p",{className:"success-message",children:["Order ",l.jsx("strong",{children:y.orderId})," has been created successfully for project ",l.jsx("strong",{children:r.project}),"."]}),l.jsxs("div",{className:"success-order-info",children:[l.jsxs("div",{className:"success-info-item",children:[l.jsx("span",{className:"success-info-label",children:"Order ID:"}),l.jsx("span",{className:"success-info-value",children:y.orderId})]}),l.jsxs("div",{className:"success-info-item",children:[l.jsx("span",{className:"success-info-label",children:"Project:"}),l.jsx("span",{className:"success-info-value",children:r.project})]})]}),y.warnings&&y.warnings.length>0&&l.jsxs("div",{className:"success-warnings",children:[l.jsx("p",{className:"warnings-title",children:"Warnings:"}),l.jsx("ul",{children:y.warnings.map((R,F)=>l.jsx("li",{children:R},F))})]}),(()=>{const R=r.documents,F=r.selectedExistingDocuments,K=R,le=F,he=K.length+le.length;return he>0?l.jsxs("div",{className:"success-documents-section success-documents-summary",children:[l.jsxs("div",{className:"success-documents-header",children:[l.jsx("span",{className:"success-icon-small",children:""}),l.jsxs("p",{className:"success-documents-title",children:[he," document",he!==1?"s":""," processed"]})]}),l.jsxs("div",{className:"success-documents-list",children:[K.length>0&&l.jsxs("div",{className:"success-documents-group",children:[l.jsxs("span",{className:"documents-group-label",children:["Uploaded (",K.length,"):"]}),l.jsx("div",{className:"documents-group-items",children:K.map(T=>l.jsx("span",{className:"document-item-badge",children:T.name},T.id))})]}),le.length>0&&l.jsxs("div",{className:"success-documents-group",children:[l.jsxs("span",{className:"documents-group-label",children:["Linked (",le.length,"):"]}),l.jsx("div",{className:"documents-group-items",children:le.map(T=>l.jsx("span",{className:"document-item-badge",children:T.name},T.documentId))})]})]}),l.jsx("button",{type:"button",onClick:()=>g(4),className:"action-button action-button-secondary",children:"Add More Documents"})]}):l.jsxs("div",{className:"success-documents-section success-documents-warning",children:[l.jsxs("div",{className:"success-documents-header",children:[l.jsx("span",{className:"warning-icon",children:""}),l.jsx("p",{className:"success-documents-title",children:"No documents were added to this order"})]}),l.jsx("p",{className:"success-documents-message",children:"Consider adding documents such as cut lists, elevation, drawings or other relevant files."}),l.jsx("button",{type:"button",onClick:()=>g(4),className:"action-button action-button-secondary",children:"Add Documents Now"})]})})(),l.jsx("div",{className:"success-actions",children:l.jsx("button",{type:"button",onClick:te,className:"action-button action-button-primary",children:"Create New Order"})})]})}):l.jsxs("div",{className:"step-container step4-review",children:[l.jsx("h2",{className:"step-title",children:"Review and Create Order"}),l.jsx("p",{className:"step-description",children:"Review all the information before creating the order."}),h&&b&&l.jsx("div",{className:"step-loading-overlay",children:l.jsxs("div",{className:"creation-progress-container",children:[l.jsx("h3",{className:"progress-title",children:"Creating Order..."}),l.jsx("div",{className:"progress-bar-container",children:l.jsx("div",{className:"progress-bar-fill",style:{width:`${b.currentStep/b.totalSteps*100}%`}})}),l.jsx("div",{className:"progress-steps-list",children:b.steps.map(R=>l.jsxs("div",{className:`progress-step-item progress-step-${R.status}`,children:[l.jsxs("div",{className:"progress-step-icon",children:[R.status==="completed"&&"",R.status==="in-progress"&&"",R.status==="pending"&&"",R.status==="error"&&""]}),l.jsx("span",{className:"progress-step-label",children:R.label})]},R.number))}),l.jsx("p",{className:"progress-message",children:b.message})]})}),l.jsxs("div",{className:"step4-sections",children:[l.jsxs("section",{className:"review-section",children:[l.jsx("h3",{className:"section-title",children:"Order Information"}),l.jsxs("div",{className:"review-highlight-grid",children:[l.jsxs("div",{className:"review-item-highlight",children:[l.jsx("span",{className:"review-label-highlight",children:"Order ID"}),l.jsx("span",{className:"review-value-highlight",children:r.orderId})]}),l.jsxs("div",{className:"review-item-highlight",children:[l.jsx("span",{className:"review-label-highlight",children:"Project"}),l.jsx("span",{className:"review-value-highlight",children:r.project})]}),l.jsxs("div",{className:"review-item-highlight",children:[l.jsx("span",{className:"review-label-highlight",children:"Sheets"}),l.jsx("span",{className:"review-value-highlight",children:r.sheets||"N/A"})]})]}),l.jsxs("div",{className:"review-grid review-grid-secondary",children:[l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Status:"}),l.jsx("span",{className:"review-value",children:r.status})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Responsible:"}),l.jsx("span",{className:"review-value",children:r.responsable})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Expected to:"}),l.jsx("span",{className:"review-value",children:new Date(r.expectedTo).toLocaleDateString("es-ES")})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Priority:"}),l.jsx("span",{className:"review-value",children:r.priority})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Colour:"}),l.jsx("span",{className:"review-value",children:r.colour||"N/A"})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Quality Control:"}),l.jsxs("label",{className:"toggle-switch",children:[l.jsx("input",{type:"checkbox",checked:N,onChange:R=>U(R.target.checked)}),l.jsx("span",{className:"toggle-slider"})]})]}),l.jsxs("div",{className:"review-item",children:[l.jsx("span",{className:"review-label",children:"Notification:"}),l.jsxs("label",{className:"toggle-switch",children:[l.jsx("input",{type:"checkbox",checked:A,onChange:R=>q(R.target.checked)}),l.jsx("span",{className:"toggle-slider"})]})]}),r.orderComment&&l.jsxs("div",{className:"review-item review-item-full",children:[l.jsx("span",{className:"review-label",children:"Order Comment:"}),l.jsx("span",{className:"review-value",children:r.orderComment})]})]})]}),l.jsxs("section",{className:"review-section",children:[l.jsxs("h3",{className:"section-title",children:["Selected Sheets (",r.selectedSheets.length,")"]}),l.jsx("div",{className:"review-table-container",children:l.jsxs("table",{className:"review-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Dimension"}),l.jsx("th",{children:"Colour"}),l.jsx("th",{children:"Qty"})]})}),l.jsx("tbody",{children:r.selectedSheets.map(R=>l.jsxs("tr",{children:[l.jsx("td",{children:R.dimension}),l.jsx("td",{children:R.colour}),l.jsx("td",{children:R.qty})]},R.sheetId))})]})}),l.jsxs("div",{className:"review-summary-item review-summary-item-centered",children:[l.jsx("span",{className:"summary-label",children:"Total Sheets Qty:"}),l.jsx("span",{className:"summary-value",children:_})]})]}),l.jsxs("section",{className:"review-section",children:[l.jsxs("h3",{className:"section-title",children:["Summary of Panels (",r.panels.length,")"]}),l.jsxs("div",{className:"review-summary-grid",children:[l.jsxs("div",{className:"review-summary-item",children:[l.jsx("span",{className:"summary-label",children:"Total Panels:"}),l.jsx("span",{className:"summary-value",children:r.panels.length})]}),l.jsxs("div",{className:"review-summary-item",children:[l.jsx("span",{className:"summary-label",children:"Total Area:"}),l.jsxs("span",{className:"summary-value",children:[ie.toFixed(2)," m"]})]}),l.jsxs("div",{className:"review-summary-item",children:[l.jsx("span",{className:"summary-label",children:"Cut Distance Total:"}),l.jsxs("span",{className:"summary-value",children:[C.toFixed(2)," m"]})]})]})]}),l.jsxs("section",{className:"review-section",children:[l.jsxs("div",{className:"review-section-header",children:[l.jsxs("h3",{className:"section-title",children:["Documents (",r.documents.length+r.selectedExistingDocuments.length,")"]}),l.jsx("button",{type:"button",onClick:()=>g(4),className:"review-action-button",disabled:h,children:r.documents.length===0&&r.selectedExistingDocuments.length===0?"Add Documents":"Manage Documents"})]}),r.documents.length===0&&r.selectedExistingDocuments.length===0?l.jsxs("div",{className:"review-empty-state",children:[l.jsx("span",{className:"empty-icon",children:""}),l.jsx("p",{className:"empty-message",children:"No documents added yet. You can add them now or after creating the order."})]}):l.jsxs("div",{className:"review-documents-list",children:[r.documents.map(R=>l.jsxs("div",{className:"review-document-item",children:[l.jsxs("div",{className:"review-document-info",children:[l.jsx("span",{className:"document-name",children:R.name}),l.jsx("span",{className:"document-category",children:R.category||"Uncategorized"})]}),l.jsx("span",{className:`document-status ${R.uploaded&&R.saved?"uploaded":"pending"}`,children:R.uploaded&&R.saved?" Uploaded":" Pending"})]},R.id)),r.selectedExistingDocuments.map(R=>l.jsxs("div",{className:"review-document-item",children:[l.jsxs("div",{className:"review-document-info",children:[l.jsx("span",{className:"document-name",children:R.name}),l.jsx("span",{className:"document-category",children:R.category||"Uncategorized"})]}),l.jsx("span",{className:"document-status linked",children:" To Link"})]},R.documentId))]})]})]}),z.errors.length>0&&l.jsxs("div",{className:"step-validation-errors",children:[l.jsx("p",{className:"validation-title",children:"Please correct the following errors:"}),l.jsx("ul",{children:z.errors.map((R,F)=>l.jsx("li",{children:R},F))})]}),y&&!y.success&&l.jsxs("div",{className:"step-error-message",children:[l.jsx("p",{children:l.jsx("strong",{children:"Error creating order:"})}),y.errors&&y.errors.length>0&&l.jsx("ul",{children:y.errors.map((R,F)=>l.jsx("li",{children:R},F))}),y.warnings&&y.warnings.length>0&&l.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid #fecaca"},children:[l.jsx("p",{children:l.jsx("strong",{children:"Warnings:"})}),l.jsx("ul",{children:y.warnings.map((R,F)=>l.jsx("li",{children:R},F))})]})]}),l.jsx("div",{className:"step4-actions",children:m?l.jsxs("div",{className:"confirm-dialog",children:[l.jsx("p",{className:"confirm-message",children:"Are you sure you want to create this order?"}),l.jsxs("div",{className:"confirm-actions",children:[l.jsx("button",{type:"button",onClick:()=>p(!1),className:"confirm-button confirm-button-cancel",disabled:h,children:"Cancelar"}),l.jsx("button",{type:"button",onClick:X,disabled:h,className:"confirm-button confirm-button-confirm",children:h?"Creating...":"Confirm"})]})]}):l.jsx("button",{type:"button",onClick:()=>p(!0),disabled:!z.isValid||h,className:"create-order-button",children:"Create Order"})})]})}const Xu=new Ds;function dp(r){if(!r)return new Date(0);const t=r.split(" ");if(t.length!==2)return new Date(0);const[a,n]=t,[o,u,h]=a.split("/").map(Number),[g,m,p]=n.split(":").map(Number);return new Date(h,u-1,o,g,m,p)}function hp(){return`doc-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function O1(){const{formData:r,updateFormData:t,validation:a,setLoading:n,setError:o,isLoading:u}=Ua(),[h,g]=k.useState(new Set),[m,p]=k.useState(new Map),[y,x]=k.useState(new Set),[b,j]=k.useState(new Set),[N,E]=k.useState(""),[A,B]=k.useState(new Map),[U,q]=k.useState(new Map),X=k.useRef(null),{data:te,isLoading:z}=ta({queryKey:["documents-by-project",r.project],queryFn:()=>Xu.getDocumentsByProject(r.project||""),enabled:!!r.project,staleTime:0}),ie=(L,V)=>{var oe,de,be,ze;if(!V.trim())return!0;const W=V.toLowerCase();return((oe=L.Name)==null?void 0:oe.toLowerCase().includes(W))||((de=L.File)==null?void 0:de.toLowerCase().includes(W))||((be=L.Comments)==null?void 0:be.toLowerCase().includes(W))||((ze=L.Category)==null?void 0:ze.toLowerCase().includes(W))},C=k.useMemo(()=>{if(!te||te.length===0)return[];const L=N.trim()?te.filter(W=>ie(W,N)):te;if(L.length===0)return[];const V=new Map;return L.forEach(W=>{const oe=W.Category||"Uncategorized";V.has(oe)||V.set(oe,[]),V.get(oe).push(W)}),V.forEach(W=>{W.sort((oe,de)=>{const be=dp(oe["Created at"]||"");return dp(de["Created at"]||"").getTime()-be.getTime()})}),Array.from(V.entries()).map(([W,oe])=>({category:W,documents:oe})).sort((W,oe)=>W.category==="Uncategorized"?1:oe.category==="Uncategorized"?-1:W.category.localeCompare(oe.category))},[te,N]),_=k.useMemo(()=>{if(!te||te.length===0)return[];const L=new Set;return te.forEach(V=>{const W=V.Category;W&&W.trim()&&L.add(W)}),Array.from(L).sort()},[te]),R=L=>{j(V=>{const W=new Set(V);return W.has(L)?W.delete(L):W.add(L),W})},F=L=>{const V=L.target.files;if(!V||V.length===0)return;const W=Array.from(V).map(oe=>({id:hp(),file:oe,name:oe.name,comments:"",category:"",uploaded:!1,saved:!1}));t({documents:[...r.documents,...W]}),X.current&&(X.current.value="")},K=L=>{t({documents:r.documents.filter(V=>V.id!==L)}),m.delete(L),p(new Map(m))},le=(L,V)=>{t({documents:r.documents.map(W=>W.id===L?et(Ue({},W),{name:V}):W)})},he=(L,V)=>{t({documents:r.documents.map(W=>W.id===L?et(Ue({},W),{comments:V}):W)})};k.useEffect(()=>{B(L=>{const V=new Map(L),W=new Set(r.documents.map(oe=>oe.id));r.documents.forEach(oe=>{V.has(oe.id)||V.set(oe.id,oe.category||"")});for(const[oe]of V)W.has(oe)||V.delete(oe);return V})},[r.documents]);const ge=(L,V)=>{B(W=>{const oe=new Map(W);return oe.set(L,V),oe}),q(W=>{const oe=new Map(W);return oe.set(L,!0),oe}),t({documents:r.documents.map(W=>W.id===L?et(Ue({},W),{category:V}):W)})},T=(L,V)=>{B(W=>{const oe=new Map(W);return oe.set(L,V),oe}),q(W=>{const oe=new Map(W);return oe.set(L,!1),oe}),t({documents:r.documents.map(W=>W.id===L?et(Ue({},W),{category:V}):W)})},Q=L=>{const V=A.get(L)||"";if(!V.trim())return _;const W=V.toLowerCase().trim();return _.filter(oe=>oe.toLowerCase().includes(W))},J=L=>S(null,null,function*(){if(!(L.uploaded&&L.saved)){if(!L.category||!L.category.trim()){const V="Category is required before uploading";m.set(L.id,V),p(new Map(m)),o(V);return}g(V=>new Set(V).add(L.id)),m.delete(L.id),p(new Map(m));try{n(!0),yield Xu.addDocument({file:L.file,Project:r.project,Name:L.name,Orders:r.orderId,Comments:L.comments||"",Category:L.category||""}),t({documents:r.documents.map(V=>V.id===L.id?et(Ue({},V),{uploaded:!0,saved:!0}):V)})}catch(V){const W=V instanceof Error?V.message:"Error uploading document";m.set(L.id,W),p(new Map(m)),o(W)}finally{g(V=>{const W=new Set(V);return W.delete(L.id),W}),n(!1)}}}),D=()=>S(null,null,function*(){const L=r.documents.filter(V=>!V.uploaded||!V.saved);for(const V of L)yield J(V)}),G=L=>{if(r.selectedExistingDocuments.some(W=>W.documentId===L["Document ID"]))t({selectedExistingDocuments:r.selectedExistingDocuments.filter(W=>W.documentId!==L["Document ID"])});else{const W={id:hp(),documentId:L["Document ID"],name:L.Name,file:L.File,comments:L.Comments||"",category:L.Category||"",createdAt:L["Created at"]||"",linked:!1};t({selectedExistingDocuments:[...r.selectedExistingDocuments,W]})}},ae=L=>S(null,null,function*(){if(!L.linked){x(V=>new Set(V).add(L.id)),m.delete(L.id),p(new Map(m));try{n(!0),yield Xu.linkDocumentToOrder(L.documentId,r.orderId),t({selectedExistingDocuments:r.selectedExistingDocuments.map(V=>V.id===L.id?et(Ue({},V),{linked:!0}):V)})}catch(V){const W=V instanceof Error?V.message:"Error linking document";m.set(L.id,W),p(new Map(m)),o(W)}finally{x(V=>{const W=new Set(V);return W.delete(L.id),W}),n(!1)}}}),ne=()=>S(null,null,function*(){const L=r.selectedExistingDocuments.filter(V=>!V.linked);for(const V of L)yield ae(V)}),se=L=>r.selectedExistingDocuments.some(V=>V.documentId===L);k.useEffect(()=>{const L=V=>{V.target.closest(".category-selector-wrapper")||q(new Map)};return document.addEventListener("mousedown",L),()=>{document.removeEventListener("mousedown",L)}},[]);const me=a.step5,ce=r.documents.length>0,_e=r.documents.some(L=>!L.uploaded||!L.saved);return l.jsxs("div",{className:"step-container step5-documents",children:[l.jsx("h2",{className:"step-title",children:"Upload Documents"}),l.jsx("p",{className:"step-description",children:"Upload or select documents related to this order. Documents will be saved to CC Flow App and registered in Documents section."}),r.project&&l.jsxs("div",{className:"step5-existing-documents",children:[l.jsxs("div",{className:"step5-existing-header",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"step5-section-title",children:"Existing Documents"}),l.jsx("p",{className:"step5-section-description",children:"Select existing documents from this project to link to this order."})]}),l.jsx("div",{className:"step5-search-container",children:l.jsxs("div",{className:"step5-search-input-wrapper",children:[l.jsx("span",{className:"step5-search-icon",children:""}),l.jsx("input",{type:"text",value:N,onChange:L=>E(L.target.value),className:"step5-search-input",placeholder:"Search documents..."}),N&&l.jsx("button",{type:"button",onClick:()=>E(""),className:"step5-search-clear","aria-label":"Clear search",children:""})]})})]}),z?l.jsxs("div",{className:"step-loading",children:[l.jsx(Sa,{}),l.jsx("span",{children:"Loading existing documents..."})]}):te&&te.length>0?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"step5-existing-list",children:C.length===0?l.jsx("div",{className:"step-empty",children:l.jsx("p",{children:N?`No documents found matching "${N}"`:"No documents found for this project."})}):C.map(({category:L,documents:V})=>{const W=b.has(L);return l.jsxs("div",{className:"document-category-group",children:[l.jsx("div",{className:"document-category-header",onClick:()=>R(L),children:l.jsxs("div",{className:"document-category-header-content",children:[l.jsx("span",{className:`document-category-chevron ${W?"expanded":""}`,children:""}),l.jsx("h4",{className:"document-category-title",children:L}),l.jsxs("span",{className:"document-category-count",children:["(",V.length," ",V.length===1?"document":"documents",")"]})]})}),W&&l.jsx("div",{className:"document-category-items",children:V.map(oe=>{const de=se(oe["Document ID"]),be=r.selectedExistingDocuments.find(Re=>Re.documentId===oe["Document ID"]),ze=be?y.has(be.id):!1,ke=be?m.get(be.id):void 0;return l.jsxs("div",{className:`existing-document-item ${de?"selected":""} ${be!=null&&be.linked?"linked":""} ${ke?"error":""}`,onClick:()=>G(oe),children:[l.jsx("div",{className:"existing-document-checkbox",children:l.jsx("input",{type:"checkbox",checked:de,onChange:()=>G(oe),onClick:Re=>Re.stopPropagation()})}),l.jsxs("div",{className:"existing-document-info",children:[l.jsx("div",{className:"existing-document-name",children:oe.Name}),l.jsx("div",{className:"existing-document-file",children:oe.File}),oe.Comments&&l.jsx("div",{className:"existing-document-comments",children:oe.Comments}),oe["Created at"]&&l.jsxs("div",{className:"existing-document-date",children:["Created: ",oe["Created at"]]})]}),de&&be&&l.jsxs("div",{className:"existing-document-actions",children:[be.linked?l.jsxs("div",{className:"document-status",children:[l.jsx("span",{className:"status-icon",children:""}),l.jsx("span",{children:"Linked"})]}):l.jsx("button",{type:"button",onClick:Re=>{Re.stopPropagation(),ae(be)},disabled:ze||u,className:"link-document-button",children:ze?l.jsxs(l.Fragment,{children:[l.jsx(Sa,{}),"Linking..."]}):"Link to Order"}),ke&&l.jsx("div",{className:"document-error",children:ke})]})]},oe["Document ID"])})})]},L)})}),r.selectedExistingDocuments.length>0&&l.jsx("div",{className:"step5-existing-actions",children:l.jsx("button",{type:"button",onClick:ne,disabled:u||y.size>0||r.selectedExistingDocuments.every(L=>L.linked),className:"link-all-button",children:u||y.size>0?l.jsxs(l.Fragment,{children:[l.jsx(Sa,{}),"Linking..."]}):`Link All Selected (${r.selectedExistingDocuments.filter(L=>!L.linked).length})`})})]}):l.jsx("div",{className:"step-empty",children:l.jsx("p",{children:"No existing documents found for this project."})})]}),l.jsxs("div",{className:"step5-upload-section",children:[l.jsx("h3",{className:"step5-section-title",children:"Upload New Documents"}),l.jsxs("div",{className:"step5-upload-area",children:[l.jsx("input",{ref:X,type:"file",id:"document-upload",className:"file-input",multiple:!0,accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png",onChange:F}),l.jsxs("label",{htmlFor:"document-upload",className:"upload-label",children:[l.jsx("span",{className:"upload-icon",children:""}),l.jsxs("div",{className:"upload-text",children:[l.jsx("strong",{children:"Click to select files"}),l.jsx("span",{children:"or drag and drop"}),l.jsx("span",{className:"upload-hint",children:"PDF, DOC, DOCX, XLS, XLSX, JPG, PNG (Max 50MB per file)"})]})]})]})]}),ce&&l.jsxs("div",{className:"step5-documents-list",children:[l.jsxs("div",{className:"step5-documents-header",children:[l.jsxs("h3",{children:["Documents (",r.documents.length,")"]}),_e&&l.jsx("button",{type:"button",onClick:D,disabled:u||h.size>0,className:"upload-all-button",children:u||h.size>0?l.jsxs(l.Fragment,{children:[l.jsx(Sa,{}),"Uploading..."]}):"Upload All"})]}),r.documents.map(L=>{var oe;const V=h.has(L.id),W=m.get(L.id);return l.jsxs("div",{className:`document-item ${L.uploaded&&L.saved?"uploaded":""} ${W?"error":""}`,children:[l.jsxs("div",{className:"document-item-header",children:[l.jsxs("div",{className:"document-item-info",children:[l.jsx("span",{className:"document-icon",children:L.uploaded&&L.saved?"":""}),l.jsxs("div",{className:"document-details",children:[l.jsx("input",{type:"text",value:L.name,onChange:de=>le(L.id,de.target.value),className:"document-name-input",placeholder:"Document name",disabled:L.saved}),l.jsx("span",{className:"document-file-name",children:L.file.name}),L.filePath&&l.jsx("span",{className:"document-path",children:L.filePath})]})]}),l.jsx("button",{type:"button",onClick:()=>K(L.id),className:"remove-document-button",disabled:V,children:""})]}),l.jsxs("div",{className:"document-item-body",children:[l.jsx("div",{className:"document-fields-row",children:l.jsxs("div",{className:"document-field",children:[l.jsxs("label",{className:"document-field-label",children:["Category ",l.jsx("span",{className:"required-asterisk",children:"*"})]}),l.jsxs("div",{className:"category-selector-wrapper",children:[l.jsx("input",{type:"text",value:A.get(L.id)||L.category||"",onChange:de=>ge(L.id,de.target.value),onFocus:()=>{L.saved||q(de=>{const be=new Map(de);return be.set(L.id,!0),be})},onBlur:()=>{setTimeout(()=>{q(de=>{const be=new Map(de);return be.set(L.id,!1),be})},200)},className:`document-category-input ${!L.category&&!L.saved?"error":""}`,placeholder:"Add or select a category",disabled:L.saved,autoComplete:"off",required:!0}),!L.saved&&U.get(L.id)&&Q(L.id).length>0&&l.jsxs("div",{className:"category-selector-dropdown",children:[l.jsx("div",{className:"category-selector-options",children:Q(L.id).slice(0,10).map(de=>l.jsx("div",{className:`category-selector-option ${L.category===de?"selected":""}`,onMouseDown:be=>be.preventDefault(),onClick:()=>T(L.id,de),children:de},de))}),Q(L.id).length>10&&l.jsxs("div",{className:"category-selector-footer",children:["Showing 10 of ",Q(L.id).length," categories"]})]}),!L.saved&&U.get(L.id)&&((oe=A.get(L.id))==null?void 0:oe.trim())&&Q(L.id).length===0&&l.jsx("div",{className:"category-selector-dropdown",children:l.jsx("div",{className:"category-selector-empty",children:"No categories found. The text you type will be used as the category."})})]}),!L.category&&!L.saved&&l.jsx("span",{className:"field-error",children:"Category is required"})]})}),l.jsx("textarea",{value:L.comments,onChange:de=>he(L.id,de.target.value),className:"document-comments",placeholder:"Comments (optional)",rows:2,disabled:L.saved}),W&&l.jsx("div",{className:"document-error",children:W}),l.jsx("div",{className:"document-actions",children:!L.uploaded||!L.saved?l.jsx("button",{type:"button",onClick:()=>J(L),disabled:V||u||!L.category||!L.category.trim(),className:"upload-document-button",children:V?l.jsxs(l.Fragment,{children:[l.jsx(Sa,{}),"Uploading..."]}):"Upload to CC Flow 2026"}):l.jsxs("div",{className:"document-status",children:[l.jsx("span",{className:"status-icon",children:""}),l.jsx("span",{children:"Uploaded and saved on CC Flow App 2026"})]})})]})]},L.id)})]}),!ce&&l.jsx("div",{className:"step-empty",children:l.jsx("p",{children:"No documents added yet. Select files above to get started."})}),me.errors.length>0&&l.jsx("div",{className:"step-validation-errors",children:l.jsx("ul",{children:me.errors.map((L,V)=>l.jsx("li",{children:L},V))})}),l.jsx("div",{className:"step5-info",children:l.jsxs("p",{children:[l.jsx("strong",{children:"Note:"})," Documents are optional. You can skip this step or add documents later. All uploaded documents will be associated with this order."]})})]})}function A1(){const{currentStep:r}=Ua();switch(r){case 1:return l.jsx(cp,{});case 2:return l.jsx(E1,{});case 3:return l.jsx(j1,{});case 4:return l.jsx(O1,{});case 5:return l.jsx(D1,{});default:return l.jsx(cp,{})}}const k1="/CC-logo-NEW_1.webp",R1=()=>{const{user:r,signOut:t}=bo(),{currentStep:a}=Ua();Oi("Creator of Orders - Cladding Creations");const u=a===2||a===3;return l.jsxs("div",{className:"creator-of-orders",children:[l.jsxs("div",{className:"creator-header",children:[l.jsxs("div",{className:"creator-header-left",children:[l.jsx("img",{src:k1,alt:"Cladding Creations",className:"creator-logo"}),l.jsx("h1",{children:"Creator of Orders"})]}),l.jsxs("div",{className:"user-info",children:[l.jsxs("span",{children:["Welcome, ",r==null?void 0:r.email]}),l.jsx("button",{onClick:()=>t(),className:"logout-button",children:"Logout"})]})]}),l.jsx("div",{className:`creator-content ${u?"step2-full-width":""}`,children:l.jsxs("div",{className:`wizard-container ${u?"step2-full-width":""}`,children:[l.jsx(d1,{}),l.jsx("div",{className:"wizard-steps-container",children:l.jsx(A1,{})}),l.jsx(h1,{})]})})]})},M1=()=>l.jsx(u1,{children:l.jsx(R1,{})}),U1=new Iv({defaultOptions:{queries:{staleTime:10*60*1e3,gcTime:30*60*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1}}}),q1=[{id:"cutting-information",label:"Cutting Information"},{id:"sheets",label:"Sheets"},{id:"project-allowances-section",label:"Allowances"},{id:"material-tables",label:"Material"},{id:"trips-over-time",label:"Trips"}],L1=r=>{const t=document.getElementById(r),a=document.querySelector(".main-header");if(t&&a){const n=a.offsetHeight,o=t.getBoundingClientRect().top+window.scrollY-n-8;window.scrollTo({top:o,behavior:"smooth"})}};function $1(){const r=yp(),[t,a]=k.useState(!0),[n,o]=k.useState(!1),[u,h]=k.useState(0),g=n1(r.pathname),p=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?"/CC-logo-NEW_1.webp":"/CC_Flow_summary_report/CC-logo-NEW_1.webp",y=[{id:"order-delivery",label:"Order Delivery",path:"/order-delivery",icon:""},{id:"analytics",label:"CC Analytics",path:"/analytics",icon:""}];return k.useEffect(()=>{const{animationDuration:x}=g;if(x===0){a(!1),o(!0);return}const b=x*.25,j=x*.5,N=x*.75,E=x,A=setTimeout(()=>{h(1)},b),B=setTimeout(()=>{h(2)},j),U=setTimeout(()=>{h(3)},N),q=setTimeout(()=>{a(!1),setTimeout(()=>{o(!0)},200)},E);return()=>{clearTimeout(A),clearTimeout(B),clearTimeout(U),clearTimeout(q)}},[g]),l.jsx("div",{className:`App ${t?"loading":"loaded"}`,children:l.jsxs(yb,{children:[g.showDataPreloader&&l.jsx(s1,{}),t&&l.jsx("div",{className:`loading-screen phase-${u}`,children:l.jsxs("div",{className:"loading-content",children:[l.jsx("img",{src:p,alt:"CC Logo",className:"loading-logo"}),l.jsx("div",{className:"loading-subtitle",children:g.loadingText})]})}),n&&l.jsx(l.Fragment,{children:l.jsx(aj,{children:l.jsxs(ib,{children:[l.jsx(oi,{path:"/",element:l.jsxs(l.Fragment,{children:[g.showHeader&&l.jsxs("header",{className:"main-header",children:[l.jsx("div",{className:"header-left",children:l.jsx(r1,{logoPath:p,menuItems:y})}),l.jsx("nav",{className:"header-nav",children:q1.map(x=>l.jsx("button",{className:"nav-link",onClick:()=>L1(x.id),children:x.label},x.id))})]}),l.jsx(xN,{})]})}),l.jsx(oi,{path:"/order-delivery",element:l.jsx(wN,{})}),l.jsx(oi,{path:"/analytics",element:l.jsx(a1,{})}),l.jsx(oi,{path:"/login",element:l.jsx(l1,{})}),l.jsx(oi,{path:"/creator-of-orders",element:l.jsx(o1,{children:l.jsx(M1,{})})})]})})})]})})}function z1(){return l.jsx(Hv,{client:U1,children:l.jsxs(i1,{children:[l.jsx(nb,{children:l.jsx($1,{})}),l.jsx(pb,{initialIsOpen:!1})]})})}hb.createRoot(document.getElementById("root")).render(l.jsx(ro.StrictMode,{children:l.jsx(z1,{})}))});export default B1();
